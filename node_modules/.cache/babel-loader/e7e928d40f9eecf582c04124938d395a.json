{"ast":null,"code":"import{Vector3d}from'../../../room/utils/Vector3d';export class RoomCamera{constructor(){this._targetId=-1;this._targetCategory=-2;this._targetLoc=null;this._moveDistance=0;this._previousMoveSpeed=0;this._maintainPreviousMoveSpeed=false;this._currentLoc=null;this._targetObjectLoc=void 0;this._limitedLocX=false;this._limitedLocY=false;this._centeredLocX=false;this._centeredLocY=false;this._screenWd=0;this._screenHt=0;this._scale=0;this._roomWd=0;this._roomHt=0;this._geometryUpdateId=-1;this._scaleChanged=false;this._followDuration=void 0;this._targetObjectLoc=new Vector3d();}get location(){return this._currentLoc;}get targetId(){return this._targetId;}set targetId(k){this._targetId=k;}get targetCategory(){return this._targetCategory;}set targetCategory(k){this._targetCategory=k;}get targetObjectLoc(){return this._targetObjectLoc;}set targetObjectLoc(k){this._targetObjectLoc.assign(k);}get limitedLocationX(){return this._limitedLocX;}set limitedLocationX(k){this._limitedLocX=k;}get limitedLocationY(){return this._limitedLocY;}set limitedLocationY(k){this._limitedLocY=k;}get centeredLocX(){return this._centeredLocX;}set centeredLocX(k){this._centeredLocX=k;}get centeredLocY(){return this._centeredLocY;}set centeredLocY(k){this._centeredLocY=k;}get screenWd(){return this._screenWd;}set screenWd(k){this._screenWd=k;}get screenHt(){return this._screenHt;}set screenHt(k){this._screenHt=k;}get scale(){return this._scale;}set scale(k){if(this._scale!=k){this._scale=k;this._scaleChanged=true;}}get roomWd(){return this._roomWd;}set roomWd(k){this._roomWd=k;}get roomHt(){return this._roomHt;}set roomHt(k){this._roomHt=k;}get geometryUpdateId(){return this._geometryUpdateId;}set geometryUpdateId(k){this._geometryUpdateId=k;}get isMoving(){if(!(this._targetLoc==null)&&!(this._currentLoc==null)){return true;}return false;}set target(k){let _local_2;if(this._targetLoc==null){this._targetLoc=new Vector3d();}if(!(this._targetLoc.x==k.x)||!(this._targetLoc.y==k.y)||!(this._targetLoc.z==k.z)){this._targetLoc.assign(k);_local_2=Vector3d.dif(this._targetLoc,this._currentLoc);this._moveDistance=_local_2.length;this._maintainPreviousMoveSpeed=true;}}dispose(){this._targetLoc=null;this._currentLoc=null;}initializeLocation(k){if(this._currentLoc!=null){return;}this._currentLoc=new Vector3d();this._currentLoc.assign(k);}resetLocation(k){if(this._currentLoc==null){this._currentLoc=new Vector3d();}this._currentLoc.assign(k);}update(k,_arg_2){let _local_3;let _local_4;let _local_5;let _local_6;let _local_7;if(this._followDuration>0&&!(this._targetLoc==null)&&!(this._currentLoc==null)){if(this._scaleChanged){this._scaleChanged=false;this._currentLoc=this._targetLoc;this._targetLoc=null;return;}_local_3=Vector3d.dif(this._targetLoc,this._currentLoc);if(_local_3.length>this._moveDistance){this._moveDistance=_local_3.length;}if(_local_3.length<=_arg_2){this._currentLoc=this._targetLoc;this._targetLoc=null;this._previousMoveSpeed=0;}else{_local_4=Math.sin(Math.PI*_local_3.length/this._moveDistance);_local_5=_arg_2*0.5;_local_6=this._moveDistance/RoomCamera.MOVE_SPEED_DENOMINATOR;_local_7=_local_5+(_local_6-_local_5)*_local_4;if(this._maintainPreviousMoveSpeed){if(_local_7<this._previousMoveSpeed){_local_7=this._previousMoveSpeed;if(_local_7>_local_3.length){_local_7=_local_3.length;}}else{this._maintainPreviousMoveSpeed=false;}}this._previousMoveSpeed=_local_7;_local_3.divide(_local_3.length);_local_3.multiply(_local_7);this._currentLoc=Vector3d.sum(this._currentLoc,_local_3);}}}reset(){this._geometryUpdateId=-1;}activateFollowing(k){this._followDuration=k;}}RoomCamera.MOVE_SPEED_DENOMINATOR=12;","map":null,"metadata":{},"sourceType":"module"}