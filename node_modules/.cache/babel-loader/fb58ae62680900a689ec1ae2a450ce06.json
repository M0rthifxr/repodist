{"ast":null,"code":"import{GroupSaveColorsComposer}from'@nitrots/nitro-renderer';import classNames from'classnames';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{AutoGrid,Base,Column,Flex,Grid,Text}from'../../../../common';import{useGroupsContext}from'../../GroupsContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const GroupTabColorsView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null}=props;const[colors,setColors]=useState(null);const{groupCustomize=null}=useGroupsContext();const getGroupColor=colorIndex=>{if(colorIndex===0)return groupCustomize.groupColorsA.find(color=>color.id===colors[colorIndex]).color;return groupCustomize.groupColorsB.find(color=>color.id===colors[colorIndex]).color;};const selectColor=(colorIndex,colorId)=>{setColors(prevValue=>{const newColors=[...prevValue];newColors[colorIndex]=colorId;return newColors;});};const saveColors=useCallback(()=>{if(!groupData||!colors||!colors.length)return false;if(groupData.groupColors===colors)return true;if(groupData.groupId<=0){setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupColors=[...colors];return newValue;});return true;}SendMessageComposer(new GroupSaveColorsComposer(groupData.groupId,colors[0],colors[1]));return true;},[groupData,colors,setGroupData]);useEffect(()=>{if(!groupCustomize.groupColorsA||!groupCustomize.groupColorsB||groupData.groupColors)return;const groupColors=[groupCustomize.groupColorsA[0].id,groupCustomize.groupColorsB[0].id];setGroupData(prevValue=>{return{...prevValue,groupColors};});},[groupCustomize,groupData.groupColors,setGroupData]);useEffect(()=>{if(groupData.groupId<=0){setColors(groupData.groupColors?[...groupData.groupColors]:null);return;}setColors(groupData.groupColors);},[groupData]);useEffect(()=>{setCloseAction({action:saveColors});return()=>setCloseAction(null);},[setCloseAction,saveColors]);if(!colors)return null;return/*#__PURE__*/_jsxs(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Column,{size:2,gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('group.edit.color.guild.color')}),groupData.groupColors&&groupData.groupColors.length>0&&/*#__PURE__*/_jsxs(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/_jsx(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(0)}}),/*#__PURE__*/_jsx(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(1)}})]})]}),/*#__PURE__*/_jsxs(Column,{size:5,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('group.edit.color.primary.color')}),/*#__PURE__*/_jsx(AutoGrid,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:groupData.groupColors&&groupCustomize.groupColorsA&&groupCustomize.groupColorsA.map((item,index)=>{return/*#__PURE__*/_jsx(\"div\",{className:'group-badge-color-swatch cursor-pointer'+classNames({' active':groupData.groupColors[0]===item.id}),style:{backgroundColor:'#'+item.color},onClick:()=>selectColor(0,item.id)},index);})})]}),/*#__PURE__*/_jsxs(Column,{size:5,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('group.edit.color.secondary.color')}),/*#__PURE__*/_jsx(AutoGrid,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:groupData.groupColors&&groupCustomize.groupColorsB&&groupCustomize.groupColorsB.map((item,index)=>{return/*#__PURE__*/_jsx(\"div\",{className:'group-badge-color-swatch cursor-pointer'+classNames({' active':groupData.groupColors[1]===item.id}),style:{backgroundColor:'#'+item.color},onClick:()=>selectColor(1,item.id)},index);})})]})]});};","map":null,"metadata":{},"sourceType":"module"}