{"ast":null,"code":"import{BannedUsersFromRoomEvent,RoomBannedUsersComposer,RoomUnbanUserComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{Button,Column,Flex,Grid,Text,UserProfileIconView}from'../../../../common';import{UseMessageEventHook}from'../../../../hooks';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export const NavigatorRoomSettingsModTabView=props=>{var _bannedUsers$find;const{roomData=null,handleChange=null}=props;const[selectedUserId,setSelectedUserId]=useState(-1);const[bannedUsers,setBannedUsers]=useState([]);const onBannedUsersFromRoomEvent=useCallback(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setBannedUsers(parser.bannedUsers);},[roomData]);UseMessageEventHook(BannedUsersFromRoomEvent,onBannedUsersFromRoomEvent);const unBanUser=useCallback(userId=>{setBannedUsers(prevValue=>{const newValue=[...prevValue];const index=newValue.findIndex(value=>value.userId===userId);if(index>=0)newValue.splice(index,1);return newValue;});SendMessageComposer(new RoomUnbanUserComposer(userId,roomData.roomId));setSelectedUserId(-1);},[roomData]);useEffect(()=>{SendMessageComposer(new RoomBannedUsersComposer(roomData.roomId));},[roomData.roomId]);return/*#__PURE__*/_jsxs(Grid,{overflow:\"auto\",children:[/*#__PURE__*/_jsxs(Column,{size:6,children:[/*#__PURE__*/_jsxs(Text,{bold:true,children:[LocalizeText('navigator.roomsettings.moderation.banned.users'),\" (\",bannedUsers.length,\")\"]}),/*#__PURE__*/_jsx(Flex,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:/*#__PURE__*/_jsx(Column,{fullWidth:true,overflow:\"auto\",gap:1,children:bannedUsers&&bannedUsers.length>0&&bannedUsers.map((user,index)=>{return/*#__PURE__*/_jsxs(Flex,{shrink:true,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(UserProfileIconView,{userName:user.userName}),/*#__PURE__*/_jsxs(Text,{pointer:true,grow:true,onClick:event=>setSelectedUserId(user.userId),children:[\" \",user.userName]})]},index);})})}),/*#__PURE__*/_jsxs(Button,{disabled:selectedUserId<=0,onClick:event=>unBanUser(selectedUserId),children:[LocalizeText('navigator.roomsettings.moderation.unban'),\" \",selectedUserId>0&&((_bannedUsers$find=bannedUsers.find(user=>user.userId===selectedUserId))===null||_bannedUsers$find===void 0?void 0:_bannedUsers$find.userName)]})]}),/*#__PURE__*/_jsxs(Column,{size:6,children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.mute.header')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowMute===1,onChange:event=>handleChange('moderation_mute',event.target.checked?1:0)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.kick.header')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowKick===0,onChange:event=>handleChange('moderation_kick',event.target.checked?0:2)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.roomsettings.moderation.all')})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowKick===1||roomData.moderationSettings.allowKick===0,disabled:roomData.moderationSettings.allowKick===0,onChange:event=>handleChange('moderation_kick',event.target.checked?1:2)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.ban.header')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowBan===1,onChange:event=>handleChange('moderation_ban',event.target.checked?1:0)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}