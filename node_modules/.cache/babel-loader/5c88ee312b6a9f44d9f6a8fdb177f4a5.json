{"ast":null,"code":"import{AnimationFrameData}from'./AnimationFrameData';import{AnimationFrameDirectionalData}from'./AnimationFrameDirectionalData';export class AnimationFrameSequenceData{constructor(loopCount,isRandom){this._frames=void 0;this._frameIndexes=void 0;this._frameRepeats=void 0;this._isRandom=void 0;this._loopCount=void 0;this._frames=[];this._frameIndexes=[];this._frameRepeats=[];this._isRandom=isRandom;this._loopCount=loopCount<1?1:loopCount;}get isRandom(){return this._isRandom;}get frameCount(){return this._frameIndexes.length*this._loopCount;}dispose(){this._frames=[];}initialize(){let frameIndex=this._frameIndexes.length-1;let realIndex=-1;let nextIndex=1;while(frameIndex>=0){if(this._frameIndexes[frameIndex]===realIndex){nextIndex++;}else{realIndex=this._frameIndexes[frameIndex];nextIndex=1;}this._frameRepeats[frameIndex]=nextIndex;frameIndex--;}}addFrame(id,x,y,randomX,randomY,directionalOffset){let repeats=1;if(this._frames.length>0){const frame=this._frames[this._frames.length-1];if(frame.id===id&&!frame.hasDirectionalOffsets()&&frame.x===x&&frame.y===y&&frame.randomX===randomX&&randomX===0&&frame.randomY===randomY&&randomY===0){repeats+=frame.repeats;this._frames.pop();}}const frame=directionalOffset?new AnimationFrameDirectionalData(id,x,y,randomX,randomY,directionalOffset,repeats):new AnimationFrameData(id,x,y,randomX,randomY,repeats);this._frames.push(frame);this._frameIndexes.push(this._frames.length-1);this._frameRepeats.push(1);}getFrame(frameCount){if(!this._frames.length||frameCount<0||frameCount>=this.frameCount)return null;return this._frames[this._frameIndexes[frameCount%this._frameIndexes.length]];}getFrameIndex(frameCount){if(frameCount<0||frameCount>=this.frameCount)return-1;if(this._isRandom){frameCount=Math.round(Math.random()*this._frameIndexes.length);if(frameCount===this._frameIndexes.length)frameCount--;}return frameCount;}getRepeats(frameCount){if(frameCount<0||frameCount>=this.frameCount)return 0;return this._frameRepeats[frameCount%this._frameRepeats.length];}}","map":null,"metadata":{},"sourceType":"module"}