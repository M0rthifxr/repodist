{"ast":null,"code":"import{RoomObjectBadgeAssetEvent}from'../../../events/RoomObjectBadgeAssetEvent';import{RoomObjectWidgetRequestEvent}from'../../../events/RoomObjectWidgetRequestEvent';import{ObjectGroupBadgeUpdateMessage}from'../../../messages/ObjectGroupBadgeUpdateMessage';import{ObjectSelectedMessage}from'../../../messages/ObjectSelectedMessage';import{RoomObjectVariable}from'../../RoomObjectVariable';import{FurnitureBadgeDisplayLogic}from'./FurnitureBadgeDisplayLogic';export class FurnitureAchievementResolutionLogic extends FurnitureBadgeDisplayLogic{getEventTypes(){const types=[RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_OPEN,RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_ENGRAVING,RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_FAILED,RoomObjectBadgeAssetEvent.LOAD_BADGE];return this.mergeTypes(super.getEventTypes(),types);}processUpdateMessage(message){super.processUpdateMessage(message);if(message instanceof ObjectGroupBadgeUpdateMessage){if(message.assetName!=='loading_icon'){this.object.model.setValue(RoomObjectVariable.FURNITURE_BADGE_VISIBLE_IN_STATE,FurnitureAchievementResolutionLogic.BADGE_VISIBLE_IN_STATE);}}if(message instanceof ObjectSelectedMessage){if(!this.eventDispatcher||!this.object)return;this.eventDispatcher.dispatchEvent(new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.CLOSE_FURNI_CONTEXT_MENU,this.object));}}useObject(){if(!this.object||!this.eventDispatcher)return;let event=null;switch(this.object.getState(0)){case FurnitureAchievementResolutionLogic.STATE_RESOLUTION_NOT_STARTED:case FurnitureAchievementResolutionLogic.STATE_RESOLUTION_IN_PROGRESS:event=new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_OPEN,this.object);break;case FurnitureAchievementResolutionLogic.STATE_RESOLUTION_ACHIEVED:event=new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_ENGRAVING,this.object);break;case FurnitureAchievementResolutionLogic.STATE_RESOLUTION_FAILED:event=new RoomObjectWidgetRequestEvent(RoomObjectWidgetRequestEvent.ACHIEVEMENT_RESOLUTION_FAILED,this.object);break;}if(event)this.eventDispatcher.dispatchEvent(event);}updateBadge(badgeId){if(badgeId===FurnitureAchievementResolutionLogic.ACH_NOT_SET)return;super.updateBadge(badgeId);}}FurnitureAchievementResolutionLogic.STATE_RESOLUTION_NOT_STARTED=0;FurnitureAchievementResolutionLogic.STATE_RESOLUTION_IN_PROGRESS=1;FurnitureAchievementResolutionLogic.STATE_RESOLUTION_ACHIEVED=2;FurnitureAchievementResolutionLogic.STATE_RESOLUTION_FAILED=3;FurnitureAchievementResolutionLogic.ACH_NOT_SET='ach_0';FurnitureAchievementResolutionLogic.BADGE_VISIBLE_IN_STATE=2;","map":null,"metadata":{},"sourceType":"module"}