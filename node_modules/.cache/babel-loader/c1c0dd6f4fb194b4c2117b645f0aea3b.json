{"ast":null,"code":"import{GetFurnitureData,GetProductDataForLocalization,LocalizeText,ProductTypeEnum}from'..';import{Product}from'./Product';export class Offer{constructor(offerId,localizationId,isRentOffer,priceInCredits,priceInActivityPoints,activityPointType,giftable,clubLevel,products,bundlePurchaseAllowed){this._pricingModel=void 0;this._priceType=void 0;this._offerId=void 0;this._localizationId=void 0;this._priceInCredits=void 0;this._priceInActivityPoints=void 0;this._activityPointType=void 0;this._giftable=void 0;this._isRentOffer=void 0;this._page=void 0;this._clubLevel=0;this._products=void 0;this._badgeCode=void 0;this._bundlePurchaseAllowed=false;this._offerId=offerId;this._localizationId=localizationId;this._isRentOffer=isRentOffer;this._priceInCredits=priceInCredits;this._priceInActivityPoints=priceInActivityPoints;this._activityPointType=activityPointType;this._giftable=giftable;this._clubLevel=clubLevel;this._products=products;this._bundlePurchaseAllowed=bundlePurchaseAllowed;this.setPricingModelForProducts();this.setPricingType();for(const product of products){if(product.productType===ProductTypeEnum.BADGE){this._badgeCode=product.extraParam;break;}}}activate(){}get clubLevel(){return this._clubLevel;}get page(){return this._page;}set page(k){this._page=k;}get offerId(){return this._offerId;}get localizationId(){return this._localizationId;}get priceInCredits(){return this._priceInCredits;}get priceInActivityPoints(){return this._priceInActivityPoints;}get activityPointType(){return this._activityPointType;}get giftable(){return this._giftable;}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const products=Product.stripAddonProducts(this._products);if(products.length)return products[0];return null;}get pricingModel(){return this._pricingModel;}get priceType(){return this._priceType;}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed;}get isRentOffer(){return this._isRentOffer;}get badgeCode(){return this._badgeCode;}get localizationName(){const productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.name;return LocalizeText(this._localizationId);}get localizationDescription(){const productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.description;return LocalizeText(this._localizationId);}get isLazy(){return false;}get products(){return this._products;}setPricingModelForProducts(){const products=Product.stripAddonProducts(this._products);if(products.length===1){if(products[0].productCount===1){this._pricingModel=Offer.PRICING_MODEL_SINGLE;}else{this._pricingModel=Offer.PRICING_MODEL_MULTI;}}else if(products.length>1){this._pricingModel=Offer.PRICING_MODEL_BUNDLE;}else{this._pricingModel=Offer.PRICING_MODEL_UNKNOWN;}}setPricingType(){if(this._priceInCredits>0&&this._priceInActivityPoints>0){this._priceType=Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS;}else if(this._priceInCredits>0){this._priceType=Offer.PRICE_TYPE_CREDITS;}else if(this._priceInActivityPoints>0){this._priceType=Offer.PRICE_TYPE_ACTIVITYPOINTS;}else{this._priceType=Offer.PRICE_TYPE_NONE;}}clone(){const products=[];const productData=GetProductDataForLocalization(this.localizationId);for(const product of this._products){const furnitureData=GetFurnitureData(product.productClassId,product.productType);products.push(new Product(product.productType,product.productClassId,product.extraParam,product.productCount,productData,furnitureData));}const offer=new Offer(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,products,this.bundlePurchaseAllowed);offer.page=this.page;return offer;}}Offer.PRICING_MODEL_UNKNOWN='pricing_model_unknown';Offer.PRICING_MODEL_SINGLE='pricing_model_single';Offer.PRICING_MODEL_MULTI='pricing_model_multi';Offer.PRICING_MODEL_BUNDLE='pricing_model_bundle';Offer.PRICING_MODEL_FURNITURE='pricing_model_furniture';Offer.PRICE_TYPE_NONE='price_type_none';Offer.PRICE_TYPE_CREDITS='price_type_credits';Offer.PRICE_TYPE_ACTIVITYPOINTS='price_type_activitypoints';Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS='price_type_credits_and_activitypoints';","map":null,"metadata":{},"sourceType":"module"}