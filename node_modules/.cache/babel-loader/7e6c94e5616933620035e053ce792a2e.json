{"ast":null,"code":"import{EventDispatcher}from'../../../core/events/EventDispatcher';import{NitroEvent}from'../../../core/events/NitroEvent';import{ProductData}from'./ProductData';export class ProductDataLoader extends EventDispatcher{constructor(products){super();this._products=void 0;this._products=products;}dispose(){this._products=null;}loadProductData(url){if(!url)return;fetch(url).then(response=>response.json()).then(data=>this.onProductDataLoadedEvent(data)).catch(err=>this.onProductDataError(err));}onProductDataLoadedEvent(data){if(!data)return;this.parseProducts(data.productdata);this.dispatchEvent(new NitroEvent(ProductDataLoader.PDP_PRODUCT_DATA_READY));}onProductDataError(error){if(!error)return;this.dispatchEvent(new NitroEvent(ProductDataLoader.PDP_PRODUCT_DATA_FAILED));}parseProducts(data){if(!data)return;for(const product of data.product)product&&this._products.set(product.code,new ProductData(product.code,product.name,product.description));}}ProductDataLoader.PDP_PRODUCT_DATA_READY='PDP_PRODUCT_DATA_READY';ProductDataLoader.PDP_PRODUCT_DATA_FAILED='PDP_PRODUCT_DATA_FAILED';","map":null,"metadata":{},"sourceType":"module"}