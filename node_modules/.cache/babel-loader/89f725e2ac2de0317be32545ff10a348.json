{"ast":null,"code":"import{GroupDeleteComposer,GroupSaveInformationComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{CreateLinkEvent,LocalizeText,NotificationUtilities,SendMessageComposer}from'../../../../api';import{Base,Button,Column,Flex,Text}from'../../../../common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const GroupTabIdentityView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null,close=null,isCreator=false,availableRooms=[]}=props;const[groupName,setGroupName]=useState('');const[groupDescription,setGroupDescription]=useState('');const[groupHomeroomId,setGroupHomeroomId]=useState(-1);const deleteGroup=()=>{if(!groupData||groupData.groupId<=0)return;NotificationUtilities.confirm(LocalizeText('group.deleteconfirm.desc'),()=>{SendMessageComposer(new GroupDeleteComposer(groupData.groupId));if(close)close();},null,null,null,LocalizeText('group.deleteconfirm.title'));};const saveIdentity=useCallback(()=>{if(!groupData||!groupName||!groupName.length)return false;if(groupName===groupData.groupName&&groupDescription===groupData.groupDescription)return true;if(groupData.groupId<=0){if(groupHomeroomId<=0)return false;setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupName=groupName;newValue.groupDescription=groupDescription;newValue.groupHomeroomId=groupHomeroomId;return newValue;});return true;}SendMessageComposer(new GroupSaveInformationComposer(groupData.groupId,groupName,groupDescription||''));return true;},[groupData,groupName,groupDescription,groupHomeroomId,setGroupData]);useEffect(()=>{setGroupName(groupData.groupName||'');setGroupDescription(groupData.groupDescription||'');setGroupHomeroomId(groupData.groupHomeroomId);},[groupData]);useEffect(()=>{setCloseAction({action:saveIdentity});return()=>setCloseAction(null);},[setCloseAction,saveIdentity]);if(!groupData)return null;return/*#__PURE__*/_jsxs(Column,{justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.name')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:groupName,maxLength:29,onChange:event=>setGroupName(event.target.value)})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.desc')}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control form-control-sm\",value:groupDescription,maxLength:254,onChange:event=>setGroupDescription(event.target.value)})]}),isCreator&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.base')}),/*#__PURE__*/_jsx(Column,{fullWidth:true,gap:1,children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:groupHomeroomId,onChange:event=>setGroupHomeroomId(parseInt(event.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:-1,disabled:true,children:LocalizeText('group.edit.base.select.room')}),availableRooms&&availableRooms.map((room,index)=>/*#__PURE__*/_jsx(\"option\",{value:room.id,children:room.name},index))]})})]}),/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(Base,{className:\"col-3\",children:\"\\xA0\"}),/*#__PURE__*/_jsx(Text,{small:true,children:LocalizeText('group.edit.base.warning')})]})]})]}),!isCreator&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:deleteGroup,children:LocalizeText('group.delete')}),isCreator&&/*#__PURE__*/_jsx(Text,{underline:true,center:true,fullWidth:true,pointer:true,onClick:event=>CreateLinkEvent('navigator/create'),children:LocalizeText('group.createroom')})]});};","map":null,"metadata":{},"sourceType":"module"}