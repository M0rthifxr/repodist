{"ast":null,"code":"import{UpdateFloorPropertiesMessageComposer}from'@nitrots/nitro-renderer';import{useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../api';import{Button,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView}from'../../../common';import{UseMountEffect}from'../../../hooks';import{ConvertTileMapToString}from'../common/ConvertMapToString';import{convertNumbersForSaving}from'../common/Utils';import{useFloorplanEditorContext}from'../FloorplanEditorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const FloorplanImportExportView=props=>{const{onCloseClick=null}=props;const[map,setMap]=useState('');const{originalFloorplanSettings=null}=useFloorplanEditorContext();const saveFloorChanges=()=>{SendMessageComposer(new UpdateFloorPropertiesMessageComposer(map.split('\\n').join('\\r'),originalFloorplanSettings.entryPoint[0],originalFloorplanSettings.entryPoint[1],originalFloorplanSettings.entryPointDir,convertNumbersForSaving(originalFloorplanSettings.thicknessWall),convertNumbersForSaving(originalFloorplanSettings.thicknessFloor),originalFloorplanSettings.wallHeight-1));};UseMountEffect(()=>{setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap));});return/*#__PURE__*/_jsxs(NitroCardView,{theme:\"primary\",className:\"floorplan-import-export\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('floor.plan.editor.import.export'),onCloseClick:onCloseClick}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"h-100\",value:map,onChange:event=>setMap(event.target.value)}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{onClick:event=>setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap)),children:LocalizeText('floor.plan.editor.revert.to.last.received.map')}),/*#__PURE__*/_jsx(Button,{onClick:saveFloorChanges,children:LocalizeText('floor.plan.editor.save')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}