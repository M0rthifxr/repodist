{"ast":null,"code":"import{MouseEventType}from'@nitrots/nitro-renderer';import{useEffect,useRef,useState}from'react';import{GetUserProfile,LocalizeText,OpenMessengerChat}from'../../../../api';import{Base,LayoutAvatarImageView,LayoutBadgeImageView}from'../../../../common';import{useFriends}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const FriendBarItemView=props=>{const{friend=null}=props;const[isVisible,setVisible]=useState(false);const{followFriend=null}=useFriends();const elementRef=useRef();useEffect(()=>{const onClick=event=>{const element=elementRef.current;if(!element)return;if(event.target!==element&&!element.contains(event.target)){setVisible(false);}};document.addEventListener(MouseEventType.MOUSE_CLICK,onClick);return()=>document.removeEventListener(MouseEventType.MOUSE_CLICK,onClick);},[]);if(!friend){return/*#__PURE__*/_jsxs(\"div\",{ref:elementRef,className:\"btn find-friends friend-bar-item friend-bar-search\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"friend-bar-item-head position-absolute\"}),/*#__PURE__*/_jsx(\"div\",{className:\"friend-bar-text\",children:LocalizeText('friend.bar.find.title')})]});}return/*#__PURE__*/_jsxs(\"div\",{ref:elementRef,className:'btn find-friends-active friend-bar-item '+(isVisible?'friend-bar-item-active':''),onClick:event=>setVisible(prevValue=>!prevValue),children:[/*#__PURE__*/_jsxs(\"div\",{className:`friend-bar-item-head position-absolute ${friend.id>0?'avatar':'group'}`,children:[friend.id>0&&/*#__PURE__*/_jsx(LayoutAvatarImageView,{headOnly:true,figure:friend.figure,direction:2}),friend.id<=0&&/*#__PURE__*/_jsx(LayoutBadgeImageView,{isGroup:true,badgeCode:friend.figure})]}),/*#__PURE__*/_jsx(\"div\",{className:\"friend-bar-text\",children:friend.name}),isVisible&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex pt-3 justify-content-between\",children:[/*#__PURE__*/_jsx(Base,{className:\"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer\",onClick:event=>OpenMessengerChat(friend.id)}),friend.followingAllowed&&/*#__PURE__*/_jsx(Base,{className:\"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer\",onClick:event=>followFriend(friend)}),/*#__PURE__*/_jsx(Base,{className:\"nitro-friends-spritesheet icon-profile cursor-pointer\",onClick:event=>GetUserProfile(friend.id)})]})]});};","map":null,"metadata":{},"sourceType":"module"}