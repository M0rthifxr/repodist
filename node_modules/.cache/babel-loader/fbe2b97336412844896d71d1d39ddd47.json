{"ast":null,"code":"import{HabboSearchComposer,HabboSearchResultEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,OpenMessengerChat,SendMessageComposer}from'../../../../api';import{Base,Column,Flex,NitroCardAccordionItemView,NitroCardAccordionSetView,Text,UserProfileIconView}from'../../../../common';import{useFriends,UseMessageEventHook}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const FriendsSearchView=props=>{const{...rest}=props;const[searchValue,setSearchValue]=useState('');const[friendResults,setFriendResults]=useState(null);const[otherResults,setOtherResults]=useState(null);const{canRequestFriend=null,requestFriend=null}=useFriends();const onHabboSearchResultEvent=useCallback(event=>{const parser=event.getParser();setFriendResults(parser.friends);setOtherResults(parser.others);},[]);UseMessageEventHook(HabboSearchResultEvent,onHabboSearchResultEvent);useEffect(()=>{if(!searchValue||!searchValue.length)return;const timeout=setTimeout(()=>{if(!searchValue||!searchValue.length)return;SendMessageComposer(new HabboSearchComposer(searchValue));},500);return()=>clearTimeout(timeout);},[searchValue]);return/*#__PURE__*/_jsx(NitroCardAccordionSetView,{...rest,children:/*#__PURE__*/_jsxs(Column,{className:\"h-100\",children:[/*#__PURE__*/_jsx(Column,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-100 friend-search\",placeholder:LocalizeText('generic.search'),value:searchValue,maxLength:50,onChange:event=>setSearchValue(event.target.value)})}),/*#__PURE__*/_jsxs(Column,{children:[friendResults&&/*#__PURE__*/_jsxs(_Fragment,{children:[friendResults.length===0&&/*#__PURE__*/_jsx(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.nofriendsfound')}),friendResults.length>0&&/*#__PURE__*/_jsxs(Column,{gap:0,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.friendscaption',['cnt'],[friendResults.length.toString()])}),/*#__PURE__*/_jsx(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),/*#__PURE__*/_jsx(Column,{gap:0,children:friendResults.map(result=>{return/*#__PURE__*/_jsxs(NitroCardAccordionItemView,{justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(UserProfileIconView,{userId:result.avatarId}),/*#__PURE__*/_jsx(\"div\",{children:result.avatarName})]}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",gap:1,children:result.isAvatarOnline&&/*#__PURE__*/_jsx(Base,{className:\"nitro-friends-spritesheet icon-chat cursor-pointer\",onClick:event=>OpenMessengerChat(result.avatarId),title:LocalizeText('friendlist.tip.im')})})]},result.avatarId);})})]})]}),otherResults&&/*#__PURE__*/_jsxs(_Fragment,{children:[otherResults.length===0&&/*#__PURE__*/_jsx(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.noothersfound')}),otherResults.length>0&&/*#__PURE__*/_jsxs(Column,{gap:0,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.otherscaption',['cnt'],[otherResults.length.toString()])}),/*#__PURE__*/_jsx(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),/*#__PURE__*/_jsx(Column,{gap:0,children:otherResults.map(result=>{return/*#__PURE__*/_jsxs(NitroCardAccordionItemView,{justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(UserProfileIconView,{userId:result.avatarId}),/*#__PURE__*/_jsx(\"div\",{children:result.avatarName})]}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",gap:1,children:canRequestFriend(result.avatarId)&&/*#__PURE__*/_jsx(Base,{className:\"nitro-friends-spritesheet icon-add cursor-pointer\",onClick:event=>requestFriend(result.avatarId,result.avatarName),title:LocalizeText('friendlist.tip.addfriend')})})]},result.avatarId);})})]})]})]})]})});};","map":null,"metadata":{},"sourceType":"module"}