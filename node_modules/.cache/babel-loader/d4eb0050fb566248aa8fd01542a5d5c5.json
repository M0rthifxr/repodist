{"ast":null,"code":"import{AvatarAction,RoomSessionWordQuizEvent,RoomWidgetEnum}from'@nitrots/nitro-renderer';import{RoomWidgetHandler}from'.';import{GetRoomEngine}from'../../GetRoomEngine';import{RoomWidgetWordQuizUpdateEvent}from'../events/RoomWidgetWordQuizUpdateEvent';export class WordQuizWidgetHandler extends RoomWidgetHandler{processEvent(event){const roomQuizEvent=event;let widgetEvent;switch(event.type){case RoomSessionWordQuizEvent.ANSWERED:const roomId=this.container.roomSession.roomId;const userData=this.container.roomSession.userDataManager.getUserData(roomQuizEvent.userId);if(!userData)return;widgetEvent=new RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent.QUESTION_ANSWERED,roomQuizEvent.id);widgetEvent.value=roomQuizEvent.value;widgetEvent.userId=roomQuizEvent.userId;widgetEvent.answerCounts=roomQuizEvent.answerCounts;if(widgetEvent.value==='0'){GetRoomEngine().updateRoomObjectUserGesture(roomId,userData.roomIndex,AvatarAction.getGestureId(AvatarAction.GESTURE_SAD));}else{GetRoomEngine().updateRoomObjectUserGesture(roomId,userData.roomIndex,AvatarAction.getGestureId(AvatarAction.GESTURE_SMILE));}break;case RoomSessionWordQuizEvent.FINISHED:widgetEvent=new RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent.QUESTION_FINISHED,roomQuizEvent.id);widgetEvent.pollId=roomQuizEvent.pollId;widgetEvent.questionId=roomQuizEvent.questionId;widgetEvent.answerCounts=roomQuizEvent.answerCounts;break;case RoomSessionWordQuizEvent.QUESTION:widgetEvent=new RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent.NEW_QUESTION,roomQuizEvent.id);widgetEvent.question=roomQuizEvent.question;widgetEvent.duration=roomQuizEvent.duration;widgetEvent.pollType=roomQuizEvent.pollType;widgetEvent.questionId=roomQuizEvent.questionId;widgetEvent.pollId=roomQuizEvent.pollId;break;}if(!widgetEvent)return;this.container.eventDispatcher.dispatchEvent(widgetEvent);}processWidgetMessage(message){return null;}get type(){return RoomWidgetEnum.WORD_QUIZZ;}get eventTypes(){return[RoomSessionWordQuizEvent.ANSWERED,RoomSessionWordQuizEvent.FINISHED,RoomSessionWordQuizEvent.QUESTION];}get messageTypes(){return[];}}","map":null,"metadata":{},"sourceType":"module"}