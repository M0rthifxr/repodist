{"ast":null,"code":"import{SecurityLevel}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{GetSessionDataManager,LocalizeText,RoomWidgetChooserContentEvent,RoomWidgetRequestWidgetMessage,RoomWidgetUpdateRoomObjectEvent}from'../../../../api';import{UseEventDispatcherHook}from'../../../../hooks';import{useRoomContext}from'../../RoomContext';import{ChooserWidgetView}from'./ChooserWidgetView';import{jsx as _jsx}from\"react/jsx-runtime\";export const FurniChooserWidgetView=props=>{const[isVisible,setIsVisible]=useState(false);const[items,setItems]=useState(null);const[refreshTimeout,setRefreshTimeout]=useState(null);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const refreshChooser=useCallback(()=>{if(!isVisible)return;setRefreshTimeout(prevValue=>{if(prevValue)clearTimeout(prevValue);return setTimeout(()=>widgetHandler.processWidgetMessage(new RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage.FURNI_CHOOSER)),100);});},[isVisible,widgetHandler]);const onRoomWidgetChooserContentEvent=useCallback(event=>{setItems(event.items);setIsVisible(true);},[]);UseEventDispatcherHook(RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT,eventDispatcher,onRoomWidgetChooserContentEvent);const onRoomWidgetRoomObjectUpdateEvent=useCallback(event=>{if(!isVisible)return;switch(event.type){case RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED:case RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:refreshChooser();return;}},[isVisible,refreshChooser]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const close=useCallback(()=>{setIsVisible(false);setItems(null);},[]);if(!items)return null;return/*#__PURE__*/_jsx(ChooserWidgetView,{title:LocalizeText('widget.chooser.furni.title'),displayItemId:GetSessionDataManager().hasSecurity(SecurityLevel.MODERATOR),items:items,onCloseClick:close});};","map":null,"metadata":{},"sourceType":"module"}