{"ast":null,"code":"import{AvatarAction}from'../../../../../avatar/enum/AvatarAction';import{Nitro}from'../../../../../Nitro';export class FloatingIdleZAddition{constructor(id,visualization){this._id=void 0;this._visualization=void 0;this._asset=void 0;this._startTime=void 0;this._offsetY=void 0;this._scale=void 0;this._state=void 0;this._id=id;this._visualization=visualization;this._asset=null;this._startTime=Nitro.instance.time;this._offsetY=0;this._scale=0;this._state=0;}dispose(){this._visualization=null;this._asset=null;}getSpriteAssetName(state){let side='left';if(this._visualization.angle===135||this._visualization.angle===180||this._visualization.angle===225||this._visualization.angle===270)side='right';return'avatar_addition_user_idle_'+side+'_'+state+(this._scale<48?'_small':'');}update(sprite,scale){if(!sprite)return;this._scale=scale;this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(this._state===FloatingIdleZAddition.STATE_FRAME_A?1:2));let additionScale=64;let offsetX=0;if(scale<48){if(this._visualization.angle===135||this._visualization.angle===180||this._visualization.angle===225||this._visualization.angle===270){offsetX=10;}else{offsetX=-16;}this._offsetY=-38;additionScale=32;}else{if(this._visualization.angle===135||this._visualization.angle===180||this._visualization.angle===225||this._visualization.angle===270){offsetX=22;}else{offsetX=-30;}this._offsetY=-70;}if(this._visualization.posture===AvatarAction.POSTURE_SIT){this._offsetY+=additionScale/2;}else if(this._visualization.posture===AvatarAction.POSTURE_LAY){this._offsetY+=additionScale-0.3*additionScale;}if(this._asset){sprite.texture=this._asset;sprite.offsetX=offsetX;sprite.offsetY=this._offsetY;sprite.relativeDepth=-0.02;sprite.alpha=0;}}animate(sprite){if(!sprite)return false;const totalTimeRunning=Nitro.instance.time;if(this._state===FloatingIdleZAddition.STATE_DELAY){if(totalTimeRunning-this._startTime>=FloatingIdleZAddition.DELAY_BEFORE_ANIMATION){this._state=FloatingIdleZAddition.STATE_FRAME_A;this._startTime=totalTimeRunning;this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1));}}if(this._state===FloatingIdleZAddition.STATE_FRAME_A){if(totalTimeRunning-this._startTime>=FloatingIdleZAddition.DELAY_PER_FRAME){this._state=FloatingIdleZAddition.STATE_FRAME_B;this._startTime=totalTimeRunning;this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(2));}}if(this._state===FloatingIdleZAddition.STATE_FRAME_B){if(totalTimeRunning-this._startTime>=FloatingIdleZAddition.DELAY_PER_FRAME){this._state=FloatingIdleZAddition.STATE_FRAME_A;this._startTime=totalTimeRunning;this._asset=this._visualization.getAvatarRenderAsset(this.getSpriteAssetName(1));}}if(this._asset){sprite.texture=this._asset;sprite.alpha=255;sprite.visible=true;}else{sprite.visible=false;}return false;}get id(){return this._id;}}FloatingIdleZAddition.DELAY_BEFORE_ANIMATION=2000;FloatingIdleZAddition.DELAY_PER_FRAME=2000;FloatingIdleZAddition.STATE_DELAY=0;FloatingIdleZAddition.STATE_FRAME_A=1;FloatingIdleZAddition.STATE_FRAME_B=2;","map":null,"metadata":{},"sourceType":"module"}