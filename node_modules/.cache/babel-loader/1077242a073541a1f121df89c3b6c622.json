{"ast":null,"code":"import{TextureUtils,Vector3d}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useMemo,useState}from'react';import{GetRoomEngine,ProductTypeEnum}from'../../api';import{Base}from'../Base';import{jsx as _jsx}from\"react/jsx-runtime\";export const LayoutFurniImageView=props=>{const{productType='s',productClassId=-1,direction=2,extraData='',scale=1,style={},...rest}=props;const[imageElement,setImageElement]=useState(null);const getStyle=useMemo(()=>{var _imageElement$src;let newStyle={};if(imageElement!==null&&imageElement!==void 0&&(_imageElement$src=imageElement.src)!==null&&_imageElement$src!==void 0&&_imageElement$src.length){newStyle.backgroundImage=`url('${imageElement.src}')`;newStyle.width=imageElement.width;newStyle.height=imageElement.height;}if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[imageElement,scale,style]);const buildImage=useCallback(()=>{let imageResult=null;const listener={imageReady:(id,texture,image)=>{if(!image&&texture){image=TextureUtils.generateImage(texture);}image.onload=()=>setImageElement(image);},imageFailed:null};switch(productType.toLocaleLowerCase()){case ProductTypeEnum.FLOOR:imageResult=GetRoomEngine().getFurnitureFloorImage(productClassId,new Vector3d(direction),64,listener,0,extraData);break;case ProductTypeEnum.WALL:imageResult=GetRoomEngine().getFurnitureWallImage(productClassId,new Vector3d(direction),64,listener,0,extraData);break;}if(imageResult){const image=imageResult.getImage();image.onload=()=>setImageElement(image);}},[productType,productClassId,direction,extraData]);useEffect(()=>{buildImage();},[buildImage]);if(!imageElement)return null;return/*#__PURE__*/_jsx(Base,{classNames:['furni-image'],style:getStyle,...rest});};","map":null,"metadata":{},"sourceType":"module"}