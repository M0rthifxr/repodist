{"ast":null,"code":"import{useEffect,useState}from'react';import{GetSessionDataManager,LocalizeText,WiredFurniType,WiredSelectionVisualizer}from'../../../api';import{Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{useWiredContext}from'../WiredContext';import{WiredFurniSelectorView}from'./WiredFurniSelectorView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const WiredBaseView=props=>{const{wiredType='',requiresFurni=WiredFurniType.STUFF_SELECTION_OPTION_NONE,save=null,validate=null,children=null,hasSpecialInput=false}=props;const[wiredName,setWiredName]=useState(null);const[wiredDescription,setWiredDescription]=useState(null);const[needsSave,setNeedsSave]=useState(false);const{trigger=null,setTrigger=null,setIntParams=null,setStringParam=null,setFurniIds=null,saveWired=null}=useWiredContext();const close=()=>setTrigger(null);const onSave=()=>{if(validate&&!validate())return;if(save)save();setNeedsSave(true);};useEffect(()=>{if(!needsSave)return;saveWired();setNeedsSave(false);},[needsSave,saveWired]);useEffect(()=>{if(!trigger)return;const spriteId=trigger.spriteId||-1;const furniData=GetSessionDataManager().getFloorItemData(spriteId);if(!furniData){setWiredName('NAME: '+spriteId);setWiredDescription('NAME: '+spriteId);}else{setWiredName(furniData.name);setWiredDescription(furniData.description);}if(hasSpecialInput){setIntParams(trigger.intData);setStringParam(trigger.stringData);}if(requiresFurni>WiredFurniType.STUFF_SELECTION_OPTION_NONE){setFurniIds(prevValue=>{if(prevValue&&prevValue.length)WiredSelectionVisualizer.clearSelectionShaderFromFurni(prevValue);if(trigger.selectedItems&&trigger.selectedItems.length){WiredSelectionVisualizer.applySelectionShaderToFurni(trigger.selectedItems);return trigger.selectedItems;}return[];});}return()=>{setNeedsSave(false);setIntParams([]);setStringParam(null);setFurniIds(prevValue=>{if(prevValue&&prevValue.length)WiredSelectionVisualizer.clearSelectionShaderFromFurni(prevValue);return[];});};},[trigger,hasSpecialInput,requiresFurni,setIntParams,setStringParam,setFurniIds]);return/*#__PURE__*/_jsxs(NitroCardView,{uniqueKey:\"nitro-wired\",className:\"nitro-wired\",theme:\"wired\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('wiredfurni.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"i\",{className:`icon icon-wired-${wiredType}`}),/*#__PURE__*/_jsx(Text,{gfbold:true,children:wiredName})]}),/*#__PURE__*/_jsx(Text,{children:wiredDescription})]}),!!children&&/*#__PURE__*/_jsx(\"hr\",{className:\"m-0 bg-dark\"}),children,requiresFurni>WiredFurniType.STUFF_SELECTION_OPTION_NONE&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/_jsx(WiredFurniSelectorView,{})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:onSave,children:LocalizeText('wiredfurni.ready')}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:close,children:LocalizeText('cancel')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}