{"ast":null,"code":"import{RoomMuteComposer,RoomSettingsComposer,RoomStaffPickComposer,SecurityLevel,UserHomeRoomComposer}from'@nitrots/nitro-renderer';import classNames from'classnames';import{useEffect,useState}from'react';import{CreateLinkEvent,GetGroupInformation,GetSessionDataManager,LocalizeText,SendMessageComposer}from'../../../api';import{Base,Button,Column,Flex,LayoutBadgeImageView,LayoutRoomThumbnailView,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text,UserProfileIconView}from'../../../common';import{RoomWidgetThumbnailEvent}from'../../../events';import{DispatchUiEvent}from'../../../hooks';import{useNavigatorContext}from'../NavigatorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export class NavigatorRoomInfoViewProps{constructor(){this.onCloseClick=void 0;}}export const NavigatorRoomInfoView=props=>{const{onCloseClick=null}=props;const[isRoomPicked,setIsRoomPicked]=useState(false);const[isRoomMuted,setIsRoomMuted]=useState(false);const{navigatorData=null}=useNavigatorContext();const hasPermission=permission=>{switch(permission){case'settings':return GetSessionDataManager().userId===navigatorData.enteredGuestRoom.ownerId||GetSessionDataManager().isModerator;case'staff_pick':return GetSessionDataManager().securityLevel>=SecurityLevel.COMMUNITY;default:return false;}};const processAction=(action,value)=>{if(!navigatorData||!navigatorData.enteredGuestRoom)return;switch(action){case'set_home_room':let newRoomId=-1;if(navigatorData.homeRoomId!==navigatorData.enteredGuestRoom.roomId){newRoomId=navigatorData.enteredGuestRoom.roomId;}if(newRoomId>0)SendMessageComposer(new UserHomeRoomComposer(newRoomId));return;case'navigator_search_tag':return;case'open_room_thumbnail_camera':DispatchUiEvent(new RoomWidgetThumbnailEvent(RoomWidgetThumbnailEvent.TOGGLE_THUMBNAIL));return;case'open_group_info':GetGroupInformation(navigatorData.enteredGuestRoom.habboGroupId);return;case'toggle_room_link':CreateLinkEvent('navigator/toggle-room-link');return;case'open_room_settings':SendMessageComposer(new RoomSettingsComposer(navigatorData.enteredGuestRoom.roomId));return;case'toggle_pick':setIsRoomPicked(value=>!value);SendMessageComposer(new RoomStaffPickComposer(navigatorData.enteredGuestRoom.roomId));return;case'toggle_mute':setIsRoomMuted(value=>!value);SendMessageComposer(new RoomMuteComposer());return;case'open_floorplan_editor':CreateLinkEvent('floor-editor/toggle');return;case'close':onCloseClick();return;}};useEffect(()=>{if(!navigatorData)return;setIsRoomPicked(navigatorData.currentRoomIsStaffPick);if(navigatorData.enteredGuestRoom)setIsRoomMuted(navigatorData.enteredGuestRoom.allInRoomMuted);},[navigatorData]);if(!navigatorData.enteredGuestRoom)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-room-info\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('navigator.roomsettings.roominfo'),onCloseClick:()=>processAction('close')}),/*#__PURE__*/_jsx(NitroCardContentView,{className:\"text-black\",children:navigatorData.enteredGuestRoom&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Flex,{gap:2,overflow:\"hidden\",children:/*#__PURE__*/_jsxs(Column,{grow:true,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsxs(Column,{grow:true,gap:1,children:[/*#__PURE__*/_jsx(Flex,{gap:1,children:/*#__PURE__*/_jsx(Text,{small:true,bold:true,children:navigatorData.enteredGuestRoom.roomName})}),navigatorData.enteredGuestRoom.showOwner&&/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,variant:\"muted\",children:LocalizeText('navigator.roomownercaption')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(UserProfileIconView,{userId:navigatorData.enteredGuestRoom.ownerId}),/*#__PURE__*/_jsx(Text,{small:true,children:navigatorData.enteredGuestRoom.ownerName})]})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,variant:\"muted\",children:LocalizeText('navigator.roomrating')}),/*#__PURE__*/_jsx(Text,{small:true,children:navigatorData.currentRoomRating})]}),navigatorData.enteredGuestRoom.tags.length>0&&/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",gap:1,children:navigatorData.enteredGuestRoom.tags.map(tag=>{return/*#__PURE__*/_jsxs(Text,{pointer:true,className:\"bg-muted rounded p-1\",onClick:event=>processAction('navigator_search_tag',tag),children:[\"#\",tag]},tag);})})]}),/*#__PURE__*/_jsx(Column,{alignItems:\"center\",gap:1,children:/*#__PURE__*/_jsx(\"i\",{onClick:()=>processAction('set_home_room'),className:'flex-shrink-0 icon icon-house-small cursor-pointer'+classNames({' gray':navigatorData.homeRoomId!==navigatorData.enteredGuestRoom.roomId})})})]}),/*#__PURE__*/_jsx(Text,{small:true,overflow:\"auto\",style:{maxHeight:50},children:navigatorData.enteredGuestRoom.description}),/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",children:/*#__PURE__*/_jsx(LayoutRoomThumbnailView,{roomId:navigatorData.enteredGuestRoom.roomId,customUrl:navigatorData.enteredGuestRoom.officialRoomPicRef,children:hasPermission('settings')&&/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0\",onClick:()=>processAction('open_room_thumbnail_camera')})})}),navigatorData.enteredGuestRoom.habboGroupId>0&&/*#__PURE__*/_jsxs(Flex,{pointer:true,alignItems:\"center\",gap:2,onClick:()=>processAction('open_group_info'),children:[/*#__PURE__*/_jsx(LayoutBadgeImageView,{className:\"flex-none\",badgeCode:navigatorData.enteredGuestRoom.groupBadgeCode,isGroup:true}),/*#__PURE__*/_jsx(Text,{small:true,underline:true,children:LocalizeText('navigator.guildbase',['groupName'],[navigatorData.enteredGuestRoom.groupName])})]}),/*#__PURE__*/_jsxs(Flex,{gap:1,className:\"w-100 room-tool-item\",onClick:()=>processAction('toggle_room_link'),children:[/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.like.button.text'),className:\"icon-width icon icon-link-room float-start\"}),/*#__PURE__*/_jsx(Text,{underline:true,small:true,children:LocalizeText('navigator.embed.caption')})]})]})}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[hasPermission('staff_pick')&&/*#__PURE__*/_jsx(Button,{onClick:()=>processAction('toggle_pick'),children:LocalizeText(isRoomPicked?'navigator.staffpicks.unpick':'navigator.staffpicks.pick')}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",disabled:true,children:LocalizeText('help.emergency.main.report.room')}),hasPermission('settings')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>processAction('open_room_settings'),children:LocalizeText('navigator.room.popup.info.room.settings')}),/*#__PURE__*/_jsx(Button,{onClick:()=>processAction('toggle_mute'),children:LocalizeText(isRoomMuted?'navigator.muteall_on':'navigator.muteall_off')}),/*#__PURE__*/_jsx(Button,{onClick:()=>processAction('open_floorplan_editor'),children:LocalizeText('open.floor.plan.editor')})]})]})]})})]});};","map":null,"metadata":{},"sourceType":"module"}