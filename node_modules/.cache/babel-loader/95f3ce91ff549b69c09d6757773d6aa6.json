{"ast":null,"code":"import{Texture}from'@pixi/core';import{ColorMatrixFilter}from'@pixi/filter-color-matrix';import{EventDispatcher,NitroContainer,NitroSprite}from'../../core';import{TextureUtils}from'../../room';import{Nitro}from'../Nitro';import{RoomCameraWidgetManagerEvent}from'./events/RoomCameraWidgetManagerEvent';import{RoomCameraWidgetEffect}from'./RoomCameraWidgetEffect';export class RoomCameraWidgetManager{constructor(){this._effects=void 0;this._events=void 0;this._isLoaded=void 0;this._effects=new Map();this._events=new EventDispatcher();this._isLoaded=false;}init(){if(this._isLoaded)return;this._isLoaded=true;const imagesUrl=Nitro.instance.getConfiguration('image.library.url')+'Habbo-Stories/';const effects=Nitro.instance.getConfiguration('camera.available.effects');for(const effect of effects){if(!effect.enabled)continue;const cameraEffect=new RoomCameraWidgetEffect(effect.name,effect.minLevel);if(effect.colorMatrix.length){cameraEffect.colorMatrix=effect.colorMatrix;}else{cameraEffect.texture=Texture.from(imagesUrl+effect.name+'.png');cameraEffect.blendMode=effect.blendMode;}this._effects.set(cameraEffect.name,cameraEffect);}this.events.dispatchEvent(new RoomCameraWidgetManagerEvent(RoomCameraWidgetManagerEvent.INITIALIZED));}applyEffects(texture,selectedEffects,isZoomed){const container=new NitroContainer();const sprite=new NitroSprite(texture);container.addChild(sprite);for(const selectedEffect of selectedEffects){const effect=selectedEffect.effect;if(!effect)continue;if(effect.colorMatrix){const filter=new ColorMatrixFilter();filter.matrix=effect.colorMatrix;filter.alpha=selectedEffect.alpha;if(!sprite.filters)sprite.filters=[];sprite.filters.push(filter);}else{const effectSprite=new NitroSprite(effect.texture);effectSprite.alpha=selectedEffect.alpha;effectSprite.blendMode=effect.blendMode;container.addChild(effectSprite);}}return TextureUtils.generateImage(container);}get effects(){return this._effects;}get events(){return this._events;}get isLoaded(){return this._isLoaded;}}","map":null,"metadata":{},"sourceType":"module"}