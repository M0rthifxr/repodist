{"ast":null,"code":"import{RoomObjectVariable}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{attemptPetPlacement,GetRoomEngine,LocalizeText,UnseenItemCategory}from'../../../../api';import{AutoGrid,Button,Column,Grid,LayoutRoomPreviewerView,Text}from'../../../../common';import{useInventoryPets,useInventoryUnseenTracker}from'../../../../hooks';import{InventoryCategoryEmptyView}from'../InventoryCategoryEmptyView';import{InventoryPetItemView}from'./InventoryPetItemView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const InventoryPetView=props=>{const{roomSession=null,roomPreviewer=null}=props;const[isVisible,setIsVisible]=useState(false);const{petItems=null,selectedPet=null,activate=null,deactivate=null}=useInventoryPets();const{isUnseen=null,removeUnseen=null}=useInventoryUnseenTracker();useEffect(()=>{if(!selectedPet||!roomPreviewer)return;const petData=selectedPet.petData;const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.addPetIntoRoom(petData.figureString);},[roomPreviewer,selectedPet]);useEffect(()=>{if(!selectedPet||!isUnseen(UnseenItemCategory.PET,selectedPet.petData.id))return;removeUnseen(UnseenItemCategory.PET,selectedPet.petData.id);},[selectedPet,isUnseen,removeUnseen]);useEffect(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);useEffect(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);if(!petItems||!petItems.length)return/*#__PURE__*/_jsx(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.pets.title'),desc:LocalizeText('inventory.empty.pets.desc')});return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/_jsx(AutoGrid,{columnCount:5,children:petItems&&petItems.length>0&&petItems.map(item=>/*#__PURE__*/_jsx(InventoryPetItemView,{petItem:item},item.petData.id))})}),/*#__PURE__*/_jsxs(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/_jsx(Column,{overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/_jsx(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140})}),selectedPet&&selectedPet.petData&&/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/_jsx(Text,{grow:true,truncate:true,children:selectedPet.petData.name}),!!roomSession&&/*#__PURE__*/_jsx(Button,{onClick:event=>attemptPetPlacement(selectedPet),children:LocalizeText('inventory.furni.placetoroom')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}