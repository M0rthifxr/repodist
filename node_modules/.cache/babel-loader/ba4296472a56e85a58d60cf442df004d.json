{"ast":null,"code":"import{useCallback,useEffect,useState}from'react';import{AddEventLinkTracker,LocalizeText,RemoveLinkEventTracker}from'../../api';import{Base,Column,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView}from'../../common';import{HelpReportUserEvent}from'../../events/help/HelpReportUserEvent';import{UseUiEvent}from'../../hooks';import{HelpContextProvider}from'./HelpContext';import{HelpMessageHandler}from'./HelpMessageHandler';import{DescribeReportView}from'./views/DescribeReportView';import{HelpIndexView}from'./views/HelpIndexView';import{NameChangeView}from'./views/name-change/NameChangeView';import{SanctionSatusView}from'./views/SanctionStatusView';import{SelectReportedChatsView}from'./views/SelectReportedChatsView';import{SelectReportedUserView}from'./views/SelectReportedUserView';import{SelectTopicView}from'./views/SelectTopicView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const HelpView=props=>{const[isVisible,setIsVisible]=useState(false);const[helpReportState,setHelpReportState]=useState({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:0});const linkReceived=useCallback(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},[]);const onHelpReportUserEvent=useCallback(event=>{setHelpReportState({reportedUserId:event.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:2});setIsVisible(true);},[]);UseUiEvent(HelpReportUserEvent.REPORT_USER,onHelpReportUserEvent);useEffect(()=>{const linkTracker={linkReceived,eventUrlPrefix:'help/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);useEffect(()=>{if(!isVisible)return;setHelpReportState({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:0});},[isVisible]);const CurrentStepView=useCallback(()=>{switch(helpReportState.currentStep){case 0:return/*#__PURE__*/_jsx(HelpIndexView,{});case 1:return/*#__PURE__*/_jsx(SelectReportedUserView,{});case 2:return/*#__PURE__*/_jsx(SelectReportedChatsView,{});case 3:return/*#__PURE__*/_jsx(SelectTopicView,{});case 4:return/*#__PURE__*/_jsx(DescribeReportView,{});}return null;},[helpReportState.currentStep]);return/*#__PURE__*/_jsxs(HelpContextProvider,{value:{helpReportState,setHelpReportState},children:[/*#__PURE__*/_jsx(HelpMessageHandler,{}),isVisible&&/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-help\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('help.button.cfh'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/_jsx(NitroCardContentView,{className:\"text-black\",children:/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Column,{center:true,size:5,overflow:\"hidden\",children:/*#__PURE__*/_jsx(Base,{className:\"index-image\"})}),/*#__PURE__*/_jsx(Column,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:/*#__PURE__*/_jsx(CurrentStepView,{})})]})})]}),/*#__PURE__*/_jsx(SanctionSatusView,{}),/*#__PURE__*/_jsx(NameChangeView,{})]});};","map":null,"metadata":{},"sourceType":"module"}