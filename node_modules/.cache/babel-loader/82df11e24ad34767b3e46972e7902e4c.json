{"ast":null,"code":"import{EventDispatcher}from'../../core/events/EventDispatcher';import{AvatarRenderLibraryEvent}from'./events/AvatarRenderLibraryEvent';export class AvatarAssetDownloadLibrary extends EventDispatcher{constructor(id,revision,assets,assetUrl){super();this._state=void 0;this._libraryName=void 0;this._revision=void 0;this._downloadUrl=void 0;this._assets=void 0;this._state=AvatarAssetDownloadLibrary.NOT_LOADED;this._libraryName=id;this._revision=revision;this._downloadUrl=assetUrl;this._assets=assets;this._downloadUrl=this._downloadUrl.replace(/%libname%/gi,this._libraryName);this._downloadUrl=this._downloadUrl.replace(/%revision%/gi,this._revision);const asset=this._assets.getCollection(this._libraryName);if(asset)this._state=AvatarAssetDownloadLibrary.LOADED;}downloadAsset(){if(!this._assets||this._state===AvatarAssetDownloadLibrary.LOADING||this._state===AvatarAssetDownloadLibrary.LOADED)return;const asset=this._assets.getCollection(this._libraryName);if(asset){this._state=AvatarAssetDownloadLibrary.LOADED;this.dispatchEvent(new AvatarRenderLibraryEvent(AvatarRenderLibraryEvent.DOWNLOAD_COMPLETE,this));return;}this._state=AvatarAssetDownloadLibrary.LOADING;this._assets.downloadAsset(this._downloadUrl,flag=>{if(flag){this._state=AvatarAssetDownloadLibrary.LOADED;this.dispatchEvent(new AvatarRenderLibraryEvent(AvatarRenderLibraryEvent.DOWNLOAD_COMPLETE,this));}});}get libraryName(){return this._libraryName;}get isLoaded(){return this._state===AvatarAssetDownloadLibrary.LOADED;}}AvatarAssetDownloadLibrary.DOWNLOAD_COMPLETE='AADL_DOWNLOAD_COMPLETE';AvatarAssetDownloadLibrary.NOT_LOADED=0;AvatarAssetDownloadLibrary.LOADING=1;AvatarAssetDownloadLibrary.LOADED=2;","map":null,"metadata":{},"sourceType":"module"}