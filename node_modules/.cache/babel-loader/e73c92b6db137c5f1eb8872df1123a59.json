{"ast":null,"code":"import{BadgeImageReadyEvent,NitroSprite,TextureUtils}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useState}from'react';import{GetConfiguration,GetSessionDataManager,LocalizeBadgeDescription,LocalizeBadgeName,LocalizeText}from'../../api';import{Base}from'../Base';import{Text}from'../../common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const LayoutBadgeImageView=props=>{const{badgeCode=null,isGroup=false,showInfo=false,customTitle=null,isGrayscale=false,scale=1,classNames=[],style={},children=null,...rest}=props;const[imageElement,setImageElement]=useState(null);const getClassNames=useMemo(()=>{const newClassNames=['badge-image'];if(isGroup)newClassNames.push('group-badge');if(isGrayscale)newClassNames.push('grayscale');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames,isGroup,isGrayscale]);const getStyle=useMemo(()=>{let newStyle={};if(imageElement){newStyle.backgroundImage=`url('${imageElement.src}')`;newStyle.width=imageElement.width;newStyle.height=imageElement.height;if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';newStyle.width=imageElement.width*scale;newStyle.height=imageElement.height*scale;}}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[imageElement,scale,style]);useEffect(()=>{if(!badgeCode||!badgeCode.length)return;let didSetBadge=false;const onBadgeImageReadyEvent=event=>{if(event.badgeId!==badgeCode)return;const element=TextureUtils.generateImage(new NitroSprite(event.image));element.onload=()=>setImageElement(element);didSetBadge=true;GetSessionDataManager().events.removeEventListener(BadgeImageReadyEvent.IMAGE_READY,onBadgeImageReadyEvent);};GetSessionDataManager().events.addEventListener(BadgeImageReadyEvent.IMAGE_READY,onBadgeImageReadyEvent);const texture=isGroup?GetSessionDataManager().getGroupBadgeImage(badgeCode):GetSessionDataManager().getBadgeImage(badgeCode);if(texture&&!didSetBadge){const element=TextureUtils.generateImage(new NitroSprite(texture));element.onload=()=>setImageElement(element);}return()=>GetSessionDataManager().events.removeEventListener(BadgeImageReadyEvent.IMAGE_READY,onBadgeImageReadyEvent);},[badgeCode,isGroup]);const BadgeInformationView=props=>{const{title=null,description=null}=props;if(!GetConfiguration('badge.descriptions.enabled',true))return null;return/*#__PURE__*/_jsxs(Base,{className:\"badge-information text-black pt-2 px-2 pb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1 pb-1\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"badge-desc\",children:description})]});};return/*#__PURE__*/_jsxs(Base,{classNames:getClassNames,style:getStyle,...rest,children:[showInfo&&GetConfiguration('badge.descriptions.enabled',true)&&/*#__PURE__*/_jsxs(Base,{className:\"badge-information text-black p-2\",children:[/*#__PURE__*/_jsx(Text,{gfbold:true,className:\"mb-1\",children:isGroup?customTitle:LocalizeBadgeName(badgeCode)}),/*#__PURE__*/_jsx(\"div\",{className:\"badge-desc\",children:isGroup?LocalizeText('group.badgepopup.body'):LocalizeBadgeDescription(badgeCode)})]}),children]});};","map":null,"metadata":{},"sourceType":"module"}