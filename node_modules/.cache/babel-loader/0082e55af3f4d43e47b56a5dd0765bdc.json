{"ast":null,"code":"import{Disposable}from'../../core/common/disposable/Disposable';import{Vector3d}from'../utils/Vector3d';import{RoomObjectModel}from'./RoomObjectModel';export class RoomObject extends Disposable{constructor(id,stateCount,type){super();this._id=void 0;this._instanceId=void 0;this._type=void 0;this._model=void 0;this._location=void 0;this._direction=void 0;this._states=void 0;this._visualization=void 0;this._logic=void 0;this._pendingLogicMessages=void 0;this._updateCounter=void 0;this._isReady=void 0;this._id=id;this._instanceId=RoomObject.OBJECT_COUNTER++;this._type=type;this._model=new RoomObjectModel();this._location=new Vector3d();this._direction=new Vector3d();this._states=[];this._visualization=null;this._logic=null;this._pendingLogicMessages=[];this._updateCounter=0;this._isReady=false;let i=stateCount-1;while(i>=0){this._states[i]=0;i--;}}onDispose(){this._pendingLogicMessages=[];this.setVisualization(null);this.setLogic(null);if(this._model)this._model.dispose();super.onDispose();}getLocation(){return this._location;}setLocation(vector){if(!vector)return;if(vector.x===this._location.x&&vector.y===this._location.y&&vector.z===this._location.z)return;this._location.x=vector.x;this._location.y=vector.y;this._location.z=vector.z;this._updateCounter++;}getDirection(){return this._direction;}setDirection(vector){if(!vector)return;if(vector.x===this._direction.x&&vector.y===this._direction.y&&vector.z===this._direction.z)return;this._direction.x=(vector.x%360+360)%360;this._direction.y=(vector.y%360+360)%360;this._direction.z=(vector.z%360+360)%360;this._updateCounter++;}getState(){let index=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(index>=0&&index<this._states.length){return this._states[index];}return-1;}setState(state){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(index>=0&&index<this._states.length){if(this._states[index]!==state){this._states[index]=state;this._updateCounter++;}return true;}return false;}setVisualization(visualization){if(this._visualization===visualization)return;if(this._visualization)this._visualization.dispose();this._visualization=visualization;if(this._visualization)this._visualization.object=this;}setLogic(logic){if(this._logic===logic)return;const eventHandler=this._logic;if(eventHandler){this._logic=null;eventHandler.setObject(null);}this._logic=logic;if(this._logic){this._logic.setObject(this);while(this._pendingLogicMessages.length){const message=this._pendingLogicMessages.shift();this._logic.processUpdateMessage(message);}}}processUpdateMessage(message){if(this._logic)return this._logic.processUpdateMessage(message);this._pendingLogicMessages.push(message);}tearDown(){if(this._logic)this._logic.tearDown();}get id(){return this._id;}get instanceId(){return this._instanceId;}get type(){return this._type;}get model(){return this._model;}get visualization(){return this._visualization;}get mouseHandler(){return this._logic;}get logic(){return this._logic;}get location(){return this._location;}get direction(){return this._direction;}get updateCounter(){return this._updateCounter;}set updateCounter(count){this._updateCounter=count;}get isReady(){return this._isReady;}set isReady(flag){this._isReady=flag;}}RoomObject.OBJECT_COUNTER=0;","map":null,"metadata":{},"sourceType":"module"}