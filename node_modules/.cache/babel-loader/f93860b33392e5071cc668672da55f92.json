{"ast":null,"code":"import{useEffect,useMemo,useState}from'react';import{AddEventLinkTracker,GetAchievementCategoryImageUrl,LocalizeText,RemoveLinkEventTracker}from'../../api';import{Base,Column,LayoutImage,LayoutProgressBar,NitroCardContentView,NitroCardHeaderView,NitroCardSubHeaderView,NitroCardView,Text}from'../../common';import{useAchievements}from'../../hooks';import{AchievementCategoryView}from'./views/AchievementCategoryView';import{AchievementsCategoryListView}from'./views/category-list/AchievementsCategoryListView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const AchievementsView=props=>{const[isVisible,setIsVisible]=useState(false);const{achievementCategories=[],selectedCategoryCode=null,setSelectedCategoryCode=null,selectedAchievementId=-1,setSelectedAchievementId=null,achievementScore=0,getProgress=0,getMaxProgress=0,setAchievementSeen=null}=useAchievements();const selectedCategory=useMemo(()=>{if(selectedCategoryCode===null)return null;return achievementCategories.find(category=>category.code===selectedCategoryCode);},[achievementCategories,selectedCategoryCode]);useEffect(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},eventUrlPrefix:'achievements/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);if(!isVisible)return null;return/*#__PURE__*/_jsxs(NitroCardView,{uniqueKey:\"achievements\",className:\"nitro-achievements\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('inventory.achievements'),onCloseClick:event=>setIsVisible(false)}),selectedCategory&&/*#__PURE__*/_jsxs(NitroCardSubHeaderView,{position:\"relative\",className:\"justify-content-center align-items-center cursor-pointer\",gap:3,children:[/*#__PURE__*/_jsx(Base,{onClick:event=>setSelectedCategoryCode(null),className:\"nitro-achievements-back-arrow\"}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{fontSize:4,fontWeight:\"bold\",className:\"text-small\",children:LocalizeText(`quests.${selectedCategory.code}.name`)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('achievements.details.categoryprogress',['progress','limit'],[selectedCategory.getProgress().toString(),selectedCategory.getMaxProgress().toString()])})]}),/*#__PURE__*/_jsx(LayoutImage,{imageUrl:GetAchievementCategoryImageUrl(selectedCategory,null,true)})]}),/*#__PURE__*/_jsxs(NitroCardContentView,{gap:1,children:[!selectedCategory&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AchievementsCategoryListView,{categories:achievementCategories,selectedCategoryCode:selectedCategoryCode,setSelectedCategoryCode:setSelectedCategoryCode}),/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"end\",gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,center:true,children:LocalizeText('achievements.categories.score',['score'],[achievementScore.toString()])}),/*#__PURE__*/_jsx(LayoutProgressBar,{text:LocalizeText('achievements.categories.totalprogress',['progress','limit'],[getProgress.toString(),getMaxProgress.toString()]),progress:getProgress,maxProgress:getMaxProgress})]})]}),selectedCategory&&/*#__PURE__*/_jsx(AchievementCategoryView,{category:selectedCategory,selectedAchievementId:selectedAchievementId,setSelectedAchievementId:setSelectedAchievementId,setAchievementSeen:setAchievementSeen})]})]});};","map":null,"metadata":{},"sourceType":"module"}