{"ast":null,"code":"import{FlatControllerAddedEvent,FlatControllerRemovedEvent,FlatControllersEvent,RemoveAllRightsMessageComposer,RoomTakeRightsComposer,RoomUsersWithRightsComposer}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{Button,Column,Flex,Grid,Text,UserProfileIconView}from'../../../../common';import{UseMessageEventHook}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const NavigatorRoomSettingsRightsTabView=props=>{const{roomData=null}=props;const[usersWithRights,setUsersWithRights]=useState(new Map());const onFlatControllersEvent=useCallback(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(parser.users);},[roomData]);UseMessageEventHook(FlatControllersEvent,onFlatControllersEvent);const onFlatControllerAddedEvent=useCallback(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(prevValue=>{const newValue=new Map(prevValue);newValue.set(parser.data.userId,parser.data.userName);return newValue;});},[roomData]);UseMessageEventHook(FlatControllerAddedEvent,onFlatControllerAddedEvent);const onFlatControllerRemovedEvent=useCallback(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(prevValue=>{const newValue=new Map(prevValue);newValue.delete(parser.userId);return newValue;});},[roomData]);UseMessageEventHook(FlatControllerRemovedEvent,onFlatControllerRemovedEvent);useEffect(()=>{SendMessageComposer(new RoomUsersWithRightsComposer(roomData.roomId));},[roomData.roomId]);return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsxs(Column,{size:6,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('navigator.flatctrls.userswithrights',['displayed','total'],[usersWithRights.size.toString(),usersWithRights.size.toString()])}),/*#__PURE__*/_jsx(Flex,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:/*#__PURE__*/_jsx(Column,{fullWidth:true,overflow:\"auto\",gap:1,children:Array.from(usersWithRights.entries()).map((_ref,index)=>{let[id,name]=_ref;return/*#__PURE__*/_jsxs(Flex,{shrink:true,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(UserProfileIconView,{userName:name}),/*#__PURE__*/_jsxs(Text,{pointer:true,grow:true,onClick:event=>SendMessageComposer(new RoomTakeRightsComposer(id)),children:[\" \",name]})]},index);})})})]}),/*#__PURE__*/_jsx(Column,{size:6,justifyContent:\"end\",children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",disabled:!usersWithRights.size,onClick:event=>SendMessageComposer(new RemoveAllRightsMessageComposer(roomData.roomId)),children:LocalizeText('navigator.flatctrls.clear')})})]});};","map":null,"metadata":{},"sourceType":"module"}