{"ast":null,"code":"import{useCallback,useEffect,useRef,useState}from'react';import{GetNitroInstance,GetRoomObjectBounds,GetRoomSession}from'../../../../api';import{Base}from'../../../../common';import{jsx as _jsx}from\"react/jsx-runtime\";export const ObjectLocationView=props=>{const{objectId=-1,category=-1,noFollow=false,position='absolute',...rest}=props;const[pos,setPos]=useState({x:-1,y:-1});const elementRef=useRef();const getObjectLocation=useCallback(()=>{const roomSession=GetRoomSession();const objectBounds=GetRoomObjectBounds(roomSession.roomId,objectId,category,1);return objectBounds;},[objectId,category]);const updatePosition=useCallback(()=>{const bounds=getObjectLocation();if(!bounds||!elementRef.current)return;setPos({x:Math.round(bounds.left+bounds.width/2-elementRef.current.offsetWidth/2),y:Math.round(bounds.top-elementRef.current.offsetHeight+10)});},[getObjectLocation]);useEffect(()=>{let remove=false;if(noFollow){updatePosition();}else{remove=true;GetNitroInstance().ticker.add(updatePosition);}return()=>{if(remove)GetNitroInstance().ticker.remove(updatePosition);};},[updatePosition,noFollow]);return/*#__PURE__*/_jsx(Base,{innerRef:elementRef,position:position,visible:pos.x+(elementRef.current?elementRef.current.offsetWidth:0)>-1,className:\"object-location\",style:{left:pos.x,top:pos.y},...rest});};","map":null,"metadata":{},"sourceType":"module"}