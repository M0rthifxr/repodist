{"ast":null,"code":"import{MessageEvent}from'./MessageEvent';export class MessageClassManager{constructor(){this._messageIdByEvent=void 0;this._messageIdByComposer=void 0;this._messageInstancesById=void 0;this._messageIdByEvent=new Map();this._messageIdByComposer=new Map();this._messageInstancesById=new Map();}dispose(){this._messageIdByEvent.clear();this._messageIdByComposer.clear();this._messageInstancesById.clear();}registerMessages(configuration){for(const[header,handler]of configuration.events)this.registerMessageEventClass(header,handler);for(const[header,handler]of configuration.composers)this.registerMessageComposerClass(header,handler);}registerMessageEventClass(header,handler){if(!header||!handler)return;this._messageIdByEvent.set(handler,header);}registerMessageComposerClass(header,handler){if(!header||!handler)return;this._messageIdByComposer.set(handler,header);}registerMessageEvent(event){if(!event)return;const header=this.getEventId(event);if(!header)return;let existing=this._messageInstancesById.get(header);if(!existing||!existing.length){existing=[];this._messageInstancesById.set(header,existing);}existing.push(event);}removeMessageEvent(event){if(!event)return;const header=this.getEventId(event);if(!header)return;const existing=this._messageInstancesById.get(header);if(!existing)return;for(const[index,message]of existing.entries()){if(!message)continue;if(message!==event)continue;existing.splice(index,1);if(existing.length===0)this._messageInstancesById.delete(header);message.dispose();return;}}getEvents(header){if(!header)return;const existing=this._messageInstancesById.get(header);if(!existing)return;return existing;}getEventId(event){if(!event)return-1;//@ts-ignore\nconst name=event instanceof MessageEvent?event.constructor:event;const existing=this._messageIdByEvent.get(name);if(!existing)return-1;return existing;}getComposerId(composer){if(!composer)return-1;const existing=this._messageIdByComposer.get(composer.constructor);if(!existing)return-1;return existing;}}","map":null,"metadata":{},"sourceType":"module"}