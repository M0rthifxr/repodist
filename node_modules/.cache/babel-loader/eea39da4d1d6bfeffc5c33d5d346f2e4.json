{"ast":null,"code":"import{GroupRemoveMemberComposer}from'@nitrots/nitro-renderer';import{useCallback}from'react';import{CatalogPageName,CreateLinkEvent,GetGroupManager,GetGroupMembers,GetSessionDataManager,LocalizeText,NotificationUtilities,SendMessageComposer,TryJoinGroup,TryVisitRoom}from'../../../api';import{Button,Column,Flex,Grid,LayoutBadgeImageView,Text}from'../../../common';import{GroupMembershipType}from'../common/GroupMembershipType';import{GroupType}from'../common/GroupType';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const STATES=['regular','exclusive','private'];export const GroupInformationView=props=>{const{groupInformation=null,onClose=null,overflow='hidden',...rest}=props;const isRealOwner=groupInformation&&groupInformation.ownerName===GetSessionDataManager().userName;const joinGroup=()=>groupInformation&&TryJoinGroup(groupInformation.id);const leaveGroup=()=>{NotificationUtilities.confirm(LocalizeText('group.leaveconfirm.desc'),()=>{SendMessageComposer(new GroupRemoveMemberComposer(groupInformation.id,GetSessionDataManager().userId));if(onClose)onClose();},null);};const getRoleIcon=()=>{if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER||groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return null;if(isRealOwner)return/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-group-owner\",title:LocalizeText('group.youareowner')});if(groupInformation.isAdmin)return/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-group-admin\",title:LocalizeText('group.youareadmin')});return/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-group-member\",title:LocalizeText('group.youaremember')});};const getButtonText=()=>{if(isRealOwner)return'group.youareowner';if(groupInformation.type===GroupType.PRIVATE)return'';if(groupInformation.membershipType===GroupMembershipType.MEMBER)return'group.leave';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType.REGULAR)return'group.join';if(groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return'group.membershippending';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType.EXCLUSIVE)return'group.requestmembership';};const handleButtonClick=()=>{if(groupInformation.type===GroupType.PRIVATE&&groupInformation.membershipType===GroupMembershipType.NOT_MEMBER)return;if(groupInformation.membershipType===GroupMembershipType.MEMBER){leaveGroup();return;}joinGroup();};const handleAction=useCallback(action=>{switch(action){case'members':GetGroupMembers(groupInformation.id);break;case'members_pending':GetGroupMembers(groupInformation.id,2);break;case'manage':GetGroupManager(groupInformation.id);break;case'homeroom':TryVisitRoom(groupInformation.roomId);break;case'furniture':CreateLinkEvent('catalog/open/'+CatalogPageName.GUILD_CUSTOM_FURNI);break;case'popular_groups':CreateLinkEvent('navigator/search/groups');break;}},[groupInformation]);if(!groupInformation)return null;return/*#__PURE__*/_jsxs(Grid,{className:\"profile-grey-bg-border p-2\",overflow:overflow,...rest,children:[/*#__PURE__*/_jsxs(Column,{center:true,size:3,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",overflow:\"hidden\",className:\"group-badge\",children:/*#__PURE__*/_jsx(LayoutBadgeImageView,{badgeCode:groupInformation.badge,isGroup:true,scale:2})}),/*#__PURE__*/_jsxs(Column,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('members'),children:LocalizeText('group.membercount',['totalMembers'],[groupInformation.membersCount.toString()])}),groupInformation.pendingRequestsCount>0&&/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('members_pending'),children:LocalizeText('group.pendingmembercount',['amount'],[groupInformation.pendingRequestsCount.toString()])}),groupInformation.isOwner&&/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('manage'),children:LocalizeText('group.manage')})]}),getRoleIcon()]}),/*#__PURE__*/_jsxs(Column,{size:9,justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:groupInformation.title}),/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(\"i\",{className:'icon icon-group-type-'+groupInformation.type,title:LocalizeText(`group.edit.settings.type.${STATES[groupInformation.type]}.help`)}),groupInformation.canMembersDecorate&&/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-group-decorate\",title:LocalizeText('group.memberscandecorate')})]})]}),/*#__PURE__*/_jsx(Text,{small:true,children:LocalizeText('group.created',['date','owner'],[groupInformation.createdAt,groupInformation.ownerName])})]}),/*#__PURE__*/_jsx(Text,{small:true,textBreak:true,overflow:\"auto\",className:\"group-description\",children:groupInformation.description})]}),/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('homeroom'),children:LocalizeText('group.linktobase')}),/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('furniture'),children:LocalizeText('group.buyfurni')}),/*#__PURE__*/_jsx(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('popular_groups'),children:LocalizeText('group.showgroups')})]}),groupInformation.type!==GroupType.PRIVATE&&/*#__PURE__*/_jsx(Button,{disabled:groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING||isRealOwner,onClick:handleButtonClick,children:LocalizeText(getButtonText())})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}