{"ast":null,"code":"import{RoomObjectVariable}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{attemptBotPlacement,GetRoomEngine,LocalizeText,UnseenItemCategory}from'../../../../api';import{AutoGrid,Button,Column,Grid,LayoutRoomPreviewerView,Text}from'../../../../common';import{useInventoryBots,useInventoryUnseenTracker}from'../../../../hooks';import{InventoryCategoryEmptyView}from'../InventoryCategoryEmptyView';import{InventoryBotItemView}from'./InventoryBotItemView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const InventoryBotView=props=>{const{roomSession=null,roomPreviewer=null}=props;const[isVisible,setIsVisible]=useState(false);const{botItems=[],selectedBot=null,activate=null,deactivate=null}=useInventoryBots();const{isUnseen=null,removeUnseen=null}=useInventoryUnseenTracker();useEffect(()=>{if(!selectedBot||!roomPreviewer)return;const botData=selectedBot.botData;const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,RoomObjectVariable.ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.addAvatarIntoRoom(botData.figure,0);},[roomPreviewer,selectedBot]);useEffect(()=>{if(!selectedBot||!isUnseen(UnseenItemCategory.BOT,selectedBot.botData.id))return;removeUnseen(UnseenItemCategory.BOT,selectedBot.botData.id);},[selectedBot,isUnseen,removeUnseen]);useEffect(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);useEffect(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);if(!botItems||!botItems.length)return/*#__PURE__*/_jsx(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.bots.title'),desc:LocalizeText('inventory.empty.bots.desc')});return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/_jsx(AutoGrid,{columnCount:5,children:botItems&&botItems.length>0&&botItems.map(item=>/*#__PURE__*/_jsx(InventoryBotItemView,{botItem:item},item.botData.id))})}),/*#__PURE__*/_jsxs(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/_jsx(Column,{overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/_jsx(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140})}),selectedBot&&/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/_jsx(Text,{grow:true,truncate:true,children:selectedBot.botData.name}),!!roomSession&&/*#__PURE__*/_jsx(Button,{onClick:event=>attemptBotPlacement(selectedBot),children:LocalizeText('inventory.furni.placetoroom')})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}