{"ast":null,"code":"import{AvatarEditorUtilities}from'./AvatarEditorUtilities';export class CategoryBaseModel{constructor(){this._categories=void 0;this._isInitalized=void 0;this._maxPaletteCount=void 0;this._disposed=void 0;this._isInitalized=false;this._maxPaletteCount=0;}dispose(){this._categories=null;this._disposed=true;}get disposed(){return this._disposed;}init(){if(!this._categories)this._categories=new Map();}reset(){this._isInitalized=false;if(this._categories){for(const category of this._categories.values())category&&category.dispose();}this._categories=new Map();}addCategory(name){let existing=this._categories.get(name);if(existing)return;existing=AvatarEditorUtilities.createCategory(this,name);if(!existing)return;this._categories.set(name,existing);this.updateSelectionsFromFigure(name);}updateSelectionsFromFigure(figure){const category=this._categories.get(figure);if(!category)return;const setId=AvatarEditorUtilities.CURRENT_FIGURE.getPartSetId(figure);let colorIds=AvatarEditorUtilities.CURRENT_FIGURE.getColorIds(figure);if(!colorIds)colorIds=[];category.selectPartId(setId);category.selectColorIds(colorIds);}hasClubSelectionsOverLevel(level){if(!this._categories)return false;for(const category of this._categories.values()){if(!category)continue;if(category.hasClubSelectionsOverLevel(level))return true;}return false;}hasInvalidSelectedItems(ownedItems){if(!this._categories)return false;for(const category of this._categories.values()){if(category.hasInvalidSelectedItems(ownedItems))return true;}return false;}stripClubItemsOverLevel(level){if(!this._categories)return false;let didStrip=false;for(const[name,category]of this._categories.entries()){let isValid=false;if(category.stripClubItemsOverLevel(level))isValid=true;if(category.stripClubColorsOverLevel(level))isValid=true;if(isValid){const partItem=category.getCurrentPart();if(partItem&&AvatarEditorUtilities.CURRENT_FIGURE){AvatarEditorUtilities.CURRENT_FIGURE.savePartData(name,partItem.id,category.getSelectedColorIds(),true);}didStrip=true;}}return didStrip;}stripInvalidSellableItems(){if(!this._categories)return false;let didStrip=false;for(const[name,category]of this._categories.entries()){const isValid=false;// if(category._Str_8360(this._Str_2278.manager.inventory)) _local_6 = true;\nif(isValid){const partItem=category.getCurrentPart();if(partItem&&AvatarEditorUtilities.CURRENT_FIGURE){AvatarEditorUtilities.CURRENT_FIGURE.savePartData(name,partItem.id,category.getSelectedColorIds(),true);}didStrip=true;}}return didStrip;}selectPart(category,partIndex){const categoryData=this._categories.get(category);if(!categoryData)return;const selectedPartIndex=categoryData.selectedPartIndex;categoryData.selectPartIndex(partIndex);const partItem=categoryData.getCurrentPart();if(!partItem)return;if(partItem.isDisabled){categoryData.selectPartIndex(selectedPartIndex);// open hc window\nreturn;}this._maxPaletteCount=partItem.maxColorIndex;AvatarEditorUtilities.CURRENT_FIGURE.savePartData(category,partItem.id,categoryData.getSelectedColorIds(),true);}selectColor(category,colorIndex,paletteId){const categoryData=this._categories.get(category);if(!categoryData)return;const paletteIndex=categoryData.getCurrentColorIndex(paletteId);categoryData.selectColorIndex(colorIndex,paletteId);const colorItem=categoryData.getSelectedColor(paletteId);if(colorItem.isDisabled){categoryData.selectColorIndex(paletteIndex,paletteId);// open hc window\nreturn;}AvatarEditorUtilities.CURRENT_FIGURE.savePartSetColourId(category,categoryData.getSelectedColorIds(),true);}getCategoryData(category){if(!this._isInitalized)this.init();if(!this._categories)return null;return this._categories.get(category);}get categories(){return this._categories;}get canSetGender(){return false;}get maxPaletteCount(){return this._maxPaletteCount||1;}set maxPaletteCount(count){this._maxPaletteCount=count;}get name(){return null;}}","map":null,"metadata":{},"sourceType":"module"}