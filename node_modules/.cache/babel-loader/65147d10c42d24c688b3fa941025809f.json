{"ast":null,"code":"import{MouseEventType}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{Offer,ProductTypeEnum}from'../../../../../api';import{Column,Flex,LayoutAvatarImageView}from'../../../../../common';import{LayoutCatalogGridItem}from'../../../../../common/layout/LayoutCatalogGridItem';import{useCatalog,useInventoryFurni}from'../../../../../hooks';import{CatalogPriceGridDisplayWidgetView}from'../widgets/CatalogPriceGridDisplayWidgetViev';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const CatalogGridOfferView=props=>{const{offer=null,selectOffer=null,itemActive=false,...rest}=props;const[isMouseDown,setMouseDown]=useState(false);const{requestOfferToMover=null}=useCatalog();const{isVisible=false}=useInventoryFurni();const iconUrl=useMemo(()=>{if(offer.pricingModel===Offer.PRICING_MODEL_BUNDLE){return null;}return offer.product.getIconUrl(offer);},[offer]);const onMouseEvent=event=>{switch(event.type){case MouseEventType.MOUSE_DOWN:selectOffer(offer);setMouseDown(true);return;case MouseEventType.MOUSE_UP:setMouseDown(false);return;case MouseEventType.ROLL_OUT:if(!isMouseDown||!itemActive||!isVisible)return;requestOfferToMover(offer);return;}};const product=offer.product;if(!product)return null;return/*#__PURE__*/_jsxs(Column,{className:\"catalog-grid-active cursor-pointer\",gap:0,itemActive:itemActive,onMouseDown:onMouseEvent,onMouseUp:onMouseEvent,onMouseOut:onMouseEvent,children:[/*#__PURE__*/_jsx(LayoutCatalogGridItem,{itemImage:iconUrl,itemCount:offer.pricingModel===Offer.PRICING_MODEL_MULTI?product.productCount:1,itemUniqueSoldout:product.uniqueLimitedItemSeriesSize&&!product.uniqueLimitedItemsLeft,itemUniqueNumber:product.uniqueLimitedItemSeriesSize,...rest,children:offer.product.productType===ProductTypeEnum.ROBOT&&/*#__PURE__*/_jsx(LayoutAvatarImageView,{figure:offer.product.extraParam,headOnly:true,direction:3})}),/*#__PURE__*/_jsx(Flex,{alignItems:\"end\",justifyContent:\"end\",fullWidth:true,gap:0,children:/*#__PURE__*/_jsx(Column,{gap:0,children:/*#__PURE__*/_jsx(CatalogPriceGridDisplayWidgetView,{offer:offer})})})]});};","map":null,"metadata":{},"sourceType":"module"}