{"ast":null,"code":"import{GroupInformationComposer,GroupInformationEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer,ToggleFavoriteGroup}from'../../../api';import{AutoGrid,Base,Column,Flex,Grid,Text,LayoutBadgeImageView,LayoutGridItem}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupInformationView}from'../../groups/views/GroupInformationView';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export const GroupsContainerView=props=>{const{itsMe=null,groups=null,onLeaveGroup=null,overflow='hidden',gap=2,...rest}=props;const[selectedGroupId,setSelectedGroupId]=useState(null);const[groupInformation,setGroupInformation]=useState(null);const onGroupInformationEvent=useCallback(event=>{const parser=event.getParser();if(!selectedGroupId||selectedGroupId!==parser.id||parser.flag)return;setGroupInformation(parser);},[selectedGroupId]);UseMessageEventHook(GroupInformationEvent,onGroupInformationEvent);useEffect(()=>{if(!selectedGroupId)return;SendMessageComposer(new GroupInformationComposer(selectedGroupId,false));},[selectedGroupId]);useEffect(()=>{setGroupInformation(null);if(groups.length>0){setSelectedGroupId(prevValue=>{if(prevValue===groups[0].groupId){SendMessageComposer(new GroupInformationComposer(groups[0].groupId,false));}return groups[0].groupId;});}},[groups]);if(!groups||!groups.length){return/*#__PURE__*/_jsx(Column,{center:true,fullHeight:true,children:/*#__PURE__*/_jsxs(Column,{className:\"profile-grey-bg py-3 px-4\",children:[/*#__PURE__*/_jsxs(Text,{small:true,children:[\" \",LocalizeText('extendedprofile.nogroups.user')]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"center\",gap:4,children:[/*#__PURE__*/_jsx(Base,{className:\"no-group-spritesheet image-1\"}),/*#__PURE__*/_jsx(Base,{className:\"no-group-spritesheet image-2\"}),/*#__PURE__*/_jsx(Base,{className:\"no-group-spritesheet image-3\"})]}),/*#__PURE__*/_jsx(Text,{small:true,children:LocalizeText('extendedprofile.nogroups.info')})]})});}return/*#__PURE__*/_jsxs(Grid,{overflow:overflow,gap:2,...rest,children:[/*#__PURE__*/_jsx(Column,{alignItems:\"center\",size:2,overflow:\"auto\",children:/*#__PURE__*/_jsx(AutoGrid,{overflow:null,columnCount:1,columnMinHeight:50,className:\"user-groups-container\",children:groups.map((group,index)=>{return/*#__PURE__*/_jsxs(LayoutGridItem,{overflow:\"unset\",itemActive:selectedGroupId===group.groupId,onClick:()=>setSelectedGroupId(group.groupId),className:\"p-1\",children:[itsMe&&/*#__PURE__*/_jsx(\"i\",{className:'position-absolute end-0 top-0 z-index-1 icon icon-group-'+(group.favourite?'favorite':'not-favorite'),onClick:()=>ToggleFavoriteGroup(group)}),/*#__PURE__*/_jsx(LayoutBadgeImageView,{badgeCode:group.badgeCode,isGroup:true})]},index);})})}),/*#__PURE__*/_jsx(Column,{size:10,overflow:\"hidden\",children:groupInformation&&/*#__PURE__*/_jsx(GroupInformationView,{groupInformation:groupInformation,onClose:onLeaveGroup})})]});};","map":null,"metadata":{},"sourceType":"module"}