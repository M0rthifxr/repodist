{"ast":null,"code":"import{NitroPoint}from'../../../../../core';import{FurnitureAnimatedVisualization}from'./FurnitureAnimatedVisualization';export class FurniturePartyBeamerVisualization extends FurnitureAnimatedVisualization{constructor(){super();this._animPhaseIndex=void 0;this._animDirectionIndex=void 0;this._animSpeedIndex=void 0;this._animFactorIndex=void 0;this._animOffsetIndex=void 0;this._animOffsetIndex=[];}updateAnimation(scale){if(!this._animSpeedIndex)this.initItems(scale);let sprite=this.getSprite(2);if(sprite)this._animOffsetIndex[0]=this.getNewPoint(scale,0);sprite=this.getSprite(3);if(sprite)this._animOffsetIndex[1]=this.getNewPoint(scale,1);return super.updateAnimation(scale);}getNewPoint(scale,layerId){let diameter=0;let animationPhase=this._animPhaseIndex[layerId];let animationDirection=this._animDirectionIndex[layerId];const animationSpeed=this._animSpeedIndex[layerId];const animationFactor=this._animFactorIndex[layerId];let _local_7=1;if(scale==32){diameter=FurniturePartyBeamerVisualization.AREA_DIAMETER_SMALL;_local_7=0.5;}else{diameter=FurniturePartyBeamerVisualization.AREA_DIAMETER_LARGE;}const _local_9=animationPhase+animationDirection*animationSpeed;if(Math.abs(_local_9)>=diameter){if(animationDirection>0){animationPhase=animationPhase-(_local_9-diameter);}else{animationPhase=animationPhase+(-diameter-_local_9);}animationDirection=-animationDirection;this._animDirectionIndex[layerId]=animationDirection;}const _local_10=(diameter-Math.abs(animationPhase))*animationFactor;let _local_11=animationDirection*Math.sin(Math.abs(animationPhase/4))*_local_10;if(animationDirection>0){_local_11=_local_11-_local_10;}else{_local_11=_local_11+_local_10;}animationPhase=animationPhase+animationDirection*animationSpeed*_local_7;this._animPhaseIndex[layerId]=animationPhase;if(Math.trunc(_local_11)==0)this._animFactorIndex[layerId]=this.getRandomAmplitudeFactor();return new NitroPoint(animationPhase,_local_11);}initItems(scale){let diameter;if(scale===32){diameter=FurniturePartyBeamerVisualization.AREA_DIAMETER_SMALL;}else{diameter=FurniturePartyBeamerVisualization.AREA_DIAMETER_LARGE;}this._animPhaseIndex=[];this._animPhaseIndex.push(Math.random()*diameter*1.5);this._animPhaseIndex.push(Math.random()*diameter*1.5);this._animDirectionIndex=[];this._animDirectionIndex.push(1);this._animDirectionIndex.push(-1);this._animSpeedIndex=[];this._animSpeedIndex.push(FurniturePartyBeamerVisualization.ANIM_SPEED_FAST);this._animSpeedIndex.push(FurniturePartyBeamerVisualization.ANIM_SPEED_SLOW);this._animFactorIndex=[];this._animFactorIndex.push(this.getRandomAmplitudeFactor());this._animFactorIndex.push(this.getRandomAmplitudeFactor());}getLayerXOffset(scale,direction,layerId){if(layerId===2||layerId===3){if(this._animOffsetIndex.length==2){return this._animOffsetIndex[layerId-2].x;}}return super.getLayerXOffset(scale,direction,layerId);}getLayerYOffset(scale,direction,layerId){if(layerId===2||layerId===3){if(this._animOffsetIndex.length==2){return this._animOffsetIndex[layerId-2].y;}}return super.getLayerYOffset(scale,direction,layerId);}getRandomAmplitudeFactor(){return Math.random()*30/100+0.15;}}FurniturePartyBeamerVisualization.UPDATE_INTERVAL=2;FurniturePartyBeamerVisualization.AREA_DIAMETER_SMALL=15;FurniturePartyBeamerVisualization.AREA_DIAMETER_LARGE=31;FurniturePartyBeamerVisualization.ANIM_SPEED_FAST=2;FurniturePartyBeamerVisualization.ANIM_SPEED_SLOW=1;","map":null,"metadata":{},"sourceType":"module"}