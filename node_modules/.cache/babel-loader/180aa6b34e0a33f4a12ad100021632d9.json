{"ast":null,"code":"import{GetRoomVisitsMessageComposer,RoomVisitsEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{AutoSizer,List}from'react-virtualized';import{SendMessageComposer,TryVisitRoom}from'../../../../api';import{Base,Column,DraggableWindowPosition,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{UseMessageEventHook}from'../../../../hooks';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ModToolsUserRoomVisitsView=props=>{const{userId=null,onCloseClick=null}=props;const[roomVisitData,setRoomVisitData]=useState(null);const onModtoolReceivedRoomsUserEvent=useCallback(event=>{const parser=event.getParser();if(!parser||parser.data.userId!==userId)return;setRoomVisitData(parser.data);},[userId]);UseMessageEventHook(RoomVisitsEvent,onModtoolReceivedRoomsUserEvent);const RowRenderer=props=>{const item=roomVisitData.rooms[props.index];return/*#__PURE__*/_jsxs(Grid,{fullHeight:false,style:props.style,gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[/*#__PURE__*/_jsxs(Text,{className:\"g-col-2\",children:[item.enterHour.toString().padStart(2,'0'),\": \",item.enterMinute.toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(Text,{className:\"g-col-7\",children:item.roomName}),/*#__PURE__*/_jsx(Text,{gfbold:true,underline:true,pointer:true,variant:\"primary\",className:\"g-col-3\",onClick:event=>TryVisitRoom(item.roomId),children:\"Visit Room\"})]},props.key);};useEffect(()=>{SendMessageComposer(new GetRoomVisitsMessageComposer(userId));},[userId]);if(!userId)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-user-visits\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'User Visits',onCloseClick:onCloseClick}),/*#__PURE__*/_jsx(NitroCardContentView,{className:\"text-black\",gap:1,children:/*#__PURE__*/_jsxs(Column,{fullHeight:true,gap:0,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Column,{gap:2,children:/*#__PURE__*/_jsxs(Grid,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[/*#__PURE__*/_jsx(Base,{className:\"g-col-2\",children:\"Time\"}),/*#__PURE__*/_jsx(Base,{className:\"g-col-7\",children:\"Room name\"}),/*#__PURE__*/_jsx(Base,{className:\"g-col-3\",children:\"Visit\"})]})}),/*#__PURE__*/_jsx(Column,{className:\"log-container striped-children\",overflow:\"auto\",gap:0,children:roomVisitData&&/*#__PURE__*/_jsx(AutoSizer,{defaultWidth:400,defaultHeight:200,children:_ref=>{let{height,width}=_ref;return/*#__PURE__*/_jsx(List,{width:width,height:height,rowCount:roomVisitData.rooms.length,rowHeight:25,className:'log-entry-container',rowRenderer:RowRenderer});}})})]})})]});};","map":null,"metadata":{},"sourceType":"module"}