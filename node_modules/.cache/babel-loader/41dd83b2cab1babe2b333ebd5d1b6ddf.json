{"ast":null,"code":"import{SaveWardrobeOutfitMessageComposer}from'@nitrots/nitro-renderer';import{useCallback,useMemo}from'react';import{GetAvatarRenderManager,GetClubMemberLevel,GetConfiguration,LocalizeText,SendMessageComposer}from'../../../../api';import{AutoGrid,Base,Button,Flex,LayoutAvatarImageView,LayoutCurrencyIcon,LayoutGridItem}from'../../../../common';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const AvatarEditorWardrobeView=props=>{const{figureData=null,savedFigures=[],setSavedFigures=null,loadAvatarInEditor=null}=props;const hcDisabled=GetConfiguration('hc.disabled',false);const wearFigureAtIndex=useCallback(index=>{if(index>=savedFigures.length||index<0)return;const[figure,gender]=savedFigures[index];loadAvatarInEditor(figure.getFigureString(),gender);},[savedFigures,loadAvatarInEditor]);const saveFigureAtWardrobeIndex=useCallback(index=>{if(!figureData||index>=savedFigures.length||index<0)return;const newFigures=[...savedFigures];const figure=figureData.getFigureString();const gender=figureData.gender;newFigures[index]=[GetAvatarRenderManager().createFigureContainer(figure),gender];setSavedFigures(newFigures);SendMessageComposer(new SaveWardrobeOutfitMessageComposer(index+1,figure,gender));},[figureData,savedFigures,setSavedFigures]);const figures=useMemo(()=>{if(!savedFigures||!savedFigures.length)return[];const items=[];savedFigures.forEach((_ref,index)=>{let[figureContainer,gender]=_ref;let clubLevel=0;if(figureContainer)clubLevel=GetAvatarRenderManager().getFigureClubLevel(figureContainer,gender);items.push(/*#__PURE__*/_jsxs(LayoutGridItem,{position:\"relative\",overflow:\"hidden\",className:\"nitro-avatar-editor-wardrobe-figure-preview\",children:[figureContainer&&/*#__PURE__*/_jsx(LayoutAvatarImageView,{figure:figureContainer.getFigureString(),gender:gender,direction:2}),/*#__PURE__*/_jsx(Base,{className:\"avatar-shadow\"}),!hcDisabled&&clubLevel>0&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{className:\"position-absolute top-1 start-1\",type:\"hc\"}),/*#__PURE__*/_jsxs(Flex,{gap:1,className:\"button-container\",children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,onClick:event=>saveFigureAtWardrobeIndex(index),children:LocalizeText('avatareditor.wardrobe.save')}),figureContainer&&/*#__PURE__*/_jsx(Button,{fullWidth:true,onClick:event=>wearFigureAtIndex(index),disabled:clubLevel>GetClubMemberLevel(),children:LocalizeText('generic_usable.button.use')})]})]},index));});return items;},[savedFigures,hcDisabled,saveFigureAtWardrobeIndex,wearFigureAtIndex]);return/*#__PURE__*/_jsx(AutoGrid,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:figures});};","map":null,"metadata":{},"sourceType":"module"}