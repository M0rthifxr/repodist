{"ast":null,"code":"import{CatalogGroupsComposer,StringDataType}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../../api';import{Base,Button,Flex}from'../../../../../common';import{useCatalog}from'../../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const CatalogGuildSelectorWidgetView=props=>{const[selectedGroupIndex,setSelectedGroupIndex]=useState(0);const{currentOffer=null,catalogOptions=null,setPurchaseOptions=null}=useCatalog();const{groups=null}=catalogOptions;const previewStuffData=useMemo(()=>{if(!groups||!groups.length)return null;const group=groups[selectedGroupIndex];if(!group)return null;const stuffData=new StringDataType();stuffData.setValue(['0',group.groupId.toString(),group.badgeCode,group.colorA,group.colorB]);return stuffData;},[selectedGroupIndex,groups]);useEffect(()=>{if(!currentOffer)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraParamRequired=true;newValue.extraData=previewStuffData&&previewStuffData.getValue(1)||null;newValue.previewStuffData=previewStuffData;return newValue;});},[currentOffer,previewStuffData,setPurchaseOptions]);useEffect(()=>{SendMessageComposer(new CatalogGroupsComposer());},[]);if(!groups||!groups.length){return/*#__PURE__*/_jsxs(Base,{className:\"bg-muted rounded p-1 text-black text-center\",children:[LocalizeText('catalog.guild_selector.members_only'),/*#__PURE__*/_jsx(Button,{className:\"mt-1\",children:LocalizeText('catalog.guild_selector.find_groups')})]});}const selectedGroup=groups[selectedGroupIndex];return/*#__PURE__*/_jsxs(Flex,{gap:1,children:[!!selectedGroup&&/*#__PURE__*/_jsxs(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/_jsx(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorA}}),/*#__PURE__*/_jsx(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorB}})]}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",value:selectedGroupIndex,onChange:event=>setSelectedGroupIndex(parseInt(event.target.value)),children:groups.map((group,index)=>/*#__PURE__*/_jsx(\"option\",{value:index,children:group.groupName},index))})]});};","map":null,"metadata":{},"sourceType":"module"}