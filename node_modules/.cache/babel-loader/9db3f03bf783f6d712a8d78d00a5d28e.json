{"ast":null,"code":"/* eslint-disable no-template-curly-in-string */import{HabboClubLevelEnum,RoomCreateComposer}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{CreateLinkEvent,GetClubMemberLevel,GetConfiguration,LocalizeText,SendMessageComposer}from'../../../api';import{AutoGrid,Button,Column,Flex,Grid,LayoutCurrencyIcon,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{RoomCreatorGridItem}from'../../../common/layout/RoomCreatorGridItem';import{useNavigatorContext}from'../NavigatorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const NavigatorRoomCreatorView=props=>{const[maxVisitorsList,setMaxVisitorsList]=useState(null);const[name,setName]=useState(null);const[description,setDescription]=useState(null);const[category,setCategory]=useState(null);const[visitorsCount,setVisitorsCount]=useState(null);const[tradesSetting,setTradesSetting]=useState(0);const[roomModels,setRoomModels]=useState([]);const[selectedModelName,setSelectedModelName]=useState('');const{categories=null}=useNavigatorContext();const hcDisabled=GetConfiguration('hc.disabled',false);const getRoomModelImage=name=>GetConfiguration('images.url')+`/navigator/models/model_${name}.png`;const selectModel=(model,index)=>{if(!model||model.clubLevel>GetClubMemberLevel())return;setSelectedModelName(roomModels[index].name);};const createRoom=()=>{SendMessageComposer(new RoomCreateComposer(name,description,'model_'+selectedModelName,Number(category),Number(visitorsCount),tradesSetting));};useEffect(()=>{if(!maxVisitorsList){const list=[];for(let i=10;i<=100;i=i+10)list.push(i);setMaxVisitorsList(list);setVisitorsCount(list[0]);}},[maxVisitorsList]);useEffect(()=>{if(categories&&categories.length)setCategory(categories[0].id);},[categories]);useEffect(()=>{const models=GetConfiguration('navigator.room.models');if(models&&models.length){setRoomModels(models);setSelectedModelName(models[0].name);}},[]);return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-room-creator\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('navigator.createroom.title'),onCloseClick:event=>CreateLinkEvent('navigator/close-creator')}),/*#__PURE__*/_jsx(NitroCardContentView,{children:/*#__PURE__*/_jsx(Column,{overflow:\"hidden\",children:/*#__PURE__*/_jsxs(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Column,{size:5,gap:1,overflow:\"auto\",className:\"px-2 py-1\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,children:LocalizeText('navigator.createroom.roomnameinfo')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"room-creator-form\",maxLength:60,onChange:event=>setName(event.target.value),placeholder:LocalizeText('navigator.createroom.roomnameinfo')})]}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:1,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,children:LocalizeText('navigator.createroom.roomdescinfo')}),/*#__PURE__*/_jsx(\"textarea\",{className:\"flex-grow-1 room-creator-form\",maxLength:255,onChange:event=>setDescription(event.target.value),placeholder:LocalizeText('navigator.createroom.roomdescinfo')})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,children:LocalizeText('navigator.category')}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setCategory(Number(event.target.value)),children:categories&&categories.length>0&&categories.map(category=>{return/*#__PURE__*/_jsx(\"option\",{value:category.id,children:LocalizeText(category.name)},category.id);})})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,children:LocalizeText('navigator.maxvisitors')}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setVisitorsCount(Number(event.target.value)),children:maxVisitorsList&&maxVisitorsList.map(value=>{return/*#__PURE__*/_jsx(\"option\",{value:value,children:value},value);})})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{gfbold:true,children:LocalizeText('navigator.tradesettings')}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setTradesSetting(Number(event.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.trade_not_allowed')}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.trade_not_with_Controller')}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:LocalizeText('navigator.roomsettings.trade_allowed')})]})]}),/*#__PURE__*/_jsxs(Flex,{gap:2,children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,className:\"volter-bold-button\",onClick:createRoom,disabled:!name||name.length<3,children:LocalizeText('navigator.createroom.create')}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:\"volter-button\",onClick:event=>CreateLinkEvent('navigator/close-creator'),children:LocalizeText('cancel')})]})]}),/*#__PURE__*/_jsx(Column,{size:7,gap:1,overflow:\"auto\",children:/*#__PURE__*/_jsx(AutoGrid,{className:\"room-creator-grid\",columnCount:2,columnMinWidth:100,columnMinHeight:50,overflow:\"unset\",children:roomModels.map((model,index)=>{return/*#__PURE__*/_jsxs(RoomCreatorGridItem,{fullHeight:true,onClick:()=>selectModel(model,index),itemActive:selectedModelName===model.name,overflow:\"unset\",gap:0,className:\"py-3\",disabled:GetClubMemberLevel()<model.clubLevel,children:[/*#__PURE__*/_jsx(Flex,{fullHeight:true,center:true,overflow:\"hidden\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:getRoomModelImage(model.name)})}),/*#__PURE__*/_jsxs(Text,{position:\"absolute\",className:\"bottom-1 start-1\",children:[model.tileSize,\" \",LocalizeText('navigator.createroom.tilesize')]}),!hcDisabled&&model.clubLevel>HabboClubLevelEnum.NO_CLUB&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{position:\"absolute\",className:\"top-1 end-1\",type:\"hc\"}),selectedModelName&&/*#__PURE__*/_jsx(\"i\",{className:\"active-arrow\"})]},model.name);})})})]})})})]});};","map":null,"metadata":{},"sourceType":"module"}