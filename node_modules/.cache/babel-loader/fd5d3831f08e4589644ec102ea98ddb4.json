{"ast":null,"code":"import{MouseEventType,TouchEventType}from'@nitrots/nitro-renderer';import{GetRoomEngine}from'./GetRoomEngine';let didMouseMove=false;let lastClick=0;let clickCount=0;let touchTimer=null;export const DispatchTouchEvent=function(event){let canvasId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let longTouch=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let altKey=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let ctrlKey=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let shiftKey=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;let eventType=event.type;if(longTouch)eventType=TouchEventType.TOUCH_LONG;if(eventType===TouchEventType.TOUCH_END&&!didMouseMove){eventType=MouseEventType.MOUSE_CLICK;if(lastClick){clickCount=1;if(lastClick>=Date.now()-300)clickCount++;}lastClick=Date.now();if(clickCount===2){eventType=MouseEventType.DOUBLE_CLICK;clickCount=0;lastClick=null;}}if(touchTimer)clearTimeout(touchTimer);let x=0;let y=0;if(event.touches[0]){x=event.touches[0].clientX;y=event.touches[0].clientY;}else if(event.changedTouches[0]){x=event.changedTouches[0].clientX;y=event.changedTouches[0].clientY;}switch(eventType){case MouseEventType.MOUSE_CLICK:break;case MouseEventType.DOUBLE_CLICK:break;case TouchEventType.TOUCH_START:touchTimer=setTimeout(()=>{if(didMouseMove)return;DispatchTouchEvent(event,canvasId,true);},300);eventType=MouseEventType.MOUSE_DOWN;didMouseMove=false;break;case TouchEventType.TOUCH_MOVE:eventType=MouseEventType.MOUSE_MOVE;didMouseMove=true;break;case TouchEventType.TOUCH_END:eventType=MouseEventType.MOUSE_UP;break;case TouchEventType.TOUCH_LONG:eventType=MouseEventType.MOUSE_DOWN_LONG;break;default:return;}GetRoomEngine().dispatchMouseEvent(canvasId,x,y,eventType,altKey,ctrlKey,shiftKey,false);};","map":null,"metadata":{},"sourceType":"module"}