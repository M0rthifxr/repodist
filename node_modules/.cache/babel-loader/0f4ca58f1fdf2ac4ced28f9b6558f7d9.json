{"ast":null,"code":"import{RoomEngineTriggerWidgetEvent,RoomObjectVariable,RoomWidgetEnum}from'@nitrots/nitro-renderer';import{GetRoomEngine}from'../../../..';import{RoomWidgetUpdateExternalImageEvent}from'../events';import{RoomWidgetHandler}from'./RoomWidgetHandler';export class FurnitureExternalImageWidgetHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._lastFurniId=-1;}processEvent(event){switch(event.type){case RoomEngineTriggerWidgetEvent.OPEN_WIDGET:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;this._lastFurniId=widgetEvent.objectId;const data=roomObject.model.getValue(RoomObjectVariable.FURNITURE_DATA);const photoData=JSON.parse(data);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateExternalImageEvent(roomObject.id,photoData));return;}case RoomEngineTriggerWidgetEvent.CLOSE_WIDGET:{const widgetEvent=event;if(widgetEvent.objectId!==this._lastFurniId)return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateExternalImageEvent(-1));return;}}}processWidgetMessage(message){switch(message.type){}return null;}get type(){return RoomWidgetEnum.EXTERNAL_IMAGE;}get eventTypes(){return[];}get messageTypes(){return[];}}","map":null,"metadata":{},"sourceType":"module"}