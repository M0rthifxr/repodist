{"ast":null,"code":"import{LocalizeText}from'..';import{FurniCategory}from'./FurniCategory';export class GroupItem{constructor(){let type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;let category=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;let roomEngine=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let stuffData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let extra=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;this._type=void 0;this._category=void 0;this._roomEngine=void 0;this._stuffData=void 0;this._extra=void 0;this._isWallItem=void 0;this._iconUrl=void 0;this._name=void 0;this._description=void 0;this._locked=void 0;this._selected=void 0;this._hasUnseenItems=void 0;this._items=void 0;this._type=type;this._category=category;this._roomEngine=roomEngine;this._stuffData=stuffData;this._extra=extra;this._isWallItem=false;this._iconUrl=null;this._name=null;this._description=null;this._locked=false;this._selected=false;this._hasUnseenItems=false;this._items=[];}clone(){const groupItem=new GroupItem();groupItem._type=this._type;groupItem._category=this._category;groupItem._roomEngine=this._roomEngine;groupItem._stuffData=this._stuffData;groupItem._extra=this._extra;groupItem._isWallItem=this._isWallItem;groupItem._iconUrl=this._iconUrl;groupItem._name=this._name;groupItem._description=this._description;groupItem._locked=this._locked;groupItem._selected=this._selected;groupItem._hasUnseenItems=this._hasUnseenItems;groupItem._items=this._items;return groupItem;}prepareGroup(){this.setIcon();this.setName();this.setDescription();}dispose(){}getItemByIndex(index){return this._items[index];}getItemById(id){for(const item of this._items){if(item.id!==id)continue;return item;}return null;}getTradeItems(count){const items=[];const furnitureItem=this.getLastItem();if(!furnitureItem)return items;let found=0;let i=0;while(i<this._items.length){if(found>=count)break;const item=this.getItemByIndex(i);if(!item.locked&&item.isTradable&&item.type===furnitureItem.type){items.push(item);found++;}i++;}return items;}push(item){const items=[...this._items];let index=0;while(index<items.length){let existingItem=items[index];if(existingItem.id===item.id){existingItem=existingItem.clone();existingItem.locked=false;items.splice(index,1);items.push(existingItem);this._items=items;return;}index++;}items.push(item);this._items=items;if(this._items.length===1)this.prepareGroup();}pop(){const items=[...this._items];let item=null;if(items.length>0){const index=items.length-1;item=items[index];items.splice(index,1);}this._items=items;return item;}remove(k){const items=[...this._items];let index=0;while(index<items.length){let existingItem=items[index];if(existingItem.id===k){items.splice(index,1);this._items=items;return existingItem;}index++;}return null;}getTotalCount(){if(this._category===FurniCategory.POST_IT){let count=0;let index=0;while(index<this._items.length){const item=this.getItemByIndex(index);count=count+parseInt(item.stuffData.getLegacyString());index++;}return count;}return this._items.length;}getUnlockedCount(){if(this.category===FurniCategory.POST_IT)return this.getTotalCount();let count=0;let index=0;while(index<this._items.length){const item=this.getItemByIndex(index);if(!item.locked)count++;index++;}return count;}getLastItem(){if(!this._items.length)return null;const item=this.getItemByIndex(this._items.length-1);return item;}unlockAllItems(){const items=[...this._items];let index=0;while(index<items.length){const item=items[index];if(item.locked){const newItem=item.clone();newItem.locked=false;items[index]=newItem;}index++;}this._items=items;}lockItemIds(itemIds){const items=[...this._items];let index=0;let updated=false;while(index<items.length){const item=items[index];const locked=itemIds.indexOf(item.ref)>=0;if(item.locked!==locked){updated=true;const newItem=item.clone();newItem.locked=locked;items[index]=newItem;}index++;}this._items=items;return updated;}setName(){const k=this.getLastItem();if(!k){this._name='';return;}let key='';switch(this._category){case FurniCategory.POSTER:key='poster_'+k.stuffData.getLegacyString()+'_name';break;case FurniCategory.TRAX_SONG:this._name='SONG_NAME';return;default:if(this.isWallItem){key='wallItem.name.'+k.type;}else{key='roomItem.name.'+k.type;}}this._name=LocalizeText(key);}setDescription(){this._description='';}setIcon(){if(this._iconUrl)return;let url=null;if(this.isWallItem){url=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString());}else{url=this._roomEngine.getFurnitureFloorIconUrl(this._type);}if(!url)return;this._iconUrl=url;}get type(){return this._type;}get category(){return this._category;}get stuffData(){return this._stuffData;}get extra(){return this._extra;}get iconUrl(){return this._iconUrl;}get name(){return this._name;}get description(){return this._description;}get hasUnseenItems(){return this._hasUnseenItems;}set hasUnseenItems(flag){this._hasUnseenItems=flag;}get locked(){return this._locked;}set locked(flag){this._locked=flag;}get selected(){return this._selected;}set selected(flag){this._selected=flag;}get isWallItem(){const item=this.getItemByIndex(0);return item?item.isWallItem:false;}get isGroupable(){const item=this.getItemByIndex(0);return item?item.isGroupable:false;}get isSellable(){const item=this.getItemByIndex(0);return item?item.sellable:false;}get items(){return this._items;}set items(items){this._items=items;}}","map":null,"metadata":{},"sourceType":"module"}