{"ast":null,"code":"import{useMemo,useState}from'react';import{LocalizeText}from'../../../api';import{Button,Column,Flex,Text}from'../../../common';import{GetCfhCategories}from'../../mod-tools/common/GetCFHCategories';import{useHelpContext}from'../HelpContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const SelectTopicView=props=>{const{setHelpReportState=null}=useHelpContext();const[selectedCategory,setSelectedCategory]=useState(-1);const[selectedTopic,setSelectedTopic]=useState(-1);const cfhCategories=useMemo(()=>GetCfhCategories(),[]);const submitTopic=()=>{if(selectedCategory<0||selectedTopic<0)return;setHelpReportState(prevValue=>{const cfhCategory=selectedCategory;const cfhTopic=cfhCategories[selectedCategory].topics[selectedTopic].id;const currentStep=4;return{...prevValue,cfhCategory,cfhTopic,currentStep};});};const back=()=>{setHelpReportState(prevValue=>{const currentStep=prevValue.currentStep-1;return{...prevValue,currentStep};});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{fontSize:4,children:LocalizeText('help.emergency.chat_report.subtitle')}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('help.cfh.pick.topic')})]}),/*#__PURE__*/_jsxs(Column,{gap:1,overflow:\"auto\",children:[selectedCategory<0&&cfhCategories.map((category,index)=>/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:event=>setSelectedCategory(index),children:LocalizeText(`help.cfh.reason.${category.name}`)},index)),selectedCategory>=0&&cfhCategories[selectedCategory].topics.map((topic,index)=>/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:event=>setSelectedTopic(index),active:selectedTopic===index,children:LocalizeText(`help.cfh.topic.${topic.id}`)},index))]}),/*#__PURE__*/_jsxs(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/_jsx(Button,{disabled:selectedTopic<0,onClick:submitTopic,children:LocalizeText('help.emergency.main.submit.button')})]})]});};","map":null,"metadata":{},"sourceType":"module"}