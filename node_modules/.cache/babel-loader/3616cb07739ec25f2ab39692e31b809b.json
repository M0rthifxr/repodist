{"ast":null,"code":"import listen from'dom-helpers/listen';import ownerDocument from'dom-helpers/ownerDocument';import{useEffect}from'react';import useEventCallback from'@restart/hooks/useEventCallback';import useClickOutside,{getRefTarget}from'./useClickOutside';const escapeKeyCode=27;const noop=()=>{};/**\n * The `useRootClose` hook registers your callback on the document\n * when rendered. Powers the `<Overlay/>` component. This is used achieve modal\n * style behavior where your callback is triggered when the user tries to\n * interact with the rest of the document or hits the `esc` key.\n *\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\n * @param {function} onRootClose\n * @param {object=}  options\n * @param {boolean=} options.disabled\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\n */function useRootClose(ref,onRootClose){let{disabled,clickTrigger}=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const onClose=onRootClose||noop;useClickOutside(ref,onClose,{disabled,clickTrigger});const handleKeyUp=useEventCallback(e=>{if(e.keyCode===escapeKeyCode){onClose(e);}});useEffect(()=>{if(disabled||ref==null)return undefined;const doc=ownerDocument(getRefTarget(ref));// Store the current event to avoid triggering handlers immediately\n// https://github.com/facebook/react/issues/20074\nlet currentEvent=(doc.defaultView||window).event;const removeKeyupListener=listen(doc,'keyup',e=>{// skip if this event is the same as the one running when we added the handlers\nif(e===currentEvent){currentEvent=undefined;return;}handleKeyUp(e);});return()=>{removeKeyupListener();};},[ref,disabled,handleKeyUp]);}export default useRootClose;","map":null,"metadata":{},"sourceType":"module"}