{"ast":null,"code":"import{RedeemVoucherMessageComposer,VoucherRedeemErrorMessageEvent,VoucherRedeemOkMessageEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{LocalizeText,NotificationUtilities,SendMessageComposer}from'../../../../../api';import{Button,Column,Flex,Text}from'../../../../../common';import{UseMessageEventHook}from'../../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const CatalogRedeemVoucherView=props=>{const{text=null}=props;const[voucher,setVoucher]=useState('');const[isWaiting,setIsWaiting]=useState(false);const redeemVoucher=()=>{if(!voucher||!voucher.length||isWaiting)return;SendMessageComposer(new RedeemVoucherMessageComposer(voucher));setIsWaiting(true);};const onVoucherRedeemOkMessageEvent=useCallback(event=>{const parser=event.getParser();let message=LocalizeText('catalog.alert.voucherredeem.ok.description');if(parser.productName)message=LocalizeText('catalog.alert.voucherredeem.ok.description.furni',['productName','productDescription'],[parser.productName,parser.productDescription]);NotificationUtilities.simpleAlert(message,null,null,null,LocalizeText('catalog.alert.voucherredeem.ok.title'));setIsWaiting(false);setVoucher('');},[]);UseMessageEventHook(VoucherRedeemOkMessageEvent,onVoucherRedeemOkMessageEvent);const onVoucherRedeemErrorMessageEvent=useCallback(event=>{const parser=event.getParser();NotificationUtilities.simpleAlert(LocalizeText(`catalog.alert.voucherredeem.error.description.${parser.errorCode}`),null,null,null,LocalizeText('catalog.alert.voucherredeem.error.title'));setIsWaiting(false);},[]);UseMessageEventHook(VoucherRedeemErrorMessageEvent,onVoucherRedeemErrorMessageEvent);return/*#__PURE__*/_jsxs(Column,{className:\"voucher-box p-2\",gap:1,children:[/*#__PURE__*/_jsx(Text,{className:\"px-1\",children:text}),/*#__PURE__*/_jsxs(Flex,{className:\"voucher-form\",gap:5,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:voucher,onChange:event=>setVoucher(event.target.value)}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:redeemVoucher,disabled:isWaiting,children:LocalizeText('redeem')})]})]});};","map":null,"metadata":{},"sourceType":"module"}