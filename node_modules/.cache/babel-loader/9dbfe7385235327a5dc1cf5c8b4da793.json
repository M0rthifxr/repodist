{"ast":null,"code":"import React,{useEffect,useState}from'react';import{LocalizeText,SearchFilterOptions}from'../../../../api';import{Flex}from'../../../../common';import{useNavigatorContext}from'../../NavigatorContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const NavigatorSearchView=props=>{const{sendSearch=null}=props;const[searchFilterIndex,setSearchFilterIndex]=useState(0);const[searchValue,setSearchValue]=useState('');const{topLevelContext=null,searchResult=null}=useNavigatorContext();const processSearch=()=>{if(!topLevelContext)return;let searchFilter=SearchFilterOptions[searchFilterIndex];if(!searchFilter)searchFilter=SearchFilterOptions[0];const searchQuery=(searchFilter.query?searchFilter.query+':':'')+searchValue;sendSearch(searchQuery||'',topLevelContext.code);};const handleKeyDown=event=>{if(event.key!=='Enter')return;processSearch();};useEffect(()=>{if(!searchResult)return;const split=searchResult.data.split(':');let filter=null;let value='';if(split.length>=2){const[query,...rest]=split;filter=SearchFilterOptions.find(option=>option.query===query);value=rest.join(':');}else{value=searchResult.data;}if(!filter)filter=SearchFilterOptions[0];setSearchFilterIndex(SearchFilterOptions.findIndex(option=>option===filter));setSearchValue(value);},[searchResult]);return/*#__PURE__*/_jsxs(Flex,{fullWidth:true,gap:1,children:[/*#__PURE__*/_jsx(Flex,{shrink:true,children:/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",value:searchFilterIndex,onChange:event=>setSearchFilterIndex(parseInt(event.target.value)),children:SearchFilterOptions.map((filter,index)=>{return/*#__PURE__*/_jsx(\"option\",{value:index,children:LocalizeText('navigator.filter.'+filter.name)},index);})})}),/*#__PURE__*/_jsxs(Flex,{fullWidth:true,gap:2,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('navigator.filter.input.placeholder'),value:searchValue,onChange:event=>setSearchValue(event.target.value),onKeyDown:event=>handleKeyDown(event)}),/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-pen navigator-search-button position-absolute\",onClick:processSearch})]})]});};","map":null,"metadata":{},"sourceType":"module"}