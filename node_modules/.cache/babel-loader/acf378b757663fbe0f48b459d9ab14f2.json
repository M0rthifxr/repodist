{"ast":null,"code":"import{RoomChatSettings}from'@nitrots/nitro-renderer';import{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const ChatWidgetMessageView=props=>{const{chat=null,makeRoom=null,onChatClicked=null,bubbleWidth=RoomChatSettings.CHAT_BUBBLE_WIDTH_NORMAL}=props;const[isVisible,setIsVisible]=useState(false);const elementRef=useRef();const getBubbleWidth=useMemo(()=>{switch(bubbleWidth){case RoomChatSettings.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case RoomChatSettings.CHAT_BUBBLE_WIDTH_THIN:return 240;case RoomChatSettings.CHAT_BUBBLE_WIDTH_WIDE:return 2000;}},[bubbleWidth]);useEffect(()=>{const element=elementRef.current;if(!element)return;const width=element.offsetWidth;const height=element.offsetHeight;chat.width=width;chat.height=height;chat.elementRef=element;let left=chat.left;let top=chat.top;if(!left&&!top){left=chat.location.x-width/2;top=element.parentElement.offsetHeight-height;chat.left=left;chat.top=top;}if(!chat.visible){makeRoom(chat);chat.visible=true;}return()=>{chat.elementRef=null;};},[elementRef,chat,makeRoom]);useEffect(()=>setIsVisible(chat.visible),[chat.visible]);return/*#__PURE__*/_jsxs(\"div\",{ref:elementRef,className:`bubble-container ${isVisible?'visible':'invisible'}`,onClick:event=>onChatClicked(chat),children:[chat.styleId===0&&/*#__PURE__*/_jsx(\"div\",{className:\"user-container-bg\",style:{backgroundColor:chat.color}}),/*#__PURE__*/_jsxs(\"div\",{className:`chat-bubble bubble-${chat.styleId} type-${chat.type}`,style:{maxWidth:getBubbleWidth},children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-container\",children:chat.imageUrl&&chat.imageUrl.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"user-image\",style:{backgroundImage:`url(${chat.imageUrl})`}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"username mr-1\",dangerouslySetInnerHTML:{__html:`${chat.username}: `}}),/*#__PURE__*/_jsx(\"span\",{className:\"message\",dangerouslySetInnerHTML:{__html:`${chat.formattedText}`}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"pointer\"})]})]});};","map":null,"metadata":{},"sourceType":"module"}