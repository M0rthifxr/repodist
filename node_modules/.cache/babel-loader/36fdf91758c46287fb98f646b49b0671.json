{"ast":null,"code":"import{useCallback,useMemo,useState}from'react';import{AutoSizer,List}from'react-virtualized';import{RoomWidgetRoomObjectMessage}from'../../../../api';import{LocalizeText}from'../../../../api/utils';import{Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{useRoomContext}from'../../RoomContext';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ChooserWidgetView=props=>{const{title=null,items=null,displayItemId=false,onCloseClick=null}=props;const[selectedItem,setSelectedItem]=useState(null);const[searchValue,setSearchValue]=useState('');const{widgetHandler=null}=useRoomContext();const filteredItems=useMemo(()=>{if(!items)return[];if(!searchValue||!searchValue.length)return items;const value=searchValue.toLocaleLowerCase();return items.filter(item=>item.name.toLocaleLowerCase().includes(value));},[items,searchValue]);const onItemClick=useCallback(item=>{setSelectedItem(item);widgetHandler.processWidgetMessage(new RoomWidgetRoomObjectMessage(RoomWidgetRoomObjectMessage.SELECT_OBJECT,item.id,item.category));},[widgetHandler,setSelectedItem]);const rowRenderer=props=>{const item=filteredItems[props.index];return/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",position:\"absolute\",className:'rounded px-1'+(selectedItem===item?' bg-muted':''),pointer:true,style:props.style,onClick:event=>onItemClick(item),children:/*#__PURE__*/_jsxs(Text,{truncate:true,children:[item.name,\" \",displayItemId&&' - '+item.id]})},props.key);};return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-chooser-widget\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:title,onCloseClick:onCloseClick}),/*#__PURE__*/_jsxs(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>setSearchValue(event.target.value)}),/*#__PURE__*/_jsx(Column,{fullHeight:true,overflow:\"auto\",children:/*#__PURE__*/_jsx(AutoSizer,{defaultWidth:0,defaultHeight:0,children:_ref=>{let{width,height}=_ref;return/*#__PURE__*/_jsx(List,{width:width,height:height,rowCount:filteredItems.length,rowHeight:20,rowRenderer:rowRenderer});}})})]})]});};","map":null,"metadata":{},"sourceType":"module"}