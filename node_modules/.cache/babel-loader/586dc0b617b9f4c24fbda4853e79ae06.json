{"ast":null,"code":"import{CloseIssuesMessageComposer,ReleaseIssuesMessageComposer}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../api';import{Button,Column,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{ModToolsOpenUserInfoEvent}from'../../../../events';import{DispatchUiEvent}from'../../../../hooks';import{getSourceName}from'../../common/IssueCategoryNames';import{useModToolsContext}from'../../ModToolsContext';import{CfhChatlogView}from'./CfhChatlogView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const ModToolsIssueInfoView=props=>{const{issueId=null,onIssueInfoClosed=null}=props;const{modToolsState=null}=useModToolsContext();const{tickets=null}=modToolsState;const[cfhChatlogOpen,setcfhChatlogOpen]=useState(false);const ticket=useMemo(()=>{if(!tickets||!tickets.length)return null;return tickets.find(issue=>issue.issueId===issueId);},[issueId,tickets]);const releaseIssue=issueId=>{SendMessageComposer(new ReleaseIssuesMessageComposer([issueId]));onIssueInfoClosed(issueId);};const closeIssue=resolutionType=>{SendMessageComposer(new CloseIssuesMessageComposer([issueId],resolutionType));onIssueInfoClosed(issueId);};const openUserInfo=userId=>DispatchUiEvent(new ModToolsOpenUserInfoEvent(userId));return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mod-tools-handle-issue\",theme:\"modtool-windows\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:'Resolving issue '+issueId,onCloseClick:()=>onIssueInfoClosed(issueId)}),/*#__PURE__*/_jsxs(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/_jsx(Text,{fontSize:4,children:\"Issue Information\"}),/*#__PURE__*/_jsxs(Grid,{overflow:\"auto\",children:[/*#__PURE__*/_jsx(Column,{size:8,children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Source\"}),/*#__PURE__*/_jsx(\"td\",{children:getSourceName(ticket.categoryId)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-break\",children:LocalizeText('help.cfh.topic.'+ticket.reportedCategoryId)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"td\",{className:\"text-break\",children:ticket.message})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Caller\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Text,{gfbold:true,underline:true,pointer:true,onClick:event=>openUserInfo(ticket.reporterUserId),children:ticket.reporterUserName})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Reported User\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Text,{gfbold:true,underline:true,pointer:true,onClick:event=>openUserInfo(ticket.reportedUserId),children:ticket.reportedUserName})})]})]})})}),/*#__PURE__*/_jsxs(Column,{size:4,gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setcfhChatlogOpen(!cfhChatlogOpen),children:\"Chatlog\"}),/*#__PURE__*/_jsx(Button,{onClick:event=>closeIssue(CloseIssuesMessageComposer.RESOLUTION_USELESS),children:\"Close as useless\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:event=>closeIssue(CloseIssuesMessageComposer.RESOLUTION_ABUSIVE),children:\"Close as abusive\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:event=>closeIssue(CloseIssuesMessageComposer.RESOLUTION_RESOLVED),children:\"Close as resolved\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:event=>releaseIssue(issueId),children:\"Release\"})]})]})]})]}),cfhChatlogOpen&&/*#__PURE__*/_jsx(CfhChatlogView,{issueId:issueId,onCloseClick:()=>setcfhChatlogOpen(false)})]});};","map":null,"metadata":{},"sourceType":"module"}