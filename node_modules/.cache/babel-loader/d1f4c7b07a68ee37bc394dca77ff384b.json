{"ast":null,"code":"import{GroupBadgePart,GroupInformationEvent,GroupSettingsEvent}from'@nitrots/nitro-renderer';import{useCallback,useState}from'react';import{LocalizeText}from'../../../api';import{Base,Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardTabsItemView,NitroCardTabsView,NitroCardView,Text}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupTabBadgeView}from'./tabs/GroupTabBadgeView';import{GroupTabColorsView}from'./tabs/GroupTabColorsView';import{GroupTabIdentityView}from'./tabs/GroupTabIdentityView';import{GroupTabSettingsView}from'./tabs/GroupTabSettingsView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TABS=[1,2,3,5];export const GroupManagerView=props=>{const[currentTab,setCurrentTab]=useState(1);const[closeAction,setCloseAction]=useState(null);const[groupData,setGroupData]=useState(null);const close=()=>{setCloseAction(prevValue=>{if(prevValue&&prevValue.action)prevValue.action();return null;});setGroupData(null);};const changeTab=tab=>{if(closeAction&&closeAction.action)closeAction.action();setCurrentTab(tab);};const onGroupInformationEvent=useCallback(event=>{const parser=event.getParser();if(!groupData||groupData.groupId!==parser.id)return;setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupName=parser.title;newValue.groupDescription=parser.description;newValue.groupState=parser.type;newValue.groupCanMembersDecorate=parser.canMembersDecorate;return newValue;});},[groupData]);UseMessageEventHook(GroupInformationEvent,onGroupInformationEvent);const onGroupSettingsEvent=useCallback(event=>{const parser=event.getParser();const groupBadgeParts=[];parser.badgeParts.forEach((part,id)=>{groupBadgeParts.push(new GroupBadgePart(part.isBase?GroupBadgePart.BASE:GroupBadgePart.SYMBOL,part.key,part.color,part.position));});setGroupData({groupId:parser.id,groupName:parser.title,groupDescription:parser.description,groupHomeroomId:parser.roomId,groupState:parser.state,groupCanMembersDecorate:parser.canMembersDecorate,groupColors:[parser.colorA,parser.colorB],groupBadgeParts});},[setGroupData]);UseMessageEventHook(GroupSettingsEvent,onGroupSettingsEvent);if(!groupData||groupData.groupId<=0)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-group-manager\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('group.window.title'),onCloseClick:close}),/*#__PURE__*/_jsx(NitroCardTabsView,{children:TABS.map(tab=>{return/*#__PURE__*/_jsx(NitroCardTabsItemView,{isActive:currentTab===tab,onClick:()=>changeTab(tab),children:LocalizeText(`group.edit.tab.${tab}`)},tab);})}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Base,{className:`nitro-group-tab-image tab-${currentTab}`}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{bold:true,fontSize:4,children:LocalizeText(`group.edit.tabcaption.${currentTab}`)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText(`group.edit.tabdesc.${currentTab}`)})]})]}),/*#__PURE__*/_jsxs(Column,{grow:true,overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/_jsx(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:close}),currentTab===2&&/*#__PURE__*/_jsx(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,skipDefault:true}),currentTab===3&&/*#__PURE__*/_jsx(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===5&&/*#__PURE__*/_jsx(GroupTabSettingsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}