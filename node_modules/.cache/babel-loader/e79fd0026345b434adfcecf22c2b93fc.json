{"ast":null,"code":"import{AvatarAction,AvatarExpressionEnum,RoomControllerLevel,RoomObjectCategory}from'@nitrots/nitro-renderer';import{useCallback,useMemo,useState}from'react';import{CreateLinkEvent,GetCanStandUp,GetCanUseExpression,GetOwnPosture,GetUserProfile,HasHabboClub,HasHabboVip,IsRidingHorse,LocalizeText,RoomWidgetAvatarExpressionMessage,RoomWidgetChangePostureMessage,RoomWidgetDanceMessage,RoomWidgetUpdateDecorateModeEvent,RoomWidgetUserActionMessage}from'../../../../api';import{Column,Flex,LayoutCurrencyIcon}from'../../../../common';import{HelpNameChangeEvent}from'../../../../events';import{DispatchUiEvent}from'../../../../hooks';import{useRoomContext}from'../../RoomContext';import{ContextMenuHeaderView}from'../context-menu/ContextMenuHeaderView';import{ContextMenuListItemView}from'../context-menu/ContextMenuListItemView';import{ContextMenuView}from'../context-menu/ContextMenuView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MODE_NORMAL=0;const MODE_CLUB_DANCES=1;const MODE_NAME_CHANGE=2;const MODE_EXPRESSIONS=3;const MODE_SIGNS=4;export const AvatarInfoWidgetOwnAvatarView=props=>{const{userData=null,isDancing=false,close=null}=props;const[mode,setMode]=useState(isDancing&&HasHabboClub()?MODE_CLUB_DANCES:MODE_NORMAL);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const[hide,setHide]=useState(false);const processAction=useCallback(name=>{let message=null;let hideMenu=true;if(name){if(name.startsWith('sign_')){const sign=parseInt(name.split('_')[1]);roomSession.sendSignMessage(sign);}else{switch(name){case'decorate':eventDispatcher.dispatchEvent(new RoomWidgetUpdateDecorateModeEvent(true));break;case'change_name':DispatchUiEvent(new HelpNameChangeEvent(HelpNameChangeEvent.INIT));break;case'change_looks':CreateLinkEvent('avatar-editor/show');break;case'expressions':hideMenu=false;setMode(MODE_EXPRESSIONS);break;case'sit':message=new RoomWidgetChangePostureMessage(RoomWidgetChangePostureMessage.POSTURE_SIT);break;case'stand':message=new RoomWidgetChangePostureMessage(RoomWidgetChangePostureMessage.POSTURE_STAND);break;case'wave':message=new RoomWidgetAvatarExpressionMessage(AvatarExpressionEnum.WAVE);break;case'blow':message=new RoomWidgetAvatarExpressionMessage(AvatarExpressionEnum.BLOW);break;case'laugh':message=new RoomWidgetAvatarExpressionMessage(AvatarExpressionEnum.LAUGH);break;case'idle':message=new RoomWidgetAvatarExpressionMessage(AvatarExpressionEnum.IDLE);break;case'dance_menu':hideMenu=false;setMode(MODE_CLUB_DANCES);break;case'dance':message=new RoomWidgetDanceMessage(1);break;case'dance_stop':message=new RoomWidgetDanceMessage(0);break;case'dance_1':case'dance_2':case'dance_3':case'dance_4':message=new RoomWidgetDanceMessage(parseInt(name.charAt(name.length-1)));break;case'signs':hideMenu=false;setMode(MODE_SIGNS);break;case'back':hideMenu=false;setMode(MODE_NORMAL);break;case'drop_carry_item':message=new RoomWidgetUserActionMessage(RoomWidgetUserActionMessage.DROP_CARRY_ITEM,userData.webID);break;}}if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();},[roomSession,eventDispatcher,widgetHandler,userData,close]);const isShowDecorate=useMemo(()=>{return userData.amIOwner||userData.amIAnyRoomController||userData.roomControllerLevel>RoomControllerLevel.GUEST;},[userData]);const isRidingHorse=IsRidingHorse();return/*#__PURE__*/_jsxs(ContextMenuView,{objectId:userData.roomIndex,category:RoomObjectCategory.UNIT,userType:userData.userType,close:close,collapsable:true,children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{className:\"cursor-pointer\",onClick:event=>GetUserProfile(userData.webID),children:userData.name}),!hide&&/*#__PURE__*/_jsxs(Column,{gap:0,children:[mode===MODE_NORMAL&&/*#__PURE__*/_jsxs(_Fragment,{children:[userData.allowNameChange&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('change_name'),children:LocalizeText('widget.avatar.change_name')}),isShowDecorate&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('decorate'),children:LocalizeText('widget.avatar.decorate')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('change_looks'),children:LocalizeText('widget.memenu.myclothes')}),HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_menu'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[LocalizeText('widget.memenu.dance'),/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),!isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[LocalizeText('widget.memenu.dance'),/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('expressions'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[LocalizeText('infostand.link.expressions'),/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('signs'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[LocalizeText('infostand.show.signs'),/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),userData.carryItem>0&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('drop_carry_item'),children:LocalizeText('avatar.widget.drop_hand_item')})]}),mode===MODE_CLUB_DANCES&&/*#__PURE__*/_jsxs(_Fragment,{children:[isDancing&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_1'),children:LocalizeText('widget.memenu.dance1')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_2'),children:LocalizeText('widget.memenu.dance2')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_3'),children:LocalizeText('widget.memenu.dance3')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_4'),children:LocalizeText('widget.memenu.dance4')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]}),mode===MODE_EXPRESSIONS&&/*#__PURE__*/_jsxs(_Fragment,{children:[GetOwnPosture()===AvatarAction.POSTURE_STAND&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sit'),children:LocalizeText('widget.memenu.sit')}),GetCanStandUp()&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('stand'),children:LocalizeText('widget.memenu.stand')}),GetCanUseExpression()&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('wave'),children:LocalizeText('widget.memenu.wave')}),GetCanUseExpression()&&/*#__PURE__*/_jsxs(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('laugh'),children:[!HasHabboVip()&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.laugh')]}),GetCanUseExpression()&&/*#__PURE__*/_jsxs(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('blow'),children:[!HasHabboVip()&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.blow')]}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('idle'),children:LocalizeText('widget.memenu.idle')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]}),mode===MODE_SIGNS&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_1'),children:\"1\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_2'),children:\"2\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_3'),children:\"3\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_4'),children:\"4\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_5'),children:\"5\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_6'),children:\"6\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_7'),children:\"7\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_8'),children:\"8\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_9'),children:\"9\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_10'),children:\"10\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_11'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-heart\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_12'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-skull\"})})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_0'),children:\"0\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_13'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-exclamation\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_15'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-smile\"})})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_14'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-soccer\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_17'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-yellow\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_16'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-red\"})})]}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}