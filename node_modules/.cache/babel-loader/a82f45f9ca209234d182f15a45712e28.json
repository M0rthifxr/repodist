{"ast":null,"code":"import{GroupBuyComposer,GroupBuyDataComposer,GroupBuyDataEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{HasHabboClub,LocalizeText,SendMessageComposer}from'../../../api';import{Base,Button,Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{UseMessageEventHook}from'../../../hooks';import{GroupTabBadgeView}from'./tabs/GroupTabBadgeView';import{GroupTabColorsView}from'./tabs/GroupTabColorsView';import{GroupTabCreatorConfirmationView}from'./tabs/GroupTabCreatorConfirmationView';import{GroupTabIdentityView}from'./tabs/GroupTabIdentityView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TABS=[1,2,3,4];export const GroupCreatorView=props=>{const{onClose=null}=props;const[currentTab,setCurrentTab]=useState(1);const[closeAction,setCloseAction]=useState(null);const[groupData,setGroupData]=useState(null);const[availableRooms,setAvailableRooms]=useState(null);const[purchaseCost,setPurchaseCost]=useState(0);const close=()=>{setCloseAction(null);setGroupData(null);if(onClose)onClose();};const buyGroup=()=>{if(!groupData)return;const badge=[];groupData.groupBadgeParts.forEach(part=>{if(part.code){badge.push(part.key);badge.push(part.color);badge.push(part.position);}});SendMessageComposer(new GroupBuyComposer(groupData.groupName,groupData.groupDescription,groupData.groupHomeroomId,groupData.groupColors[0],groupData.groupColors[1],badge));};const previousStep=()=>{if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===1){onClose();return;}setCurrentTab(value=>value-1);};const nextStep=()=>{if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===4){buyGroup();return;}setCurrentTab(value=>value===4?value:value+1);};const onGroupBuyDataEvent=useCallback(event=>{const parser=event.getParser();const rooms=[];parser.availableRooms.forEach((name,id)=>rooms.push({id,name}));setAvailableRooms(rooms);setPurchaseCost(parser.groupCost);},[]);UseMessageEventHook(GroupBuyDataEvent,onGroupBuyDataEvent);useEffect(()=>{setCurrentTab(1);setGroupData({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:true,groupColors:null,groupBadgeParts:null});SendMessageComposer(new GroupBuyDataComposer());},[setGroupData]);if(!groupData)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-group-creator\",theme:\"primary\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('group.create.title'),onCloseClick:close}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsx(Flex,{center:true,className:\"creator-tabs\",children:TABS.map((tab,index)=>{return/*#__PURE__*/_jsx(Flex,{center:true,className:`tab tab-${tab===1?'blue-flat':tab===4?'yellow':'blue-arrow'} ${currentTab===tab?'active':''}`,children:/*#__PURE__*/_jsx(Text,{variant:\"white\",children:LocalizeText(`group.create.steplabel.${tab}`)})},index);})}),/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Base,{className:`nitro-group-tab-image tab-${currentTab}`}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:0,children:[/*#__PURE__*/_jsx(Text,{bold:true,fontSize:4,children:LocalizeText(`group.create.stepcaption.${currentTab}`)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText(`group.create.stepdesc.${currentTab}`)})]})]}),/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/_jsx(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:null,isCreator:true,availableRooms:availableRooms}),currentTab===2&&/*#__PURE__*/_jsx(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===3&&/*#__PURE__*/_jsx(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===4&&/*#__PURE__*/_jsx(GroupTabCreatorConfirmationView,{groupData:groupData,setGroupData:setGroupData,purchaseCost:purchaseCost})]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"link\",className:\"text-black\",onClick:previousStep,children:LocalizeText(currentTab===1?'generic.cancel':'group.create.previousstep')}),/*#__PURE__*/_jsx(Button,{disabled:currentTab===4&&!HasHabboClub(),variant:currentTab===4?HasHabboClub()?'success':'danger':'primary',onClick:nextStep,children:LocalizeText(currentTab===4?HasHabboClub()?'group.create.confirm.buy':'group.create.confirm.viprequired':'group.create.nextstep')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}