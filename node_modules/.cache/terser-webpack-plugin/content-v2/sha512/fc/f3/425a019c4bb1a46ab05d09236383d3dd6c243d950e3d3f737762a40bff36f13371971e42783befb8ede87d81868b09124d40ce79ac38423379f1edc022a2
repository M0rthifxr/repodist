{"code":"(this[\"webpackJsonpnitro-react\"]=this[\"webpackJsonpnitro-react\"]||[]).push([[0],{136:function(e,t,s){},137:function(e,t,s){\"use strict\";s.r(t);var n=s(40),r=s(89),c=s(1),i=s(75),a=s(2);const o=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.levelCount;return t};class l{constructor(e){this._code=void 0,this._achievements=void 0,this._code=e,this._achievements=[]}getProgress(){return h(this)}getMaxProgress(){return o(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}const u=e=>{if(!e)return null;let t=e.badgeId;return e.finalLevel||(t=U().getPreviousLevelBadgeId(t)),t},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=k(\"achievements.images.url\");let r=s?\"achicon_\":\"achcategory_\";return r+=e.code,null!==t&&(r+=\"_\"+(t>0?\"active\":\"inactive\")),n.replace(\"%image%\",r)},h=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)t+=s.finalLevel?s.level:s.level-1;return t},j=e=>{if(!e)return 0;let t=0;for(const s of e.achievements)s.unseen>0&&t++;return t},b=e=>!!e&&!!(e.finalLevel||e.level-1>0),g=e=>e?e.finalLevel?e.level:e.level-1:0;class O{constructor(e,t,s){this._productName=void 0,this._customImage=void 0,this._furnitureClassName=void 0,this._productName=e,this._customImage=t,this._furnitureClassName=s}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}class m{}m.STATE_UNLOCKED=1,m.STATE_LOCKED_AVAILABLE=2,m.STATE_LOCKED_EXPIRED=3,m.STATE_LOCKED_FUTURE=4;class p{}p.OKAY=0,p.MISSING_OFFER=1,p.FURNI_LIMIT_REACHED=2,p.NOT_IN_ROOM=3,p.NOT_ROOM_OWNER=4,p.GUILD_ROOM=5,p.VISITORS_IN_ROOM=6;class _{constructor(e,t,s){this._depth=0,this._localization=\"\",this._pageId=-1,this._pageName=\"\",this._iconId=0,this._children=void 0,this._offerIds=void 0,this._parent=void 0,this._isVisible=void 0,this._isActive=void 0,this._isOpen=void 0,this._depth=t,this._parent=s,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return 0===this._children.length}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}class E{constructor(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this._pageId=void 0,this._layoutCode=void 0,this._localization=void 0,this._offers=void 0,this._acceptSeasonCurrencyAsCredits=void 0,this._mode=void 0,this._pageId=e,this._layoutCode=t,this._localization=s,this._offers=n,this._acceptSeasonCurrencyAsCredits=r;for(const i of n)i.page=this;this._mode=-1===c?E.MODE_NORMAL:c}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}}E.MODE_NORMAL=0;class f{}f.DUCKET_INFO=\"ducket_info\",f.CREDITS=\"credits\",f.AVATAR_EFFECTS=\"avatar_effects\",f.HC_MEMBERSHIP=\"hc_membership\",f.CLUB_GIFTS=\"club_gifts\",f.LIMITED_SOLD=\"limited_sold\",f.PET_ACCESSORIES=\"pet_accessories\",f.TRAX_SONGS=\"trax_songs\",f.NEW_ADDITIONS=\"new_additions\",f.QUEST_SHELL=\"quest_shell\",f.QUEST_SNOWFLAKES=\"quest_snowflakes\",f.VAL_QUESTS=\"val_quests\",f.GUILD_CUSTOM_FURNI=\"guild_custom_furni\",f.GIFT_SHOP=\"gift_shop\",f.HORSE_STYLES=\"horse_styles\",f.HORSE_SHOE=\"horse_shoe\",f.SET_EASTER=\"set_easter\",f.ECOTRON_TRANSFORM=\"ecotron_transform\",f.LOYALTY_INFO=\"loyalty_info\",f.ROOM_BUNDLES=\"room_bundles\",f.ROOM_BUNDLES_MOBILE=\"room_bundles_mobile\",f.HABBO_CLUB_DESKTOP=\"habbo_club_desktop\",f.MOBILE_SUBSCRIPTIONS=\"mobile_subscriptions\";class x{constructor(e,t){this.breed=e,this.palettes=t}}class I{}I.NONE=0,I.CONFIRM=1,I.PURCHASE=2,I.NO_CREDITS=3,I.NO_POINTS=4,I.SOLD_OUT=5,I.FAILED=6;class T{}function C(){return a.Oe.instance}function N(e){C().addLinkEventTracker(e)}T.NORMAL=\"NORMAL\",T.BUILDER=\"BUILDERS_CLUB\";function S(){return C().avatar}function v(e){return S().structureData.getPalette(e)}function R(e){return S().structureData.getSetType(e)}function A(){return C().cameraManager}function y(e){e=e.startsWith(\"event:\")?e.substring(6):e,C().createLinkEvent(e)}function w(){return C().communication}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return C().getConfiguration(e,t)}function D(){return w().connection}function U(){return C().localization}function P(){return C().ticker}function M(e){C().removeLinkEventTracker(e)}function L(){return C().roomEngine}let F=!1,H=0,B=0;const G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=e.clientX,n=e.clientY;let r=e.type;switch(r===a.Ce.MOUSE_CLICK&&(H&&(B=1,H>=Date.now()-300&&B++),H=Date.now(),2===B&&(F||(r=a.Ce.DOUBLE_CLICK),B=0,H=null)),r){case a.Ce.MOUSE_CLICK:case a.Ce.DOUBLE_CLICK:break;case a.Ce.MOUSE_MOVE:F=!0;break;case a.Ce.MOUSE_DOWN:F=!1;break;case a.Ce.MOUSE_UP:case a.Ce.RIGHT_CLICK:break;default:return}L().dispatchMouseEvent(t,s,n,r,e.altKey,e.ctrlKey||e.metaKey,e.shiftKey,!1)};let W=!1,V=0,q=0,Y=null;const z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e.type;s&&(i=a.Th.TOUCH_LONG),i!==a.Th.TOUCH_END||W||(i=a.Ce.MOUSE_CLICK,V&&(q=1,V>=Date.now()-300&&q++),V=Date.now(),2===q&&(i=a.Ce.DOUBLE_CLICK,q=0,V=null)),Y&&clearTimeout(Y);let o=0,l=0;switch(e.touches[0]?(o=e.touches[0].clientX,l=e.touches[0].clientY):e.changedTouches[0]&&(o=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY),i){case a.Ce.MOUSE_CLICK:case a.Ce.DOUBLE_CLICK:break;case a.Th.TOUCH_START:Y=setTimeout((()=>{W||z(e,t,!0)}),300),i=a.Ce.MOUSE_DOWN,W=!1;break;case a.Th.TOUCH_MOVE:i=a.Ce.MOUSE_MOVE,W=!0;break;case a.Th.TOUCH_END:i=a.Ce.MOUSE_UP;break;case a.Th.TOUCH_LONG:i=a.Ce.MOUSE_DOWN_LONG;break;default:return}L().dispatchMouseEvent(t,o,l,i,n,r,c,!1)};function K(e){if(!e||!e.model)return!1;return ee().userId===e.model.getValue(a.Og.FURNITURE_OWNER_ID)}function Q(e,t,s){return!!e&&(e.controllerLevel>=a.eg.GUEST||ee().isModerator||K(L().getRoomObject(e.roomId,t,s)))}function $(){return C().roomSessionManager}function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;$().createSession(e,t)}function J(){const e=de();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Og.FIGURE_CAN_STAND_UP)}function Z(){const e=de();if(!e)return!1;const t=e.model.getValue(a.Og.FIGURE_EFFECT);return!(29===t||30===t||185===t)}function ee(){return C().sessionDataManager}function te(){return k(\"hc.disabled\",!1)?a.Ed.VIP:ee().clubLevel}function se(e,t){let s=null;switch(t.toLowerCase()){case er.FLOOR:s=ee().getFloorItemData(e);break;case er.WALL:s=ee().getWallItemData(e)}return s}function ne(e,t,s){const n=L().getRoomObject(e,t,s);if(!n)return;const r=n.model.getValue(a.Og.FURNITURE_TYPE_ID);switch(s){case a.Ig.FLOOR:return ee().getFloorItemData(r);case a.Ig.WALL:return ee().getWallItemData(r)}return null}function re(){const e=de();if(!e)return a.k.POSTURE_STAND;return e.model.getValue(a.Og.FIGURE_POSTURE)}function ce(e){return e?ee().getProductData(e):null}function ie(){return $().getSession(-1)}function ae(){$n(new a.sb)}function oe(){return ee().clubLevel>=a.Ed.CLUB}function le(){return ee().clubLevel>=a.Ed.VIP}const ue=()=>{ie()&&(ae(),$().removeSession(-1))};function de(){const e=ee().userId,t=L().activeRoomId,s=a.Ig.UNIT,n=L().getTotalObjectsForManager(t,s);let r=0;for(;r<n;){const n=L().getRoomObjectByIndex(t,r,s);if(n){const t=ie().userDataManager.getUserDataByIndex(n.id);if(t&&t.webID===e)return n}r++}return null}const he=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=L().getRoomObjectBoundingRectangle(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},je=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r=L().getRoomObjectScreenLocation(e,t,s,n);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},be=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=L(),r=n.activeRoomId;n.initializeRoomInstanceRenderingCanvas(r,s,e,t)};function ge(e,t,s){L().processRoomObjectOperation(e,t,s)}function Oe(e){L().setActiveRoomId(e)}class me{constructor(e,t,s,n){this._id=void 0,this._type=void 0,this._color=void 0,this._brightness=void 0,this._id=e,this._type=t,this._color=s,this._brightness=n}get id(){return this._id}get type(){return this._type}get color(){return this._color}get brightness(){return this._brightness}}class pe{constructor(e,t,s){this._id=void 0,this._category=void 0,this._name=void 0,this._id=e,this._category=t,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class _e extends a.Te{}class Ee extends _e{constructor(e,t,s,n,r){super(Ee.AVATAR_INFO),this._userId=void 0,this._userName=void 0,this._userType=void 0,this._roomIndex=void 0,this._allowNameChange=void 0,this._userId=e,this._userName=t,this._userType=s,this._roomIndex=n,this._allowNameChange=r}get userId(){return this._userId}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}get allowNameChange(){return this._allowNameChange}}Ee.AVATAR_INFO=\"RWAIE_AVATAR_INFO\";class fe extends _e{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}fe.USER_CHOOSER_CONTENT=\"RWCCE_USER_CHOOSER_CONTENT\",fe.FURNI_CHOOSER_CONTENT=\"RWCCE_FURNI_CHOOSER_CONTENT\";class xe extends _e{constructor(e){super(xe.FLOOD_CONTROL),this._seconds=0,this._seconds=e}get seconds(){return this._seconds}}xe.FLOOD_CONTROL=\"RWFCE_FLOOD_CONTROL\";class Ie extends _e{constructor(e,t,s,n,r,c){super(e),this._roomIndex=void 0,this._category=void 0,this._id=void 0,this._name=void 0,this._userType=void 0,this._roomIndex=t,this._category=s,this._id=n,this._name=r,this._userType=c}get roomIndex(){return this._roomIndex}get category(){return this._category}get id(){return this._id}get name(){return this._name}get userType(){return this._userType}}Ie.TYPE=\"RWONE_TYPE\";class Te extends _e{constructor(e,t){super(e),this._id=-1,this._summary=void 0,this._headline=void 0,this._numQuestions=0,this._startMessage=\"\",this._endMessage=\"\",this._questionArray=null,this._pollType=\"\",this._npsPoll=!1,this._id=t}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}}Te.OFFER=\"RWPUW_OFFER\",Te.ERROR=\"RWPUW_ERROR\",Te.CONTENT=\"RWPUW_CONTENT\";class Ce extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(e),this._hue=void 0,this._saturation=void 0,this._lightness=void 0,this._hue=t,this._saturation=s,this._lightness=n}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}}Ce.PREVIEW=\"RWUBCPE_PREVIEW\",Ce.CLEAR_PREVIEW=\"RWUBCPE_CLEAR_PREVIEW\";class Ne extends _e{constructor(e,t,s,n,r,c,i,a,o,l,u,d){let h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,j=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,b=arguments.length>14&&void 0!==arguments[14]?arguments[14]:null;super(e),this._userId=void 0,this._text=void 0,this._chatType=void 0,this._userName=void 0,this._links=void 0,this._userX=void 0,this._userY=void 0,this._userImage=void 0,this._userColor=void 0,this._roomId=void 0,this._userCategory=void 0,this._userType=void 0,this._petType=void 0,this._styleId=void 0,this._userId=t,this._text=s,this._chatType=h,this._userName=n,this._userCategory=r,this._userType=c,this._petType=i,this._links=b,this._userX=a,this._userY=o,this._userImage=l,this._userColor=u,this._roomId=d,this._styleId=j}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}Ne.CHAT_EVENT=\"RWUCE_CHAT_EVENT\",Ne.CHAT_TYPE_SPEAK=0,Ne.CHAT_TYPE_WHISPER=1,Ne.CHAT_TYPE_SHOUT=2,Ne.CHAT_TYPE_RESPECT=3,Ne.CHAT_TYPE_PETRESPECT=4,Ne.CHAT_TYPE_NOTIFY=5,Ne.CHAT_TYPE_PETTREAT=6,Ne.CHAT_TYPE_PETREVIVE=7,Ne.CHAT_TYPE_PET_REBREED_FERTILIZE=8,Ne.CHAT_TYPE_PET_SPEED_FERTILIZE=9,Ne.CHAT_TYPE_BOT_SPEAK=10,Ne.CHAT_TYPE_BOT_SHOUT=11,Ne.CHAT_TYPE_BOT_WHISPER=12;class Se extends _e{constructor(e,t){super(Se.CHAT_INPUT_CONTENT),this._chatMode=\"\",this._userName=\"\",this._chatMode=e,this._userName=t}get chatMode(){return this._chatMode}get userName(){return this._userName}}Se.CHAT_INPUT_CONTENT=\"RWUCICE_CHAT_INPUT_CONTENT\",Se.WHISPER=\"whisper\",Se.SHOUT=\"shout\";class ve extends _e{constructor(e,t,s,n){super(e),this._objectId=void 0,this._value=void 0,this._furniType=void 0,this._objectId=t,this._value=s,this._furniType=n}get objectId(){return this._objectId}get value(){return this._value}get furniType(){return this._furniType}}ve.CREDIT_FURNI_UPDATE=\"RWUCFE_CREDIT_FURNI_UPDATE\";class Re extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(Re.UPDATE_CUSTOM_STACK_HEIGHT),this._objectId=void 0,this._height=void 0,this._objectId=e,this._height=t}get objectId(){return this._objectId}get height(){return this._height}}Re.UPDATE_CUSTOM_STACK_HEIGHT=\"RWUCSHE_UPDATE_CUSTOM_STACK_HEIGHT\";class Ae extends _e{constructor(e){super(Ae.UPDATE_DANCE),this._isDancing=void 0,this._isDancing=e}get isDancing(){return this._isDancing}}Ae.UPDATE_DANCE=\"RWUDSE_UPDATE_DANCE\";class ye extends _e{constructor(e){super(ye.UPDATE_DECORATE),this._isDecorating=void 0,this._isDecorating=e}get isDecorating(){return this._isDecorating}}ye.UPDATE_DECORATE=\"RWUDME_UPDATE_DECORATE\";class we extends _e{constructor(e){super(e),this._selectedPresetId=0,this._presets=void 0,this._presets=[]}get presetCount(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(e){this._selectedPresetId=e}setPresetValues(e,t,s,n){const r=new me(e,t,s,n);this._presets[e-1]=r}getPresetNumber(e){return this._presets[e]}}we.PRESETS=\"RWUDE_PRESETS\",we.HIDE=\"RWUDE_HIDE\";class ke extends _e{constructor(e,t,s,n,r){super(ke.DIMMER_STATE),this._state=void 0,this._presetId=void 0,this._effectId=void 0,this._color=void 0,this._brightness=void 0,this._state=e,this._presetId=t,this._effectId=s,this._color=n,this._brightness=r}get state(){return this._state}get presetId(){return this._presetId}get effectId(){return this._effectId}get color(){return this._color}get brightness(){return this._brightness}}ke.DIMMER_STATE=\"RWUDSE_DIMMER_STATE\";class De extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(De.UPDATE_EXTERNAL_IMAGE),this._objectId=void 0,this._photoData=void 0,this._objectId=e,this._photoData=t}get objectId(){return this._objectId}get photoData(){return this._photoData}}De.UPDATE_EXTERNAL_IMAGE=\"RWUEIE_UPDATE_EXTERNAL_IMAGE\";class Ue extends _e{}class Pe extends Ue{constructor(){super(...arguments),this.id=0,this.category=0,this.name=\"\",this.description=\"\",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam=\"\",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName=\"\",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}}Pe.FURNI=\"RWUIFE_FURNI\";class Me extends Ue{constructor(){super(...arguments),this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name=\"\",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure=\"\",this.posture=\"std\",this.isOwner=!1,this.ownerId=-1,this.ownerName=\"\",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}}Me.PET_INFO=\"RWUIPE_PET_INFO\";class Le extends Ue{constructor(){super(...arguments),this.name=\"\",this.motto=\"\",this.webID=0,this.figure=\"\",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName=\"\",this.botSkills=[]}}Le.RENTABLE_BOT=\"RWUIRBE_RENTABLE_BOT\";class Fe extends Ue{constructor(){super(...arguments),this.name=\"\",this.motto=\"\",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure=\"\",this.badges=[],this.groupId=0,this.groupName=\"\",this.groupBadgeId=\"\",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===Fe.OWN_USER}}Fe.OWN_USER=\"RWUIUE_OWN_USER\",Fe.PEER=\"RWUIUE_PEER\",Fe.BOT=\"RWUIUE_BOT\",Fe.TRADE_REASON_OK=0,Fe.TRADE_REASON_SHUTDOWN=2,Fe.TRADE_REASON_NO_TRADING=3,Fe.DEFAULT_BOT_BADGE_ID=\"BOT\";class He extends _e{constructor(e,t,s,n,r){super(e),this._objectId=void 0,this._figure=void 0,this._gender=void 0,this._name=void 0,this._objectId=t,this._figure=s,this._gender=n,this._name=r}get objectId(){return this._objectId}get figure(){return this._figure}get gender(){return this._gender}get name(){return this._name}}He.MANNEQUIN_UPDATE=\"RWUME_MANNEQUIN_UPDATE\";class Be extends _e{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;super(e),this._objectId=-1,this._classId=0,this._itemType=\"\",this._giftMessage=\"\",this._imageUrl=null,this._isController=void 0,this._purchaserName=void 0,this._purchaserFigure=void 0,this._placedItemId=-1,this._placedItemType=\"\",this._placedInRoom=void 0,this._objectId=t,this._giftMessage=s,this._imageUrl=r,this._isController=n,this._purchaserName=c,this._purchaserFigure=i}get objectId(){return this._objectId}get classId(){return this._classId}set classId(e){this._classId=e}get itemType(){return this._itemType}set itemType(e){this._itemType=e}get giftMessage(){return this._giftMessage}get imageUrl(){return this._imageUrl}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(e){this._placedItemId=e}get placedInRoom(){return this._placedInRoom}set placedInRoom(e){this._placedInRoom=e}get placedItemType(){return this._placedItemType}set placedItemType(e){this._placedItemType=e}}Be.PACKAGEINFO=\"RWUPDE_PACKAGEINFO\",Be.CONTENTS=\"RWUPDE_CONTENTS\",Be.CONTENTS_CLUB=\"RWUPDE_CONTENTS_CLUB\",Be.CONTENTS_FLOOR=\"RWUPDE_CONTENTS_FLOOR\",Be.CONTENTS_LANDSCAPE=\"RWUPDE_CONTENTS_LANDSCAPE\",Be.CONTENTS_WALLPAPER=\"RWUPDE_CONTENTS_WALLPAPER\",Be.CONTENTS_IMAGE=\"RWUPDE_CONTENTS_IMAGE\";class Ge extends _e{constructor(e,t,s,n,r,c,i){super(Ge.UPDATE_CHAT),this._objectId=void 0,this._category=void 0,this._botId=void 0,this._chat=void 0,this._automaticChat=void 0,this._chatDelay=void 0,this._mixSentences=void 0,this._objectId=e,this._category=t,this._botId=s,this._chat=n,this._automaticChat=r,this._chatDelay=c,this._mixSentences=i}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}}Ge.UPDATE_CHAT=\"RWURBCE_UPDATE_CHAT\";class We extends _e{constructor(e,t){super(e),this._roomId=0,this._roomId=t}get roomId(){return this._roomId}}We.GAME_MODE=\"RWUREE_GAME_MODE\",We.NORMAL_MODE=\"RWUREE_NORMAL_MODE\";class Ve extends _e{constructor(e,t,s,n){super(e),this._id=void 0,this._category=void 0,this._roomId=void 0,this._id=t,this._category=s,this._roomId=n}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}Ve.OBJECT_SELECTED=\"RWUROE_OBJECT_SELECTED\",Ve.OBJECT_DESELECTED=\"RWUROE_OBJECT_DESELECTED\",Ve.USER_REMOVED=\"RWUROE_USER_REMOVED\",Ve.FURNI_REMOVED=\"RWUROE_FURNI_REMOVED\",Ve.FURNI_ADDED=\"RWUROE_FURNI_ADDED\",Ve.USER_ADDED=\"RWUROE_USER_ADDED\",Ve.OBJECT_ROLL_OVER=\"RWUROE_OBJECT_ROLL_OVER\",Ve.OBJECT_ROLL_OUT=\"RWUROE_OBJECT_ROLL_OUT\",Ve.OBJECT_REQUEST_MANIPULATION=\"RWUROE_OBJECT_REQUEST_MANIPULATION\";class qe extends _e{constructor(e,t,s,n){super(e),this._songId=void 0,this._songName=void 0,this._songAuthor=void 0,this._songId=t,this._songName=s,this._songAuthor=n}get songId(){return this._songId}get songName(){return this._songName}get songAuthor(){return this._songAuthor}}qe.PLAYING_CHANGED=\"RWUSE_PLAYING_CHANGED\",qe.DATA_RECEIVED=\"RWUSE_DATA_RECEIVED\";(class extends _e{constructor(e,t,s,n,r,c){super(e),this._color=void 0,this._name=void 0,this._date=void 0,this._message=void 0,this._extra=void 0,this._color=t,this._name=s,this._date=n,this._message=r,this._extra=c}get color(){return this._color}get name(){return this._name}get date(){return this._date}get message(){return this._message}get extra(){return this._extra}}).TROPHY_UPDATE=\"RWUTE_TROPHY_UPDATE\";class Ye extends _e{constructor(){super(Ye.USER_DATA_UPDATED)}}Ye.USER_DATA_UPDATED=\"RWUUDE_USER_DATA_UPDATED\";class ze extends _e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(ze.UPDATE_YOUTUBE_DISPLAY),this._objectId=void 0,this._hasControl=void 0,this._objectId=e,this._hasControl=t}get objectId(){return this._objectId}get hasControl(){return this._hasControl}}ze.UPDATE_YOUTUBE_DISPLAY=\"RWUEIE_UPDATE_YOUTUBE_DISPLAY\";class Ke extends _e{constructor(e,t){super(e),this._items=void 0,this._items=t}get items(){return this._items}}Ke.USE_PRODUCT_BUBBLES=\"RWUPBE_USE_PRODUCT_BUBBLES\";class Qe extends _e{constructor(e,t){super(e),this._id=-1,this._pollType=null,this._pollId=-1,this._questionId=-1,this._duration=-1,this._question=null,this._userId=-1,this._value=void 0,this._answerCounts=void 0,this._id=t}get id(){return this._id}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get pollId(){return this._pollId}set pollId(e){this._pollId=e}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get duration(){return this._duration}set duration(e){this._duration=e}get question(){return this._question}set question(e){this._question=e}get userId(){return this._userId}set userId(e){this._userId=e}get value(){return this._value}set value(e){this._value=e}get answerCounts(){return this._answerCounts}set answerCounts(e){this._answerCounts=e}}Qe.NEW_QUESTION=\"RWPUW_NEW_QUESTION\",Qe.QUESTION_FINISHED=\"RWPUW_QUESION_FINSIHED\",Qe.QUESTION_ANSWERED=\"RWPUW_QUESTION_ANSWERED\";class $e{constructor(e,t,s,n,r,c,i){this._id=void 0,this._category=void 0,this._name=void 0,this._requestRoomObjectId=void 0,this._targetRoomObjectId=void 0,this._requestInventoryStripId=void 0,this._replace=void 0,this._id=e,this._category=t,this._name=s,this._requestRoomObjectId=n,this._requestInventoryStripId=c,this._replace=i}get id(){return this._id}get category(){return this._category}get name(){return this._name}get requestRoomObjectId(){return this._requestRoomObjectId}get requestInventoryStripId(){return this._requestInventoryStripId}get replace(){return this._replace}}const Xe=e=>{if(null==e||\"object\"!=typeof e)return e;const t=new e.constructor;for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t};class Je{static makeColorHex(e){return\"#\"+e}static makeColorNumberHex(e){let t=e.toString(16);if(t.length<6){const e=6-t.length;for(let s=0;s<e;s++)t=\"0\"+t}return\"#\"+t}static convertFromHex(e){return parseInt(e.replace(\"#\",\"\"),16)}}const Ze=e=>{let t=C().localization.getBadgeDesc(e);return t&&t.length||(t=`badge_desc_${e}`),t},et=e=>{let t=C().localization.getBadgeName(e);return t&&t.length||(t=`badge_name_${e}`),t};function tt(e){return!e||isNaN(e)?\"0\":e.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\" \")}function st(e){if(!e||isNaN(e))return\"0\";let t=Math.abs(e);const s=Math.pow(10,1),n=e<0;let r=\"\";const c=[{key:\"Q\",value:Math.pow(10,15)},{key:\"T\",value:Math.pow(10,12)},{key:\"B\",value:Math.pow(10,9)},{key:\"M\",value:Math.pow(10,6)},{key:\"K\",value:1e3}];for(const i of c){let e=t/i.value;if(e=Math.round(e*s)/s,e>=1){t=e,r=i.key;break}}return(n?\"-\":\"\")+t+r}function nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return C().getLocalizationWithParameters(e,t,s)}class rt{}rt.CATALOG_PLACE_MULTIPLE_OBJECTS=\"catalogPlaceMultipleObjects\",rt.CATALOG_SKIP_PURCHASE_CONFIRMATION=\"catalogSkipPurchaseConfirmation\";var ct=s(35);function it(e,t){Object(c.useEffect)((()=>{const s=new e(t);return w().registerMessageEvent(s),()=>w().removeMessageEvent(s)}),[e,t])}const at=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),[o,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),b=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=j(t))),e}),[s]),g=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getProgress())),e}),[s]),O=Object(c.useMemo)((()=>{let e=0;return s.forEach((t=>e+=t.getMaxProgress())),e}),[s]),m=Object(c.useMemo)((()=>~~(100*(g-0)/(O-0)+0)),[g,O]),p=Object(c.useCallback)(((e,t)=>{n((s=>{const n=[...s];for(const r of n)if(r.code===e)for(const e of r.achievements)e.achievementId===t&&(e.unseen=0);return n}))}),[]),_=Object(c.useCallback)((e=>{const t=e.getParser().achievement;n((e=>{const s=[...e],n=s.findIndex((e=>e.code===t.category));if(-1===n){const e=new l(t.category);e.achievements.push(t),s.push(e)}else{const e=Xe(s[n]),r=[...e.achievements],c=r.findIndex((e=>e.achievementId===t.achievementId));let i=null;-1===c?r.push(t):(i=r[c],r[c]=t),(e=>{if(!e)return!1;const t=k(\"achievements.unseen.ignored\"),s=e.badgeId.replace(/[0-9]/g,\"\");return t.indexOf(s)>=0})(t)||(t.unseen++,i&&(t.unseen+=i.unseen)),e.achievements=r,s[n]=e}return s}))}),[]);it(a.b,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];for(const n of t.achievements){const e=n.category;let t=s.find((t=>t.code===e));t||(t=new l(e),s.push(t)),t.achievements.push(n)}n(s)}),[]);it(a.d,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();h(t.score)}),[]);return it(a.e,f),Object(c.useEffect)((()=>{e&&($n(new a.Qf),t(!1))}),[e]),{achievementCategories:s,selectedCategoryCode:r,setSelectedCategoryCode:i,selectedAchievementId:o,setSelectedAchievementId:u,achievementScore:d,getTotalUnseen:b,getProgress:g,getMaxProgress:O,scaledProgressPercent:m,setAchievementSeen:p}};var ot=s(20);class lt extends a.Te{}lt.SHOW_CATALOG=\"CE_SHOW_CATALOG\",lt.HIDE_CATALOG=\"CE_HIDE_CATALOG\",lt.TOGGLE_CATALOG=\"CE_TOGGLE_CATALOG\",lt.SOLD_OUT=\"CE_SOLD_OUT\",lt.APPROVE_NAME_RESULT=\"CE_APPROVE_NAME_RESULT\",lt.PURCHASE_APPROVED=\"CE_PURCHASE_APPROVED\",lt.INIT_GIFT=\"CE_INIT_GIFT\",lt.CATALOG_RESET=\"CE_RESET\",lt.CATALOG_INVISIBLE_PAGE_VISITED=\"CE_CATALOG_INVISIBLE_PAGE_VISITED\";class ut extends lt{constructor(e,t,s){super(lt.INIT_GIFT),this._pageId=void 0,this._offerId=void 0,this._extraData=void 0,this._pageId=e,this._offerId=t,this._extraData=s}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}class dt extends lt{constructor(e){super(dt.POST_MARKETPLACE),this._item=void 0,this._item=e}get item(){return this._item}}dt.POST_MARKETPLACE=\"CE_POST_MARKETPLACE\";class ht extends a.Te{constructor(e){super(ht.PURCHASE_SUCCESS),this._purchase=void 0,this._purchase=e}get purchase(){return this._purchase}}ht.PURCHASE_SUCCESS=\"CPE_PURCHASE_SUCCESS\";class jt extends a.Te{constructor(e){super(jt.PURCHASE_FAILED),this._code=void 0,this._code=e}get code(){return this._code}}jt.PURCHASE_FAILED=\"CPFE_PURCHASE_FAILED\";class bt extends a.Te{constructor(e){super(bt.NOT_ALLOWED),this._code=void 0,this._code=e}get code(){return this._code}}bt.NOT_ALLOWED=\"CPNAE_NOT_ALLOWED\";class gt extends a.Te{}gt.WIDGETS_INITIALIZED=\"CWE_CWE_WIDGETS_INITIALIZED\",gt.SELECT_PRODUCT=\"CWE_SELECT_PRODUCT\",gt.SET_EXTRA_PARM=\"CWE_CWE_SET_EXTRA_PARM\",gt.PURCHASE=\"CWE_PURCHASE\",gt.COLOUR_ARRAY=\"CWE_COLOUR_ARRAY\",gt.MULTI_COLOUR_ARRAY=\"CWE_MULTI_COLOUR_ARRAY\",gt.COLOUR_INDEX=\"CWE_COLOUR_INDEX\",gt.TEXT_INPUT=\"CWE_TEXT_INPUT\",gt.DROPMENU_SELECT=\"CWE_CWE_DROPMENU_SELECT\",gt.PURCHASE_OVERRIDE=\"CWE_PURCHASE_OVERRIDE\",gt.SELLABLE_PET_PALETTES=\"CWE_SELLABLE_PET_PALETTES\",gt.UPDATE_ROOM_PREVIEW=\"CWE_UPDATE_ROOM_PREVIEW\",gt.GUILD_SELECTED=\"CWE_GUILD_SELECTED\",gt.TOTAL_PRICE_WIDGET_INITIALIZED=\"CWE_TOTAL_PRICE_WIDGET_INITIALIZED\",gt.PRODUCT_OFFER_UPDATED=\"CWE_CWE_PRODUCT_OFFER_UPDATED\",gt.SET_PREVIEWER_STUFFDATA=\"CWE_CWE_SET_PREVIEWER_STUFFDATA\",gt.EXTRA_PARAM_REQUIRED_FOR_BUY=\"CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY\",gt.TOGGLE=\"CWE_CWE_TOGGLE\",gt.BUILDER_SUBSCRIPTION_UPDATED=\"CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED\",gt.ROOM_CHANGED=\"CWE_CWE_ROOM_CHANGED\",gt.SHOW_WARNING_TEXT=\"CWE_CWE_SHOW_WARNING_TEXT\";a.Te;class Ot extends a.Te{constructor(){super(Ot.SOLD_OUT)}}Ot.SOLD_OUT=\"CPSOE_SOLD_OUT\";a.Te;class mt extends a.Te{constructor(e,t){super(mt.UPDATE_STUFF_DATA),this._offer=void 0,this._stuffData=void 0,this._offer=e,this._stuffData=t}get offer(){return this._offer}get stuffData(){return this._stuffData}}mt.UPDATE_STUFF_DATA=\"SRPSA_UPDATE_STUFF_DATA\";class pt extends a.Te{}pt.SHOW_GUIDE_TOOL=\"GTE_SHOW_GUIDE_TOOL\",pt.HIDE_GUIDE_TOOL=\"GTE_HIDE_GUIDE_TOOL\",pt.TOGGLE_GUIDE_TOOL=\"GTE_TOGGLE_GUIDE_TOOL\",pt.CREATE_HELP_REQUEST=\"GTE_CREATE_HELP_REQUEST\",pt.CREATE_BULLY_REQUEST=\"GTE_CREATE_BULLY_REQUEST\";var _t=s(9);class Et extends _t.a{}Et.INIT=\"HC_NAME_CHANGE_INIT\";class ft extends a.Te{constructor(e){super(ft.REPORT_USER),this._reportedUserId=void 0,this._reportedUserId=e}get reportedUserId(){return this._reportedUserId}}ft.REPORT_USER=\"HCE_HELP_CENTER_REPORT_USER\";class xt extends a.Te{constructor(e,t,s){super(xt.FURNI_ADDED),this.id=e,this.spriteId=t,this.category=s}}xt.FURNI_ADDED=\"IFAE_FURNI_ADDED\";class It extends a.Te{}It.SHOW_MOD_TOOLS=\"MTE_SHOW_MOD_TOOLS\",It.HIDE_MOD_TOOLS=\"MTE_HIDE_MOD_TOOLS\",It.TOGGLE_MOD_TOOLS=\"MTE_TOGGLE_MOD_TOOLS\",It.OPEN_ROOM_INFO=\"MTE_OPEN_ROOM_INFO\",It.OPEN_ROOM_CHATLOG=\"MTE_OPEN_ROOM_CHATLOG\",It.OPEN_USER_INFO=\"MTE_OPEN_USER_INFO\",It.OPEN_USER_CHATLOG=\"MTE_OPEN_USER_CHATLOG\";class Tt extends It{constructor(e){super(It.OPEN_ROOM_CHATLOG),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class Ct extends It{constructor(e){super(It.OPEN_ROOM_INFO),this._roomId=void 0,this._roomId=e}get roomId(){return this._roomId}}class Nt extends It{constructor(e){super(It.OPEN_USER_CHATLOG),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class St extends It{constructor(e){super(It.OPEN_USER_INFO),this._userId=void 0,this._userId=e}get userId(){return this._userId}}class vt extends a.Te{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;super(vt.ALERT),this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get messages(){return this._messages}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}vt.ALERT=\"NAE_ALERT\";class Rt extends a.Te{constructor(e,t,s,n){super(Rt.NEW_BUBBLE),this._message=void 0,this._notificationType=void 0,this._imageUrl=void 0,this._linkUrl=void 0,this._message=e,this._notificationType=t,this._imageUrl=s,this._linkUrl=n}get message(){return this._message}get notificationType(){return this._notificationType}get imageUrl(){return this._imageUrl}get linkUrl(){return this._linkUrl}}Rt.NEW_BUBBLE=\"NBE_NEW_BUBBLE\";class At extends a.Te{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(e),this._message=void 0,this._clickUrl=void 0,this._headerText=void 0,this._message=t,this._clickUrl=s,this._headerText=n}get message(){return this._message}get clickUrl(){return this._clickUrl}get headerText(){return this._headerText}}At.HOTEL_ALERT=\"NCAE_HOTEL_ALERT\";class yt extends a.Te{}yt.SHOW_NOTIFICATION_CENTER=\"NCE_SHOW_NOTIFICATION_CENTER\",yt.HIDE_NOTIFICATION_CENTER=\"NCE_HIDE_NOTIFICATION_CENTER\",yt.TOGGLE_NOTIFICATION_CENTER=\"NCE_TOGGLE_NOTIFICATION_CENTER\",yt.ADD_NOTIFICATION=\"NCE_ADD_NOTIFICATION\";class wt extends a.Te{constructor(e,t,s,n,r,c,i){super(wt.CONFIRM),this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}wt.CONFIRM=\"NCE_CONFIRM\";class kt extends a.Te{}kt.SHOW_THUMBNAIL=\"NE_SHOW_THUMBNAIL\",kt.HIDE_THUMBNAIL=\"NE_HIDE_THUMBNAIL\",kt.TOGGLE_THUMBNAIL=\"NE_TOGGLE_THUMBNAIL\";class Dt extends a.Te{}Dt.SAVE_WIRED=\"WE_SAVE_WIRED\";class Ut extends Dt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;super(Ut.SELECT_OBJECT),this._objectId=void 0,this._category=void 0,this._objectId=e,this._category=t}get objectId(){return this._objectId}get category(){return this._category}}Ut.SELECT_OBJECT=\"WE_SELECT_OBJECT\";const Pt=(e,t,s)=>{Object(c.useEffect)((()=>(t.addEventListener(e,s),()=>t.removeEventListener(e,s))),[e,t,s])},Mt=(e,t)=>Pt(e,ur().events,t),Lt=(e,t)=>e.dispatchEvent(t),Ft=e=>Lt(C().events,e),Ht=(e,t)=>Pt(e,C().events,t),Bt=(e,t)=>Pt(e,L().events,t),Gt=(e,t)=>Pt(e,$().events,t),Wt=new a.xb,Vt=e=>Lt(Wt,e),qt=(e,t)=>Pt(e,Wt,t),Yt=(e,t)=>{const[s,n]=Object(c.useState)((()=>{if(\"undefined\"===typeof window)return t;try{const s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return t}}));return[s,t=>{try{const r=t instanceof Function?t(s):t;n(r),\"undefined\"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(r))}catch(r){a.We.error(r)}}]},zt=()=>Yt(rt.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Kt=()=>Object(ot.a)(zt),Qt=()=>Yt(rt.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),$t=()=>Object(ot.a)(Qt),Xt=()=>{const[e,t]=Object(c.useState)(!1),[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)(-1),[u,d]=Object(c.useState)(T.NORMAL),[h,j]=Object(c.useState)(null),[b,g]=Object(c.useState)(null),[O,m]=Object(c.useState)(null),[f,I]=Object(c.useState)(null),[N,S]=Object(c.useState)([]),[v,R]=Object(c.useState)(null),[A,w]=Object(c.useState)([]),[k,D]=Object(c.useState)(null),[U,P]=Object(c.useState)(!1),[M,F]=Object(c.useState)({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[H,B]=Object(c.useState)({}),[G,W]=Object(c.useState)(!1),[V,q]=Kt(),[Y,z]=$t(),[K,Q]=Object(c.useState)(null),[$,X]=Object(c.useState)(null),[J,Z]=Object(c.useState)(0),[ee,te]=Object(c.useState)(0),[ne,re]=Object(c.useState)(0),[ae,oe]=Object(c.useState)(0),[le,ue]=Object(c.useState)(0),[de,he]=Object(c.useState)(0),je=Object(c.useRef)(new ar),be=Object(c.useCallback)((()=>{i(-1),l(-1),j(null),g(null),m(null),I(null),S([]),R(null),w([]),t(!1)}),[]),ge=Object(c.useCallback)((e=>{if(!e)return p.MISSING_OFFER;if(J<0||J>=ee)return p.FURNI_LIMIT_REACHED;const t=ie();if(!t)return p.NOT_IN_ROOM;if(!t.isRoomOwner)return p.NOT_ROOM_OWNER;if(ae<=0){const e=L();let s=e.getRoomObjectCount(t.roomId,a.Ig.UNIT);for(;s>0;){const n=e.getRoomObjectByIndex(t.roomId,s,a.Ig.UNIT),r=t.userDataManager.getUserDataByIndex(n.id);if(r&&r.type===a.Mg.USER&&r.roomIndex!==t.ownRoomIndex&&!r.isModerator)return p.VISITORS_IN_ROOM;s--}}return p.OKAY}),[J,ee,ae]),Oe=Object(c.useCallback)((e=>{const t=ie();return!(!(t&&e.page&&\"sold_ltd_items\"!==e.page.layoutCode&&u===T.NORMAL&&(t.isRoomOwner||t.isGuildRoom&&t.controllerLevel>=a.eg.GUILD_MEMBER)||u===T.BUILDER&&ge(e)===p.OKAY)||e.pricingModel===sr.PRICING_MODEL_BUNDLE||e.product.productType===er.EFFECT||e.product.productType===er.HABBO_CLUB)}),[u,ge]),me=Object(c.useCallback)((e=>{if(!Oe(e))return;const s=e.product;if(!s)return;let n=0;switch(s.productType){case er.FLOOR:n=a.Ig.FLOOR;break;case er.WALL:n=a.Ig.WALL}L().processRoomObjectPlacement(a.Lg.CATALOG,-e.offerId,n,s.productClassId,s.extraParam)&&(Q(e),W(!0),t(!1))}),[Oe]),pe=Object(c.useCallback)(((e,t)=>{const s=L();let n=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_WALL_TYPE),r=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=s.getRoomInstanceVariable(s.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);switch(n=n&&n.length?n:\"101\",r=r&&r.length?r:\"101\",c=c&&c.length?c:\"1.1\",e){case\"floor\":return void s.updateRoomInstancePlaneType(s.activeRoomId,t,n,c,!0);case\"wallpaper\":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,t,c,!0);case\"landscape\":return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,t,!0);default:return void s.updateRoomInstancePlaneType(s.activeRoomId,r,n,c,!0)}}),[]),_e=Object(c.useCallback)((()=>{K&&(L().cancelRoomObjectInsert(),W(!1),Q(null))}),[K]),Ee=Object(c.useCallback)((function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];W((t=>(t&&e&&y(\"catalog/open\"),!1)))}),[]),fe=Object(c.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||Ee(),X((e=>{if(e)switch(e.category){case a.Ig.FLOOR:L().removeRoomObjectFloor(e.roomId,e.objectId);break;case a.Ig.WALL:switch(e.furniData.className){case\"floor\":case\"wallpaper\":case\"landscape\":pe(\"reset\",\"\");break;default:L().removeRoomObjectWall(e.roomId,e.objectId)}break;default:L().deleteRoomObject(e.objectId,e.category)}return null}))}),[Ee,pe]),xe=Object(c.useCallback)(((e,t)=>{if(t.pageId===e&&t!==h)return t;for(const s of t.children){const t=xe(e,s);if(t)return t}return null}),[h]),Ie=Object(c.useCallback)(((e,t)=>{if(t.pageName===e&&t!==h)return t;for(const s of t.children){const t=Ie(e,s);if(t)return t}return null}),[h]),Te=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b||!b.size)return null;if(t){const t=[],s=b.get(e);if(s&&s.length)for(const e of s)e.isVisible&&t.push(e);if(t.length)return t}return b.get(e)}),[b]),Ce=Object(c.useCallback)(((e,t)=>{e<0||(n(!0),i(e),e>-1&&$n(new a.fc(e,t,u)))}),[u]),Ne=Object(c.useCallback)(((e,t,s,n,r,c)=>{const i=new E(e,t,s,n,c);if(m(i),l((t=>-1!==e?e:t)),P(!1),r>-1&&i.offers.length)for(const a of i.offers)if(a.offerId===r){I(a);break}}),[]),Se=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(_e(),\"root\"===e.parent.pageName&&e.children.length)for(const r of e.children)if(r.isVisible){e=r;break}const s=[];let n=e;for(;n&&\"root\"!==n.pageName;)s.push(n),n=n.parent;s.reverse(),S((t=>{const n=t.indexOf(e)>=0,r=e.isOpen;for(const e of t)e.deactivate(),-1===s.indexOf(e)&&e.close();for(const c of s)c.activate(),c.parent&&c.open(),c===e.parent&&c.children.length&&c.open();return n&&r?e.close():e.open(),s})),e.pageId>-1&&Ce(e.pageId,t)}),[S,Ce,_e]),ve=Object(c.useCallback)((s=>{if(R(null),e){const e=xe(s,h);e&&Se(e)}else je.current.requestById=s,t(!0)}),[e,h,xe,Se]),Re=Object(c.useCallback)((s=>{if(R(null),e){const e=Ie(s,h);e&&Se(e)}else je.current.requestByName=s,t(!0)}),[e,h,Ie,Se]),Ae=Object(c.useCallback)((s=>{if(R(null),e){const e=Te(s);if(!e||!e.length)return;Se(e[0],s)}else je.current.requestedByOfferId=s,t(!0)}),[e,Te,Se]),ye=Object(c.useCallback)((()=>{}),[]),we=Object(c.useCallback)((e=>{const t=e.getParser(),s=new Map,n=(e,t,r)=>{const c=new _(e,t,r);for(const n of c.offerIds)s.has(n)?s.get(n).push(c):s.set(n,[c]);t++;for(const s of e.children)c.addChild(n(s,t,c));return c};j(n(t.root,0,null)),g(s)}),[j,g]);it(a.X,we);const ke=Object(c.useCallback)((e=>{const t=e.getParser();if(t.catalogType!==u)return;const s=[];for(const n of t.offers){const e=[],t=ce(n.localizationId);for(const s of n.products){const n=se(s.furniClassId,s.productType);e.push(new tr(s.productType,s.furniClassId,s.extraParam,s.productCount,t,n,s.uniqueLimitedItem,s.uniqueLimitedSeriesSize,s.uniqueLimitedItemsLeft))}if(!e.length)continue;const r=new sr(n.offerId,n.localizationId,n.rent,n.priceCredits,n.priceActivityPoints,n.priceActivityPointsType,n.giftable,n.clubLevel,e,n.bundlePurchaseAllowed);(u===T.NORMAL||r.pricingModel!==sr.PRICING_MODEL_BUNDLE&&r.pricingModel!==sr.PRICING_MODEL_MULTI)&&s.push(r)}t.frontPageItems&&t.frontPageItems.length&&w(t.frontPageItems),n(!1),r===t.pageId&&Ne(t.pageId,t.layoutCode,new cr(t.localization.images.concat(),t.localization.texts.concat()),s,t.offerId,t.acceptSeasonCurrencyAsCredits)}),[u,r,w,n,Ne]);it(a.V,ke);const De=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new ht(t.offer))}),[]);it(a.Ff,De);const Ue=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new jt(t.code))}),[]);it(a.Bf,Ue);const Pe=Object(c.useCallback)((e=>{const t=e.getParser();Vt(new bt(t.code))}),[]);it(a.Ef,Pe);const Me=Object(c.useCallback)((e=>{e.getParser();Vt(new Ot)}),[]);it(a.Xd,Me);const Le=Object(c.useCallback)((e=>{const t=e.getParser().offer;if(!t||!t.products.length)return;t.products[0].uniqueLimitedItem;const s=[],n=ce(t.localizationId);for(const c of t.products){const e=se(c.furniClassId,c.productType);s.push(new tr(c.productType,c.furniClassId,c.extraParam,c.productCount,n,e,c.uniqueLimitedItem,c.uniqueLimitedSeriesSize,c.uniqueLimitedItemsLeft))}const r=new sr(t.offerId,t.localizationId,t.rent,t.priceCredits,t.priceActivityPoints,t.priceActivityPointsType,t.giftable,t.clubLevel,s,t.bundlePurchaseAllowed);(u===T.NORMAL||r.pricingModel!==sr.PRICING_MODEL_BUNDLE&&r.pricingModel!==sr.PRICING_MODEL_MULTI)&&(r.page=O,I(r),r.product&&r.product.productType===er.WALL&&F((e=>{const t={...e};return t.extraData=r.product.extraParam||null,t})))}),[u,O,I,F]);it(a.yf,Le);const Fe=Object(c.useCallback)((e=>{const t=e.getParser(),s=new x(t.productCode,t.palettes.slice());B((e=>{const t=[];e.petPalettes&&t.push(...e.petPalettes);for(let n=0;n<t.length;n++){if(t[n].breed===s.breed){t.splice(n,1);break}}return t.push(s),{...e,petPalettes:t}}))}),[B]);it(a.Jh,Fe);const He=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,clubOffers:t.offers})))}),[B]);it(a.Fd,He);const Be=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,groups:t.groups})))}),[B]);it(a.Cd,Be);const Ge=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,giftConfiguration:new rr(t)})))}),[B]);it(a.Fc,Ge);const We=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;let s=\"\";s=1===t.result?nt(\"inventory.marketplace.result.title.success\"):nt(\"inventory.marketplace.result.title.failure\");const n=nt(`inventory.marketplace.result.${t.result}`);Pr.simpleAlert(n,yr.DEFAULT,null,null,s)}),[]);it(a.ie,We);const Ve=Object(c.useCallback)((e=>{const t=e.getParser();B((e=>({...e,clubGifts:t})))}),[B]);it(a.gb,Ve);const qe=Object(c.useCallback)((t=>{const s=e;be(),s&&Pr.simpleAlert(nt(\"catalog.alert.published.description\"),yr.ALERT,null,null,nt(\"catalog.alert.published.title\"))}),[e,be]);it(a.Y,qe);const Ye=Object(c.useCallback)((e=>{const t=e.getParser();Z(t.furniCount),ye()}),[ye]);it(a.E,Ye);const ze=Object(c.useCallback)((e=>{const t=e.getParser();te(t._Str_15864),re(t._Str_24094),oe(t._Str_3709),ue(C().time),he(t._Str_24379),ye()}),[ye]);it(a.I,ze);const Ke=Object(c.useCallback)((e=>{Ss(an.CREDITS)}),[]);qt(ht.PURCHASE_SUCCESS,Ke);const Qe=Object(c.useCallback)((e=>{if(!G||e.type!==a.qg.PLACED)return;if(fe(!0),!K)return void Ee();let t=!1;const s=K.product;if(e.category===a.Ig.WALL)switch(s.furnitureData.className){case\"floor\":case\"wallpaper\":case\"landscape\":t=e.placedOnFloor||e.placedOnWall;break;default:t=e.placedInRoom}else t=e.placedInRoom;if(t)switch(X(new ir(e.roomId,e.objectId,e.category,e.wallLocation,e.x,e.y,e.direction,K)),u){case T.NORMAL:{switch(e.category){case a.Ig.FLOOR:L().addFurnitureFloor(e.roomId,e.objectId,s.productClassId,new a.Ui(e.x,e.y,e.z),new a.Ui(e.direction),0,new a.Vd);break;case a.Ig.WALL:switch(s.furnitureData.className){case\"floor\":case\"wallpaper\":case\"landscape\":pe(s.furnitureData.className,s.extraParam);break;default:L().addFurnitureWall(e.roomId,e.objectId,s.productClassId,new a.Ui(e.x,e.y,e.z),new a.Ui(45*e.direction),0,e.instanceData,0)}}const t=L().getRoomObject(e.roomId,e.objectId,e.category);t&&t.model.setValue(a.Og.FURNITURE_ALPHA_MULTIPLIER,.5),Y?($n(new a.Df(r,K.offerId,s.extraParam,1)),V&&me(K)):V&&me(K);break}case T.BUILDER:{let t=K.page.pageId;switch(-12345678===t&&(t=-1),e.category){case a.Ig.FLOOR:$n(new a.F(t,K.offerId,s.extraParam,e.x,e.y,e.direction));break;case a.Ig.WALL:$n(new a.G(t,K.offerId,s.extraParam,e.wallLocation))}V&&me(K);break}}else Ee()}),[G,K,V,Y,u,r,fe,Ee,pe,me]);Bt(a.qg.PLACED,Qe);const $e=Object(c.useCallback)((e=>{const t=L();if($&&$.productClassId===e.spriteId&&$.roomId===t.activeRoomId){switch(e.category){case Rs.FLOOR:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}case Rs.WALL_PAPER:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}case Rs.LANDSCAPE:{const s=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);$.extraParam!==s&&$n(new a.Wb(e.id));break}default:$n(new a.Vb(e.id,$.category,$.wallLocation,$.x,$.y,$.direction))}V||fe()}}),[$,V,fe]);return qt(xt.FURNI_ADDED,$e),Object(c.useEffect)((()=>()=>I(null)),[O]),Object(c.useEffect)((()=>{if(e&&h&&je.current)switch(je.current.requestType){case ar.REQUEST_TYPE_NONE:if(O)return;if(h.isBranch)for(const e of h.children)if(e&&e.isVisible)return void Se(e);return;case ar.REQUEST_TYPE_ID:return ve(je.current.requestById),void je.current.resetRequest();case ar.REQUEST_TYPE_OFFER:return Ae(je.current.requestedByOfferId),void je.current.resetRequest();case ar.REQUEST_TYPE_NAME:return Re(je.current.requestByName),void je.current.resetRequest()}}),[e,h,O,Se,ve,Ae,Re]),Object(c.useEffect)((()=>{!v&&O&&-1===O.pageId&&ve(o)}),[v,O,o,ve]),Object(c.useEffect)((()=>{e&&!h&&($n(new a.mc),$n(new a.ic),$n(new a.ec(u)),$n(new a.H))}),[e,h,u]),Object(c.useEffect)((()=>(D(new a.Qg(L(),++a.Qg.PREVIEW_COUNTER)),()=>{D((e=>(e.dispose(),null)))})),[]),{isVisible:e,setIsVisible:t,isBusy:s,pageId:r,previousPageId:o,currentType:u,rootNode:h,offersToNodes:b,currentPage:O,setCurrentPage:m,currentOffer:f,setCurrentOffer:I,activeNodes:N,searchResult:v,setSearchResult:R,frontPageItems:A,roomPreviewer:k,navigationHidden:U,setNavigationHidden:P,purchaseOptions:M,setPurchaseOptions:F,catalogOptions:H,setCatalogOptions:B,getNodeById:xe,getNodeByName:Ie,activateNode:Se,openPageById:ve,openPageByName:Re,openPageByOfferId:Ae,requestOfferToMover:me}},Jt=()=>Object(ot.a)(Xt),Zt=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(null),u=Object(c.useMemo)((()=>{const t=e.filter((e=>e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),d=Object(c.useMemo)((()=>{const t=e.filter((e=>!e.online));return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}),[e]),h=Object(c.useCallback)((e=>$n(new a.Fb(e.id))),[]),j=Object(c.useCallback)(((e,t)=>t!==e.relationshipStatus&&$n(new a.Oh(e.id,t))),[]),b=Object(c.useCallback)((t=>{for(const s of e)if(s.id===t)return s;return null}),[e]),g=Object(c.useCallback)((e=>!b(e)&&(!s.find((t=>t.requesterUserId===e))&&!(r.indexOf(e)>=0))),[s,r,b]),O=Object(c.useCallback)(((e,t)=>{if(!g(e))return!1;i((t=>{const s=[...t];return s.push(e),s})),$n(new a.Uf(t))}),[g]),m=Object(c.useCallback)(((e,t)=>{-1!==e||t?n((s=>{const n=[...s],r=n.findIndex((t=>t.id===e));return-1===r?s:($n(t?new a.a(n[r].id):new a.qb(!1,n[r].id)),n.splice(r,1),n)})):($n(new a.qb(!0)),n([]))}),[]),p=Object(c.useCallback)((e=>{const t=e.getParser();l(new gr(t.userFriendLimit,t.normalFriendLimit,t.extendedFriendLimit,t.categories)),$n(new a.lc)}),[]);it(a.le,p);const _=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e];for(const n of s.fragment){const e=t.findIndex((e=>e.id===n.id)),s=new Bn;s.populate(n),e>-1?t[e]=s:t.push(s)}return t}))}),[]);it(a.Hb,_);const E=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=[...e],n=e=>{const s=t.findIndex((t=>t.id===e.id));if(-1===s){const s=new Bn;s.populate(e),t.unshift(s)}else t[s].populate(e)};for(const r of s.addedFriends)n(r);for(const r of s.updatedFriends)n(r);for(const r of s.removedFriendIds){const e=t.findIndex((e=>e.id===r));e>-1&&t.splice(e,1)}return t}))}),[]);it(a.Ib,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.requests){const e=s.findIndex((e=>e.requesterUserId===n.requesterUserId));if(e>0)s[e]=Xe(s[e]),s[e].populate(n);else{const e=new br;e.populate(n),s.push(e)}}return s}))}),[]);it(a.Jb,f);const x=Object(c.useCallback)((e=>{const t=e.getParser().request;n((e=>{const s=[...e];if(-1===s.findIndex((e=>e.requesterUserId===t.requesterUserId))){const e=new br;e.populate(t),s.push(e)}return s}))}),[]);return it(a.Ne,x),Object(c.useEffect)((()=>{$n(new a.ke)}),[]),{friends:e,requests:s,sentRequests:r,settings:o,onlineFriends:u,offlineFriends:d,getFriend:b,canRequestFriend:g,requestFriend:O,requestResponse:m,followFriend:h,updateRelationship:j}},es=()=>Object(ot.a)(Zt),ts=()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(jr.HIDDEN),{getFriend:u=null}=es(),d=Object(c.useMemo)((()=>e.filter((e=>-1===r.indexOf(e.threadId)))),[e,r]),h=Object(c.useMemo)((()=>s>0&&d.find((e=>e.threadId===s||null))),[s,d]),j=Object(c.useCallback)((s=>{let n=e.find((e=>e.participant&&e.participant.id===s));if(n)return n;const r=u(s);return r?(n=new pr(r),t((e=>{const t=[...e];return t.push(n),t})),i((e=>{const t=e.indexOf(n.threadId);if(-1===t)return e;const s=[...e];return s.splice(t,1),s})),n):null}),[e,u]),b=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new pr(e),t.push(c))}else t[r]=Xe(t[r]),c=t[r];return c.addMessage(n.senderId,n.messageText,n.secondsSinceSent,n.extraData),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ss(an.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);it(a.Me,b);const g=Object(c.useCallback)((e=>{const n=e.getParser();t((e=>{const t=[...e];let r=t.findIndex((e=>e.participant&&e.participant.id===n.senderId)),c=null;if(-1===r){const e=u(n.senderId);e&&(c=new pr(e),t.push(c))}else t[r]=Xe(t[r]),c=t[r];return c.addMessage(null,n.messageText,0,null,Or.ROOM_INVITE),s===c.threadId&&c.setRead(),c.unreadCount>0&&Ss(an.MESSENGER_MESSAGE_RECEIVED),t}))}),[s,u]);it(a.Eg,g);const O=Object(c.useCallback)((e=>{const t=e.getParser(),s=\"Received room invite error: errorCode: \"+t.errorCode+\", recipients: \"+t.failedRecipients;Pr.simpleAlert(s,yr.DEFAULT,null,null,nt(\"friendlist.alert.title\"))}),[]);return it(a.Dg,O),Object(c.useEffect)((()=>{s<=0||t((e=>{const t=[...e];let n=t.findIndex((e=>e.threadId===s));if(-1!==n)return t[n]=Xe(t[n]),t[n].setRead(),t}))}),[s]),Object(c.useEffect)((()=>{l((e=>{if(!d.length)return jr.HIDDEN;let t=!1;for(const s of d)if(s.unreadCount>0){t=!0;break}return t?jr.UNREAD:jr.SHOW}))}),[d]),{messageThreads:e,activeThread:h,iconState:o,visibleThreads:d,getMessageThread:j,setActiveThreadId:n,closeThread:e=>{i((t=>{const s=[...t];return s.indexOf(e)>=0?t:(s.push(e),s)}))},sendMessage:(n,r)=>{n&&r&&r.length&&($n(new a.Kh(n.participant.id,r)),1===e.length&&1===n.groups.length&&Ss(an.MESSENGER_NEW_THREAD),t((e=>{const t=[...e],c=t.findIndex((e=>e.threadId===n.threadId));return-1===c?e:(t[c]=Xe(t[c]),(n=t[c]).addMessage(ee().userId,r,0,null,Or.CHAT),s===n.threadId&&n.setRead(),t)})))}}},ss=()=>Object(ot.a)(ts),ns=()=>{const[e,t]=Object(c.useState)([]);return{isVisible:Object(c.useMemo)((()=>!!e.length),[e]),activate:Object(c.useCallback)((()=>{let e=-1;return t((t=>{const s=[...t];return e=s.length?s[s.length-1]+1:0,s.push(e),s})),e}),[]),deactivate:Object(c.useCallback)((e=>{t((t=>{const s=[...t],n=s.indexOf(e);return-1===n?t:(s.splice(n,1),s)}))}),[])}},rs=()=>{const[e,t]=Object(c.useState)(new Map),s=Object(c.useCallback)((t=>{var s;return(null===(s=e.get(t))||void 0===s?void 0:s.length)||0}),[e]),n=Object(c.useMemo)((()=>{let t=0;for(const n of e.keys())t+=s(n);return t}),[e,s]),r=Object(c.useCallback)((e=>{let s=!0;return t((t=>{if(!t.has(e))return s=!1,t;const n=new Map(t);return n.delete(e),(e=>{$n(new a.qi(e))})(e),n})),s}),[]),i=Object(c.useCallback)(((e,s)=>{let n=!0;return t((t=>{if(!t.has(e))return n=!1,t;const r=new Map(t),c=r.get(e);if(c)for(const e of s)c.splice(c.indexOf(e),1);return((e,t)=>{$n(new a.ri(e,...t))})(e,s),r})),n}),[]),o=Object(c.useCallback)(((t,s)=>{if(!e.has(t))return!1;return e.get(t).indexOf(s)>=0}),[e]),l=Object(c.useCallback)(((e,s)=>{t((t=>{if(!t.has(e))return t;const n=new Map(t),r=n.get(e),c=r.indexOf(s);return c>=0&&r.splice(c,1),n}))}),[]),u=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=new Map(e);for(const n of s.categories){let e=t.get(n);e||(e=[],t.set(n,e));const r=s.getItemsByCategory(n);for(const t of r)-1===e.indexOf(t)&&e.push(t)}return t}))}),[]);return it(a.pi,u),{getCount:s,getFullCount:n,resetCategory:r,resetItems:i,isUnseen:o,removeUnseen:l}},cs=()=>Object(ot.a)(rs),is=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)([]),[u,d]=Object(c.useState)(null),{isVisible:h=!1,activate:j=null,deactivate:b=null}=ns(),{isUnseen:g=null,resetCategory:O=null}=cs(),m=k(\"user.badges.max.slots\",5),p=()=>o.length<m,_=Object(c.useCallback)((e=>{const t=e.getParser(),s=t.getAllBadgeCodes(),r=[];for(const n of s)r.push(t.getBadgeId(n));n(s),i(r),l(t.getActiveBadgeCodes())}),[]);it(a.v,_);const E=Object(c.useCallback)((e=>{const t=e.getParser(),s=g(qs.BADGE,t.badgeId);n((e=>{const n=[...e];return s?n.unshift(t.badgeCode):n.push(t.badgeCode),n})),i((e=>{const n=[...e];return s?n.unshift(t.badgeId):n.push(t.badgeId),n}))}),[g]);return it(a.u,E),Object(c.useEffect)((()=>{s&&s.length&&d((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(h)return()=>{O(qs.BADGE)}}),[h,O]),Object(c.useEffect)((()=>{h&&e&&($n(new a.Rf),t(!1))}),[h,e]),{badgeCodes:s,activeBadgeCodes:o,selectedBadgeCode:u,setSelectedBadgeCode:d,isWearingBadge:e=>o.indexOf(e)>=0,canWearBadges:p,toggleBadge:e=>{l((t=>{const s=[...t],n=s.indexOf(e);if(-1===n){if(!p())return t;s.push(e)}else s.splice(n,1);const r=new a.Mh;for(let e=0;e<m;e++)r.addActivatedBadge(s[e]||null);return $n(r),s}))},getBadgeId:e=>{const t=s.indexOf(e);return-1===t?0:r[t]||0},activate:j,deactivate:b}},as=()=>Object(ot.a)(is),os=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.map((e=>e.botData.id)),r=[];for(const c of t.items.values())-1===n.indexOf(c.id)&&r.push(c);for(const c of n){let e=!0;for(const s of t.items.values())if(s.id===c){e=!1;break}if(!e)continue;const n=s.findIndex((e=>e.botData.id===c)),r=s[n];-1!==n&&r&&(Fs()===r.botData.id&&(Bs(),y(\"inventory/open\")),s.splice(n,1))}for(const t of r){const e={botData:t};d(qs.BOT,t.id)?s.unshift(e):s.push(e)}return s}))}),[d]);it(a.A,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];if(s.findIndex((e=>e.botData.id===t.item.id))>=0)return e;const n={botData:t.item};return d(qs.BOT,n.botData.id)?s.unshift(n):s.push(n),s}))}),[d]);it(a.y,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e],n=s.findIndex((e=>e.botData.id===t.itemId));return-1===n?e:(s.splice(n,1),Fs()===t.itemId&&(Bs(),y(\"inventory/show\")),s)}))}),[]);return it(a.C,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.BOT)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.dc),t(!1))}),[o,e]),{botItems:s,selectedBot:r,setSelectedBot:i,activate:l,deactivate:u}},ls=()=>Object(ot.a)(os);let us=null;const ds=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];for(const n of t.items){let e=0,t=null;for(;e<s.length;){const r=s[e];let c=0;for(;c<r.items.length;){const e=r.items[c];if(e.id===n.itemId){e.update(n);const s=[...r.items];s[c]=e,r.items=s,t=r;break}c++}if(t)break;e++}if(t)t.hasUnseenItems=!0,s[e]=Xe(t);else{const e=new As(n);ks(s,e,d(qs.FURNI,n.itemId)),Vt(new xt(e.id,e.type,e.category))}}return s}))}),[d]);it(a.Nb,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();us||(us=new Array(t.totalFragments));const s=Ds(t.fragment,t.totalFragments,t.fragmentNumber,us);s&&(n((e=>{const t=[...e],n=Us(t);for(const r of n){if(s.get(r))continue;let e=0;for(;e<t.length;){const s=t[e],n=s.remove(r);if(n){Fs()===n.ref&&(Bs(),Ws(s)||y(\"inventory/show\")),s.getTotalCount()<=0&&(t.splice(e,1),s.dispose());break}e++}}for(const r of s.keys()){if(n.indexOf(r)>=0)continue;const e=s.get(r);if(!e)continue;const c=new As(e);ks(t,c,d(qs.FURNI,r)),Vt(new xt(c.id,c.type,c.category))}return t})),us=null)}),[d]);it(a.Pb,b);const g=Object(c.useCallback)((e=>{t(!0)}),[]);it(a.Qb,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];let n=0;for(;n<s.length;){const e=s[n],r=e.remove(t.itemId);if(r){Fs()===r.ref&&(Bs(),Ws(e)||y(\"inventory/show\")),e.getTotalCount()<=0&&(s.splice(n,1),e.dispose());break}n++}return s}))}),[]);it(a.Rb,O);const m=Object(c.useCallback)((e=>{}),[]);return it(a.Xb,m),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.FURNI)&&n((e=>{const t=[...e];for(const s of t)s.hasUnseenItems=!1;return t}))}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.Ob),t(!1))}),[o,e]),{isVisible:o,groupItems:s,setGroupItems:n,selectedItem:r,setSelectedItem:i,activate:l,deactivate:u}},hs=()=>Object(ot.a)(ds);let js=null;const bs=()=>{const[e,t]=Object(c.useState)(!0),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)(null),{isVisible:o=!1,activate:l=null,deactivate:u=null}=ns(),{isUnseen:d=null,resetCategory:h=null}=cs(),j=Object(c.useCallback)((e=>{const t=e.getParser();js||(js=new Array(t.totalFragments));const s=Qs(t.fragment,t.totalFragments,t.fragmentNumber,js);s&&(n((e=>{const t=[...e];return Ks(t,s,d),t})),js=null)}),[d]);it(a.pf,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return Ys(t.pet,s,d(qs.PET,t.pet.id)),s}))}),[d]);it(a.mf,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();n((e=>{const s=[...e];return zs(t.petId,s),s}))}),[]);return it(a.sf,g),Object(c.useEffect)((()=>{s&&s.length&&i((e=>{let t=e;return t&&-1===s.indexOf(t)&&(t=null),t||(t=s[0]),t}))}),[s]),Object(c.useEffect)((()=>{if(o)return()=>{h(qs.PET)}}),[o,h]),Object(c.useEffect)((()=>{o&&e&&($n(new a.Vf),t(!1))}),[o,e]),{petItems:s,selectedPet:r,setSelectedPet:i,activate:l,deactivate:u}},gs=()=>Object(ot.a)(bs),Os=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)($s.TRADING_STATE_READY),{groupItems:o=[],setGroupItems:l=null,activate:u=null,deactivate:d=null}=hs(),h=r>=$s.TRADING_STATE_RUNNING,j=Object(c.useCallback)((r=>{const c=r.getParser();e&&s&&(e.userId===c.userID?t((e=>{const t=Xe(e);return t.accepts=c.userAccepts,t})):s.userId===c.userID&&n((e=>{const t=Xe(e);return t.accepts=c.userAccepts,t})))}),[e,s]);it(a.Vh,j);const b=Object(c.useCallback)((s=>{const r=s.getParser();r.reason===a.Zh.ERROR_WHILE_COMMIT?Zs(Js.ERROR_WHILE_COMMIT):e&&r.userID!==e.userId&&Zs(Js.THEY_CANCELLED),t(null),n(null),i($s.TRADING_STATE_READY)}),[e]);it(a.Yh,b);const g=Object(c.useCallback)((e=>{e.getParser();t(null),n(null),i($s.TRADING_STATE_READY)}),[]);it(a.ai,g);const O=Object(c.useCallback)((e=>{e.getParser();i($s.TRADING_STATE_COUNTDOWN)}),[]);it(a.ci,O);const m=Object(c.useCallback)((e=>{const s=e.getParser(),r=tn(s.firstUserItemArray),c=tn(s.secondUserItemArray);t((e=>{const t=Xe(e);t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c);const n=[];for(const s of t.userItems.getValues()){let e=0;for(;e<s.getTotalCount();){const t=s.getItemByIndex(e);t&&n.push(t.ref),e++}}return l((e=>{const t=[...e];for(const s of t)s.lockItemIds(n);return t})),t})),n((e=>{const t=Xe(e);return t.userId===s.firstUserID?(t.creditsCount=s.firstUserNumCredits,t.itemCount=s.firstUserNumItems,t.userItems=r):(t.creditsCount=s.secondUserNumCredits,t.itemCount=s.secondUserNumItems,t.userItems=c),t}))}),[l]);it(a.fi,m);const p=Object(c.useCallback)((e=>{e.getParser()}),[]);it(a.hi,p);const _=Object(c.useCallback)((e=>{const s=e.getParser(),r=new Xs,c=ie().userDataManager.getUserData(s.userID);r.userItems=new a.g;const o=new Xs,l=ie().userDataManager.getUserData(s.otherUserID);o.userItems=new a.g,c.webID===ee().userId?(r.userId=c.webID,r.userName=c.name,r.canTrade=s.userCanTrade,o.userId=l.webID,o.userName=l.name,o.canTrade=s.otherUserCanTrade):l.webID===ee().userId&&(r.userId=l.webID,r.userName=l.name,r.canTrade=s.otherUserCanTrade,o.userId=c.webID,o.userName=c.name,o.canTrade=s.userCanTrade),t(r),n(o),i($s.TRADING_STATE_RUNNING)}),[]);it(a.ji,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Zs(t.reason,t.otherUserName)}),[]);it(a.ki,E);const f=Object(c.useCallback)((e=>{e.getParser();Zs(Js.THEY_NOT_ALLOWED)}),[]);it(a.li,f);const x=Object(c.useCallback)((e=>{e.getParser();Zs(Js.YOU_NOT_ALLOWED)}),[]);return it(a.ni,x),Object(c.useEffect)((()=>{if(r===$s.TRADING_STATE_READY)return;const e=u();return()=>d(e)}),[r,u,d]),{ownUser:e,otherUser:s,tradeState:r,setTradeState:i,isTrading:h,groupItems:o,progressTrade:()=>{switch(r){case $s.TRADING_STATE_RUNNING:return s.itemCount||e.accepts||Pr.simpleAlert(nt(\"inventory.trading.warning.other_not_offering\"),null,null,null),void(e.accepts?$n(new a.mi):$n(new a.Uh));case $s.TRADING_STATE_CONFIRMING:return $n(new a.bi),void i($s.TRADING_STATE_CONFIRMED)}},removeItem:e=>{const t=e.getLastItem();t&&$n(new a.gi(t.id))},stopTrading:()=>{h&&(r!==$s.TRADING_STATE_RUNNING?$n(new a.Wh):$n(new a.Xh))}}},ms=()=>Object(ot.a)(Os),ps=()=>Object(c.useState)({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),_s=()=>Object(ot.a)(ps),Es=()=>{const[e,t]=Object(c.useState)(new Mr),s=Object(c.useMemo)((()=>k(\"hc.disabled\",!1)),[]),n=Object(c.useMemo)((()=>s||e.clubDays>0?Tr.ACTIVE:e.pastVipDays>0||e.pastVipDays>0?Tr.EXPIRED:Tr.NONE),[e,s]),r=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.credits=parseFloat(s.credits),e.credits!==t.credits&&Ss(an.CREDITS),t}))}),[]);it(a.yi,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.activityPoints=s.currencies,t}))}),[]);it(a.Ai,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t((e=>{const t=Xe(e);return t.activityPoints=new Map(t.activityPoints),t.activityPoints.set(s.type,s.amount),0===s.type&&Ss(an.DUCKETS),t}))}),[]);it(a.f,o);const l=Object(c.useCallback)((e=>{const s=e.getParser(),n=s.productName;\"club_habbo\"!==n&&\"habbo_club\"!==n||t((e=>{const t=Xe(e);return t.clubDays=Math.max(0,s.daysToPeriodEnd),t.clubPeriods=Math.max(0,s.periodsSubscribedAhead),t.isVip=s.isVip,t.pastClubDays=s.pastClubDays,t.pastVipDays=s.pastVipDays,t.isExpiring=s.responseType===a.Si.RESPONSE_TYPE_DISCOUNT_AVAILABLE,t.minutesUntilExpiration=s.minutesUntilExpiration,t.minutesSinceLastModified=s.minutesSinceLastModified,t}))}),[]);return it(a.Ri,l),Object(c.useEffect)((()=>{if(s)return;$n(new a.Qi(\"habbo_club\"));const e=setInterval((()=>$n(new a.Qi(\"habbo_club\"))),5e4);return()=>clearInterval(e)}),[s]),Object(c.useEffect)((()=>{$n(new a.zi)}),[]),{purse:e,hcDisabled:s,clubStatus:n,getCurrencyAmount:t=>{if(-1===t)return e.credits;for(const[s,n]of e.activityPoints.entries())if(s===t)return n;return 0}}},fs=()=>Object(ot.a)(Es),xs=()=>{const[e,t]=Object(c.useState)([]),s=Object(c.useCallback)((s=>{e.indexOf(s)>=0||t([...e,s])}),[e]),n=Object(c.useCallback)((s=>{const n=e.indexOf(s);if(-1===n)return;const r=[...e];r.splice(n,1),t(r)}),[e]),r=Object(c.useCallback)(((e,t)=>{ie().sendDoorbellApprovalMessage(e,t),n(e)}),[n]),i=Object(c.useCallback)((e=>{switch(e.type){case a.Wg.DOORBELL:return void s(e.userName);case a.Wg.RSDE_REJECTED:case a.Wg.RSDE_ACCEPTED:return void n(e.userName)}}),[s,n]);return Gt(a.Wg.DOORBELL,i),Gt(a.Wg.RSDE_REJECTED,i),Gt(a.Wg.RSDE_ACCEPTED,i),{users:e,addUser:s,removeUser:n,answer:r}},Is=()=>{const[e,t]=Object(c.useState)(null),[s,n]=Object(c.useState)(null),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.userInfo),n(s.userInfo.figure)}),[]);it(a.Fi,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();n(t.figure)}),[]);return it(a.zb,i),{userInfo:e,userFigure:s}},Ts=()=>Object(ot.a)(Is),Cs=e=>{return t=()=>e(),Object(c.useEffect)(t,[]);var t};let Ns=!1;const Ss=e=>{Ns&&Ft(new ct.a(ct.a.PLAY_SOUND,e))},vs=[a.Ce.MOUSE_CLICK];(()=>{const e=t=>(Ns=!0)&&vs.forEach((t=>window.removeEventListener(t,e)));vs.forEach((t=>window.addEventListener(t,e)))})();class Rs{}Rs.DEFAULT=1,Rs.WALL_PAPER=2,Rs.FLOOR=3,Rs.LANDSCAPE=4,Rs.POST_IT=5,Rs.POSTER=6,Rs.SOUND_SET=7,Rs.TRAX_SONG=8,Rs.PRESENT=9,Rs.ECOTRON_BOX=10,Rs.TROPHY=11,Rs.CREDIT_FURNI=12,Rs.PET_SHAMPOO=13,Rs.PET_CUSTOM_PART=14,Rs.PET_CUSTOM_PART_SHAMPOO=15,Rs.PET_SADDLE=16,Rs.GUILD_FURNI=17,Rs.GAME_FURNI=18,Rs.MONSTERPLANT_SEED=19,Rs.MONSTERPLANT_REVIVAL=20,Rs.MONSTERPLANT_REBREED=21,Rs.MONSTERPLANT_FERTILIZE=22,Rs.FIGURE_PURCHASABLE_SET=23;class As{constructor(e){this._expirationTimeStamp=void 0,this._isWallItem=void 0,this._songId=void 0,this._locked=void 0,this._id=void 0,this._ref=void 0,this._category=void 0,this._type=void 0,this._stuffData=void 0,this._extra=void 0,this._recyclable=void 0,this._tradeable=void 0,this._groupable=void 0,this._sellable=void 0,this._secondsToExpiration=void 0,this._hasRentPeriodStarted=void 0,this._creationDay=void 0,this._creationMonth=void 0,this._creationYear=void 0,this._slotId=void 0,this._isRented=void 0,this._flatId=void 0,e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(C().time-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new As(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class ys{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this._type=void 0,this._category=void 0,this._roomEngine=void 0,this._stuffData=void 0,this._extra=void 0,this._isWallItem=void 0,this._iconUrl=void 0,this._name=void 0,this._description=void 0,this._locked=void 0,this._selected=void 0,this._hasUnseenItems=void 0,this._items=void 0,this._type=e,this._category=t,this._roomEngine=s,this._stuffData=n,this._extra=r,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new ys;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const t of this._items)if(t.id===e)return t;return null}getTradeItems(e){const t=[],s=this.getLastItem();if(!s)return t;let n=0,r=0;for(;r<this._items.length&&!(n>=e);){const e=this.getItemByIndex(r);!e.locked&&e.isTradable&&e.type===s.type&&(t.push(e),n++),r++}return t}push(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e.id)return n=n.clone(),n.locked=!1,t.splice(s,1),t.push(n),void(this._items=t);s++}t.push(e),this._items=t,1===this._items.length&&this.prepareGroup()}pop(){const e=[...this._items];let t=null;if(e.length>0){const s=e.length-1;t=e[s],e.splice(s,1)}return this._items=e,t}remove(e){const t=[...this._items];let s=0;for(;s<t.length;){let n=t[s];if(n.id===e)return t.splice(s,1),this._items=t,n;s++}return null}getTotalCount(){if(this._category===Rs.POST_IT){let e=0,t=0;for(;t<this._items.length;){const s=this.getItemByIndex(t);e+=parseInt(s.stuffData.getLegacyString()),t++}return e}return this._items.length}getUnlockedCount(){if(this.category===Rs.POST_IT)return this.getTotalCount();let e=0,t=0;for(;t<this._items.length;){this.getItemByIndex(t).locked||e++,t++}return e}getLastItem(){if(!this._items.length)return null;return this.getItemByIndex(this._items.length-1)}unlockAllItems(){const e=[...this._items];let t=0;for(;t<e.length;){const s=e[t];if(s.locked){const n=s.clone();n.locked=!1,e[t]=n}t++}this._items=e}lockItemIds(e){const t=[...this._items];let s=0,n=!1;for(;s<t.length;){const r=t[s],c=e.indexOf(r.ref)>=0;if(r.locked!==c){n=!0;const e=r.clone();e.locked=c,t[s]=e}s++}return this._items=t,n}setName(){const e=this.getLastItem();if(!e)return void(this._name=\"\");let t=\"\";switch(this._category){case Rs.POSTER:t=\"poster_\"+e.stuffData.getLegacyString()+\"_name\";break;case Rs.TRAX_SONG:return void(this._name=\"SONG_NAME\");default:t=this.isWallItem?\"wallItem.name.\"+e.type:\"roomItem.name.\"+e.type}this._name=nt(t)}setDescription(){this._description=\"\"}setIcon(){if(this._iconUrl)return;let e=null;e=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return!!e&&e.isWallItem}get isGroupable(){const e=this.getItemByIndex(0);return!!e&&e.isGroupable}get isSellable(){const e=this.getItemByIndex(0);return!!e&&e.sellable}get items(){return this._items}set items(e){this._items=e}}const ws=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return new ys(e,t,L(),s,n)},ks=(e,t,s)=>{t.isGroupable?((e,t,s)=>{let n=null;for(const r of e)if(r.type===t.type&&r.isWallItem===t.isWallItem&&r.isGroupable)if(t.category===Rs.POSTER){if(r.stuffData.getLegacyString()===t.stuffData.getLegacyString()){n=r;break}}else{if(t.category!==Rs.GUILD_FURNI){n=r;break}if(t.stuffData.compare(r.stuffData)){n=r;break}}if(n){if(n.push(t),s){n.hasUnseenItems=!0;const t=e.indexOf(n);t>=0&&e.splice(t,1),e.unshift(n)}return n}n=ws(t.type,t.category,t.stuffData,t.extra),n.push(t),s?(n.hasUnseenItems=!0,e.unshift(n)):e.push(n)})(e,t,s):((e,t,s)=>{const n=[];for(const c of e)c.type===t.type&&n.push(c);for(const c of n)if(c.getItemById(t.id))return c;const r=ws(t.type,t.category,t.stuffData,t.extra);r.push(t),s?(r.hasUnseenItems=!0,e.unshift(r)):e.push(r)})(e,t,s)},Ds=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r},Us=e=>{const t=[];for(const s of e){let e=s.getTotalCount();s.category===Rs.POST_IT&&(e=1);let n=0;for(;n<e;)t.push(s.getItemByIndex(n).id),n++}return t};let Ps=!1,Ms=-1;const Ls=e=>Ps=e,Fs=()=>Ms,Hs=e=>Ms=e,Bs=()=>{-1!==Fs()&&(L().cancelRoomObjectPlacement(),Hs(-1),Ls(!1))},Gs=function(e){const t=e.petData;if(!t)return!1;const s=$().getSession(1);return!!s&&(!(!s.isRoomOwner&&!s.allowPets)&&(y(\"inventory/hide\"),L().processRoomObjectPlacement(a.Lg.INVENTORY,-t.id,a.Ig.UNIT,a.Mg.PET,t.figureData.figuredata)&&(Hs(t.id),Ls(!0)),!0))},Ws=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||!e.getUnlockedCount())return!1;const s=e.getLastItem();if(!s)return!1;if(s.category===Rs.FLOOR||s.category===Rs.WALL_PAPER||s.category===Rs.LANDSCAPE)return t||$n(new a.Wb(s.id)),!1;{y(\"inventory/hide\");let e=0,t=!1;e=s.isWallItem?a.Ig.WALL:a.Ig.FLOOR,t=s.category===Rs.POSTER?L().processRoomObjectPlacement(a.Lg.INVENTORY,s.id,e,s.type,s.stuffData.getLegacyString()):L().processRoomObjectPlacement(a.Lg.INVENTORY,s.id,e,s.type,s.extra.toString(),s.stuffData),t&&(Hs(s.ref),Ls(!0))}return!0},Vs=function(e){const t=e.botData;if(!t)return!1;const s=$().getSession(1);return!(!s||!s.isRoomOwner)&&(y(\"inventory/hide\"),L().processRoomObjectPlacement(a.Lg.INVENTORY,-t.id,a.Ig.UNIT,a.Mg.RENTABLE_BOT,t.figure)&&(Hs(t.id),Ls(!0)),!0)};class qs{}qs.FURNI=1,qs.RENTABLE=2,qs.PET=3,qs.BADGE=4,qs.BOT=5,qs.GAMES=6;const Ys=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n={petData:e};return s?t.unshift(n):t.push(n),n},zs=(e,t)=>{let s=0;for(;s<t.length;){const n=t[s];if(n&&n.petData.id===e)return Fs()===n.petData.id&&(Bs(),y(\"inventory/open\")),t.splice(s,1),n;s++}return null},Ks=(e,t,s)=>{const n=e.map((e=>e.petData.id));const r=[],c=[];for(const i of t.keys())-1===n.indexOf(i)&&r.push(i);for(const i of n)!t.get(i)&&c.push(i);n.length;for(const i of c)zs(i,e);for(const i of r){const n=t.get(i);n&&Ys(n,e,s(qs.PET,n.id))}return e},Qs=(e,t,s,n)=>{if(1===t)return e;n[s]=e;for(const c of n)if(!c)return null;const r=new Map;for(const c of n){for(const[e,t]of c)r.set(e,t);c.clear()}return n=null,r};class $s{}$s.TRADING_STATE_READY=0,$s.TRADING_STATE_RUNNING=1,$s.TRADING_STATE_COUNTDOWN=2,$s.TRADING_STATE_CONFIRMING=3,$s.TRADING_STATE_CONFIRMED=4,$s.TRADING_STATE_COMPLETED=5,$s.TRADING_STATE_CANCELLED=6;class Xs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.userId=e,this.userName=t,this.userItems=s,this.itemCount=n,this.creditsCount=r,this.accepts=c,this.canTrade=i}}class Js{}Js.ALERT_SCAM=0,Js.HOTEL_TRADING_DISABLED=1,Js.YOU_NOT_ALLOWED=2,Js.THEY_NOT_ALLOWED=4,Js.ROOM_DISABLED=6,Js.YOU_OPEN=7,Js.THEY_OPEN=8,Js.ERROR_WHILE_COMMIT=9,Js.THEY_CANCELLED=10;const Zs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";switch(e){case Js.ALERT_SCAM:return void Pr.simpleAlert(nt(\"inventory.trading.warning.other_not_offering\"),null,null,null,nt(\"inventory.trading.notification.title\"));case Js.HOTEL_TRADING_DISABLED:case Js.YOU_NOT_ALLOWED:case Js.THEY_NOT_ALLOWED:case Js.ROOM_DISABLED:case Js.YOU_OPEN:case Js.THEY_OPEN:return void Pr.simpleAlert(nt(`inventory.trading.openfail.${e}`,[\"otherusername\"],[t]),null,null,null,nt(\"inventory.trading.openfail.title\"));case Js.ERROR_WHILE_COMMIT:return void Pr.simpleAlert(`${nt(\"inventory.trading.notification.caption\")}, ${nt(\"inventory.trading.notification.commiterror.info\")}`,null,null,null,nt(\"inventory.trading.notification.title\"));case Js.THEY_CANCELLED:return void Pr.simpleAlert(nt(\"inventory.trading.info.closed\"),null,null,null,nt(\"inventory.trading.notification.title\"))}},en=e=>{var t;return(null===(t=ee().getWallItemData(e))||void 0===t?void 0:t.isExternalImage)||!1},tn=e=>{const t=new a.g;if(e.length)for(const s of e){const e=s.spriteId,n=s.category;let r=s.furniType+e;s.isGroupable&&!en(e)||(r=\"itemid\"+s.itemId),s.category===Rs.POSTER?r=s.itemId+\"poster\"+s.stuffData.getLegacyString():s.category===Rs.GUILD_FURNI&&(r=\"\");let c=s.isGroupable&&!en(s.spriteId)?t.getValue(r):null;c||(c=ws(e,n,s.stuffData),t.add(r,c)),c.push(new As(s))}return t};class sn{static getProductImageUrl(e,t,s){let n=null;switch(e){case a.W.S:n=L().getFurnitureFloorIconUrl(t);break;case a.W.I:const e=this.getProductCategory(a.W.I,t);if(1===e)n=L().getFurnitureWallIconUrl(t,s);else switch(e){case Rs.WALL_PAPER:case Rs.LANDSCAPE:case Rs.FLOOR:}case a.W.E:}return n}static getProductCategory(e,t){if(e===a.W.S)return 1;if(e===a.W.I){if(3001===t)return Rs.WALL_PAPER;if(3002===t)return Rs.FLOOR;if(4057===t)return Rs.LANDSCAPE}return 1}}class nn{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,t){const s=new Array(t);let n=e.length;const r=new Array(n);for(;t--;){var c=this.getRandomNumber(n);s[t]=e[c in r?r[c]:c],r[c]=--n in r?r[n]:n}return s}}var rn=s(81);const cn=new Map;cn.set(\"r\",\"red\"),cn.set(\"b\",\"blue\"),cn.set(\"g\",\"green\"),cn.set(\"y\",\"yellow\"),cn.set(\"w\",\"white\"),cn.set(\"o\",\"orange\"),cn.set(\"c\",\"cyan\"),cn.set(\"br\",\"brown\"),cn.set(\"pr\",\"purple\"),cn.set(\"pk\",\"pink\"),cn.set(\"red\",\"red\"),cn.set(\"blue\",\"blue\"),cn.set(\"green\",\"green\"),cn.set(\"yellow\",\"yellow\"),cn.set(\"white\",\"white\"),cn.set(\"orange\",\"orange\"),cn.set(\"cyan\",\"cyan\"),cn.set(\"brown\",\"brown\"),cn.set(\"purple\",\"purple\"),cn.set(\"pink\",\"pink\");class an{}an.CAMERA_SHUTTER=\"camera_shutter\",an.CREDITS=\"credits\",an.DUCKETS=\"duckets\",an.MESSENGER_NEW_THREAD=\"messenger_new_thread\",an.MESSENGER_MESSAGE_RECEIVED=\"messenger_message_received\",an.MODTOOLS_NEW_TICKET=\"modtools_new_ticket\";class on{constructor(e){this._type=void 0,this._type=e}get type(){return this._type}}class ln extends on{constructor(e){super(ln.AVATAR_EXPRESSION),this._animation=void 0,this._animation=e}get animation(){return this._animation}}ln.AVATAR_EXPRESSION=\"RWAEM_MESSAGE_AVATAR_EXPRESSION\";class un extends on{constructor(e){super(un.CHANGE_MOTTO),this._motto=void 0,this._motto=e}get motto(){return this._motto}}un.CHANGE_MOTTO=\"RWCMM_CHANGE_MOTTO\";class dn extends on{constructor(e){super(dn.CHANGE_POSTURE),this._posture=void 0,this._posture=e}get posture(){return this._posture}}dn.CHANGE_POSTURE=\"RWCPM_MESSAGE_CHANGE_POSTURE\",dn.POSTURE_STAND=0,dn.POSTURE_SIT=1;class hn extends on{constructor(e,t,s,n,r){super(e),this._chatType=void 0,this._text=void 0,this._recipientName=void 0,this._styleId=void 0,this._text=t,this._chatType=s,this._recipientName=n,this._styleId=r}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}hn.MESSAGE_CHAT=\"RWCM_MESSAGE_CHAT\",hn.CHAT_DEFAULT=0,hn.CHAT_WHISPER=1,hn.CHAT_SHOUT=2;class jn extends on{constructor(e,t,s,n){super(e),this._objectId=void 0,this._userName=void 0,this._roomId=void 0,this._objectId=t,this._userName=s,this._roomId=n}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}jn.MESSAGE_SELECT_AVATAR=\"RWCSAM_MESSAGE_SELECT_AVATAR\";class bn extends on{constructor(e){super(bn.TYPING_STATUS),this._isTyping=void 0,this._isTyping=e}get isTyping(){return this._isTyping}}bn.TYPING_STATUS=\"RWCTM_TYPING_STATUS\";class gn extends on{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}gn.REDEEM=\"RWCFRM_REDEEM\";class On extends on{constructor(e){super(On.DANCE),this._style=0,this._style=e}get style(){return this._style}}On.DANCE=\"RWDM_MESSAGE_DANCE\",On.NORMAL_STYLE=0,On.CLUB_STYLE=[2,3,4];class mn extends on{constructor(){super(mn.CHANGE_STATE)}}mn.CHANGE_STATE=\"RWCDSM_CHANGE_STATE\";class pn extends on{constructor(e,t,s){super(pn.PREVIEW_DIMMER_PRESET),this._color=void 0,this._brightness=void 0,this._bgOnly=void 0,this._color=e,this._brightness=t,this._bgOnly=s}get color(){return this._color}get brightness(){return this._brightness}get bgOnly(){return this._bgOnly}}pn.PREVIEW_DIMMER_PRESET=\"RWDPM_PREVIEW_DIMMER_PRESET\";class _n extends on{constructor(e,t,s,n,r){super(_n.SAVE_PRESET),this._presetNumber=void 0,this._effectTypeId=void 0,this._color=void 0,this._brightness=void 0,this._apply=void 0,this._presetNumber=e,this._effectTypeId=t,this._color=s,this._brightness=n,this._apply=r}get presetNumber(){return this._presetNumber}get effectTypeId(){return this._effectTypeId}get color(){return this._color}get brightness(){return this._brightness}get apply(){return this._apply}}_n.SAVE_PRESET=\"RWSDPM_SAVE_PRESET\";class En extends on{constructor(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;super(e),this._furniId=void 0,this._furniCategory=void 0,this._offerId=void 0,this._objectData=void 0,this._furniId=t,this._furniCategory=s,this._offerId=n,this._objectData=r}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get offerId(){return this._offerId}}En.ROTATE=\"RWFAM_ROTATE\",En.MOVE=\"RWFAM_MOVE\",En.PICKUP=\"RWFAM_PICKUP\",En.EJECT=\"RWFAM_EJECT\",En.USE=\"RWFAM_USE\",En.OPEN_WELCOME_GIFT=\"RWFAM_OPEN_WELCOME_GIFT\",En.SAVE_STUFF_DATA=\"RWFAM_SAVE_STUFF_DATA\";class fn extends on{constructor(e,t,s,n){super(e),this._objectId=void 0,this._category=void 0,this._roomId=void 0,this._objectId=t,this._category=s,this._roomId=n}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}fn.REQUEST_CREDITFURNI=\"RWFWM_MESSAGE_REQUEST_CREDITFURNI\",fn.REQUEST_STICKIE=\"RWFWM_MESSAGE_REQUEST_STICKIE\",fn.REQUEST_PRESENT=\"RWFWM_MESSAGE_REQUEST_PRESENT\",fn.REQUEST_TROPHY=\"RWFWM_MESSAGE_REQUEST_TROPHY\",fn.REQUEST_TEASER=\"RWFWM_MESSAGE_REQUEST_TEASER\",fn.REQUEST_ECOTRONBOX=\"RWFWM_MESSAGE_REQUEST_ECOTRONBOX\",fn.REQUEST_DIMMER=\"RWFWM_MESSAGE_REQUEST_DIMMER\",fn.REQUEST_PLACEHOLDER=\"RWFWM_MESSAGE_REQUEST_PLACEHOLDER\",fn.REQUEST_CLOTHING_CHANGE=\"RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE\",fn.REQUEST_PLAYLIST_EDITOR=\"RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR\",fn.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING=\"RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING\",fn.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED=\"RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED\",fn.REQUEST_BADGE_DISPLAY_ENGRAVING=\"RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING\";class xn extends on{constructor(e,t){super(e),this._id=-1,this._questionId=0,this._answers=null,this._id=t}get id(){return this._id}get questionId(){return this._questionId}set questionId(e){this._questionId=e}get answers(){return this._answers}set answers(e){this._answers=e}}xn.START=\"RWPM_START\",xn.REJECT=\"RWPM_REJECT\",xn.ANSWER=\"RWPM_ANSWER\";class In extends on{constructor(e,t){super(e),this._objectId=void 0,this._objectId=t}get objectId(){return this._objectId}}In.OPEN_PRESENT=\"RWPOM_OPEN_PRESENT\";class Tn extends on{}Tn.USER_CHOOSER=\"RWRWM_USER_CHOOSER\",Tn.FURNI_CHOOSER=\"RWRWM_FURNI_CHOOSER\",Tn.ME_MENU=\"RWRWM_ME_MENU\",Tn.EFFECTS=\"RWRWM_EFFECTS\",Tn.FLOOR_EDITOR=\"RWRWM_FLOOR_EDITOR\";class Cn extends on{constructor(e,t,s){super(e),this._id=void 0,this._category=void 0,this._id=t,this._category=s}get id(){return this._id}get category(){return this._category}}Cn.GET_OBJECT_INFO=\"RWROM_GET_OBJECT_INFO\",Cn.GET_OBJECT_NAME=\"RWROM_GET_OBJECT_NAME\",Cn.SELECT_OBJECT=\"RWROM_SELECT_OBJECT\",Cn.GET_OWN_CHARACTER_INFO=\"RWROM_GET_OWN_CHARACTER_INFO\",Cn.GET_AVATAR_LIST=\"RWROM_GET_AVATAR_LIST\";class Nn extends on{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;super(e),this._objectId=void 0,this._petId=void 0,this._objectId=t,this._petId=s}get objectId(){return this._objectId}get petId(){return this._petId}}Nn.PET_PRODUCT=\"RWUPM_PET_PRODUCT\",Nn.MONSTERPLANT_SEED=\"RWUPM_MONSTERPLANT_SEED\";class Sn extends on{constructor(e,t){super(e),this._userId=void 0,this._userId=t}get userId(){return this._userId}}Sn.WHISPER_USER=\"RWUAM_WHISPER_USER\",Sn.IGNORE_USER=\"RWUAM_IGNORE_USER\",Sn.IGNORE_USER_BUBBLE=\"RWUAM_IGNORE_USER_BUBBLE\",Sn.UNIGNORE_USER=\"RWUAM_UNIGNORE_USER\",Sn.KICK_USER=\"RWUAM_KICK_USER\",Sn.BAN_USER_HOUR=\"RWUAM_BAN_USER_HOUR\",Sn.BAN_USER_DAY=\"RWUAM_BAN_USER_DAY\",Sn.BAN_USER_PERM=\"RWUAM_BAN_USER_PERM\",Sn.MUTE_USER_2MIN=\"RWUAM_MUTE_USER_2MIN\",Sn.MUTE_USER_5MIN=\"RWUAM_MUTE_USER_5MIN\",Sn.MUTE_USER_10MIN=\"RWUAM_MUTE_USER_10MIN\",Sn.RESPECT_USER=\"RWUAM_RESPECT_USER\",Sn.GIVE_RIGHTS=\"RWUAM_GIVE_RIGHTS\",Sn.TAKE_RIGHTS=\"RWUAM_TAKE_RIGHTS\",Sn.START_TRADING=\"RWUAM_START_TRADING\",Sn.OPEN_HOME_PAGE=\"RWUAM_OPEN_HOME_PAGE\",Sn.REPORT=\"RWUAM_REPORT\",Sn.PICKUP_PET=\"RWUAM_PICKUP_PET\",Sn.MOUNT_PET=\"RWUAM_MOUNT_PET\",Sn.TOGGLE_PET_RIDING_PERMISSION=\"RWUAM_TOGGLE_PET_RIDING_PERMISSION\",Sn.TOGGLE_PET_BREEDING_PERMISSION=\"RWUAM_TOGGLE_PET_BREEDING_PERMISSION\",Sn.DISMOUNT_PET=\"RWUAM_DISMOUNT_PET\",Sn.SADDLE_OFF=\"RWUAM_SADDLE_OFF\",Sn.TRAIN_PET=\"RWUAM_TRAIN_PET\",Sn.RESPECT_PET=\" RWUAM_RESPECT_PET\",Sn.TREAT_PET=\"RWUAM_TREAT_PET\",Sn.REQUEST_PET_UPDATE=\"RWUAM_REQUEST_PET_UPDATE\",Sn.START_NAME_CHANGE=\"RWUAM_START_NAME_CHANGE\",Sn.PASS_CARRY_ITEM=\"RWUAM_PASS_CARRY_ITEM\",Sn.DROP_CARRY_ITEM=\"RWUAM_DROP_CARRY_ITEM\",Sn.GIVE_CARRY_ITEM_TO_PET=\"RWUAM_GIVE_CARRY_ITEM_TO_PET\",Sn.GIVE_WATER_TO_PET=\"RWUAM_GIVE_WATER_TO_PET\",Sn.GIVE_LIGHT_TO_PET=\"RWUAM_GIVE_LIGHT_TO_PET\",Sn.REQUEST_BREED_PET=\"RWUAM_REQUEST_BREED_PET\",Sn.HARVEST_PET=\"RWUAM_HARVEST_PET\",Sn.REVIVE_PET=\"RWUAM_REVIVE_PET\",Sn.COMPOST_PLANT=\"RWUAM_COMPOST_PLANT\",Sn.GET_BOT_INFO=\"RWUAM_GET_BOT_INFO\",Sn.REPORT_CFH_OTHER=\"RWUAM_REPORT_CFH_OTHER\",Sn.AMBASSADOR_ALERT_USER=\"RWUAM_AMBASSADOR_ALERT_USER\",Sn.AMBASSADOR_KICK_USER=\"RWUAM_AMBASSADOR_KICK_USER\",Sn.AMBASSADOR_MUTE_USER_2MIN=\"RWUAM_AMBASSADOR_MUTE_2MIN\",Sn.AMBASSADOR_MUTE_USER_10MIN=\"RWUAM_AMBASSADOR_MUTE_10MIN\",Sn.AMBASSADOR_MUTE_USER_60MIN=\"RWUAM_AMBASSADOR_MUTE_60MIN\",Sn.AMBASSADOR_MUTE_USER_18HOUR=\"RWUAM_AMBASSADOR_MUTE_18HOUR\",Sn.RELATIONSHIP_NONE=\"RWUAM_RELATIONSHIP_NONE\",Sn.RELATIONSHIP_HEART=\"RWUAM_RELATIONSHIP_HEART\",Sn.RELATIONSHIP_SMILE=\"RWUAM_RELATIONSHIP_SMILE\",Sn.RELATIONSHIP_BOBBA=\"RWUAM_RELATIONSHIP_BOBBA\";class vn{constructor(){this._container=null}get container(){return this._container}set container(e){this._container=e}}class Rn extends vn{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Tn.FURNI_CHOOSER:this.processChooser();break;case Cn.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[],s=L().getRoomObjects(e,a.Ig.WALL),n=L().getRoomObjects(e,a.Ig.FLOOR);s.forEach((e=>{let s=e.type;if(s.startsWith(\"poster\"))s=nt(`poster_${s.replace(\"poster\",\"\")}_name`);else{const t=e.model.getValue(a.Og.FURNITURE_TYPE_ID),n=ee().getWallItemData(t);n&&n.name.length&&(s=n.name)}t.push(new pe(e.id,a.Ig.WALL,s))})),n.forEach((e=>{let s=e.type;const n=e.model.getValue(a.Og.FURNITURE_TYPE_ID),r=ee().getFloorItemData(n);r&&r.name.length&&(s=r.name),t.push(new pe(e.id,a.Ig.FLOOR,s))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new fe(fe.FURNI_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category!==a.Ig.WALL&&e.category!==a.Ig.FLOOR||L().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.yh.FURNI_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Tn.FURNI_CHOOSER,Cn.SELECT_OBJECT]}}class An extends vn{processEvent(e){}processWidgetMessage(e){if(e.type===Nn.MONSTERPLANT_SEED){const t=e;this.container.roomSession.useMultistateItem(t.objectId)}return null}get type(){return a.yh.FURNITURE_CONTEXT_MENU}get eventTypes(){return[a.sg.OPEN_FURNI_CONTEXT_MENU,a.sg.CLOSE_FURNI_CONTEXT_MENU]}get messageTypes(){return[Nn.MONSTERPLANT_SEED]}}class yn extends vn{processEvent(e){}processWidgetMessage(e){switch(e.type){case fn.REQUEST_CREDITFURNI:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s||!K(s))return;this.container.eventDispatcher.dispatchEvent(new ve(ve.CREDIT_FURNI_UPDATE,t.objectId,s.model.getValue(a.Og.FURNITURE_CREDIT_VALUE),s.model.getValue(a.Og.FURNITURE_TYPE_ID)+\"_\"+t.type+\"_\"+t.objectId));break}case gn.REDEEM:{const t=e;this.container.roomSession.connection.send(new a.Mb(t.objectId));break}}return null}get type(){return a.yh.FURNI_CREDIT_WIDGET}get eventTypes(){return[]}get messageTypes(){return[fn.REQUEST_CREDITFURNI,gn.REDEEM]}}class wn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;return this._lastFurniId=t.objectId,void this.container.eventDispatcher.dispatchEvent(new Re(this._lastFurniId,s.getLocation().z))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new Re(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.CUSTOM_STACK_HEIGHT}get eventTypes(){return[]}get messageTypes(){return[]}}class kn extends vn{processEvent(e){switch(e.type){case a.Vg.ROOM_DIMMER_PRESETS:{const t=e,s=new we(we.PRESETS);s.selectedPresetId=t.selectedPresetId;let n=0;for(;n<t.presetCount;){const e=t.getPreset(n);e&&s.setPresetValues(e.id,e.type,e.color,e.brightness),n++}return void this.container.eventDispatcher.dispatchEvent(s)}case a.ng.ROOM_COLOR:{const t=e;return void this.container.eventDispatcher.dispatchEvent(new ke(t.state,t.presetId,t.effectId,t.color,t.brightness))}case a.sg.REMOVE_DIMMER:return void this.container.eventDispatcher.dispatchEvent(new we(we.HIDE))}}processWidgetMessage(e){switch(e.type){case fn.REQUEST_DIMMER:this.canOpenWidget()&&this.container.roomSession.requestMoodlightSettings();break;case _n.SAVE_PRESET:if(this.canOpenWidget()){const t=e;this.container.roomSession.updateMoodlightData(t.presetNumber,t.effectTypeId,t.color,t.brightness,t.apply)}break;case mn.CHANGE_STATE:this.canOpenWidget()&&this.container.roomSession.toggleMoodlightState();break;case pn.PREVIEW_DIMMER_PRESET:{const t=this.container.roomSession.roomId,s=e;L().updateObjectRoomColor(t,s.color,s.brightness,s.bgOnly);break}}return null}canOpenWidget(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=a.eg.GUEST||ee().isModerator}get type(){return a.yh.ROOM_DIMMER}get eventTypes(){return[a.Vg.ROOM_DIMMER_PRESETS,a.ng.ROOM_COLOR,a.sg.REMOVE_DIMMER]}get messageTypes(){return[fn.REQUEST_DIMMER,_n.SAVE_PRESET,mn.CHANGE_STATE,pn.PREVIEW_DIMMER_PRESET]}}class Dn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Og.FURNITURE_DATA),r=JSON.parse(n);return void this.container.eventDispatcher.dispatchEvent(new De(s.id,r))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new De(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.EXTERNAL_IMAGE}get eventTypes(){return[]}get messageTypes(){return[]}}class Un extends vn{processEvent(e){if(e&&e.type===a.sg.REQUEST_INTERNAL_LINK){const t=e,s=L();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Og.FURNITURE_DATA)[Un.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Og.FURNITURE_INTERNAL_LINK)),e&&e.length&&y(e)}}}processWidgetMessage(e){return null}get type(){return a.yh.INTERNAL_LINK}get eventTypes(){return[a.sg.REQUEST_INTERNAL_LINK]}get messageTypes(){return[]}}Un.INTERNALLINK=\"internalLink\";class Pn extends vn{processEvent(e){if(e.type!==a.sg.REQUEST_MANNEQUIN);else{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model,r=n.getValue(a.Og.FURNITURE_MANNEQUIN_FIGURE),c=n.getValue(a.Og.FURNITURE_MANNEQUIN_GENDER),i=n.getValue(a.Og.FURNITURE_MANNEQUIN_NAME);this.container.eventDispatcher.dispatchEvent(new He(He.MANNEQUIN_UPDATE,s.id,r,c,i))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.MANNEQUIN}get eventTypes(){return[a.sg.REQUEST_MANNEQUIN]}get messageTypes(){return[]}}class Mn extends vn{constructor(){super(...arguments),this._lastFurniId=-1,this._name=null}processEvent(e){if(e.type!==a.dh.RSPE_PRESENT_OPENED);else{const t=e;let s=null;t.itemType===er.FLOOR?s=ee().getFloorItemData(t.classId):t.itemType===er.WALL&&(s=ee().getWallItemData(t.classId));let n=!1;if(t.placedInRoom){const e=L().getRoomObject(this.container.roomSession.roomId,t.placedItemId,a.Ig.FLOOR);e&&(n=K(e))}let r=null,c=null;switch(t.itemType){case er.WALL:if(s)switch(s.className){case Mn.FLOOR:c=new Be(Be.CONTENTS_FLOOR,0,nt(\"inventory.furni.item.floor.name\"),n);break;case Mn.LANDSCAPE:c=new Be(Be.CONTENTS_LANDSCAPE,0,nt(\"inventory.furni.item.landscape.name\"),n);break;case Mn.WALLPAPER:c=new Be(Be.CONTENTS_WALLPAPER,0,nt(\"inventory.furni.item.wallpaper.name\"),n);break;case Mn.POSTER:{const e=t.productCode;let i=null;0===e.indexOf(\"poster\")&&(i=e.replace(\"poster\",\"\")),r=L().getFurnitureWallIconUrl(t.classId,i);const a=ee().getProductData(e);a?this._name=a.name:s&&(this._name=s.name),c=new Be(Be.CONTENTS,0,this._name,n,r);break}default:r=L().getFurnitureWallIconUrl(t.classId),s&&(this._name=s.name),c=new Be(Be.CONTENTS,0,this._name,n,r)}break;case er.HABBO_CLUB:c=new Be(Be.CONTENTS_CLUB,0,nt(\"widget.furni.present.hc\"),!1);break;default:{if(t.placedItemType===er.PET){const e=t.petFigureString;if(e&&e.length){const t=new a.of(e),s=L().getRoomObjectPetImage(t.typeId,t.paletteId,t.color,new a.Ui(90),64,this,!0,0,t.customParts);s&&(r=s.getImage().src)}}if(!r){const e=L().getFurnitureFloorImage(t.classId,new a.Ui(90),64,this);e&&(r=e.getImage().src)}const e=ee().getProductData(t.productCode);this._name=e?e.name:s.name,r&&(c=new Be(Be.CONTENTS,0,this._name,n,r));break}}c&&(c.classId=t.classId,c.itemType=t.itemType,c.placedItemId=t.placedItemId,c.placedInRoom=t.placedInRoom,c.placedItemType=t.placedItemType,this.container.eventDispatcher.dispatchEvent(c))}}processWidgetMessage(e){switch(e.type){case fn.REQUEST_PRESENT:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return null;this._lastFurniId=t.objectId;const n=s.model.getValue(a.Og.FURNITURE_DATA)||\"\",r=s.model.getValue(a.Og.FURNITURE_PURCHASER_NAME),c=s.model.getValue(a.Og.FURNITURE_PURCHASER_FIGURE),i=s.model.getValue(a.Og.FURNITURE_TYPE_ID),o=s.model.getValue(a.Og.FURNITURE_EXTRAS),l=L().getFurnitureFloorImage(i,new a.Ui(180),64,null,0,o);this.container.eventDispatcher.dispatchEvent(new Be(Be.PACKAGEINFO,t.objectId,n,K(s),l.getImage().src,r,c));break}case In.OPEN_PRESENT:{const t=e;if(t.objectId!==this._lastFurniId)return null;this.container.roomSession.openGift(t.objectId),L().changeObjectModelData(L().activeRoomId,t.objectId,a.Ig.FLOOR,a.Og.FURNITURE_DISABLE_PICKING_ANIMATION,1);break}}return null}imageReady(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;s?n=s.src:t&&(n=a.Sh.generateImageUrl(t)),this.container.eventDispatcher.dispatchEvent(new Be(Be.CONTENTS_IMAGE,0,this._name,!1,n))}imageFailed(e){}get type(){return a.yh.FURNI_PRESENT_WIDGET}get eventTypes(){return[a.dh.RSPE_PRESENT_OPENED]}get messageTypes(){return[fn.REQUEST_PRESENT,In.OPEN_PRESENT]}}Mn.FLOOR=\"floor\",Mn.WALLPAPER=\"wallpaper\",Mn.LANDSCAPE=\"landscape\",Mn.POSTER=\"poster\";class Ln extends vn{onRoomInfo(e){}processEvent(e){if(e&&e.type===a.sg.REQUEST_ROOM_LINK){const t=e,s=L();if(!t||!s)return;const n=s.getRoomObject(t.roomId,t.objectId,t.category);if(n){let e=n.model.getValue(a.Og.FURNITURE_DATA)[Ln.INTERNALLINK];e&&e.length||(e=n.model.getValue(a.Og.FURNITURE_INTERNAL_LINK)),e&&e.length&&y(\"navigator/goto/\"+e)}}}processWidgetMessage(e){return null}get type(){return a.yh.ROOM_LINK}get eventTypes(){return[a.sg.REQUEST_ROOM_LINK]}get messageTypes(){return[]}}Ln.INTERNALLINK=\"internalLink\";class Fn extends vn{constructor(){super(...arguments),this._lastFurniId=-1}processEvent(e){switch(e.type){case a.sg.OPEN_WIDGET:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;this._lastFurniId=t.objectId;const n=ee().hasSecurity(a.Hh.EMPLOYEE)||K(s);return this.container.eventDispatcher.dispatchEvent(new ze(s.id,n)),void $n(new a.Dc(this._lastFurniId))}case a.sg.CLOSE_WIDGET:if(e.objectId!==this._lastFurniId)return;return void this.container.eventDispatcher.dispatchEvent(new ze(-1))}}processWidgetMessage(e){return e.type,null}get type(){return a.yh.YOUTUBE}get eventTypes(){return[]}get messageTypes(){return[]}}Fn.CONTROL_COMMAND_PREVIOUS_VIDEO=0,Fn.CONTROL_COMMAND_NEXT_VIDEO=1,Fn.CONTROL_COMMAND_PAUSE_VIDEO=2,Fn.CONTROL_COMMAND_CONTINUE_VIDEO=3;class Hn extends vn{processEvent(e){const t=e;let s;switch(e.type){case a.ch.OFFER:s=new Te(Te.OFFER,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.ch.ERROR:s=new Te(Te.ERROR,t.id),s.summary=t.summary,s.headline=t.headline;break;case a.ch.CONTENT:s=new Te(Te.CONTENT,t.id),s.startMessage=t.startMessage,s.endMessage=t.endMessage,s.numQuestions=t.numQuestions,s.questionArray=t.questionArray,s.npsPoll=t.npsPoll}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){const t=e;switch(e.type){case xn.START:this.container.roomSession.sendPollStartMessage(t.id);break;case xn.REJECT:this.container.roomSession.sendPollRejectMessage(t.id);break;case xn.ANSWER:this.container.roomSession.sendPollAnswerMessage(t.id,t.questionId,t.answers)}return null}get type(){return a.yh.ROOM_POLL}get eventTypes(){return[a.ch.OFFER,a.ch.ERROR,a.ch.CONTENT]}get messageTypes(){return[xn.ANSWER,xn.REJECT,xn.START]}}class Bn{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}}Bn.RELATIONSHIP_NONE=0,Bn.RELATIONSHIP_HEART=1,Bn.RELATIONSHIP_SMILE=2,Bn.RELATIONSHIP_BOBBA=3;class Gn extends vn{processEvent(e){switch(e.type){case a.fh.USER_DATA_UPDATED:return void this.container.eventDispatcher.dispatchEvent(new Ye);case a.Ug.RSDE_DANCE:const t=e;let s=!1;const n=this.container.roomSession.userDataManager.getUserData(ee().userId);return n&&n.roomIndex===t.roomIndex&&(s=0!==t.danceId),void this.container.eventDispatcher.dispatchEvent(new Ae(s));case a.tg.USE_PRODUCT_FROM_INVENTORY:return;case a.tg.USE_PRODUCT_FROM_ROOM:return void this.processUsableRoomObject(e.objectId);case a.bh.PET_STATUS_UPDATE:return void this.processRoomSessionPetStatusUpdateEvent(e)}}processWidgetMessage(e){let t=0;switch(e instanceof Sn&&(t=e.userId),e.type){case Cn.GET_OWN_CHARACTER_INFO:this.processOwnCharacterInfo();break;case Sn.START_NAME_CHANGE:case Sn.REQUEST_PET_UPDATE:break;case Nn.PET_PRODUCT:{const t=e;this.container.roomSession.usePetProduct(t.objectId,t.petId);break}case Sn.HARVEST_PET:this.container.roomSession.harvestPet(t);break;case Sn.COMPOST_PLANT:this.container.roomSession.compostPlant(t);break;case On.DANCE:{const t=e;this.container.roomSession.sendDanceMessage(t.style);break}case ln.AVATAR_EXPRESSION:{const t=e;this.container.roomSession.sendExpressionMessage(t.animation.ordinal);break}case dn.CHANGE_POSTURE:{const t=e;this.container.roomSession.sendPostureMessage(t.posture);break}case Sn.RELATIONSHIP_NONE:$n(new a.Oh(t,Bn.RELATIONSHIP_NONE));break;case Sn.RELATIONSHIP_HEART:$n(new a.Oh(t,Bn.RELATIONSHIP_HEART));break;case Sn.RELATIONSHIP_SMILE:$n(new a.Oh(t,Bn.RELATIONSHIP_SMILE));break;case Sn.RELATIONSHIP_BOBBA:$n(new a.Oh(t,Bn.RELATIONSHIP_BOBBA))}return null}processOwnCharacterInfo(){const e=ee().userId,t=ee().userName,s=ee().canChangeName,n=this.container.roomSession.userDataManager.getUserData(e);n&&this.container.eventDispatcher.dispatchEvent(new Ee(e,t,n.type,n.roomIndex,s))}processUsableRoomObject(e){const t=this.container.roomSession.roomId,s=L().getRoomObject(t,e,a.Ig.FLOOR);if(!s||!K(s))return;const n=s.model.getValue(a.Og.FURNITURE_OWNER_ID),r=s.model.getValue(a.Og.FURNITURE_TYPE_ID),c=ee().getFloorItemData(r),i=c.customParams.split(\" \"),o=i.length?parseInt(i[0]):-1;-1!==o&&this.processUseableProduct(t,e,o,c.specialType,n)}processUseableProduct(e,t,s,n,r){let c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;const i=[],o=L().getRoomObjects(e,a.Ig.UNIT);for(const l of o){const e=this.container.roomSession.userDataManager.getUserDataByIndex(l.id);let o=!1;if(e&&e.type===a.Mg.PET){if(e.ownerId===r){e.hasSaddle&&n===Rs.PET_SADDLE&&(o=!0);const r=e.figure.split(\" \");if((r.length?parseInt(r[0]):-1)===s){if(n===Rs.MONSTERPLANT_REVIVAL&&!e.canRevive)continue;if(n===Rs.MONSTERPLANT_REBREED&&(e.petLevel<7||e.canRevive||e.canBreed))continue;if(n===Rs.MONSTERPLANT_FERTILIZE&&(e.petLevel>=7||e.canRevive))continue;i.push(new $e(e.roomIndex,a.Ig.UNIT,e.name,t,l.id,c,o))}}}else;}i.length&&this.container.eventDispatcher.dispatchEvent(new Ke(Ke.USE_PRODUCT_BUBBLES,i))}processRoomSessionPetStatusUpdateEvent(e){}get type(){return a.yh.AVATAR_INFO}get eventTypes(){return[a.fh.USER_DATA_UPDATED,a.Ug.RSDE_DANCE,a.tg.USE_PRODUCT_FROM_INVENTORY,a.tg.USE_PRODUCT_FROM_ROOM,a.bh.PET_STATUS_UPDATE]}get messageTypes(){return[Cn.GET_OWN_CHARACTER_INFO,Sn.START_NAME_CHANGE,Sn.REQUEST_PET_UPDATE,Nn.PET_PRODUCT,Sn.REQUEST_BREED_PET,Sn.HARVEST_PET,Sn.REVIVE_PET,Sn.COMPOST_PLANT,On.DANCE,ln.AVATAR_EXPRESSION,dn.CHANGE_POSTURE,Sn.RELATIONSHIP_NONE,Sn.RELATIONSHIP_HEART,Sn.RELATIONSHIP_SMILE,Sn.RELATIONSHIP_BOBBA]}}class Wn extends vn{constructor(){super(...arguments),this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map}processEvent(e){if(e.type!==a.Tg.CHAT_EVENT);else{const t=e,s=L().getRoomObject(t.session.roomId,t.objectId,a.Ig.UNIT),n=(s?s.getLocation():new a.Ui,je(t.session.roomId,null===s||void 0===s?void 0:s.id,a.Ig.UNIT)),r=s?this.container.roomSession.userDataManager.getUserDataByIndex(t.objectId):new a.th(-1);let c=\"\",i=0,o=null,l=t.chatType,u=t.style,d=0,h=-1,j=t.message;if(r){d=r.type;const e=r.figure;switch(d){case a.Mg.PET:o=this.getPetImage(e,2,!0,64,s.model.getValue(a.Og.FIGURE_POSTURE)),h=new a.of(e).typeId;break;case a.Mg.USER:o=this.getUserImage(e);break;case a.Mg.RENTABLE_BOT:case a.Mg.BOT:u=a.Rh.BOT}i=this._avatarColorCache.get(e),c=r.name}switch(l){case a.Tg.CHAT_TYPE_RESPECT:j=nt(\"widgets.chatbubble.respect\",[\"username\"],[c]),ur().getValue(\"respect.options\").enabled&&Ss(ur().getValue(\"respect.options\").sound);break;case a.Tg.CHAT_TYPE_PETREVIVE:case a.Tg.CHAT_TYPE_PET_REBREED_FERTILIZE:case a.Tg.CHAT_TYPE_PET_SPEED_FERTILIZE:{let e=\"widget.chatbubble.petrevived\";l===a.Tg.CHAT_TYPE_PET_REBREED_FERTILIZE?e=\"widget.chatbubble.petrefertilized;\":l===a.Tg.CHAT_TYPE_PET_SPEED_FERTILIZE&&(e=\"widget.chatbubble.petspeedfertilized\");let n=null;if(L().getRoomObject(t.session.roomId,t.extraParam,a.Ig.UNIT)){const e=this.container.roomSession.userDataManager.getUserDataByIndex(s.id);e&&(n=e.name)}j=nt(e,[\"petName\",\"userName\"],[c,n]);break}case a.Tg.CHAT_TYPE_PETRESPECT:j=nt(\"widget.chatbubble.petrespect\",[\"petname\"],[c]);break;case a.Tg.CHAT_TYPE_PETTREAT:j=nt(\"widget.chatbubble.pettreat\",[\"petname\"],[c]);break;case a.Tg.CHAT_TYPE_HAND_ITEM_RECEIVED:j=nt(\"widget.chatbubble.handitem\",[\"username\",\"handitem\"],[c,nt(\"handitem\"+t.extraParam)]);break;case a.Tg.CHAT_TYPE_MUTE_REMAINING:j=nt(\"widget.chatbubble.mutetime\",[\"hours\",\"minutes\",\"seconds\"],[(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),(t.extraParam%60).toString()]);break}this.container.eventDispatcher.dispatchEvent(new Ne(Ne.CHAT_EVENT,r.roomIndex,j,c,a.Ig.UNIT,d,h,n.x,n.y,o,i,t.session.roomId,l,u,[]))}}processWidgetMessage(e){return null}getUserImage(e){let t=this._avatarImageCache.get(e);return t||(t=this.setFigureImage(e)),t}setFigureImage(e){const t=S().createAvatarImage(e,a.q.LARGE,null,this);if(!t)return;const s=t.getCroppedImage(a.r.HEAD),n=t.getPartColor(a.p.CHEST);return this._avatarColorCache.set(e,n&&n.rgb||16777215),t.dispose(),this._avatarImageCache.set(e,s.src),s.src}getPetImage(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=this._petImageCache.get(e+r);if(c)return c;const i=new a.of(e),o=i.typeId,l=L().getRoomObjectPetImage(o,i.paletteId,i.color,new a.Ui(45*t),n,null,!1,0,i.customParts,r);return l&&(c=a.Sh.generateImageUrl(l.data),this._petImageCache.set(e+r,c)),c}resetFigure(e){this.setFigureImage(e)}dispose(){}get disposed(){return!1}get type(){return a.yh.CHAT_WIDGET}get eventTypes(){return[a.Tg.CHAT_EVENT]}get messageTypes(){return[]}}class Vn extends vn{processEvent(e){if(e.type===a.Tg.FLOOD_EVENT){const t=e;this.container.eventDispatcher.dispatchEvent(new xe(parseInt(t.message)))}}processWidgetMessage(e){switch(e.type){case bn.TYPING_STATUS:{const t=e;this.container.roomSession.sendChatTypingMessage(t.isTyping);break}case hn.MESSAGE_CHAT:{const t=e;if(\"\"===t.text)return null;let s=t.text;const n=s.split(\" \");if(n.length>0){const e=n[0];let r=\"\";if(n.length>1&&(r=n[1]),\":\"===e.charAt(0)&&\"x\"===r){const e=L().selectedAvatarId;if(e>-1){const n=this.container.roomSession.userDataManager.getUserDataByIndex(e);n&&(r=n.name,s=t.text.replace(\" x\",\" \"+n.name))}}switch(e.toLowerCase()){case\":shake\":return a.lh.init(2500,5e3),a.lh.turnVisualizationOn(),null;case\":rotate\":return a.Rg.init(2500,5e3),a.Rg.turnVisualizationOn(),null;case\":d\":case\";d\":te()===a.Ed.VIP&&this.container.roomSession.sendExpressionMessage(a.n.LAUGH.ordinal);break;case\"o/\":case\"_o/\":return this.container.roomSession.sendExpressionMessage(a.n.WAVE.ordinal),null;case\":kiss\":if(te()===a.Ed.VIP)return this.container.roomSession.sendExpressionMessage(a.n.BLOW.ordinal),null;break;case\":jump\":if(te()===a.Ed.VIP)return this.container.roomSession.sendExpressionMessage(a.n.JUMP.ordinal),null;break;case\":idle\":return this.container.roomSession.sendExpressionMessage(a.n.IDLE.ordinal),null;case\"_b\":return this.container.roomSession.sendExpressionMessage(a.n.RESPECT.ordinal),null;case\":sign\":return this.container.roomSession.sendSignMessage(parseInt(r)),null;case\":iddqd\":case\":flip\":return L().events.dispatchEvent(new a.Bh(this.container.roomSession.roomId,-1,!0)),null;case\":zoom\":return L().events.dispatchEvent(new a.Bh(this.container.roomSession.roomId,parseFloat(r),!1)),null;case\":screenshot\":const e=L().createTextureFromRoom(this.container.roomSession.roomId,1),t=new Image;t.src=a.Sh.generateImageUrl(e);return window.open(\"\").document.write(t.outerHTML),null;case\":pickall\":return(this.container.roomSession.isRoomOwner||ee().isModerator)&&Pr.confirm(nt(\"room.confirm.pick_all\"),(()=>{ee().sendSpecialCommandMessage(\":pickall\")}),null,null,null,nt(\"generic.alert.title\")),null;case\":furni\":return this.container.processWidgetMessage(new Tn(Tn.FURNI_CHOOSER)),null;case\":chooser\":return this.container.processWidgetMessage(new Tn(Tn.USER_CHOOSER)),null;case\":floor\":case\":bcfloor\":return this.container.roomSession.controllerLevel>=a.eg.ROOM_OWNER&&y(\"floor-editor/show\"),null;case\":togglefps\":return C().ticker.maxFPS>0?C().ticker.maxFPS=0:C().ticker.maxFPS=k(\"system.animation.fps\"),null;case\":client\":case\":nitro\":case\":billsonnn\":return Pr.showNitroAlert(),null;case\":settings\":return(this.container.roomSession.isRoomOwner||ee().isModerator)&&$n(new a.ih(this.container.roomSession.roomId)),null}}const r=t.styleId;if(this.container&&this.container.roomSession)switch(t.chatType){case hn.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(s,r);break;case hn.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(s,r);break;case hn.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(t.recipientName,s,r)}break}case jn.MESSAGE_SELECT_AVATAR:{const t=e;L().setSelectedAvatar(t.roomId,t.objectId);break}}return null}get type(){return a.yh.CHAT_INPUT_WIDGET}get eventTypes(){return[a.Tg.FLOOD_EVENT]}get messageTypes(){return[bn.TYPING_STATUS,hn.MESSAGE_CHAT,jn.MESSAGE_SELECT_AVATAR]}}class qn{constructor(e,t){this._roomSession=void 0,this._eventDispatcher=void 0,this._handlers=[],this._eventMap=new Map,this._messageMap=new Map,this._roomSession=e,this._eventDispatcher=t}registerHandler(e){const t=e.eventTypes;if(t.push(a.sg.OPEN_WIDGET,a.sg.CLOSE_WIDGET),t&&t.length)for(const n of t){if(!n)continue;let t=this._eventMap.get(n);t||(t=[],this._eventMap.set(n,t)),t.push(e)}const s=e.messageTypes;if(s&&s.length)for(const n of s){if(!n)continue;let t=this._messageMap.get(n);t||(t=[],this._messageMap.set(n,t)),t.push(e)}e.container=this,this._handlers.push(e)}processEvent(e){const t=this._eventMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;let t=!0;e.type!==a.sg.OPEN_WIDGET&&e.type!==a.sg.CLOSE_WIDGET||e instanceof a.sg&&(t=s.type===e.widget),t&&s.processEvent(e)}}processWidgetMessage(e){const t=this._messageMap.get(e.type);if(!t||!t.length)return null;for(const s of t){if(!s)continue;const t=s.processWidgetMessage(e);if(t)return t}return null}get roomSession(){return this._roomSession}get eventDispatcher(){return this._eventDispatcher}}class Yn{}Yn.WATER=0,Yn.LIGHT=1;class zn extends vn{processEvent(e){switch(e.type){case a.ah.PET_INFO:return void this.processPetInfoEvent(e);case a.eh.RSUBE_BADGES:case a.gh.USER_FIGURE:case a.Zg.FAVOURITE_GROUP_UPDATE:return void this.container.eventDispatcher.dispatchEvent(e)}}processWidgetMessage(e){let t=0,s=null,n=0,r=0;if(e instanceof Sn){t=e.userId;if(s=[Sn.REQUEST_PET_UPDATE,Sn.RESPECT_PET,Sn.PICKUP_PET,Sn.MOUNT_PET,Sn.TOGGLE_PET_RIDING_PERMISSION,Sn.TOGGLE_PET_BREEDING_PERMISSION,Sn.DISMOUNT_PET,Sn.SADDLE_OFF,Sn.GIVE_CARRY_ITEM_TO_PET,Sn.GIVE_WATER_TO_PET,Sn.GIVE_LIGHT_TO_PET,Sn.TREAT_PET].indexOf(e.type)>=0?this.container.roomSession.userDataManager.getPetData(t):this.container.roomSession.userDataManager.getUserData(t),!s)return null}else e instanceof En&&(n=e.furniId,r=e.furniCategory);switch(e.type){case Cn.GET_OBJECT_NAME:return this.processObjectNameMessage(e);case Cn.GET_OBJECT_INFO:return this.processObjectInfoMessage(e);case Sn.RESPECT_USER:ee().giveRespect(t);break;case Sn.RESPECT_PET:ee().givePetRespect(t);break;case Sn.WHISPER_USER:this.container.eventDispatcher.dispatchEvent(new Se(Se.WHISPER,s.name));break;case Sn.IGNORE_USER:ee().ignoreUser(s.name);break;case Sn.UNIGNORE_USER:ee().unignoreUser(s.name);break;case Sn.KICK_USER:this.container.roomSession.sendKickMessage(e.userId);break;case Sn.BAN_USER_DAY:case Sn.BAN_USER_HOUR:case Sn.BAN_USER_PERM:this.container.roomSession.sendBanMessage(e.userId,e.type);break;case Sn.MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(e.userId,2);break;case Sn.MUTE_USER_5MIN:this.container.roomSession.sendMuteMessage(e.userId,5);break;case Sn.MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(e.userId,10);break;case Sn.GIVE_RIGHTS:this.container.roomSession.sendGiveRightsMessage(e.userId);break;case Sn.TAKE_RIGHTS:this.container.roomSession.sendTakeRightsMessage(e.userId);break;case Sn.START_TRADING:$n(new a.ii(s.roomIndex));break;case Sn.PICKUP_PET:this.container.roomSession.pickupPet(t);break;case Sn.MOUNT_PET:this.container.roomSession.mountPet(t);break;case Sn.TOGGLE_PET_RIDING_PERMISSION:this.container.roomSession.togglePetRiding(t);break;case Sn.TOGGLE_PET_BREEDING_PERMISSION:this.container.roomSession.togglePetBreeding(t);break;case Sn.DISMOUNT_PET:this.container.roomSession.dismountPet(t);break;case Sn.SADDLE_OFF:this.container.roomSession.removePetSaddle(t);break;case Sn.PASS_CARRY_ITEM:$n(new a.rh(t));break;case Sn.GIVE_CARRY_ITEM_TO_PET:$n(new a.sh(t));break;case Sn.GIVE_WATER_TO_PET:$n(new a.uf(t,Yn.WATER));break;case Sn.GIVE_LIGHT_TO_PET:$n(new a.uf(t,Yn.LIGHT));break;case Sn.TREAT_PET:$n(new a.tf(t));break;case Sn.DROP_CARRY_ITEM:$n(new a.qh);break;case Sn.REQUEST_PET_UPDATE:return void this.container.roomSession.userDataManager.requestPetInfo(t);case Sn.REPORT:return;case Sn.REPORT_CFH_OTHER:return void Vt(new ft(t));case Sn.AMBASSADOR_ALERT_USER:return void this.container.roomSession.sendAmbassadorAlertMessage(t);case Sn.AMBASSADOR_KICK_USER:return void this.container.roomSession.sendKickMessage(t);case Sn.AMBASSADOR_MUTE_USER_2MIN:return void this.container.roomSession.sendMuteMessage(t,2);case Sn.AMBASSADOR_MUTE_USER_10MIN:return void this.container.roomSession.sendMuteMessage(t,10);case Sn.AMBASSADOR_MUTE_USER_60MIN:return void this.container.roomSession.sendMuteMessage(t,60);case Sn.AMBASSADOR_MUTE_USER_18HOUR:return void this.container.roomSession.sendMuteMessage(t,1080);case En.ROTATE:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_ROTATE_POSITIVE);case En.MOVE:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_MOVE);case En.PICKUP:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_PICKUP);case En.EJECT:return void L().processRoomObjectOperation(n,r,a.Kg.OBJECT_EJECT);case En.USE:return void L().useRoomObject(n,r);case En.SAVE_STUFF_DATA:{const t=e;if(!t.objectData)return;const s=new Map,c=t.objectData.split(\"\\t\");if(c)for(const e of c){const[t,n]=e.split(\"=\",2);s.set(t,n)}return void L().modifyRoomObjectDataWithMap(n,r,a.Kg.OBJECT_SAVE_STUFF_DATA,s)}case un.CHANGE_MOTTO:return void this.container.roomSession.sendMottoMessage(e.motto)}return null}processObjectNameMessage(e){let t=-1,s=null,n=0;switch(e.category){case a.Ig.FLOOR:case a.Ig.WALL:{const n=L().getRoomObject(this.container.roomSession.roomId,e.id,e.category);if(!n)break;if(0===n.type.indexOf(\"poster\"))s=nt(\"${poster_\"+parseInt(n.type.replace(\"poster\",\"\"))+\"_name}\");else{let r=null;const c=n.model.getValue(a.Og.FURNITURE_TYPE_ID);if(e.category===a.Ig.FLOOR?r=ee().getFloorItemData(c):e.category===a.Ig.WALL&&(r=ee().getWallItemData(c)),!r)break;t=r.id,s=r.name}break}case a.Ig.UNIT:{const r=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!r)break;t=r.webID,s=r.name,n=r.type;break}}return s&&this.container.eventDispatcher.dispatchEvent(new Ie(Ie.TYPE,e.id,e.category,t,s,n)),null}processObjectInfoMessage(e){const t=this.container.roomSession.roomId;switch(e.category){case a.Ig.FLOOR:case a.Ig.WALL:this.processFurniInfoMessage(e,t);break;case a.Ig.UNIT:{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);if(!s)break;switch(s.type){case a.Mg.PET:this.container.roomSession.userDataManager.requestPetInfo(s.webID);break;case a.Mg.USER:this.processUserInfoMessage(e,t,s);break;case a.Mg.BOT:this.processBotInfoMessage(e,t,s);break;case a.Mg.RENTABLE_BOT:this.processRentableBotInfoMessage(e,t,s)}}}return null}processFurniInfoMessage(e,t){const s=new Pe(Pe.FURNI);s.id=e.id,s.category=e.category;const n=L().getRoomObject(t,e.id,e.category);if(!n)return;const r=n.model;r.getValue(a.zh.INFOSTAND_EXTRA_PARAM)&&(s.extraParam=r.getValue(a.zh.INFOSTAND_EXTRA_PARAM));const c=r.getValue(a.Og.FURNITURE_DATA_FORMAT),i=a.gf.getData(c);i.initializeFromRoomObjectModel(r),s.stuffData=i;const o=n.type;if(0===o.indexOf(\"poster\")){const e=parseInt(o.replace(\"poster\",\"\"));s.name=nt(\"${poster_\"+e+\"_name}\"),s.description=nt(\"${poster_\"+e+\"_desc}\")}else{const t=r.getValue(a.Og.FURNITURE_TYPE_ID);let n=null;e.category===a.Ig.FLOOR?n=ee().getFloorItemData(t):e.category===a.Ig.WALL&&(n=ee().getWallItemData(t)),n&&(s.name=n.name,s.description=n.description,s.purchaseOfferId=n.purchaseOfferId,s.purchaseCouldBeUsedForBuyout=n.purchaseCouldBeUsedForBuyout,s.rentOfferId=n.rentOfferId,s.rentCouldBeUsedForBuyout=n.rentCouldBeUsedForBuyout,s.availableForBuildersClub=n.availableForBuildersClub,s.tileSizeX=n.tileSizeX,s.tileSizeY=n.tileSizeY,Vt(new Ut(s.id,s.category)))}o.indexOf(\"post_it\")>-1&&(s.isStickie=!0);const l=r.getValue(a.Og.FURNITURE_EXPIRY_TIME),u=r.getValue(a.Og.FURNITURE_EXPIRTY_TIMESTAMP);s.expiration=l<0?l:Math.max(0,l-(C().time-u)/1e3);let d=L().getRoomObjectImage(t,e.id,e.category,new a.Ui(180),64,null);(!d.data||d.data.width>140||d.data.height>200)&&(d=L().getRoomObjectImage(t,e.id,e.category,new a.Ui(180),1,null)),s.image=d.getImage(),s.isWallItem=e.category===a.Ig.WALL,s.isRoomOwner=this.container.roomSession.isRoomOwner,s.roomControllerLevel=this.container.roomSession.controllerLevel,s.isAnyRoomController=ee().isModerator,s.ownerId=r.getValue(a.Og.FURNITURE_OWNER_ID),s.ownerName=r.getValue(a.Og.FURNITURE_OWNER_NAME),s.usagePolicy=r.getValue(a.Og.FURNITURE_USAGE_POLICY);const h=r.getValue(a.Og.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==h&&(s.groupId=h),K(n)&&(s.isOwner=!0),this.container.eventDispatcher.dispatchEvent(s)}processUserInfoMessage(e,t,s){let n=Fe.OWN_USER;s.webID!==ee().userId&&(n=Fe.PEER);const r=new Fe(n);r.isSpectatorMode=this.container.roomSession.isSpectator,r.name=s.name,r.motto=s.custom,r.achievementScore=s.activityPoints,r.webID=s.webID,r.roomIndex=s.roomIndex,r.userType=a.Mg.USER;const c=L().getRoomObject(t,s.roomIndex,e.category);if(c&&(r.carryItem=c.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n===Fe.OWN_USER&&(r.allowNameChange=ee().canChangeName),r.amIOwner=this.container.roomSession.isRoomOwner,r.isGuildRoom=this.container.roomSession.isGuildRoom,r.roomControllerLevel=this.container.roomSession.controllerLevel,r.amIAnyRoomController=ee().isModerator,r.isAmbassador=ee().isAmbassador,n===Fe.PEER){if(c){const e=c.model.getValue(a.Og.FIGURE_FLAT_CONTROL);null!==e&&(r.targetRoomControllerLevel=e),r.canBeMuted=this.canBeMuted(r),r.canBeKicked=this.canBeKicked(r),r.canBeBanned=this.canBeBanned(r)}r.isIgnored=ee().isUserIgnored(s.name),r.respectLeft=ee().respectsLeft;const e=ee().isSystemShutdown,t=this.container.roomSession.tradeMode;if(e)r.canTrade=!1;else switch(t){case a.oh.ROOM_CONTROLLER_REQUIRED:{const e=r.roomControllerLevel!==a.eg.NONE&&r.roomControllerLevel!==a.eg.GUILD_MEMBER,t=r.targetRoomControllerLevel!==a.eg.NONE&&r.targetRoomControllerLevel!==a.eg.GUILD_MEMBER;r.canTrade=e||t;break}case a.oh.NO_TRADING:r.canTrade=!0;break;default:r.canTrade=!1}r.canTradeReason=Fe.TRADE_REASON_OK,e&&(r.canTradeReason=Fe.TRADE_REASON_SHUTDOWN),t!==a.oh.FREE_TRADING&&(r.canTradeReason=Fe.TRADE_REASON_NO_TRADING)}r.groupId=s.groupId,r.groupBadgeId=ee().getGroupBadge(r.groupId),r.groupName=s.groupName,r.badges=this.container.roomSession.userDataManager.getUserBadges(s.webID),r.figure=s.figure,this.container.eventDispatcher.dispatchEvent(r)}processBotInfoMessage(e,t,s){const n=new Fe(Fe.BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.userType=s.type;const r=L().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.isGuildRoom=this.container.roomSession.isGuildRoom,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=ee().isModerator,n.isAmbassador=ee().isAmbassador,n.badges=[Fe.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processRentableBotInfoMessage(e,t,s){const n=new Le(Le.RENTABLE_BOT);n.name=s.name,n.motto=s.custom,n.webID=s.webID,n.roomIndex=s.roomIndex,n.ownerId=s.ownerId,n.ownerName=s.ownerName,n.botSkills=s.botSkills;const r=L().getRoomObject(t,s.roomIndex,e.category);r&&(n.carryItem=r.model.getValue(a.Og.FIGURE_CARRY_OBJECT)||0),n.amIOwner=this.container.roomSession.isRoomOwner,n.roomControllerLevel=this.container.roomSession.controllerLevel,n.amIAnyRoomController=ee().isModerator,n.badges=[Fe.DEFAULT_BOT_BADGE_ID],n.figure=s.figure,this.container.eventDispatcher.dispatchEvent(n)}processPetInfoEvent(e){const t=e.petInfo;if(!t)return;const s=this.container.roomSession.userDataManager.getPetData(t.id);if(!s)return;const n=new a.of(s.figure);let r=null;n.typeId===a.vf.MONSTERPLANT&&(r=t.level>=t.adultLevel?\"std\":\"grw\"+t.level);const c=t.ownerId===ee().userId,i=new Me(Me.PET_INFO);i.name=s.name,i.id=t.id,i.ownerId=t.ownerId,i.ownerName=t.ownerName,i.rarityLevel=t.rarityLevel,i.petType=n.typeId,i.petBreed=n.paletteId,i.petFigure=s.figure,i.posture=r,i.isOwner=c,i.roomIndex=s.roomIndex,i.level=t.level,i.maximumLevel=t.maximumLevel,i.experience=t.experience,i.levelExperienceGoal=t.levelExperienceGoal,i.energy=t.energy,i.maximumEnergy=t.maximumEnergy,i.happyness=t.happyness,i.maximumHappyness=t.maximumHappyness,i.respect=t.respect,i.respectsPetLeft=ee().respectsPetLeft,i.age=t.age,i.saddle=t.saddle,i.rider=t.rider,i.breedable=t.breedable,i.fullyGrown=t.fullyGrown,i.dead=t.dead,i.rarityLevel=t.rarityLevel,i.skillTresholds=t.skillTresholds,i.canRemovePet=!1,i.publiclyRideable=t.publiclyRideable,i.maximumTimeToLive=t.maximumTimeToLive,i.remainingTimeToLive=t.remainingTimeToLive,i.remainingGrowTime=t.remainingGrowTime,i.publiclyBreedable=t.publiclyBreedable,(c||this.container.roomSession.isRoomOwner||ee().isModerator||this.container.roomSession.controllerLevel>=a.eg.GUEST)&&(i.canRemovePet=!0),this.container.eventDispatcher.dispatchEvent(i)}checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=a.eg.GUILD_ADMIN:e.roomControllerLevel>=a.eg.GUEST}canBeMuted(e){return this.isValidSetting(e,((e,t)=>t.allowMute===a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.eg.ROOM_OWNER))}canBeKicked(e){return this.isValidSetting(e,((e,t)=>{switch(t.allowKick){case a.Gg.MODERATION_LEVEL_ALL:return!0;case a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(e);default:return e.roomControllerLevel>=a.eg.ROOM_OWNER}}))}canBeBanned(e){return this.isValidSetting(e,((e,t)=>t.allowBan===a.Gg.MODERATION_LEVEL_USER_WITH_RIGHTS?this.checkGuildSetting(e):e.roomControllerLevel>=a.eg.ROOM_OWNER))}isValidSetting(e,t){if(!this.container.roomSession._Str_7411)return!1;const s=this.container.roomSession.moderationSettings;let n=!1;return s&&(n=t(e,s)),n&&e.targetRoomControllerLevel<a.eg.ROOM_OWNER}get type(){return a.yh.INFOSTAND}get eventTypes(){return[a.ah.PET_INFO,a.eh.RSUBE_BADGES,a.gh.USER_FIGURE,a.Zg.FAVOURITE_GROUP_UPDATE]}get messageTypes(){return[Cn.GET_OBJECT_INFO,Cn.GET_OBJECT_NAME,Sn.RESPECT_USER,Sn.WHISPER_USER,Sn.IGNORE_USER,Sn.UNIGNORE_USER,Sn.KICK_USER,Sn.BAN_USER_DAY,Sn.BAN_USER_HOUR,Sn.BAN_USER_PERM,Sn.MUTE_USER_2MIN,Sn.MUTE_USER_5MIN,Sn.MUTE_USER_10MIN,Sn.GIVE_RIGHTS,Sn.TAKE_RIGHTS,Sn.START_TRADING,Sn.OPEN_HOME_PAGE,Sn.PASS_CARRY_ITEM,Sn.GIVE_CARRY_ITEM_TO_PET,Sn.DROP_CARRY_ITEM,Sn.REPORT,Sn.PICKUP_PET,Sn.MOUNT_PET,Sn.TOGGLE_PET_RIDING_PERMISSION,Sn.TOGGLE_PET_BREEDING_PERMISSION,Sn.DISMOUNT_PET,Sn.SADDLE_OFF,Sn.TRAIN_PET,Sn.RESPECT_PET,Sn.REQUEST_PET_UPDATE,Sn.GIVE_LIGHT_TO_PET,Sn.GIVE_WATER_TO_PET,Sn.TREAT_PET,Sn.REPORT_CFH_OTHER,Sn.AMBASSADOR_ALERT_USER,Sn.AMBASSADOR_KICK_USER,Sn.AMBASSADOR_MUTE_USER_2MIN,Sn.AMBASSADOR_MUTE_USER_10MIN,Sn.AMBASSADOR_MUTE_USER_60MIN,Sn.AMBASSADOR_MUTE_USER_18HOUR,un.CHANGE_MOTTO,En.MOVE,En.ROTATE,En.EJECT,En.PICKUP,En.USE,En.SAVE_STUFF_DATA]}}class Kn extends vn{processEvent(e){}processWidgetMessage(e){if(!e)return null;switch(e.type){case Tn.USER_CHOOSER:this.processChooser();break;case Cn.SELECT_OBJECT:this.selectRoomObject(e)}return null}processChooser(){const e=this.container.roomSession.roomId,t=[];L().getRoomObjects(e,a.Ig.UNIT).forEach((e=>{const s=this.container.roomSession.userDataManager.getUserDataByIndex(e.id);s&&t.push(new pe(s.roomIndex,a.Ig.UNIT,s.name))})),t.sort(((e,t)=>e.name<t.name?-1:1)),this.container.eventDispatcher.dispatchEvent(new fe(fe.USER_CHOOSER_CONTENT,t))}selectRoomObject(e){e.category===a.Ig.UNIT&&L().selectRoomObject(this.container.roomSession.roomId,e.id,e.category)}get type(){return a.yh.USER_CHOOSER}get eventTypes(){return[]}get messageTypes(){return[Tn.USER_CHOOSER,Cn.SELECT_OBJECT]}}class Qn extends vn{processEvent(e){const t=e;let s;switch(e.type){case a.hh.ANSWERED:const e=this.container.roomSession.roomId,n=this.container.roomSession.userDataManager.getUserData(t.userId);if(!n)return;s=new Qe(Qe.QUESTION_ANSWERED,t.id),s.value=t.value,s.userId=t.userId,s.answerCounts=t.answerCounts,\"0\"===s.value?L().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SAD)):L().updateRoomObjectUserGesture(e,n.roomIndex,a.k.getGestureId(a.k.GESTURE_SMILE));break;case a.hh.FINISHED:s=new Qe(Qe.QUESTION_FINISHED,t.id),s.pollId=t.pollId,s.questionId=t.questionId,s.answerCounts=t.answerCounts;break;case a.hh.QUESTION:s=new Qe(Qe.NEW_QUESTION,t.id),s.question=t.question,s.duration=t.duration,s.pollType=t.pollType,s.questionId=t.questionId,s.pollId=t.pollId}s&&this.container.eventDispatcher.dispatchEvent(s)}processWidgetMessage(e){return null}get type(){return a.yh.WORD_QUIZZ}get eventTypes(){return[a.hh.ANSWERED,a.hh.FINISHED,a.hh.QUESTION]}get messageTypes(){return[]}}const $n=e=>D().send(e),Xn=e=>{C().sendWorkerEvent(e)},Jn=(e,t)=>{const s=e.get(t),n=[];if(s&&s.length)for(const r of s)r.isVisible&&n.push(r);return n},Zn=(e,t,s,n)=>{if(s.isVisible&&s.pageId>0){let r=!1;const c=[s.pageName,s.localization].join(\" \").toLowerCase().replace(/ /gi,\"\");if(c.indexOf(e)>-1&&(n.push(s),r=!0),!r)for(const e of t)if(c.indexOf(e)>=0){n.push(s);break}}for(const r of s.children)Zn(e,t,r,n)};class er{}er.WALL=\"i\",er.FLOOR=\"s\",er.EFFECT=\"e\",er.HABBO_CLUB=\"h\",er.BADGE=\"b\",er.GAME_TOKEN=\"GAME_TOKEN\",er.PET=\"p\",er.ROBOT=\"r\";class tr{constructor(e,t,s,n,r,c){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;this._productType=void 0,this._productClassId=void 0,this._extraParam=void 0,this._productCount=void 0,this._productData=void 0,this._furnitureData=void 0,this._isUniqueLimitedItem=void 0,this._uniqueLimitedItemSeriesSize=void 0,this._uniqueLimitedItemsLeft=void 0,this._productType=e.toLowerCase(),this._productClassId=t,this._extraParam=s,this._productCount=n,this._productData=r,this._furnitureData=c,this._isUniqueLimitedItem=i,this._uniqueLimitedItemSeriesSize=a,this._uniqueLimitedItemsLeft=o}static stripAddonProducts(e){return 1===e.length?e:e.filter((e=>e.productType!==er.BADGE&&e.productType!==er.EFFECT&&e.productClassId!==tr.EFFECT_CLASSID_NINJA_DISAPPEAR))}getIconUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(this._productType){case er.FLOOR:return L().getFurnitureFloorIconUrl(this.productClassId);case er.WALL:if(e&&this._furnitureData){let t=\"\";switch(this._furnitureData.className){case\"floor\":t=[\"th\",this._furnitureData.className,e.product.extraParam].join(\"_\");break;case\"wallpaper\":t=[\"th\",\"wall\",e.product.extraParam].join(\"_\");break;case\"landscape\":t=[\"th\",this._furnitureData.className,(e.product.extraParam||\"\").replace(\".\",\"_\"),\"001\"].join(\"_\")}if(\"\"!==t){return`${k(\"catalog.asset.url\")}/${t}.png`}}return L().getFurnitureWallIconUrl(this.productClassId,this._extraParam);case er.EFFECT:case er.HABBO_CLUB:return this.productClassId,\"\";case er.BADGE:return ee().getBadgeUrl(this._extraParam);case er.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(e){this._uniqueLimitedItemsLeft=e}}tr.EFFECT_CLASSID_NINJA_DISAPPEAR=108;class sr{constructor(e,t,s,n,r,c,i,a,o,l){this._pricingModel=void 0,this._priceType=void 0,this._offerId=void 0,this._localizationId=void 0,this._priceInCredits=void 0,this._priceInActivityPoints=void 0,this._activityPointType=void 0,this._giftable=void 0,this._isRentOffer=void 0,this._page=void 0,this._clubLevel=0,this._products=void 0,this._badgeCode=void 0,this._bundlePurchaseAllowed=!1,this._offerId=e,this._localizationId=t,this._isRentOffer=s,this._priceInCredits=n,this._priceInActivityPoints=r,this._activityPointType=c,this._giftable=i,this._clubLevel=a,this._products=o,this._bundlePurchaseAllowed=l,this.setPricingModelForProducts(),this.setPricingType();for(const u of o)if(u.productType===er.BADGE){this._badgeCode=u.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(e){this._page=e}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(1===this._products.length)return this._products[0];const e=tr.stripAddonProducts(this._products);return e.length?e[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const e=ce(this._localizationId);return e?e.name:nt(this._localizationId)}get localizationDescription(){const e=ce(this._localizationId);return e?e.description:nt(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const e=tr.stripAddonProducts(this._products);1===e.length?1===e[0].productCount?this._pricingModel=sr.PRICING_MODEL_SINGLE:this._pricingModel=sr.PRICING_MODEL_MULTI:e.length>1?this._pricingModel=sr.PRICING_MODEL_BUNDLE:this._pricingModel=sr.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=sr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=sr.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=sr.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=sr.PRICE_TYPE_NONE}clone(){const e=[],t=ce(this.localizationId);for(const n of this._products){const s=se(n.productClassId,n.productType);e.push(new tr(n.productType,n.productClassId,n.extraParam,n.productCount,t,s))}const s=new sr(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,e,this.bundlePurchaseAllowed);return s.page=this.page,s}}sr.PRICING_MODEL_UNKNOWN=\"pricing_model_unknown\",sr.PRICING_MODEL_SINGLE=\"pricing_model_single\",sr.PRICING_MODEL_MULTI=\"pricing_model_multi\",sr.PRICING_MODEL_BUNDLE=\"pricing_model_bundle\",sr.PRICING_MODEL_FURNITURE=\"pricing_model_furniture\",sr.PRICE_TYPE_NONE=\"price_type_none\",sr.PRICE_TYPE_CREDITS=\"price_type_credits\",sr.PRICE_TYPE_ACTIVITYPOINTS=\"price_type_activitypoints\",sr.PRICE_TYPE_CREDITS_ACTIVITYPOINTS=\"price_type_credits_and_activitypoints\";class nr{constructor(e){this._furniData=void 0,this._page=void 0,this._product=void 0,this._furniData=e,this._product=new tr(this._furniData.type,this._furniData.id,this._furniData.customParams,1,ce(this._furniData.className),this._furniData)}activate(){$n(new a.vc(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return\"\"}get product(){return this._product}get products(){return[this._product]}get localizationId(){return\"roomItem.name.\"+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return sr.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return\"\"}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}class rr{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class cr{constructor(e,t){this._images=void 0,this._texts=void 0,this._images=e,this._texts=t}getText(e){let t=this._texts[e]||\"\";return t&&t.length&&(t=t.replace(/\\r\\n|\\r|\\n/g,\"<br />\")),t}getImage(e){const t=this._images[e]||\"\";if(!t||!t.length)return null;let s=k(\"catalog.asset.image.url\");return s=s.replace(\"%name%\",t),s}}class ir{constructor(e,t,s,n,r,c,i,a){this.roomId=e,this.objectId=t,this.category=s,this.wallLocation=n,this.x=r,this.y=c,this.direction=i,this.offer=a}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}class ar{constructor(){this._requestType=void 0,this._requestById=void 0,this._requestedByOfferId=void 0,this._requestByName=void 0,this._requestType=ar.REQUEST_TYPE_NONE}resetRequest(){this._requestType=ar.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(e){this._requestType=ar.REQUEST_TYPE_ID,this._requestById=e}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(e){this._requestType=ar.REQUEST_TYPE_OFFER,this._requestedByOfferId=e}get requestByName(){return this._requestByName}set requestByName(e){this._requestType=ar.REQUEST_TYPE_NAME,this._requestByName=e}}ar.REQUEST_TYPE_NONE=0,ar.REQUEST_TYPE_ID=1,ar.REQUEST_TYPE_OFFER=2,ar.REQUEST_TYPE_NAME=3;class or{constructor(e,t,s){this.searchValue=e,this.offers=t,this.filteredNodes=s}}function lr(){return C().core}function ur(){return lr().configuration}const dr=e=>{if(!e||!e.length)return null;const t=e.split(\"/\");return{username:t[0],figure:t[1],userId:parseInt(t[2])}};class hr{}hr.GROUP_CHAT=0,hr.PRIVATE_CHAT=1;class jr{}jr.HIDDEN=0,jr.SHOW=1,jr.UNREAD=2;class br{constructor(){this._id=void 0,this._name=void 0,this._requesterUserId=void 0,this._figureString=void 0}populate(e){return!!e&&(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0)}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class gr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.userFriendLimit=e,this.normalFriendLimit=t,this.extendedFriendLimit=s,this.categories=n}}class Or{constructor(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._type=void 0,this._senderId=void 0,this._message=void 0,this._secondsSinceSent=void 0,this._extraData=void 0,this._date=void 0,this._type=r,this._senderId=e,this._message=t,this._secondsSinceSent=s,this._extraData=n,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}Or.CHAT=0,Or.ROOM_INVITE=1,Or.STATUS_NOTIFICATION=2,Or.SECURITY_NOTIFICATION=3;class mr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr.PRIVATE_CHAT;this._userId=void 0,this._chats=void 0,this._type=void 0,this._userId=e,this._chats=[],this._type=t}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}class pr{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._threadId=void 0,this._participant=void 0,this._groups=void 0,this._lastUpdated=void 0,this._unreadCount=void 0,this._threadId=++pr.THREAD_ID,this._participant=e,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0,t&&(this.addMessage(null,nt(\"messenger.moderationinfo\"),0,null,Or.SECURITY_NOTIFICATION),this._unreadCount=0)}addMessage(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const c=e<0&&n,i=c?dr(n).userId:e,a=this.getLastGroup(i);if(!a)return;c&&(a.type=hr.GROUP_CHAT);const o=new Or(e,t,s,n,r);return a.addChat(o),this._lastUpdated=new Date,this._unreadCount++,o}getLastGroup(e){let t=this._groups[this._groups.length-1];return t&&t.userId===e||(t=new mr(e),this._groups.push(t)),t}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}}function _r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;y(0===e?\"friends-messenger/open\":`friends-messenger/${e}`)}pr.MESSAGE_RECEIVED=\"MT_MESSAGE_RECEIVED\",pr.THREAD_ID=0;function Er(e){$n(new a.Tc(e,!0))}function fr(e){y(`groups/manage/${e}`)}function xr(e,t){y(t?`group-members/${e}/${t}`:`group-members/${e}`)}const Ir=e=>$n(new a.Vc(e));class Tr{}Tr.ACTIVE=\"active\",Tr.NONE=\"none\",Tr.EXPIRED=\"expired\";const Cr=[\"ACH_VipHC1\",\"ACH_VipHC2\",\"ACH_VipHC3\",\"ACH_VipHC4\",\"ACH_VipHC5\",\"HC1\",\"HC2\",\"HC3\",\"HC4\",\"HC5\"];class Nr{}Nr.NONE=0,Nr.START_DOORBELL=1,Nr.START_PASSWORD=2,Nr.STATE_PENDING_SERVER=3,Nr.UPDATE_STATE=4,Nr.STATE_WAITING=5,Nr.STATE_NO_ANSWER=6,Nr.STATE_WRONG_PASSWORD=7,Nr.STATE_ACCEPTED=8;class Sr{}Sr.LIST=0,Sr.THUMBNAILS=1,Sr.FORCED_THUMBNAILS=2;const vr=(()=>{const e=[];for(let t=10;t<=100;t+=10)e.push(t);return e})(),Rr=[{name:\"anything\",query:null},{name:\"room.name\",query:\"roomname\"},{name:\"owner\",query:\"owner\"},{name:\"tag\",query:\"tag\"},{name:\"group\",query:\"group\"}];function Ar(e){$n(new a.Cg(e,!1,!0))}class yr{}yr.DEFAULT=\"default\",yr.MOTD=\"motd\",yr.MODERATION=\"moderation\",yr.EVENT=\"event\",yr.NITRO=\"nitro\",yr.SEARCH=\"search\",yr.ALERT=\"alert\";class wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr.DEFAULT,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this._id=void 0,this._messages=void 0,this._alertType=void 0,this._clickUrl=void 0,this._clickUrlText=void 0,this._title=void 0,this._imageUrl=void 0,wr.ITEM_ID+=1,this._id=wr.ITEM_ID,this._messages=e,this._alertType=t,this._clickUrl=s,this._clickUrlText=n,this._title=r,this._imageUrl=c}get id(){return this._id}get messages(){return this._messages}set alertType(e){this._alertType=e}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}}wr.ITEM_ID=-1;class kr{}kr.FRIENDOFFLINE=\"friendoffline\",kr.FRIENDONLINE=\"friendonline\",kr.THIRDPARTYFRIENDOFFLINE=\"thirdpartyfriendoffline\",kr.THIRDPARTYFRIENDONLINE=\"thirdpartyfriendonline\",kr.ACHIEVEMENT=\"achievement\",kr.BADGE_RECEIVED=\"badge_received\",kr.INFO=\"info\",kr.RECYCLEROK=\"recyclerok\",kr.RESPECT=\"respect\",kr.CLUB=\"club\",kr.SOUNDMACHINE=\"soundmachine\",kr.PETLEVEL=\"petlevel\",kr.CLUBGIFT=\"clubgift\",kr.BUYFURNI=\"buyfurni\",kr.VIP=\"vip\",kr.ROOMMESSAGESPOSTED=\"roommessagesposted\";class Dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr.INFO,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._id=void 0,this._message=void 0,this._notificationType=void 0,this._iconUrl=void 0,this._linkUrl=void 0,Dr.ITEM_ID+=1,this._id=Dr.ITEM_ID,this._message=e,this._notificationType=t,this._iconUrl=s,this._linkUrl=n}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}}Dr.ITEM_ID=-1;class Ur{constructor(e,t,s,n,r,c,i){this._id=void 0,this._confirmType=void 0,this._message=void 0,this._onConfirm=void 0,this._onCancel=void 0,this._confirmText=void 0,this._cancelText=void 0,this._title=void 0,Ur.ITEM_ID+=1,this._id=Ur.ITEM_ID,this._confirmType=e,this._message=t,this._onConfirm=s,this._onCancel=n,this._confirmText=r,this._cancelText=c,this._title=i}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}}Ur.ITEM_ID=-1;class Pr{static cleanText(e){return e.replace(/\\\\r/g,\"\\r\")}static getTimeZeroPadded(e){const t=\"0\"+e;return t.substr(t.length-2,t.length)}static getMainNotificationConfig(){return k(\"notification\",{})}static getNotificationConfig(e){const t=this.getMainNotificationConfig();return t?t[e]:null}static getNotificationPart(e,t,s,n){if(e.has(s))return e.get(s);const r=[\"notification\",t,s].join(\".\");return C().localization.hasValue(r)||n?nt(r,Array.from(e.keys()),Array.from(e.values())):null}static getNotificationImageUrl(e,t){let s=e.get(\"image\");return s||(s=k(\"image.library.notifications.url\",\"\").replace(\"%image%\",t.replace(/\\./g,\"_\"))),nt(s)}static showNotification(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=new Map);const s=this.getNotificationConfig(\"notification.\"+e);if(s)for(const o in s)t.set(o,s[o]);const n=this.getNotificationPart(t,e,\"title\",!0),r=this.getNotificationPart(t,e,\"message\",!0).replace(/\\\\r/g,\"\\r\"),c=this.getNotificationPart(t,e,\"linkTitle\",!1),i=this.getNotificationPart(t,e,\"linkUrl\",!1),a=this.getNotificationImageUrl(t,e);\"BUBBLE\"===t.get(\"display\")?this.showSingleBubble(nt(r),kr.INFO,a,i):this.simpleAlert(r,e,i,c,n,a),t.get(\"sound\")&&Ss(t.get(\"sound\"))}static showSingleBubble(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.BUBBLES_DISABLED||Vt(new Rt(e,t,s,n))}static showClubGiftNotification(e){e<=0||this.showSingleBubble(e.toString(),kr.CLUBGIFT,null,\"catalog/open/\"+k(\"catalog.links\")[\"hc.hc_gifts\"])}static handleMOTD(e){e=e.map((e=>this.cleanText(e))),Vt(new vt(e,yr.MOTD,null,null,nt(\"notifications.motd.title\")))}static confirm(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;n&&n.length||(n=nt(\"generic.confirm\")),r&&r.length||(r=nt(\"generic.cancel\")),c&&c.length||(c=nt(\"notifications.broadcast.title\")),Vt(new wt(i,this.cleanText(e),t,s,n,r,c))}static simpleAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;r&&r.length||(r=nt(\"notifications.broadcast.title\")),t&&t.length||(t=yr.DEFAULT),Vt(new vt([this.cleanText(e)],t,s,n,r,c))}static showNitroAlert(){Vt(new vt(null,yr.NITRO))}static showModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.simpleAlert(e,yr.DEFAULT,t,nt(\"mod.alert.link\"),nt(\"mod.alert.title\"))}static handleModeratorCaution(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t)}static handleModeratorMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.showModeratorMessage(e,t,!1)}static handleUserBannedMessage(e){this.showModeratorMessage(e)}static handleHotelClosedMessage(e,t,s){this.simpleAlert(nt(\"opening.hours.\"+(s?\"disconnected\":\"closed\"),[\"h\",\"m\"],[this.getTimeZeroPadded(e),this.getTimeZeroPadded(t)]),yr.DEFAULT,null,null,nt(\"opening.hours.title\"))}static handleHotelMaintenanceMessage(e,t){this.simpleAlert(nt(\"maintenance.shutdown\",[\"m\",\"d\"],[e.toString(),t.toString()]),yr.DEFAULT,null,null,nt(\"opening.hours.title\"))}static handleHotelClosingMessage(e){this.simpleAlert(nt(\"opening.hours.shutdown\",[\"m\"],[e.toString()]),yr.DEFAULT,null,null,nt(\"opening.hours.title\"))}static handleLoginFailedHotelClosedMessage(e,t){this.simpleAlert(nt(\"opening.hours.disconnected\",[\"h\",\"m\"],[e.toString(),t.toString()]),yr.DEFAULT,null,null,nt(\"opening.hours.title\"))}static openUrl(e){e&&e.length&&(e.startsWith(\"http\")?a.Jd.openWebPage(e):y(e))}static showModerationDisclaimer(){if(a.ug.isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout((()=>{this.showModerationDisclaimer()}),a.ug.totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS)}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble(nt(\"mod.chatdisclaimer\"),kr.INFO),this.MODERATION_DISCLAIMER_SHOWN=!0}}}Pr.MODERATION_DISCLAIMER_SHOWN=!1,Pr.MODERATION_DISCLAIMER_DELAY_MS=5e3,Pr.MODERATION_DISCLAIMER_TIMEOUT=null,Pr.BUBBLES_DISABLED=!1;class Mr{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const t=new Mr;return t._credits=e._credits,t._activityPoints=e._activityPoints,t._clubDays=e._clubDays,t._clubPeriods=e._clubPeriods,t._isVIP=e._isVIP,t._pastClubDays=e._pastClubDays,t._pastVipDays=e._pastVipDays,t._isExpiring=e._isExpiring,t._minutesUntilExpiration=e._minutesUntilExpiration,t._minutesSinceLastModified=e._minutesSinceLastModified,t._lastUpdated=e._lastUpdated,t}get credits(){return this._credits}set credits(e){this._lastUpdated=C().time,this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=C().time,this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=C().time,this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=C().time,this._clubPeriods=e}get _Str_13571(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=C().time,this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=C().time,this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(C().time-this._lastUpdated)/6e4,t=this._minutesUntilExpiration-e;return t>0?t:0}set minutesUntilExpiration(e){this._lastUpdated=C().time,this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=C().time,this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return 0===this.clubDays&&0===this.clubPeriods?a.Ed.NO_CLUB:this.isVip?a.Ed.VIP:a.Ed.CLUB}}function Lr(e){$n(new a.Ii(e))}const Fr=e=>{const t=Math.floor(e/2);return e%2?(t+.5).toString():t.toString()};class Hr{}Hr.TOGGLE_FURNI_STATE=0,Hr.RESET=1,Hr.SET_FURNI_STATE=3,Hr.MOVE_FURNI=4,Hr.GIVE_SCORE=6,Hr.CHAT=7,Hr.TELEPORT=8,Hr.JOIN_TEAM=9,Hr.LEAVE_TEAM=10,Hr.CHASE=11,Hr.FLEE=12,Hr.MOVE_AND_ROTATE_FURNI=13,Hr.GIVE_SCORE_TO_PREDEFINED_TEAM=14,Hr.TOGGLE_TO_RANDOM_STATE=15,Hr.MOVE_FURNI_TO=16,Hr.GIVE_REWARD=17,Hr.CALL_ANOTHER_STACK=18,Hr.KICK_FROM_ROOM=19,Hr.MUTE_USER=20,Hr.BOT_TELEPORT=21,Hr.BOT_MOVE=22,Hr.BOT_TALK=23,Hr.BOT_GIVE_HAND_ITEM=24,Hr.BOT_FOLLOW_AVATAR=25,Hr.BOT_CHANGE_FIGURE=26,Hr.BOT_TALK_DIRECT_TO_AVTR=27;class Br{}Br.STATES_MATCH=0,Br.FURNIS_HAVE_AVATARS=1,Br.ACTOR_IS_ON_FURNI=2,Br.TIME_ELAPSED_MORE=3,Br.TIME_ELAPSED_LESS=4,Br.USER_COUNT_IN=5,Br.ACTOR_IS_IN_TEAM=6,Br.HAS_STACKED_FURNIS=7,Br.STUFF_TYPE_MATCHES=8,Br.STUFFS_IN_FORMATION=9,Br.ACTOR_IS_GROUP_MEMBER=10,Br.ACTOR_IS_WEARING_BADGE=11,Br.ACTOR_IS_WEARING_EFFECT=12,Br.NOT_STATES_MATCH=13,Br.FURNI_NOT_HAVE_HABBO=14,Br.NOT_ACTOR_ON_FURNI=15,Br.NOT_USER_COUNT_IN=16,Br.NOT_ACTOR_IN_TEAM=17,Br.NOT_HAS_STACKED_FURNIS=18,Br.NOT_FURNI_IS_OF_TYPE=19,Br.NOT_STUFFS_IN_FORMATION=20,Br.NOT_ACTOR_IN_GROUP=21,Br.NOT_ACTOR_WEARS_BADGE=22,Br.NOT_ACTOR_WEARING_EFFECT=23,Br.DATE_RANGE_ACTIVE=24,Br.ACTOR_HAS_HANDITEM=25;const Gr=e=>`${e.getFullYear()}/${(\"0\"+(e.getMonth()+1)).slice(-2)}/${(\"0\"+e.getDate()).slice(-2)} ${(\"0\"+e.getHours()).slice(-2)}:${(\"0\"+e.getMinutes()).slice(-2)}`;class Wr{}Wr.STUFF_SELECTION_OPTION_NONE=0,Wr.STUFF_SELECTION_OPTION_BY_ID=1,Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;class Vr extends a.Ue{constructor(e,t){super(\"\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nuniform mat3 projectionMatrix;\\nvarying vec2 vTextureCoord;\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",\"\\nvarying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform vec3 lineColor;\\nuniform vec3 color;\\nvoid main(void) {\\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\\n    vec3 colorLine = lineColor * currentColor.a;\\n    vec3 colorOverlay = color * currentColor.a;\\n\\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\\n    } else if(currentColor.a > 0.0) {\\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\\n    }\\n}\"),this._lineColor=void 0,this._color=void 0,this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=t}get lineColor(){return this._lineColor}set lineColor(e){const t=this.uniforms.lineColor;\"number\"===typeof e?(a.jb.hex2rgb(e,t),this._lineColor=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._lineColor=a.jb.rgb2hex(t))}get color(){return this._color}set color(e){const t=this.uniforms.color;\"number\"===typeof e?(a.jb.hex2rgb(e,t),this._color=e):(t[0]=e[0],t[1]=e[1],t[2]=e[2],this._color=a.jb.rgb2hex(t))}}class qr{static show(e){qr.applySelectionShader(qr.getRoomObject(e))}static hide(e){qr.clearSelectionShader(qr.getRoomObject(e))}static clearSelectionShaderFromFurni(e){for(const t of e)qr.clearSelectionShader(qr.getRoomObject(t))}static applySelectionShaderToFurni(e){for(const t of e)qr.applySelectionShader(qr.getRoomObject(t))}static getRoomObject(e){const t=L();return t.getRoomObject(t.activeRoomId,e,a.Ig.FLOOR)}static applySelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)1!==s.blendMode&&(s.filters=[qr._selectionShader])}static clearSelectionShader(e){if(!e)return;const t=e.visualization;if(t)for(const s of t.sprites)s.filters=[]}}qr._selectionShader=new Vr([1,1,1],[.6,.6,.6]);const Yr=\"\\t\";class zr{}zr.AVATAR_SAYS_SOMETHING=0,zr.AVATAR_WALKS_ON_FURNI=1,zr.AVATAR_WALKS_OFF_FURNI=2,zr.EXECUTE_ONCE=3,zr.TOGGLE_FURNI=4,zr.EXECUTE_PERIODICALLY=6,zr.AVATAR_ENTERS_ROOM=7,zr.GAME_STARTS=8,zr.GAME_ENDS=9,zr.SCORE_ACHIEVED=10,zr.COLLISION=11,zr.EXECUTE_PERIODICALLY_LONG=12,zr.BOT_REACHED_STUFF=13,zr.BOT_REACHED_AVATAR=14;var Kr=s(0);const Qr=e=>{const{ref:t=null,innerRef:s=null,display:n=null,fit:r=!1,grow:i=!1,shrink:a=!1,fullWidth:o=!1,fullHeight:l=!1,overflow:u=null,position:d=null,float:h=null,pointer:j=!1,visible:b=null,textColor:g=null,classNames:O=[],className:m=\"\",style:p={},children:_=null,...E}=e,f=Object(c.useMemo)((()=>{const e=[];return n&&n.length&&e.push(\"d-\"+n),(r||o)&&e.push(\"w-100\"),(r||l)&&e.push(\"h-100\"),i&&e.push(\"flex-grow-1\"),a&&e.push(\"flex-shrink-0\"),u&&e.push(\"overflow-\"+u),d&&e.push(\"position-\"+d),h&&e.push(\"float-\"+h),j&&e.push(\"cursor-pointer\"),null!==b&&e.push(b?\"visible\":\"invisible\"),g&&e.push(\"text-\"+g),O.length&&e.push(...O),e}),[n,r,i,a,o,l,u,d,h,j,b,g,O]),x=Object(c.useMemo)((()=>{let e=f.join(\" \");return m.length&&(e+=\" \"+m),e.trim()}),[f,m]),I=Object(c.useMemo)((()=>{let e={};return Object.keys(p).length&&(e={...e,...p}),e}),[p]);return Object(Kr.jsx)(\"div\",{ref:s,className:x,style:I,...E,children:_})},$r=Object(c.createContext)({isCssGrid:!1}),Xr=e=>Object(Kr.jsx)($r.Provider,{value:e.value,children:e.children}),Jr=e=>{const{inline:t=!1,gap:s=2,maxContent:n=!1,columnCount:r=0,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,fullHeight:u=!0,classNames:d=[],style:h={},...j}=e,b=Object(c.useMemo)((()=>{const e=[];return t?e.push(\"inline-grid\"):e.push(\"grid\"),s?e.push(\"gap-\"+s):0===s&&e.push(\"gap-0\"),n&&e.push(\"flex-basis-max-content\"),a&&e.push(\"align-self-\"+a),o&&e.push(\"align-items-\"+o),l&&e.push(\"justify-content-\"+l),o||l||!i||e.push(\"align-items-center\",\"justify-content-center\"),d.length&&e.push(...d),e}),[t,s,n,a,o,l,i,d]),g=Object(c.useMemo)((()=>{let e={};return r&&(e[\"--bs-columns\"]=r.toString()),Object.keys(h).length&&(e={...e,...h}),e}),[r,h]);return Object(Kr.jsx)(Xr,{value:{isCssGrid:!0},children:Object(Kr.jsx)(Qr,{fullHeight:u,classNames:b,style:g,...j})})},Zr=e=>{const{columnMinWidth:t=40,columnMinHeight:s=40,columnCount:n=0,fullHeight:r=!1,maxContent:i=!0,overflow:a=\"auto\",style:o={},...l}=e,u=Object(c.useMemo)((()=>{let e={};return e[\"--nitro-grid-column-min-height\"]=s+\"px\",n>1&&(e.gridTemplateColumns=`repeat(auto-fill, minmax(${t}px, 1fr))`),Object.keys(o).length&&(e={...e,...o}),e}),[t,s,n,o]);return Object(Kr.jsx)(Jr,{columnCount:n,fullHeight:r,overflow:a,style:u,...l})},ec=e=>{const{display:t=\"flex\",column:s,reverse:n=!1,gap:r=null,center:i=!1,alignSelf:a=null,alignItems:o=null,justifyContent:l=null,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=[];return s?n?e.push(\"flex-column-reverse\"):e.push(\"flex-column\"):n&&e.push(\"flex-row-reverse\"),r&&e.push(\"gap-\"+r),a&&e.push(\"align-self-\"+a),o&&e.push(\"align-items-\"+o),l&&e.push(\"justify-content-\"+l),o||l||!i||e.push(\"align-items-center\",\"justify-content-center\"),u.length&&e.push(...u),e}),[s,n,r,i,a,o,l,u]);return Object(Kr.jsx)(Qr,{display:t,classNames:h,...d})},tc=e=>{const{variant:t=\"primary\",size:s=\"\",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=[\"btn\"];return t&&e.push(\"btn-\"+t),s&&e.push(\"btn-\"+s),n&&e.push(\"active\"),r&&e.push(\"disabled\"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(Kr.jsx)(ec,{center:!0,classNames:o,...a})},sc=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=[\"btn-group\"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(Qr,{classNames:n,...s})},nc=Object(c.createContext)({closers:null,setClosers:null,closeAll:null}),rc=e=>Object(Kr.jsx)(nc.Provider,{...e}),cc=()=>Object(c.useContext)(nc),ic=e=>{const{alignItems:t=\"center\",gap:s=1,children:n=null,...r}=e;return Object(Kr.jsx)(ec,{alignItems:t,gap:s,...r,children:n})};var ac=s(10);const oc=e=>{const{headerText:t=\"\",isExpanded:s=!1,gap:n=0,classNames:r=[],children:i=null,...a}=e,[o,l]=Object(c.useState)(!1),{setClosers:u=null,closeAll:d=null}=cc(),h=Object(c.useCallback)((()=>l(!1)),[]),j=Object(c.useMemo)((()=>{const e=[\"nitro-card-accordion-set\"];return o&&e.push(\"active\"),r&&r.length&&e.push(...r),e}),[o,r]);return Object(c.useEffect)((()=>{l(s)}),[s]),Object(c.useEffect)((()=>{const e=h;return u((t=>{const s=[...t];return s.push(e),s})),()=>{u((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))}}),[h,u]),Object(Kr.jsxs)(vc,{classNames:j,gap:n,...a,children:[Object(Kr.jsxs)(ec,{pointer:!0,justifyContent:\"between\",className:\"nitro-card-accordion-set-header px-2 py-1\",onClick:()=>{d(),l((e=>!e))},children:[Object(Kr.jsx)(\"div\",{className:\"friend-header-text d-inline\",children:t}),Object(Kr.jsx)(ac.a,{icon:o?\"caret-up\":\"caret-down\"})]}),o&&Object(Kr.jsx)(vc,{fullHeight:!0,overflow:\"auto\",gap:0,className:\"nitro-card-accordion-set-content p-1\",children:i})]})},lc=e=>{const{...t}=e,[s,n]=Object(c.useState)([]),r=Object(c.useCallback)((()=>{for(const e of s)e()}),[s]);return Object(Kr.jsx)(rc,{value:{closers:s,setClosers:n,closeAll:r},children:Object(Kr.jsx)(vc,{gap:0,...t})})},uc=e=>{const{overflow:t=\"auto\",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=[\"container-fluid\",\"content-area\"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsx)(vc,{classNames:r,overflow:t,...n})},dc=Object(c.createContext)({theme:null}),hc=e=>Object(Kr.jsx)(dc.Provider,{value:e.value,children:e.children}),jc=e=>{const{headerText:t=null,noCloseButton:s=!1,onCloseClick:n=null,classNames:r=[],children:i=null,...a}=e,o=Object(c.useMemo)((()=>{const e=[\"drag-handler\",\"container-fluid\",\"nitro-card-header\"];return r.length&&e.push(...r),e}),[r]),l=Object(c.useCallback)((e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}),[]);return Object(Kr.jsx)(vc,{center:!0,position:\"relative\",classNames:o,...a,children:Object(Kr.jsxs)(ec,{fullWidth:!0,className:\"nitro-card-header-holder\",children:[Object(Kr.jsx)(\"span\",{className:\"nitro-card-header-text\",children:t}),Object(Kr.jsx)(Qr,{position:\"absolute\",className:\"end-2 nitro-card-header-close\",onMouseDownCapture:l,onClick:n})]})})},bc=e=>{const{justifyContent:t=\"center\",classNames:s=[],...n}=e,r=Object(c.useMemo)((()=>{const e=[\"container-fluid\",\"bg-muted\",\"p-1\"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsx)(ec,{justifyContent:t,classNames:r,...n})};var gc=s(23);class Oc{}Oc.CENTER=\"DWP_CENTER\",Oc.TOP_CENTER=\"DWP_TOP_CENTER\",Oc.TOP_LEFT=\"DWP_TOP_LEFT\",Oc.NOTHING=\"DWP_NOTHING\";const mc=[],pc=new Map,_c=e=>{const{uniqueKey:t=null,handleSelector:s=\".drag-handler\",windowPosition:n=Oc.CENTER,disableDrag:r=!1,dragStyle:i={},children:o=null,offsetLeft:l=0,offsetTop:u=0}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)({x:0,y:0}),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),f=Object(c.useRef)(),x=Object(c.useCallback)((()=>{let e=400;for(const t of mc)e+=1,t.style.zIndex=e.toString()}),[]),I=Object(c.useCallback)((()=>{const e=mc.indexOf(f.current);if(-1===e)mc.push(f.current);else{if(e===mc.length-1)return;e>=0&&(mc.splice(e,1),mc.push(f.current))}x()}),[x]),T=Object(c.useCallback)((e=>{I()}),[I]),C=Object(c.useCallback)((e=>{I()}),[I]),N=Object(c.useCallback)(((e,t)=>{O({x:e,y:t}),p(!0)}),[]),S=Object(c.useCallback)((e=>{N(e.clientX,e.clientY)}),[N]),v=Object(c.useCallback)((e=>{const t=e.touches[0];N(t.clientX,t.clientY)}),[N]),R=Object(c.useCallback)((e=>{h({x:e.clientX-g.x,y:e.clientY-g.y})}),[g]),A=Object(c.useCallback)((e=>{const t=e.touches[0];h({x:t.clientX-g.x,y:t.clientY-g.y})}),[g]),y=Object(c.useCallback)((()=>{if(!f.current||!_)return;let e=j.x+d.x,s=j.y+d.y;const n=f.current.offsetLeft+e,r=f.current.offsetTop+s;r<0?s=-f.current.offsetTop:r+_.offsetHeight>=document.body.offsetHeight-0&&(s=document.body.offsetHeight-f.current.offsetHeight-f.current.offsetTop),n+f.current.offsetWidth<0?e=-f.current.offsetLeft:n>=document.body.offsetWidth-0&&(e=document.body.offsetWidth-f.current.offsetWidth-f.current.offsetLeft),h({x:0,y:0}),b({x:e,y:s}),p(!1),null!==t&&pc.set(t,{x:e,y:s})}),[_,d,j,t]),w=Object(c.useCallback)((e=>{y()}),[y]),k=Object(c.useCallback)((e=>{y()}),[y]);return Object(c.useEffect)((()=>{const e=f.current;if(!e)return;if(mc.push(e),x(),!r){const t=e.querySelector(s);t&&E(t)}let c=0,i=0;switch(n){case Oc.TOP_CENTER:e.style.top=50+u+\"px\",e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case Oc.CENTER:e.style.top=`calc(50vh - ${e.offsetHeight/2+u}px)`,e.style.left=`calc(50vw - ${e.offsetWidth/2+l}px)`;break;case Oc.TOP_LEFT:e.style.top=50+u+\"px\",e.style.left=50+l+\"px\"}if(null!==t){const e=pc.get(t);e&&(c=e.x,i=e.y)}return h({x:0,y:0}),b({x:c,y:i}),()=>{const t=mc.indexOf(e);t>=0&&mc.splice(t,1)}}),[s,n,t,r,l,u,x]),Object(c.useEffect)((()=>{if(!j&&!d)return;const e=f.current;e&&(e.style.transform=`translate(${j.x+d.x}px, ${j.y+d.y}px)`,e.style.visibility=\"visible\")}),[j,d]),Object(c.useEffect)((()=>{if(_)return _.addEventListener(a.Ce.MOUSE_DOWN,S),_.addEventListener(a.Th.TOUCH_START,v),()=>{_.removeEventListener(a.Ce.MOUSE_DOWN,S),_.removeEventListener(a.Th.TOUCH_START,v)}}),[_,S,v]),Object(c.useEffect)((()=>{if(m)return document.addEventListener(a.Ce.MOUSE_UP,w),document.addEventListener(a.Th.TOUCH_END,k),document.addEventListener(a.Ce.MOUSE_MOVE,R),document.addEventListener(a.Th.TOUCH_MOVE,A),()=>{document.removeEventListener(a.Ce.MOUSE_UP,w),document.removeEventListener(a.Th.TOUCH_END,k),document.removeEventListener(a.Ce.MOUSE_MOVE,R),document.removeEventListener(a.Th.TOUCH_MOVE,A)}}),[m,w,R,k,A]),Object(gc.createPortal)(Object(Kr.jsx)(Qr,{position:\"absolute\",innerRef:f,className:\"draggable-window\",onMouseDownCapture:T,onTouchStartCapture:C,style:i,children:o}),document.getElementById(\"draggable-windows-container\"))},Ec=e=>{const{theme:t=\"primary\",uniqueKey:s=null,handleSelector:n=\".drag-handler\",windowPosition:r=Oc.CENTER,disableDrag:i=!1,overflow:a=\"hidden\",position:o=\"relative\",gap:l=0,classNames:u=[],...d}=e,h=Object(c.useMemo)((()=>{const e=[\"nitro-card\",\"rounded\"];return e.push(`theme-${t||\"primary\"}`),u.length&&e.push(...u),e}),[t,u]);return Object(Kr.jsx)(hc,{value:{theme:t},children:Object(Kr.jsx)(_c,{uniqueKey:s,handleSelector:n,windowPosition:r,disableDrag:i,children:Object(Kr.jsx)(vc,{overflow:a,position:o,gap:l,classNames:h,...d})})})},fc=e=>{const{figure:t=\"\",gender:s=\"M\",headOnly:n=!1,direction:r=0,scale:i=1,classNames:o=[],style:l={},...u}=e,[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(-1),g=Object(c.useRef)(!1),O=Object(c.useMemo)((()=>{const e=[\"avatar-image\"];return o.length&&e.push(...o),e}),[o]),m=Object(c.useMemo)((()=>{let e={};return d&&d.length&&(e.backgroundImage=`url('${d}')`),1!==i&&(e.transform=`scale(${i})`,i%1||(e.imageRendering=\"pixelated\")),Object.keys(l).length&&(e={...e,...l}),e}),[d,i,l]);return Object(c.useEffect)((()=>{const e=S().createAvatarImage(t,a.q.LARGE,s,{resetFigure:e=>{g.current||b(Math.random())},dispose:()=>{},disposed:!1},null);if(!e)return;let c=a.r.FULL;n&&(c=a.r.HEAD),e.setDirection(c,r);const i=e.getCroppedImage(c);i&&h(i.src),e.dispose()}),[t,s,r,n,j]),Object(c.useEffect)((()=>(g.current=!1,()=>{g.current=!0})),[]),Object(Kr.jsx)(Qr,{classNames:O,style:m,...u})},xc=e=>{const{imageUrl:t=null,fit:s=!0,style:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e={...n};return t&&(e.background=`url(${t}) center no-repeat`),e}),[n,t]);return Object(Kr.jsx)(Qr,{fit:s,style:i,...r})},Ic=e=>{const{badgeCode:t=null,isGroup:s=!1,showInfo:n=!1,customTitle:r=null,isGrayscale:i=!1,scale:o=1,classNames:l=[],style:u={},children:d=null,...h}=e,[j,b]=Object(c.useState)(null),g=Object(c.useMemo)((()=>{const e=[\"badge-image\"];return s&&e.push(\"group-badge\"),i&&e.push(\"grayscale\"),l.length&&e.push(...l),e}),[l,s,i]),O=Object(c.useMemo)((()=>{let e={};return j&&(e.backgroundImage=`url('${j.src}')`,e.width=j.width,e.height=j.height,1!==o&&(e.transform=`scale(${o})`,o%1||(e.imageRendering=\"pixelated\"),e.width=j.width*o,e.height=j.height*o)),Object.keys(u).length&&(e={...e,...u}),e}),[j,o,u]);Object(c.useEffect)((()=>{if(!t||!t.length)return;let e=!1;const n=s=>{if(s.badgeId!==t)return;const r=a.Sh.generateImage(new a.af(s.image));r.onload=()=>b(r),e=!0,ee().events.removeEventListener(a.s.IMAGE_READY,n)};ee().events.addEventListener(a.s.IMAGE_READY,n);const r=s?ee().getGroupBadgeImage(t):ee().getBadgeImage(t);if(r&&!e){const e=a.Sh.generateImage(new a.af(r));e.onload=()=>b(e)}return()=>ee().events.removeEventListener(a.s.IMAGE_READY,n)}),[t,s]);return Object(Kr.jsxs)(Qr,{classNames:g,style:O,...h,children:[n&&k(\"badge.descriptions.enabled\",!0)&&Object(Kr.jsxs)(Qr,{className:\"badge-information text-black p-2\",children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"mb-1\",children:s?r:et(t)}),Object(Kr.jsx)(\"div\",{className:\"badge-desc\",children:s?nt(\"group.badgepopup.body\"):Ze(t)})]}),d]})},Tc=e=>{const{type:t=\"\",classNames:s=[],style:n={},...r}=e,i=Object(c.useMemo)((()=>{const e=[\"nitro-currency-icon\"];return s.length&&e.push(...s),e}),[s]),a=Object(c.useMemo)((()=>{let e=k(\"currency.asset.icon.url\",\"\");return e=e.replace(\"%type%\",t.toString()),`url(${e})`}),[t]),o=Object(c.useMemo)((()=>{let e={};return e.backgroundImage=a,Object.keys(n).length&&(e={...e,...n}),e}),[n,a]);return Object(Kr.jsx)(Qr,{classNames:i,style:o,...r})},Cc=e=>{const{productType:t=\"s\",productClassId:s=-1,extraData:n=\"\",...r}=e;return Object(Kr.jsx)(Dc,{imageUrl:(()=>{let e=null;switch(t.toLocaleLowerCase()){case er.FLOOR:e=L().getFurnitureFloorIconUrl(s);break;case er.WALL:e=L().getFurnitureWallIconUrl(s,n)}return e})(),className:\"furni-image\",...r})},Nc=e=>{const{productType:t=\"s\",productClassId:s=-1,direction:n=2,extraData:r=\"\",scale:i=1,style:o={},...l}=e,[u,d]=Object(c.useState)(null),h=Object(c.useMemo)((()=>{var e;let t={};return null!==u&&void 0!==u&&null!==(e=u.src)&&void 0!==e&&e.length&&(t.backgroundImage=`url('${u.src}')`,t.width=u.width,t.height=u.height),1!==i&&(t.transform=`scale(${i})`,i%1||(t.imageRendering=\"pixelated\")),Object.keys(o).length&&(t={...t,...o}),t}),[u,i,o]),j=Object(c.useCallback)((()=>{let e=null;const c={imageReady:(e,t,s)=>{!s&&t&&(s=a.Sh.generateImage(t)),s.onload=()=>d(s)},imageFailed:null};switch(t.toLocaleLowerCase()){case er.FLOOR:e=L().getFurnitureFloorImage(s,new a.Ui(n),64,c,0,r);break;case er.WALL:e=L().getFurnitureWallImage(s,new a.Ui(n),64,c,0,r)}if(e){const t=e.getImage();t.onload=()=>d(t)}}),[t,s,n,r]);return Object(c.useEffect)((()=>{j()}),[j]),u?Object(Kr.jsx)(Qr,{classNames:[\"furni-image\"],style:h,...l}):null},Sc=e=>{const{figure:t=null,userName:s=null,message:n=null,editable:r=!1,onChange:c=null}=e;return Object(Kr.jsxs)(ec,{overflow:\"hidden\",className:\"nitro-gift-card text-black\",children:[Object(Kr.jsxs)(\"div\",{className:\"d-flex align-items-center justify-content-center gift-face flex-shrink-0\",children:[!s&&Object(Kr.jsx)(\"div\",{className:\"gift-incognito\"}),t&&Object(Kr.jsx)(\"div\",{className:\"gift-avatar\",children:Object(Kr.jsx)(fc,{figure:t,direction:2,headOnly:!0})})]}),Object(Kr.jsx)(ec,{overflow:\"hidden\",className:\"w-100 pt-4 pb-4 pe-4 ps-3\",children:Object(Kr.jsxs)(vc,{grow:!0,overflow:\"auto\",justifyContent:\"between\",children:[!r&&Object(Kr.jsx)(ei,{textBreak:!0,className:\"gift-message\",children:n}),r&&null!==c&&Object(Kr.jsx)(\"textarea\",{className:\"gift-message h-100\",maxLength:140,value:n,onChange:e=>c(e.target.value),placeholder:nt(\"catalog.gift_wrapping_new.message_hint\")}),s&&Object(Kr.jsx)(ei,{italics:!0,textEnd:!0,className:\"pe-1\",children:nt(\"catalog.gift_wrapping_new.message_from\",[\"name\"],[s])})]})})]})},vc=e=>{const{size:t=0,itemActive:s=!1,offset:n=0,column:r=!0,gap:i=2,classNames:a=[],...o}=e,{isCssGrid:l=!1}=Object(c.useContext)($r),u=Object(c.useMemo)((()=>{const e=[];if(t){let s=`col-${t}`;l&&(s=`g-${s}`),e.push(s)}if(s&&e.push(\"active\"),n){let t=`offset-${n}`;l&&(t=`g-start-${n}`),e.push(t)}return a.length&&e.push(...a),e}),[t,s,n,l,a]);return Object(Kr.jsx)(ec,{classNames:u,column:r,gap:i,...o})},Rc=e=>{const{count:t=0,position:s=\"absolute\",classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=[\"fw-bold\",\"nitro-item-count\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsxs)(Qr,{position:\"absolute\",classNames:a,...i,children:[t,r]})},Ac=e=>{const{value:t=0}=e,s=t.toString().split(\"\");return Object(Kr.jsx)(Kr.Fragment,{children:s.map(((e,t)=>Object(Kr.jsx)(\"i\",{className:\"limited-edition-number n-\"+e},t)))})},yc=e=>{const{uniqueNumber:t=0,uniqueSeries:s=0,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=[\"unique-compact-plate\",\"z-index-1\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsxs)(Qr,{classNames:a,...i,children:[Object(Kr.jsx)(\"div\",{children:Object(Kr.jsx)(Ac,{value:t})}),Object(Kr.jsx)(\"div\",{children:Object(Kr.jsx)(Ac,{value:s})}),r]})},wc=e=>{const{uniqueLimitedItemsLeft:t=0,uniqueLimitedSeriesSize:s=0,classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=[\"unique-complete-plate\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(Qr,{classNames:i,...r,children:Object(Kr.jsxs)(vc,{className:\"plate-container\",gap:0,children:[Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",children:[nt(\"unique.items.left\"),Object(Kr.jsx)(\"div\",{children:Object(Kr.jsx)(Ac,{value:t})})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",children:[nt(\"unique.items.number.sold\"),Object(Kr.jsx)(\"div\",{children:Object(Kr.jsx)(Ac,{value:s})})]})]})})},kc=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O=\"relative\",overflow:m=\"hidden\",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=[\"layout-grid-item\",\"border\",\"border-2\",\"border-muted\",\"rounded\"];return n&&e.push(\"active\"),(a||o>0)&&e.push(\"unique-item\"),a&&e.push(\"sold-out\"),l&&e.push(\"unseen\"),u&&e.push(\"has-highlight\"),d&&e.push(\"disabled\"),null===t&&e.push(\"icon\",\"loading-icon\"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(vc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(Rc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:\"unique-bg-override\",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:Object(Kr.jsx)(Ac,{value:o})})]}),p]})},Dc=e=>{const{imageUrl:t=null,...s}=e;return Object(Kr.jsx)(\"img\",{src:t,alt:\"\",...s})},Uc=e=>{const{...t}=e;return Object(Kr.jsxs)(Qr,{classNames:[\"spinner-container\"],...t,children:[Object(Kr.jsx)(Qr,{className:\"spinner\"}),Object(Kr.jsx)(Qr,{className:\"spinner\"}),Object(Kr.jsx)(Qr,{className:\"spinner\"})]})},Pc=e=>{const{roomId:t=-1,textureReceiver:s=null,onClose:n=null}=e,r=Object(c.useRef)(),i=Object(c.useCallback)((()=>{if(!r||!r.current)return null;const e=r.current.getBoundingClientRect();return new a.Ye(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),o=Object(c.useCallback)((()=>{Ss(an.CAMERA_SHUTTER),s(L().createTextureFromRoom(t,1,i()))}),[t,i,s]);return Object(Kr.jsx)(_c,{handleSelector:\".nitro-room-thumbnail-camera\",children:Object(Kr.jsxs)(ec,{className:\"nitro-room-thumbnail-camera pt-2 px-1\",children:[Object(Kr.jsx)(ec,{ref:r,className:\"camera-frame\"}),Object(Kr.jsxs)(ec,{gap:1,className:\"align-items-end camera-buttons\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:n,children:nt(\"cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:o,children:nt(\"navigator.thumbeditor.save\")})]})]})})},Mc=e=>{const{title:t=\"\",close:s=null,classNames:n=[],children:r=null,type:i=yr.DEFAULT,...a}=e,o=Object(c.useMemo)((()=>{const e=[\"nitro-alert\"];return e.push(\"nitro-alert-\"+i),n.length&&e.push(...n),e}),[n,i]);return Object(Kr.jsxs)(Ec,{classNames:o,...a,children:[Object(Kr.jsx)(jc,{headerText:t,onCloseClick:s}),Object(Kr.jsx)(uc,{grow:!0,justifyContent:\"between\",overflow:\"hidden\",className:\"text-black\",gap:0,children:r})]})};var Lc=s(24);class Fc{}function Hc(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;switch(e){case Fc.BOUNCE:switch(t){default:return{};case Lc.b:return{animationName:\"bounceIn\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"bounceOut\",animationDuration:`${s}ms`}}case Fc.SLIDE_LEFT:switch(t){default:return{};case Lc.b:return{animationName:\"slideInLeft\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"slideOutLeft\",animationDuration:`${s}ms`}}case Fc.SLIDE_RIGHT:switch(t){default:return{};case Lc.b:return{animationName:\"slideInRight\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"slideOutRight\",animationDuration:`${s}ms`}}case Fc.FLIP_X:switch(t){default:return{};case Lc.b:return{animationName:\"flipInX\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"flipOutX\",animationDuration:`${s}ms`}}case Fc.FADE_UP:switch(t){default:return{};case Lc.b:return{animationName:\"fadeInUp\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"fadeOutDown\",animationDuration:`${s}ms`}}case Fc.FADE_IN:switch(t){default:return{};case Lc.b:return{animationName:\"fadeIn\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"fadeOut\",animationDuration:`${s}ms`}}case Fc.FADE_DOWN:switch(t){default:return{};case Lc.b:return{animationName:\"fadeInDown\",animationDuration:`${s}ms`};case Lc.c:return{animationName:\"fadeOutUp\",animationDuration:`${s}ms`}}case Fc.HEAD_SHAKE:return t===Lc.b?{animationName:\"headShake\",animationDuration:`${s}ms`}:{}}return null}Fc.BOUNCE=\"bounce\",Fc.SLIDE_LEFT=\"slideLeft\",Fc.SLIDE_RIGHT=\"slideRight\",Fc.FLIP_X=\"flipX\",Fc.FADE_IN=\"fadeIn\",Fc.FADE_DOWN=\"fadeDown\",Fc.FADE_UP=\"fadeUp\",Fc.HEAD_SHAKE=\"headShake\";const Bc=e=>{const{type:t=null,inProp:s=!1,timeout:n=300,className:r=null,children:i=null}=e,[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{let e=null;return s?o(!0):e=setTimeout((()=>{o(!1),clearTimeout(n)}),n),()=>{e&&clearTimeout(e)}}),[s,n]),Object(Kr.jsx)(Lc.d,{in:s,timeout:n,children:e=>Object(Kr.jsx)(\"div\",{className:(null!==r&&void 0!==r?r:\"\")+\" animate__animated\",style:{...Hc(t,e,n)},children:a&&i})})},Gc=e=>{const{fadesOut:t=!0,timeoutMs:s=8e3,close:n=null,overflow:r=\"hidden\",classNames:i=[],...a}=e,[o,l]=Object(c.useState)(!1),u=Object(c.useMemo)((()=>{const e=[\"nitro-notification-bubble\",\"rounded\",\"p-2\",\"notification-height\"];return i.length&&e.push(...i),e}),[i]);return Object(c.useEffect)((()=>(l(!0),()=>l(!1))),[]),Object(c.useEffect)((()=>{if(!t)return;const e=setTimeout((()=>{l(!1),setTimeout((()=>n()),300)}),s);return()=>clearTimeout(e)}),[t,s,n]),Object(Kr.jsx)(Bc,{type:Fc.FADE_IN,inProp:o,timeout:300,children:Object(Kr.jsx)(ec,{overflow:r,classNames:u,onClick:n,...a})})},Wc=e=>{const{figure:t=\"\",typeId:s=-1,paletteId:n=-1,petColor:r=16777215,customParts:i=[],posture:o=\"std\",headOnly:l=!1,direction:u=0,scale:d=1,style:h={},...j}=e,[b,g]=Object(c.useState)(null),O=Object(c.useRef)(!1),m=Object(c.useMemo)((()=>{let e={};return b&&b.length&&(e.backgroundImage=`url(${b})`),1!==d&&(e.transform=`scale(${d})`,d%1||(e.imageRendering=\"pixelated\")),Object.keys(h).length&&(e={...e,...h}),e}),[b,d,h]);Object(c.useEffect)((()=>{let e=s,c=n,d=r,h=i,j=l;if(t&&t.length){const s=new a.of(t);e=s.typeId,c=s.paletteId,d=s.color,h=s.customParts}16===e&&(j=!1);const b=L().getRoomObjectPetImage(e,c,d,new a.Ui(45*u),64,{imageReady:(e,t,s)=>{O.current||(s?g(s.src):t&&g(a.Sh.generateImageUrl(t)))},imageFailed:e=>{}},j,0,h,o);if(b){const e=b.getImage();e&&g(e.src)}}),[t,s,n,r,i,o,l,u]),Object(c.useEffect)((()=>(O.current=!1,()=>{O.current=!0})),[]);return Object(Kr.jsx)(Qr,{classNames:[\"pet-image\"],style:m,...j})},Vc=e=>{const{text:t=\"\",progress:s=0,maxProgress:n=100,position:r=\"relative\",justifyContent:i=\"center\",classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=[\"nitro-progress-bar\",\"text-white\"];return a.length&&e.push(...a),e}),[a]);return Object(Kr.jsxs)(vc,{position:r,justifyContent:i,classNames:u,...l,children:[t&&t.length>0&&Object(Kr.jsx)(ec,{fit:!0,center:!0,position:\"absolute\",className:\"nitro-progress-bar-text small\",children:t}),Object(Kr.jsx)(Qr,{className:\"nitro-progress-bar-inner\",style:{width:~~(100*(s-0)/(n-0)+0)+\"%\"}}),o]})},qc=e=>{const{level:t=0,classNames:s=[],children:n=null,...r}=e,i=Object(c.useMemo)((()=>{const e=[\"nitro-rarity-level\"];return s.length&&e.push(...s),e}),[s]);return Object(Kr.jsxs)(Qr,{classNames:i,...r,children:[Object(Kr.jsx)(\"div\",{children:t}),n]})},Yc=e=>{const{roomPreviewer:t=null,height:s=0,children:n=null}=e,[r,i]=Object(c.useState)(null),o=Object(c.useRef)(),l=Object(c.useCallback)((e=>{t&&r&&o.current&&(t.updatePreviewRoomView(),r.canvasUpdated&&(o.current.style.backgroundImage=`url(${a.Sh.generateImageUrl(r.master)})`))}),[t,r,o]),u=Object(c.useCallback)((()=>{if(!o.current||!t)return;let e=document.defaultView.getComputedStyle(o.current,null).backgroundColor;e=a.jb.rgbStringToHex(e),e=e.replace(\"#\",\"0x\"),t.backgroundColor=parseInt(e,16);const n=o.current.parentElement.clientWidth;t.getRoomCanvas(n,s);const r=t.getRenderingCanvas();i(r),r.canvasUpdated=!0,l(-1)}),[o,s,t,l]);return Object(c.useEffect)((()=>{if(!t)return;r||u(),C().ticker.add(l);const e=new ResizeObserver((()=>{if(!t||!o.current)return;const e=o.current.parentElement.offsetWidth;t.modifyRoomCanvas(e,s),l(-1)}));return e.observe(o.current),()=>{e.disconnect(),C().ticker.remove(l)}}),[r,t,o,s,u,l]),Object(Kr.jsxs)(\"div\",{className:\"room-preview-container\",children:[Object(Kr.jsx)(\"div\",{ref:o,className:\"room-preview-image\",style:{height:s},onClick:e=>{t&&(e.shiftKey?t.changeRoomObjectDirection():t.changeRoomObjectState())}}),n]})},zc=e=>{const{roomId:t=-1,customUrl:s=null,shrink:n=!0,overflow:r=\"hidden\",classNames:i=[],children:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=[\"room-thumbnail\",\"border\"];return i.length&&e.push(...i),e}),[i]),u=Object(c.useMemo)((()=>s&&s.length?k(\"image.library.url\")+s:k(\"thumbnails.url\").replace(\"%thumbnail%\",t.toString())),[s,t]);return Object(Kr.jsxs)(Qr,{shrink:n,overflow:r,classNames:l,...o,children:[u&&Object(Kr.jsx)(\"img\",{alt:\"\",src:u}),a]})},Kc=e=>{const{color:t=\"\",message:s=\"\",date:n=\"\",senderName:r=\"\",customTitle:c=null,onCloseClick:i=null}=e;return Object(Kr.jsx)(_c,{handleSelector:\".drag-handler\",children:Object(Kr.jsxs)(vc,{gap:0,alignItems:\"center\",className:`nitro-layout-trophy trophy-${t}`,children:[Object(Kr.jsxs)(ec,{center:!0,fullWidth:!0,position:\"relative\",className:\"trophy-header drag-handler\",children:[Object(Kr.jsx)(Qr,{position:\"absolute\",pointer:!0,className:\"trophy-close\",onClick:i}),Object(Kr.jsx)(ei,{bold:!0,children:nt(\"widget.furni.trophy.title\")})]}),Object(Kr.jsxs)(vc,{className:\"trophy-content py-1\",gap:1,children:[c&&Object(Kr.jsx)(ei,{bold:!0,children:c}),s]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",className:\"trophy-footer mt-1\",children:[Object(Kr.jsx)(ei,{bold:!0,children:n}),Object(Kr.jsx)(ei,{bold:!0,children:r})]})]})})},Qc=e=>{const{userId:t=0,userName:s=null,classNames:n=[],pointer:r=!0,children:i=null,...a}=e,o=Object(c.useMemo)((()=>{const e=[\"nitro-friends-spritesheet\",\"icon-profile-sm\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(Qr,{classNames:o,pointer:r,onClick:e=>Lr(t),...a,children:i})},$c=e=>{const{isActive:t=!1,count:s=0,overflow:n=\"hidden\",position:r=\"relative\",pointer:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=[\"nav-link\",\"cursor-pointer\",\"position-relative\"];return t&&e.push(\"active\"),a.length&&e.push(...a),e}),[t,a]);return Object(Kr.jsxs)(ec,{pointer:i,position:r,classNames:u,...l,children:[Object(Kr.jsx)(ec,{shrink:!0,center:!0,children:o}),s>0&&Object(Kr.jsx)(Rc,{count:s})]})},Xc=e=>{const{justifyContent:t=\"center\",gap:s=1,classNames:n=[],children:r=null,subClassName:i=\"\",...a}=e,o=Object(c.useMemo)((()=>{const e=[\"container-fluid\",\"nitro-card-tabs\",\"pt-1\",\"position-relative\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{classNames:o,...a,children:Object(Kr.jsx)(\"ul\",{className:\"nav nav-tabs border-0 \"+i,children:r})})},Jc=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=[\"form-group\"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(ec,{classNames:n,...s})},Zc=e=>{const{variant:t=\"black\",height:s=1,classNames:n=[],style:r={},...i}=e,a=Object(c.useMemo)((()=>{const e=[];return t&&e.push(\"bg-\"+t),n.length&&e.push(...n),e}),[t,n]),o=Object(c.useMemo)((()=>{let e={display:\"list-item\"};return s>0&&(e.height=s),Object.keys(r).length&&(e={...e,...r}),e}),[s,r]);return Object(Kr.jsx)(Qr,{classNames:a,style:o,...i})},ei=e=>{const{variant:t=null,fontWeight:s=null,fontSize:n=0,align:r=null,bold:i=!1,gfbold:a=!1,underline:o=!1,italics:l=!1,truncate:u=!1,center:d=!1,textEnd:h=!1,small:j=!1,wrap:b=!1,noWrap:g=!1,textBreak:O=!1,...m}=e,p=Object(c.useMemo)((()=>{const e=[\"\"];return t&&e.push(\"text-\"+t),i&&e.push(\"font-bold\"),a&&e.push(\"goldfish-bold\"),s&&e.push(\"fw-\"+s),n&&e.push(\"fs-\"+n),r&&e.push(\"text-\"+r),o&&e.push(\"text-decoration-underline\"),l&&e.push(\"font-italic\"),u&&e.push(\"text-truncate\"),d&&e.push(\"text-center\"),h&&e.push(\"text-end\"),j&&e.push(\"small\"),b&&e.push(\"text-wrap\"),g&&e.push(\"text-nowrap\"),O&&e.push(\"text-break\"),e}),[t,s,n,r,i,a,o,l,u,d,h,j,b,g,O]);return Object(Kr.jsx)(Qr,{classNames:p,...m})};const ti=Math.floor(30*Math.random()),si=e=>{const{isError:t=!1,message:s=\"\",percent:n=0}=e;return Object(c.useEffect)((()=>{t&&Pr.simpleAlert(s,null,null,null,\"Connection Error\")}),[t,s]),Object(Kr.jsxs)(vc,{fullHeight:!0,alignItems:\"center\",justifyContent:\"center\",className:\"nitro-loading\",children:[Object(Kr.jsxs)(\"div\",{className:\"loading-stories\",children:[Object(Kr.jsx)(\"div\",{className:\"loadingPhoto position-absolute\",\"data-image\":ti}),Object(Kr.jsx)(\"div\",{className:\"imageOverlay position-absolute\"})]}),Object(Kr.jsx)(vc,{className:\"text-center py-4\",children:t&&s&&s.length?Object(Kr.jsx)(Qr,{className:\"fs-4 text-shadow\",children:s}):Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{className:\"fs-4 text-shadow\",children:s}),Object(Kr.jsx)(\"div\",{className:\"nitro-loading-bar mt-2\",children:Object(Kr.jsx)(\"div\",{className:\"nitro-loading-bar-inner\",style:{width:`${n}%`}})}),Object(Kr.jsx)(\"div\",{className:\"percent\",children:Object(Kr.jsxs)(\"p\",{children:[n.toFixed(),\"%\"]})})]})})]})},ni=e=>{const{achievement:t=null,scale:s=1,...n}=e;return t?Object(Kr.jsx)(Ic,{badgeCode:u(t),isGrayscale:!b(t),scale:s,...n}):null},ri=e=>{const{achievement:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return t?Object(Kr.jsxs)(kc,{itemActive:s===t.achievementId,itemUnseen:t.unseen>0,onClick:e=>n(t.achievementId),...c,children:[Object(Kr.jsx)(ni,{achievement:t}),r]}):null},ci=e=>{const{achievements:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,children:r=null,...c}=e;return Object(Kr.jsxs)(Zr,{columnCount:6,columnMinWidth:50,columnMinHeight:50,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(ri,{achievement:e,selectedAchievementId:s,setSelectedAchievementId:n},t))),r]})},ii=e=>{const{achievement:t=null,children:s=null,...n}=e;return t?Object(Kr.jsxs)(ec,{shrink:!0,className:\"bg-muted rounded p-2 text-black\",gap:2,overflow:\"hidden\",...n,children:[Object(Kr.jsxs)(vc,{center:!0,gap:1,children:[Object(Kr.jsx)(ni,{className:\"nitro-achievements-badge-image\",achievement:t,scale:2}),Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(\"achievements.details.level\",[\"level\",\"limit\"],[g(t).toString(),t.levelCount.toString()])})]}),Object(Kr.jsxs)(vc,{fullWidth:!0,justifyContent:\"center\",overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",truncate:!0,children:et(u(t))}),Object(Kr.jsx)(ei,{textBreak:!0,children:Ze(u(t))})]}),(t.levelRewardPoints>0||t.scoreLimit>0)&&Object(Kr.jsxs)(vc,{gap:1,children:[t.levelRewardPoints>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{truncate:!0,className:\"small\",children:nt(\"achievements.details.reward\")}),Object(Kr.jsxs)(ec,{center:!0,className:\"fw-bold small\",gap:1,children:[t.levelRewardPoints,Object(Kr.jsx)(Tc,{type:t.levelRewardPointType})]})]}),t.scoreLimit>0&&Object(Kr.jsx)(Vc,{text:nt(\"achievements.details.progress\",[\"progress\",\"limit\"],[(t.currentPoints+t.scoreAtStartOfLevel).toString(),(t.scoreLimit+t.scoreAtStartOfLevel).toString()]),progress:t.currentPoints+t.scoreAtStartOfLevel,maxProgress:t.scoreLimit+t.scoreAtStartOfLevel})]})]}),s]}):null},ai=e=>{const{category:t=null,selectedAchievementId:s=-1,setSelectedAchievementId:n=null,setAchievementSeen:r=null}=e,i=Object(c.useMemo)((()=>-1===s?null:t.achievements.find((e=>e.achievementId===s))),[t,s]);return Object(c.useEffect)((()=>{i||t.achievements.length&&n(t.achievements[0].achievementId)}),[i,t,n]),Object(c.useEffect)((()=>{i&&r(t.code,i.achievementId)}),[i,t,r]),t?Object(Kr.jsxs)(vc,{fullHeight:!0,justifyContent:\"between\",children:[Object(Kr.jsx)(ci,{achievements:t.achievements,selectedAchievementId:s,setSelectedAchievementId:n}),!!i&&Object(Kr.jsx)(ii,{achievement:i})]}):null},oi=e=>{const{category:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;if(!t)return null;const i=h(t),a=o(t),l=d(t,i),u=j(t);return Object(Kr.jsxs)(kc,{itemActive:s===t.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:e=>n(t.code),...c,children:[Object(Kr.jsx)(ei,{fullWidth:!0,center:!0,small:!0,className:\"pt-1\",children:nt(`quests.${t.code}.name`)}),Object(Kr.jsx)(xc,{position:\"relative\",imageUrl:l,children:Object(Kr.jsxs)(ei,{fullWidth:!0,center:!0,position:\"absolute\",variant:\"white\",style:{fontSize:12,bottom:9},children:[i,\" / \",a]})}),r]})},li=e=>{const{categories:t=null,selectedCategoryCode:s=null,setSelectedCategoryCode:n=null,children:r=null,...c}=e;return Object(Kr.jsxs)(Zr,{columnCount:3,columnMinWidth:90,columnMinHeight:100,...c,children:[t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(oi,{category:e,selectedCategoryCode:s,setSelectedCategoryCode:n},t))),r]})},ui=e=>{const[t,s]=Object(c.useState)(!1),{achievementCategories:n=[],selectedCategoryCode:r=null,setSelectedCategoryCode:i=null,selectedAchievementId:a=-1,setSelectedAchievementId:o=null,achievementScore:l=0,getProgress:u=0,getMaxProgress:h=0,setAchievementSeen:j=null}=at(),b=Object(c.useMemo)((()=>null===r?null:n.find((e=>e.code===r))),[n,r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}},eventUrlPrefix:\"achievements/\"};return N(e),()=>M(e)}),[]),t?Object(Kr.jsxs)(Ec,{uniqueKey:\"achievements\",className:\"nitro-achievements\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"inventory.achievements\"),onCloseClick:e=>s(!1)}),b&&Object(Kr.jsxs)(bc,{position:\"relative\",className:\"justify-content-center align-items-center cursor-pointer\",gap:3,children:[Object(Kr.jsx)(Qr,{onClick:e=>i(null),className:\"nitro-achievements-back-arrow\"}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{fontSize:4,fontWeight:\"bold\",className:\"text-small\",children:nt(`quests.${b.code}.name`)}),Object(Kr.jsx)(ei,{children:nt(\"achievements.details.categoryprogress\",[\"progress\",\"limit\"],[b.getProgress().toString(),b.getMaxProgress().toString()])})]}),Object(Kr.jsx)(Dc,{imageUrl:d(b,null,!0)})]}),Object(Kr.jsxs)(uc,{gap:1,children:[!b&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(li,{categories:n,selectedCategoryCode:r,setSelectedCategoryCode:i}),Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,center:!0,children:nt(\"achievements.categories.score\",[\"score\"],[l.toString()])}),Object(Kr.jsx)(Vc,{text:nt(\"achievements.categories.totalprogress\",[\"progress\",\"limit\"],[u.toString(),h.toString()]),progress:u,maxProgress:h})]})]}),b&&Object(Kr.jsx)(ai,{category:b,selectedAchievementId:a,setSelectedAchievementId:o,setAchievementSeen:j})]})]}):null};class di{}di.ACTION_SAVE=\"AEA_ACTION_SAVE\",di.ACTION_CLEAR=\"AEA_ACTION_CLEAR\",di.ACTION_RESET=\"AEA_ACTION_RESET\",di.ACTION_RANDOMIZE=\"AEA_ACTION_RANDOMIZE\";class hi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._partColor=void 0,this._isDisabled=void 0,this._isHC=void 0,this._isSelected=void 0,this._notifier=void 0,this._partColor=e,this._isDisabled=t,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return a.jb.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class ji{constructor(){this._data=void 0,this._colors=void 0,this._gender=\"M\",this._direction=ji.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(e,t){this._data=new Map,this._colors=new Map,this._gender=t,this.parseFigureString(e),this.updateView()}parseFigureString(e){if(!e)return;const t=e.split(\".\");if(t&&t.length)for(const s of t){const e=s.split(\"-\");if(!e.length)continue;const t=e[0],n=parseInt(e[1]),r=[];let c=2;for(;c<e.length;)r.push(parseInt(e[c])),c++;r.length||r.push(0),this.savePartSetId(t,n,!1),this.savePartSetColourId(t,r,!1)}}getPartSetId(e){const t=this._data.get(e);return void 0!==t?t:-1}getColorIds(e){const t=this._colors.get(e);return void 0!==t?t:[Oi.avatarSetFirstSelectableColor(e)]}getFigureString(){let e=\"\";const t=[];for(const[n,r]of this._data.entries()){const e=this._colors.get(n);let s=n+\"-\"+r;if(e&&e.length){let t=0;for(;t<e.length;)s=s+\"-\"+e[t],t++}t.push(s)}let s=0;for(;s<t.length;)e+=t[s],s<t.length-1&&(e+=\".\"),s++;return e}savePartData(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.savePartSetId(e,t,n),this.savePartSetColourId(e,s,n)}savePartSetId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case ji.FACE:case ji.HAIR:case ji.HAT:case ji.HEAD_ACCESSORIES:case ji.EYE_ACCESSORIES:case ji.FACE_ACCESSORIES:case ji.SHIRT:case ji.JACKET:case ji.CHEST_ACCESSORIES:case ji.CHEST_PRINTS:case ji.TROUSERS:case ji.SHOES:case ji.TROUSER_ACCESSORIES:t>=0?this._data.set(e,t):this._data.delete(e)}s&&this.updateView()}savePartSetColourId(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case ji.FACE:case ji.HAIR:case ji.HAT:case ji.HEAD_ACCESSORIES:case ji.EYE_ACCESSORIES:case ji.FACE_ACCESSORIES:case ji.SHIRT:case ji.JACKET:case ji.CHEST_ACCESSORIES:case ji.CHEST_PRINTS:case ji.TROUSERS:case ji.SHOES:case ji.TROUSER_ACCESSORIES:this._colors.set(e,t)}s&&this.updateView()}getFigureStringWithFace(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=\"\";const n=[ji.FACE],r=[];for(const i of n){const s=this._colors.get(i);if(!s)continue;let n=this._data.get(i);i===ji.FACE&&t&&(n=e);let c=i+\"-\"+n;if(n>=0){let e=0;for(;e<s.length;)c=c+\"-\"+s[e],e++}r.push(c)}let c=0;for(;c<r.length;)s+=r[c],c<r.length-1&&(s+=\".\"),c++;return s}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(e){this._direction=e,this.updateView()}set avatarEffectType(e){this._avatarEffectType=e}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(e){this._notifier=e}}ji.DEFAULT_DIRECTION=4,ji.MALE=\"M\",ji.FEMALE=\"F\",ji.UNISEX=\"U\",ji.SCALE=\"h\",ji.STD=\"std\",ji.DEFAULT_FRAME=\"0\",ji.FACE=\"hd\",ji.HAIR=\"hr\",ji.HAT=\"ha\",ji.HEAD_ACCESSORIES=\"he\",ji.EYE_ACCESSORIES=\"ea\",ji.FACE_ACCESSORIES=\"fa\",ji.JACKET=\"cc\",ji.SHIRT=\"ch\",ji.CHEST_ACCESSORIES=\"ca\",ji.CHEST_PRINTS=\"cp\",ji.TROUSERS=\"lg\",ji.SHOES=\"sh\",ji.TROUSER_ACCESSORIES=\"wa\",ji.SET_TYPES=[ji.FACE,ji.HAIR,ji.HAT,ji.HEAD_ACCESSORIES,ji.EYE_ACCESSORIES,ji.FACE_ACCESSORIES,ji.JACKET,ji.SHIRT,ji.CHEST_ACCESSORIES,ji.CHEST_PRINTS,ji.TROUSERS,ji.SHOES,ji.TROUSERS];class bi{constructor(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._renderManager=void 0,this._partSet=void 0,this._partColors=void 0,this._useColors=void 0,this._isDisabled=void 0,this._thumbContainer=void 0,this._imageUrl=void 0,this._maxColorIndex=void 0,this._isValidFigure=void 0,this._isHC=void 0,this._isSellable=void 0,this._isClear=void 0,this._isSelected=void 0,this._disposed=void 0,this._isInitalized=void 0,this._notifier=void 0,this._renderManager=S(),this._partSet=e,this._partColors=t,this._useColors=s,this._isDisabled=n,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,e){const t=e.parts;for(const e of t)this._maxColorIndex=Math.max(this._maxColorIndex,e.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+\"-\"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure&&!this.analyzeFigure())return null;const e=this._partSet.parts.concat().sort(this.sortByDrawOrder),t=new a.Se;for(const s of e){if(!s)continue;let e=null,n=0,r=!1;for(;!r&&n<bi.THUMB_DIRECTIONS.length;){const t=ji.SCALE+\"_\"+ji.STD+\"_\"+s.type+\"_\"+s.id+\"_\"+bi.THUMB_DIRECTIONS[n]+\"_\"+ji.DEFAULT_FRAME;e=this._renderManager.getAssetByName(t),e&&e.texture?r=!0:n++}if(!r)continue;const c=e.offsetX,i=e.offsetY;let o=null;if(this._useColors&&s.colorLayerIndex>0){const e=this._partColors[s.colorLayerIndex-1];e&&(o=e)}const l=new a.af(e.texture);l.position.set(c,i),o&&(l.tint=o.rgb),t.addChild(l)}return t}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=a.Sh.generateImageUrl(e),this.notify&&this.notify())}setAlpha(e,t){return e.filters=[bi.ALPHA_FILTER],e}sortByDrawOrder(e,t){const s=bi.DRAW_ORDER.indexOf(e.type),n=bi.DRAW_ORDER.indexOf(t.type);return s<n?-1:s>n?1:e.index<t.index?-1:e.index>t.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(e){this._partColors=e,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}bi.ALPHA_FILTER=new a.Qe(.2),bi.THUMB_DIRECTIONS=[2,6,0,4,3,1],bi.DRAW_ORDER=[a.p.LEFT_HAND_ITEM,a.p.LEFT_HAND,a.p.LEFT_SLEEVE,a.p.LEFT_COAT_SLEEVE,a.p.BODY,a.p.SHOES,a.p.LEGS,a.p.CHEST,a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST_PRINT,a.p.WAIST_ACCESSORY,a.p.RIGHT_HAND,a.p.RIGHT_SLEEVE,a.p.RIGHT_COAT_SLEEVE,a.p.HEAD,a.p.FACE,a.p.EYES,a.p.HAIR,a.p.HAIR_BIG,a.p.FACE_ACCESSORY,a.p.EYE_ACCESSORY,a.p.HEAD_ACCESSORY,a.p.HEAD_ACCESSORY_EXTRA,a.p.RIGHT_HAND_ITEM];class gi{constructor(e,t,s){this._name=void 0,this._parts=void 0,this._palettes=void 0,this._selectedPartIndex=-1,this._paletteIndexes=void 0,this._name=e,this._parts=t,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(e,t){if(!e||!e.length)return-1;let s=0;for(;s<e.length;){const n=e[s];if(n.partColor&&n.partColor.clubLevel<=t)return n.partColor.id;s++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const t of e)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===e)return void this.selectPartIndex(t);t++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let t=0;for(;t<this._palettes.length;){const s=this.getPalette(t);if(s){let n=0;if(e.length>t)n=e[t];else{const e=s[0];e&&e.partColor&&(n=e.partColor.id)}let r=0;for(;r<s.length;){const e=s[r];e.partColor.id===n?(this._paletteIndexes[t]=r,e.isSelected=!0):e.isSelected=!1,r++}}t++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const e=this._parts[this._selectedPartIndex];e&&(e.isSelected=!1)}if(this._parts.length>e){const t=this._parts[e];if(t)return t.isSelected=!0,this._selectedPartIndex=e,t}return null}selectColorIndex(e,t){const s=this.getPalette(t);if(!s)return null;if(s.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=e;const n=s[e];return n?(n.isSelected=!0,this.updatePartColors(),n):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,t){const s=this.getPalette(t);if(!s)return;if(s.length<=e)return;const n=s[e];n&&(n.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const t=e[0];if(!t||!t.partColor)return null;const s=t.partColor.id,n=[];let r=0;for(;r<this._paletteIndexes.length;){const e=this._palettes[r];if(e&&!(e.length<=r))if(e.length>this._paletteIndexes[r]){const t=e[this._paletteIndexes[r]];t&&t.partColor?n.push(t.partColor.id):n.push(s)}else n.push(s);r++}const c=this.getCurrentPart();return c?n.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let t=0;for(;t<this._paletteIndexes.length;){const s=this.getSelectedColor(t);s?e.push(s.partColor):e.push(null),t++}return e}getSelectedColor(e){const t=this.getPalette(e);return!t||t.length<=this._paletteIndexes[e]?null:t[this._paletteIndexes[e]]}getSelectedColorId(e){const t=this.getSelectedColor(e);return t&&t.partColor?t.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const t of this._parts)t&&(t.partColors=e)}hasClubSelectionsOverLevel(e){let t=!1;const s=this.getSelectedColors();if(s){let n=0;for(;n<s.length;){const r=s[n];r&&r.clubLevel>e&&(t=!0),n++}}const n=this.getCurrentPart();if(n&&n.partSet){const s=n.partSet;s&&s.clubLevel>e&&(t=!0)}return t}hasInvalidSelectedItems(e){const t=this.getCurrentPart();if(!t)return!1;const s=t.partSet;return s&&s.isSellable?e.indexOf(s.id)>-1:void 0}stripClubItemsOverLevel(e){const t=this.getCurrentPart();if(t&&t.partSet){if(t.partSet.clubLevel>e){const e=this.selectPartIndex(0);return e&&!e.partSet&&this.selectPartIndex(1),!0}}return!1}stripClubColorsOverLevel(e){const t=[],s=this.getSelectedColors(),n=this.getPalette(0);let r=!1;const c=gi.defaultColorId(n,e);if(-1===c)return!1;let i=0;for(;i<s.length;){const n=s[i];n?n.clubLevel>e?(t.push(c),r=!0):t.push(n.id):(t.push(c),r=!0),i++}return r&&this.selectColorIds(t),r}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}class Oi{static getGender(e){switch(e){case ji.MALE:case\"m\":case\"M\":e=ji.MALE;break;case ji.FEMALE:case\"f\":case\"F\":e=ji.FEMALE;break;default:e=ji.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,t){if(!e||!t||!this.CURRENT_FIGURE)return null;const s=[],n=[];let r=0;for(;r<this.MAX_PALETTES;)n.push([]),r++;const c=R(t);if(!c)return null;const i=v(c.paletteID);if(!i)return null;let a=this.CURRENT_FIGURE.getColorIds(t);a||(a=[]);const o=new Array(a.length),l=this.clubItemsDimmed,u=te();for(const b of i.colors.getValues())if(b.isSelectable&&(l||u>=b.clubLevel)){let e=0;for(;e<this.MAX_PALETTES;){const t=u<b.clubLevel,s=new hi(b,t);n[e].push(s),e++}if(t!==ji.FACE){let e=0;for(;e<a.length;)b.id===a[e]&&(o[e]=b),e++}}let d=[];d=l?S().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):S().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,u);if(-1===d.indexOf(t)){const e=new bi(null,null,!1);e.isClear=!0,s.push(e)}const h=t!==ji.FACE,j=c.partSets;for(r=j.length-1;r>=0;){const e=j.getWithIndex(r);let t=!1;if((e.gender===ji.UNISEX||e.gender===this.CURRENT_FIGURE.gender)&&(t=!0),e.isSelectable&&t&&(l||u>=e.clubLevel)){const t=u<e.clubLevel;let n=!0;e.isSellable&&(n=this.hasFigureSetId(e.id)),n&&s.push(new bi(e,o,h,t))}r--}for(s.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),r=0;r<this.MAX_PALETTES;)n[r].sort(this.colorSorter),r++;return new gi(t,s,n)}static clubSorter(e,t){const s=e.partSet?e.partSet.clubLevel:9999999999,n=t.partSet?t.partSet.clubLevel:9999999999,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s>n?-1:s<n?1:e.partSet.id>t.partSet.id?-1:e.partSet.id<t.partSet.id?1:0}static colorSorter(e,t){const s=e.partColor?e.partColor.clubLevel:-1,n=t.partColor?t.partColor.clubLevel:-1;return s<n?-1:s>n?1:e.partColor.index<t.partColor.index?-1:e.partColor.index>t.partColor.index?1:0}static noobSorter(e,t){const s=e.partSet?e.partSet.clubLevel:-1,n=t.partSet?t.partSet.clubLevel:-1,r=!!e.partSet&&e.partSet.isSellable,c=!!t.partSet&&t.partSet.isSellable;return r&&!c?1:c&&!r||s<n?-1:s>n?1:e.partSet.id<t.partSet.id?-1:e.partSet.id>t.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const t=R(e);if(!t)return-1;const s=v(t.paletteID);if(!s)return-1;for(const n of s.colors.getValues())if(n.isSelectable&&!(te()<n.clubLevel))return n.id;return-1}static get clubItemsFirst(){return k(\"avatareditor.show.clubitems.first\",!0)}static get clubItemsDimmed(){return k(\"avatareditor.show.clubitems.dimmed\",!0)}}Oi.MAX_PALETTES=2,Oi.CURRENT_FIGURE=null,Oi.FIGURE_SET_IDS=[],Oi.BOUND_FURNITURE_NAMES=[];class mi{constructor(){this._categories=void 0,this._isInitalized=void 0,this._maxPaletteCount=void 0,this._disposed=void 0,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let t=this._categories.get(e);t||(t=Oi.createCategory(this,e),t&&(this._categories.set(e,t),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const t=this._categories.get(e);if(!t)return;const s=Oi.CURRENT_FIGURE.getPartSetId(e);let n=Oi.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t&&t.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const t of this._categories.values())if(t.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let t=!1;for(const[s,n]of this._categories.entries()){let r=!1;if(n.stripClubItemsOverLevel(e)&&(r=!0),n.stripClubColorsOverLevel(e)&&(r=!0),r){const e=n.getCurrentPart();e&&Oi.CURRENT_FIGURE&&Oi.CURRENT_FIGURE.savePartData(s,e.id,n.getSelectedColorIds(),!0),t=!0}}return t}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[t,s]of this._categories.entries()){if(!1){const n=s.getCurrentPart();n&&Oi.CURRENT_FIGURE&&Oi.CURRENT_FIGURE.savePartData(t,n.id,s.getSelectedColorIds(),!0),e=!0}}return e}selectPart(e,t){const s=this._categories.get(e);if(!s)return;const n=s.selectedPartIndex;s.selectPartIndex(t);const r=s.getCurrentPart();r&&(r.isDisabled?s.selectPartIndex(n):(this._maxPaletteCount=r.maxColorIndex,Oi.CURRENT_FIGURE.savePartData(e,r.id,s.getSelectedColorIds(),!0)))}selectColor(e,t,s){const n=this._categories.get(e);if(!n)return;const r=n.getCurrentColorIndex(s);n.selectColorIndex(t,s);n.getSelectedColor(s).isDisabled?n.selectColorIndex(r,s):Oi.CURRENT_FIGURE.savePartSetColourId(e,n.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class pi extends mi{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(ji.FACE),this._isInitalized=!0}selectColor(e,t,s){super.selectColor(e,t,s),this.updateSelectionsFromFigure(ji.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!Oi.CURRENT_FIGURE)return;const t=this._categories.get(e);if(!t)return;const s=Oi.CURRENT_FIGURE.getPartSetId(e);let n=Oi.CURRENT_FIGURE.getColorIds(e);n||(n=[]),t.selectPartId(s),t.selectColorIds(n);for(const r of t.parts){const e=t=>{const s=Oi.CURRENT_FIGURE.getFigureStringWithFace(r.id),n=S().createAvatarImage(s,a.q.LARGE,null,{resetFigure:e,dispose:null,disposed:!1}),c=n.getImageAsSprite(a.r.HEAD);c&&(c.y=10,r.thumbContainer=c,setTimeout((()=>n.dispose()),0))};e(null)}}get canSetGender(){return!0}get name(){return a.m.GENERIC}}function _i(e){const t=e.parts;let s=0;for(const n of t)s=Math.max(s,n.colorLayerIndex);return s}function Ei(e,t){return t=t.filter((t=>-1===e.indexOf(t))),[...e,...nn.getRandomElements(t,nn.getRandomNumber(t.length)+1)]}function fi(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)return null;const r=e.partSets.getValues().filter((e=>!e.isSelectable||\"U\"!==e.gender&&e.gender!==t||e.clubLevel>s||e.isSellable&&-1===n.indexOf(e.id)?null:e));return r&&r.length?nn.getRandomElement(r):null}function xi(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];const n=e.colors.getValues().filter((e=>!e.isSelectable||e.clubLevel>s?null:e));return n&&n.length?nn.getRandomElements(n,_i(t)):null}class Ii extends mi{init(){super.init(),this.addCategory(ji.HAIR),this.addCategory(ji.HAT),this.addCategory(ji.HEAD_ACCESSORIES),this.addCategory(ji.EYE_ACCESSORIES),this.addCategory(ji.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.HEAD}}class Ti extends mi{init(){super.init(),this.addCategory(ji.TROUSERS),this.addCategory(ji.SHOES),this.addCategory(ji.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.LEGS}}class Ci extends mi{init(){super.init(),this.addCategory(ji.SHIRT),this.addCategory(ji.CHEST_PRINTS),this.addCategory(ji.JACKET),this.addCategory(ji.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return a.m.TORSO}}const Ni=e=>{const{figureData:t=null}=e,[s,n]=Object(c.useState)(-1),r=Object(c.useCallback)((()=>{n((e=>e+1))}),[]),i=Object(c.useCallback)((e=>{e<a.l.MIN_DIRECTION&&(e=a.l.MAX_DIRECTION+(e+1)),e>a.l.MAX_DIRECTION&&(e-=a.l.MAX_DIRECTION+1),t.direction=e}),[t]);return Object(c.useEffect)((()=>{if(t)return t.notify=r,()=>{t.notify=null}}),[t,r]),Object(Kr.jsxs)(vc,{className:\"figure-preview-container\",overflow:\"hidden\",position:\"relative\",children:[Object(Kr.jsx)(fc,{figure:t.getFigureString(),direction:t.direction,scale:2}),Object(Kr.jsx)(Qr,{className:\"avatar-shadow\"}),Object(Kr.jsx)(Qr,{className:\"arrow-container\",children:Object(Kr.jsx)(\"i\",{className:\"icon arrow-left\",onClick:e=>i(t.direction+1)})})]})},Si=e=>{const{icon:t=null,selected:s=!1,classNames:n=[],children:r=null,...i}=e,a=Object(c.useMemo)((()=>{const e=[\"nitro-avatar-editor-spritesheet\"];return t&&t.length&&e.push(t+\"-icon\"),s&&e.push(\"selected\"),n.length&&e.push(...n),e}),[t,s,n]);return Object(Kr.jsx)(Qr,{classNames:a,...i})},vi=e=>{const{partItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=k(\"hc.disabled\",!1),o=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=o,()=>{t.notify=null})),[t,o]),Object(Kr.jsxs)(kc,{itemImage:t.isClear?void 0:t.imageUrl,itemActive:t.isSelected,...n,children:[!a&&t.isHC&&Object(Kr.jsx)(\"i\",{className:\"icon hc-icon position-absolute\"}),t.isClear&&Object(Kr.jsx)(Si,{icon:\"clear\"}),t.isSellable&&Object(Kr.jsx)(Si,{icon:\"sellable\",position:\"absolute\",className:\"end-1 bottom-1\"}),s]})},Ri=e=>{const{model:t=null,category:s=null,setMaxPaletteCount:n=null}=e,r=Object(c.useCallback)((e=>{const r=s.parts.indexOf(e);if(-1===r)return;t.selectPart(s.name,r);const c=s.getCurrentPart();n(c.maxColorIndex||1)}),[t,s,n]);return Object(Kr.jsx)(Zr,{columnCount:3,columnMinHeight:50,children:s.parts.length>0&&s.parts.map(((e,t)=>Object(Kr.jsx)(vi,{partItem:e,onClick:t=>r(e)},t)))})},Ai=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O=\"relative\",overflow:m=\"hidden\",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=[\"layout-grid-item\",\"color-picker-frame\"];return n&&e.push(\"active\"),(a||o>0)&&e.push(\"unique-item\"),a&&e.push(\"sold-out\"),l&&e.push(\"unseen\"),u&&e.push(\"has-highlight\"),d&&e.push(\"disabled\"),null===t&&e.push(\"icon\",\"loading-icon\"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(vc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(Rc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:\"unique-bg-override\",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:Object(Kr.jsx)(Ac,{value:o})})]}),p]})},yi=e=>{const{colorItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(-1),a=k(\"hc.disabled\",!1),o=Object(c.useCallback)((()=>{i((e=>e+1))}),[]);return Object(c.useEffect)((()=>(t.notify=o,()=>t.notify=null))),Object(Kr.jsxs)(Ai,{itemHighlight:!0,itemColor:t.color,itemActive:t.isSelected,className:\"color-picker-frame clear-bg\",...n,children:[!a&&t.isHC&&Object(Kr.jsx)(\"i\",{className:\"icon hc-icon position-absolute\"}),s]})},wi=e=>{const{model:t=null,category:s=null,paletteSet:n=[],paletteIndex:r=-1}=e,i=Object(c.useCallback)((e=>{const c=n.indexOf(e);-1!==c&&t.selectColor(s.name,c,r)}),[t,s,n,r]);return Object(Kr.jsx)(Zr,{gap:1,columnCount:5,columnMinWidth:11,className:\"p-1\",children:n.length>0&&n.map(((e,t)=>Object(Kr.jsx)(yi,{colorItem:e,onClick:t=>i(e)},t)))})},ki=e=>{const{model:t=null,gender:s=null,setGender:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(1),l=Object(c.useCallback)((e=>{const s=t.categories.get(e);if(s){s.init(),i(s);for(const e of s.parts)if(e&&e.isSelected){o(e.maxColorIndex||1);break}}}),[t]);return Object(c.useEffect)((()=>{t.init();for(const e of t.categories.keys()){l(e);break}}),[t,l]),t&&r?Object(Kr.jsx)(Jr,{children:Object(Kr.jsxs)(vc,{className:\"choose-clothing overflow-auto\",children:[Object(Kr.jsxs)(ec,{justifyContent:\"center\",gap:4,children:[t.canSetGender&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{center:!0,pointer:!0,className:\"category-item\",gap:3,onClick:e=>n(ji.MALE),children:[Object(Kr.jsx)(Si,{icon:\"male\",selected:s===ji.MALE}),Object(Kr.jsx)(ei,{bold:!0,children:nt(\"avatareditor.generic.boy\")})]}),Object(Kr.jsxs)(ec,{center:!0,pointer:!0,className:\"category-item\",gap:3,onClick:e=>n(ji.FEMALE),children:[Object(Kr.jsx)(Si,{icon:\"female\",selected:s===ji.FEMALE}),Object(Kr.jsx)(ei,{bold:!0,children:nt(\"avatareditor.generic.girl\")})]})]}),!t.canSetGender&&t.categories&&t.categories.size>0&&Array.from(t.categories.keys()).map((e=>{const s=t.categories.get(e);return Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"category-item\",onClick:t=>l(e),children:Object(Kr.jsx)(Si,{icon:s.name,selected:r===s})},e)}))]}),Object(Kr.jsx)(vc,{className:\"h-50\",size:5,overflow:\"hidden\",children:Object(Kr.jsx)(Ri,{model:t,category:r,setMaxPaletteCount:o})}),Object(Kr.jsxs)(vc,{size:5,overflow:\"hidden\",className:\"h-50\",children:[a>=1&&Object(Kr.jsx)(wi,{model:t,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),2===a&&Object(Kr.jsx)(wi,{model:t,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]})}):null},Di=e=>{const{figureData:t=null,savedFigures:s=[],setSavedFigures:n=null,loadAvatarInEditor:r=null}=e,i=k(\"hc.disabled\",!1),o=Object(c.useCallback)((e=>{if(e>=s.length||e<0)return;const[t,n]=s[e];r(t.getFigureString(),n)}),[s,r]),l=Object(c.useCallback)((e=>{if(!t||e>=s.length||e<0)return;const r=[...s],c=t.getFigureString(),i=t.gender;r[e]=[S().createFigureContainer(c),i],n(r),$n(new a.Eh(e+1,c,i))}),[t,s,n]),u=Object(c.useMemo)((()=>{if(!s||!s.length)return[];const e=[];return s.forEach(((t,s)=>{let[n,r]=t,c=0;n&&(c=S().getFigureClubLevel(n,r)),e.push(Object(Kr.jsxs)(kc,{position:\"relative\",overflow:\"hidden\",className:\"nitro-avatar-editor-wardrobe-figure-preview\",children:[n&&Object(Kr.jsx)(fc,{figure:n.getFigureString(),gender:r,direction:2}),Object(Kr.jsx)(Qr,{className:\"avatar-shadow\"}),!i&&c>0&&Object(Kr.jsx)(Tc,{className:\"position-absolute top-1 start-1\",type:\"hc\"}),Object(Kr.jsxs)(ec,{gap:1,className:\"button-container\",children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>l(s),children:nt(\"avatareditor.wardrobe.save\")}),n&&Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>o(s),disabled:c>te(),children:nt(\"generic_usable.button.use\")})]})]},s))})),e}),[s,i,l,o]);return Object(Kr.jsx)(Zr,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:u})},Ui=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)([]),[_,E]=Object(c.useState)(!1),[f,x]=Object(c.useState)(null),[I,T]=Object(c.useState)(null),[C,v]=Object(c.useState)(!0),[R,A]=Object(c.useState)(!1),y=Object(c.useMemo)((()=>k(\"avatar.wardrobe.max.slots\",10)),[]),w=Object(c.useCallback)((e=>{const t=e.getParser();b(t.figureSetIds),O(t.boundsFurnitureNames)}),[]);it(a.yb,w);const D=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];let n=0;for(;n<y;)s.push([null,null]),n++;for(let[r,[c,i]]of t.looks.entries()){const e=S().createFigureContainer(c);s[r-1]=[e,i]}p(s)}),[y]);it(a.Ti,D);const U=Object(c.useCallback)((e=>{l&&h(l.get(e))}),[l]),P=Object(c.useCallback)((()=>{const e=new Map;e.set(a.m.GENERIC,new pi),e.set(a.m.HEAD,new Ii),e.set(a.m.TORSO,new Ci),e.set(a.m.LEGS,new Ti),u(e)}),[]),L=Object(c.useCallback)((()=>{const e=new Map,t=new ji,s=new ji;t.loadAvatarData(\"hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007\",ji.MALE),s.loadAvatarData(\"hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68\",ji.FEMALE),e.set(ji.MALE,t),e.set(ji.FEMALE,s),r(e),o(e.get(ji.MALE))}),[]),F=Object(c.useCallback)((function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=Oi.getGender(t);let r=i;t!==r.gender&&(r=n.get(t)),e!==r.getFigureString()&&r.loadAvatarData(e,t),r!==i&&o(r),s&&(x(i.getFigureString()),T(i.gender))}),[n,i]),H=Object(c.useCallback)((e=>{switch(e){case di.ACTION_CLEAR:return F(i.getFigureStringWithFace(0,!1),i.gender,!1),void P();case di.ACTION_RESET:return F(f,I),void P();case di.ACTION_RANDOMIZE:const e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];const c=S().structure,i=new a.o(\"\"),o=Ei(c.getMandatorySetTypeIds(t,s),ji.SET_TYPES);for(const a of r){const t=e.getPartSetId(a),s=e.getColorIds(a);i.updatePart(a,t,s)}for(const a of o){if(i.hasPartType(a))continue;const e=c.figureData.getSetType(a),r=fi(e,t,s,n);if(!r)continue;let o=[];r.isColorable&&(o=xi(c.figureData.getPalette(e.paletteID),r,s).map((e=>e.id))),i.updatePart(e.type,r.id,o)}return i.getFigureString()}(i,i.gender,te(),j,[ji.FACE]);return F(e,i.gender,!1),void P();case di.ACTION_SAVE:return $n(new a.Di(i.gender,i.getFigureString())),void s(!1)}}),[i,f,I,j,F,P]),B=Object(c.useCallback)((e=>{e=Oi.getGender(e),o(n.get(e))}),[n]),G=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:G,eventUrlPrefix:\"avatar-editor/\"};return N(e),()=>M(e)}),[G]),Object(c.useEffect)((()=>{p(new Array(y))}),[y]),Object(c.useEffect)((()=>{_&&(h(null),$n(new a.Cc))}),[_]),Object(c.useEffect)((()=>{d&&E(!1)}),[d]),Object(c.useEffect)((()=>{l&&U(a.m.GENERIC)}),[l,U]),Object(c.useEffect)((()=>{if(i)return Oi.CURRENT_FIGURE=i,P(),()=>Oi.CURRENT_FIGURE=null}),[i,P]),Object(c.useEffect)((()=>(Oi.FIGURE_SET_IDS=j,Oi.BOUND_FURNITURE_NAMES=g,P(),()=>{Oi.FIGURE_SET_IDS=null,Oi.BOUND_FURNITURE_NAMES=null})),[j,g,P]),Object(c.useEffect)((()=>{if(t)return n?void 0:(L(),void A(!0))}),[t,n,L]),Object(c.useEffect)((()=>{t&&R&&C&&(F(ee().figure,ee().gender),v(!1))}),[t,R,C,F]),Object(c.useEffect)((()=>{if(!t)return()=>{v(!0)}}),[t]),t&&i?Object(Kr.jsxs)(Ec,{uniqueKey:\"avatar-editor\",className:\"nitro-avatar-editor\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"avatareditor.title\"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(Xc,{className:\"avatar-editor-tabs\",children:[l&&l.size>0&&Array.from(l.keys()).map((e=>{const t=d&&d.name===e;return Object(Kr.jsx)($c,{isActive:t,onClick:t=>U(e),children:nt(`avatareditor.category.${e}`)},e)})),Object(Kr.jsx)($c,{isActive:_,onClick:e=>E(!0),children:nt(\"avatareditor.category.wardrobe\")})]}),Object(Kr.jsx)(uc,{children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:6,overflow:\"hidden\",children:[d&&!_&&Object(Kr.jsx)(ki,{model:d,gender:i.gender,setGender:B}),_&&Object(Kr.jsx)(Di,{figureData:i,savedFigures:m,setSavedFigures:p,loadAvatarInEditor:F})]}),Object(Kr.jsxs)(vc,{size:3,overflow:\"hidden\",children:[Object(Kr.jsx)(Ni,{figureData:i}),Object(Kr.jsx)(vc,{className:\"randomize-container position-absolute\",children:Object(Kr.jsx)(\"i\",{className:\"icon randomize-icon\",onClick:e=>H(di.ACTION_RANDOMIZE)})}),Object(Kr.jsx)(vc,{grow:!0,gap:1,children:Object(Kr.jsx)(tc,{className:\"w-100\",variant:\"success\",onClick:e=>H(di.ACTION_SAVE),children:nt(\"avatareditor.save\")})})]})]})})]}):null},Pi=Object(c.createContext)({cameraRoll:null,setCameraRoll:null,selectedPictureIndex:null,setSelectedPictureIndex:null}),Mi=e=>Object(Kr.jsx)(Pi.Provider,{value:e.value,children:e.children});class Li{constructor(e,t){this.texture=e,this.imageUrl=t}}const Fi=e=>{const{onClose:t=null,onEdit:s=null,onDelete:n=null}=e,{cameraRoll:r=null,setCameraRoll:i=null,selectedPictureIndex:o=-1,setSelectedPictureIndex:l=null}=Object(c.useContext)(Pi),u=Object(c.useRef)(),d=o>-1?r[o]:null,h=Object(c.useCallback)((()=>{if(!u||!u.current)return null;const e=u.current.getBoundingClientRect();return new a.Ye(Math.floor(e.x),Math.floor(e.y),Math.floor(e.width),Math.floor(e.height))}),[]),j=Object(c.useCallback)((()=>{if(o>-1)return void l(-1);const e=L().createTextureFromRoom(ie().roomId,1,h()),t=[...r];t.length>=5&&(Pr.simpleAlert(nt(\"camera.full.body\")),t.pop()),Ss(an.CAMERA_SHUTTER),t.push(new Li(e,a.Sh.generateImageUrl(e))),i(t)}),[r,o,h,i,l]);return Object(Kr.jsx)(_c,{uniqueKey:\"nitro-camera-capture\",children:Object(Kr.jsxs)(vc,{center:!0,className:\"nitro-camera-capture\",gap:0,children:[d&&Object(Kr.jsx)(\"img\",{alt:\"\",className:\"camera-area\",src:d.imageUrl}),Object(Kr.jsxs)(\"div\",{className:\"camera-canvas drag-handler\",children:[Object(Kr.jsx)(\"div\",{className:\"position-absolute header-close\",onClick:t}),!d&&Object(Kr.jsx)(\"div\",{ref:u,className:\"camera-area camera-view-finder\"}),d&&Object(Kr.jsx)(\"div\",{className:\"camera-area camera-frame\",children:Object(Kr.jsxs)(\"div\",{className:\"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center\",children:[Object(Kr.jsx)(\"button\",{className:\"btn btn-success me-3\",title:nt(\"camera.editor.button.tooltip\"),onClick:s,children:nt(\"camera.editor.button.text\")}),Object(Kr.jsx)(\"button\",{className:\"btn btn-danger\",onClick:n,children:nt(\"camera.delete.button.text\")})]})}),Object(Kr.jsx)(\"div\",{className:\"d-flex justify-content-center\",children:Object(Kr.jsx)(\"div\",{className:\"camera-button\",title:nt(\"camera.take.photo.button.tooltip\"),onClick:j})})]}),r.length>0&&Object(Kr.jsx)(ec,{gap:2,justifyContent:\"center\",className:\"camera-roll d-flex justify-content-center py-2\",children:r.map(((e,t)=>Object(Kr.jsx)(\"img\",{alt:\"\",src:e.imageUrl,onClick:e=>l(t)},t)))})]})})},Hi=e=>{const{base64Url:t=null,onCloseClick:s=null,onCancelClick:n=null,price:r=null}=e,[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(0),_=Object(c.useMemo)((()=>k(\"camera.publish.disabled\",!1)),[]),E=Object(c.useCallback)((e=>{h((e=>e+1)),O(!1)}),[]);it(a.N,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();u(t.extraDataId),p(t.secondsToWait),b(t.ok),O(!1)}),[]);it(a.M,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();o(k(\"camera.url\")+\"/\"+t.url)}),[]);it(a.O,x);const I=function(e){switch(e){case\"close\":return void s();case\"buy\":if(g)return;return O(!0),void $n(new a.Gf(\"\"));case\"publish\":if(g)return;return O(!0),void $n(new a.Af);case\"cancel\":return void n()}};return Object(c.useEffect)((()=>{t&&L().saveBase64AsScreenshot(t)}),[t]),r?Object(Kr.jsxs)(Ec,{className:\"nitro-camera-checkout\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"camera.confirm_phase.title\"),onCloseClick:e=>I(\"close\")}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsxs)(ec,{center:!0,children:[i&&i.length&&Object(Kr.jsx)(Dc,{className:\"picture-preview border\",imageUrl:i}),(!i||!i.length)&&Object(Kr.jsx)(ec,{center:!0,className:\"picture-preview border\",children:Object(Kr.jsx)(ei,{bold:!0,children:nt(\"camera.loading\")})})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",className:\"bg-muted rounded p-2\",children:[Object(Kr.jsxs)(vc,{size:_?10:6,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"camera.purchase.header\")}),(r.credits>0||r.duckets>0)&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.purchase.confirmation.dialog.cost\")}),r.credits>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:r.credits}),Object(Kr.jsx)(Tc,{type:-1})]}),r.duckets>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:r.duckets}),Object(Kr.jsx)(Tc,{type:5})]})]}),d>0&&Object(Kr.jsxs)(ei,{children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"camera.purchase.count.info\")}),\" \",d,Object(Kr.jsx)(\"u\",{className:\"ms-1 cursor-pointer\",onClick:()=>y(\"inventory/toggle\"),children:nt(\"camera.open.inventory\")})]})]}),Object(Kr.jsx)(ec,{alignItems:\"center\",children:Object(Kr.jsx)(tc,{variant:\"success\",disabled:g,onClick:e=>I(\"buy\"),children:nt(d?\"camera.buy.another.button.text\":\"buy\")})})]}),!_&&Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",className:\"bg-muted rounded p-2\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(j?\"camera.publish.successful\":\"camera.publish.explanation\")}),Object(Kr.jsx)(ei,{children:nt(j?\"camera.publish.success.short.info\":\"camera.publish.detailed.explanation\")}),j&&Object(Kr.jsx)(\"a\",{href:l,rel:\"noreferrer\",target:\"_blank\",children:nt(\"camera.link.to.published\")}),!j&&r.publishDucketPrice>0&&Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.purchase.confirmation.dialog.cost\")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:r.publishDucketPrice}),Object(Kr.jsx)(Tc,{type:5})]})]}),m>0&&Object(Kr.jsx)(\"div\",{className:\"mt-1 text-center fw-bold\",children:nt(\"camera.publish.wait\",[\"minutes\"],[Math.ceil(m/60).toString()])})]}),!j&&Object(Kr.jsx)(ec,{className:\"d-flex align-items-end\",children:Object(Kr.jsx)(tc,{variant:\"success\",disabled:g||m>0,onClick:e=>I(\"publish\"),children:nt(\"camera.publish.button.text\")})})]}),Object(Kr.jsx)(ei,{center:!0,children:nt(\"camera.warning.disclaimer\")}),Object(Kr.jsx)(ec,{justifyContent:\"end\",children:Object(Kr.jsx)(tc,{onClick:e=>I(\"cancel\"),children:nt(\"generic.cancel\")})})]})]}):null};var Bi=s(16);class Gi{}Gi.COLORMATRIX=\"colormatrix\",Gi.COMPOSITE=\"composite\";class Wi{constructor(e,t){this.effectName=e,this.thumbnailUrl=t}}const Vi=e=>{const{effect:t=null,thumbnailUrl:s=null,isActive:n=!1,isLocked:r=!1,selectEffect:c=null,removeEffect:i=null}=e;return Object(Kr.jsxs)(kc,{title:nt(r?`camera.effect.required.level ${t.minLevel}`:`camera.effect.name.${t.name}`),itemActive:n,onClick:e=>!n&&c(),children:[n&&Object(Kr.jsx)(tc,{variant:\"danger\",className:\"rounded-circle remove-effect\",onClick:i,children:Object(Kr.jsx)(ac.a,{icon:\"times\"})}),!r&&s&&s.length>0&&Object(Kr.jsx)(\"div\",{className:\"effect-thumbnail-image border\",children:Object(Kr.jsx)(\"img\",{alt:\"\",src:s})}),r&&Object(Kr.jsxs)(ei,{center:!0,bold:!0,children:[Object(Kr.jsx)(\"div\",{children:Object(Kr.jsx)(ac.a,{icon:\"lock\"})}),t.minLevel]})]})},qi=e=>{const{myLevel:t=0,selectedEffects:s=[],effects:n=[],thumbnails:r=[],processAction:c=null}=e;return Object(Kr.jsx)(Jr,{columnCount:3,overflow:\"auto\",children:n&&n.length>0&&n.map(((e,n)=>{const i=r.find((t=>t.effectName===e.name)),a=s.findIndex((t=>t.effect.name===e.name))>-1;return Object(Kr.jsx)(Vi,{effect:e,thumbnailUrl:i&&i.thumbnailUrl||null,isActive:a,isLocked:e.minLevel>t,selectEffect:()=>c(\"select_effect\",e.name),removeEffect:()=>c(\"remove_effect\",e.name)},n)}))})},Yi=[Gi.COLORMATRIX,Gi.COMPOSITE],zi=e=>{const{picture:t=null,availableEffects:s=null,myLevel:n=1,onClose:r=null,onCancel:i=null,onCheckout:o=null}=e,[l,u]=Object(c.useState)(Yi[0]),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)([]),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)(!1),_=Object(c.useMemo)((()=>s.filter((e=>e.colorMatrix))),[s]),E=Object(c.useMemo)((()=>s.filter((e=>e.texture))),[s]),f=Object(c.useCallback)((()=>l===Gi.COLORMATRIX?_:E),[l,_,E]),x=Object(c.useCallback)((e=>e&&e.length&&j&&j.length?j.findIndex((t=>t.effect.name===e)):-1),[j]),I=Object(c.useMemo)((()=>x(d)),[d,x]),T=Object(c.useMemo)((()=>d&&j[I]||null),[d,I,j]),C=Object(c.useCallback)((e=>{const t=I;-1!==t&&b((s=>{const n=[...s],r=n[t];return n[I]=new a.ag(r.effect,e),n}))}),[I,b]),N=Object(c.useMemo)((()=>A().applyEffects(t.texture,j,m).src),[t,j,m]),S=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case\"close\":return void r();case\"cancel\":return void i();case\"checkout\":return void o(N);case\"change_tab\":return void u(String(t));case\"select_effect\":{if(x(t)>=0)return;const e=s.find((e=>e.name===t));if(!e)return;return b((t=>[...t,new a.ag(e,1)])),void h(e.name)}case\"remove_effect\":{let e=x(t);if(-1===e)return;return b((t=>{const s=[...t];return s.splice(e,1),s})),void(d===t&&h(null))}case\"clear_effects\":return h(null),void b([]);case\"download\":{const e=new Image;e.src=N;return void window.open(\"\").document.write(e.outerHTML)}case\"zoom\":return void p(!m)}}),[m,s,d,N,x,i,o,r,p,b]);return Object(c.useEffect)((()=>{const e=[];for(const n of s)e.push(new Wi(n.name,A().applyEffects(t.texture,[new a.ag(n,1)],!1).src));O(e)}),[t,s]),Object(Kr.jsxs)(Ec,{className:\"nitro-camera-editor\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"camera.editor.button.text\"),onCloseClick:e=>S(\"close\")}),Object(Kr.jsx)(Xc,{children:Yi.map((e=>Object(Kr.jsx)($c,{isActive:l===e,onClick:t=>S(\"change_tab\",e),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-camera-\"+e})},e)))}),Object(Kr.jsx)(uc,{children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{size:5,overflow:\"hidden\",children:Object(Kr.jsx)(qi,{myLevel:n,selectedEffects:j,effects:f(),thumbnails:g,processAction:S})}),Object(Kr.jsxs)(vc,{size:7,justifyContent:\"between\",overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{center:!0,children:[Object(Kr.jsx)(Dc,{imageUrl:N,className:\"picture-preview\"}),d&&Object(Kr.jsxs)(vc,{center:!0,fullWidth:!0,gap:1,children:[Object(Kr.jsx)(ei,{children:nt(\"camera.effect.name.\"+d)}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:1,step:.01,value:T.alpha,onChange:e=>C(e),renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:t.valueNow})})]})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{onClick:e=>S(\"clear_effects\"),children:Object(Kr.jsx)(ac.a,{icon:\"trash\"})}),Object(Kr.jsx)(tc,{onClick:e=>S(\"download\"),children:Object(Kr.jsx)(ac.a,{icon:\"save\"})}),Object(Kr.jsx)(tc,{onClick:e=>S(\"zoom\"),children:Object(Kr.jsx)(ac.a,{icon:m?\"search-minus\":\"search-plus\"})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>S(\"cancel\"),children:nt(\"generic.cancel\")}),Object(Kr.jsx)(tc,{onClick:e=>S(\"checkout\"),children:nt(\"camera.preview.button.text\")})]})]})]})]})})]})},Ki=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(10),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),m=Object(c.useCallback)((e=>{r(Array.from(A().effects.values()))}),[]);var p,_;p=a.Zf.INITIALIZED,_=m,Pt(p,C().cameraManager.events,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();O({credits:t.creditPrice,duckets:t.ducketPrice,publishDucketPrice:t.publishDucketPrice})}),[]);it(a.Od,E);const f=Object(c.useCallback)((e=>{s(0)}),[]);Gt(a.Yg.ENDED,f),Object(c.useEffect)((()=>{if(!A().isLoaded)return A().init(),void $n(new a.Tf)}),[]);const x=Object(c.useCallback)((e=>{switch(e){case\"close\":return void s(0);case\"edit\":return void s(2);case\"delete\":return void o((e=>{const t=[...e];return t.splice(l,1),t}));case\"editor_cancel\":return void s(1)}}),[l]),I=Object(c.useCallback)((e=>{b(e),s(3)}),[]),T=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(1);case\"hide\":return void s(0);case\"toggle\":return void s((e=>e?0:1))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:T,eventUrlPrefix:\"camera/\"};return N(e),()=>M(e)}),[T]),0===t?null:Object(Kr.jsxs)(Mi,{value:{cameraRoll:i,setCameraRoll:o,selectedPictureIndex:l,setSelectedPictureIndex:u},children:[1===t&&Object(Kr.jsx)(Fi,{onClose:()=>x(\"close\"),onEdit:()=>x(\"edit\"),onDelete:()=>x(\"delete\")}),2===t&&Object(Kr.jsx)(zi,{picture:i[l],myLevel:d,onClose:()=>x(\"close\"),onCancel:()=>x(\"editor_cancel\"),onCheckout:I,availableEffects:n}),3===t&&Object(Kr.jsx)(Hi,{base64Url:j,onCloseClick:()=>x(\"close\"),onCancelClick:()=>x(\"editor_cancel\"),price:g})]})},Qi=e=>{const{itemId:t=-1,state:s=null,product:n=null,active:r=!1,onClick:c=null}=e;return Object(Kr.jsxs)(vc,{fit:!0,center:!0,pointer:!0,className:\"campaign-spritesheet campaign-day-generic-bg rounded calendar-item \"+(r?\"active\":\"\"),onClick:()=>c(t),children:[s===m.STATE_UNLOCKED&&Object(Kr.jsx)(ec,{center:!0,className:\"campaign-spritesheet unlocked-bg\",children:Object(Kr.jsx)(ec,{center:!0,className:\"campaign-spritesheet campaign-opened\",children:n&&Object(Kr.jsx)(Dc,{imageUrl:n.customImage?k(\"image.library.url\")+n.customImage:(e=>{let t=ee().getFloorItemDataByName(e),s=null;return t?s=L().getFurnitureFloorIconUrl(t.id):(t=ee().getWallItemDataByName(e),t&&(s=L().getFurnitureWallIconUrl(t.id))),s})(n.productName)})})}),s!==m.STATE_UNLOCKED&&Object(Kr.jsxs)(ec,{center:!0,className:\"campaign-spritesheet locked-bg\",children:[s===m.STATE_LOCKED_AVAILABLE&&Object(Kr.jsx)(Qr,{className:\"campaign-spritesheet available\"}),(s===m.STATE_LOCKED_EXPIRED||s===m.STATE_LOCKED_FUTURE)&&Object(Kr.jsx)(Qr,{className:\"campaign-spritesheet unavailable\"})]})]})},$i=e=>{const{close:t=null,campaignName:s=null,currentDay:n=null,numDays:r=null,missedDays:i=null,openedDays:a=null,openPackage:o=null,receivedProducts:l=null}=e,[u,d]=Object(c.useState)(n),[h,j]=Object(c.useState)(Math.max(0,u-1)),b=e=>a.includes(e)?m.STATE_UNLOCKED:e>n?m.STATE_LOCKED_FUTURE:i.includes(e)?m.STATE_LOCKED_EXPIRED:m.STATE_LOCKED_AVAILABLE,g=e=>{if(u!==e)d(e);else{b(e)===m.STATE_LOCKED_AVAILABLE&&o(e,!1)}};return Object(Kr.jsxs)(Ec,{className:\"nitro-campaign-calendar\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(`campaign.calendar.${s}.title`),onCloseClick:t}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsxs)(Jr,{fullHeight:!1,justifyContent:\"between\",alignItems:\"center\",children:[Object(Kr.jsx)(vc,{size:1}),Object(Kr.jsx)(vc,{size:10,children:Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:3,children:nt(\"campaign.calendar.heading.day\",[\"number\"],[(u+1).toString()])}),Object(Kr.jsx)(ei,{children:(e=>{switch(b(e)){case m.STATE_UNLOCKED:return nt(\"campaign.calendar.info.unlocked\");case m.STATE_LOCKED_FUTURE:return nt(\"campaign.calendar.info.future\");case m.STATE_LOCKED_EXPIRED:return nt(\"campaign.calendar.info.expired\");default:return nt(\"campaign.calendar.info.available.desktop\")}})(u)})]}),Object(Kr.jsx)(\"div\",{children:ee().isModerator&&Object(Kr.jsx)(tc,{variant:\"danger\",onClick:()=>{const e=u;b(e)!==m.STATE_UNLOCKED&&o(e,!0)},children:\"Force open\"})})]})}),Object(Kr.jsx)(vc,{size:1})]}),Object(Kr.jsxs)(ec,{fullHeight:!0,gap:2,children:[Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"campaign-spritesheet prev\",onClick:()=>{const e=u-1;e<0||(d(e),h>e&&j(h-1))}})}),Object(Kr.jsx)(vc,{center:!0,fullWidth:!0,children:Object(Kr.jsx)(Jr,{fit:!0,columnCount:5,gap:1,children:[...Array(5)].map(((e,t)=>{const s=h+t;return Object(Kr.jsx)(vc,{overflow:\"hidden\",children:Object(Kr.jsx)(Qi,{itemId:s,state:b(s),active:u===s,product:l.has(s)?l.get(s):null,onClick:g})},t)}))})}),Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"campaign-spritesheet next\",onClick:()=>{const e=u+1;e!==r&&(d(e),h+5<e+1&&j(h+1))}})})]})]})]})},Xi=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)(!1),d=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t.calendarData)}),[]);it(a.P,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const c=n;t.doorOpened&&(s((e=>{const t=e.clone();return t.openedDays.push(n),t})),o((e=>{const s=new Map(e);return s.set(c,new O(t.productName,t.customImage,t.furnitureClassName)),s}))),r(-1)}),[n]);it(a.Q,h);const j=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(r(e),$n(s?new a.hf(t.campaignName,e):new a.if(t.campaignName,e)))}),[t]),b=Object(c.useCallback)((()=>{u(!1)}),[]),g=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2)&&\"calendar\"===t[1])u(!0)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:\"openView/\"};return N(e),()=>{M(e)}}),[g]),Object(Kr.jsx)(Kr.Fragment,{children:t&&l&&Object(Kr.jsx)($i,{close:b,campaignName:t.campaignName,currentDay:t.currentDay,numDays:t.campaignDays,openedDays:t.openedDays,missedDays:t.missedDays,openPackage:j,receivedProducts:i})})};var Ji=s(22),Zi=s.n(Ji);const ea=e=>{const{variant:t=\"primary\",size:s=\"\",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=[\"gift-color-btn\"];return t&&e.push(\"btn-\"+t),s&&e.push(\"btn-\"+s),n&&e.push(\"active\"),r&&e.push(\"disabled\"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(Kr.jsx)(ec,{center:!0,classNames:o,...a})},ta=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(\"\"),[d,h]=Object(c.useState)(\"\"),[j,b]=Object(c.useState)(!0),[g,O]=Object(c.useState)(\"\"),[m,p]=Object(c.useState)([]),[_,E]=Object(c.useState)(0),[f,x]=Object(c.useState)(0),[I,T]=Object(c.useState)(0),[C,N]=Object(c.useState)(0),[S,v]=Object(c.useState)(0),[R,A]=Object(c.useState)(!1),{catalogOptions:y=null}=Jt(),{giftConfiguration:w=null}=y,k=Object(c.useCallback)((()=>{s(!1),r(0),o(0),u(\"\"),h(\"\"),b(!0),O(\"\"),E(0),x(0),m.length&&T(m[0].id)}),[m]),D=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void k();case lt.INIT_GIFT:const t=e;return k(),r(t.pageId),o(t.offerId),u(t.extraData),void s(!0)}}),[k]);qt(ht.PURCHASE_SUCCESS,D),qt(lt.INIT_GIFT,D);const U=Object(c.useMemo)((()=>!w||w.defaultStuffTypes.findIndex((e=>e===w.boxTypes[_]))>-1),[w,_]),P=Object(c.useMemo)((()=>w?(1e3*w.boxTypes[_]+w.ribbonTypes[f]).toString():\"\"),[w,_,f]),M=Object(c.useMemo)((()=>{if(!w)return!1;const e=w.boxTypes[_];return!(8===e||e>=3&&e<=6)}),[w,_]),L=Object(c.useCallback)((e=>{switch(e){case\"prev_box\":return void E((e=>0===e?C:e-1));case\"next_box\":return void E((e=>e===C?0:e+1));case\"prev_ribbon\":return void x((e=>0===e?S:e-1));case\"next_ribbon\":return void x((e=>e===S?0:e+1));case\"buy\":return d&&0!==d.length?void $n(new a.Cf(n,i,l,d,g,I,_,f,j)):void A(!0)}}),[l,C,S,g,i,n,d,_,I,f,j]),F=Object(c.useCallback)((()=>{A(!0)}),[]);if(it(a.Ec,F),Object(c.useEffect)((()=>{A(!1)}),[d]),Object(c.useEffect)((()=>{if(!w)return;const e=[];for(const t of w.stuffTypes){const s=ee().getFloorItemData(t);s&&(s.colors&&s.colors.length>0&&e.push({id:t,color:`#${s.colors[0].toString(16)}`}))}N(w.boxTypes.length-1),v(w.ribbonTypes.length-1),e.length&&(T(e[0].id),p(e))}),[w]),!w||!w.isEnabled||!t)return null;const H=\"catalog.gift_wrapping_new.box.\"+(U?\"default\":_),B=`catalog.gift_wrapping_new.ribbon.${f}`,G=\"catalog.gift_wrapping_new.\"+(U?\"freeprice\":\"price\");return Object(Kr.jsxs)(Ec,{uniqueKey:\"catalog-gift\",className:\"nitro-catalog-gift\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"catalog.gift_wrapping.title\"),onCloseClick:k}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsxs)(Jc,{column:!0,children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.gift_wrapping.receiver\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\"+Zi()({\" is-invalid\":R}),value:d,onChange:e=>h(e.target.value)}),R&&Object(Kr.jsx)(Qr,{className:\"invalid-feedback\",children:nt(\"catalog.gift_wrapping.receiver_not_found.title\")})]}),Object(Kr.jsx)(Sc,{figure:ee().figure,userName:ee().userName,message:g,editable:!0,onChange:e=>O(e)}),Object(Kr.jsxs)(Qr,{className:\"form-check\",children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",name:\"showMyFace\",checked:j,onChange:e=>b((e=>!e))}),Object(Kr.jsx)(\"label\",{className:\"form-check-label\",children:nt(\"catalog.gift_wrapping.show_face.title\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[I&&Object(Kr.jsx)(Qr,{className:\"gift-preview\",children:Object(Kr.jsx)(Nc,{productType:er.FLOOR,productClassId:I,extraData:P})}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>L(\"prev_box\"),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-left\"})}),Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>L(\"next_box\"),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-right\"})})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(H)}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[nt(G,[\"price\"],[w.price.toString()]),Object(Kr.jsx)(Tc,{type:-1})]})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>L(\"prev_ribbon\"),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-left\"})}),Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>L(\"next_ribbon\"),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-right\"})})]}),Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(B)})]})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(\"catalog.gift_wrapping.pick_color\")}),Object(Kr.jsx)(sc,{fullWidth:!0,className:\"gap-2\",children:m.map((e=>Object(Kr.jsx)(ea,{variant:\"dark\",active:e.id===I,disabled:!M,style:{backgroundColor:e.color},onClick:()=>T(e.id)},e.id)))})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",children:[Object(Kr.jsx)(tc,{variant:\"link\",onClick:k,className:\"text-black\",children:nt(\"cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>L(\"buy\"),children:nt(\"catalog.gift_wrapping.give_gift\")})]})]})]})},sa=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(!1),{currentType:i=null,rootNode:a=null,offersToNodes:o=null,searchResult:l=null,setSearchResult:u=null,setCurrentPage:d=null}=Jt(),h=e=>{e&&e.length?(s(e),r(!0)):(s(\"\"),l&&u(null))},j=Object(c.useCallback)((e=>{if(r(!1),!(e=e.toLocaleLowerCase().replace(\" \",\"\"))||!e.length)return;const t=ee().getAllFurnitureData({loadFurnitureData:null});if(!t||!t.length)return;const s=[],n=[];for(const r of t){if(i===T.BUILDER&&!r.availableForBuildersClub)continue;if(i===T.NORMAL&&r.excludeDynamic)continue;const t=[r.className,r.name,r.description].join(\" \").replace(/ /gi,\"\").toLowerCase();if(i===T.BUILDER&&-1===r.purchaseOfferId&&-1===r.rentOfferId)\"\"!==r.furniLine&&n.indexOf(r.furniLine)<0&&t.indexOf(e)>=0&&n.push(r.furniLine);else{if([...Jn(o,r.purchaseOfferId),...Jn(o,r.rentOfferId)].length&&(t.indexOf(e)>=0&&s.push(r),250===s.length))break}}const c=[];for(const r of s)c.push(new nr(r));let l=[];Zn(e,n,a,l),d(new E(-1,\"default_3x3\",new cr([],[]),c,!1,1)),u(new or(e,c,l.filter((e=>e.isVisible))))}),[o,i,a,d,u]);return Object(c.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>j(t)),300);return()=>clearTimeout(e)}),[t,n,j]),Object(Kr.jsxs)(ec,{gap:1,className:\"position-relative\",children:[Object(Kr.jsx)(ec,{fullWidth:!0,alignItems:\"center\",position:\"relative\",children:Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"generic.search\"),value:t,onChange:e=>h(e.target.value),onKeyDown:e=>(\"Enter\"===e.code||\"NumpadEnter\"===e.code)&&j(t)})}),(!t||!t.length)&&Object(Kr.jsx)(\"i\",{className:\"icon icon-pen position-absolute catalog-search-button\"}),t&&!!t.length&&Object(Kr.jsx)(\"i\",{className:\"icon icon-clear position-absolute catalog-clear-button\",onClick:e=>h(\"\")})]})},na=e=>{const{icon:t=0}=e,s=Object(c.useMemo)((()=>k(\"catalog.asset.icon.url\").replace(\"%name%\",t.toString())),[t]);return Object(Kr.jsx)(Dc,{className:\"catalog-icon\",imageUrl:s,style:{width:20,height:20}})},ra=e=>{const{node:t=null}=e;return Object(Kr.jsx)(Kr.Fragment,{children:t&&t.children.length>0&&t.children.map(((e,t)=>e.isVisible?Object(Kr.jsx)(ca,{node:e},t):null))})},ca=e=>{const{node:t=null}=e,{activateNode:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(kc,{style:{marginLeft:10*(t.depth-2)+\"px\"},gap:1,column:!1,itemActive:t.isActive,onClick:e=>s(t),children:[Object(Kr.jsx)(na,{icon:t.iconId}),Object(Kr.jsx)(ei,{grow:!0,truncate:!0,children:t.localization}),t.isBranch&&Object(Kr.jsx)(ac.a,{icon:t.isOpen?\"caret-up\":\"caret-down\"})]}),t.isOpen&&t.isBranch&&Object(Kr.jsx)(ra,{node:t})]})},ia=e=>{const{node:t=null}=e,{searchResult:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(sa,{}),Object(Kr.jsx)(vc,{fullHeight:!0,className:\"nitro-catalog-navigation-grid-container grid-bg w-100 p-1\",overflow:\"hidden\",children:Object(Kr.jsxs)(Zr,{gap:1,columnCount:1,children:[s&&s.filteredNodes.length>0&&s.filteredNodes.map(((e,t)=>Object(Kr.jsx)(ca,{node:e},t))),!s&&Object(Kr.jsx)(ra,{node:t})]})})]})},aa=e=>{const{node:t=null}=e,{currentPage:s=null,activateNode:n=null,rootNode:r=null,getNodeById:c=null}=Jt();return Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(ec,{className:\"catalog-header\",children:[Object(Kr.jsxs)(vc,{gap:0,className:\"catalog-header-content\",children:[s&&r&&Object(Kr.jsx)(na,{icon:c(s.pageId,r).iconId}),s&&r&&Object(Kr.jsx)(ei,{bold:!0,className:\"catalog-header-title h-100\",children:c(s.pageId,r).localization}),Object(Kr.jsx)(ei,{className:\"catalog-header-desc\",dangerouslySetInnerHTML:{__html:s&&s.localization.getText(0)}})]}),Object(Kr.jsx)(ec,{className:\"catalog-header-image\",style:{backgroundImage:`url(${s&&s.localization.getImage(0)})`}})]})})},oa=e=>{const{columnCount:t=5,...s}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),{currentOffer:l=null,setPurchaseOptions:u=null}=Jt(),{badgeCodes:d=[],activate:h=null,deactivate:j=null}=as(),b=Object(c.useMemo)((()=>{if(!i)return null;const e=new a.Qh;return e.setValue([\"0\",i,\"\",\"\"]),e}),[i]);return Object(c.useEffect)((()=>{l&&u((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=b&&b.getValue(1)||null,t.previewStuffData=b,t}))}),[l,b,u]),Object(c.useEffect)((()=>{if(!n)return;const e=h();return()=>j(e)}),[n,h,j]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),Object(Kr.jsx)(Zr,{columnCount:t,...s,children:d&&d.length>0&&d.map(((e,t)=>Object(Kr.jsx)(kc,{itemActive:i===e,onClick:t=>o(e),children:Object(Kr.jsx)(Ic,{badgeCode:e})},t)))})},la=e=>{const{currentPage:t=null,setCurrentOffer:s=null}=Jt();return Object(c.useEffect)((()=>{t&&t.offers.length&&s(t.offers[0])}),[t,s]),null},ua=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O=\"relative\",overflow:m=\"hidden\",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=[\"layout-catalog-grid-item\",\"justify-content-end\"];return n&&e.push(\"active\"),(a||o>0)&&e.push(\"unique-item\"),a&&e.push(\"sold-out\"),l&&e.push(\"unseen\"),u&&e.push(\"has-highlight\"),d&&e.push(\"disabled\"),null===t&&e.push(\"icon\",\"loading-icon\"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(vc,{pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(Rc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:\"unique-bg-override\",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)(\"div\",{className:\"position-absolute unique-item-counter\",children:Object(Kr.jsx)(Ac,{value:o})})]}),p]})},da=e=>{const{offer:t=null,separator:s=!1}=e,{purchaseOptions:n=null}=Jt(),{quantity:r=1}=n;return t?Object(Kr.jsxs)(Kr.Fragment,{children:[t.priceInCredits>0&&Object(Kr.jsxs)(ec,{alignItems:\"end\",justifyContent:\"end\",gap:1,className:\"grid-price-view\",children:[Object(Kr.jsx)(ei,{bold:!0,children:t.priceInCredits*r}),Object(Kr.jsx)(\"i\",{className:\"icon icon-small-coin\"})]}),s&&t.priceInCredits>0&&t.priceInActivityPoints>0&&Object(Kr.jsx)(ac.a,{size:\"xs\",color:\"black\",icon:\"plus\"}),t.priceInActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:\"end\",justifyContent:\"end\",gap:1,className:\"grid-price-view\",children:[Object(Kr.jsx)(ei,{bold:!0,children:t.priceInActivityPoints*r}),Object(Kr.jsx)(\"i\",{className:\"icon icon-small-\"+t.activityPointType})]})]}):null},ha=e=>{const{offer:t=null,selectOffer:s=null,itemActive:n=!1,...r}=e,[i,o]=Object(c.useState)(!1),{requestOfferToMover:l=null}=Jt(),{isVisible:u=!1}=hs(),d=Object(c.useMemo)((()=>t.pricingModel===sr.PRICING_MODEL_BUNDLE?null:t.product.getIconUrl(t)),[t]),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return s(t),void o(!0);case a.Ce.MOUSE_UP:return void o(!1);case a.Ce.ROLL_OUT:if(!i||!n||!u)return;return void l(t)}},j=t.product;return j?Object(Kr.jsxs)(vc,{className:\"catalog-grid-active cursor-pointer\",gap:0,itemActive:n,onMouseDown:h,onMouseUp:h,onMouseOut:h,children:[Object(Kr.jsx)(ua,{itemImage:d,itemCount:t.pricingModel===sr.PRICING_MODEL_MULTI?j.productCount:1,itemUniqueSoldout:j.uniqueLimitedItemSeriesSize&&!j.uniqueLimitedItemsLeft,itemUniqueNumber:j.uniqueLimitedItemSeriesSize,...r,children:t.product.productType===er.ROBOT&&Object(Kr.jsx)(fc,{figure:t.product.extraParam,headOnly:!0,direction:3})}),Object(Kr.jsx)(ec,{alignItems:\"end\",justifyContent:\"end\",fullWidth:!0,gap:0,children:Object(Kr.jsx)(vc,{gap:0,children:Object(Kr.jsx)(da,{offer:t})})})]}):null},ja=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null,setCurrentOffer:c=null,currentPage:i=null,setPurchaseOptions:a=null}=Jt();if(!i)return null;const o=e=>{e.activate(),e.isLazy||(c(e),e.product&&e.product.productType===er.WALL&&a((t=>{const s={...t};return s.extraData=e.product.extraParam||null,s})))};return Object(Kr.jsxs)(Zr,{columnCount:t,...n,children:[i.offers&&i.offers.length>0&&i.offers.map(((e,t)=>Object(Kr.jsx)(ha,{itemActive:r&&r.offerId===e.offerId,offer:e,selectOffer:o},t))),s]})},ba=e=>{const{children:t=null,...s}=e,{currentOffer:n=null}=Jt();return n&&n.pricingModel===sr.PRICING_MODEL_SINGLE&&n.product.isUniqueLimitedItem?Object(Kr.jsxs)(Qr,{...s,children:[Object(Kr.jsx)(wc,{className:\"mx-auto\",uniqueLimitedItemsLeft:n.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:n.product.uniqueLimitedItemSeriesSize}),t]}):null},ga=e=>{const{noGiftOption:t=!1,purchaseCallback:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(I.NONE),[l,u]=Yt(rt.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),{currentOffer:d=null,currentPage:h=null,purchaseOptions:j=null,setPurchaseOptions:b=null}=Jt(),{getCurrencyAmount:g=null}=fs(),O=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void o(I.NONE);case jt.PURCHASE_FAILED:case bt.NOT_ALLOWED:return void o(I.FAILED);case Ot.SOLD_OUT:return void o(I.SOLD_OUT)}}),[]);qt(ht.PURCHASE_SUCCESS,O),qt(jt.PURCHASE_FAILED,O),qt(bt.NOT_ALLOWED,O),qt(Ot.SOLD_OUT,O);const m=Object(c.useMemo)((()=>{if(!d)return!1;if(j.extraParamRequired&&(!j.extraData||!j.extraData.length))return!1;if(d.pricingModel===sr.PRICING_MODEL_SINGLE){const e=d.product;if(e&&e.isUniqueLimitedItem)return!e.uniqueLimitedItemsLeft}return!1}),[d,j]),p=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!d)return;if(te()<d.clubLevel)return void y(\"habboUI/open/hccenter\");if(e)return void Vt(new ut(d.page.pageId,d.offerId,j.extraData));if(o(I.PURCHASE),s)return void s();let t=d.page.pageId;$n(new a.Df(t,d.offerId,j.extraData,j.quantity))};if(Object(c.useEffect)((()=>{if(d)return()=>{o(I.NONE),b({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})}}),[d,b]),Object(c.useEffect)((()=>{let e=null;return i!==I.CONFIRM&&i!==I.FAILED||(e=setTimeout((()=>o(I.NONE)),3e3)),()=>{e&&clearTimeout(e)}}),[i]),!d)return null;const _=()=>{const e=d.priceInCredits*j.quantity,t=d.priceInActivityPoints*j.quantity;if(te()<d.clubLevel)return Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"catalog.alert.hc.required\")});if(m)return Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"catalog.alert.limited_edition_sold_out.title\")});if(e>g(-1))return Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"catalog.alert.notenough.title\")});if(t>g(d.activityPointType))return Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"catalog.alert.notenough.activitypoints.title.\"+d.activityPointType)});switch(i){case I.CONFIRM:return Object(Kr.jsx)(tc,{variant:\"warning\",onClick:e=>p(),children:nt(\"catalog.marketplace.confirm_title\")});case I.PURCHASE:return Object(Kr.jsx)(tc,{disabled:!0,children:Object(Kr.jsx)(Uc,{})});case I.FAILED:return Object(Kr.jsx)(tc,{variant:\"danger\",children:nt(\"generic.failed\")});case I.SOLD_OUT:return Object(Kr.jsx)(tc,{variant:\"danger\",children:nt(\"generic.failed\")+\" - \"+nt(\"catalog.alert.limited_edition_sold_out.title\")});case I.NONE:default:return Object(Kr.jsx)(tc,{variant:\"success\",disabled:j.extraParamRequired&&(!j.extraData||!j.extraData.length),onClick:e=>o(I.CONFIRM),children:nt(\"catalog.purchase_confirmation.\"+(d.isRentOffer?\"rent\":\"buy\"))})}};return Object(Kr.jsxs)(Kr.Fragment,{children:[!t&&!d.isRentOffer&&Object(Kr.jsx)(tc,{disabled:j.quantity>1||!d.giftable||m||j.extraParamRequired&&(!j.extraData||!j.extraData.length),onClick:e=>p(!0),children:nt(\"catalog.purchase_confirmation.gift\")}),Object(Kr.jsx)(_,{})]})},Oa=e=>{const{offer:t=null,separator:s=!1}=e,{purchaseOptions:n=null}=Jt(),{quantity:r=1}=n;return t?Object(Kr.jsxs)(Kr.Fragment,{children:[t.priceInCredits>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:t.priceInCredits*r}),Object(Kr.jsx)(Tc,{type:-1})]}),t.priceInCredits>0&&t.priceInActivityPoints>0&&Object(Kr.jsx)(ei,{bold:!0,children:\"+\"}),t.priceInActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsxs)(ei,{bold:!0,children:[\" \",t.priceInActivityPoints*r]}),Object(Kr.jsx)(Tc,{type:t.activityPointType})]})]}):null},ma=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=Jt();return Object(Kr.jsx)(ec,{gap:t,...s,children:Object(Kr.jsx)(Oa,{offer:n})})},pa=e=>{const{currentOffer:t=null,roomPreviewer:s=null,purchaseOptions:n=null}=Jt(),{previewStuffData:r=null}=n;return Object(c.useEffect)((()=>{if(!t||t.pricingModel===sr.PRICING_MODEL_BUNDLE||!s)return;const e=t.product;if(e)switch(e.productType){case er.FLOOR:if(!e.furnitureData)return;if(e.furnitureData.specialType===Rs.FIGURE_PURCHASABLE_SET){const t=ee().getFloorItemData(e.furnitureData.id).customParams.split(\",\").map((e=>parseInt(e))),n=[];for(const e of t)S().isValidFigureSetForGender(e,ee().gender)&&n.push(e);const r=S().getFigureStringWithFigureIds(ee().figure,ee().gender,n);s.addAvatarIntoRoom(r,e.productClassId)}else s.addFurnitureIntoRoom(e.productClassId,new a.Ui(90),r,e.extraParam);return;case er.WALL:if(!e.furnitureData)return;switch(e.furnitureData.specialType){case Rs.FLOOR:return s.reset(!1),void s.updateObjectRoom(e.extraParam);case Rs.WALL_PAPER:return s.reset(!1),void s.updateObjectRoom(null,e.extraParam);case Rs.LANDSCAPE:{s.reset(!1),s.updateObjectRoom(null,null,e.extraParam);const t=ee().getWallItemDataByName(\"ads_twi_windw\");return void(t&&s.addWallItemIntoRoom(t.id,new a.Ui(90),t.customParams))}default:return s.updateObjectRoom(\"default\",\"default\",\"default\"),void s.addWallItemIntoRoom(e.productClassId,new a.Ui(90),e.extraParam)}case er.ROBOT:return void s.addAvatarIntoRoom(e.extraParam,0);case er.EFFECT:return void s.addAvatarIntoRoom(ee().figure,e.productClassId)}}),[t,r,s]),t?t.pricingModel===sr.PRICING_MODEL_BUNDLE?Object(Kr.jsx)(vc,{fit:!0,overflow:\"hidden\",className:\"bg-muted p-2 rounded\",children:Object(Kr.jsx)(Zr,{fullWidth:!0,columnCount:4,className:\"nitro-catalog-layout-bundle-grid\",children:t.products.length>0&&t.products.map(((e,s)=>Object(Kr.jsx)(kc,{itemImage:e.getIconUrl(t),itemCount:e.productCount},s)))})}):Object(Kr.jsx)(Yc,{roomPreviewer:s,height:235}):null},_a=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(la,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:7,overflow:\"hidden\",children:[Object(Kr.jsx)(ja,{shrink:!0}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{truncate:!0,shrink:!0,fontWeight:\"bold\",children:nt(\"catalog_selectbadge\")}),Object(Kr.jsx)(oa,{})]})]}),Object(Kr.jsxs)(vc,{center:!s,size:5,overflow:\"hidden\",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:t.localization.getImage(1)}),Object(Kr.jsx)(ei,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:\"relative\",overflow:\"hidden\",children:[Object(Kr.jsx)(pa,{}),Object(Kr.jsx)(ba,{fullWidth:!0,position:\"absolute\",className:\"top-1\"})]}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{grow:!0,truncate:!0,children:s.localizationName}),Object(Kr.jsx)(ec,{justifyContent:\"end\",children:Object(Kr.jsx)(ma,{alignItems:\"end\"})}),Object(Kr.jsx)(ga,{})]})]})]})]})]})},Ea=e=>{const{...t}=e,{currentOffer:s=null}=Jt();return s&&s.badgeCode&&s.badgeCode.length?Object(Kr.jsx)(Ic,{badgeCode:s.badgeCode,...t}):null},fa=e=>{const{currentOffer:t=null,purchaseOptions:s=null,setPurchaseOptions:n=null}=Jt(),{quantity:r=1}=s;return t&&t.bundlePurchaseAllowed?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.bundlewidget.spinner.select.amount\")}),Object(Kr.jsx)(ec,{alignItems:\"center\",gap:1,children:Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm quantity-input\",value:r,onChange:e=>{return t=e.target.valueAsNumber,isNaN(t)&&(t=1),t=Math.max(t,1),void((t=Math.min(t,100))!==r&&n((e=>{const s={...e};return s.quantity=t,s})));var t}})})]}):null},xa=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(\"div\",{children:[Object(Kr.jsxs)(vc,{className:\"position-relative catalog-default-image\",center:!s,size:5,overflow:\"hidden\",children:[!s&&Object(Kr.jsx)(Kr.Fragment,{children:!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{className:\"catalog-image-column\",alt:\"\",src:t.localization.getImage(1)})}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:\"relative\",overflow:\"hidden\",children:[Object(Kr.jsx)(pa,{}),Object(Kr.jsx)(ma,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),Object(Kr.jsx)(ba,{fullWidth:!0,position:\"absolute\",className:\"top-1\"}),Object(Kr.jsx)(Ea,{position:\"absolute\",className:\"bg-muted rounded top-1 end-1\"})]}),Object(Kr.jsx)(vc,{grow:!0,gap:1,children:Object(Kr.jsx)(ei,{bold:!0,variant:\"white\",className:\"item-title\",grow:!0,truncate:!0,children:s.localizationName})})]})]}),Object(Kr.jsx)(vc,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:Object(Kr.jsx)(ja,{})}),Object(Kr.jsx)(ec,{gap:1,className:\"quanity-container mt-2\",children:Object(Kr.jsx)(fa,{})}),Object(Kr.jsx)(ec,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:Object(Kr.jsx)(ga,{})})]})},Ia=e=>{const{...t}=e,{currentOffer:s=null,purchaseOptions:n=null}=Jt(),{previewStuffData:r=null}=n,i=Object(c.useMemo)((()=>{if(!s||!r)return null;const e=r.getValue(2);return e&&e.length?e:null}),[s,r]);return i?Object(Kr.jsx)(Ic,{badgeCode:i,isGroup:!0,...t}):null},Ta=e=>{const[t,s]=Object(c.useState)(0),{currentOffer:n=null,catalogOptions:r=null,setPurchaseOptions:i=null}=Jt(),{groups:o=null}=r,l=Object(c.useMemo)((()=>{if(!o||!o.length)return null;const e=o[t];if(!e)return null;const s=new a.Qh;return s.setValue([\"0\",e.groupId.toString(),e.badgeCode,e.colorA,e.colorB]),s}),[t,o]);if(Object(c.useEffect)((()=>{n&&i((e=>{const t={...e};return t.extraParamRequired=!0,t.extraData=l&&l.getValue(1)||null,t.previewStuffData=l,t}))}),[n,l,i]),Object(c.useEffect)((()=>{$n(new a.U)}),[]),!o||!o.length)return Object(Kr.jsxs)(Qr,{className:\"bg-muted rounded p-1 text-black text-center\",children:[nt(\"catalog.guild_selector.members_only\"),Object(Kr.jsx)(tc,{className:\"mt-1\",children:nt(\"catalog.guild_selector.find_groups\")})]});const u=o[t];return Object(Kr.jsxs)(ec,{gap:1,children:[!!u&&Object(Kr.jsxs)(ec,{overflow:\"hidden\",className:\"rounded border\",children:[Object(Kr.jsx)(Qr,{fullHeight:!0,style:{width:\"20px\",backgroundColor:\"#\"+u.colorA}}),Object(Kr.jsx)(Qr,{fullHeight:!0,style:{width:\"20px\",backgroundColor:\"#\"+u.colorB}})]}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:t,onChange:e=>s(parseInt(e.target.value)),children:o.map(((e,t)=>Object(Kr.jsx)(\"option\",{value:t,children:e.groupName},t)))})]})},Ca=e=>{const{page:t=null}=e,{currentOffer:s=null}=Jt();return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{className:\"position-relative\",center:!s,size:5,overflow:\"hidden\",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:t.localization.getImage(1)}),Object(Kr.jsx)(ei,{className:\"py-5\",center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:\"relative\",overflow:\"hidden\",children:[Object(Kr.jsx)(pa,{}),Object(Kr.jsx)(Ia,{position:\"absolute\",className:\"top-1 end-1\"}),Object(Kr.jsx)(ma,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"})]}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,variant:\"white\",className:\"item-title\",grow:!0,truncate:!0,children:s.localizationName}),Object(Kr.jsx)(ec,{justifyContent:\"between\"})]}),Object(Kr.jsx)(Qr,{grow:!0,children:Object(Kr.jsx)(Ta,{})})]})]}),Object(Kr.jsx)(vc,{className:\"grid-bg group-furni-picker p-2\",size:7,overflow:\"hidden\",children:Object(Kr.jsx)(ja,{})}),Object(Kr.jsx)(ec,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:Object(Kr.jsx)(ga,{})})]})},Na=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(0),{currentOffer:r=null,setCurrentOffer:i=null,catalogOptions:o=null}=Jt(),{groups:l=null}=o;return Object(c.useEffect)((()=>{$n(new a.U)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(la,{}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(vc,{className:\"p-1\",overflow:\"hidden\",children:Object(Kr.jsx)(ei,{className:\"group-forum-page\",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})}),Object(Kr.jsx)(vc,{overflow:\"hidden\",gap:1,children:!!r&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{truncate:!0,children:r.localizationName}),Object(Kr.jsx)(Qr,{grow:!0,children:Object(Kr.jsx)(Ta,{})}),Object(Kr.jsx)(ec,{justifyContent:\"end\",children:Object(Kr.jsx)(ma,{alignItems:\"end\"})}),Object(Kr.jsx)(ga,{noGiftOption:!0})]})})})]})]})},Sa=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:4,overflow:\"hidden\",className:\"p-3\",children:[Object(Kr.jsx)(ei,{bold:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(ei,{overflow:\"auto\",dangerouslySetInnerHTML:{__html:t.localization.getText(0)}}),Object(Kr.jsx)(ei,{dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Kr.jsxs)(vc,{center:!0,size:5,overflow:\"hidden\",children:[Object(Kr.jsx)(Dc,{imageUrl:t.localization.getImage(1)}),Object(Kr.jsx)(tc,{onClick:()=>y(\"groups/create\"),children:nt(\"catalog.start.guild.purchase.button\")})]})]})},va=e=>{const{page:t=null}=e;return Object(Kr.jsx)(\"div\",{className:\"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row\",children:Object(Kr.jsx)(\"div\",{className:\"overflow-auto h-100 d-flex flex-column info-loyalty-content\",children:Object(Kr.jsx)(\"div\",{dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})})})},Ra=e=>{const{page:t=null}=e,s=t.localization.getImage(1);return Object(Kr.jsxs)(vc,{grow:!0,className:\"bg-muted rounded text-black p-2\",overflow:\"hidden\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[s&&Object(Kr.jsx)(\"img\",{alt:\"\",src:s}),Object(Kr.jsx)(Qr,{className:\"fs-5\",dangerouslySetInnerHTML:{__html:t.localization.getText(1)}})]}),Object(Kr.jsx)(vc,{grow:!0,alignItems:\"center\",overflow:\"auto\",children:Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}})}),Object(Kr.jsx)(ec,{alignItems:\"center\",children:Object(Kr.jsx)(Qr,{className:\"fw-bold\",dangerouslySetInnerHTML:{__html:t.localization.getText(3)}})})]})},Aa=e=>Object(Kr.jsx)(Ra,{...e}),ya=e=>{const{columnCount:t=5,children:s=null,...n}=e,{currentOffer:r=null}=Jt();return r?Object(Kr.jsxs)(Zr,{columnCount:5,...n,children:[r.products&&r.products.length>0&&r.products.map(((e,t)=>Object(Kr.jsx)(kc,{itemImage:e.getIconUrl(),itemCount:e.productCount},t))),s]}):null},wa=e=>{const{gap:t=1,...s}=e,{currentOffer:n=null}=Jt();return Object(Kr.jsx)(ec,{gap:t,alignItems:\"center\",classNames:[\"bg-muted\",\"p-1\",\"rounded\"],...s,children:Object(Kr.jsx)(Oa,{separator:!0,offer:n})})},ka=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(la,{}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:7,overflow:\"hidden\",children:[!!t.localization.getText(2)&&Object(Kr.jsx)(ei,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(vc,{grow:!0,overflow:\"hidden\",className:\"bg-muted p-2 rounded\",children:Object(Kr.jsx)(ya,{fullWidth:!0,className:\"nitro-catalog-layout-bundle-grid\"})})]}),Object(Kr.jsxs)(vc,{size:5,overflow:\"hidden\",gap:1,children:[!!t.localization.getText(1)&&Object(Kr.jsx)(ei,{center:!0,small:!0,overflow:\"auto\",children:t.localization.getText(1)}),Object(Kr.jsxs)(vc,{grow:!0,position:\"relative\",overflow:\"hidden\",gap:0,children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",className:\"flex-grow-1\",src:t.localization.getImage(1)}),Object(Kr.jsx)(Ea,{position:\"absolute\",className:\"bg-muted rounded bottom-0 start-0\"}),Object(Kr.jsx)(wa,{position:\"absolute\",className:\"bottom-0 end-0\"})]}),Object(Kr.jsx)(vc,{gap:1,children:Object(Kr.jsx)(ga,{})})]})]})]})},Da=e=>{const{page:t=null}=e;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(la,{}),Object(Kr.jsx)(vc,{children:!!t.localization.getText(1)&&Object(Kr.jsx)(ei,{center:!0,small:!0,overflow:\"auto\",children:t.localization.getText(1)})}),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:5,overflow:\"hidden\",gap:1,children:[Object(Kr.jsxs)(vc,{grow:!0,position:\"relative\",overflow:\"hidden\",gap:0,children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",className:\"flex-grow-1\",src:t.localization.getImage(1)}),Object(Kr.jsx)(Ea,{position:\"absolute\",className:\"bg-muted rounded bottom-0 start-0\"}),Object(Kr.jsx)(wa,{position:\"absolute\",className:\"bottom-0 end-0\"})]}),Object(Kr.jsx)(vc,{gap:1,children:Object(Kr.jsx)(ga,{})})]}),Object(Kr.jsxs)(vc,{size:7,overflow:\"hidden\",children:[!!t.localization.getText(2)&&Object(Kr.jsx)(ei,{dangerouslySetInnerHTML:{__html:t.localization.getText(2)}}),Object(Kr.jsx)(vc,{grow:!0,overflow:\"hidden\",className:\"grid-bg p-2\",children:Object(Kr.jsx)(ya,{fullWidth:!0,className:\"nitro-catalog-layout-bundle-grid\"})})]})]})]})},Ua=[\"floors\",\"walls\",\"views\"],Pa=e=>{const{columnCount:t=5,children:s=null,...n}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(null),{currentPage:d=null,currentOffer:h=null,setCurrentOffer:j=null,setPurchaseOptions:b=null}=Jt();if(Object(c.useEffect)((()=>{if(!d)return;const e=[[],[],[]];for(const t of d.offers){if(t.pricingModel!==sr.PRICING_MODEL_SINGLE&&t.pricingModel!==sr.PRICING_MODEL_MULTI)continue;const s=t.product;if(!s||s.productType!==er.WALL&&s.productType!==er.FLOOR||!s.furnitureData)continue;switch(s.furnitureData.className){case\"floor\":e[0].push(t);break;case\"wallpaper\":e[1].push(t);break;case\"landscape\":e[2].push(t)}}i(e),o(0),u([e[0][0],e[1][0],e[2][0]])}),[d]),Object(c.useEffect)((()=>{-1!==a&&l&&j(l[a])}),[a,l,j]),Object(c.useEffect)((()=>{-1!==a&&l&&h&&b((e=>{const t={...e};return t.extraData=l[a].product.extraParam,t.extraParamRequired=!0,t}))}),[h,a,l,b]),!r||-1===a)return null;const g=r[a];return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(sc,{className:\"purchase-buttons\",children:Ua.map(((e,t)=>Object(Kr.jsx)(tc,{active:a===t,onClick:e=>o(t),children:nt(`catalog.spaces.tab.${e}`)},t)))}),Object(Kr.jsx)(vc,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:Object(Kr.jsxs)(Zr,{columnCount:t,...n,children:[g&&g.length>0&&g.map(((e,t)=>Object(Kr.jsx)(ha,{itemActive:h&&h===e,offer:e,selectOffer:e=>(e=>{e&&u((t=>{const s=[...t];return s[a]=e,s}))})(e)},t))),s]})})]})},Ma=e=>{const{page:t=null}=e,{currentOffer:s=null,roomPreviewer:n=null}=Jt();return Object(c.useEffect)((()=>{n.updatePreviewObjectBoundingRectangle(new a.Xe)}),[n]),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{center:!s,size:5,overflow:\"hidden\",children:[!s&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:t.localization.getImage(1)}),Object(Kr.jsx)(ei,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:\"relative\",overflow:\"hidden\",children:[Object(Kr.jsx)(pa,{}),Object(Kr.jsx)(ma,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),Object(Kr.jsx)(ei,{bold:!0,variant:\"white\",className:\"item-title\",grow:!0,truncate:!0,children:s.localizationName})]}),Object(Kr.jsx)(ec,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:Object(Kr.jsx)(ga,{})})]})]}),Object(Kr.jsx)(vc,{size:7,overflow:\"hidden\",children:Object(Kr.jsx)(Pa,{})})]})},La=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(\"\"),{currentOffer:r=null,setPurchaseOptions:i=null}=Jt();return Object(c.useEffect)((()=>{r&&i((e=>{const t={...e};return t.extraData=s,t}))}),[r,s,i]),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(vc,{className:\"pt-2\",center:!r,overflow:\"hidden\",children:Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:t.localization.getImage(1)}),Object(Kr.jsx)(ei,{small:!0,center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]})}),Object(Kr.jsxs)(vc,{size:7,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:Object(Kr.jsx)(ja,{})}),r&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{grow:!0,center:!0,truncate:!0,children:r.localizationName}),Object(Kr.jsx)(ec,{justifyContent:\"end\",children:Object(Kr.jsx)(ma,{alignItems:\"end\",className:\"credits-bg py-1 px-2\"})}),Object(Kr.jsx)(ec,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:Object(Kr.jsx)(ga,{})})]})}),Object(Kr.jsx)(\"textarea\",{className:\"flex-grow-1 form-control w-100 trophy-text\",defaultValue:s||\"\",onChange:e=>n(e.target.value)})]})]})},Fa=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(I.NONE),{currentPage:i=null,catalogOptions:o=null}=Jt(),{purse:l=null,getCurrencyAmount:u=null}=fs(),{clubOffers:d=null}=o,h=Object(c.useCallback)((e=>{switch(e.type){case ht.PURCHASE_SUCCESS:return void r(I.NONE);case jt.PURCHASE_FAILED:return void r(I.FAILED)}}),[]);qt(ht.PURCHASE_SUCCESS,h),qt(jt.PURCHASE_FAILED,h);const j=Object(c.useCallback)((e=>{let t=\"\";return e.months>0&&(t=nt(\"catalog.vip.item.header.months\",[\"num_months\"],[e.months.toString()])),e.extraDays>0&&(\"\"!==t&&(t+=\" \"),t+=\" \"+nt(\"catalog.vip.item.header.days\",[\"num_days\"],[e.extraDays.toString()])),t}),[]),b=Object(c.useCallback)((()=>{if(!l)return\"\";const e=l.clubDays>0||l.clubPeriods>0?\"extension.\":\"subscription.\",s=0===t.months?\"days\":\"months\",n=0===t.months?t.extraDays:t.months;return nt(\"catalog.vip.buy.confirm.\"+e+s).replace(\"%NUM_\"+s.toUpperCase()+\"%\",n.toString())}),[t,l]),g=(Object(c.useCallback)((()=>{let e=nt(\"catalog.vip.buy.confirm.end_date\");return e=e.replace(\"%month%\",t.month.toString()),e=e.replace(\"%day%\",t.day.toString()),e=e.replace(\"%year%\",t.year.toString()),e}),[t]),Object(c.useMemo)((()=>{const e=l.clubDays;return nt(\"catalog.vip.extend.info\",[\"days\"],[(31*l.clubPeriods+e).toString()])}),[l])),O=Object(c.useCallback)((()=>{t&&(r(I.PURCHASE),$n(new a.Df(i.pageId,t.offerId,null,1)))}),[t,i]),m=Object(c.useCallback)((e=>{r(I.NONE),s(e)}),[]),p=Object(c.useCallback)((()=>{if(!t)return null;if(t.priceCredits>u(-1))return Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",children:nt(\"catalog.alert.notenough.title\")});if(t.priceActivityPoints>u(t.priceActivityPointsType))return Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",children:nt(\"catalog.alert.notenough.activitypoints.title.\"+t.priceActivityPointsType)});switch(n){case I.CONFIRM:return Object(Kr.jsx)(tc,{variant:\"warning\",onClick:O,children:nt(\"catalog.marketplace.confirm_title\")});case I.PURCHASE:return Object(Kr.jsx)(tc,{variant:\"primary\",disabled:!0,children:Object(Kr.jsx)(Uc,{})});case I.FAILED:return Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"generic.failed\")});case I.NONE:default:return Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>r(I.CONFIRM),children:nt(\"buy\")})}}),[t,n,O,u]);return Object(c.useEffect)((()=>{d||$n(new a.jc(1))}),[d]),Object(Kr.jsxs)(vc,{fullHeight:!0,children:[Object(Kr.jsxs)(ec,{fullHeight:!0,center:!0,overflow:\"hidden\",children:[i.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:i.localization.getImage(1)}),Object(Kr.jsxs)(vc,{className:\"px-2\",children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"catalog.vip.extend.title\")}),Object(Kr.jsx)(ei,{small:!0,overflow:\"auto\",dangerouslySetInnerHTML:{__html:g}})]})]}),Object(Kr.jsxs)(vc,{fullHeight:!0,size:7,overflow:\"hidden\",justifyContent:\"between\",children:[Object(Kr.jsx)(Zr,{columnCount:1,className:\"nitro-catalog-layout-vip-buy-grid\",children:d&&d.length>0&&d.map(((e,s)=>Object(Kr.jsxs)(kc,{column:!1,center:!1,alignItems:\"center\",justifyContent:\"between\",itemActive:t===e,className:\"p-1\",onClick:()=>m(e),children:[Object(Kr.jsx)(\"i\",{className:\"icon-hc-banner\"}),Object(Kr.jsxs)(vc,{justifyContent:\"end\",gap:0,children:[Object(Kr.jsx)(ei,{textEnd:!0,children:j(e)}),Object(Kr.jsxs)(ec,{justifyContent:\"end\",gap:1,children:[e.priceCredits>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(ei,{children:e.priceCredits}),Object(Kr.jsx)(Tc,{type:-1})]}),e.priceActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(ei,{children:e.priceActivityPoints}),Object(Kr.jsx)(Tc,{type:e.priceActivityPointsType})]})]})]})]},s)))}),Object(Kr.jsx)(vc,{size:5,overflow:\"hidden\",children:t&&Object(Kr.jsx)(vc,{fullWidth:!0,grow:!0,justifyContent:\"end\",children:Object(Kr.jsxs)(ec,{alignItems:\"end\",children:[Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:b()}),Object(Kr.jsxs)(ec,{gap:1,children:[t.priceCredits>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(ei,{children:t.priceCredits}),Object(Kr.jsx)(Tc,{type:-1})]}),t.priceActivityPoints>0&&Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(ei,{children:t.priceActivityPoints}),Object(Kr.jsx)(Tc,{type:t.priceActivityPointsType})]})]})]}),p()]})})}),Object(Kr.jsx)(ei,{small:!0,center:!0,className:\"pb-2\",dangerouslySetInnerHTML:{__html:nt(\"catalog.vip.buy.hccenter\")}})]})]})},Ha=e=>{const{text:t=null}=e,[s,n]=Object(c.useState)(\"\"),[r,i]=Object(c.useState)(!1),o=Object(c.useCallback)((e=>{const t=e.getParser();let s=nt(\"catalog.alert.voucherredeem.ok.description\");t.productName&&(s=nt(\"catalog.alert.voucherredeem.ok.description.furni\",[\"productName\",\"productDescription\"],[t.productName,t.productDescription])),Pr.simpleAlert(s,null,null,null,nt(\"catalog.alert.voucherredeem.ok.title\")),i(!1),n(\"\")}),[]);it(a.Wi,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(nt(`catalog.alert.voucherredeem.error.description.${t.errorCode}`),null,null,null,nt(\"catalog.alert.voucherredeem.error.title\")),i(!1)}),[]);return it(a.Vi,l),Object(Kr.jsxs)(vc,{className:\"voucher-box p-2\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"px-1\",children:t}),Object(Kr.jsxs)(ec,{className:\"voucher-form\",gap:5,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:s,onChange:e=>n(e.target.value)}),Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>{s&&s.length&&!r&&($n(new a.Kf(s)),i(!0))},disabled:r,children:nt(\"redeem\")})]})]})},Ba=e=>{const{item:t=null,position:s=\"relative\",pointer:n=!0,overflow:r=\"hidden\",fullHeight:i=!0,classNames:a=[],children:o=null,...l}=e,u=Object(c.useMemo)((()=>{const e=[\"nitro-front-page-item\"];return a.length&&e.push(...a),e}),[a]);if(!t)return null;const d=k(\"image.library.url\")+t.itemPromoImage;return Object(Kr.jsxs)(xc,{imageUrl:d,classNames:u,position:s,fullHeight:i,pointer:n,overflow:r,...l,children:[Object(Kr.jsx)(ei,{position:\"absolute\",variant:\"white\",className:\"nitro-front-page-item-text p-2 m-2 bottom-0\",children:t.itemName}),o]})},Ga=e=>{const{page:t=null,hideNavigation:s=null}=e,{frontPageItems:n=[]}=Jt(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Lb.ITEM_CATALOGUE_PAGE:return void y(`catalog/open/${e.catalogPageLocation}`);case a.Lb.ITEM_PRODUCT_OFFER:return void y(`catalog/open/${e.productOfferId}`)}}),[]);return Object(c.useEffect)((()=>{s()}),[t,s]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{size:4,children:n[0]&&Object(Kr.jsx)(Ba,{item:n[0],onClick:e=>r(n[0])})}),Object(Kr.jsxs)(vc,{size:8,children:[n[1]&&Object(Kr.jsx)(Ba,{item:n[1],onClick:e=>r(n[1])}),n[2]&&Object(Kr.jsx)(Ba,{item:n[2],onClick:e=>r(n[2])}),n[3]&&Object(Kr.jsx)(Ba,{item:n[3],onClick:e=>r(n[3])}),Object(Kr.jsx)(Ha,{text:t.localization.getText(1)})]})]})};class Wa{constructor(e,t,s,n,r,c,i,a){let o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:-1;this._offerId=void 0,this._furniId=void 0,this._furniType=void 0,this._extraData=void 0,this._stuffData=void 0,this._price=void 0,this._averagePrice=void 0,this._imageCallback=void 0,this._status=void 0,this._timeLeftMinutes=-1,this._offerCount=void 0,this._image=void 0,this._offerId=e,this._furniId=t,this._furniType=s,this._extraData=n,this._stuffData=r,this._price=c,this._status=i,this._averagePrice=a,this._offerCount=o}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}}Wa.TYPE_FLOOR=1,Wa.TYPE_WALL=2;class Va{}Va.ONGOING=1,Va.ONGOING_OWN=1,Va.SOLD=2,Va.EXPIRED=3;const qa=2,Ya=e=>{const{offerData:t=null,type:s=qa,onClick:n=null}=e,r=Object(c.useMemo)((()=>t?nt((2===t.furniType?\"wallItem\":\"roomItem\")+`.name.${t.furniId}`):\"\"),[t]),i=Object(c.useCallback)((()=>{if(!t)return\"\";if(t.status===Va.SOLD)return nt(\"catalog.marketplace.offer.sold\");if(t.timeLeftMinutes<=0)return nt(\"catalog.marketplace.offer.expired\");const e=Math.max(1,t.timeLeftMinutes),s=Math.floor(e/60);let n=e-60*s+\" \"+nt(\"catalog.marketplace.offer.minutes\");return s>0&&(n=s+\" \"+nt(\"catalog.marketplace.offer.hours\")+\" \"+n),nt(\"catalog.marketplace.offer.time_left\",[\"time\"],[n])}),[t]);return Object(Kr.jsxs)(kc,{shrink:!0,center:!1,column:!1,alignItems:\"center\",className:\"p-1\",children:[Object(Kr.jsx)(Cc,{productType:t.furniType===Wa.TYPE_FLOOR?er.FLOOR:er.WALL,productClassId:t.furniId,extraData:t.extraData,style:{width:50,height:50}}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:r}),1===s&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.marketplace.offer.price_own_item\",[\"price\"],[t.price.toString()])}),Object(Kr.jsx)(ei,{children:i()})]}),s===qa&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.marketplace.offer.price_public_item\",[\"price\",\"average\"],[t.price.toString(),t.averagePrice.toString()])}),Object(Kr.jsx)(ei,{children:nt(\"catalog.marketplace.offer_count\",[\"count\"],[t.offerCount.toString()])})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[1===s&&t.status!==Va.SOLD&&Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>n(t),children:nt(\"catalog.marketplace.offer.pick\")}),s===qa&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>n(t),children:nt(\"buy\")}),Object(Kr.jsx)(tc,{variant:\"secondary\",disabled:!0,children:nt(\"catalog.marketplace.view_more\")})]})]})]})},za=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)([]),i=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.offers.map((e=>{const t=new Wa(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);return t.timeLeftMinutes=e.timeLeftMinutes,t}));s(t.creditsWaiting),r(n)}),[]);it(a.je,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?r((e=>e.filter((e=>e.offerId!==t.offerId)))):Pr.simpleAlert(nt(\"catalog.marketplace.cancel_failed\"),yr.DEFAULT,null,null,nt(\"catalog.marketplace.operation_failed.topic\")))}),[]);it(a.ge,o);const l=Object(c.useMemo)((()=>n.filter((e=>e.status===Va.SOLD))),[n]),u=Object(c.useCallback)((()=>{r((e=>{const t=l.map((e=>e.offerId));return e.filter((e=>-1===t.indexOf(e.offerId)))})),$n(new a.Jf)}),[l]),d=e=>{$n(new a.S(e.offerId))};return Object(c.useEffect)((()=>{$n(new a.qc)}),[]),Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[t<=0&&Object(Kr.jsx)(ei,{center:!0,className:\"bg-muted rounded p-1\",children:nt(\"catalog.marketplace.redeem.no_sold_items\")}),t>0&&Object(Kr.jsxs)(vc,{center:!0,gap:1,className:\"bg-muted rounded p-2\",children:[Object(Kr.jsx)(ei,{children:nt(\"catalog.marketplace.redeem.get_credits\",[\"count\",\"credits\"],[l.length.toString(),t.toString()])}),Object(Kr.jsx)(tc,{className:\"mt-1\",onClick:u,children:nt(\"catalog.marketplace.offer.redeem\")})]}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{truncate:!0,shrink:!0,fontWeight:\"bold\",children:nt(\"catalog.marketplace.items_found\",[\"count\"],[n.length.toString()])}),Object(Kr.jsx)(vc,{overflow:\"auto\",className:\"nitro-catalog-layout-marketplace-grid\",children:n.length>0&&n.map((e=>Object(Kr.jsx)(Ya,{offerData:e,type:1,onClick:d},e.offerId)))})]})]})};class Ka{}Ka.BY_ACTIVITY=1,Ka.BY_VALUE=2,Ka.ADVANCED=3;const Qa=e=>{const{searchType:t=null,sortTypes:s=null,onSearch:n=null}=e,[r,i]=Object(c.useState)(s?s[0]:3),[a,o]=Object(c.useState)(\"\"),[l,u]=Object(c.useState)(0),[d,h]=Object(c.useState)(0),j=Object(c.useCallback)((e=>{i(e),t!==Ka.BY_ACTIVITY&&t!==Ka.BY_VALUE||n({minPrice:-1,maxPrice:-1,query:\"\",type:e})}),[n,t]),b=Object(c.useCallback)((()=>{n({minPrice:l>0?l:-1,maxPrice:d>0?d:-1,type:r,query:a})}),[d,l,n,a,r]);return Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=s[0];i(e),t!==Ka.BY_ACTIVITY&&Ka.BY_VALUE!==t||n({minPrice:-1,maxPrice:-1,query:\"\",type:e})}),[n,t,s]),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"catalog.marketplace.sort_order\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:r,onChange:e=>j(parseInt(e.target.value)),children:s.map((e=>Object(Kr.jsx)(\"option\",{value:e,children:nt(`catalog.marketplace.sort.${e}`)},e)))})]}),t===Ka.ADVANCED&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"catalog.marketplace.search_name\")}),Object(Kr.jsx)(\"input\",{className:\"form-control form-control-sm\",type:\"text\",value:a,onChange:e=>o(e.target.value)})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"catalog.marketplace.search_price\")}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:l,onChange:e=>u(e.target.valueAsNumber)}),Object(Kr.jsx)(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Kr.jsx)(tc,{variant:\"secondary\",className:\"mx-auto\",onClick:b,children:nt(\"generic.search\")})]})]})},$a=[1,2],Xa=[3,4,5,6],Ja=[1,2,3,4,5,6],Za=e=>{const[t,s]=Object(c.useState)(Ka.BY_ACTIVITY),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(new Map),[l,u]=Object(c.useState)({minPrice:-1,maxPrice:-1,query:\"\",type:3}),{getCurrencyAmount:d=null}=fs(),h=Object(c.useCallback)((e=>{u(e),$n(new a.pc(e.minPrice,e.maxPrice,e.query,e.type))}),[]),j=Object(c.useMemo)((()=>{switch(t){case Ka.BY_ACTIVITY:return Xa;case Ka.BY_VALUE:return $a;case Ka.ADVANCED:return Ja}return[]}),[t]),b=Object(c.useCallback)((e=>{if(e.price>d(-1))return void Pr.simpleAlert(nt(\"catalog.alert.notenough.credits.description\"),yr.DEFAULT,null,null,nt(\"catalog.alert.notenough.title\"));const t=e.offerId;Pr.confirm(nt(\"catalog.marketplace.confirm_header\"),(()=>{$n(new a.J(t))}),null,null,null,nt(\"catalog.marketplace.confirm_title\"))}),[d]),g=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=new Map;t.offers.forEach((e=>{const t=new Wa(e.offerId,e.furniId,e.furniType,e.extraData,e.stuffData,e.price,e.status,e.averagePrice,e.offerCount);t.timeLeftMinutes=e.timeLeftMinutes,s.set(e.offerId,t)})),r(t.totalItemsFound),o(s)}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t)switch(t.result){case 1:h(l);break;case 2:o((e=>{const s=new Map(e);return s.delete(t.requestedOfferId),s})),Pr.simpleAlert(nt(\"catalog.marketplace.not_available_header\"),yr.DEFAULT,null,null,nt(\"catalog.marketplace.not_available_title\"));break;case 3:o((e=>{const s=new Map(e),n=s.get(t.requestedOfferId);return n&&(n.offerId=t.offerId,n.price=t.newPrice,n.offerCount--,s.set(n.offerId,n)),s.delete(t.requestedOfferId),s})),Pr.confirm(nt(\"catalog.marketplace.confirm_higher_header\")+\"\\n\"+nt(\"catalog.marketplace.confirm_price\",[\"price\"],[t.newPrice.toString()]),(()=>{$n(new a.J(t.offerId))}),null,null,null,nt(\"catalog.marketplace.confirm_higher_title\"));break;case 4:Pr.simpleAlert(nt(\"catalog.alert.notenough.credits.description\"),yr.DEFAULT,null,null,nt(\"catalog.alert.notenough.title\"))}}),[l,h]);return it(a.ee,g),it(a.fe,O),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{active:t===Ka.BY_ACTIVITY,onClick:()=>s(Ka.BY_ACTIVITY),children:nt(\"catalog.marketplace.search_by_activity\")}),Object(Kr.jsx)(tc,{active:t===Ka.BY_VALUE,onClick:()=>s(Ka.BY_VALUE),children:nt(\"catalog.marketplace.search_by_value\")}),Object(Kr.jsx)(tc,{active:t===Ka.ADVANCED,onClick:()=>s(Ka.ADVANCED),children:nt(\"catalog.marketplace.search_advanced\")})]}),Object(Kr.jsx)(Qa,{sortTypes:j,searchType:t,onSearch:h}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{truncate:!0,shrink:!0,fontWeight:\"bold\",children:nt(\"catalog.marketplace.items_found\",[\"count\"],[i.size.toString()])}),Object(Kr.jsx)(vc,{className:\"nitro-catalog-layout-marketplace-grid\",overflow:\"auto\",children:Array.from(i.values()).map(((e,t)=>Object(Kr.jsx)(Ya,{offerData:e,type:qa,onClick:b},t)))})]})]})},eo=e=>{const{page:t=null}=e,[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)([]),[o,l]=Object(c.useState)(-1),[u,d]=Object(c.useState)([]),[h,j]=Object(c.useState)(-1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)(\"\"),[p,_]=Object(c.useState)(!0),[E,f]=Object(c.useState)(-1),{currentOffer:x=null,setCurrentOffer:I=null,setPurchaseOptions:T=null,catalogOptions:C=null,roomPreviewer:N=null}=Jt(),{petPalettes:S=null}=C,v=Object(c.useMemo)((()=>u.length&&-1!==h?u[h][0]:16777215),[u,h]),R=Object(c.useMemo)((()=>-1!==s&&r.length&&-1!==o?nt(`pet.breed.${s}.${r[o].breedId}`):\"\"),[s,r,o]),A=Object(c.useMemo)((()=>{if(!r.length||-1===o)return\"\";const e=r[o].paletteId;let t=16777215;if(s<=7){if(-1===h)return\"\";t=u[h][0]}let n=t.toString(16).toUpperCase();for(;n.length<6;)n=\"0\"+n;return`${e}\\n${n}`}),[r,o,s,u,h]),y=Object(c.useMemo)((()=>{let e=\"\";switch(E){case 1:e=\"catalog.alert.petname.long\";break;case 2:e=\"catalog.alert.petname.short\";break;case 3:e=\"catalog.alert.petname.chars\";break;case 4:e=\"catalog.alert.petname.bobba\"}return e&&e.length?nt(e):\"\"}),[E]),w=Object(c.useCallback)((()=>{-1!==E?0!==E||$n(new a.Df(t.pageId,x.offerId,`${O}\\n${A}`,1)):$n(new a.i(O,1))}),[t,x,O,A,E]),k=Object(c.useCallback)((e=>{const t=e.getParser();f(t.result),0===t.result?w():Vt(new jt(-1))}),[w]);return it(a.j,k),Object(c.useEffect)((()=>{if(!t||!t.offers.length)return;const e=t.offers[0];I(e),n(function(e){if(!e.length)return 0;let t=e.length-1;for(;t>=0&&!isNaN(parseInt(e.charAt(t)));)t--;return t>0?parseInt(e.substring(t+1)):-1}(e.localizationId)),g(!1)}),[t,I]),Object(c.useEffect)((()=>{if(!x)return;const e=x.product.productData;if(e){if(S)for(const t of S){if(t.breed!==e.type)continue;const s=[];for(const e of t.palettes)e.sellable&&s.push(e);return l(s.length?0:-1),void i(s)}l(-1),i([]),$n(new a.Ac(e.type))}}),[x,S]),Object(c.useEffect)((()=>{if(-1===s)return;const e=function(e,t){switch(e){case 0:case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:case 5:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const s=[];for(const n of t){const t=L().getPetColorResult(e,n.paletteId);t&&(t.primaryColor===t.secondaryColor?s.push([t.primaryColor]):s.push([t.primaryColor,t.secondaryColor]))}return s}}}(s,r);j(e.length?0:-1),d(e)}),[s,r]),Object(c.useEffect)((()=>{if(!N)return;if(N.reset(!1),-1===s||!r.length||-1===o)return;let e=`${s} ${r[o].paletteId}`;s<=7&&(e+=` ${v.toString(16)}`),N.addPetIntoRoom(e)}),[N,s,r,o,v]),Object(c.useEffect)((()=>{f(-1)}),[O]),x?Object(Kr.jsx)(vc,{children:Object(Kr.jsxs)(vc,{center:!x,size:5,overflow:\"hidden\",children:[!x&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.localization.getImage(1)&&Object(Kr.jsx)(\"img\",{alt:\"\",src:t.localization.getImage(1)}),Object(Kr.jsx)(ei,{center:!0,dangerouslySetInnerHTML:{__html:t.localization.getText(0)}})]}),x&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Qr,{position:\"relative\",overflow:\"hidden\",children:[Object(Kr.jsx)(pa,{}),Object(Kr.jsx)(ma,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),Object(Kr.jsx)(Ea,{position:\"absolute\",className:\"bg-muted rounded bottom-1 end-1\"}),s>-1&&s<=7&&Object(Kr.jsx)(tc,{position:\"absolute\",className:\"bottom-1 start-1\",onClick:e=>g(!b),children:Object(Kr.jsx)(ac.a,{icon:\"fill-drip\"})})]}),Object(Kr.jsx)(vc,{size:7,overflow:\"hidden\",children:Object(Kr.jsxs)(Zr,{className:\"grid-bg group-furni-picker p-2\",columnCount:7,children:[!b&&r.length>0&&r.map(((e,t)=>Object(Kr.jsx)(kc,{itemActive:o===t,onClick:e=>l(t),children:Object(Kr.jsx)(Wc,{typeId:s,paletteId:e.paletteId,direction:2,headOnly:!0})},t))),b&&u.length>0&&u.map(((e,t)=>Object(Kr.jsx)(kc,{itemHighlight:!0,itemActive:h===t,itemColor:a.jb.int2rgb(e[0]),className:\"clear-bg\",onClick:e=>j(t)},t)))]})}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{truncate:!0,children:R}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm w-100\",placeholder:nt(\"widgets.petpackage.name.title\"),value:O,onChange:e=>m(e.target.value)}),E>0&&Object(Kr.jsx)(Qr,{className:\"invalid-feedback d-block m-0\",children:y})]}),Object(Kr.jsx)(ec,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:Object(Kr.jsx)(ga,{purchaseCallback:w})})]})]})]})}):null},to=e=>{const{offer:t=null,isAvailable:s=!1,onSelect:n=null}=e,r=Object(c.useCallback)((()=>{if(!t||!t.products.length)return\"\";const e=t.products[0];return sn.getProductImageUrl(e.productType,e.furniClassId,e.extraParam)}),[t]),i=Object(c.useCallback)((()=>{if(!t||!t.products.length)return\"\";const e=t.products[0];return nt(2===sn.getProductCategory(e.productType,e.furniClassId)?\"wallItem.name.\"+e.furniClassId:\"roomItem.name.\"+e.furniClassId)}),[t]);Object(c.useCallback)((()=>{if(!t||!t.products.length)return\"\";const e=t.products[0];return nt(2===sn.getProductCategory(e.productType,e.furniClassId)?\"wallItem.desc.\"+e.furniClassId:\"roomItem.desc.\"+e.furniClassId)}),[t]);return Object(Kr.jsxs)(kc,{center:!1,column:!1,alignItems:\"center\",className:\"p-1\",children:[Object(Kr.jsx)(Dc,{imageUrl:r()}),Object(Kr.jsx)(ei,{grow:!0,fontWeight:\"bold\",children:i()}),Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>n(t.localizationId),disabled:!s,children:nt(\"catalog.club_gift.select\")})]})},so=e=>{const{purse:t=null}=fs(),{catalogOptions:s=null,setCatalogOptions:n=null}=Jt(),{clubGifts:r=null}=s,i=Object(c.useCallback)((()=>r?r.giftsAvailable>0?nt(\"catalog.club_gift.available\",[\"amount\"],[r.giftsAvailable.toString()]):r.daysUntilNextGift>0?nt(\"catalog.club_gift.days_until_next\",[\"days\"],[r.daysUntilNextGift.toString()]):t.isVip?nt(\"catalog.club_gift.not_available\"):nt(\"catalog.club_gift.no_club\"):\"\"),[r,t]),o=Object(c.useCallback)((e=>{Pr.confirm(nt(\"catalog.club_gift.confirm\"),(()=>{$n(new a.Ih(e)),n((e=>(e.clubGifts.giftsAvailable--,{...e})))}),null)}),[n]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{truncate:!0,shrink:!0,fontWeight:\"bold\",children:i()}),Object(Kr.jsx)(Zr,{columnCount:1,className:\"nitro-catalog-layout-vip-gifts-grid\",children:r.offers.length>0&&r.offers.map((e=>Object(Kr.jsx)(to,{offer:e,isAvailable:r.getOfferExtraData(e.offerId).isSelectable&&r.giftsAvailable>0,onSelect:o},e.offerId)))})]})},no=(e,t)=>{if(!e)return null;const s={page:e,hideNavigation:t};switch(e.layoutCode){case\"frontpage_featured\":return null;case\"frontpage4\":return Object(Kr.jsx)(Ga,{...s});case\"pets\":return Object(Kr.jsx)(eo,{...s});case\"pets2\":return Object(Kr.jsx)(Aa,{...s});case\"pets3\":return Object(Kr.jsx)(Ra,{...s});case\"vip_buy\":return Object(Kr.jsx)(Fa,{...s});case\"guild_frontpage\":return Object(Kr.jsx)(Sa,{...s});case\"guild_forum\":return Object(Kr.jsx)(Na,{...s});case\"guild_custom_furni\":return Object(Kr.jsx)(Ca,{...s});case\"club_gifts\":return Object(Kr.jsx)(so,{...s});case\"marketplace_own_items\":return Object(Kr.jsx)(za,{...s});case\"marketplace\":return Object(Kr.jsx)(Za,{...s});case\"single_bundle\":return Object(Kr.jsx)(Da,{...s});case\"room_bundle\":return Object(Kr.jsx)(ka,{...s});case\"spaces_new\":return Object(Kr.jsx)(Ma,{...s});case\"trophies\":return Object(Kr.jsx)(La,{...s});case\"info_loyalty\":return Object(Kr.jsx)(va,{...s});case\"badge_display\":return Object(Kr.jsx)(_a,{...s});default:return Object(Kr.jsx)(xa,{...s})}},ro=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),{catalogOptions:i=null,setCatalogOptions:o=null}=Jt(),{marketplaceConfiguration:l=null}=i,u=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.marketplaceConfiguration=t,s}))}),[o]);it(a.he,u);const d=Object(c.useCallback)((e=>{s(e.item)}),[]);if(qt(dt.POST_MARKETPLACE,d),Object(c.useEffect)((()=>{t&&!l&&$n(new a.oc)}),[t,l]),Object(c.useEffect)((()=>{if(t)return()=>r(0)}),[t]),!l||!t)return null;const h=t?nt(t.isWallItem?\"wallItem.name.\"+t.type:\"roomItem.name.\"+t.type):\"\",j=t?nt(t.isWallItem?\"wallItem.desc.\"+t.type:\"roomItem.desc.\"+t.type):\"\";return Object(Kr.jsxs)(Ec,{className:\"nitro-catalog-layout-marketplace-post-offer\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"inventory.marketplace.make_offer.title\"),onCloseClick:e=>s(null)}),Object(Kr.jsx)(uc,{overflow:\"hidden\",children:Object(Kr.jsxs)(Jr,{fullHeight:!0,children:[Object(Kr.jsx)(vc,{center:!0,className:\"bg-muted rounded p-2\",size:4,overflow:\"hidden\",children:Object(Kr.jsx)(Nc,{productType:t.isWallItem?er.WALL:er.FLOOR,productClassId:t.type,extraData:t.extra.toString()})}),Object(Kr.jsxs)(vc,{size:8,justifyContent:\"between\",overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:h}),Object(Kr.jsx)(ei,{truncate:!0,shrink:!0,children:j})]}),Object(Kr.jsxs)(vc,{overflow:\"auto\",children:[Object(Kr.jsx)(ei,{italics:!0,children:nt(\"inventory.marketplace.make_offer.expiration_info\",[\"time\"],[l.offerTime.toString()])}),Object(Kr.jsxs)(\"div\",{className:\"input-group has-validation\",children:[Object(Kr.jsx)(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:n,onChange:e=>r(parseInt(e.target.value)),placeholder:nt(\"inventory.marketplace.make_offer.price_request\")}),(n<l.minimumPrice||isNaN(n))&&Object(Kr.jsx)(Qr,{className:\"invalid-feedback d-block\",children:nt(\"inventory.marketplace.make_offer.min_price\",[\"minprice\"],[l.minimumPrice.toString()])}),n>l.maximumPrice&&!isNaN(n)&&Object(Kr.jsx)(Qr,{className:\"invalid-feedback d-block\",children:nt(\"inventory.marketplace.make_offer.max_price\",[\"maxprice\"],[l.maximumPrice.toString()])}),!(n<l.minimumPrice||n>l.maximumPrice||isNaN(n))&&Object(Kr.jsx)(Qr,{className:\"invalid-feedback d-block\",children:nt(\"inventory.marketplace.make_offer.final_price\",[\"commission\",\"finalprice\"],[l.commission.toString(),(n+l.commission).toString()])})]}),Object(Kr.jsx)(tc,{disabled:n<l.minimumPrice||n>l.maximumPrice||isNaN(n),onClick:()=>{!t||n<=l.minimumPrice||Pr.confirm(nt(\"inventory.marketplace.confirm_offer.info\",[\"furniname\",\"price\"],[h,n.toString()]),(()=>{$n(new a.de(n,t.isWallItem?2:1,t.id)),s(null)}),(()=>{s(null)}),null,null,nt(\"inventory.marketplace.confirm_offer.title\"))},children:nt(\"inventory.marketplace.make_offer.post\")})]})]})]})})]})},co=e=>{const{isVisible:t=!1,setIsVisible:s=null,rootNode:n=null,currentPage:r=null,navigationHidden:i=!1,setNavigationHidden:a=null,activeNodes:o=[],searchResult:l=null,setSearchResult:u=null,openPageByName:d=null,openPageByOfferId:h=null,getNodeById:j=null,activateNode:b=null}=Jt();return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e));case\"open\":if(t.length>2)if(4===t.length){if(\"offerId\"===t[2])return void h(parseInt(t[3]))}else d(t[2]);else s(!0);return}},eventUrlPrefix:\"catalog/\"};return N(e),()=>M(e)}),[s,h,d]),Object(Kr.jsxs)(Kr.Fragment,{children:[t&&Object(Kr.jsxs)(Ec,{uniqueKey:\"catalog\",className:\"nitro-catalog\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"catalog.title\"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(Xc,{subClassName:\"w-100\",children:n&&n.children.length>0&&n.children.map((e=>e.isVisible?Object(Kr.jsx)($c,{isActive:e.isActive,onClick:t=>{l&&u(null),b(e)},children:e.localization},e.pageId):null))}),Object(Kr.jsx)(aa,{node:n}),Object(Kr.jsx)(uc,{children:Object(Kr.jsxs)(Jr,{children:[!i&&Object(Kr.jsx)(vc,{className:\"catalog-left\",size:4,overflow:\"hidden\",children:o&&o.length>0&&Object(Kr.jsx)(ia,{node:o[0]})}),Object(Kr.jsx)(vc,{size:i?12:8,overflow:\"hidden\",children:no(r,(()=>a(!0)))})]})})]}),Object(Kr.jsx)(ta,{}),Object(Kr.jsx)(ro,{})]})};var io=s(28);const ao=Object(c.createContext)({chatHistoryState:null,roomHistoryState:null}),oo=e=>Object(Kr.jsx)(ao.Provider,{value:e.value,children:e.children});class lo{}lo.TYPE_CHAT=1,lo.TYPE_ROOM_INFO=2;const uo=()=>{const e=new Date;return`${e.getHours().toString().padStart(2,\"0\")}:${e.getMinutes().toString().padStart(2,\"0\")}`},ho=e=>{const{chatHistoryState:t=null,roomHistoryState:s=null}=Object(c.useContext)(ao),[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{e.id=t.chats.length,t.chats.push(e),t.chats.length>1e3&&t.chats.shift(),t.notify()}),[t]),o=Object(c.useCallback)((e=>{s.roomHistory.push(e),s.roomHistory.length>10&&s.roomHistory.shift(),s.notify()}),[s]),l=Object(c.useCallback)((e=>{const t=ie();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);if(!s)return;const n=uo(),r={id:-1,entityId:s.webID,name:s.name,look:s.figure,entityType:s.type,message:e.message,timestamp:n,type:lo.TYPE_CHAT,roomId:t.roomId};i(r)}),[i]);Gt(a.Tg.CHAT_EVENT,l);const u=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.STARTED:r(!0);case a.Yg.ENDED:}}),[]);Gt(a.Yg.ENDED,u),Gt(a.Yg.STARTED,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const s=ie();if(s&&s.roomId===t.data.roomId&&n){const e={id:-1,entityId:t.data.roomId,name:t.data.roomName,timestamp:uo(),type:lo.TYPE_ROOM_INFO,roomId:t.data.roomId};i(e);const s={id:t.data.roomId,name:t.data.roomName};o(s),r(!1)}}),[i,o,n]);return it(a.nc,d),null};class jo{constructor(){this._chats=void 0,this._notifier=void 0,this._chats=[]}notify(){this._notifier&&this._notifier()}get chats(){return this._chats}get notifier(){return this._notifier}set notifier(e){this._notifier=e}}let bo=null;const go=()=>bo;class Oo{constructor(){this._roomHistory=void 0,this._notifier=void 0,this._roomHistory=[]}get roomHistory(){return this._roomHistory}get notifier(){return this._notifier}set notifier(e){this._notifier=e}notify(){this._notifier&&this._notifier()}}const mo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,a]=Object(c.useState)(-1),[o,l]=Object(c.useState)(new jo),[u,d]=Object(c.useState)(new Oo),h=Object(c.useRef)(null),j=Object(c.useMemo)((()=>new io.c({defaultHeight:25,fixedWidth:!0})),[]),b=e=>{const t=o.chats[e.index];e.index;return Object(Kr.jsx)(io.b,{cache:j,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Kr.jsxs)(ec,{style:e.style,className:\"p-1\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"muted\",children:t.timestamp}),t.type===lo.TYPE_CHAT&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{pointer:!0,noWrap:!0,dangerouslySetInnerHTML:{__html:t.name+\":\"}}),Object(Kr.jsx)(ei,{textBreak:!0,wrap:!0,grow:!0,children:t.message})]}),t.type===lo.TYPE_ROOM_INFO&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-small-room\"}),Object(Kr.jsx)(ei,{variant:\"danger\",textBreak:!0,wrap:!0,grow:!0,children:t.name})]})]},e.key)},e.key)},g=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:g,eventUrlPrefix:\"chat-history/\"};return N(e),()=>M(e)}),[g]),Object(c.useEffect)((()=>{const e=new jo,t=new Oo;return bo=e,e.notifier=()=>r((e=>e+1)),t.notifier=()=>a((e=>e+1)),l(e),d(t),()=>{e.notifier=null,t.notifier=null}}),[]),Object(c.useEffect)((()=>{h&&h.current&&t&&h.current.scrollToRow(-1)}),[t]),Object(Kr.jsxs)(oo,{value:{chatHistoryState:o,roomHistoryState:u},children:[Object(Kr.jsx)(ho,{}),t&&Object(Kr.jsxs)(ec,{gap:2,className:\"nitro-chat-history\",children:[Object(Kr.jsx)(vc,{className:\"chat-history-content h-100\",children:Object(Kr.jsx)(vc,{className:\"h-100\",children:Object(Kr.jsx)(io.a,{defaultWidth:300,defaultHeight:200,onResize:e=>j.clearAll(),children:e=>{let{height:t,width:s}=e;return Object(Kr.jsx)(io.d,{ref:h,width:s,height:t,rowCount:o.chats.length,rowHeight:j.rowHeight,className:\"chat-history-list\",rowRenderer:b,deferredMeasurementCache:j})}})})}),Object(Kr.jsx)(ec,{className:\"chat-toggle\",onClick:e=>s(!1)})]})]})},po=32,_o=64,Eo=\"x0123456789abcdefghijklmnopq\";class fo{}fo.DOOR=0,fo.UP=1,fo.DOWN=2,fo.SET=3,fo.UNSET=4;const xo={x:\"101010\",0:\"0065ff\",1:\"0091ff\",2:\"00bcff\",3:\"00e8ff\",4:\"00ffea\",5:\"00ffbf\",6:\"00ff93\",7:\"00ff68\",8:\"00ff3d\",9:\"19ff00\",a:\"44ff00\",b:\"70ff00\",c:\"9bff00\",d:\"f2ff00\",e:\"ffe000\",f:\"ffb500\",g:\"ff8900\",h:\"ff5e00\",i:\"ff3200\",j:\"ff0700\",k:\"ff0023\",l:\"ff007a\",m:\"ff00a5\",n:\"ff00d1\",o:\"ff00fc\",p:\"d600ff\",q:\"aa00ff\"};class Io{constructor(){this._currentAction=void 0,this._currentHeight=void 0,this._currentAction=fo.SET,this._currentHeight=Eo[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=fo.SET,this._currentHeight=Eo[1]}}class To{constructor(e,t){this._height=void 0,this._isBlocked=void 0,this._height=e,this._isBlocked=t}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const Co=(e,t)=>{let s=e*po/2-t*po/2;return s+=1024,[s,e*po/4+t*po/4]},No=(e,t)=>{const s=e-1024;return[(s/16+t/8)/2,(t/8-s/16)/2]},So=e=>{switch(e=parseInt(e.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},vo=e=>{switch(e){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}};class Ro extends a.xf{constructor(){super({width:2068,height:1124,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=void 0,this._width=void 0,this._height=void 0,this._isHolding=void 0,this._doorLocation=void 0,this._lastUsedTile=void 0,this._tilemapRenderer=void 0,this._actionSettings=void 0,this._isInitialized=void 0,this._assetCollection=void 0,this._tilemap=[],this._doorLocation=new a.Xe(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new a.Xe(-1,-1),this._actionSettings=new Io}initialize(){if(this._isInitialized)return;const e=lr().asset.getCollection(\"floor_editor\");e&&(this._assetCollection=e,this._tilemapRenderer=new a.cf(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const e=new a.Xe;this._tilemapRenderer.containsPoint=t=>(this._tilemapRenderer.worldTransform.applyInverse(t,e),this.tileHitDetection(e,!1)),this._tilemapRenderer.on(\"pointerup\",(()=>{this._isHolding=!1})),this._tilemapRenderer.on(\"pointerout\",(()=>{this._isHolding=!1})),this._tilemapRenderer.on(\"pointerdown\",(e=>{if(!(e.data.originalEvent instanceof PointerEvent)&&!(e.data.originalEvent instanceof TouchEvent))return;const t=e.data.originalEvent;if(t instanceof MouseEvent&&2===t.button)return;const s=e.data.global;this.tileHitDetection(s,!0)})),this._tilemapRenderer.on(\"click\",(e=>{if(!(e.data.originalEvent instanceof PointerEvent))return;if(2===e.data.originalEvent.button)return;const t=e.data.global;this.tileHitDetection(t,!0,!0)}))}tileHitDetection(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this._tilemapRenderer.pointsBuf,r=a.jf,c=n.length;t&&(this._isHolding=!0);for(let i=0;i<c;i+=r){const t=i+r,c=n.slice(i,t),a=po,o=16,l=Math.floor(e.x),u=Math.floor(e.y),d=c[2],h=c[3],j=d+a/2,b=h+o/2;if(Math.abs(l-j)/(.5*a)+Math.abs(u-b)/(.5*o)<=1){if(this._isHolding){const[e,t]=No(d,h);s?this.onClick(e,t):this._lastUsedTile.x===e&&this._lastUsedTile.y===t||(this._lastUsedTile.x=e,this._lastUsedTile.y=t,this.onClick(e,t))}return!0}}return!1}onClick(e,t){const s=this._tilemap[t][e],n=Eo.indexOf(s.height);let r=0;switch(this._actionSettings.currentAction){case fo.DOOR:return void(\"x\"!==s.height&&(this._doorLocation.x=e,this._doorLocation.y=t,this.renderTiles()));case fo.UP:if(\"x\"===s.height)return;r=n+1;break;case fo.DOWN:if(\"x\"===s.height||n<=1)return;r=n-1;break;case fo.SET:r=Eo.indexOf(this._actionSettings.currentHeight);break;case fo.UNSET:r=0}if(-1===r)return;if(n===r)return;r>0&&(e+1>this._width&&(this._width=e+1),t+1>this._height&&(this._height=t+1));const c=Eo[r];c&&(s.isBlocked||(this._tilemap[t][e].height=c,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let e=0;e<this._tilemap.length;e++)for(let t=0;t<this.tilemap[e].length;t++){const s=this.tilemap[e][t];let n=s.height;this._doorLocation.x===t&&this._doorLocation.y===e&&(n=Ro.TILE_DOOR),s.isBlocked&&(n=Ro.TILE_BLOCKED);const[r,c]=Co(t,e);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${n}`),r,c)}}setTilemap(e,t){this._tilemap=[];const s=e.split(\"\\r\");let n=0,r=s.length;for(let c=0;c<r;c++){const e=s[c];0!==e.length?e.length>n&&(n=e.length):(s.splice(c,1),r=s.length,c--)}for(let c=0;c<r;c++){this._tilemap[c]=[];const e=s[c];for(let s=0;s<n;s++){const n=t[c]&&t[c][s]||!1,r=e[s];this._tilemap[c][s]=new To(\"x\"!==r&&\"X\"!==r&&r?r:\"x\",n)}for(let t=n;t<_o;t++)this.tilemap[c][t]=new To(\"x\",!1)}for(let c=r;c<_o;c++){this.tilemap[c]||(this.tilemap[c]=[]);for(let e=0;e<_o;e++)this.tilemap[c][e]=new To(\"x\",!1)}this._width=n,this._height=r}getCurrentTilemapString(){if(\"x\"===this._tilemap[this._height-1][this._width-1].height){this._width=-1,this._height=-1;for(let e=63;e>=0;e--)if(this._tilemap[e])for(let t=63;t>=0;t--){if(!this._tilemap[e][t])continue;\"x\"!==this._tilemap[e][t].height&&(t+1>this._width&&(this._width=t+1),e+1>this._height&&(this._height=e+1))}}const e=[];for(let t=0;t<this._height;t++){const s=[];for(let e=0;e<this._width;e++){const n=this._tilemap[t][e];s[e]=n.height}e[t]=s.join(\"\")}return e.join(\"\\r\")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(e){this._doorLocation=e}get actionSettings(){return this._actionSettings}static get instance(){return Ro._INSTANCE||(Ro._INSTANCE=new Ro),Ro._INSTANCE}}Ro._INSTANCE=null,Ro.TILE_BLOCKED=\"r_blocked\",Ro.TILE_DOOR=\"r_door\";const Ao=Object(c.createContext)({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),yo=e=>Object(Kr.jsx)(Ao.Provider,{...e}),wo=()=>Object(c.useContext)(Ao),ko=e=>{const{gap:t=1,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),{originalFloorplanSettings:u=null,setOriginalFloorplanSettings:d=null,setVisualizationSettings:h=null}=wo(),j=Object(c.useRef)(null),b=Object(c.useCallback)((e=>{const t=e.getParser();d((e=>{const s={...e};return s.reservedTiles=t.blockedTilesMap,Ro.instance.setTilemap(s.tilemap,s.reservedTiles),s})),i(!0),j.current.scrollTo(Ro.instance.view.width/3,0)}),[d]);it(a.Pg,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();d((e=>{const s={...e};return s.entryPoint=[t.x,t.y],s.entryPointDir=t.direction,s})),h((e=>{const s={...e};return s.entryPointDir=t.direction,s})),Ro.instance.doorLocation=new a.Xe(t.x,t.y),l(!0)}),[d,h]);it(a.yg,g);const O=e=>{const t=j.current;if(t)switch(e){case\"up\":t.scrollBy({top:-10});break;case\"down\":t.scrollBy({top:10});break;case\"left\":t.scrollBy({left:-10});break;case\"right\":t.scrollBy({left:10})}};return Object(c.useEffect)((()=>()=>{Ro.instance.clear(),h((e=>({wallHeight:u.wallHeight,thicknessWall:u.thicknessWall,thicknessFloor:u.thicknessFloor,entryPointDir:e.entryPointDir})))}),[u.thicknessFloor,u.thicknessWall,u.wallHeight,h]),Object(c.useEffect)((()=>{o&&r&&Ro.instance.renderTiles()}),[o,r]),Object(c.useEffect)((()=>{$n(new a.yc),$n(new a.tc),Ro.instance.tilemapRenderer.interactive=!0,j.current&&j.current.appendChild(Ro.instance.renderer.view)}),[]),Object(Kr.jsxs)(vc,{gap:t,...n,children:[Object(Kr.jsxs)(Jr,{overflow:\"hidden\",gap:1,children:[Object(Kr.jsx)(vc,{center:!0,size:1,children:Object(Kr.jsx)(tc,{className:\"d-md-none\",onClick:e=>O(\"left\"),children:Object(Kr.jsx)(ac.a,{icon:\"arrow-left\"})})}),Object(Kr.jsxs)(vc,{overflow:\"hidden\",size:10,gap:1,children:[Object(Kr.jsx)(ec,{justifyContent:\"center\",className:\"d-md-none\",children:Object(Kr.jsx)(tc,{shrink:!0,onClick:e=>O(\"up\"),children:Object(Kr.jsx)(ac.a,{icon:\"arrow-up\"})})}),Object(Kr.jsx)(Qr,{overflow:\"auto\",innerRef:j}),Object(Kr.jsx)(ec,{justifyContent:\"center\",className:\"d-md-none\",children:Object(Kr.jsx)(tc,{shrink:!0,onClick:e=>O(\"down\"),children:Object(Kr.jsx)(ac.a,{icon:\"arrow-down\"})})})]}),Object(Kr.jsx)(vc,{center:!0,size:1,children:Object(Kr.jsx)(tc,{className:\"d-md-none\",onClick:e=>O(\"right\"),children:Object(Kr.jsx)(ac.a,{icon:\"arrow-right\"})})})]}),s]})},Do=e=>e.replace(/\\r\\n|\\r|\\n/g,\"\\n\").toLowerCase(),Uo=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(\"\"),{originalFloorplanSettings:r=null}=wo();return Cs((()=>{n(Do(r.tilemap))})),Object(Kr.jsxs)(Ec,{theme:\"primary\",className:\"floorplan-import-export\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"floor.plan.editor.import.export\"),onCloseClick:t}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsx)(\"textarea\",{className:\"h-100\",value:s,onChange:e=>n(e.target.value)}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{onClick:e=>n(Do(r.tilemap)),children:nt(\"floor.plan.editor.revert.to.last.received.map\")}),Object(Kr.jsx)(tc,{onClick:()=>{$n(new a.ui(s.split(\"\\n\").join(\"\\r\"),r.entryPoint[0],r.entryPoint[1],r.entryPointDir,So(r.thicknessWall),So(r.thicknessFloor),r.wallHeight-1))},children:nt(\"floor.plan.editor.save\")})]})]})]})},Po=e=>{const{visualizationSettings:t=null,setVisualizationSettings:s=null}=wo(),[n,r]=Object(c.useState)(fo.SET),[i,a]=Object(c.useState)(0),o=e=>{r(e),Ro.instance.actionSettings.currentAction=e},l=e=>{(isNaN(e)||e<=0)&&(e=0),e>16&&(e=16),s((t=>{const s={...t};return s.wallHeight=e,s}))};return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(vc,{size:5,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"floor.plan.editor.draw.mode\")}),Object(Kr.jsxs)(ec,{gap:3,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(kc,{itemActive:n===fo.SET,onClick:e=>o(fo.SET),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-set-tile\"})}),Object(Kr.jsx)(kc,{itemActive:n===fo.UNSET,onClick:e=>o(fo.UNSET),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-unset-tile\"})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(kc,{itemActive:n===fo.UP,onClick:e=>o(fo.UP),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-increase-height\"})}),Object(Kr.jsx)(kc,{itemActive:n===fo.DOWN,onClick:e=>o(fo.DOWN),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-decrease-height\"})})]}),Object(Kr.jsx)(kc,{itemActive:n===fo.DOOR,onClick:e=>o(fo.DOOR),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-set-door\"})})]})]}),Object(Kr.jsxs)(vc,{alignItems:\"center\",size:4,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"floor.plan.editor.enter.direction\")}),Object(Kr.jsx)(\"i\",{className:`icon icon-door-direction-${t.entryPointDir} cursor-pointer`,onClick:()=>{s((e=>{const t={...e};return t.entryPointDir<7?++t.entryPointDir:t.entryPointDir=0,t}))}})]}),Object(Kr.jsxs)(vc,{size:3,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"floor.editor.wall.height\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ac.a,{icon:\"caret-left\",className:\"cursor-pointer\",onClick:()=>{let e=t.wallHeight-1;e<=0&&(e=0),l(e)}}),Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm quantity-input\",value:t.wallHeight,onChange:e=>l(e.target.valueAsNumber)}),Object(Kr.jsx)(ac.a,{icon:\"caret-right\",className:\"cursor-pointer\",onClick:()=>{let e=t.wallHeight+1;e>16&&(e=16),l(e)}})]})]})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(vc,{size:6,children:[Object(Kr.jsxs)(ei,{bold:!0,children:[nt(\"floor.plan.editor.tile.height\"),\": \",i]}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:26,step:1,value:i,onChange:e=>{return t=e,(isNaN(t)||t<=0)&&(t=0),t>26&&(t=26),a(t),void(Ro.instance.actionSettings.currentHeight=t.toString(36));var t},renderThumb:(e,t)=>{let{style:s,...n}=e;return Object(Kr.jsx)(\"div\",{style:{backgroundColor:`#${xo[t.valueNow.toString(33)]}`,...s},...n,children:t.valueNow})}})]}),Object(Kr.jsxs)(vc,{size:6,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"floor.plan.editor.room.options\")}),Object(Kr.jsxs)(ec,{className:\"align-items-center\",children:[Object(Kr.jsxs)(\"select\",{className:\"form-control form-control-sm\",value:t.thicknessWall,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessWall=t,s}));var t},children:[Object(Kr.jsx)(\"option\",{value:0,children:nt(\"navigator.roomsettings.wall_thickness.thinnest\")}),Object(Kr.jsx)(\"option\",{value:1,children:nt(\"navigator.roomsettings.wall_thickness.thin\")}),Object(Kr.jsx)(\"option\",{value:2,children:nt(\"navigator.roomsettings.wall_thickness.normal\")}),Object(Kr.jsx)(\"option\",{value:3,children:nt(\"navigator.roomsettings.wall_thickness.thick\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-control form-control-sm\",value:t.thicknessFloor,onChange:e=>{return t=parseInt(e.target.value),void s((e=>{const s={...e};return s.thicknessFloor=t,s}));var t},children:[Object(Kr.jsx)(\"option\",{value:0,children:nt(\"navigator.roomsettings.floor_thickness.thinnest\")}),Object(Kr.jsx)(\"option\",{value:1,children:nt(\"navigator.roomsettings.floor_thickness.thin\")}),Object(Kr.jsx)(\"option\",{value:2,children:nt(\"navigator.roomsettings.floor_thickness.normal\")}),Object(Kr.jsx)(\"option\",{value:3,children:nt(\"navigator.roomsettings.floor_thickness.thick\")})]})]})]})]})]})},Mo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)({tilemap:\"\",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[l,u]=Object(c.useState)({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),d=Object(c.useCallback)((e=>{s(!1)}),[]);Bt(a.og.DISPOSED,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.tilemap=t.model,s.wallHeight=t.wallHeight+1,s})),u((e=>{const s={...e};return s.wallHeight=t.wallHeight+1,s}))}),[]);it(a.Eb,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();o((e=>{const s={...e};return s.thicknessFloor=vo(t.thicknessFloor),s.thicknessWall=vo(t.thicknessWall),s})),u((e=>{const s={...e};return s.thicknessFloor=vo(t.thicknessFloor),s.thicknessWall=vo(t.thicknessWall),s}))}),[]);return it(a.xh,j),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}},eventUrlPrefix:\"floor-editor/\"};return N(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{Ro.instance.initialize()}),[]),Object(Kr.jsxs)(yo,{value:{originalFloorplanSettings:i,setOriginalFloorplanSettings:o,visualizationSettings:l,setVisualizationSettings:u},children:[t&&Object(Kr.jsxs)(Ec,{uniqueKey:\"floorpan-editor\",className:\"nitro-floorplan-editor\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"floor.plan.editor.title\"),onCloseClick:()=>s(!1)}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",children:[Object(Kr.jsx)(Po,{}),Object(Kr.jsx)(ko,{overflow:\"hidden\"}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{onClick:()=>{u({wallHeight:i.wallHeight,thicknessWall:i.thicknessWall,thicknessFloor:i.thicknessFloor,entryPointDir:i.entryPointDir}),Ro.instance.doorLocation=new a.Xe(i.entryPoint[0],i.entryPoint[1]),Ro.instance.setTilemap(i.tilemap,i.reservedTiles),Ro.instance.renderTiles()},children:nt(\"floor.plan.editor.reload\")}),Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{disabled:!0,children:nt(\"floor.plan.editor.preview\")}),Object(Kr.jsx)(tc,{onClick:e=>r(!0),children:nt(\"floor.plan.editor.import.export\")}),Object(Kr.jsx)(tc,{onClick:()=>{$n(new a.ui(Ro.instance.getCurrentTilemapString(),Ro.instance.doorLocation.x,Ro.instance.doorLocation.y,l.entryPointDir,So(l.thicknessWall),So(l.thicknessFloor),l.wallHeight-1))},children:nt(\"floor.plan.editor.save\")})]})]})]})]}),n&&Object(Kr.jsx)(Uo,{onCloseClick:()=>r(!1)})]})},Lo=e=>{const{friend:t=null}=e,[s,n]=Object(c.useState)(!1),{followFriend:r=null}=es(),i=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=e=>{const t=i.current;t&&(e.target===t||t.contains(e.target)||n(!1))};return document.addEventListener(a.Ce.MOUSE_CLICK,e),()=>document.removeEventListener(a.Ce.MOUSE_CLICK,e)}),[]),t?Object(Kr.jsxs)(\"div\",{ref:i,className:\"btn find-friends-active friend-bar-item \"+(s?\"friend-bar-item-active\":\"\"),onClick:e=>n((e=>!e)),children:[Object(Kr.jsxs)(\"div\",{className:\"friend-bar-item-head position-absolute \"+(t.id>0?\"avatar\":\"group\"),children:[t.id>0&&Object(Kr.jsx)(fc,{headOnly:!0,figure:t.figure,direction:2}),t.id<=0&&Object(Kr.jsx)(Ic,{isGroup:!0,badgeCode:t.figure})]}),Object(Kr.jsx)(\"div\",{className:\"friend-bar-text\",children:t.name}),s&&Object(Kr.jsxs)(\"div\",{className:\"d-flex pt-3 justify-content-between\",children:[Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer\",onClick:e=>_r(t.id)}),t.followingAllowed&&Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer\",onClick:e=>r(t)}),Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-profile cursor-pointer\",onClick:e=>Lr(t.id)})]})]}):Object(Kr.jsxs)(\"div\",{ref:i,className:\"btn find-friends friend-bar-item friend-bar-search\",children:[Object(Kr.jsx)(\"div\",{className:\"friend-bar-item-head position-absolute\"}),Object(Kr.jsx)(\"div\",{className:\"friend-bar-text\",children:nt(\"friend.bar.find.title\")})]})},Fo=e=>{const{onlineFriends:t=null}=e,[s,n]=Object(c.useState)(0),r=Object(c.useRef)();return Object(Kr.jsxs)(ec,{innerRef:r,alignItems:\"center\",className:\"friend-bar\",children:[Object(Kr.jsx)(\"button\",{className:\"friend-bar-button left\",disabled:s<=0,onClick:e=>n(s-1)}),Array.from(Array(3),((e,n)=>Object(Kr.jsx)(Lo,{friend:t[s+n]||null},n))),Object(Kr.jsx)(\"button\",{className:\"friend-bar-button right\",disabled:!(t.length>3&&s+3<=t.length-1),onClick:e=>n(s+1)})]})},Ho=e=>{const{headerText:t=\"\",isExpanded:s=!1,gap:n=0,classNames:r=[],children:i=null,...a}=e,[o,l]=Object(c.useState)(!1),{setClosers:u=null,closeAll:d=null}=cc(),h=Object(c.useCallback)((()=>l(!1)),[]),j=Object(c.useMemo)((()=>{const e=[\"nitro-card-accordion-set\"];return o&&e.push(\"active\"),r&&r.length&&e.push(...r),e}),[o,r]);return Object(c.useEffect)((()=>{l(s)}),[s]),Object(c.useEffect)((()=>{const e=h;return u((t=>{const s=[...t];return s.push(e),s})),()=>{u((t=>{const s=[...t],n=s.indexOf(e);return n>=0&&s.splice(n,1),s}))}}),[h,u]),Object(Kr.jsxs)(vc,{classNames:j,gap:n,...a,children:[Object(Kr.jsxs)(ec,{pointer:!0,justifyContent:\"between\",className:\"nitro-card-accordion-set-header px-2 py-1\",onClick:()=>{l((e=>!e))},children:[Object(Kr.jsx)(ei,{children:t}),Object(Kr.jsx)(ac.a,{icon:o?\"caret-up\":\"caret-down\"})]}),o&&Object(Kr.jsx)(vc,{fullHeight:!0,overflow:\"auto\",gap:0,className:\"nitro-card-accordion-set-content p-1\",children:i})]})},Bo=e=>{const{friend:t=null,selected:s=!1,selectFriend:n=null}=e,[r,i]=Object(c.useState)(!1),{followFriend:a=null,updateRelationship:o=null}=es(),l=(e,s)=>{e.stopPropagation(),o(t,s),i(!1)};return t?Object(Kr.jsxs)(ic,{justifyContent:\"between\",className:`friend-tab px-2 py-1 ${s&&\"bg-primary text-white\"}`,onClick:e=>n(t.id),children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qr,{onClick:e=>e.stopPropagation(),children:Object(Kr.jsx)(Qc,{userId:t.id})}),Object(Kr.jsx)(\"div\",{children:t.name})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[!r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.followingAllowed&&Object(Kr.jsx)(Qr,{pointer:!0,onClick:e=>{e.stopPropagation(),a(t)},className:\"nitro-friends-spritesheet icon-follow\",title:nt(\"friendlist.tip.follow\")}),t.online&&Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-chat\",onClick:e=>{e.stopPropagation(),_r(t.id)},title:nt(\"friendlist.tip.im\")}),t.id>0&&Object(Kr.jsx)(Qr,{className:`nitro-friends-spritesheet icon-${(()=>{if(!t)return\"none\";switch(t.relationshipStatus){case Bn.RELATIONSHIP_HEART:return\"heart\";case Bn.RELATIONSHIP_SMILE:return\"smile\";case Bn.RELATIONSHIP_BOBBA:return\"bobba\";default:return\"none\"}})()} cursor-pointer`,onClick:e=>{e.stopPropagation(),i(!0)},title:nt(\"infostand.link.relationship\")})]}),r&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-heart\",onClick:e=>l(e,Bn.RELATIONSHIP_HEART)}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-smile\",onClick:e=>l(e,Bn.RELATIONSHIP_SMILE)}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-bobba\",onClick:e=>l(e,Bn.RELATIONSHIP_BOBBA)}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-none\",onClick:e=>l(e,Bn.RELATIONSHIP_NONE)})]})]})]}):null},Go=e=>{const{list:t=null,selectedFriendsIds:s=null,selectFriend:n=null}=e;return t&&t.length?Object(Kr.jsx)(Kr.Fragment,{children:t.map(((e,t)=>Object(Kr.jsx)(Bo,{friend:e,selected:s&&s.indexOf(e.id)>=0,selectFriend:n},t)))}):null},Wo=e=>{const{request:t=null}=e,{requestResponse:s=null}=es();return t?Object(Kr.jsxs)(ic,{justifyContent:\"between\",className:\"px-2 py-1\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:t.id}),Object(Kr.jsx)(\"div\",{children:t.name})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-accept cursor-pointer\",onClick:e=>s(t.id,!0)}),Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-deny cursor-pointer\",onClick:e=>s(t.id,!1)})]})]}):null},Vo=e=>{const{children:t=null,...s}=e,{requests:n=[],requestResponse:r=null}=es();return n.length?Object(Kr.jsxs)(oc,{...s,children:[Object(Kr.jsxs)(vc,{fullHeight:!0,justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(vc,{gap:0,children:n.map(((e,t)=>Object(Kr.jsx)(Wo,{request:e},t)))}),Object(Kr.jsx)(ec,{justifyContent:\"center\",className:\"px-2 py-1\",children:Object(Kr.jsx)(tc,{onClick:e=>r(-1,!1),children:nt(\"friendlist.requests.dismissall\")})})]}),t]}):null},qo=e=>{const{selectedFriendsIds:t=null,removeFriendsText:s=null,removeSelectedFriends:n=null,onCloseClick:r=null}=e;return Object(Kr.jsxs)(Ec,{className:\"nitro-friends-remove-confirmation\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"friendlist.removefriendconfirm.title\"),onCloseClick:r}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsx)(\"div\",{children:s}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",disabled:0===t.length,onClick:n,children:nt(\"generic.ok\")}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:r,children:nt(\"generic.cancel\")})]})]})]})},Yo=e=>{const{selectedFriendsIds:t=null,onCloseClick:s=null,sendRoomInvite:n=null}=e,[r,i]=Object(c.useState)(\"\");return Object(Kr.jsxs)(Ec,{className:\"nitro-friends-room-invite\",uniqueKey:\"nitro-friends-room-invite\",theme:\"friendlist\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"friendlist.invite.title\"),onCloseClick:s}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[nt(\"friendlist.invite.summary\",[\"count\"],[t.length.toString()]),Object(Kr.jsx)(\"textarea\",{className:\"form-control\",value:r,onChange:e=>i(e.target.value)}),Object(Kr.jsx)(ei,{center:!0,className:\"bg-muted rounded p-1\",children:nt(\"friendlist.invite.note\")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",disabled:0===r.length||0===t.length,onClick:()=>n(r),children:nt(\"friendlist.invite.send\")}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:s,children:nt(\"generic.cancel\")})]})]})]})},zo=e=>{const{...t}=e,[s,n]=Object(c.useState)(\"\"),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),{canRequestFriend:u=null,requestFriend:d=null}=es(),h=Object(c.useCallback)((e=>{const t=e.getParser();i(t.friends),l(t.others)}),[]);return it(a.Id,h),Object(c.useEffect)((()=>{if(!s||!s.length)return;const e=setTimeout((()=>{s&&s.length&&$n(new a.Hd(s))}),500);return()=>clearTimeout(e)}),[s]),Object(Kr.jsx)(oc,{...t,children:Object(Kr.jsxs)(vc,{className:\"h-100\",children:[Object(Kr.jsx)(vc,{children:Object(Kr.jsx)(\"input\",{type:\"text\",className:\"w-100 friend-search\",placeholder:nt(\"generic.search\"),value:s,maxLength:50,onChange:e=>n(e.target.value)})}),Object(Kr.jsxs)(vc,{children:[r&&Object(Kr.jsxs)(Kr.Fragment,{children:[0===r.length&&Object(Kr.jsx)(ei,{gfbold:!0,className:\"px-2 py-1\",children:nt(\"friendlist.search.nofriendsfound\")}),r.length>0&&Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"px-2 py-1\",children:nt(\"friendlist.search.friendscaption\",[\"cnt\"],[r.length.toString()])}),Object(Kr.jsx)(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),Object(Kr.jsx)(vc,{gap:0,children:r.map((e=>Object(Kr.jsxs)(ic,{justifyContent:\"between\",className:\"px-2 py-1\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:e.avatarId}),Object(Kr.jsx)(\"div\",{children:e.avatarName})]}),Object(Kr.jsx)(ec,{alignItems:\"center\",gap:1,children:e.isAvatarOnline&&Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-chat cursor-pointer\",onClick:t=>_r(e.avatarId),title:nt(\"friendlist.tip.im\")})})]},e.avatarId)))})]})]}),o&&Object(Kr.jsxs)(Kr.Fragment,{children:[0===o.length&&Object(Kr.jsx)(ei,{gfbold:!0,className:\"px-2 py-1\",children:nt(\"friendlist.search.noothersfound\")}),o.length>0&&Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"px-2 py-1\",children:nt(\"friendlist.search.otherscaption\",[\"cnt\"],[o.length.toString()])}),Object(Kr.jsx)(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),Object(Kr.jsx)(vc,{gap:0,children:o.map((e=>Object(Kr.jsxs)(ic,{justifyContent:\"between\",className:\"px-2 py-1\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:e.avatarId}),Object(Kr.jsx)(\"div\",{children:e.avatarName})]}),Object(Kr.jsx)(ec,{alignItems:\"center\",gap:1,children:u(e.avatarId)&&Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-add cursor-pointer\",onClick:t=>d(e.avatarId,e.avatarName),title:nt(\"friendlist.tip.addfriend\")})})]},e.avatarId)))})]})]})]})]})})},Ko=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),{onlineFriends:d=[],offlineFriends:h=[],requests:j=[],requestFriend:b=null}=es(),g=Object(c.useMemo)((()=>{if(!n||!n.length)return\"\";const e=[];for(const t of n){let s=d.find((e=>e.id===t));s||(s=h.find((e=>e.id===t))),s&&e.push(s.name)}return nt(\"friendlist.removefriendconfirm.userlist\",[\"user_names\"],[e.join(\", \")])}),[h,d,n]),O=Object(c.useCallback)((e=>{e<0||r((t=>{const s=[...t],n=s.indexOf(e);return n>-1?s.splice(n,1):s.push(e),s}))}),[r]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e));case\"request\":if(t.length<4)return;b(parseInt(t[2]),t[3])}},eventUrlPrefix:\"friends/\"};return N(e),()=>M(e)}),[b]),t?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Ec,{className:\"nitro-friends\",uniqueKey:\"nitro-friends\",theme:\"friendlist\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"friendlist.friends\"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(uc,{overflow:\"hidden\",gap:1,className:\"text-black p-0\",children:Object(Kr.jsxs)(lc,{fullHeight:!0,overflow:\"hidden\",children:[Object(Kr.jsxs)(oc,{className:\"friend-headers\",headerText:nt(\"friendlist.friends\"),isExpanded:!0,children:[Object(Kr.jsx)(Ho,{headerText:nt(\"friendlist.friends\")+` (${d.length})`,isExpanded:!0,children:Object(Kr.jsx)(Go,{list:d,selectedFriendsIds:n,selectFriend:O})}),Object(Kr.jsx)(Ho,{headerText:nt(\"friendlist.friends.offlinecaption\")+` (${h.length})`,isExpanded:!0,children:Object(Kr.jsx)(Go,{list:h,selectedFriendsIds:n,selectFriend:O})}),n&&0===n.length&&Object(Kr.jsxs)(ec,{gap:1,className:\"friend-active-tab p-1\",children:[Object(Kr.jsx)(\"div\",{className:\"friend-follow-icon\"}),Object(Kr.jsx)(\"div\",{className:\"friend-profile-icon\"}),Object(Kr.jsx)(\"div\",{className:\"friend-delete-icon\"})]}),n&&n.length>0&&Object(Kr.jsxs)(ec,{gap:1,className:\"friend-active-tab p-1\",children:[Object(Kr.jsx)(\"div\",{className:\"friend-follow-icon active\",onClick:()=>o(!0)}),Object(Kr.jsx)(\"div\",{className:\"friend-profile-icon active\"}),Object(Kr.jsx)(\"div\",{className:\"friend-delete-icon active\",onClick:e=>u(!0)})]})]}),Object(Kr.jsx)(Vo,{className:\"friend-headers\",headerText:nt(\"friendlist.tab.friendrequests\")+` (${j.length})`,isExpanded:!1}),Object(Kr.jsx)(zo,{className:\"search-headers\",headerText:nt(\"people.search.title\")})]})}),Object(Kr.jsx)(\"div\",{className:\"friendlist-bottom p-1\"})]}),i&&Object(Kr.jsx)(Yo,{selectedFriendsIds:n,onCloseClick:()=>o(!1),sendRoomInvite:e=>{0!==n.length&&e&&0!==e.length&&($n(new a.Lh(e,n)),o(!1))}}),l&&Object(Kr.jsx)(qo,{selectedFriendsIds:n,removeFriendsText:g,onCloseClick:()=>u(!1),removeSelectedFriends:()=>{0!==n.length&&(r((e=>($n(new a.Pf(...e)),[]))),u(!1))}})]}):null},Qo=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O=\"relative\",overflow:m=\"hidden\",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=[\"layout-grid-item-messenger\"];return n&&e.push(\"active\"),(a||o>0)&&e.push(\"unique-item\"),a&&e.push(\"sold-out\"),l&&e.push(\"unseen\"),u&&e.push(\"has-highlight\"),d&&e.push(\"disabled\"),null===t&&e.push(\"icon\",\"loading-icon\"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(vc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(Rc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:\"unique-bg-override\",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:Object(Kr.jsx)(Ac,{value:o})})]}),p]})},$o=e=>{const{thread:t=null,group:s=null}=e,n=Object(c.useMemo)((()=>s.type===hr.GROUP_CHAT&&dr(s.chats[0].extraData)),[s]),r=Object(c.useMemo)((()=>!(!t||!s)&&(s.type===hr.PRIVATE_CHAT&&s.userId===ee().userId||!(!n||!s.chats.length||n.userId!==ee().userId))),[t,s,n]);return t&&s?s.userId?Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:r?\"end\":\"start\",gap:2,children:[Object(Kr.jsxs)(Qr,{shrink:!0,className:\"message-avatar\",children:[s.type===hr.PRIVATE_CHAT&&!r&&Object(Kr.jsx)(fc,{figure:t.participant.figure,direction:2}),n&&!r&&Object(Kr.jsx)(fc,{figure:n.figure,direction:2})]}),Object(Kr.jsxs)(Qr,{className:\"message-bubble text-black mt-2 py-1 px-2 messages-group-\"+(r?\"right\":\"left\"),children:[Object(Kr.jsxs)(Qr,{className:\"fw-bold username\",children:[r&&ee().userName,!r&&(n?n.username:t.participant.name)]}),s.chats.map(((e,t)=>Object(Kr.jsx)(Qr,{className:\"text-break\",children:e.message},t)))]}),r&&Object(Kr.jsx)(Qr,{shrink:!0,className:\"message-avatar\",children:Object(Kr.jsx)(fc,{figure:ee().figure,direction:4})})]}):Object(Kr.jsx)(Kr.Fragment,{children:s.chats.map(((e,t)=>Object(Kr.jsx)(ec,{fullWidth:!0,gap:2,justifyContent:\"start\",children:Object(Kr.jsxs)(Qr,{className:\"w-100 text-break\",children:[e.type===Or.SECURITY_NOTIFICATION&&Object(Kr.jsxs)(ec,{gap:2,alignItems:\"center\",className:\"thread-message mb-2 px-2 py-1 \",children:[Object(Kr.jsx)(Qr,{className:\"nitro-friends-spritesheet icon-warning flex-shrink-0 px-3\"}),Object(Kr.jsx)(Qr,{children:e.message})]}),e.type===Or.ROOM_INVITE&&Object(Kr.jsxs)(ec,{gap:2,alignItems:\"center\",className:\"bg-light rounded mb-2 px-2 py-1 small text-black\",children:[Object(Kr.jsx)(Qr,{className:\"messenger-notification-icon flex-shrink-0\"}),Object(Kr.jsxs)(Qr,{children:[nt(\"messenger.invitation\")+\" \",e.message]})]})]})},t)))}):null},Xo=e=>{const{thread:t=null}=e;return t.setRead(),Object(Kr.jsx)(Kr.Fragment,{children:t.groups.length>0&&t.groups.map(((e,s)=>Object(Kr.jsx)($o,{thread:t,group:e},s)))})},Jo=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(\"\"),{visibleThreads:l=[],activeThread:u=null,getMessageThread:d=null,sendMessage:h=null,setActiveThreadId:j=null,closeThread:b=null}=ss(),g=Object(c.useRef)(),O=()=>u&&u.participant&&Lr(u.participant.id),m=()=>{u&&i.length&&(h(u,i),o(\"\"))};return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(2===t.length){if(\"open\"===t[1])return void s(!0);{const e=d(parseInt(t[1]));if(!e)return;j(e.threadId),s(!0)}}},eventUrlPrefix:\"friends-messenger/\"};return N(e),()=>M(e)}),[d,j]),Object(c.useEffect)((()=>{t&&u&&(g.current.scrollTop=g.current.scrollHeight)}),[t,u]),Object(c.useEffect)((()=>{!t||u?!t&&u&&(r(u.threadId),j(-1)):n>0?j(n):l.length>0&&j(l[0].threadId)}),[t,u,n,l,j]),t?Object(Kr.jsxs)(Ec,{className:\"nitro-friends-messenger\",uniqueKey:\"nitro-friends-messenger\",theme:\"messenger\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"messenger.window.title\",[\"OPEN_CHAT_COUNT\"],[l.length.toString()]),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsx)(vc,{fullWidth:!0,size:4,children:Object(Kr.jsx)(\"div\",{className:\"d-flex h-100 overflow-auto gap-2\",children:l&&l.length>0&&l.map((e=>Object(Kr.jsxs)(Qo,{itemActive:u===e,onClick:t=>j(e.threadId),children:[e.unread&&Object(Kr.jsx)(Rc,{count:e.unreadCount}),Object(Kr.jsx)(ec,{fullWidth:!0,alignItems:\"center\",gap:1,children:Object(Kr.jsxs)(ec,{alignItems:\"center\",className:\"friend-head px-1\",children:[e.participant.id>0&&Object(Kr.jsx)(fc,{figure:e.participant.figure,headOnly:!0,direction:2}),e.participant.id<=0&&Object(Kr.jsx)(Ic,{isGroup:!0,badgeCode:e.participant.figure})]})})]},e.threadId)))})}),Object(Kr.jsx)(vc,{size:8,overflow:\"hidden\",className:\"w-100\",children:u&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"div\",{className:\"messenger-line\",children:Object(Kr.jsx)(\"p\",{className:\"nitro-messenger-header-text fw-bold\",children:nt(\"messenger.window.separator\",[\"FRIEND_NAME\"],[u.participant.name])})}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(sc,{className:\"gap-1\",children:[Object(Kr.jsx)(\"button\",{className:\"follow\",onClick:()=>u&&u.participant&&$n(new a.Fb(u.participant.id))}),Object(Kr.jsx)(\"button\",{className:\"profile\",onClick:O})]}),Object(Kr.jsx)(\"button\",{className:\"messenger-button fw-bold px-3\",onClick:O,children:nt(\"messenger.window.button.report\")})]}),Object(Kr.jsx)(\"button\",{className:\"clear\",onClick:e=>b(u.threadId)})]}),Object(Kr.jsx)(vc,{fit:!0,className:\"chat-messages\",children:Object(Kr.jsx)(vc,{innerRef:g,overflow:\"auto\",children:Object(Kr.jsx)(Xo,{thread:u})})}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"chat-input-form form-control-sm\",maxLength:255,placeholder:nt(\"messenger.window.input.default\",[\"FRIEND_NAME\"],[u.participant.name]),value:i,onChange:e=>o(e.target.value),onKeyDown:e=>{\"Enter\"===e.key&&m()}}),Object(Kr.jsx)(\"button\",{className:\"messenger-button chat-submit fw-bold px-3\",onClick:m,children:nt(\"widgets.chatinput.say\")})]})]})})]})]}):null},Zo=e=>{const{settings:t=null,onlineFriends:s=[]}=es();return t?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(gc.createPortal)(Object(Kr.jsx)(Fo,{onlineFriends:s}),document.getElementById(\"toolbar-friend-bar-container\")),Object(Kr.jsx)(Ko,{}),Object(Kr.jsx)(Jo,{})]}):null},el=(e,t)=>e.id<t.id?-1:e.id>t.id?1:0,tl=Object(c.createContext)({groupCustomize:null,setGroupCustomize:null}),sl=e=>Object(Kr.jsx)(tl.Provider,{value:e.value,children:e.children}),nl=()=>Object(c.useContext)(tl);class rl{constructor(e,t,s,n){this.type=void 0,this.key=void 0,this.color=void 0,this.position=void 0,this.type=e,this.key=t||0,this.color=s||0,this.position=n||4}get code(){return 0===this.key?null:rl.getCode(this.type,this.key,this.color,this.position)}static getCode(e,t,s,n){return e+(t<10?\"0\":\"\")+t+(s<10?\"0\":\"\")+s+n}}rl.BASE=\"b\",rl.SYMBOL=\"s\";const cl=[0,1,2,3,4,5,6,7,8],il=e=>{const{badgeParts:t=[],setBadgeParts:s=null}=e,[n,r]=Object(c.useState)(-1),{groupCustomize:i=null}=nl(),a=(e,n,c)=>{const i=[...t];i[e][n]=c,s(i),\"key\"===n&&r(-1)};return t&&t.length?Object(Kr.jsxs)(Kr.Fragment,{children:[n<0&&t&&t.length>0&&t.map(((e,s)=>Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:2,className:\"bg-muted rounded px-2 py-1\",children:[Object(Kr.jsxs)(ec,{pointer:!0,center:!0,className:\"bg-muted rounded p-1\",onClick:e=>r(s),children:[t[s].code&&t[s].code.length>0&&Object(Kr.jsx)(Ic,{badgeCode:t[s].code,isGroup:!0}),(!t[s].code||!t[s].code.length)&&Object(Kr.jsx)(ec,{center:!0,className:\"badge-image group-badge\",children:Object(Kr.jsx)(ac.a,{icon:\"plus\"})})]}),e.type!==rl.BASE&&Object(Kr.jsx)(Jr,{gap:1,columnCount:3,children:cl.map(((e,n)=>Object(Kr.jsx)(Qr,{pointer:!0,className:\"group-badge-position-swatch \"+(t[s].position===e?\"active\":\"\"),onClick:t=>a(s,\"position\",e)},n)))}),Object(Kr.jsx)(Jr,{gap:1,columnCount:8,children:i.badgePartColors.length>0&&i.badgePartColors.map(((e,n)=>Object(Kr.jsx)(Qr,{pointer:!0,className:\"group-badge-color-swatch \"+(t[s].color===n+1?\"active\":\"\"),style:{backgroundColor:\"#\"+e.color},onClick:e=>a(s,\"color\",n+1)},n)))})]},s))),n>=0&&Object(Kr.jsxs)(Jr,{gap:1,columnCount:5,children:[t[n].type===rl.SYMBOL&&Object(Kr.jsx)(vc,{pointer:!0,center:!0,className:\"bg-muted rounded p-1\",onClick:e=>a(n,\"key\",0),children:Object(Kr.jsx)(ec,{center:!0,className:\"badge-image group-badge\",children:Object(Kr.jsx)(ac.a,{icon:\"times\"})})}),(t[n].type===rl.BASE?i.badgeBases:i.badgeSymbols).map(((e,s)=>Object(Kr.jsx)(vc,{pointer:!0,center:!0,className:\"bg-muted rounded p-1\",onClick:t=>a(n,\"key\",e.id),children:Object(Kr.jsx)(Ic,{badgeCode:rl.getCode(t[n].type,e.id,t[n].color,4),isGroup:!0})},s)))]})]}):null},al=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,skipDefault:r=null}=e,[i,o]=Object(c.useState)(null),{groupCustomize:l=null}=nl(),u=Object(c.useCallback)((()=>{if(!t||!i||!i.length)return!1;if(t.groupBadgeParts===i)return!0;if(t.groupId<=0)return s((e=>{const t={...e};return t.groupBadgeParts=i,t})),!0;const e=[];return i.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),$n(new a.dd(t.groupId,e)),!0}),[t,i,s]);return Object(c.useEffect)((()=>{if(t.groupBadgeParts)return;const e=[new rl(rl.BASE,l.badgeBases[0].id,l.badgePartColors[0].id),new rl(rl.SYMBOL,0,l.badgePartColors[0].id),new rl(rl.SYMBOL,0,l.badgePartColors[0].id),new rl(rl.SYMBOL,0,l.badgePartColors[0].id),new rl(rl.SYMBOL,0,l.badgePartColors[0].id)];s((t=>({...t,groupBadgeParts:e})))}),[t.groupBadgeParts,l,s]),Object(c.useEffect)((()=>{t.groupId<=0?o(t.groupBadgeParts?[...t.groupBadgeParts]:null):o(t.groupBadgeParts)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Kr.jsxs)(Jr,{overflow:\"hidden\",gap:1,children:[Object(Kr.jsx)(vc,{size:2,children:Object(Kr.jsx)(ec,{center:!0,className:\"bg-muted rounded p-1\",children:Object(Kr.jsx)(Ic,{badgeCode:(()=>{if(!i||!i.length)return\"\";let e=\"\";return i.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})})}),Object(Kr.jsx)(vc,{size:10,overflow:\"auto\",children:Object(Kr.jsx)(il,{badgeParts:i,setBadgeParts:o})})]})},ol=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(null),{groupCustomize:o=null}=nl(),l=e=>0===e?o.groupColorsA.find((t=>t.id===r[e])).color:o.groupColorsB.find((t=>t.id===r[e])).color,u=(e,t)=>{i((s=>{const n=[...s];return n[e]=t,n}))},d=Object(c.useCallback)((()=>!!(t&&r&&r.length)&&(t.groupColors===r||(t.groupId<=0?(s((e=>{const t={...e};return t.groupColors=[...r],t})),!0):($n(new a.ed(t.groupId,r[0],r[1])),!0)))),[t,r,s]);return Object(c.useEffect)((()=>{if(!o.groupColorsA||!o.groupColorsB||t.groupColors)return;const e=[o.groupColorsA[0].id,o.groupColorsB[0].id];s((t=>({...t,groupColors:e})))}),[o,t.groupColors,s]),Object(c.useEffect)((()=>{t.groupId<=0?i(t.groupColors?[...t.groupColors]:null):i(t.groupColors)}),[t]),Object(c.useEffect)((()=>(n({action:d}),()=>n(null))),[n,d]),r?Object(Kr.jsxs)(Jr,{overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{size:2,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"group.edit.color.guild.color\")}),t.groupColors&&t.groupColors.length>0&&Object(Kr.jsxs)(ec,{overflow:\"hidden\",className:\"rounded border\",children:[Object(Kr.jsx)(Qr,{className:\"group-color-swatch\",style:{backgroundColor:\"#\"+l(0)}}),Object(Kr.jsx)(Qr,{className:\"group-color-swatch\",style:{backgroundColor:\"#\"+l(1)}})]})]}),Object(Kr.jsxs)(vc,{size:5,gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"group.edit.color.primary.color\")}),Object(Kr.jsx)(Zr,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsA&&o.groupColorsA.map(((e,s)=>Object(Kr.jsx)(\"div\",{className:\"group-badge-color-swatch cursor-pointer\"+Zi()({\" active\":t.groupColors[0]===e.id}),style:{backgroundColor:\"#\"+e.color},onClick:()=>u(0,e.id)},s)))})]}),Object(Kr.jsxs)(vc,{size:5,gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"group.edit.color.secondary.color\")}),Object(Kr.jsx)(Zr,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:t.groupColors&&o.groupColorsB&&o.groupColorsB.map(((e,s)=>Object(Kr.jsx)(\"div\",{className:\"group-badge-color-swatch cursor-pointer\"+Zi()({\" active\":t.groupColors[1]===e.id}),style:{backgroundColor:\"#\"+e.color},onClick:()=>u(1,e.id)},s)))})]})]}):null},ll=e=>{const{groupData:t=null,setGroupData:s=null,purchaseCost:n=0}=e,{groupCustomize:r=null}=nl(),c=e=>0===e?r.groupColorsA.find((s=>s.id===t.groupColors[e])).color:r.groupColorsB.find((s=>s.id===t.groupColors[e])).color;return t?Object(Kr.jsxs)(Jr,{overflow:\"hidden\",gap:1,children:[Object(Kr.jsxs)(vc,{size:3,children:[Object(Kr.jsxs)(vc,{center:!0,className:\"bg-muted rounded p-1\",gap:2,children:[Object(Kr.jsx)(ei,{bold:!0,center:!0,children:nt(\"group.create.confirm.guildbadge\")}),Object(Kr.jsx)(Ic,{badgeCode:(()=>{if(!t||!t.groupBadgeParts||!t.groupBadgeParts.length)return\"\";let e=\"\";return t.groupBadgeParts.forEach((t=>t.code&&(e+=t.code))),e})(),isGroup:!0})]}),Object(Kr.jsxs)(vc,{center:!0,className:\"bg-muted rounded p-1\",gap:2,children:[Object(Kr.jsx)(ei,{bold:!0,center:!0,children:nt(\"group.edit.color.guild.color\")}),Object(Kr.jsxs)(ec,{overflow:\"hidden\",className:\"rounded border\",children:[Object(Kr.jsx)(Qr,{className:\"group-color-swatch\",style:{backgroundColor:\"#\"+c(0)}}),Object(Kr.jsx)(Qr,{className:\"group-color-swatch\",style:{backgroundColor:\"#\"+c(1)}})]})]})]}),Object(Kr.jsxs)(vc,{size:9,justifyContent:\"between\",children:[Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:t.groupName}),Object(Kr.jsx)(ei,{children:t.groupDescription})]}),Object(Kr.jsx)(ei,{overflow:\"auto\",children:nt(\"group.create.confirm.info\")})]}),Object(Kr.jsx)(ei,{center:!0,variant:\"white\",className:\"bg-primary rounded p-1\",children:nt(\"group.create.confirm.buyinfo\",[\"amount\"],[n.toString()])})]})]}):null},ul=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null,close:r=null,isCreator:i=!1,availableRooms:o=[]}=e,[l,u]=Object(c.useState)(\"\"),[d,h]=Object(c.useState)(\"\"),[j,b]=Object(c.useState)(-1),g=Object(c.useCallback)((()=>!!(t&&l&&l.length)&&(l===t.groupName&&d===t.groupDescription||(t.groupId<=0?!(j<=0)&&(s((e=>{const t={...e};return t.groupName=l,t.groupDescription=d,t.groupHomeroomId=j,t})),!0):($n(new a.fd(t.groupId,l,d||\"\")),!0)))),[t,l,d,j,s]);return Object(c.useEffect)((()=>{u(t.groupName||\"\"),h(t.groupDescription||\"\"),b(t.groupHomeroomId)}),[t]),Object(c.useEffect)((()=>(n({action:g}),()=>n(null))),[n,g]),t?Object(Kr.jsxs)(vc,{justifyContent:\"between\",overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{center:!0,className:\"col-3\",children:nt(\"group.edit.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:l,maxLength:29,onChange:e=>u(e.target.value)})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{center:!0,className:\"col-3\",children:nt(\"group.edit.desc\")}),Object(Kr.jsx)(\"textarea\",{className:\"form-control form-control-sm\",value:d,maxLength:254,onChange:e=>h(e.target.value)})]}),i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{center:!0,className:\"col-3\",children:nt(\"group.edit.base\")}),Object(Kr.jsx)(vc,{fullWidth:!0,gap:1,children:Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:j,onChange:e=>b(parseInt(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:-1,disabled:!0,children:nt(\"group.edit.base.select.room\")}),o&&o.map(((e,t)=>Object(Kr.jsx)(\"option\",{value:e.id,children:e.name},t)))]})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:\"col-3\",children:\"\\xa0\"}),Object(Kr.jsx)(ei,{small:!0,children:nt(\"group.edit.base.warning\")})]})]})]}),!i&&Object(Kr.jsx)(tc,{variant:\"danger\",onClick:()=>{!t||t.groupId<=0||Pr.confirm(nt(\"group.deleteconfirm.desc\"),(()=>{$n(new a.Qc(t.groupId)),r&&r()}),null,null,null,nt(\"group.deleteconfirm.title\"))},children:nt(\"group.delete\")}),i&&Object(Kr.jsx)(ei,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:e=>y(\"navigator/create\"),children:nt(\"group.createroom\")})]}):null},dl=[1,2,3,4],hl=e=>{const{onClose:t=null}=e,[s,n]=Object(c.useState)(1),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(0),b=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.availableRooms.forEach(((e,t)=>s.push({id:t,name:e}))),d(s),j(t.groupCost)}),[]);return it(a.Nc,b),Object(c.useEffect)((()=>{n(1),l({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),$n(new a.Mc)}),[l]),o?Object(Kr.jsxs)(Ec,{className:\"nitro-group-creator\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"group.create.title\"),onCloseClick:()=>{i(null),l(null),t&&t()}}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsx)(ec,{center:!0,className:\"creator-tabs\",children:dl.map(((e,t)=>Object(Kr.jsx)(ec,{center:!0,className:`tab tab-${1===e?\"blue-flat\":4===e?\"yellow\":\"blue-arrow\"} ${s===e?\"active\":\"\"}`,children:Object(Kr.jsx)(ei,{variant:\"white\",children:nt(`group.create.steplabel.${e}`)})},t)))}),Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(Qr,{className:`nitro-group-tab-image tab-${s}`}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:4,children:nt(`group.create.stepcaption.${s}`)}),Object(Kr.jsx)(ei,{children:nt(`group.create.stepdesc.${s}`)})]})]}),Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[1===s&&Object(Kr.jsx)(ul,{groupData:o,setGroupData:l,setCloseAction:i,close:null,isCreator:!0,availableRooms:u}),2===s&&Object(Kr.jsx)(al,{groupData:o,setGroupData:l,setCloseAction:i}),3===s&&Object(Kr.jsx)(ol,{groupData:o,setGroupData:l,setCloseAction:i}),4===s&&Object(Kr.jsx)(ll,{groupData:o,setGroupData:l,purchaseCost:h})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"link\",className:\"text-black\",onClick:()=>{r&&r.action&&!r.action()||(1!==s?n((e=>e-1)):t())},children:nt(1===s?\"generic.cancel\":\"group.create.previousstep\")}),Object(Kr.jsx)(tc,{disabled:4===s&&!oe(),variant:4===s?oe()?\"success\":\"danger\":\"primary\",onClick:()=>{r&&r.action&&!r.action()||(4!==s?n((e=>4===e?e:e+1)):(()=>{if(!o)return;const e=[];o.groupBadgeParts.forEach((t=>{t.code&&(e.push(t.key),e.push(t.color),e.push(t.position))})),$n(new a.Lc(o.groupName,o.groupDescription,o.groupHomeroomId,o.groupColors[0],o.groupColors[1],e))})())},children:nt(4===s?oe()?\"group.create.confirm.buy\":\"group.create.confirm.viprequired\":\"group.create.nextstep\")})]})]})]})]}):null};class jl{}jl.NOT_MEMBER=0,jl.MEMBER=1,jl.REQUEST_PENDING=2;class bl{}bl.REGULAR=0,bl.EXCLUSIVE=1,bl.PRIVATE=2;const gl=[\"regular\",\"exclusive\",\"private\"],Ol=e=>{const{groupInformation:t=null,onClose:s=null,overflow:n=\"hidden\",...r}=e,i=t&&t.ownerName===ee().userName,o=Object(c.useCallback)((e=>{switch(e){case\"members\":xr(t.id);break;case\"members_pending\":xr(t.id,2);break;case\"manage\":fr(t.id);break;case\"homeroom\":Ar(t.roomId);break;case\"furniture\":y(\"catalog/open/\"+f.GUILD_CUSTOM_FURNI);break;case\"popular_groups\":y(\"navigator/search/groups\")}}),[t]);return t?Object(Kr.jsxs)(Jr,{className:\"profile-grey-bg-border p-2\",overflow:n,...r,children:[Object(Kr.jsxs)(vc,{center:!0,size:3,overflow:\"hidden\",children:[Object(Kr.jsx)(ec,{alignItems:\"center\",overflow:\"hidden\",className:\"group-badge\",children:Object(Kr.jsx)(Ic,{badgeCode:t.badge,isGroup:!0,scale:2})}),Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"members\"),children:nt(\"group.membercount\",[\"totalMembers\"],[t.membersCount.toString()])}),t.pendingRequestsCount>0&&Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"members_pending\"),children:nt(\"group.pendingmembercount\",[\"amount\"],[t.pendingRequestsCount.toString()])}),t.isOwner&&Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"manage\"),children:nt(\"group.manage\")})]}),t.membershipType===jl.NOT_MEMBER||t.membershipType===jl.REQUEST_PENDING?null:i?Object(Kr.jsx)(\"i\",{className:\"icon icon-group-owner\",title:nt(\"group.youareowner\")}):t.isAdmin?Object(Kr.jsx)(\"i\",{className:\"icon icon-group-admin\",title:nt(\"group.youareadmin\")}):Object(Kr.jsx)(\"i\",{className:\"icon icon-group-member\",title:nt(\"group.youaremember\")})]}),Object(Kr.jsxs)(vc,{size:9,justifyContent:\"between\",overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(ei,{bold:!0,children:t.title}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-group-type-\"+t.type,title:nt(`group.edit.settings.type.${gl[t.type]}.help`)}),t.canMembersDecorate&&Object(Kr.jsx)(\"i\",{className:\"icon icon-group-decorate\",title:nt(\"group.memberscandecorate\")})]})]}),Object(Kr.jsx)(ei,{small:!0,children:nt(\"group.created\",[\"date\",\"owner\"],[t.createdAt,t.ownerName])})]}),Object(Kr.jsx)(ei,{small:!0,textBreak:!0,overflow:\"auto\",className:\"group-description\",children:t.description})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"homeroom\"),children:nt(\"group.linktobase\")}),Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"furniture\"),children:nt(\"group.buyfurni\")}),Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>o(\"popular_groups\"),children:nt(\"group.showgroups\")})]}),t.type!==bl.PRIVATE&&Object(Kr.jsx)(tc,{disabled:t.membershipType===jl.REQUEST_PENDING||i,onClick:()=>{t.type===bl.PRIVATE&&t.membershipType===jl.NOT_MEMBER||(t.membershipType!==jl.MEMBER?t&&Ir(t.id):Pr.confirm(nt(\"group.leaveconfirm.desc\"),(()=>{$n(new a.cd(t.id,ee().userId)),s&&s()}),null))},children:nt(i?\"group.youareowner\":t.type===bl.PRIVATE?\"\":t.membershipType===jl.MEMBER?\"group.leave\":t.membershipType===jl.NOT_MEMBER&&t.type===bl.REGULAR?\"group.join\":t.membershipType===jl.REQUEST_PENDING?\"group.membershippending\":t.membershipType===jl.NOT_MEMBER&&t.type===bl.EXCLUSIVE?\"group.requestmembership\":void 0)})]})]})]}):null},ml=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const n=e.getParser();(t&&t.id===n.id||n.flag)&&s(n)}),[t]);return it(a.Uc,n),t?Object(Kr.jsxs)(Ec,{className:\"nitro-group-information-standalone\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"group.window.title\"),onCloseClick:e=>s(null)}),Object(Kr.jsx)(uc,{children:Object(Kr.jsx)(Ol,{groupInformation:t,onClose:()=>s(null)})})]}):null},pl=[\"regular\",\"exclusive\",\"private\"],_l=e=>{const{groupData:t=null,setGroupData:s=null,setCloseAction:n=null}=e,[r,i]=Object(c.useState)(t.groupState),[o,l]=Object(c.useState)(t.groupCanMembersDecorate),u=Object(c.useCallback)((()=>!!t&&(r===t.groupState&&o===t.groupCanMembersDecorate||(t.groupId<=0?(s((e=>{const t={...e};return t.groupState=r,t.groupCanMembersDecorate=o,t})),!0):($n(new a.gd(t.groupId,r,o?0:1)),!0)))),[t,r,o,s]);return Object(c.useEffect)((()=>{i(t.groupState),l(t.groupCanMembersDecorate)}),[t]),Object(c.useEffect)((()=>(n({action:u}),()=>n(null))),[n,u]),Object(Kr.jsxs)(vc,{overflow:\"auto\",children:[Object(Kr.jsx)(vc,{children:pl.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"groupState\",checked:r===t,onChange:e=>i(t)}),Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"i\",{className:`icon icon-group-type-${t}`}),Object(Kr.jsx)(ei,{bold:!0,children:nt(`group.edit.settings.type.${e}.label`)})]}),Object(Kr.jsx)(ei,{children:nt(`group.edit.settings.type.${e}.help`)})]})]},t)))}),Object(Kr.jsx)(Zc,{}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:o,onChange:e=>l((e=>!e))}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"group.edit.settings.rights.caption\")}),Object(Kr.jsx)(ei,{children:nt(\"group.edit.settings.rights.members.help\")})]})]})]})},El=[1,2,3,5],fl=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=()=>{r((e=>(e&&e.action&&e.action(),null))),o(null)},u=Object(c.useCallback)((e=>{const t=e.getParser();i&&i.groupId===t.id&&o((e=>{const s={...e};return s.groupName=t.title,s.groupDescription=t.description,s.groupState=t.type,s.groupCanMembersDecorate=t.canMembersDecorate,s}))}),[i]);it(a.Uc,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=[];t.badgeParts.forEach(((e,t)=>{s.push(new a.Ic(e.isBase?a.Ic.BASE:a.Ic.SYMBOL,e.key,e.color,e.position))})),o({groupId:t.id,groupName:t.title,groupDescription:t.description,groupHomeroomId:t.roomId,groupState:t.state,groupCanMembersDecorate:t.canMembersDecorate,groupColors:[t.colorA,t.colorB],groupBadgeParts:s})}),[o]);return it(a.id,d),!i||i.groupId<=0?null:Object(Kr.jsxs)(Ec,{className:\"nitro-group-manager\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"group.window.title\"),onCloseClick:l}),Object(Kr.jsx)(Xc,{children:El.map((e=>Object(Kr.jsx)($c,{isActive:t===e,onClick:()=>(e=>{n&&n.action&&n.action(),s(e)})(e),children:nt(`group.edit.tab.${e}`)},e)))}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(Qr,{className:`nitro-group-tab-image tab-${t}`}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:4,children:nt(`group.edit.tabcaption.${t}`)}),Object(Kr.jsx)(ei,{children:nt(`group.edit.tabdesc.${t}`)})]})]}),Object(Kr.jsxs)(vc,{grow:!0,overflow:\"hidden\",children:[1===t&&Object(Kr.jsx)(ul,{groupData:i,setGroupData:o,setCloseAction:r,close:l}),2===t&&Object(Kr.jsx)(al,{groupData:i,setGroupData:o,setCloseAction:r,skipDefault:!0}),3===t&&Object(Kr.jsx)(ol,{groupData:i,setGroupData:o,setCloseAction:r}),5===t&&Object(Kr.jsx)(_l,{groupData:i,setGroupData:o,setCloseAction:r})]})]})]})},xl=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(0),[j,b]=Object(c.useState)(\"\"),[g,O]=Object(c.useState)(null),m=e=>{if(e.rank===a.bd.OWNER)return\"group.members.owner\";if(i.admin){if(e.rank===a.bd.ADMIN)return\"group.members.removerights\";if(e.rank===a.bd.MEMBER)return\"group.members.giverights\"}return\"\"},p=Object(c.useCallback)((()=>{-1!==t&&-1!==n&&-1!==l&&$n(new a.Wc(t,l,j,n))}),[t,n,l,j]),_=Object(c.useCallback)((e=>{const t=e.getParser();o(t),r(t.level),h(Math.ceil(t.totalMembersCount/t.pageSize))}),[]);it(a.Xc,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Pr.confirm(nt(t.furnitureCount>0?\"group.kickconfirm.desc\":\"group.kickconfirm_nofurni.desc\",[\"user\",\"amount\"],[g,t.furnitureCount.toString()]),(()=>{$n(new a.cd(i.groupId,t.userId)),p()}),null),O(null)}),[i,g,p]);it(a.Oc,E);const f=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(t.length<2)return;const n=parseInt(t[1])||-1,c=parseInt(t[2])||3;s(n),r(c)}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:f,eventUrlPrefix:\"group-members/\"};return N(e),()=>M(e)}),[f]),Object(c.useEffect)((()=>{u(0)}),[t,n,j]),Object(c.useEffect)((()=>{-1!==t&&-1!==n&&-1!==l&&$n(new a.Wc(t,l,j,n))}),[t,n,l,j]),Object(c.useEffect)((()=>{-1!==t&&(r(-1),o(null),h(0),b(\"\"),O(null))}),[t]),-1!==t&&i?Object(Kr.jsxs)(Ec,{className:\"nitro-group-members\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"group.members.title\",[\"groupName\"],[i?i.groupTitle:\"\"]),onCloseClick:e=>s(-1)}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ec,{center:!0,className:\"group-badge\",children:Object(Kr.jsx)(Ic,{badgeCode:i.badge,isGroup:!0,className:\"mx-auto d-block\"})}),Object(Kr.jsxs)(vc,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm w-100\",placeholder:nt(\"group.members.searchinfo\"),value:j,onChange:e=>b(e.target.value)}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm w-100\",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:nt(\"group.members.search.all\")}),Object(Kr.jsx)(\"option\",{value:\"1\",children:nt(\"group.members.search.admins\")}),Object(Kr.jsx)(\"option\",{value:\"2\",children:nt(\"group.members.search.pending\")})]})]})]}),Object(Kr.jsx)(Jr,{columnCount:2,overflow:\"auto\",className:\"nitro-group-members-list-grid\",children:i.result.map(((e,t)=>Object(Kr.jsxs)(ec,{gap:2,alignItems:\"center\",overflow:\"hidden\",className:\"member-list-item bg-white rounded p-2\",children:[Object(Kr.jsx)(\"div\",{className:\"avatar-head cursor-pointer\",onClick:()=>Lr(e.id),children:Object(Kr.jsx)(fc,{figure:e.figure,headOnly:!0,direction:2})}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,small:!0,pointer:!0,onClick:t=>Lr(e.id),children:e.name}),e.rank!==a.bd.REQUESTED&&Object(Kr.jsx)(ei,{small:!0,italics:!0,variant:\"muted\",children:nt(\"group.members.since\",[\"date\"],[e.joinedAt])})]}),Object(Kr.jsxs)(vc,{gap:1,children:[e.rank!==a.bd.REQUESTED&&Object(Kr.jsx)(ec,{center:!0,children:Object(Kr.jsx)(Qr,{pointer:i.admin,className:\"icon icon-group-small-\"+(e.rank===a.bd.OWNER?\"owner\":e.rank===a.bd.ADMIN?\"admin\":i.admin&&e.rank===a.bd.MEMBER?\"not-admin\":\"\"),title:nt(m(e)),onClick:t=>(e=>{i.admin&&e.rank!==a.bd.OWNER&&(e.rank!==a.bd.ADMIN?$n(new a.Gc(i.groupId,e.id)):$n(new a.Hc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank===a.bd.REQUESTED&&Object(Kr.jsx)(ec,{alignItems:\"center\",children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-accept\",title:nt(\"group.members.accept\"),onClick:t=>(e=>{i.admin&&e.rank===a.bd.REQUESTED&&($n(new a.Yc(i.groupId,e.id)),p())})(e)})}),i.admin&&e.rank!==a.bd.OWNER&&e.id!==ee().userId&&Object(Kr.jsx)(ec,{alignItems:\"center\",children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-deny\",title:nt(e.rank===a.bd.REQUESTED?\"group.members.reject\":\"group.members.kick\"),onClick:t=>(e=>{if(i.admin){if(e.rank===a.bd.REQUESTED)return $n(new a.Zc(i.groupId,e.id)),void p();O(e.name),$n(new a.Pc(i.groupId,e.id))}})(e)})})]})]},t)))}),Object(Kr.jsxs)(ec,{gap:1,justifyContent:\"between\",alignItems:\"center\",children:[Object(Kr.jsx)(tc,{disabled:0===i.pageIndex,onClick:e=>u((e=>e-1)),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-left\"})}),Object(Kr.jsx)(ei,{small:!0,children:nt(\"group.members.pageinfo\",[\"amount\",\"page\",\"totalPages\"],[i.totalMembersCount.toString(),(i.pageIndex+1).toString(),d.toString()])}),Object(Kr.jsx)(tc,{disabled:i.pageIndex===d-1,onClick:e=>u((e=>e+1)),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-right\"})})]})]})]}):null},Il=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();s(!1),Ar(t.roomId)}),[]);it(a.ad,i);const o=Object(c.useCallback)((e=>{const t=e.getParser(),s={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};t.bases.forEach(((e,t)=>s.badgeBases.push({id:t,images:e}))),t.symbols.forEach(((e,t)=>s.badgeSymbols.push({id:t,images:e}))),t.partColors.forEach(((e,t)=>s.badgePartColors.push({id:t,color:e}))),t.colorsA.forEach(((e,t)=>s.groupColorsA.push({id:t,color:e}))),t.colorsB.forEach(((e,t)=>s.groupColorsB.push({id:t,color:e}))),s.badgeBases.sort(el),s.badgeSymbols.sort(el),s.badgePartColors.sort(el),s.groupColorsA.sort(el),s.groupColorsB.sort(el),r(s)}),[r]);it(a.Kc,o);const l=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"create\":return void s(!0);case\"manage\":if(!t[2])return;return s(!1),void $n(new a.hd(Number(t[2])))}}),[]);return Object(c.useEffect)((()=>{const e={linkReceived:l,eventUrlPrefix:\"groups/\"};return N(e),()=>M(e)}),[l]),Object(c.useEffect)((()=>{$n(new a.Jc)}),[]),Object(Kr.jsxs)(sl,{value:{groupCustomize:n,setGroupCustomize:r},children:[t&&Object(Kr.jsx)(hl,{onClose:()=>s(!1)}),!t&&Object(Kr.jsx)(fl,{}),Object(Kr.jsx)(xl,{}),Object(Kr.jsx)(ml,{})]})};class Tl{}Tl.NONE=\"NONE\",Tl.ERROR=\"ERROR\",Tl.REJECTED=\"REJECTED\",Tl.USER_CREATE=\"USER_CREATE\",Tl.USER_PENDING=\"USER_PENDING\",Tl.USER_ONGOING=\"USER_ONGOING\",Tl.USER_FEEDBACK=\"USER_FEEDBACK\",Tl.USER_THANKS=\"USER_THANKS\",Tl.USER_GUIDE_DISCONNECTED=\"USER_GUIDE_DISCONNECTED\",Tl.GUIDE_TOOL_MENU=\"GUIDE_TOOL_MENU\",Tl.GUIDE_ACCEPT=\"GUIDE_ACCEPT\",Tl.GUIDE_ONGOING=\"GUIDE_ONGOING\",Tl.GUIDE_CLOSED=\"GUIDE_CLOSED\",Tl.GUARDIAN_CHAT_REVIEW_ACCEPT=\"GUARDIAN_CHAT_REVIEW_ACCEPT\",Tl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS=\"GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS\",Tl.GUARDIAN_CHAT_REVIEW_VOTE=\"GUARDIAN_CHAT_REVIEW_VOTE\",Tl.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS=\"GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS\",Tl.GUARDIAN_CHAT_REVIEW_RESULTS=\"GUARDIAN_CHAT_REVIEW_RESULTS\";class Cl{constructor(e,t){this._message=void 0,this._roomId=void 0,this._message=e,this._roomId=t}get message(){return this._message}get roomId(){return this._roomId}}class Nl{constructor(e){this._userId=void 0,this._messages=void 0,this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}const Sl=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e,n=e=>$n(new a.rd(e));return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:0,className:\"bg-muted p-2 rounded\",children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.request.guide.accept.request.title\")}),Object(Kr.jsx)(ei,{variant:\"muted\",children:nt(\"guide.help.request.type.1\")}),Object(Kr.jsx)(ei,{wrap:!0,textBreak:!0,children:t})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>n(!0),children:nt(\"guide.help.request.guide.accept.accept.button\")}),Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>n(!1),children:nt(\"guide.help.request.guide.accept.skip.link\")})]})]})},vl=e=>{const{isOnDuty:t=!1,isHandlingGuideRequests:s=!1,setIsHandlingGuideRequests:n=null,isHandlingHelpRequests:r=!1,setIsHandlingHelpRequests:c=null,isHandlingBullyReports:i=!1,setIsHandlingBullyReports:a=null,guidesOnDuty:o=0,helpersOnDuty:l=0,guardiansOnDuty:u=0,processAction:d=null}=e;return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,className:\"bg-muted p-2 rounded\",children:[Object(Kr.jsx)(Qr,{className:\"duty-switch\"+(t?\"\":\" off\"),onClick:e=>d(\"toggle_duty\")}),Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.guide.tool.yourstatus\")}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.guide.tool.duty.\"+(t?\"on\":\"off\"))})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.guide.tool.tickettypeselection.caption\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",disabled:t,type:\"checkbox\",checked:s,onChange:e=>n(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.guide.tool.tickettypeselection.guiderequests\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",disabled:t,type:\"checkbox\",checked:r,onChange:e=>c(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.guide.tool.tickettypeselection.onlyhelprequests\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",disabled:t,type:\"checkbox\",checked:i,onChange:e=>a(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.guide.tool.tickettypeselection.bullyreports\")})]})]}),Object(Kr.jsx)(\"hr\",{className:\"bg-dark m-0\"}),Object(Kr.jsxs)(ec,{center:!0,gap:2,children:[Object(Kr.jsx)(Qr,{className:\"info-icon\"}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt(\"guide.help.guide.tool.guidesonduty\",[\"amount\"],[o.toString()])}}),Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt(\"guide.help.guide.tool.helpersonduty\",[\"amount\"],[l.toString()])}}),Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:nt(\"guide.help.guide.tool.guardiansonduty\",[\"amount\"],[u.toString()])}})]})]}),Object(Kr.jsx)(\"hr\",{className:\"bg-dark m-0\"}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",gap:2,children:[Object(Kr.jsx)(tc,{disabled:!0,onClick:e=>d(\"forum_link\"),children:nt(\"guide.help.guide.tool.forum.link\")}),Object(Kr.jsx)(tc,{disabled:!0,children:nt(\"guide.help.guide.tool.skill.link\")})]})]})},Rl=e=>{const{isGuide:t=!1,userId:s=0,userName:n=null,userFigure:r=null,isTyping:i=!1,messageGroups:o=[]}=e,[l,u]=Object(c.useState)(\"\"),d=Object(c.useCallback)((()=>{$n(new a.qd)}),[]),h=Object(c.useCallback)((()=>{$n(new a.sd)}),[]),j=Object(c.useCallback)((()=>{$n(new a.Ad)}),[]),b=Object(c.useCallback)((e=>{Ar(e.getParser().requesterRoomId)}),[]);it(a.zd,b);const g=Object(c.useCallback)((()=>{l&&l.length&&($n(new a.ud(l)),u(\"\"))}),[l]),O=Object(c.useCallback)((e=>{\"Enter\"===e.key&&g()}),[g]),m=Object(c.useCallback)((e=>e===ee().userId),[]);return Object(Kr.jsxs)(vc,{fullHeight:!0,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,className:\"bg-muted p-2 rounded\",children:[t&&Object(Kr.jsxs)(sc,{children:[Object(Kr.jsx)(tc,{onClick:d,children:nt(\"guide.help.request.guide.ongoing.visit.button\")}),Object(Kr.jsx)(tc,{disabled:!0,onClick:h,children:nt(\"guide.help.request.guide.ongoing.invite.button\")})]}),!t&&Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,children:n}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.ongoing.guide.desc\")})]}),Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"guide.help.common.report.link\")})]}),Object(Kr.jsx)(vc,{overflow:\"hidden\",gap:1,className:\"bg-muted rounded chat-messages p-2\",children:Object(Kr.jsx)(vc,{overflow:\"auto\",children:o.map(((e,t)=>Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:m(e.userId)?\"end\":\"start\",gap:2,children:[Object(Kr.jsx)(Qr,{shrink:!0,className:\"message-avatar\",children:!m(e.userId)&&Object(Kr.jsx)(fc,{figure:r,direction:2})}),Object(Kr.jsxs)(Qr,{className:\"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-\"+(m(e.userId)?\"right\":\"left\"),children:[Object(Kr.jsxs)(ei,{bold:!0,children:[m(e.userId)&&ee().userName,!m(e.userId)&&n]}),e.messages.map(((e,t)=>Object(Kr.jsx)(Qr,{className:\"text-break\",children:e.message},t)))]}),m(e.userId)&&Object(Kr.jsx)(Qr,{className:\"message-avatar flex-shrink-0\",children:Object(Kr.jsx)(fc,{figure:ee().figure,direction:4})})]},t)))})}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"guide.help.request.guide.ongoing.input.empty\",[\"name\"],[n]),value:l,onChange:e=>u(e.target.value),onKeyDown:O}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:g,children:nt(\"widgets.chatinput.say\")})]}),i&&Object(Kr.jsx)(ei,{variant:\"muted\",children:nt(\"guide.help.common.typing\")})]}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:j,children:nt(\"guide.help.request.\"+(t?\"guide\":\"user\")+\".ongoing.close.link\")})]})},Al=e=>{const{userRequest:t=\"\",setUserRequest:s=null}=e,[n,r]=Object(c.useState)(!1);return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.create.help\")}),Object(Kr.jsx)(\"textarea\",{className:\"request-message\",maxLength:140,value:t,onChange:e=>s(e.target.value),placeholder:nt(\"guide.help.request.user.create.input.help\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",disabled:t.length<15||n,onClick:()=>{r(!0),$n(new a.md(1,t))},children:nt(\"guide.help.request.user.create.input.button\")})]})},yl=e=>{const{userName:t=null}=e,s=Object(c.useCallback)((e=>{$n(new a.pd(e))}),[]);return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{justifyContent:\"between\",gap:1,className:\"bg-muted p-2 rounded\",children:[Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,children:t}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.feedback.guide.desc\")})]}),Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"guide.help.common.report.link\")})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.request.user.feedback.closed.title\")}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.feedback.closed.desc\")})]}),t&&t.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"bg-dark m-0 mt-auto\"}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{center:!0,bold:!0,children:nt(\"guide.help.request.user.feedback.question\")}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>s(!0),children:nt(\"guide.help.request.user.feedback.positive.button\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",onClick:e=>s(!1),children:nt(\"guide.help.request.user.feedback.negative.button\")})]})]})]})]})},wl=e=>{const{helpRequestDescription:t=null,helpRequestAverageTime:s=0}=e;return Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:0,className:\"bg-muted rounded p-2\",children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.request.guide.accept.request.title\")}),Object(Kr.jsx)(ei,{variant:\"muted\",children:nt(\"guide.help.request.type.1\")}),Object(Kr.jsx)(ei,{wrap:!0,textBreak:!0,children:t})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.request.user.pending.info.title\")}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.pending.info.message\")}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.pending.info.waiting\",[\"waitingtime\"],[s.toString()])})]}),Object(Kr.jsx)(tc,{variant:\"danger\",onClick:()=>$n(new a.yd),children:nt(\"guide.help.request.user.pending.cancel.button\")})]})},kl=e=>Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"guide.help.request.user.thanks.info.title\")}),Object(Kr.jsx)(ei,{children:nt(\"guide.help.request.user.thanks.info.desc\")})]}),Dl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(nt(\"guide.help.guide.tool.title\")),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(Tl.GUIDE_TOOL_MENU),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),[f,x]=Object(c.useState)(0),[I,T]=Object(c.useState)(0),[C,S]=Object(c.useState)(\"\"),[v,R]=Object(c.useState)(null),[A,y]=Object(c.useState)(0),[w,D]=Object(c.useState)(0),[U,P]=Object(c.useState)(null),[L,F]=Object(c.useState)(null),[H,B]=Object(c.useState)(!1),[G,W]=Object(c.useState)([]),V=Object(c.useCallback)(((e,t)=>{switch(e){case Tl.GUIDE_TOOL_MENU:r(nt(\"guide.help.guide.tool.title\")),o(!1);break;case Tl.GUIDE_ACCEPT:r(nt(\"guide.help.request.guide.accept.title\")),o(!0);break;case Tl.GUIDE_ONGOING:r(nt(\"guide.help.request.guide.ongoing.title\",[\"name\"],[t])),o(!0);break;case Tl.USER_CREATE:r(nt(\"guide.help.request.user.create.title\")),o(!1);break;case Tl.USER_PENDING:r(nt(\"guide.help.request.user.pending.title\")),o(!0);break;case Tl.USER_ONGOING:r(nt(\"guide.help.request.user.ongoing.title\",[\"name\"],[t])),o(!0);break;case Tl.USER_FEEDBACK:r(nt(\"guide.help.request.user.feedback.title\")),o(!0);break;case Tl.USER_THANKS:r(nt(\"guide.help.request.user.thanks.title\")),o(!1)}u(e),s(!0)}),[]),q=Object(c.useCallback)((e=>{switch(e.type){case pt.SHOW_GUIDE_TOOL:return void s(!0);case pt.HIDE_GUIDE_TOOL:return void s(!1);case pt.TOGGLE_GUIDE_TOOL:return void s((e=>!e));case pt.CREATE_HELP_REQUEST:return void V(Tl.USER_CREATE)}}),[V]);qt(pt.SHOW_GUIDE_TOOL,q),qt(pt.HIDE_GUIDE_TOOL,q),qt(pt.TOGGLE_GUIDE_TOOL,q),qt(pt.CREATE_HELP_REQUEST,q);const Y=Object(c.useCallback)((e=>{!e.getParser().isAllowed(a.lf.USE_GUIDE_TOOL)&&d&&(h(!1),$n(new a.wd(!1,!1,!1,!1)))}),[d,h]);it(a.kf,Y);const z=Object(c.useCallback)((e=>{const t=e.getParser();h(t.onDuty),x(t.guidesOnDuty),E(t.helpersOnDuty),T(t.guardiansOnDuty)}),[h,E,x,T]);it(a.kd,z);const K=Object(c.useCallback)((e=>{const t=e.getParser();R(t.helpRequestDescription),y(t.roleSpecificWaitTime),t.asGuide&&d&&V(Tl.GUIDE_ACCEPT),t.asGuide||V(Tl.USER_PENDING)}),[d,V]);it(a.ld,K);const Q=Object(c.useCallback)((e=>{const t=e.getParser();d?(D(t.requesterUserId),P(t.requesterName),F(t.requesterFigure),V(Tl.GUIDE_ONGOING,t.requesterName)):(D(t.guideUserId),P(t.guideName),F(t.guideFigure),V(Tl.USER_ONGOING,t.guideName))}),[d,V]);it(a.Bd,Q);const $=Object(c.useCallback)((e=>{const t=e.getParser();B(t.isTyping)}),[]);it(a.xd,$);const X=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];n&&n.userId===t.senderId||(n=new Nl(t.senderId),s.push(n)),n.addChat(new Cl(t.chatMessage)),W(s)}),[G]);it(a.vd,X);const J=Object(c.useCallback)((e=>{const t=e.getParser(),s=[...G];let n=s[s.length-1];const r=d?ee().userId:w;n&&n.userId===r||(n=new Nl(r),s.push(n)),n.addChat(new Cl(t.roomName,t.roomId)),W(s)}),[d,G,w]);it(a.td,J);const Z=Object(c.useCallback)((e=>{d?(D(0),P(null),F(null),B(!1),W([]),V(Tl.GUIDE_TOOL_MENU)):V(Tl.USER_FEEDBACK)}),[d,V]);it(a.od,Z);const te=Object(c.useCallback)((e=>{D(0),P(null),F(null),B(!1),W([]),V(d?Tl.GUIDE_TOOL_MENU:Tl.USER_THANKS)}),[d,V]);it(a.nd,te);const se=Object(c.useCallback)((e=>{const t=e.split(\"/\");t.length<2||t[1]}),[]);Object(c.useEffect)((()=>{const e={linkReceived:se,eventUrlPrefix:\"help/\"};return N(e),()=>M(e)}),[se]);const ne=Object(c.useCallback)((e=>{switch(e){case\"close\":return s(!1),S(\"\"),void u(Tl.GUIDE_TOOL_MENU);case\"toggle_duty\":return j||g||m?void h((e=>($n(new a.wd(!e,!e&&g,!e&&m,!e&&j)),!e))):void Vt(new vt([nt(\"guide.help.guide.tool.noqueueselected.message\")],null,null,null,nt(\"guide.help.guide.tool.noqueueselected.caption\"),null));case\"forum_link\":const e=k(\"group.homepage.url\",\"\").replace(\"%groupid%\",k(\"guide.help.alpha.groupid\",\"0\"));return void window.open(e)}}),[j,g,m]);return t?Object(Kr.jsxs)(Ec,{className:\"nitro-guide-tool\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:n,onCloseClick:e=>ne(\"close\"),noCloseButton:i}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[l===Tl.GUIDE_TOOL_MENU&&Object(Kr.jsx)(vl,{isOnDuty:d,isHandlingGuideRequests:g,setIsHandlingGuideRequests:O,isHandlingHelpRequests:m,setIsHandlingHelpRequests:p,isHandlingBullyReports:j,setIsHandlingBullyReports:b,guidesOnDuty:f,helpersOnDuty:_,guardiansOnDuty:I,processAction:ne}),l===Tl.GUIDE_ACCEPT&&Object(Kr.jsx)(Sl,{helpRequestDescription:v,helpRequestAverageTime:A}),[Tl.GUIDE_ONGOING,Tl.USER_ONGOING].includes(l)&&Object(Kr.jsx)(Rl,{isGuide:d,userId:w,userName:U,userFigure:L,isTyping:H,messageGroups:G}),l===Tl.USER_CREATE&&Object(Kr.jsx)(Al,{userRequest:C,setUserRequest:S}),l===Tl.USER_PENDING&&Object(Kr.jsx)(wl,{helpRequestDescription:v,helpRequestAverageTime:A}),l===Tl.USER_FEEDBACK&&Object(Kr.jsx)(yl,{userName:U}),l===Tl.USER_THANKS&&Object(Kr.jsx)(kl,{})]})]}):null};var Ul=s(91),Pl=s(144);const Ml=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(null),{userFigure:d=null}=Ts(),{purse:h=null,clubStatus:j=null}=fs(),{badgeCodes:b=[],activate:g=null,deactivate:O=null}=as(),m=()=>nt(\"hccenter.special.sum\",[\"credits\"],[(n.creditRewardForStreakBonus+n.creditRewardForMonthlySpent).toString()]),p=Object(c.useCallback)((e=>{const t=e.getParser();o(t.giftsAvailable)}),[]);it(a.gb,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);if(it(a.Gh,_),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))if(\"open\"!==t[1]);else if(t.length>2&&\"hccenter\"===t[2])s(!0)},eventUrlPrefix:\"habboUI/\"};return N(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{u((e=>{let t=null;return Cr.forEach((s=>e.indexOf(s)>-1&&(t=s))),t||\"HC1\"})(b))}),[b]),Object(c.useEffect)((()=>{if(!t)return;const e=g();return()=>O(e)}),[t,g,O]),Object(c.useEffect)((()=>{$n(new a.ic),$n(new a.Fh)}),[]),!t)return null;const E=Object(Kr.jsx)(Ul.a,{id:\"popover-basic\",children:Object(Kr.jsxs)(Ul.a.Body,{className:\"text-black py-2 px-3\",children:[Object(Kr.jsx)(\"h5\",{children:nt(\"hccenter.breakdown.title\")}),Object(Kr.jsx)(\"div\",{children:nt(\"hccenter.breakdown.creditsspent\",[\"credits\"],[n.totalCreditsSpent.toString()])}),Object(Kr.jsx)(\"div\",{children:nt(\"hccenter.breakdown.paydayfactor.percent\",[\"percent\"],[(100*n.kickbackPercentage).toString()])}),Object(Kr.jsx)(\"div\",{children:nt(\"hccenter.breakdown.streakbonus\",[\"credits\"],[n.creditRewardForStreakBonus.toString()])}),Object(Kr.jsx)(\"hr\",{className:\"w-100 text-black my-1\"}),Object(Kr.jsx)(\"div\",{children:nt(\"hccenter.breakdown.total\",[\"credits\",\"actual\"],[m(),(100*(n.kickbackPercentage*n.totalCreditsSpent+n.creditRewardForStreakBonus)/100).toString()])}),Object(Kr.jsx)(\"div\",{className:\"btn btn-link text-primary p-0\",onClick:()=>y(\"habbopages/\"+k(\"hc.center\")[\"payday.habbopage\"]),children:nt(\"hccenter.special.infolink\")})]})});return Object(Kr.jsxs)(Ec,{theme:\"primary\",className:\"nitro-hc-center\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"generic.hccenter\"),onCloseClick:()=>s(!1)}),Object(Kr.jsxs)(ec,{position:\"relative\",className:\"bg-muted p-2 hc-logo\",children:[Object(Kr.jsx)(vc,{gap:1,justifyContent:\"end\",className:\"px-2\",children:Object(Kr.jsx)(ec,{children:Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>y(\"catalog/open/\"+k(\"catalog.links\")[\"hc.buy_hc\"]),children:nt(j===Tr.ACTIVE?\"hccenter.btn.extend\":\"hccenter.btn.buy\")})})}),Object(Kr.jsx)(Qr,{position:\"absolute\",className:\"end-0 p-4 top-3 habbo-avatar\",children:Object(Kr.jsx)(fc,{figure:d,direction:4,scale:2})})]}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Ic,{badgeCode:l,className:\"align-self-center flex-shrink-0 me-1\"}),Object(Kr.jsxs)(vc,{size:5,className:\"streak-info\",gap:0,children:[Object(Kr.jsx)(ei,{small:!0,children:nt(\"hccenter.status.\"+j)}),Object(Kr.jsx)(ei,{small:!0,dangerouslySetInnerHTML:{__html:(()=>{switch(j){case Tr.ACTIVE:return nt(`hccenter.status.${j}.info`,[\"timeleft\",\"joindate\",\"streakduration\"],[h.clubDays<=0?nt(\"purse.clubdays.zero.amount.text\"):h.minutesUntilExpiration>-1&&h.minutesUntilExpiration<1440?a.Kb.shortFormat(60*h.minutesUntilExpiration):a.Kb.shortFormat(86400*(31*h.clubPeriods+h.clubDays)),n.firstSubscriptionDate,a.Kb.shortFormat(86400*n.currentHcStreak)]);case Tr.EXPIRED:return nt(`hccenter.status.${j}.info`,[\"joindate\"],[n.firstSubscriptionDate]);default:return nt(`hccenter.status.${j}.info`)}})()}})]})]}),k(\"hc.center\")[\"payday.info\"]&&Object(Kr.jsxs)(ec,{alignItems:\"center\",children:[Object(Kr.jsxs)(vc,{gap:1,className:\"p-2 payday-special mb-1 ml-1\",children:[Object(Kr.jsx)(ei,{variant:\"white\",bold:!0,children:nt(\"hccenter.special.title\")}),Object(Kr.jsx)(ei,{variant:\"white\",small:!0,children:nt(\"hccenter.special.info\")}),Object(Kr.jsx)(ei,{variant:\"white\",small:!0,underline:!0,className:\"pt-4 cursor-pointer\",onClick:()=>y(\"habbopages/\"+k(\"hc.center\")[\"payday.habbopage\"]),children:nt(\"hccenter.special.infolink\")})]}),Object(Kr.jsxs)(vc,{gap:0,className:\"payday flex-shrink-0 p-2\",children:[Object(Kr.jsx)(ei,{bold:!0,className:\"ms-2\",children:nt(\"hccenter.special.time.title\")}),Object(Kr.jsxs)(ec,{children:[Object(Kr.jsx)(\"i\",{className:\"clock me-2\"}),Object(Kr.jsx)(ei,{className:\"align-self-center\",children:n.timeUntilPayday<60?nt(\"hccenter.special.time.soon\"):a.Kb.shortFormat(60*n.timeUntilPayday)})]}),j===Tr.ACTIVE&&Object(Kr.jsxs)(vc,{gap:1,className:\"pe-3 pt-3\",children:[Object(Kr.jsx)(ei,{bold:!0,className:\"ms-2\",children:nt(\"hccenter.special.amount.title\")}),Object(Kr.jsxs)(ec,{children:[Object(Kr.jsx)(ei,{className:\"w-100 text-center ms-4n\",children:m()}),Object(Kr.jsx)(Pl.a,{trigger:[\"hover\",\"focus\"],placement:\"left\",overlay:E,children:Object(Kr.jsx)(ei,{underline:!0,small:!0,variant:\"primary\",className:\"pt-4\",children:nt(\"hccenter.breakdown.infolink\")})})]})]})]})]}),k(\"hc.center\")[\"gift.info\"]&&Object(Kr.jsxs)(ec,{className:\"hc-gift-special p-2\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",bold:!0,children:nt(\"hccenter.gift.title\")}),Object(Kr.jsx)(ei,{variant:\"white\",dangerouslySetInnerHTML:{__html:i>0?nt(\"hccenter.unclaimedgifts\",[\"unclaimedgifts\"],[i.toString()]):nt(\"hccenter.gift.info\")}})]}),Object(Kr.jsx)(tc,{className:\"btn-lg align-self-center ms-auto\",onClick:()=>y(\"catalog/open/\"+k(\"catalog.links\")[\"hc.hc_gifts\"]),children:nt(j===Tr.ACTIVE?\"hccenter.btn.gifts.redeem\":\"hccenter.btn.gifts.view\")})]}),k(\"hc.center\")[\"benefits.info\"]&&Object(Kr.jsxs)(vc,{className:\"benefits py-2\",children:[Object(Kr.jsx)(ei,{bold:!0,variant:\"primary\",children:nt(\"hccenter.general.title\")}),Object(Kr.jsx)(ei,{small:!0,dangerouslySetInnerHTML:{__html:nt(\"hccenter.general.info\")}}),Object(Kr.jsx)(ei,{small:!0,underline:!0,className:\"cursor-pointer\",variant:\"primary\",onClick:()=>y(\"habbopages/\"+k(\"hc.center\")[\"benefits.habbopage\"]),children:nt(\"hccenter.general.infolink\")})]})]})]})},Ll=Object(c.createContext)({helpReportState:null,setHelpReportState:null}),Fl=e=>Object(Kr.jsx)(Ll.Provider,{value:e.value,children:e.children}),Hl=()=>Object(c.useContext)(Ll);class Bl{}Bl.TOO_MANY_PENDING_CALLS_CODE=1,Bl.HAS_ABUSIVE_CALL_CODE=2;const Gl=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();let s=t.messageText;switch(t.resultType){case Bl.TOO_MANY_PENDING_CALLS_CODE:$n(new a.uc),Pr.simpleAlert(nt(\"help.cfh.error.pending\"),yr.MODERATION,null,null,nt(\"help.cfh.error.title\"));break;case Bl.HAS_ABUSIVE_CALL_CODE:Pr.simpleAlert(nt(\"help.cfh.error.abusive\"),yr.MODERATION,null,null,nt(\"help.cfh.error.title\"));break;default:0===s.trim().length&&(s=nt(\"help.cfh.sent.text\")),Pr.simpleAlert(s,yr.MODERATION,null,null,nt(\"help.cfh.sent.title\"))}}),[]);it(a.L,t);const s=Object(c.useCallback)((e=>{const t=e.getParser(),s=0===t.messageText.length?nt(\"help.cfh.closed.\"+(1===(n=t.closeReason)?\"useless\":2===n?\"abusive\":\"resolved\")):t.messageText;var n;Pr.simpleAlert(s,yr.MODERATION,null,null,nt(\"mod.alert.title\"))}),[]);return it(a.Pd,s),null},Wl=e=>{const[t,s]=Object(c.useState)(\"\"),{helpReportState:n=null,setHelpReportState:r=null}=Hl(),{reportedChats:i,cfhTopic:o,reportedUserId:l}=n;return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:4,children:nt(\"help.emergency.chat_report.subtitle\")}),Object(Kr.jsx)(ei,{children:nt(\"help.cfh.input.text\")})]}),Object(Kr.jsx)(\"textarea\",{className:\"form-control h-100\",value:t,onChange:e=>s(e.target.value)}),Object(Kr.jsx)(tc,{variant:\"success\",disabled:t.length<15,onClick:()=>{if(t.length<15)return;const e=i[0].roomId,s=[];i.forEach((e=>{s.push(e.entityId),s.push(e.message)})),$n(new a.K(t,o,l,e,s)),y(\"help/hide\")},children:nt(\"help.bully.submit\")})]})},Vl=e=>{const{helpReportState:t=null,setHelpReportState:s=null}=Hl(),n=Object(c.useCallback)((()=>{const e=Object.assign({},t);e.currentStep=1,s(e)}),[t,s]),r=Object(c.useCallback)((()=>{$n(new a.hc(!1))}),[]),i=Object(c.useCallback)((()=>{Vt(new pt(pt.CREATE_HELP_REQUEST))}),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:3,children:nt(\"help.main.frame.title\")}),Object(Kr.jsx)(ei,{children:nt(\"help.main.self.description\")})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:\"success\",onClick:n,children:nt(\"help.main.bully.subtitle\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:i,children:nt(\"help.main.help.title\")}),Object(Kr.jsx)(tc,{disabled:!0,children:nt(\"help.main.self.tips.title\")}),Object(Kr.jsx)(tc,{variant:\"link\",className:\"text-black\",onClick:r,children:nt(\"help.main.my.sanction.status\")})]})]})},ql=e=>{const{username:t=\"\",onAction:s=null}=e,[n,r]=Object(c.useState)(!1),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.webId===ee().userId&&s(\"close\")}),[s]);it(a.Gi,i);const o=Object(c.useCallback)((()=>{n||(r(!0),$n(new a.cb(t)))}),[n,t]);return Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-column gap-4 h-100\",children:[Object(Kr.jsx)(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:nt(\"tutorial.name_change.info.confirm\")}),Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-column align-items-center gap-1 h-100\",children:[Object(Kr.jsx)(\"div\",{children:nt(\"tutorial.name_change.confirm\")}),Object(Kr.jsx)(\"div\",{className:\"fw-bold\",children:t})]}),Object(Kr.jsxs)(\"div\",{className:\"d-flex gap-2\",children:[Object(Kr.jsx)(\"button\",{className:\"btn btn-success w-100\",disabled:n,onClick:o,children:nt(\"generic.ok\")}),Object(Kr.jsx)(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>s(\"close\"),children:nt(\"cancel\")})]})]})},Yl=e=>{const{onAction:t=null}=e;return Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-column gap-4 h-100\",children:[Object(Kr.jsx)(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:nt(\"tutorial.name_change.info.main\")}),Object(Kr.jsx)(\"div\",{className:\"fw-bold d-flex align-items-center justify-content-center h-100 w-100\",children:nt(\"tutorial.name_change.current\",[\"name\"],[ee().userName])}),Object(Kr.jsxs)(\"div\",{className:\"d-flex gap-2\",children:[Object(Kr.jsx)(\"button\",{className:\"btn btn-success w-100\",onClick:()=>t(\"start\"),children:nt(\"tutorial.name_change.change\")}),Object(Kr.jsx)(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>t(\"confirmation\",ee().userName),children:nt(\"tutorial.name_change.keep\")})]})]})},zl=e=>{const{onAction:t=null}=e,[s,n]=Object(c.useState)(\"\"),[r,i]=Object(c.useState)(!1),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)([]),b=Object(c.useCallback)((e=>{l(!1);const t=e.getParser();if(t)switch(t.resultCode){case 0:i(!0);break;case 2:d(\"short\");break;case 3:d(\"long\");break;case 4:d(\"invalid\");break;case 5:j(t.nameSuggestions),d(\"taken\");break;case 6:d(\"change_not_allowed\")}}),[]);it(a.eb,b);const g=Object(c.useCallback)((()=>{\"\"!==s&&(i(!1),j([]),d(null),l(!0),$n(new a.db(s)))}),[s]),O=Object(c.useCallback)((e=>{i(!1),j([]),d(null),n(e)}),[]);return Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-column gap-3 h-100\",children:[Object(Kr.jsx)(\"div\",{children:nt(\"tutorial.name_change.info.select\")}),Object(Kr.jsxs)(\"div\",{className:\"d-flex gap-2\",children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:s,onChange:e=>O(e.target.value)}),Object(Kr.jsx)(\"button\",{className:\"btn btn-primary\",disabled:\"\"===s||o,onClick:g,children:nt(\"tutorial.name_change.check\")})]}),!u&&!r&&Object(Kr.jsx)(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:nt(\"help.tutorial.name.info\")}),u&&Object(Kr.jsx)(\"div\",{className:\"bg-danger rounded p-2 text-center text-white\",children:nt(`help.tutorial.name.${u}`,[\"name\"],[s])}),r&&Object(Kr.jsx)(\"div\",{className:\"bg-success rounded p-2 text-center text-white\",children:nt(\"help.tutorial.name.available\",[\"name\"],[s])}),h&&Object(Kr.jsx)(\"div\",{className:\"d-flex flex-column gap-2\",children:h.map(((e,t)=>Object(Kr.jsx)(\"div\",{className:\"col bg-muted rounded p-1 cursor-pointer\",onClick:()=>O(e),children:e},t)))}),Object(Kr.jsxs)(\"div\",{className:\"d-flex gap-2\",children:[Object(Kr.jsx)(\"button\",{className:\"btn btn-success w-100\",disabled:!r,onClick:()=>t(\"confirmation\",s),children:nt(\"tutorial.name_change.pick\")}),Object(Kr.jsx)(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>t(\"close\"),children:nt(\"cancel\")})]})]})},Kl=\"INIT\",Ql=\"INPUT\",$l=\"CONFIRMATION\",Xl=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(Kl),[i,a]=Object(c.useState)(\"\"),o=Object(c.useCallback)((e=>{r(Kl),s(!0)}),[]);qt(Et.INIT,o);const l=Object(c.useCallback)(((e,t)=>{switch(e){case\"start\":r(Ql);break;case\"confirmation\":a(t),r($l);break;case\"close\":a(\"\"),s(!1)}}),[]),u=Object(c.useMemo)((()=>{switch(n){case Kl:return\"tutorial.name_change.title.main\";case Ql:return\"tutorial.name_change.title.select\";case $l:return\"tutorial.name_change.title.confirm\"}}),[n]);return t?Object(Kr.jsxs)(Ec,{className:\"nitro-change-username\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(u),onCloseClick:()=>l(\"close\")}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[n===Kl&&Object(Kr.jsx)(Yl,{onAction:l}),n===Ql&&Object(Kr.jsx)(zl,{onAction:l}),n===$l&&Object(Kr.jsx)(ql,{username:i,onAction:l})]})]}):null},Jl=e=>{const[t,s]=Object(c.useState)(null),n=Object(c.useCallback)((e=>{const t=e.getParser();t&&s(t)}),[]);it(a.Ch,n);const r=Object(c.useCallback)(((e,t,s)=>{let n=`help.sanction.${e}`;switch(t){case\"ALERT\":n+=\".alert\";break;case\"MUTE\":n+=\".mute\";break;case\"BAN_PERMANENT\":n+=\".permban\";break;default:if(n+=\".ban\",s>24)return n+=\".days\",nt(n,[\"days\"],[(s/24).toString()])}return nt(n,[\"hours\"],[s.toString()])}),[]);return t?Object(Kr.jsxs)(Ec,{className:\"nitro-help\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"help.sanction.info.title\"),onCloseClick:()=>s(null)}),Object(Kr.jsx)(uc,{className:\"text-black\",children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{center:!0,size:5,overflow:\"hidden\",children:Object(Kr.jsx)(Qr,{className:\"index-image\"})}),Object(Kr.jsxs)(vc,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:[\"cfh.reason.EMPTY\"===t.sanctionReason?Object(Kr.jsx)(\"div\",{className:\"col-12 fw-bold\",children:nt(\"help.sanction.current.none\")}):Object(Kr.jsxs)(Kr.Fragment,{children:[(t.probationHoursLeft>0||t.isSanctionActive)&&Object(Kr.jsx)(\"div\",{className:\"col-12 fw-bold\",children:nt(\"help.sanction.probation.reminder\")}),Object(Kr.jsxs)(\"div\",{className:\"col-12 fw-bold \"+(t.isSanctionNew?\"text-danger\":\"\"),children:[nt(\"help.sanction.last.sanction\"),\" \",r(\"current\",t.sanctionName,t.sanctionLengthHours)]}),Object(Kr.jsxs)(\"div\",{className:\"col-12\",children:[nt(\"generic.start.time\"),\" \",t.sanctionCreationTime]}),Object(Kr.jsxs)(\"div\",{className:\"col-12\",children:[nt(\"generic.reason\"),\" \",t.sanctionReason]}),Object(Kr.jsxs)(\"div\",{className:\"col-12\",children:[nt(\"help.sanction.probation.days.left\"),\" \",Math.trunc(t.probationHoursLeft/24)+1]})]}),t.hasCustomMute&&!t.isSanctionActive&&Object(Kr.jsx)(\"div\",{className:\"col-12 fw-bold\",children:nt(\"help.sanction.custom.mute\")}),t.tradeLockExpiryTime&&t.tradeLockExpiryTime.length>0&&Object(Kr.jsxs)(\"div\",{className:\"col-12 fw-bold\",children:[nt(\"trade.locked.until\"),\" \",t.tradeLockExpiryTime]}),Object(Kr.jsx)(\"div\",{className:\"col-12\",children:r(\"next\",t.nextSanctionName,t.nextSanctionLengthHours)}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>s(null),children:nt(\"habbo.way.ok.button\")})]})]})})]}):null},Zl=e=>{const[t,s]=Object(c.useState)(new Map),{helpReportState:n=null,setHelpReportState:r=null}=Hl(),{reportedUserId:i=-1}=n,o=Object(c.useMemo)((()=>go().chats.filter((e=>e.type===lo.TYPE_CHAT&&e.entityId===i&&e.entityType===a.Mg.USER))),[i]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:4,children:nt(\"help.emergency.chat_report.subtitle\")}),Object(Kr.jsx)(ei,{children:nt(\"help.emergency.chat_report.description\")})]}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"hidden\",children:[!o.length&&Object(Kr.jsx)(ei,{children:nt(\"help.cfh.error.no_user_data\")}),o.length>0&&Object(Kr.jsx)(Zr,{gap:1,columnCount:1,columnMinHeight:25,overflow:\"auto\",children:o.map(((e,n)=>Object(Kr.jsx)(kc,{onClick:n=>(e=>{const n=new Map(t);n.has(e.id)?n.delete(e.id):n.set(e.id,e),s(n)})(e),itemActive:t.has(e.id),children:Object(Kr.jsx)(ei,{children:e.message})},e.id)))})]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt(\"generic.back\")}),Object(Kr.jsx)(tc,{disabled:t.size<=0,onClick:()=>{!t||t.size<=0||r((e=>({...e,reportedChats:Array.from(t.values()),currentStep:3})))},children:nt(\"help.emergency.main.submit.button\")})]})]})},eu=e=>{const[t,s]=Object(c.useState)(-1),{helpReportState:n=null,setHelpReportState:r=null}=Hl(),i=Object(c.useMemo)((()=>{const e=new Map;return go().chats.forEach((t=>{t.type===lo.TYPE_CHAT&&t.entityType===a.Mg.USER&&t.entityId!==ee().userId&&(e.has(t.entityId)||e.set(t.entityId,{id:t.entityId,username:t.name}))})),Array.from(e.values())}),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:4,children:nt(\"help.emergency.main.step.two.title\")}),i.length>0&&Object(Kr.jsx)(ei,{children:nt(\"report.user.pick.user\")})]}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"hidden\",children:[!i.length&&Object(Kr.jsx)(ei,{children:nt(\"report.user.error.nolist\")}),i.length>0&&Object(Kr.jsx)(Zr,{columnCount:1,columnMinHeight:25,gap:1,children:i.map(((e,n)=>Object(Kr.jsx)(kc,{onClick:n=>{return r=e.id,void s(t===r?-1:r);var r},itemActive:t===e.id,children:Object(Kr.jsx)(\"span\",{dangerouslySetInnerHTML:{__html:e.username}})},e.id)))})]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>{r((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt(\"generic.back\")}),Object(Kr.jsx)(tc,{disabled:t<=0,onClick:()=>{t<=0||r((e=>({...e,reportedUserId:t,currentStep:2})))},children:nt(\"help.emergency.main.submit.button\")})]})]})};let tu=[];const su=e=>{const{setHelpReportState:t=null}=Hl(),[s,n]=Object(c.useState)(-1),[r,i]=Object(c.useState)(-1),a=Object(c.useMemo)((()=>tu),[]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontSize:4,children:nt(\"help.emergency.chat_report.subtitle\")}),Object(Kr.jsx)(ei,{children:nt(\"help.cfh.pick.topic\")})]}),Object(Kr.jsxs)(vc,{gap:1,overflow:\"auto\",children:[s<0&&a.map(((e,t)=>Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>n(t),children:nt(`help.cfh.reason.${e.name}`)},t))),s>=0&&a[s].topics.map(((e,t)=>Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>i(t),active:r===t,children:nt(`help.cfh.topic.${e.id}`)},t)))]}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>{t((e=>{const t=e.currentStep-1;return{...e,currentStep:t}}))},children:nt(\"generic.back\")}),Object(Kr.jsx)(tc,{disabled:r<0,onClick:()=>{s<0||r<0||t((e=>({...e,cfhCategory:s,cfhTopic:a[s].topics[r].id,currentStep:4})))},children:nt(\"help.emergency.main.submit.button\")})]})]})},nu=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:\"\",currentStep:0}),i=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}}),[]),a=Object(c.useCallback)((e=>{r({reportedUserId:e.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:\"\",currentStep:2}),s(!0)}),[]);qt(ft.REPORT_USER,a),Object(c.useEffect)((()=>{const e={linkReceived:i,eventUrlPrefix:\"help/\"};return N(e),()=>M(e)}),[i]),Object(c.useEffect)((()=>{t&&r({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:\"\",currentStep:0})}),[t]);const o=Object(c.useCallback)((()=>{switch(n.currentStep){case 0:return Object(Kr.jsx)(Vl,{});case 1:return Object(Kr.jsx)(eu,{});case 2:return Object(Kr.jsx)(Zl,{});case 3:return Object(Kr.jsx)(su,{});case 4:return Object(Kr.jsx)(Wl,{})}return null}),[n.currentStep]);return Object(Kr.jsxs)(Fl,{value:{helpReportState:n,setHelpReportState:r},children:[Object(Kr.jsx)(Gl,{}),t&&Object(Kr.jsxs)(Ec,{className:\"nitro-help\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"help.button.cfh\"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(uc,{className:\"text-black\",children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{center:!0,size:5,overflow:\"hidden\",children:Object(Kr.jsx)(Qr,{className:\"index-image\"})}),Object(Kr.jsx)(vc,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:Object(Kr.jsx)(o,{})})]})})]}),Object(Kr.jsx)(Jl,{}),Object(Kr.jsx)(Xl,{})]})},ru=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),d=Object(c.useCallback)((e=>{const t=e.getParser();s(t.productType),r(t.productClassId),o(t.totalCoinsForBonus),u(t.coinsStillRequiredToBuy)}),[]);return it(a.x,d),Object(c.useEffect)((()=>{$n(new a.cc)}),[]),t?Object(Kr.jsxs)(\"div\",{className:\"bonus-rare widget d-flex\",children:[t,Object(Kr.jsxs)(\"div\",{className:\"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container\",children:[Object(Kr.jsx)(\"div\",{className:\"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0\",children:i-l+\"/\"+i}),Object(Kr.jsx)(\"div\",{className:\"small bg-info rounded position-absolute top-0 h-100\",style:{width:(i-l)/i*100+\"%\"}})]})]}):null},cu=e=>{const{data:t=null,level:s=0}=e;return Object(Kr.jsxs)(\"div\",{className:\"hof-user-container\",children:[Object(Kr.jsxs)(\"div\",{className:\"hof-tooltip\",children:[Object(Kr.jsxs)(\"div\",{className:\"hof-header\",children:[s,\". \",t.userName,\" \",Object(Kr.jsx)(Qc,{userId:t.userId})]}),Object(Kr.jsx)(\"div\",{className:\"small text-center text-white\",children:nt(\"landing.view.competition.hof.points\",[\"points\"],[tt(t.currentScore).toString()])})]}),Object(Kr.jsx)(fc,{figure:t.figure,direction:2})]})},iu=e=>{const{slot:t=-1,conf:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const t=e.getParser();r(t.data)}),[]);return it(a.kb,i),Object(c.useEffect)((()=>{const e=s?s.campaign:\"\";$n(new a.kc(e))}),[s]),n?Object(Kr.jsx)(\"div\",{className:\"hall-of-fame d-flex\",children:n.hof&&n.hof.length>0&&n.hof.map(((e,t)=>Object(Kr.jsx)(cu,{data:e,level:t+1},t)))}):null},au=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(0),i=Object(c.useCallback)((e=>{const t=e.getParser();s(t.articles)}),[]);return it(a.zf,i),Object(c.useEffect)((()=>{$n(new a.wc)}),[]),t?Object(Kr.jsxs)(\"div\",{className:\"promo-articles widget mb-2\",children:[Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-row align-items-center w-100 mb-1\",children:[Object(Kr.jsx)(\"small\",{className:\"flex-shrink-0 pe-1\",children:nt(\"landing.view.promo.article.header\")}),Object(Kr.jsx)(\"hr\",{className:\"w-100 my-0\"})]}),Object(Kr.jsx)(\"div\",{className:\"d-flex flex-row mb-1\",children:t&&t.length>0&&t.map(((e,s)=>Object(Kr.jsx)(\"div\",{className:\"promo-articles-bullet cursor-pointer \"+(e===t[n]?\"promo-articles-bullet-active\":\"\"),onClick:e=>r(s)},e.id)))}),t&&t[n]&&Object(Kr.jsxs)(\"div\",{className:\"promo-article d-flex flex-row row mx-0\",children:[Object(Kr.jsx)(\"div\",{className:\"promo-article-image\",style:{backgroundImage:`url(${t[n].imageUrl})`}}),Object(Kr.jsxs)(\"div\",{className:\"col-3 d-flex flex-column h-100\",children:[Object(Kr.jsx)(\"h3\",{className:\"my-0\",children:t[n].title}),Object(Kr.jsx)(\"b\",{children:t[n].bodyText}),Object(Kr.jsx)(\"button\",{className:\"btn btn-sm mt-auto btn-gainsboro\",onClick:e=>Pr.openUrl(t[n].linkContent),children:t[n].buttonText})]})]})]}):null},ou=e=>{const{conf:t=null}=e,s=Object(c.useCallback)((e=>{const s=t[e];return s?\"image\"===e?ur().interpolate(s):s:null}),[t]);return Object(Kr.jsxs)(\"div\",{className:\"widgetcontainer widget d-flex flex-row overflow-hidden\",children:[Object(Kr.jsx)(\"div\",{className:\"widgetcontainer-image flex-shrink-0\",style:{backgroundImage:`url(${s(\"image\")})`}}),Object(Kr.jsxs)(\"div\",{className:\"d-flex flex-column align-self-center\",children:[Object(Kr.jsx)(\"h3\",{className:\"my-0\",children:nt(`landing.view.${s(\"texts\")}.header`)}),Object(Kr.jsx)(\"i\",{children:nt(`landing.view.${s(\"texts\")}.body`)}),Object(Kr.jsx)(\"button\",{className:\"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto\",onClick:e=>Pr.openUrl(s(\"btnLink\")),children:nt(`landing.view.${s(\"texts\")}.button`)})]})]})},lu=e=>{switch(e.widgetType){case\"promoarticle\":return Object(Kr.jsx)(au,{});case\"achievementcompetition_hall_of_fame\":return Object(Kr.jsx)(iu,{slot:e.slot,conf:e.widgetConf});case\"bonusrare\":return Object(Kr.jsx)(ru,{});case\"widgetcontainer\":return Object(Kr.jsx)(ou,{conf:e.widgetConf});default:return null}},uu=e=>{const{widgetType:t=null,widgetSlot:s=0,widgetConf:n=null,className:r=\"\",...c}=e;return Object(Kr.jsx)(\"div\",{className:`widget-slot slot-${s} ${r||\"\"}`,...c,children:Object(Kr.jsx)(lu,{widgetType:t,slot:s,widgetConf:n})})},du=e=>{const[t,s]=Object(c.useState)(!0),{userFigure:n=null}=Ts(),r=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void s(!1);case a.Yg.ENDED:return void s(e.openLandingView)}}),[]);if(Gt(a.Yg.CREATED,r),Gt(a.Yg.ENDED,r),!t)return null;const i=k(\"hotelview\").images[\"background.colour\"],o=ur().interpolate(k(\"hotelview\").images.background),l=ur().interpolate(k(\"hotelview\").images.sun),u=ur().interpolate(k(\"hotelview\").images.drape),d=ur().interpolate(k(\"hotelview\").images.left),h=ur().interpolate(k(\"hotelview\").images[\"right.repeat\"]),j=ur().interpolate(k(\"hotelview\").images.right);return Object(Kr.jsxs)(\"div\",{className:\"nitro-hotel-view\",style:i&&i?{background:i}:{},children:[Object(Kr.jsx)(\"div\",{className:\"container h-100 py-3 overflow-hidden landing-widgets\",children:Object(Kr.jsxs)(\"div\",{className:\"row h-100\",children:[Object(Kr.jsxs)(\"div\",{className:\"col-9 h-100 d-flex flex-column\",children:[Object(Kr.jsx)(uu,{widgetSlot:1,widgetType:k(\"hotelview\").widgets[\"slot.1.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.1.conf\"],className:\"col-6\"}),Object(Kr.jsxs)(\"div\",{className:\"col-12 row mx-0\",children:[Object(Kr.jsx)(uu,{widgetSlot:2,widgetType:k(\"hotelview\").widgets[\"slot.2.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.2.conf\"],className:\"col-7\"}),Object(Kr.jsx)(uu,{widgetSlot:3,widgetType:k(\"hotelview\").widgets[\"slot.3.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.3.conf\"],className:\"col-5\"}),Object(Kr.jsx)(uu,{widgetSlot:4,widgetType:k(\"hotelview\").widgets[\"slot.4.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.4.conf\"],className:\"col-7\"}),Object(Kr.jsx)(uu,{widgetSlot:5,widgetType:k(\"hotelview\").widgets[\"slot.5.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.5.conf\"],className:\"col-5\"})]}),Object(Kr.jsx)(uu,{widgetSlot:6,widgetType:k(\"hotelview\").widgets[\"slot.6.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.6.conf\"],className:\"mt-auto\"})]}),Object(Kr.jsx)(\"div\",{className:\"col-3 h-100\",children:Object(Kr.jsx)(uu,{widgetSlot:7,widgetType:k(\"hotelview\").widgets[\"slot.7.widget\"],widgetConf:k(\"hotelview\").widgets[\"slot.7.conf\"]})})]})}),Object(Kr.jsx)(\"div\",{className:\"background position-absolute\",style:o&&o.length?{backgroundImage:`url(${o})`}:{}}),Object(Kr.jsx)(\"div\",{className:\"sun position-absolute\",style:l&&l.length?{backgroundImage:`url(${l})`}:{}}),Object(Kr.jsx)(\"div\",{className:\"drape position-absolute\",style:u&&u.length?{backgroundImage:`url(${u})`}:{}}),Object(Kr.jsx)(\"div\",{className:\"left position-absolute\",style:d&&d.length?{backgroundImage:`url(${d})`}:{}}),Object(Kr.jsx)(\"div\",{className:\"right-repeat position-absolute\",style:h&&h.length?{backgroundImage:`url(${h})`}:{}}),Object(Kr.jsx)(\"div\",{className:\"right position-absolute\",style:j&&j.length?{backgroundImage:`url(${j})`}:{}}),k(\"hotelview\")[\"show.avatar\"]&&Object(Kr.jsx)(\"div\",{className:\"avatar-image\",children:Object(Kr.jsx)(fc,{figure:n,direction:2})})]})},hu=e=>{const{badgeCode:t=null,children:s=null,...n}=e,{selectedBadgeCode:r=null,setSelectedBadgeCode:c=null,getBadgeId:i=null}=as(),{isUnseen:a=null}=cs(),o=a(qs.BADGE,i(t));return Object(Kr.jsxs)(kc,{itemActive:r===t,itemUnseen:o,onMouseDown:e=>c(t),...n,children:[Object(Kr.jsx)(Ic,{badgeCode:t}),s]})},ju=e=>{const[t,s]=Object(c.useState)(!1),{badgeCodes:n=[],activeBadgeCodes:r=[],selectedBadgeCode:i=null,isWearingBadge:a=null,canWearBadges:o=null,toggleBadge:l=null,getBadgeId:u=null,activate:d=null,deactivate:h=null}=as(),{isUnseen:j=null,removeUnseen:b=null}=cs();return Object(c.useEffect)((()=>{i&&j(qs.BADGE,u(i))&&b(qs.BADGE,u(i))}),[i,j,b,u]),Object(c.useEffect)((()=>{if(!t)return;const e=d();return()=>h(e)}),[t,d,h]),Object(c.useEffect)((()=>(s(!0),()=>s(!1))),[]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{size:7,overflow:\"hidden\",children:Object(Kr.jsx)(Zr,{columnCount:4,children:n&&n.length>0&&n.map(((e,t)=>r.indexOf(e)>=0?null:Object(Kr.jsx)(hu,{badgeCode:e},t)))})}),Object(Kr.jsxs)(vc,{className:\"justify-content-between\",size:5,overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{overflow:\"hidden\",gap:2,children:[Object(Kr.jsx)(ei,{children:nt(\"inventory.badges.activebadges\")}),Object(Kr.jsx)(Zr,{columnCount:3,children:r&&r.length>0&&r.map(((e,t)=>Object(Kr.jsx)(hu,{badgeCode:e},t)))})]}),!!i&&Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"end\",gap:2,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(Ic,{shrink:!0,badgeCode:i}),Object(Kr.jsx)(ei,{children:et(i)})]}),Object(Kr.jsx)(tc,{disabled:!a(i)&&!o(),onClick:e=>l(i),children:nt(a(i)?\"inventory.badges.clearbadge\":\"inventory.badges.wearbadge\")})]})]})]})},bu=e=>{const{title:t=\"\",desc:s=\"\",children:n=null,...r}=e;return Object(Kr.jsxs)(Jr,{...r,children:[Object(Kr.jsx)(vc,{center:!0,size:5,overflow:\"hidden\",children:Object(Kr.jsx)(\"div\",{className:\"empty-image\"})}),Object(Kr.jsxs)(vc,{justifyContent:\"center\",size:7,overflow:\"hidden\",children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:5,overflow:\"unset\",truncate:!0,children:t}),Object(Kr.jsx)(ei,{overflow:\"auto\",children:s})]}),n]})},gu=e=>{const{botItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedBot:o=null,setSelectedBot:l=null}=ls(),{isUnseen:u=null}=cs(),d=u(qs.BOT,t.botData.id),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return l(t),void i(!0);case a.Ce.MOUSE_UP:return void i(!1);case a.Ce.ROLL_OUT:if(!r||o!==t)return;return void Vs(t)}};return Object(Kr.jsxs)(kc,{itemActive:o===t,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Kr.jsx)(fc,{figure:t.botData.figure,direction:3,headOnly:!0}),s]})},Ou=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{botItems:i=[],selectedBot:o=null,activate:l=null,deactivate:u=null}=ls(),{isUnseen:d=null,removeUnseen:h=null}=cs();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.botData,t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:\"101\",r=r&&r.length?r:\"101\",c=c&&c.length?c:\"1.1\",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addAvatarIntoRoom(e.figure,0)}),[s,o]),Object(c.useEffect)((()=>{o&&d(qs.BOT,o.botData.id)&&h(qs.BOT,o.botData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{size:7,overflow:\"hidden\",children:Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Kr.jsx)(gu,{botItem:e},e.botData.id)))})}),Object(Kr.jsxs)(vc,{size:5,overflow:\"auto\",children:[Object(Kr.jsx)(vc,{overflow:\"hidden\",position:\"relative\",children:Object(Kr.jsx)(Yc,{roomPreviewer:s,height:140})}),o&&Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"between\",gap:2,children:[Object(Kr.jsx)(ei,{grow:!0,truncate:!0,children:o.botData.name}),!!t&&Object(Kr.jsx)(tc,{onClick:e=>Vs(o),children:nt(\"inventory.furni.placetoroom\")})]})]})]}):Object(Kr.jsx)(bu,{title:nt(\"inventory.empty.bots.title\"),desc:nt(\"inventory.empty.bots.desc\")})},mu=e=>{const{groupItem:t=null,...s}=e,[n,r]=Object(c.useState)(!1),{selectedItem:i=null,setSelectedItem:o=null}=hs(),l=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return o(t),void r(!0);case a.Ce.MOUSE_UP:return void r(!1);case a.Ce.ROLL_OUT:if(!n||t!==i)return;return void Ws(t)}},u=t.getUnlockedCount();return Object(Kr.jsx)(kc,{className:u?\"\":\"opacity-0-5 \",itemImage:t.iconUrl,itemCount:t.getUnlockedCount(),itemActive:t===i,itemUniqueNumber:t.stuffData.uniqueNumber,itemUnseen:t.hasUnseenItems,onMouseDown:l,onMouseUp:l,onMouseOut:l,...s})},pu=e=>{const{groupItems:t=[],setGroupItems:s=null}=e,[n,r]=Object(c.useState)(\"\");return Object(c.useEffect)((()=>{let e=[...t];if(n&&n.length){const s=n.toLocaleLowerCase();e=t.filter((e=>s&&s.length&&e.name.toLocaleLowerCase().includes(s)?e:null))}s(e)}),[t,s,n]),Object(Kr.jsx)(ec,{gap:1,children:Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"generic.search\"),value:n,onChange:e=>r(e.target.value)})})},_u=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)([]),{groupItems:l=[],selectedItem:u=null,activate:d=null,deactivate:h=null}=hs(),{resetItems:j=null}=cs();return Object(c.useEffect)((()=>{if(!u||!s)return;const e=u.getLastItem();if(!e)return;const t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);if(n=n&&n.length?n:\"101\",r=r&&r.length?r:\"101\",c=c&&c.length?c:\"1.1\",s.reset(!1),s.updateObjectRoom(r,n,c),s.updateRoomWallsAndFloorVisibility(!0,!0),e.category===Rs.WALL_PAPER||e.category===Rs.FLOOR||e.category===Rs.LANDSCAPE){if(r=e.category===Rs.FLOOR?u.stuffData.getLegacyString():r,n=e.category===Rs.WALL_PAPER?u.stuffData.getLegacyString():n,c=e.category===Rs.LANDSCAPE?u.stuffData.getLegacyString():c,s.updateObjectRoom(r,n,c),e.category===Rs.LANDSCAPE){const e=ee().getWallItemDataByName(\"noob_window_double\");e&&s.addWallItemIntoRoom(e.id,new a.Ui(90,0,0),e.customParams)}}else u.isWallItem?s.addWallItemIntoRoom(u.type,new a.Ui(90),e.stuffData.getLegacyString()):s.addFurnitureIntoRoom(u.type,new a.Ui(90),u.stuffData,e.extra.toString())}),[s,u]),Object(c.useEffect)((()=>{u&&u.hasUnseenItems&&(j(qs.FURNI,u.items.map((e=>e.id))),u.hasUnseenItems=!1)}),[u,j]),Object(c.useEffect)((()=>{if(!n)return;const e=d();return()=>h(e)}),[n,d,h]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),l&&l.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:7,overflow:\"hidden\",children:[Object(Kr.jsx)(pu,{groupItems:l,setGroupItems:o}),Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map(((e,t)=>Object(Kr.jsx)(mu,{groupItem:e},t)))})]}),Object(Kr.jsxs)(vc,{size:5,overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{overflow:\"hidden\",position:\"relative\",children:[Object(Kr.jsx)(Yc,{roomPreviewer:s,height:140}),u&&u.stuffData.isUnique&&Object(Kr.jsx)(yc,{className:\"top-2 end-2\",position:\"absolute\",uniqueNumber:u.stuffData.uniqueNumber,uniqueSeries:u.stuffData.uniqueSeries}),u&&u.stuffData.rarityLevel>-1&&Object(Kr.jsx)(qc,{className:\"top-2 end-2\",position:\"absolute\",level:u.stuffData.rarityLevel})]}),u&&Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"between\",gap:2,children:[Object(Kr.jsx)(ei,{grow:!0,truncate:!0,children:u.name}),Object(Kr.jsxs)(vc,{gap:1,children:[!!t&&Object(Kr.jsx)(tc,{onClick:e=>Ws(u),children:nt(\"inventory.furni.placetoroom\")}),u&&u.isSellable&&Object(Kr.jsx)(tc,{onClick:e=>(e=>{const t=e.getLastItem();return!!t&&!!t.sellable&&void Vt(new dt(t))})(u),children:nt(\"inventory.marketplace.sell\")})]})]})]})]}):Object(Kr.jsx)(bu,{title:nt(\"inventory.empty.title\"),desc:nt(\"inventory.empty.desc\")})},Eu=e=>{const{cancelTrade:t=null}=e,[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(3),{ownUser:b=null,otherUser:g=null,groupItems:O=[],tradeState:m=$s.TRADING_STATE_READY,progressTrade:p=null,removeItem:_=null,setTradeState:E=null}=ms(),f=(e,t,s,n,r)=>{if(!b||b.accepts||!b.userItems)return!1;if(b.userItems.length<9)return!0;if(!n)return!1;let c=t.toString();return c=s===Rs.POSTER?c+\"poster\"+r.getLegacyString():s===Rs.GUILD_FURNI?((e,t)=>{let s=e.toString();if(!(t instanceof a.Qh))return s;let n=1;for(;n<5;)s=s+\",\"+t.getValue(n),n++;return s})(t,r):(e?\"I\":\"S\")+c,!!b.userItems.getValue(c)},x=e=>{const t=e?\"locked\":\"open\";return Object(Kr.jsx)(\"i\",{className:\"mt-auto pb-5 icon icon-lock-\"+t})};return Object(c.useEffect)((()=>{if(m!==$s.TRADING_STATE_COUNTDOWN)return;j(3);const e=setInterval((()=>{j((t=>{const s=t-1;return 0===s&&clearInterval(e),s}))}),1e3);return()=>clearInterval(e)}),[m,E]),Object(c.useEffect)((()=>{0===h&&E($s.TRADING_STATE_CONFIRMING)}),[h,E]),m!==$s.TRADING_STATE_READY&&b&&g?Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ec,{children:Object(Kr.jsxs)(vc,{size:4,fullWidth:!0,overflow:\"hidden\",className:\"trading-inventory\",children:[Object(Kr.jsx)(pu,{groupItems:O,setGroupItems:d}),Object(Kr.jsxs)(ec,{column:!0,fullHeight:!0,fullWidth:!0,justifyContent:\"between\",overflow:\"hidden\",gap:2,children:[Object(Kr.jsx)(Zr,{columnCount:3,children:u&&u.length>0&&u.map(((e,t)=>{const r=e.getUnlockedCount();return Object(Kr.jsx)(kc,{className:r?\"\":\"opacity-0-5 \",itemImage:e.iconUrl,itemCount:r,itemActive:s===e,itemUniqueNumber:e.stuffData.uniqueNumber,onClick:t=>r&&n(e),children:r>0&&s===e&&Object(Kr.jsx)(tc,{position:\"absolute\",variant:\"success\",className:\"trade-button bottom-1 end-1\",onClick:e=>(e=>{if(!s)return;const t=s.getTradeItems(e);if(!t||!t.length)return;let n=null;const r=[];for(const s of t)r.push(s.id),n||(n=s);if(b.userItems.length+r.length<=1500)if(!n.isGroupable&&r.length)$n(new a.di(r.pop()));else{const e=[];for(const t of r)f(n.isWallItem,n.type,n.category,n.isGroupable,n.stuffData)&&e.push(t);e.length&&(1===e.length?$n(new a.di(e.pop())):$n(new a.ei(...e)))}else Pr.simpleAlert(nt(\"trading.items.too_many_items.desc\"),yr.DEFAULT,null,null,nt(\"trading.items.too_many_items.title\"))})(1),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-right\"})})},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:\"badge bg-muted\",children:s?s.name:nt(\"catalog_selectproduct\")})]})]})}),Object(Kr.jsxs)(vc,{fullWidth:!0,size:8,overflow:\"hidden\",className:\"trade-bg p-2\",children:[Object(Kr.jsxs)(Jr,{overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{size:4,overflow:\"hidden\",children:[Object(Kr.jsx)(ec,{justifyContent:\"between\",alignItems:\"center\",children:Object(Kr.jsxs)(ei,{children:[nt(\"inventory.trading.you\"),\" \",nt(\"inventory.trading.areoffering\"),\":\"]})}),Object(Kr.jsx)(Zr,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=b.userItems.getWithIndex(t)||null;return s?Object(Kr.jsx)(kc,{itemActive:r===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>i(s),children:r===s&&Object(Kr.jsx)(tc,{position:\"absolute\",variant:\"danger\",className:\"trade-button bottom-1 start-1\",onClick:e=>_(s),children:Object(Kr.jsx)(ac.a,{icon:\"chevron-left\"})})},t):Object(Kr.jsx)(kc,{},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:\"badge bg-muted\",children:r?r.name:nt(\"catalog_selectproduct\")})]}),x(b.accepts),Object(Kr.jsxs)(vc,{size:4,overflow:\"hidden\",children:[Object(Kr.jsx)(ec,{justifyContent:\"between\",alignItems:\"center\",children:Object(Kr.jsxs)(ei,{children:[g.userName,\" \",nt(\"inventory.trading.isoffering\"),\":\"]})}),Object(Kr.jsx)(Zr,{columnCount:3,children:Array.from(Array(9),((e,t)=>{const s=g.userItems.getWithIndex(t)||null;return s?Object(Kr.jsx)(kc,{itemActive:o===s,itemImage:s.iconUrl,itemCount:s.getTotalCount(),itemUniqueNumber:s.stuffData.uniqueNumber,onClick:e=>l(s)},t):Object(Kr.jsx)(kc,{},t)}))}),Object(Kr.jsx)(Qr,{fullWidth:!0,className:\"badge bg-muted w-100\",children:o?o.name:nt(\"catalog_selectproduct\")})]}),x(g.accepts)]}),Object(Kr.jsxs)(ec,{grow:!0,justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:t,children:nt(\"generic.cancel\")}),m===$s.TRADING_STATE_READY&&Object(Kr.jsx)(tc,{variant:\"secondary\",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:nt(\"inventory.trading.accept\")}),m===$s.TRADING_STATE_RUNNING&&Object(Kr.jsx)(tc,{variant:\"secondary\",disabled:!b.itemCount&&!g.itemCount,onClick:p,children:nt(b.accepts?\"inventory.trading.modify\":\"inventory.trading.accept\")}),m===$s.TRADING_STATE_COUNTDOWN&&Object(Kr.jsx)(tc,{variant:\"secondary\",disabled:!0,children:nt(\"inventory.trading.countdown\",[\"counter\"],[h.toString()])}),m===$s.TRADING_STATE_CONFIRMING&&Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:p,children:nt(\"inventory.trading.button.restore\")}),m===$s.TRADING_STATE_CONFIRMED&&Object(Kr.jsx)(tc,{variant:\"secondary\",children:nt(\"inventory.trading.info.waiting\")})]})]})]}):null},fu=e=>{const{petItem:t=null,children:s=null,...n}=e,[r,i]=Object(c.useState)(!1),{selectedPet:o=null,setSelectedPet:l=null}=gs(),{isUnseen:u}=cs(),d=u(qs.PET,t.petData.id),h=e=>{switch(e.type){case a.Ce.MOUSE_DOWN:return l(t),void i(!0);case a.Ce.MOUSE_UP:return void i(!1);case a.Ce.ROLL_OUT:if(!r||t!==o)return;return void Gs(t)}};return Object(Kr.jsxs)(kc,{itemActive:t===o,itemUnseen:d,onMouseDown:h,onMouseUp:h,onMouseOut:h,...n,children:[Object(Kr.jsx)(Wc,{figure:t.petData.figureData.figuredata,direction:3,headOnly:!0}),s]})},xu=e=>{const{roomSession:t=null,roomPreviewer:s=null}=e,[n,r]=Object(c.useState)(!1),{petItems:i=null,selectedPet:o=null,activate:l=null,deactivate:u=null}=gs(),{isUnseen:d=null,removeUnseen:h=null}=cs();return Object(c.useEffect)((()=>{if(!o||!s)return;const e=o.petData,t=L();let n=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_WALL_TYPE),r=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_FLOOR_TYPE),c=t.getRoomInstanceVariable(t.activeRoomId,a.Og.ROOM_LANDSCAPE_TYPE);n=n&&n.length?n:\"101\",r=r&&r.length?r:\"101\",c=c&&c.length?c:\"1.1\",s.reset(!1),s.updateRoomWallsAndFloorVisibility(!0,!0),s.updateObjectRoom(r,n,c),s.addPetIntoRoom(e.figureString)}),[s,o]),Object(c.useEffect)((()=>{o&&d(qs.PET,o.petData.id)&&h(qs.PET,o.petData.id)}),[o,d,h]),Object(c.useEffect)((()=>{if(!n)return;const e=l();return()=>u(e)}),[n,l,u]),Object(c.useEffect)((()=>(r(!0),()=>r(!1))),[]),i&&i.length?Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{size:7,overflow:\"hidden\",children:Object(Kr.jsx)(Zr,{columnCount:5,children:i&&i.length>0&&i.map((e=>Object(Kr.jsx)(fu,{petItem:e},e.petData.id)))})}),Object(Kr.jsxs)(vc,{size:5,overflow:\"auto\",children:[Object(Kr.jsx)(vc,{overflow:\"hidden\",position:\"relative\",children:Object(Kr.jsx)(Yc,{roomPreviewer:s,height:140})}),o&&o.petData&&Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"between\",gap:2,children:[Object(Kr.jsx)(ei,{grow:!0,truncate:!0,children:o.petData.name}),!!t&&Object(Kr.jsx)(tc,{onClick:e=>Gs(o),children:nt(\"inventory.furni.placetoroom\")})]})]})]}):Object(Kr.jsx)(bu,{title:nt(\"inventory.empty.pets.title\"),desc:nt(\"inventory.empty.pets.desc\")})},Iu=\"inventory.furni\",Tu=\"inventory.bots\",Cu=\"inventory.furni.tab.pets\",Nu=\"inventory.badges\",Su=[Iu,Tu,Cu,Nu],vu=[qs.FURNI,qs.BOT,qs.PET,qs.BADGE],Ru=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(Su[0]),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{isTrading:d=!1,stopTrading:h=null}=ms(),{getCount:j=null,resetCategory:b=null}=cs(),g=()=>{d&&h(),s(!1)},O=Object(c.useCallback)((e=>{Ps&&(Ls(!1),e.placedInRoom||s(!0))}),[]);Bt(a.pg.PLACED,O);const m=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void o(e.session);case a.Yg.ENDED:return o(null),void s(!1)}}),[]);Gt(a.Yg.CREATED,m),Gt(a.Yg.ENDED,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();for(const s of t.data)U().setBadgePointLimit(s.badgeId,s.limit)}),[]);return it(a.t,p),Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}},eventUrlPrefix:\"inventory/\"};return N(e),()=>M(e)}),[]),Object(c.useEffect)((()=>(u(new a.Qg(L(),++a.Qg.PREVIEW_COUNTER)),()=>{u((e=>(e.dispose(),null)))})),[]),Object(c.useEffect)((()=>{!t&&d&&s(!0)}),[t,d]),t?Object(Kr.jsxs)(Ec,{uniqueKey:\"inventory\",className:d?\"nitro-inventory trading\":\"nitro-inventory\",theme:d?\"primary\":\"\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"inventory.title\"),onCloseClick:g}),!d&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xc,{children:Su.map(((e,t)=>Object(Kr.jsx)($c,{isActive:n===e,onClick:t=>r(e),count:j(vu[t]),children:nt(e)},t)))}),Object(Kr.jsxs)(uc,{children:[n===Iu&&Object(Kr.jsx)(_u,{roomSession:i,roomPreviewer:l}),n===Tu&&Object(Kr.jsx)(Ou,{roomSession:i,roomPreviewer:l}),n===Cu&&Object(Kr.jsx)(xu,{roomSession:i,roomPreviewer:l}),n===Nu&&Object(Kr.jsx)(ju,{})]})]}),d&&Object(Kr.jsx)(uc,{children:Object(Kr.jsx)(Eu,{cancelTrade:g})})]}):null},Au=e=>{const{variant:t=\"\",size:s=\"\",active:n=!1,disabled:r=!1,classNames:i=[],...a}=e,o=Object(c.useMemo)((()=>{const e=[\"px-4 fw-bold\"];return t&&e.push(\"btn-\"+t),s&&e.push(\"btn-\"+s),n&&e.push(\"active\"),r&&e.push(\"disabled\"),i.length&&e.push(...i),e}),[t,s,n,r,i]);return Object(Kr.jsx)(ec,{classNames:o,...a})},yu=Object(c.createContext)({modToolsState:null,dispatchModToolsState:null}),wu=e=>Object(Kr.jsx)(yu.Provider,{value:e.value,children:e.children}),ku=()=>Object(c.useContext)(yu);class Du{}Du.SET_INIT_DATA=\"MTA_SET_INIT_DATA\",Du.SET_CURRENT_ROOM_ID=\"MTA_SET_CURRENT_ROOM_ID\",Du.SET_OPEN_ROOMS=\"MTA_SET_OPEN_ROOMS\",Du.SET_OPEN_USERINFO=\"MTA_SET_OPEN_USERINFO\",Du.SET_OPEN_ROOM_CHATLOGS=\"MTA_SET_OPEN_CHATLOGS\",Du.SET_OPEN_USER_CHATLOGS=\"MTA_SET_OPEN_USER_CHATLOGS\",Du.SET_TICKETS=\"MTA_SET_TICKETS\",Du.SET_CFH_CATEGORIES=\"MTA_SET_CFH_CATEGORIES\",Du.RESET_STATE=\"MTA_RESET_STATE\";const Uu={settings:null,currentRoomId:null,openRooms:null,openRoomChatlogs:null,openUserChatlogs:null,openUserInfo:null,tickets:null,cfhCategories:null},Pu=(e,t)=>{switch(t.type){case Du.SET_INIT_DATA:{const s=t.payload.settings||e.settings||null;return{...e,settings:s}}case Du.SET_CURRENT_ROOM_ID:{const s=t.payload.currentRoomId||e.currentRoomId||null;return{...e,currentRoomId:s}}case Du.SET_OPEN_ROOMS:{const s=t.payload.openRooms||e.openRooms||null;return{...e,openRooms:s}}case Du.SET_OPEN_USERINFO:{const s=t.payload.openUserInfo||e.openUserInfo||null;return{...e,openUserInfo:s}}case Du.SET_OPEN_ROOM_CHATLOGS:{const s=t.payload.openRoomChatlogs||e.openRoomChatlogs||null;return{...e,openRoomChatlogs:s}}case Du.SET_OPEN_USER_CHATLOGS:{const s=t.payload.openUserChatlogs||e.openUserChatlogs||null;return{...e,openUserChatlogs:s}}case Du.SET_TICKETS:{const s=t.payload.tickets||e.tickets||null;return{...e,tickets:s}}case Du.SET_CFH_CATEGORIES:{const s=t.payload.cfhCategories||e.cfhCategories||null;return{...e,cfhCategories:s}}case Du.RESET_STATE:return{...Uu};default:return e}},Mu=e=>{const{modToolsState:t=null,dispatchModToolsState:s=null}=ku(),{openRooms:n=null,openRoomChatlogs:r=null,openUserChatlogs:i=null,openUserInfo:o=null,tickets:l=null}=t,u=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.data;s({type:Du.SET_INIT_DATA,payload:{settings:n}}),s({type:Du.SET_TICKETS,payload:{tickets:n.issues}})}),[s]),d=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueData.issueId));r>-1?n[r]=t.issueData:(n.push(t.issueData),Ss(an.MODTOOLS_NEW_TICKET)),s({type:Du.SET_TICKETS,payload:{tickets:n}})}),[s,l]),h=Object(c.useCallback)((e=>{e.getParser()}),[]),j=Object(c.useCallback)((e=>{e.getParser()&&Pr.simpleAlert(\"Failed to pick issue\",yr.DEFAULT,null,null,\"Error\")}),[]),b=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=l?Array.from(l):[],r=n.findIndex((e=>e.issueId===t.issueId));-1!==r&&(n.splice(r,1),s({type:Du.SET_TICKETS,payload:{tickets:n}}))}),[s,l]),g=Object(c.useCallback)((e=>{const t=e.getParser();t&&(t.success?Pr.simpleAlert(\"Moderation action was successfull\",yr.MODERATION,null,null,\"Success\"):Pr.simpleAlert(\"There was a problem applying tht moderation action\",yr.MODERATION,null,null,\"Error\"))}),[]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t)return;const n=t.callForHelpCategories;s({type:Du.SET_CFH_CATEGORIES,payload:{cfhCategories:n}}),(e=>{tu=e})(n)}),[s]),m=Object(c.useCallback)((e=>{e.getParser()}),[]);it(a.we,u),it(a.Rd,d),it(a.ze,h),it(a.Td,j),it(a.Qd,b),it(a.ue,g),it(a.bb,O),it(a.ab,m);const p=Object(c.useCallback)((e=>{switch(e.type){case a.og.INITIALIZED:return void s({type:Du.SET_CURRENT_ROOM_ID,payload:{currentRoomId:e.roomId}});case a.og.DISPOSED:return void s({type:Du.SET_CURRENT_ROOM_ID,payload:{currentRoomId:null}})}}),[s]);Bt(a.og.INITIALIZED,p),Bt(a.og.DISPOSED,p);const _=Object(c.useCallback)((e=>{switch(e.type){case It.OPEN_ROOM_INFO:{const t=e;if(n&&n.includes(t.roomId))return;const r=n||[];return void s({type:Du.SET_OPEN_ROOMS,payload:{openRooms:[...r,t.roomId]}})}case It.OPEN_ROOM_CHATLOG:{const t=e;if(r&&r.includes(t.roomId))return;const n=r||[];return void s({type:Du.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:[...n,t.roomId]}})}case It.OPEN_USER_INFO:{const t=e;if(o&&o.includes(t.userId))return;const n=o||[];return void s({type:Du.SET_OPEN_USERINFO,payload:{openUserInfo:[...n,t.userId]}})}case It.OPEN_USER_CHATLOG:{const t=e;if(i&&i.includes(t.userId))return;const n=i||[];return void s({type:Du.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:[...n,t.userId]}})}}}),[n,s,r,o,i]);return qt(It.OPEN_ROOM_INFO,_),qt(It.OPEN_ROOM_CHATLOG,_),qt(It.OPEN_USER_INFO,_),qt(It.OPEN_USER_CHATLOG,_),null},Lu=e=>{const{records:t=null}=e,s=e=>{let s=t[0].chatlog[e.index];return Object(Kr.jsx)(io.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:\"center\",className:\"log-entry py-1\",children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"g-col-1\",children:s.timestamp}),Object(Kr.jsx)(ei,{className:\"g-col-3\",gfbold:!0,pointer:!0,onClick:e=>Vt(new St(s.userId)),children:s.userName}),Object(Kr.jsx)(ei,{textBreak:!0,wrap:!0,className:\"g-col-7\",children:s.message})]},e.key)},e.key)},n=e=>{let s=null,n=null,r=!1,c=0;for(let i=0;i<t.length;i++){if(n=t[i],c++,c+=n.chatlog.length,e.index>c-1)continue;if(e.index+1===c-n.chatlog.length){r=!0;break}const a=e.index-(c-n.chatlog.length);s=n.chatlog[a];break}return Object(Kr.jsxs)(io.b,{cache:a,columnIndex:0,parent:e.parent,rowIndex:e.index,children:[r&&n&&Object(Kr.jsx)(i,{roomId:n.roomId,roomName:n.roomName,uniqueKey:e.key,style:e.style}),!r&&Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:\"center\",className:\"log-entry py-1\",children:[Object(Kr.jsx)(ei,{className:\"g-col-2\",children:s.timestamp}),Object(Kr.jsx)(ei,{className:\"g-col-3\",gfbold:!0,underline:!0,pointer:!0,onClick:e=>Vt(new St(s.userId)),children:s.userName}),Object(Kr.jsx)(ei,{textBreak:!0,wrap:!0,className:\"g-col-7\",children:s.message})]},e.key)]},e.key)},r=Object(c.useCallback)((()=>{let e=0;for(let s=0;s<t.length;s++)e++,e+=t[s].chatlog.length;return e}),[t]),i=e=>Object(Kr.jsxs)(ec,{gap:2,alignItems:\"center\",justifyContent:\"between\",style:e.style,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:\"Room name:\"}),Object(Kr.jsx)(ei,{children:e.roomName})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:t=>Ar(e.roomId),children:\"Visit Room\"}),Object(Kr.jsx)(tc,{onClick:t=>Vt(new Ct(e.roomId)),children:\"Room Tools\"})]})]},e.uniqueKey),a=new io.c({defaultHeight:25,fixedWidth:!0});return Object(Kr.jsxs)(Kr.Fragment,{children:[t&&1===t.length&&Object(Kr.jsx)(i,{roomId:t[0].roomId,roomName:t[0].roomName,uniqueKey:null,style:{}}),Object(Kr.jsxs)(vc,{fit:!0,gap:0,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:\"text-black pb-1\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-1\",children:\"Time\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"User\"}),Object(Kr.jsx)(Qr,{className:\"g-col-7\",children:\"Message\"})]})}),t&&t.length>0&&Object(Kr.jsx)(vc,{className:\"log-container striped-children\",overflow:\"auto\",gap:0,children:Object(Kr.jsx)(io.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:c,width:i}=e;return a.clearAll(),Object(Kr.jsx)(io.d,{width:i,height:c,rowCount:t.length>1?r():t[0].chatlog.length,rowHeight:a.rowHeight,className:\"log-entry-container\",rowRenderer:t.length>1?n:s,deferredMeasurementCache:a})}})})]})]})},Fu=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.roomId===t&&r(s.data)}),[t]);return it(a.dg,i),Object(c.useEffect)((()=>{$n(new a.xc(t))}),[t]),n?Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:`Room Chatlog ${n.roomName}`,onCloseClick:s}),Object(Kr.jsx)(uc,{className:\"text-black h-100\",children:Object(Kr.jsx)(vc,{className:\"mod-content p-2\",children:n&&Object(Kr.jsx)(Lu,{records:[n]})})})]}):null},Hu=e=>{const{roomId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(!1),[C,N]=Object(c.useState)(!1),[S,v]=Object(c.useState)(\"\"),R=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.flatId===t&&(o(s.data.flatId),u(s.data.room.name),h(s.data.room.desc),b(s.data.ownerId),O(s.data.ownerName),p(s.data.ownerInRoom),E(s.data.userCount))}),[t]);it(a.ye,R);const A=Object(c.useCallback)(((e,s)=>{if(e)switch(e){case\"alert_only\":if(0===S.trim().length)return;return $n(new a.te(a.te.ACTION_ALERT,S,\"\")),void $n(new a.se(t,I?1:0,C?1:0,f?1:0));case\"send_message\":if(0===S.trim().length)return;return $n(new a.te(a.te.ACTION_MESSAGE,S,\"\")),void $n(new a.se(t,I?1:0,C?1:0,f?1:0))}}),[C,f,I,S,t]);return Object(c.useEffect)((()=>{n||($n(new a.rc(t)),r(!0))}),[t,n,r]),Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-room\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:\"Room Info\",onCloseClick:e=>s()}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsxs)(vc,{gap:0,className:\"mod-content p-2\",children:[Object(Kr.jsx)(ei,{gfbold:!0,children:l}),Object(Kr.jsx)(ei,{children:d})]}),Object(Kr.jsxs)(ec,{gap:2,className:\"mod-content p-2\",children:[Object(Kr.jsxs)(vc,{justifyContent:\"center\",grow:!0,gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"\",children:\"Room Owner:\"}),Object(Kr.jsx)(ei,{underline:!0,pointer:!0,truncate:!0,children:g})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"\",children:\"Users in room:\"}),Object(Kr.jsx)(ei,{children:_})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(ei,{gfbold:!0,className:\"\",children:\"Owner in room:\"}),Object(Kr.jsx)(ei,{children:m?\"Yes\":\"No\"})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>Ar(t),children:\"Visit Room\"}),Object(Kr.jsx)(tc,{onClick:e=>Vt(new Tt(t)),children:\"Chatlog\"})]})]}),Object(Kr.jsxs)(vc,{className:\"mod-content p-2\",gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:f,onChange:e=>x(e.target.checked)}),Object(Kr.jsx)(ei,{children:\"Kick everyone out\"})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:I,onChange:e=>T(e.target.checked)}),Object(Kr.jsx)(ei,{children:\"Enable the doorbell\"})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:C,onChange:e=>N(e.target.checked)}),Object(Kr.jsx)(ei,{children:\"Change room name\"})]})]}),Object(Kr.jsx)(\"textarea\",{className:\"form-control message-input p-1\",placeholder:\"Type a mandatory message to the users in this text box...\",value:S,onChange:e=>v(e.target.value)}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>A(\"send_message\"),children:\"Send Caution\"}),Object(Kr.jsx)(tc,{onClick:e=>A(\"alert_only\"),children:\"Send Alert only\"})]})]})]})},Bu=e=>{switch(e){case 1:case 2:return\"Normal\";case 3:return\"Automatic\";case 4:return\"Automatic IM\";case 5:return\"Guide System\";case 6:return\"IM\";case 7:return\"Room\";case 8:return\"Panic\";case 9:return\"Guardian\";case 10:return\"Automatic Helper\";case 11:return\"Discussion\";case 12:return\"Selfie\";case 14:return\"Photo\";case 15:return\"Ambassador\";default:return\"Unknown\"}},Gu=e=>{const{onCloseClick:t=null,issueId:s=null}=e,[n,r]=Object(c.useState)(null);Object(c.useEffect)((()=>{$n(new a.gc(s))}),[s]);const i=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.issueId===s&&r(t.data)}),[s]);return it(a.Z,i),Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",children:[Object(Kr.jsx)(jc,{headerText:\"Issue Chatlog\",onCloseClick:t}),Object(Kr.jsx)(uc,{className:\"text-black\",children:n&&Object(Kr.jsx)(Lu,{records:[n.chatRecord]})})]})},Wu=e=>{const{issueId:t=null,onIssueInfoClosed:s=null}=e,{modToolsState:n=null}=ku(),{tickets:r=null}=n,[i,o]=Object(c.useState)(!1),l=Object(c.useMemo)((()=>r&&r.length?r.find((e=>e.issueId===t)):null),[t,r]),u=e=>{$n(new a.fb([t],e)),s(t)},d=e=>Vt(new St(e));return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-handle-issue\",theme:\"modtool-windows\",children:[Object(Kr.jsx)(jc,{headerText:\"Resolving issue \"+t,onCloseClick:()=>s(t)}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsx)(ei,{fontSize:4,children:\"Issue Information\"}),Object(Kr.jsxs)(Jr,{overflow:\"auto\",children:[Object(Kr.jsx)(vc,{size:8,children:Object(Kr.jsx)(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:Object(Kr.jsxs)(\"tbody\",{children:[Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{children:\"Source\"}),Object(Kr.jsx)(\"td\",{children:Bu(l.categoryId)})]}),Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{children:\"Category\"}),Object(Kr.jsx)(\"td\",{className:\"text-break\",children:nt(\"help.cfh.topic.\"+l.reportedCategoryId)})]}),Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{children:\"Description\"}),Object(Kr.jsx)(\"td\",{className:\"text-break\",children:l.message})]}),Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{children:\"Caller\"}),Object(Kr.jsx)(\"td\",{children:Object(Kr.jsx)(ei,{gfbold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reporterUserId),children:l.reporterUserName})})]}),Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{children:\"Reported User\"}),Object(Kr.jsx)(\"td\",{children:Object(Kr.jsx)(ei,{gfbold:!0,underline:!0,pointer:!0,onClick:e=>d(l.reportedUserId),children:l.reportedUserName})})]})]})})}),Object(Kr.jsxs)(vc,{size:4,gap:1,children:[Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:()=>o(!i),children:\"Chatlog\"}),Object(Kr.jsx)(tc,{onClick:e=>u(a.fb.RESOLUTION_USELESS),children:\"Close as useless\"}),Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>u(a.fb.RESOLUTION_ABUSIVE),children:\"Close as abusive\"}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>u(a.fb.RESOLUTION_RESOLVED),children:\"Close as resolved\"}),Object(Kr.jsx)(tc,{variant:\"secondary\",onClick:e=>(e=>{$n(new a.Nf([e])),s(e)})(t),children:\"Release\"})]})]})]})]}),i&&Object(Kr.jsx)(Gu,{issueId:t,onCloseClick:()=>o(!1)})]})},Vu=e=>{const{myIssues:t=null,onIssueHandleClick:s=null}=e;return Object(Kr.jsxs)(vc,{gap:0,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:\"Type\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Room/Player\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Opened\"}),Object(Kr.jsx)(Qr,{className:\"g-col-2\"}),Object(Kr.jsx)(Qr,{className:\"g-col-2\"})]})}),Object(Kr.jsx)(vc,{overflow:\"auto\",className:\"striped-children\",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:Object(Kr.jsx)(tc,{variant:\"primary\",onClick:t=>s(e.issueId),children:\"Handle\"})}),Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:Object(Kr.jsx)(tc,{variant:\"danger\",onClick:t=>{return s=e.issueId,$n(new a.Nf([s]));var s},children:\"Release\"})})]},e.issueId)))})]})},qu=e=>{const{openIssues:t=null}=e;return Object(Kr.jsxs)(vc,{gap:0,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:\"Type\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Room/Player\"}),Object(Kr.jsx)(Qr,{className:\"g-col-4\",children:\"Opened\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\"})]})}),Object(Kr.jsx)(vc,{overflow:\"auto\",className:\"striped-children\",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:\"g-col-4\",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:Object(Kr.jsx)(tc,{variant:\"success\",onClick:t=>{return s=e.issueId,$n(new a.wf([s],!1,0,\"pick issue button\"));var s},children:\"Pick Issue\"})})]},e.issueId)))})]})},Yu=e=>{const{pickedIssues:t=null}=e;return Object(Kr.jsxs)(vc,{gap:0,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:\"Type\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Room/Player\"}),Object(Kr.jsx)(Qr,{className:\"g-col-4\",children:\"Opened\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Picker\"})]})}),Object(Kr.jsx)(vc,{overflow:\"auto\",className:\"striped-children\",gap:0,children:t&&t.length>0&&t.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:e.categoryId}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:e.reportedUserName}),Object(Kr.jsx)(Qr,{className:\"g-col-4\",children:new Date(Date.now()-e.issueAgeInMilliseconds).toLocaleTimeString()}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:e.pickerUserName})]},e.issueId)))})]})},zu=[\"Open Issues\",\"My Issues\",\"Picked Issues\"],Ku=e=>{const{onCloseClick:t=null}=e,{modToolsState:s=null}=ku(),{tickets:n=null}=s,[r,i]=Object(c.useState)(0),[o,l]=Object(c.useState)([]),u=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_OPEN)):[]),[n]),d=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_PICKED&&e.pickerUserId===ee().userId)):[]),[n]),h=Object(c.useMemo)((()=>n?n.filter((e=>e.state===a.Sd.STATE_PICKED)):[]),[n]),j=Object(c.useCallback)((e=>{const t=o.indexOf(e);if(-1===t)return;const s=Array.from(o);s.splice(t,1),l(s)}),[o]),b=Object(c.useCallback)((e=>{if(-1===o.indexOf(e)){const t=Array.from(o);t.push(e),l(t)}else j(e)}),[o,j]),g=Object(c.useCallback)((()=>{switch(r){case 0:return Object(Kr.jsx)(qu,{openIssues:u});case 1:return Object(Kr.jsx)(Vu,{myIssues:d,onIssueHandleClick:b});case 2:return Object(Kr.jsx)(Yu,{pickedIssues:h});default:return null}}),[r,d,b,u,h]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-tickets\",children:[Object(Kr.jsx)(jc,{headerText:\"Tickets\",onCloseClick:t}),Object(Kr.jsx)(Xc,{children:zu.map(((e,t)=>Object(Kr.jsx)($c,{isActive:r===t,onClick:e=>i(t),children:e},t)))}),Object(Kr.jsx)(uc,{gap:1,children:Object(Kr.jsx)(g,{})})]}),o&&o.length>0&&o.map((e=>Object(Kr.jsx)(Wu,{issueId:e,onIssueInfoClosed:j},e)))]})},Qu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&(o(s.data.username),r(s.data.roomChatlogs))}),[t]);return it(a.xi,l),Object(c.useEffect)((()=>{$n(new a.Bc(t))}),[t]),Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:`User Chatlog: ${i||\"\"}`,onCloseClick:s}),Object(Kr.jsx)(uc,{className:\"text-black h-100\",children:n&&Object(Kr.jsx)(Lu,{records:n})})]})};class $u{constructor(e,t,s,n,r){this._actionId=void 0,this._name=void 0,this._actionType=void 0,this._sanctionTypeId=void 0,this._actionLengthHours=void 0,this._actionId=e,this._name=t,this._actionType=s,this._sanctionTypeId=n,this._actionLengthHours=r}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}}$u.ALERT=1,$u.MUTE=2,$u.BAN=3,$u.KICK=4,$u.TRADE_LOCK=5,$u.MESSAGE=6;const Xu=[new $u(1,\"Alert\",$u.ALERT,1,0),new $u(2,\"Mute 1h\",$u.MUTE,2,0),new $u(3,\"Ban 18h\",$u.BAN,3,0),new $u(4,\"Ban 7 days\",$u.BAN,4,0),new $u(5,\"Ban 30 days (step 1)\",$u.BAN,5,0),new $u(7,\"Ban 30 days (step 2)\",$u.BAN,7,0),new $u(6,\"Ban 100 years\",$u.BAN,6,0),new $u(106,\"Ban avatar-only 100 years\",$u.BAN,6,0),new $u(101,\"Kick\",$u.KICK,0,0),new $u(102,\"Lock trade 1 week\",$u.TRADE_LOCK,0,168),new $u(104,\"Lock trade permanent\",$u.TRADE_LOCK,0,876e3),new $u(105,\"Message\",$u.MESSAGE,0,0)],Ju=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),[l,u]=Object(c.useState)(\"\"),{modToolsState:d=null}=ku(),{cfhCategories:h=null,settings:j=null}=d,b=Object(c.useMemo)((()=>{const e=[];if(h&&h.length)for(const t of h)for(const s of t.topics)e.push(s);return e}),[h]),g=e=>{Pr.simpleAlert(e,yr.DEFAULT,null,null,\"Error\")};return t?Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-user-action\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:\"Mod Action: \"+(t?t.username:\"\"),onCloseClick:()=>s()}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:-1,disabled:!0,children:\"CFH Topic\"}),b.map(((e,t)=>Object(Kr.jsx)(\"option\",{value:t,children:nt(\"help.cfh.topic.\"+e.id)},t)))]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:i,onChange:e=>o(parseInt(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:-1,disabled:!0,children:\"Sanction Type\"}),Xu.map(((e,t)=>Object(Kr.jsx)(\"option\",{value:t,children:e.name},t)))]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{small:!0,children:\"Optional message type, overrides default\"}),Object(Kr.jsx)(\"textarea\",{className:\"form-control\",value:l,onChange:e=>u(e.target.value)})]}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(tc,{variant:\"primary\",onClick:()=>{let e=null;const r=b[n];if(-1===n&&(e=\"You must select a CFH topic\"),e)return g(e);const c=0===l.trim().length?nt(`help.cfh.topic.${r.id}`):l;$n(new a.rb(t.userId,n,c)),s()},children:\"Default Sanction\"}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>{let e=null;const r=b[n],c=Xu[i];if(-1===n||-1===i?e=\"You must select a CFH topic and Sanction\":j&&j.cfhPermission?r?c||(e=\"You must select a sanction\"):e=\"You must select a CFH topic\":e=\"You do not have permission to do this\",e)return void g(e);const o=0===l.trim().length?nt(`help.cfh.topic.${r.id}`):l;switch(c.actionType){case $u.ALERT:if(!j.alertPermission)return void g(\"You have insufficient permissions\");$n(new a.me(t.userId,o,r.id));break;case $u.MUTE:$n(new a.qe(t.userId,o,r.id));break;case $u.BAN:if(!j.banPermission)return void g(\"You have insufficient permissions\");$n(new a.ne(t.userId,o,r.id,i,106===c.actionId));break;case $u.KICK:if(!j.kickPermission)return void g(\"You have insufficient permissions\");$n(new a.oe(t.userId,o,r.id));break;case $u.TRADE_LOCK:{const e=60*c.actionLengthHours;$n(new a.re(t.userId,o,e,r.id));break}case $u.MESSAGE:if(0===l.trim().length)return void g(\"Please write a message to user\");$n(new a.pe(t.userId,l,r.id))}s()},children:\"Sanction\"})]})]})]}):null},Zu=e=>{const{userId:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{const s=e.getParser();s&&s.data.userId===t&&r(s.data)}),[t]);it(a.wh,i);const o=e=>{const t=n.rooms[e.index];return Object(Kr.jsxs)(Jr,{fullHeight:!1,style:e.style,gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[Object(Kr.jsxs)(ei,{className:\"g-col-2\",children:[t.enterHour.toString().padStart(2,\"0\"),\": \",t.enterMinute.toString().padStart(2,\"0\")]}),Object(Kr.jsx)(ei,{className:\"g-col-7\",children:t.roomName}),Object(Kr.jsx)(ei,{gfbold:!0,underline:!0,pointer:!0,variant:\"primary\",className:\"g-col-3\",onClick:e=>Ar(t.roomId),children:\"Visit Room\"})]},e.key)};return Object(c.useEffect)((()=>{$n(new a.zc(t))}),[t]),t?Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-user-visits\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:\"User Visits\",onCloseClick:s}),Object(Kr.jsx)(uc,{className:\"text-black\",gap:1,children:Object(Kr.jsxs)(vc,{fullHeight:!0,gap:0,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsxs)(Jr,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[Object(Kr.jsx)(Qr,{className:\"g-col-2\",children:\"Time\"}),Object(Kr.jsx)(Qr,{className:\"g-col-7\",children:\"Room name\"}),Object(Kr.jsx)(Qr,{className:\"g-col-3\",children:\"Visit\"})]})}),Object(Kr.jsx)(vc,{className:\"log-container striped-children\",overflow:\"auto\",gap:0,children:n&&Object(Kr.jsx)(io.a,{defaultWidth:400,defaultHeight:200,children:e=>{let{height:t,width:s}=e;return Object(Kr.jsx)(io.d,{width:s,height:t,rowCount:n.rooms.length,rowHeight:25,className:\"log-entry-container\",rowRenderer:o})}})})]})})]}):null},ed=e=>{const{user:t=null,onCloseClick:s=null}=e,[n,r]=Object(c.useState)(\"\"),i=Object(c.useCallback)((()=>{0!==n.trim().length?($n(new a.pe(t.userId,n,-999)),s()):Vt(new vt([\"Please write a message to user.\"],null,null,null,\"Error\",null))}),[n,t,s]);return t?Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-user-message\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:\"Send Message\",onCloseClick:()=>s()}),Object(Kr.jsxs)(uc,{className:\"text-black\",children:[Object(Kr.jsxs)(ei,{children:[\"Message To: \",t.username]}),Object(Kr.jsx)(\"textarea\",{className:\"form-control\",value:n,onChange:e=>r(e.target.value)}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:i,children:\"Send message\"})]})]}):null},td=e=>{const{onCloseClick:t=null,userId:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),j=Object(c.useCallback)((e=>{const t=e.getParser();t&&t.data.userId===s&&r(t.data)}),[s]);it(a.Ae,j);const b=Object(c.useMemo)((()=>n?[{localeKey:\"modtools.userinfo.userName\",value:n.userName,showOnline:!0},{localeKey:\"modtools.userinfo.cfhCount\",value:n.cfhCount.toString()},{localeKey:\"modtools.userinfo.abusiveCfhCount\",value:n.abusiveCfhCount.toString()},{localeKey:\"modtools.userinfo.cautionCount\",value:n.cautionCount.toString()},{localeKey:\"modtools.userinfo.banCount\",value:n.banCount.toString()},{localeKey:\"modtools.userinfo.lastSanctionTime\",value:n.lastSanctionTime},{localeKey:\"modtools.userinfo.tradingLockCount\",value:n.tradingLockCount.toString()},{localeKey:\"modtools.userinfo.tradingExpiryDate\",value:n.tradingExpiryDate},{localeKey:\"modtools.userinfo.minutesSinceLastLogin\",value:a.Kb.format(60*n.minutesSinceLastLogin,\".ago\",2)},{localeKey:\"modtools.userinfo.lastPurchaseDate\",value:n.lastPurchaseDate},{localeKey:\"modtools.userinfo.primaryEmailAddress\",value:n.primaryEmailAddress},{localeKey:\"modtools.userinfo.identityRelatedBanCount\",value:n.identityRelatedBanCount.toString()},{localeKey:\"modtools.userinfo.registrationAgeInMinutes\",value:a.Kb.format(60*n.registrationAgeInMinutes,\".ago\",2)},{localeKey:\"modtools.userinfo.userClassification\",value:n.userClassification}]:null),[n]);return Object(c.useEffect)((()=>{$n(new a.sc(s))}),[s]),n?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(Ec,{className:\"nitro-mod-tools-user\",theme:\"modtool-windows\",windowPosition:Oc.TOP_CENTER,children:[Object(Kr.jsx)(jc,{headerText:nt(\"modtools.userinfo.title\",[\"username\"],[n.userName]),onCloseClick:()=>t()}),Object(Kr.jsx)(uc,{className:\"text-black\",children:Object(Kr.jsxs)(Jr,{overflow:\"hidden\",className:\"mod-content p-2\",children:[Object(Kr.jsx)(vc,{size:8,overflow:\"auto\",children:Object(Kr.jsx)(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:Object(Kr.jsx)(\"tbody\",{children:b.map(((e,t)=>Object(Kr.jsxs)(\"tr\",{children:[Object(Kr.jsx)(\"th\",{scope:\"row\",children:nt(e.localeKey)}),Object(Kr.jsxs)(\"td\",{children:[e.value,e.showOnline&&Object(Kr.jsx)(\"i\",{className:`icon icon-pf-${n.online?\"online\":\"offline\"} ms-2`})]})]},t)))})})}),Object(Kr.jsxs)(vc,{size:4,gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>Vt(new Nt(s)),children:\"Room Chat\"}),Object(Kr.jsx)(tc,{onClick:e=>o(!i),children:\"Send Message\"}),Object(Kr.jsx)(tc,{onClick:e=>h(!d),children:\"Room Visits\"}),Object(Kr.jsx)(tc,{onClick:e=>u(!l),children:\"Mod Action\"})]})]})})]}),i&&Object(Kr.jsx)(ed,{user:{userId:s,username:n.userName},onCloseClick:()=>o(!1)}),l&&Object(Kr.jsx)(Ju,{user:{userId:s,username:n.userName},onCloseClick:()=>u(!1)}),d&&Object(Kr.jsx)(Zu,{userId:s,onCloseClick:()=>h(!1)})]}):null},sd=e=>{const[t,s]=Object(c.useState)(!0),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useReducer)(Pu,Uu),{currentRoomId:d=null,openRooms:h=null,openRoomChatlogs:j=null,openUserChatlogs:b=null,openUserInfo:g=null}=l,O=Object(c.useRef)(null),m=ee().isModerator,p=Object(c.useCallback)((e=>{switch(e.type){case It.SHOW_MOD_TOOLS:return void s(!0);case It.HIDE_MOD_TOOLS:return void s(!1);case It.TOGGLE_MOD_TOOLS:return void s((e=>!e))}}),[]);qt(It.SHOW_MOD_TOOLS,p),qt(It.HIDE_MOD_TOOLS,p),qt(It.TOGGLE_MOD_TOOLS,p);const _=Object(c.useCallback)((e=>{if(e.category!==a.Ig.UNIT)return;const t=ie();if(!t)return;const s=t.userDataManager.getUserDataByIndex(e.objectId);s&&s.type===a.Mg.USER&&r({userId:s.webID,username:s.name})}),[]);Bt(a.pg.SELECTED,_);const E=Object(c.useCallback)(((e,t)=>{if(e)switch(e){case\"toggle_room\":return h?void(h.indexOf(d)>-1?E(\"close_room\",d.toString()):Vt(new Ct(d))):void Vt(new Ct(d));case\"close_room\":{const e=h.indexOf(Number(t)),s=Array.from(h);return s.splice(e,1),void u({type:Du.SET_OPEN_ROOMS,payload:{openRooms:s}})}case\"toggle_room_chatlog\":return j?void(j.indexOf(d)>-1?E(\"close_room_chatlog\",d.toString()):Vt(new Tt(d))):void Vt(new Tt(d));case\"close_room_chatlog\":{const e=j.indexOf(Number(t)),s=Array.from(j);return s.splice(e,1),void u({type:Du.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:s}})}case\"toggle_user_info\":{if(!n)return;const e=n.userId;return g?void(g.indexOf(e)>-1?E(\"close_user_info\",e.toString()):Vt(new St(e))):void Vt(new St(e))}case\"close_user_info\":{const e=g.indexOf(Number(t)),s=Array.from(g);return s.splice(e,1),void u({type:Du.SET_OPEN_USERINFO,payload:{openUserInfo:s}})}case\"close_user_chatlog\":{const e=b.indexOf(Number(t)),s=Array.from(b);return s.splice(e,1),void u({type:Du.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:s}})}}}),[h,d,j,n,g,b]);return Object(Kr.jsxs)(wu,{value:{modToolsState:l,dispatchModToolsState:u},children:[Object(Kr.jsx)(Mu,{}),t&&m&&Object(Kr.jsxs)(Ec,{uniqueKey:\"mod-tools\",className:\"nitro-mod-tools\",windowPosition:Oc.TOP_LEFT,theme:\"primary-modtool\",children:[Object(Kr.jsx)(jc,{headerText:\"Mod Tools\",onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(uc,{className:\"text-black pb-3 pt-2\",gap:3,children:[Object(Kr.jsxs)(Au,{gap:1,onClick:e=>E(\"toggle_room\"),disabled:!d,className:\"position-relative\",children:[Object(Kr.jsx)(Qr,{className:\"icon icon-small-room position-absolute start-1\"}),\" Room tool\"]}),Object(Kr.jsxs)(Au,{innerRef:O,gap:1,onClick:e=>E(\"toggle_room_chatlog\"),disabled:!d,className:\"position-relative\",children:[Object(Kr.jsx)(Qr,{className:\"icon icon-chat-history position-absolute start-1\"}),\" Chatlog Tool\"]}),Object(Kr.jsxs)(Au,{gap:1,onClick:()=>E(\"toggle_user_info\"),disabled:!n,className:\"position-relative\",children:[Object(Kr.jsx)(Qr,{className:\"icon icon-user position-absolute start-1\"}),\" User: \",n?n.username:\"\"]}),Object(Kr.jsxs)(Au,{gap:1,onClick:()=>o((e=>!e)),className:\"position-relative\",children:[Object(Kr.jsx)(Qr,{className:\"icon icon-tickets position-absolute start-1\"}),\" Report Tool\"]})]})]}),h&&h.map((e=>Object(Kr.jsx)(Hu,{roomId:e,onCloseClick:()=>E(\"close_room\",e.toString())},e))),j&&j.map((e=>Object(Kr.jsx)(Fu,{roomId:e,onCloseClick:()=>E(\"close_room_chatlog\",e.toString())},e))),g&&g.map((e=>Object(Kr.jsx)(td,{userId:e,onCloseClick:()=>E(\"close_user_info\",e.toString())},e))),b&&b.map((e=>Object(Kr.jsx)(Qu,{userId:e,onCloseClick:()=>E(\"close_user_chatlog\",e.toString())},e))),i&&Object(Kr.jsx)(Ku,{onCloseClick:()=>o(!1)})]})},nd=Object(c.createContext)({categories:null,setCategories:null,topLevelContext:null,setTopLevelContext:null,topLevelContexts:null,setTopLevelContexts:null,navigatorData:null,setNavigatorData:null,doorData:null,setDoorData:null,searchResult:null,setSearchResult:null}),rd=e=>Object(Kr.jsx)(nd.Provider,{value:e.value,children:e.children}),cd=()=>Object(c.useContext)(nd),id=e=>{const{setCategories:t=null,setTopLevelContext:s=null,topLevelContexts:n=null,setTopLevelContexts:r=null,setNavigatorData:i=null,setDoorData:o=null,setSearchResult:l=null}=cd(),u=Object(c.useCallback)((e=>{const t=e.getParser();$n(new a.Cg(t.roomId,!1,!1))}),[]);it(a.kh,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.canCreate||Pr.simpleAlert(nt(`navigator.cannotcreateevent.error.${t.errorCode}`),null,null,null,nt(\"navigator.cannotcreateevent.title\"))}),[]);it(a.R,d);const h=Object(c.useCallback)((e=>{$n(new a.De),$n(new a.Le)}),[]),j=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.eventMod=t.securityLevel>=a.Hh.MODERATOR,s.roomPicker=t.securityLevel>=a.Hh.COMMUNITY,s}))}),[i]),b=Object(c.useCallback)((e=>{Ar(e.getParser().roomId)}),[]),g=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.enteredGuestRoom=null,s.currentRoomOwner=t.isOwner,s.currentRoomId=t.roomId,s})),$n(new a.Cg(t.roomId,!0,!1)),a.Wd.available&&a.Wd.call(\"legacyTrack\",\"navigator\",\"private\",[t.roomId])}),[i]),O=Object(c.useCallback)((e=>{const t=e.getParser();if(t.roomEnter)o({roomInfo:null,state:Nr.NONE}),i((e=>{const s={...e};s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick;return!(s.createdFlatId===t.data.roomId)&&t.data.displayRoomEntryAd&&k(\"roomenterad.habblet.enabled\",!1)&&a.Jd.openRoomEnterAd(),s.createdFlatId=0,s.enteredGuestRoom&&s.enteredGuestRoom.habboGroupId,s}));else if(t.roomForward){if(t.data.ownerName!==ee().userName&&!t.isGroupMember)switch(t.data.doorMode){case a.hg.DOORBELL_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=Nr.START_DOORBELL,s}));case a.hg.PASSWORD_STATE:return void o((e=>{const s={...e};return s.roomInfo=t.data,s.state=Nr.START_PASSWORD,s}))}if(t.data.doorMode===a.hg.NOOB_STATE&&!ee().isAmbassador&&!ee().isRealNoob&&!ee().isModerator)return;X(t.data.roomId)}else i((e=>{const s={...e};return s.enteredGuestRoom=t.data,s.currentRoomIsStaffPick=t.staffPick,s}))}),[i,o]),m=Object(c.useCallback)((e=>{const t=e.getParser();i((e=>{const s={...e};return s.currentRoomRating=t.totalLikes,s.canRate=t.canLike,s}))}),[i]),p=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Nr.STATE_WAITING,t}))}),[o]),_=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Nr.STATE_ACCEPTED,t}))}),[o]),E=Object(c.useCallback)((e=>{const t=e.getParser();t.userName&&0!==t.userName.length||o((e=>{const t={...e};return t.state=Nr.STATE_NO_ANSWER,t}))}),[o]),f=Object(c.useCallback)((e=>{switch(e.getParser().errorCode){case-100002:return void o((e=>{const t={...e};return t.state=Nr.STATE_WRONG_PASSWORD,t}));case 4009:return void Pr.simpleAlert(nt(\"navigator.alert.need.to.be.vip\"),yr.DEFAULT,null,null,nt(\"generic.alert.title\"));case 4010:return void Pr.simpleAlert(nt(\"navigator.alert.invalid_room_name\"),yr.DEFAULT,null,null,nt(\"generic.alert.title\"));case 4011:return void Pr.simpleAlert(nt(\"navigator.alert.cannot_perm_ban\"),yr.DEFAULT,null,null,nt(\"generic.alert.title\"));case 4013:return void Pr.simpleAlert(nt(\"navigator.alert.room_in_maintenance\"),yr.DEFAULT,null,null,nt(\"generic.alert.title\"))}}),[o]),x=Object(c.useCallback)((e=>{const t=e.getParser();r(t.topLevelContexts),s(t.topLevelContexts.length?t.topLevelContexts[0]:null)}),[r,s]),I=Object(c.useCallback)((e=>{const t=e.getParser();s((e=>{let s=e;if(s||(s=n&&n.length&&n[0]||null),!s)return null;if(t.result.code!==s.code&&n&&n.length)for(const r of n)r.code===t.result.code&&(s=r);for(const r of n)r.code===t.result.code&&(s=r);return s})),l(t.result)}),[n,s,l]),T=Object(c.useCallback)((e=>{const s=e.getParser();t(s.categories)}),[t]),C=Object(c.useCallback)((e=>{X(e.getParser().roomId)}),[]),N=Object(c.useCallback)((e=>{const t=e.getParser();let s=!1;if(i((e=>{s=e.settingsReceived;const n={...e};return n.homeRoomId=t.homeRoomId,n.settingsReceived=!0,n})),s)return;let n=-1,r=-1;void 0!==k(\"friend.id\")&&parseInt(k(\"friend.id\"))>0&&(n=0,$n(new a.Fb(parseInt(k(\"friend.id\"))))),void 0!==k(\"forward.type\")&&void 0!==k(\"forward.id\")&&(n=parseInt(k(\"forward.type\")),r=parseInt(k(\"forward.id\"))),2===n?Ar(r):-1===n&&t.roomIdToEnter>0&&(y(\"navigator/close\"),t.roomIdToEnter!==t.homeRoomId?X(t.roomIdToEnter):X(t.homeRoomId))}),[i]),S=Object(c.useCallback)((e=>{const t=e.getParser();switch(t.reason){case a.T.REASON_FULL:Pr.simpleAlert(nt(\"navigator.guestroomfull.text\"),yr.DEFAULT,null,null,nt(\"navigator.guestroomfull.title\"));break;case a.T.REASON_QUEUE_ERROR:Pr.simpleAlert(nt(`room.queue.error.${t.parameter}`),yr.DEFAULT,null,null,nt(\"room.queue.error.title\"));break;case a.T.REASON_BANNED:Pr.simpleAlert(nt(\"navigator.banned.text\"),yr.DEFAULT,null,null,nt(\"navigator.banned.title\"));break;default:Pr.simpleAlert(nt(\"room.queue.error.title\"),yr.DEFAULT,null,null,nt(\"room.queue.error.title\"))}ue()}),[]),v=Object(c.useCallback)((e=>{y(\"navigator/show\")}),[]);return it(a.Fi,h),it(a.Hi,j),it(a.zg,b),it(a.xg,g),it(a.nc,O),it(a.Sg,m),it(a.kg,p),it(a.jg,_),it(a.lg,E),it(a.bc,f),it(a.He,x),it(a.Ke,I),it(a.Ee,T),it(a.gg,C),it(a.Fe,N),it(a.vg,S),it(a.Ie,v),null},ad=[Nr.START_DOORBELL,Nr.STATE_WAITING,Nr.STATE_NO_ANSWER,Nr.START_PASSWORD,Nr.STATE_WRONG_PASSWORD],od=[Nr.START_DOORBELL,Nr.STATE_WAITING,Nr.STATE_NO_ANSWER],ld=(Nr.START_PASSWORD,Nr.STATE_WRONG_PASSWORD,e=>{const[t,s]=Object(c.useState)(\"\"),{doorData:n=null,setDoorData:r=null}=cd(),i=()=>{n&&n.state===Nr.STATE_WAITING&&ae(),r(null)};if(Object(c.useEffect)((()=>{n&&n.state===Nr.STATE_NO_ANSWER&&ae()}),[n]),!n||n.state===Nr.NONE||-1===ad.indexOf(n.state))return null;const a=od.indexOf(n.state)>=0;return Object(Kr.jsxs)(Ec,{className:\"nitro-navigator-doorbell\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(a?\"navigator.doorbell.title\":\"navigator.password.title\"),onCloseClick:i}),Object(Kr.jsxs)(uc,{className:\"px-3 pb-4\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{small:!0,bold:!0,children:n&&n.roomInfo&&n.roomInfo.roomName}),n.state===Nr.START_DOORBELL&&Object(Kr.jsx)(ei,{small:!0,children:nt(\"navigator.doorbell.info\")}),n.state===Nr.STATE_WAITING&&Object(Kr.jsx)(ei,{small:!0,children:nt(\"navigator.doorbell.waiting\")}),n.state===Nr.STATE_NO_ANSWER&&Object(Kr.jsx)(ei,{small:!0,children:nt(\"navigator.doorbell.no.answer\")}),n.state===Nr.START_PASSWORD&&Object(Kr.jsx)(ei,{small:!0,children:nt(\"navigator.password.info\")}),n.state===Nr.STATE_WRONG_PASSWORD&&Object(Kr.jsx)(ei,{small:!0,children:nt(\"navigator.password.retryinfo\")})]}),a&&Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,className:\"align-items-end mt-auto pt-3\",children:[Object(Kr.jsx)(ei,{small:!0,className:\"cursor-pointer\",underline:!0,onClick:i,children:nt(\"generic.cancel\")}),n.state===Nr.START_DOORBELL&&Object(Kr.jsx)(tc,{className:\"ms-auto\",onClick:()=>{n&&n.roomInfo&&(X(n.roomInfo.roomId),r((e=>{const t={...e};return t.state=Nr.STATE_PENDING_SERVER,t})))},children:nt(\"navigator.doorbell.button.ring\")})]}),!a&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{className:\"pt-3 align-items-center\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,fullWidth:!0,children:nt(\"navigator.password.enter\")}),Object(Kr.jsx)(\"input\",{type:\"password\",className:\"form-control form-control-sm\",onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,className:\"align-items-end mt-auto pt-3\",children:[Object(Kr.jsx)(ei,{small:!0,className:\"cursor-pointer\",underline:!0,onClick:i,children:nt(\"generic.cancel\")}),Object(Kr.jsx)(tc,{className:\"ms-auto\",onClick:()=>{n&&n.roomInfo&&(X(n.roomInfo.roomId,t),r((e=>{const t={...e};return t.state=Nr.STATE_PENDING_SERVER,t})))},children:nt(\"navigator.password.button.try\")})]})]})]})]})}),ud=e=>{const{itemImage:t,itemColor:s,itemActive:n=!1,itemCount:r=1,itemCountMinimum:i=1,itemUniqueSoldout:a=!1,itemUniqueNumber:o=-2,itemUnseen:l=!1,itemHighlight:u=!1,disabled:d=!1,center:h=!0,column:j=!0,style:b={},classNames:g=[],position:O=\"relative\",overflow:m=\"hidden\",children:p=null,..._}=e,E=Object(c.useMemo)((()=>{const e=[\"room-creator-grid-item\"];return n&&e.push(\"active\"),(a||o>0)&&e.push(\"unique-item\"),a&&e.push(\"sold-out\"),l&&e.push(\"unseen\"),u&&e.push(\"has-highlight\"),d&&e.push(\"disabled\"),null===t&&e.push(\"icon\",\"loading-icon\"),g.length&&e.push(...g),e}),[n,a,o,l,u,d,t,g]),f=Object(c.useMemo)((()=>{let e={...b};return t&&(e.backgroundImage=`url(${t})`),s&&(e.backgroundColor=s),Object.keys(b).length&&(e={...e,...b}),e}),[b,t,s]);return Object(Kr.jsxs)(vc,{center:h,pointer:!0,position:O,overflow:m,column:j,classNames:E,style:f,..._,children:[r>i&&Object(Kr.jsx)(Rc,{count:r}),o>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{fit:!0,className:\"unique-bg-override\",style:{backgroundImage:`url(${t})`}}),Object(Kr.jsx)(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:Object(Kr.jsx)(Ac,{value:o})})]}),p]})},dd=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(0),[g,O]=Object(c.useState)([]),[m,p]=Object(c.useState)(\"\"),{categories:_=null}=cd(),E=k(\"hc.disabled\",!1),f=e=>k(\"images.url\")+`/navigator/models/model_${e}.png`;return Object(c.useEffect)((()=>{if(!t){const e=[];for(let t=10;t<=100;t+=10)e.push(t);s(e),h(e[0])}}),[t]),Object(c.useEffect)((()=>{_&&_.length&&u(_[0].id)}),[_]),Object(c.useEffect)((()=>{const e=k(\"navigator.room.models\");e&&e.length&&(O(e),p(e[0].name))}),[]),Object(Kr.jsxs)(Ec,{className:\"nitro-room-creator\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.createroom.title\"),onCloseClick:e=>y(\"navigator/close-creator\")}),Object(Kr.jsx)(uc,{children:Object(Kr.jsx)(vc,{overflow:\"hidden\",children:Object(Kr.jsxs)(Jr,{overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{size:5,gap:1,overflow:\"auto\",className:\"px-2 py-1\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"navigator.createroom.roomnameinfo\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"room-creator-form\",maxLength:60,onChange:e=>r(e.target.value),placeholder:nt(\"navigator.createroom.roomnameinfo\")})]}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"navigator.createroom.roomdescinfo\")}),Object(Kr.jsx)(\"textarea\",{className:\"flex-grow-1 room-creator-form\",maxLength:255,onChange:e=>o(e.target.value),placeholder:nt(\"navigator.createroom.roomdescinfo\")})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"navigator.category\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",onChange:e=>u(Number(e.target.value)),children:_&&_.length>0&&_.map((e=>Object(Kr.jsx)(\"option\",{value:e.id,children:nt(e.name)},e.id)))})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"navigator.maxvisitors\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",onChange:e=>h(Number(e.target.value)),children:t&&t.map((e=>Object(Kr.jsx)(\"option\",{value:e,children:e},e)))})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"navigator.tradesettings\")}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",onChange:e=>b(Number(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:nt(\"navigator.roomsettings.trade_not_allowed\")}),Object(Kr.jsx)(\"option\",{value:\"1\",children:nt(\"navigator.roomsettings.trade_not_with_Controller\")}),Object(Kr.jsx)(\"option\",{value:\"2\",children:nt(\"navigator.roomsettings.trade_allowed\")})]})]}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(tc,{fullWidth:!0,className:\"volter-bold-button\",onClick:()=>{$n(new a.fg(n,i,\"model_\"+m,Number(l),Number(d),j))},disabled:!n||n.length<3,children:nt(\"navigator.createroom.create\")}),Object(Kr.jsx)(tc,{fullWidth:!0,className:\"volter-button\",onClick:e=>y(\"navigator/close-creator\"),children:nt(\"cancel\")})]})]}),Object(Kr.jsx)(vc,{size:7,gap:1,overflow:\"auto\",children:Object(Kr.jsx)(Zr,{className:\"room-creator-grid\",columnCount:2,columnMinWidth:100,columnMinHeight:50,overflow:\"unset\",children:g.map(((e,t)=>Object(Kr.jsxs)(ud,{fullHeight:!0,onClick:()=>((e,t)=>{!e||e.clubLevel>te()||p(g[t].name)})(e,t),itemActive:m===e.name,overflow:\"unset\",gap:0,className:\"py-3\",disabled:te()<e.clubLevel,children:[Object(Kr.jsx)(ec,{fullHeight:!0,center:!0,overflow:\"hidden\",children:Object(Kr.jsx)(\"img\",{alt:\"\",src:f(e.name)})}),Object(Kr.jsxs)(ei,{position:\"absolute\",className:\"bottom-1 start-1\",children:[e.tileSize,\" \",nt(\"navigator.createroom.tilesize\")]}),!E&&e.clubLevel>a.Ed.NO_CLUB&&Object(Kr.jsx)(Tc,{position:\"absolute\",className:\"top-1 end-1\",type:\"hc\"}),m&&Object(Kr.jsx)(\"i\",{className:\"active-arrow\"})]},e.name)))})})]})})})]})};const hd=e=>{const{onCloseClick:t=null}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!1),{navigatorData:o=null}=cd(),l=e=>{switch(e){case\"settings\":return ee().userId===o.enteredGuestRoom.ownerId||ee().isModerator;case\"staff_pick\":return ee().securityLevel>=a.Hh.COMMUNITY;default:return!1}},u=(e,s)=>{if(o&&o.enteredGuestRoom)switch(e){case\"set_home_room\":let e=-1;return o.homeRoomId!==o.enteredGuestRoom.roomId&&(e=o.enteredGuestRoom.roomId),void(e>0&&$n(new a.Ei(e)));case\"navigator_search_tag\":return;case\"open_room_thumbnail_camera\":return void Vt(new kt(kt.TOGGLE_THUMBNAIL));case\"open_group_info\":return void Er(o.enteredGuestRoom.habboGroupId);case\"toggle_room_link\":return void y(\"navigator/toggle-room-link\");case\"open_room_settings\":return void $n(new a.ih(o.enteredGuestRoom.roomId));case\"toggle_pick\":return n((e=>!e)),void $n(new a.mh(o.enteredGuestRoom.roomId));case\"toggle_mute\":return i((e=>!e)),void $n(new a.Hg);case\"open_floorplan_editor\":return void y(\"floor-editor/toggle\");case\"close\":return void t()}};return Object(c.useEffect)((()=>{o&&(n(o.currentRoomIsStaffPick),o.enteredGuestRoom&&i(o.enteredGuestRoom.allInRoomMuted))}),[o]),o.enteredGuestRoom?Object(Kr.jsxs)(Ec,{className:\"nitro-room-info\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.roomsettings.roominfo\"),onCloseClick:()=>u(\"close\")}),Object(Kr.jsx)(uc,{className:\"text-black\",children:o.enteredGuestRoom&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ec,{gap:2,overflow:\"hidden\",children:Object(Kr.jsxs)(vc,{grow:!0,gap:1,overflow:\"hidden\",children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ec,{gap:1,children:Object(Kr.jsx)(ei,{small:!0,bold:!0,children:o.enteredGuestRoom.roomName})}),o.enteredGuestRoom.showOwner&&Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,variant:\"muted\",children:nt(\"navigator.roomownercaption\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:o.enteredGuestRoom.ownerId}),Object(Kr.jsx)(ei,{small:!0,children:o.enteredGuestRoom.ownerName})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,variant:\"muted\",children:nt(\"navigator.roomrating\")}),Object(Kr.jsx)(ei,{small:!0,children:o.currentRoomRating})]}),o.enteredGuestRoom.tags.length>0&&Object(Kr.jsx)(ec,{alignItems:\"center\",gap:1,children:o.enteredGuestRoom.tags.map((e=>Object(Kr.jsxs)(ei,{pointer:!0,className:\"bg-muted rounded p-1\",onClick:e=>u(\"navigator_search_tag\"),children:[\"#\",e]},e)))})]}),Object(Kr.jsx)(vc,{alignItems:\"center\",gap:1,children:Object(Kr.jsx)(\"i\",{onClick:()=>u(\"set_home_room\"),className:\"flex-shrink-0 icon icon-house-small cursor-pointer\"+Zi()({\" gray\":o.homeRoomId!==o.enteredGuestRoom.roomId})})})]}),Object(Kr.jsx)(ei,{small:!0,overflow:\"auto\",style:{maxHeight:50},children:o.enteredGuestRoom.description}),Object(Kr.jsx)(ec,{justifyContent:\"center\",children:Object(Kr.jsx)(zc,{roomId:o.enteredGuestRoom.roomId,customUrl:o.enteredGuestRoom.officialRoomPicRef,children:l(\"settings\")&&Object(Kr.jsx)(\"i\",{className:\"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0\",onClick:()=>u(\"open_room_thumbnail_camera\")})})}),o.enteredGuestRoom.habboGroupId>0&&Object(Kr.jsxs)(ec,{pointer:!0,alignItems:\"center\",gap:2,onClick:()=>u(\"open_group_info\"),children:[Object(Kr.jsx)(Ic,{className:\"flex-none\",badgeCode:o.enteredGuestRoom.groupBadgeCode,isGroup:!0}),Object(Kr.jsx)(ei,{small:!0,underline:!0,children:nt(\"navigator.guildbase\",[\"groupName\"],[o.enteredGuestRoom.groupName])})]}),Object(Kr.jsxs)(ec,{gap:1,className:\"w-100 room-tool-item\",onClick:()=>u(\"toggle_room_link\"),children:[Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.like.button.text\"),className:\"icon-width icon icon-link-room float-start\"}),Object(Kr.jsx)(ei,{underline:!0,small:!0,children:nt(\"navigator.embed.caption\")})]})]})}),Object(Kr.jsxs)(vc,{gap:1,children:[l(\"staff_pick\")&&Object(Kr.jsx)(tc,{onClick:()=>u(\"toggle_pick\"),children:nt(s?\"navigator.staffpicks.unpick\":\"navigator.staffpicks.pick\")}),Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!0,children:nt(\"help.emergency.main.report.room\")}),l(\"settings\")&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(tc,{onClick:()=>u(\"open_room_settings\"),children:nt(\"navigator.room.popup.info.room.settings\")}),Object(Kr.jsx)(tc,{onClick:()=>u(\"toggle_mute\"),children:nt(r?\"navigator.muteall_on\":\"navigator.muteall_off\")}),Object(Kr.jsx)(tc,{onClick:()=>u(\"open_floorplan_editor\"),children:nt(\"open.floor.plan.editor\")})]})]})]})})]}):null};const jd=e=>{const{onCloseClick:t=null}=e,{navigatorData:s=null}=cd();return s.enteredGuestRoom?Object(Kr.jsxs)(Ec,{className:\"nitro-room-link\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.embed.title\"),onCloseClick:t}),Object(Kr.jsx)(uc,{className:\"text-black d-flex align-items-center\",children:Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(zc,{roomId:s.enteredGuestRoom.roomId,customUrl:s.enteredGuestRoom.officialRoomPicRef}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:5,children:nt(\"navigator.embed.headline\")}),Object(Kr.jsx)(ei,{children:nt(\"navigator.embed.info\")}),Object(Kr.jsxs)(ei,{children:[\" \",nt(\"navigator.embed.direct.info\")]}),Object(Kr.jsx)(\"input\",{type:\"text\",readOnly:!0,className:\"form-control form-control-sm\",value:nt(\"navigator.embed.src\",[\"roomId\"],[s.enteredGuestRoom.roomId.toString()])})]})]})})]}):null},bd=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(\"\"),[i,o]=Object(c.useState)(\"\"),[l,u]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{r(\"\"),o(\"\"),u(!1)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.roomaccess.caption\")}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.roomaccess.info\")})]}),Object(Kr.jsxs)(vc,{overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.doormode\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:t.lockState===a.hg.OPEN_STATE&&!l,onChange:e=>s(\"lock_state\",a.hg.OPEN_STATE)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.doormode.open\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:t.lockState===a.hg.DOORBELL_STATE&&!l,onChange:e=>s(\"lock_state\",a.hg.DOORBELL_STATE)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.doormode.doorbell\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:t.lockState===a.hg.INVISIBLE_STATE&&!l,onChange:e=>s(\"lock_state\",a.hg.INVISIBLE_STATE)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.doormode.invisible\")})]}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:t.lockState===a.hg.PASSWORD_STATE||l,onChange:e=>u(e.target.checked)}),!l&&t.lockState!==a.hg.PASSWORD_STATE&&Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.doormode.password\")}),(l||t.lockState===a.hg.PASSWORD_STATE)&&Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.doormode.password\")}),Object(Kr.jsx)(\"input\",{type:\"password\",className:\"form-control form-control-sm col-4\",value:n,onChange:e=>r(e.target.value),placeholder:nt(\"navigator.roomsettings.password\"),onFocus:e=>u(!0)}),l&&n.length<=0&&Object(Kr.jsx)(ei,{bold:!0,small:!0,variant:\"danger\",children:nt(\"navigator.roomsettings.passwordismandatory\")}),Object(Kr.jsx)(\"input\",{type:\"password\",className:\"form-control form-control-sm col-4\",value:i,onChange:e=>o(e.target.value),onBlur:()=>{!l||n.length<=0||i.length<=0||n!==i||s(\"password\",n)},placeholder:nt(\"navigator.roomsettings.passwordconfirm\")}),l&&n.length>0&&n!==i&&Object(Kr.jsx)(ei,{bold:!0,small:!0,variant:\"danger\",children:nt(\"navigator.roomsettings.invalidconfirm\")})]})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.pets\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:t.allowPets,onChange:e=>s(\"allow_pets\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.allowpets\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:t.allowPetsEat,onChange:e=>s(\"allow_pets_eat\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.allowfoodconsume\")})]})]})]})]})},gd=e=>{const{roomData:t=null,handleChange:s=null,close:n=null}=e,[r,i]=Object(c.useState)(\"\"),[o,l]=Object(c.useState)(\"\"),{categories:u=null}=cd();return Object(c.useEffect)((()=>{i(t.roomName),l(t.roomDescription)}),[t]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"navigator.roomname\")}),Object(Kr.jsxs)(vc,{fullWidth:!0,gap:0,children:[Object(Kr.jsx)(\"input\",{className:\"form-control form-control-sm\",value:r,maxLength:60,onChange:e=>i(e.target.value),onBlur:()=>{r===t.roomName||r.length<3||r.length>60||s(\"name\",r)}}),r.length<3&&Object(Kr.jsx)(ei,{bold:!0,small:!0,variant:\"danger\",children:nt(\"navigator.roomsettings.roomnameismandatory\")})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"navigator.roomsettings.desc\")}),Object(Kr.jsx)(\"textarea\",{className:\"form-control form-control-sm\",value:o,maxLength:255,onChange:e=>l(e.target.value),onBlur:()=>{o===t.roomDescription||o.length>255||s(\"description\",o)}})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"navigator.category\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:t.categoryId,onChange:e=>s(\"category\",e.target.value),children:u&&u.map((e=>Object(Kr.jsx)(\"option\",{value:e.id,children:nt(e.name)},e.id)))})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"navigator.maxvisitors\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:t.userCount,onChange:e=>s(\"max_visitors\",e.target.value),children:vr&&vr.map((e=>Object(Kr.jsx)(\"option\",{value:e,children:e},e)))})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{className:\"col-3\",children:nt(\"navigator.tradesettings\")}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.tradeState,onChange:e=>s(\"trade_state\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:nt(\"navigator.roomsettings.trade_not_allowed\")}),Object(Kr.jsx)(\"option\",{value:\"1\",children:nt(\"navigator.roomsettings.trade_not_with_Controller\")}),Object(Kr.jsx)(\"option\",{value:\"2\",children:nt(\"navigator.roomsettings.trade_allowed\")})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qr,{className:\"col-3\"}),Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:t.allowWalkthrough,onChange:e=>s(\"allow_walkthrough\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.allow_walk_through\")})]}),Object(Kr.jsxs)(ei,{variant:\"danger\",underline:!0,bold:!0,pointer:!0,className:\"d-flex justify-content-center align-items-center gap-1\",onClick:()=>{Pr.confirm(nt(\"navigator.roomsettings.deleteroom.confirm.message\",[\"room_name\"],[t.roomName]),(()=>{$n(new a.ig(t.roomId)),n&&n(),y(\"navigator/search/myworld_view\")}),null,null,null,nt(\"navigator.roomsettings.deleteroom.confirm.title\"))},children:[Object(Kr.jsx)(ac.a,{icon:\"times\"}),nt(\"navigator.roomsettings.delete\")]})]})},Od=e=>{var t;const{roomData:s=null,handleChange:n=null}=e,[r,i]=Object(c.useState)(-1),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((e=>{const t=e.getParser();s&&s.roomId===t.roomId&&l(t.bannedUsers)}),[s]);it(a.w,u);const d=Object(c.useCallback)((e=>{l((t=>{const s=[...t],n=s.findIndex((t=>t.userId===e));return n>=0&&s.splice(n,1),s})),$n(new a.ph(e,s.roomId)),i(-1)}),[s]);return Object(c.useEffect)((()=>{$n(new a.Yf(s.roomId))}),[s.roomId]),Object(Kr.jsxs)(Jr,{overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{size:6,children:[Object(Kr.jsxs)(ei,{bold:!0,children:[nt(\"navigator.roomsettings.moderation.banned.users\"),\" (\",o.length,\")\"]}),Object(Kr.jsx)(ec,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:Object(Kr.jsx)(vc,{fullWidth:!0,overflow:\"auto\",gap:1,children:o&&o.length>0&&o.map(((e,t)=>Object(Kr.jsxs)(ec,{shrink:!0,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(Qc,{userName:e.userName}),Object(Kr.jsxs)(ei,{pointer:!0,grow:!0,onClick:t=>i(e.userId),children:[\" \",e.userName]})]},t)))})}),Object(Kr.jsxs)(tc,{disabled:r<=0,onClick:e=>d(r),children:[nt(\"navigator.roomsettings.moderation.unban\"),\" \",r>0&&(null===(t=o.find((e=>e.userId===r)))||void 0===t?void 0:t.userName)]})]}),Object(Kr.jsxs)(vc,{size:6,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.moderation.mute.header\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:1===s.moderationSettings.allowMute,onChange:e=>n(\"moderation_mute\",e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.moderation.rights\")})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.moderation.kick.header\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:0===s.moderationSettings.allowKick,onChange:e=>n(\"moderation_kick\",e.target.checked?0:2)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.moderation.all\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:1===s.moderationSettings.allowKick||0===s.moderationSettings.allowKick,disabled:0===s.moderationSettings.allowKick,onChange:e=>n(\"moderation_kick\",e.target.checked?1:2)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.moderation.rights\")})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.moderation.ban.header\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:1===s.moderationSettings.allowBan,onChange:e=>n(\"moderation_ban\",e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.moderation.rights\")})]})]})]})]})},md=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(new Map),r=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n(s.users)}),[t]);it(a.Db,r);const i=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.set(s.data.userId,s.data.userName),t}))}),[t]);it(a.Bb,i);const o=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.roomId===s.roomId&&n((e=>{const t=new Map(e);return t.delete(s.userId),t}))}),[t]);return it(a.Cb,o),Object(c.useEffect)((()=>{$n(new a.uh(t.roomId))}),[t.roomId]),Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsxs)(vc,{size:6,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.flatctrls.userswithrights\",[\"displayed\",\"total\"],[s.size.toString(),s.size.toString()])}),Object(Kr.jsx)(ec,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:Object(Kr.jsx)(vc,{fullWidth:!0,overflow:\"auto\",gap:1,children:Array.from(s.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsxs)(ec,{shrink:!0,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[Object(Kr.jsx)(Qc,{userName:n}),Object(Kr.jsxs)(ei,{pointer:!0,grow:!0,onClick:e=>$n(new a.nh(s)),children:[\" \",n]})]},t)}))})})]}),Object(Kr.jsx)(vc,{size:6,justifyContent:\"end\",children:Object(Kr.jsx)(tc,{variant:\"danger\",disabled:!s.size,onClick:e=>$n(new a.Of(t.roomId)),children:nt(\"navigator.flatctrls.clear\")})})]})},pd=e=>{const{roomData:t=null,handleChange:s=null}=e,[n,r]=Object(c.useState)(0);return Object(c.useEffect)((()=>{r(t.chatSettings.distance)}),[t.chatSettings]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.vip.caption\")}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.vip.info\")})]}),Object(Kr.jsxs)(Jr,{overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{size:6,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.chat_settings\")}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.chat_settings.info\")}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.chatSettings.mode,onChange:e=>s(\"bubble_mode\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_MODE_FREE_FLOW,children:nt(\"navigator.roomsettings.chat.mode.free.flow\")}),Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_MODE_LINE_BY_LINE,children:nt(\"navigator.roomsettings.chat.mode.line.by.line\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.chatSettings.weight,onChange:e=>s(\"chat_weight\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_BUBBLE_WIDTH_NORMAL,children:nt(\"navigator.roomsettings.chat.bubbles.width.normal\")}),Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_BUBBLE_WIDTH_THIN,children:nt(\"navigator.roomsettings.chat.bubbles.width.thin\")}),Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_BUBBLE_WIDTH_WIDE,children:nt(\"navigator.roomsettings.chat.bubbles.width.wide\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.chatSettings.speed,onChange:e=>s(\"bubble_speed\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_SCROLL_SPEED_FAST,children:nt(\"navigator.roomsettings.chat.speed.fast\")}),Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_SCROLL_SPEED_NORMAL,children:nt(\"navigator.roomsettings.chat.speed.normal\")}),Object(Kr.jsx)(\"option\",{value:a.bg.CHAT_SCROLL_SPEED_SLOW,children:nt(\"navigator.roomsettings.chat.speed.slow\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.chatSettings.protection,onChange:e=>s(\"flood_protection\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:a.bg.FLOOD_FILTER_LOOSE,children:nt(\"navigator.roomsettings.chat.flood.loose\")}),Object(Kr.jsx)(\"option\",{value:a.bg.FLOOD_FILTER_NORMAL,children:nt(\"navigator.roomsettings.chat.flood.normal\")}),Object(Kr.jsx)(\"option\",{value:a.bg.FLOOD_FILTER_STRICT,children:nt(\"navigator.roomsettings.chat.flood.strict\")})]}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.chat_settings.hearing.distance\")}),Object(Kr.jsx)(\"input\",{type:\"number\",min:\"0\",className:\"form-control form-control-sm\",value:n,onChange:e=>r(e.target.valueAsNumber),onBlur:e=>s(\"chat_distance\",n)})]}),Object(Kr.jsxs)(vc,{size:6,gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roomsettings.vip_settings\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:t.hideWalls,onChange:e=>s(\"hide_walls\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"navigator.roomsettings.hide_walls\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.wallThickness,onChange:e=>s(\"wall_thickness\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:nt(\"navigator.roomsettings.wall_thickness.normal\")}),Object(Kr.jsx)(\"option\",{value:\"1\",children:nt(\"navigator.roomsettings.wall_thickness.thick\")}),Object(Kr.jsx)(\"option\",{value:\"-1\",children:nt(\"navigator.roomsettings.wall_thickness.thin\")}),Object(Kr.jsx)(\"option\",{value:\"-2\",children:nt(\"navigator.roomsettings.wall_thickness.thinnest\")})]}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:t.floorThickness,onChange:e=>s(\"floor_thickness\",e.target.value),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:nt(\"navigator.roomsettings.floor_thickness.normal\")}),Object(Kr.jsx)(\"option\",{value:\"1\",children:nt(\"navigator.roomsettings.floor_thickness.thick\")}),Object(Kr.jsx)(\"option\",{value:\"-1\",children:nt(\"navigator.roomsettings.floor_thickness.thin\")}),Object(Kr.jsx)(\"option\",{value:\"-2\",children:nt(\"navigator.roomsettings.floor_thickness.thinnest\")})]})]})]})]})},_d=[\"navigator.roomsettings.tab.1\",\"navigator.roomsettings.tab.2\",\"navigator.roomsettings.tab.3\",\"navigator.roomsettings.tab.4\",\"navigator.roomsettings.tab.5\"],Ed=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(_d[0]),i=Object(c.useCallback)((e=>{const t=e.getParser();t&&(s({roomId:t.roomId,roomName:t.name,roomDescription:t.description,categoryId:t.categoryId,userCount:t.userCount,tags:t.tags,tradeState:t.tradeMode,allowWalkthrough:t.allowWalkthrough,lockState:t.state,password:null,allowPets:t.allowPets,allowPetsEat:t.allowPetsEat,hideWalls:t.hideWalls,wallThickness:t.thicknessWall,floorThickness:t.thicknessFloor,chatSettings:{mode:t.chatSettings.mode,weight:t.chatSettings.weight,speed:t.chatSettings.speed,distance:t.chatSettings.distance,protection:t.chatSettings.protection},moderationSettings:{allowMute:t.moderationSettings.allowMute,allowKick:t.moderationSettings.allowKick,allowBan:t.moderationSettings.allowBan}}),$n(new a.Yf(t.roomId)))}),[]);it(a.jh,i);const o=()=>{s(null),r(_d[0])},l=(e,t)=>{s((s=>{const n={...s};switch(e){case\"name\":n.roomName=String(t);break;case\"description\":n.roomDescription=String(t);break;case\"category\":n.categoryId=Number(t);break;case\"max_visitors\":n.userCount=Number(t);break;case\"trade_state\":n.tradeState=Number(t);break;case\"allow_walkthrough\":n.allowWalkthrough=Boolean(t);break;case\"allow_pets\":n.allowPets=Boolean(t);break;case\"allow_pets_eat\":n.allowPetsEat=Boolean(t);break;case\"hide_walls\":n.hideWalls=Boolean(t);break;case\"wall_thickness\":n.wallThickness=Number(t);break;case\"floor_thickness\":n.floorThickness=Number(t);break;case\"lock_state\":n.lockState=Number(t);break;case\"password\":n.lockState=a.hg.PASSWORD_STATE,n.password=String(t);break;case\"moderation_mute\":n.moderationSettings.allowMute=Number(t);break;case\"moderation_kick\":n.moderationSettings.allowKick=Number(t);break;case\"moderation_ban\":n.moderationSettings.allowBan=Number(t);break;case\"bubble_mode\":n.chatSettings.mode=Number(t);break;case\"chat_weight\":n.chatSettings.weight=Number(t);break;case\"bubble_speed\":n.chatSettings.speed=Number(t);break;case\"flood_protection\":n.chatSettings.protection=Number(t);break;case\"chat_distance\":n.chatSettings.distance=Number(t)}return $n(new a.Dh(n.roomId,n.roomName,n.roomDescription,n.lockState,n.password,n.userCount,n.categoryId,n.tags.length,n.tags,n.tradeState,n.allowPets,n.allowPetsEat,n.allowWalkthrough,n.hideWalls,n.wallThickness,n.floorThickness,n.moderationSettings.allowMute,n.moderationSettings.allowKick,n.moderationSettings.allowBan,n.chatSettings.mode,n.chatSettings.weight,n.chatSettings.speed,n.chatSettings.distance,n.chatSettings.protection)),n}))};return t?Object(Kr.jsxs)(Ec,{uniqueKey:\"nitro-room-settings\",className:\"nitro-room-settings\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.roomsettings\"),onCloseClick:o}),Object(Kr.jsx)(Xc,{children:_d.map((e=>Object(Kr.jsx)($c,{isActive:n===e,onClick:t=>r(e),children:nt(e)},e)))}),Object(Kr.jsxs)(uc,{children:[n===_d[0]&&Object(Kr.jsx)(gd,{roomData:t,handleChange:l,close:o}),n===_d[1]&&Object(Kr.jsx)(bd,{roomData:t,handleChange:l}),n===_d[2]&&Object(Kr.jsx)(md,{roomData:t,handleChange:l}),n===_d[3]&&Object(Kr.jsx)(pd,{roomData:t,handleChange:l}),n===_d[4]&&Object(Kr.jsx)(Od,{roomData:t,handleChange:l})]})]}):null};var fd=s(90);const xd=e=>{const{roomData:t=null}=e,[s,n]=Object(c.useState)(!1),r=Object(c.useRef)();return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{pointer:!0,innerRef:r,className:\"icon icon-navigator-info\",onMouseOver:e=>n(!0),onMouseLeave:e=>n(!1)}),Object(Kr.jsx)(fd.a,{show:s,target:r.current,placement:\"right\",children:Object(Kr.jsx)(Ul.a,{children:Object(Kr.jsxs)(uc,{overflow:\"hidden\",className:\"room-info bg-transparent\",children:[Object(Kr.jsxs)(ec,{gap:2,overflow:\"hidden\",className:\"room-info-bg p-2\",children:[Object(Kr.jsxs)(zc,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:\"d-flex flex-column align-items-center justify-content-end mb-1\",children:[t.habboGroupId>0&&Object(Kr.jsx)(Ic,{badgeCode:t.groupBadgeCode,isGroup:!0,className:\"position-absolute top-0 start-0 m-1 \"}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)(\"i\",{className:\"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-\"+(t.doorMode===a.hg.DOORBELL_STATE?\"locked\":t.doorMode===a.hg.PASSWORD_STATE?\"password\":t.doorMode===a.hg.INVISIBLE_STATE?\"invisible\":\"\")})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,truncate:!0,className:\"flex-grow-1\",style:{maxHeight:13},children:t.roomName}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ei,{italics:!0,variant:\"muted\",children:nt(\"navigator.roomownercaption\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:t.ownerId}),Object(Kr.jsx)(ei,{italics:!0,children:t.ownerName})]})]}),Object(Kr.jsx)(ei,{className:\"flex-grow-1\",children:t.description})]})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{children:[Object(Kr.jsxs)(ec,{gap:1,className:\"align-items-center\",children:[Object(Kr.jsx)(Qc,{userId:t.ownerId}),Object(Kr.jsx)(ei,{bold:!0,underline:!0,children:t.ownerName})]}),Object(Kr.jsxs)(ec,{gap:1,className:\"align-items-center\",justifyContent:\"end\",fullWidth:!0,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-navigator-room-group\"}),Object(Kr.jsx)(ei,{bold:!0,underline:!0,children:t.groupName})]})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"navigator.roompopup.property.max_users\")}),Object(Kr.jsx)(ei,{children:t.maxUserCount})]})]})]})})})]})},Id=e=>{const{roomData:t=null,children:s=null,thumbnail:n=!1,...r}=e,{setDoorData:c=null}=cd(),i=()=>{const e=t.userCount/t.maxUserCount*100;let s=\"badge-empty\";return e>=92?s=\"badge-danger\":e>=50?s=\"badge-warning\":e>0&&(s=\"badge-success\"),s},o=e=>{if(t.ownerId!==ee().userId){if(0!==t.habboGroupId)return void Ar(t.roomId);switch(t.doorMode){case a.hg.DOORBELL_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=Nr.START_DOORBELL,s}));case a.hg.PASSWORD_STATE:return void c((e=>{const s={...e};return s.roomInfo=t,s.state=Nr.START_PASSWORD,s}))}}X(t.roomId)};return n?Object(Kr.jsxs)(vc,{pointer:!0,overflow:\"hidden\",alignItems:\"center\",onClick:o,gap:0,className:\"nav-thumbnail p-1 rounded-3 small mb-1 flex-column\",...r,children:[Object(Kr.jsxs)(zc,{roomId:t.roomId,customUrl:t.officialRoomPicRef,className:\"d-flex flex-column align-items-center justify-content-end mb-1\",children:[t.habboGroupId>0&&Object(Kr.jsx)(Ic,{badgeCode:t.groupBadgeCode,isGroup:!0,className:\"position-absolute top-0 start-0 m-1\"}),Object(Kr.jsxs)(ec,{center:!0,className:\"badge p-1 position-absolute m-1 \"+i(),gap:1,children:[Object(Kr.jsx)(ac.a,{icon:\"user\"}),t.userCount]}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)(\"i\",{className:\"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-\"+(t.doorMode===a.hg.DOORBELL_STATE?\"locked\":t.doorMode===a.hg.PASSWORD_STATE?\"password\":t.doorMode===a.hg.INVISIBLE_STATE?\"invisible\":\"\")})]}),Object(Kr.jsxs)(ec,{className:\"w-100\",children:[Object(Kr.jsx)(ei,{truncate:!0,className:\"flex-grow-1\",children:t.roomName}),Object(Kr.jsx)(ec,{reverse:!0,alignItems:\"center\",gap:1,children:Object(Kr.jsx)(xd,{roomData:t})}),s]})]}):Object(Kr.jsxs)(ec,{pointer:!0,overflow:\"hidden\",alignItems:\"center\",onClick:o,gap:2,className:\"navigator-item px-2 small\",...r,children:[Object(Kr.jsxs)(ec,{center:!0,className:\"p-1 fw-bold \"+i(),gap:1,children:[Object(Kr.jsx)(\"div\",{className:\"nav-avatar-icon\"}),t.userCount]}),Object(Kr.jsx)(ei,{truncate:!0,grow:!0,children:t.roomName}),Object(Kr.jsxs)(ec,{reverse:!0,alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(xd,{roomData:t}),t.habboGroupId>0&&Object(Kr.jsx)(\"i\",{className:\"icon icon-navigator-room-group\"}),t.doorMode!==a.hg.OPEN_STATE&&Object(Kr.jsx)(\"i\",{className:\"icon icon-navigator-room-\"+(t.doorMode===a.hg.DOORBELL_STATE?\"locked\":t.doorMode===a.hg.PASSWORD_STATE?\"password\":t.doorMode===a.hg.INVISIBLE_STATE?\"invisible\":\"\")})]}),s]})},Td=e=>{const{searchResult:t=null,...s}=e,[n,r]=Object(c.useState)(!0),[i,a]=Object(c.useState)(0);Object(c.useEffect)((()=>{t&&a(t.mode)}),[t,e]);const o=i>=Sr.THUMBNAILS;return Object(Kr.jsxs)(vc,{className:\"bg-white\",gap:0,children:[Object(Kr.jsxs)(ec,{fullWidth:!0,alignItems:\"center\",justifyContent:\"between\",className:\"px-2 py-1\",children:[Object(Kr.jsxs)(ec,{grow:!0,pointer:!0,alignItems:\"center\",gap:1,onClick:e=>r((e=>!e)),children:[Object(Kr.jsx)(\"i\",{className:n?\"icon icon-nav-minus\":\"icon icon-nav-plus\"}),Object(Kr.jsxs)(\"div\",{className:\"nav-category\",children:[\" \",nt((()=>{let e=t.code;return e&&e.length?e.startsWith(\"${\")?e.slice(2,e.length-1):\"navigator.searchcode.title.\"+e:t.data})())]})]}),Object(Kr.jsx)(\"i\",{className:i===Sr.LIST?\"icon icon-nav-thumbnail\":i>=Sr.THUMBNAILS?\"icon icon-nav-inline\":null,onClick:()=>{a((e=>e===Sr.LIST?Sr.THUMBNAILS:Sr.LIST))}})]}),\" \",n&&Object(Kr.jsx)(Kr.Fragment,{children:o?Object(Kr.jsx)(Zr,{columnCount:3,...s,columnMinWidth:110,columnMinHeight:130,className:\"mx-2\",children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Kr.jsx)(Id,{roomData:e,thumbnail:!0},t)))}):Object(Kr.jsx)(Jr,{columnCount:1,className:\"navigator-grid\",gap:0,children:t.rooms.length>0&&t.rooms.map(((e,t)=>Object(Kr.jsx)(Id,{roomData:e},t)))})})]})},Cd=e=>{const{sendSearch:t=null}=e,[s,n]=Object(c.useState)(0),[r,i]=Object(c.useState)(\"\"),{topLevelContext:a=null,searchResult:o=null}=cd(),l=()=>{if(!a)return;let e=Rr[s];e||(e=Rr[0]);const n=(e.query?e.query+\":\":\"\")+r;t(n||\"\",a.code)};return Object(c.useEffect)((()=>{if(!o)return;const e=o.data.split(\":\");let t=null,s=\"\";if(e.length>=2){const[n,...r]=e;t=Rr.find((e=>e.query===n)),s=r.join(\":\")}else s=o.data;t||(t=Rr[0]),n(Rr.findIndex((e=>e===t))),i(s)}),[o]),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(ec,{shrink:!0,children:Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:s,onChange:e=>n(parseInt(e.target.value)),children:Rr.map(((e,t)=>Object(Kr.jsx)(\"option\",{value:t,children:nt(\"navigator.filter.\"+e.name)},t)))})}),Object(Kr.jsxs)(ec,{fullWidth:!0,gap:2,children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"navigator.filter.input.placeholder\"),value:r,onChange:e=>i(e.target.value),onKeyDown:e=>(e=>{\"Enter\"===e.key&&l()})(e)}),Object(Kr.jsx)(\"i\",{className:\"icon icon-pen navigator-search-button position-absolute\",onClick:l})]})]})},Nd=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!0),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),[f,x]=Object(c.useState)(null),[I,T]=Object(c.useState)(null),[C,S]=_s(),[v,R]=Object(c.useState)({roomInfo:null,state:Nr.NONE}),[A,y]=Object(c.useState)(null),w=Object(c.useRef)(null),k=Object(c.useCallback)((e=>{if(e.type===a.Yg.CREATED)return s(!1),void o(!1)}),[]);Gt(a.Yg.CREATED,k);const D=Object(c.useCallback)(((e,t)=>{$n(new a.Je(t,e)),b(!0)}),[]),U=Object(c.useCallback)((()=>{if(n)return w.current?(D(w.current.value,w.current.code),void(w.current=null)):void(A?D(A.data,A.code):f&&D(\"\",f.code));p(!0)}),[n,A,f,D]),P=Object(c.useCallback)((e=>{const n=e.split(\"/\");if(!(n.length<2))switch(n[1]){case\"show\":return s(!0),void p(!0);case\"hide\":return void s(!1);case\"toggle\":return t?void s(!1):(s(!0),void p(!0));case\"toggle-room-info\":return void u((e=>!e));case\"toggle-room-link\":return void h((e=>!e));case\"goto\":if(n.length<=2)return;if(\"home\"===n[2]){if(C.homeRoomId<=0)return;Ar(C.homeRoomId)}else{Ar(parseInt(n[2]))}return;case\"create\":return void o((e=>!e));case\"close-creator\":return void o(!1);case\"search\":if(n.length>2){const e=n[2];let t=\"\";n.length>3&&(t=n[3]),w.current={value:t,code:e},s(!0),p(!0)}return}}),[t,C]);return Object(c.useEffect)((()=>{const e={linkReceived:P,eventUrlPrefix:\"navigator/\"};return N(e),()=>M(e)}),[P]),Object(c.useEffect)((()=>{A&&b(!1)}),[A]),Object(c.useEffect)((()=>{t&&n&&m&&(U(),p(!1))}),[t,n,m,U]),Object(c.useEffect)((()=>{!n&&f&&r(!0)}),[n,f]),Object(c.useEffect)((()=>{t&&g&&($n(new a.Ge),O(!1))}),[t,g]),Object(c.useEffect)((()=>{a.Wd.addCallback(a.Jd.OPENROOM,(function(e){return $n(new a.pb(e))}))}),[]),Object(Kr.jsxs)(rd,{value:{categories:_,setCategories:E,topLevelContext:f,setTopLevelContext:x,topLevelContexts:I,setTopLevelContexts:T,navigatorData:C,setNavigatorData:S,doorData:v,setDoorData:R,searchResult:A,setSearchResult:y},children:[Object(Kr.jsx)(id,{}),t&&Object(Kr.jsxs)(Ec,{uniqueKey:\"navigator\",className:\"nitro-navigator\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.title\"),onCloseClick:e=>s(!1)}),Object(Kr.jsx)(Xc,{children:I&&I.length>0&&I.map(((e,t)=>Object(Kr.jsx)($c,{isActive:f===e,onClick:t=>D(\"\",e.code),children:nt(\"navigator.toplevelview.\"+e.code)},t)))}),Object(Kr.jsxs)(uc,{position:\"relative\",children:[j&&Object(Kr.jsx)(Qr,{fit:!0,position:\"absolute\",className:\"top-0 start-0 z-index-1 bg-muted opacity-0-5\"}),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Cd,{sendSearch:D}),Object(Kr.jsx)(vc,{overflow:\"auto\",children:A&&A.results.map(((e,t)=>Object(Kr.jsx)(Td,{searchResult:e},t)))})]}),Object(Kr.jsx)(ec,{className:\"nav-bottom\",children:Object(Kr.jsxs)(ec,{className:\"nav-bottom-buttons position-absolute\",children:[Object(Kr.jsx)(ec,{className:\"nav-create-room\",onClick:e=>o((e=>!e)),children:Object(Kr.jsx)(ei,{variant:\"white\",bold:!0,className:\"nav-bottom-buttons-text\",children:nt(\"navigator.createroom.create\")})}),Object(Kr.jsx)(ec,{className:\"nav-random-room\",children:Object(Kr.jsx)(ei,{variant:\"white\",bold:!0,className:\"nav-bottom-buttons-text\",children:nt(\"navigator.random.room\")})})]})})]})]}),i&&Object(Kr.jsx)(dd,{}),Object(Kr.jsx)(ld,{}),l&&Object(Kr.jsx)(hd,{onCloseClick:()=>u(!1)}),d&&Object(Kr.jsx)(jd,{onCloseClick:()=>h(!1)}),Object(Kr.jsx)(Ed,{})]})},Sd=/\\n\\r|\\n|\\r/gm,vd=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(\"\"),[i,o]=Object(c.useState)(null),l=Object(c.useRef)(null),u=Object(c.useCallback)((async e=>{try{const t=await fetch(e);if(!t)return;const n=(await t.text()).split(Sd),c=n.shift().split(\"|\");r(c[0]),o((e=>c[1]&&2===c[1].split(\";\").length?{width:parseInt(c[1].split(\";\")[0]),height:parseInt(c[1].split(\";\")[1])}:null)),s(n.join(\"\"))}catch(t){a.We.error(`Failed to fetch ${e}`)}}),[]),d=Object(c.useCallback)((e=>{const t=e.split(\"/\");t.length<2||(t.shift(),u(k(\"habbopages.url\")+t.join(\"/\")))}),[u]);return Object(c.useEffect)((()=>{const e={linkReceived:d,eventUrlPrefix:\"habbopages/\"};return N(e),()=>M(e)}),[d]),Object(c.useEffect)((()=>{const e=e=>{if(!(e.target instanceof HTMLAnchorElement))return;e.preventDefault();const t=e.target.href;t&&t.length&&Pr.openUrl(t)};return document.addEventListener(\"click\",e),()=>{document.removeEventListener(\"click\",e)}}),[]),t?Object(Kr.jsxs)(Ec,{className:\"nitropedia\",theme:\"primary\",style:i?{width:i.width,height:i.height}:{},children:[Object(Kr.jsx)(jc,{headerText:n,onCloseClick:()=>s(null)}),Object(Kr.jsx)(uc,{children:Object(Kr.jsx)(Qr,{fit:!0,innerRef:l,className:\"text-black\",dangerouslySetInnerHTML:{__html:t}})})]}):null},Rd=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(!0),l=Object(c.useCallback)((e=>{s(0),r(null)}),[]);it(a.tb,l);const u=Object(c.useCallback)((e=>{s(0),r(null)}),[]);it(a.xg,u);const d=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(t.data.habboGroupId>0?(s(t.data.habboGroupId),$n(new a.Tc(t.data.habboGroupId,!1))):(s(0),r(null)))}),[]);it(a.nc,d);const h=Object(c.useCallback)((e=>{const c=e.getParser();!n||c.groupId!==n.id&&c.groupId!==t||(s(0),r(null))}),[t,n]);it(a.Gd,h);const j=Object(c.useCallback)((e=>{const s=e.getParser();s.id===t&&r(s)}),[t]);it(a.Uc,j);const b=n&&n.ownerName===ee().userName;return n?Object(Kr.jsx)(Qr,{className:\"nitro-notification-bubble\",children:Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{className:\"grouproom-header\",alignItems:\"center\",justifyContent:\"between\",pointer:!0,onClick:e=>o((e=>!e)),children:[Object(Kr.jsx)(ei,{bold:!0,small:!0,className:\"header-text p-1\",variant:\"white\",children:nt(\"group.homeroominfo.title\")}),Object(Kr.jsx)(\"i\",{className:i?\"arrow-down\":\"arrow-left\"})]}),i&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(vc,{className:\"px-2 pb-2\",children:[Object(Kr.jsxs)(ec,{pointer:!0,alignItems:\"center\",gap:2,onClick:e=>Er(n.id),children:[Object(Kr.jsx)(Qr,{className:\"group-badge\",children:Object(Kr.jsx)(Ic,{badgeCode:n.badge,isGroup:!0})}),Object(Kr.jsx)(ei,{bold:!0,variant:\"white\",children:n.title})]}),(n.type!==bl.PRIVATE||b)&&Object(Kr.jsx)(tc,{fullWidth:!0,className:\"btn-flash fw-bold\",disabled:n.membershipType===jl.REQUEST_PENDING,onClick:()=>{if(b)return fr(n.id);n.type===bl.PRIVATE&&n.membershipType===jl.NOT_MEMBER||(n.membershipType!==jl.MEMBER?Ir(n.id):Pr.confirm(nt(\"group.leaveconfirm.desc\"),(()=>{$n(new a.cd(n.id,ee().userId))}),null))},children:nt(b?\"group.manage\":n.type===bl.PRIVATE?\"\":n.membershipType===jl.MEMBER?\"group.leave\":n.membershipType===jl.NOT_MEMBER&&n.type===bl.REGULAR?\"group.join\":n.membershipType===jl.REQUEST_PENDING?\"group.membershippending\":n.membershipType===jl.NOT_MEMBER&&n.type===bl.EXCLUSIVE?\"group.requestmembership\":void 0)})]})})]})}):null},Ad=e=>{const t=Object(c.useCallback)((e=>{const t=e.getParser();if(t.userId!==ee().userId)return;const s=nt(\"notifications.text.respect.1\"),n=nt(\"notifications.text.respect.2\",[\"count\"],[t.respectsReceived.toString()]);Pr.showSingleBubble(s,kr.RESPECT),Pr.showSingleBubble(n,kr.RESPECT)}),[]);it(a.Wf,t);const s=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(t.message.replace(/\\\\r/g,\"\\r\"),null,null,nt(\"notifications.broadcast.title\"))}),[]);it(a.Dd,s);const n=Object(c.useCallback)((e=>{const t=e.getParser(),s=nt(\"achievements.levelup.desc\"),n=et(t.data.badgeCode),r=ee().getBadgeUrl(t.data.badgeCode),c=\"questengine/achievements/\"+t.data.category;Pr.showSingleBubble(s+\" \"+n,kr.ACHIEVEMENT,r,c)}),[]);it(a.c,n);const r=Object(c.useCallback)((e=>{const t=e.getParser();Pr.showClubGiftNotification(t.numGifts)}),[]);it(a.hb,r);const i=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleModeratorMessage(t.message,t.url)}),[]);it(a.xe,i);const o=Object(c.useCallback)((e=>{const t=e.getParser();if(t.amountChanged<=0||5!==t.type)return;const s=k(\"currency.asset.icon.url\",\"\").replace(\"%type%\",t.type.toString());Pr.showSingleBubble(nt(\"notifications.text.loyalty.received\",[\"AMOUNT\"],[t.amountChanged.toString()]),kr.INFO,s)}),[]);it(a.f,o);const l=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleUserBannedMessage(t.message)}),[]);it(a.wi,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelClosedMessage(t.openHour,t.openMinute,t.userThrowOutAtClose)}),[]);it(a.Ld,u);const d=Object(c.useCallback)((e=>{const t=e.getParser(),s=nt(\"notifications.text.\"+(t.boughtAsGift?\"petbought\":\"petreceived\"));let n=null;const r=L().getRoomObjectPetImage(t.pet.typeId,t.pet.paletteId,parseInt(t.pet.color,16),new a.Ui(135),64,null,!0);r&&(n=r.getImage().src),Pr.showSingleBubble(s,kr.PETLEVEL,n)}),[]);it(a.rf,d);const h=Object(c.useCallback)((e=>{e.getParser();Pr.showModerationDisclaimer()}),[]);it(a.wg,h);const j=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleMOTD(t.messages)}),[]);it(a.be,j);const b=Object(c.useCallback)((e=>{const t=e.getParser();let s=null;const n=L().getRoomObjectPetImage(t.figureData.typeId,t.figureData.paletteId,parseInt(t.figureData.color,16),new a.Ui(135),64,null,!0);n&&(s=n.getImage().src),Pr.showSingleBubble(nt(\"notifications.text.petlevel\",[\"pet_name\",\"level\"],[t.petName,t.level.toString()]),kr.PETLEVEL,s)}),[]);it(a.qf,b);const g=Object(c.useCallback)((e=>{const t=e.getParser();Pr.BUBBLES_DISABLED=!t.enabled}),[]);it(a.Nd,g);const O=Object(c.useCallback)((e=>{const t=e.getParser();if(!t.products||!t.products.length)return;const s=t.products[0];s&&Pr.showSingleBubble(nt(\"notifications.text.club_gift.selected\"),kr.INFO,sn.getProductImageUrl(s.productType,s.furniClassId,s.extraParam))}),[]);it(a.ib,O);const m=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelMaintenanceMessage(t.minutesUntilMaintenance,t.duration)}),[]);it(a.ce,m);const p=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleModeratorCaution(t.message,t.url)}),[]);it(a.ve,p);const _=Object(c.useCallback)((e=>{const t=e.getParser();Pr.showNotification(t.type,t.parameters)}),[]);it(a.ff,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleHotelClosingMessage(t.openMinute)}),[]);it(a.Md,E);const f=Object(c.useCallback)((e=>{const t=e.getParser();Pr.handleLoginFailedHotelClosedMessage(t.openHour,t.openMinute)}),[]);return it(a.Kd,f),null},yd=e=>{const{title:t=\"Nitro\",close:s=null,...n}=e;return Object(Kr.jsx)(Mc,{title:t,close:s,...n,children:Object(Kr.jsxs)(Jr,{children:[Object(Kr.jsx)(vc,{center:!0,size:5,children:Object(Kr.jsx)(\"object\",{data:\"https://assets.nitrodev.co/logos/nitro-n-dark.svg\",width:\"100\",height:\"100\",children:\"\\xa0\"})}),Object(Kr.jsxs)(vc,{size:7,children:[Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:4,children:\"Nitro React\"}),Object(Kr.jsxs)(ei,{children:[\"v\",\"2.0.0\"]})]}),Object(Kr.jsxs)(vc,{alignItems:\"center\",children:[Object(Kr.jsxs)(ei,{children:[Object(Kr.jsx)(\"b\",{children:\"Renderer:\"}),\" v\",a.ef.RENDERER_VERSION]}),Object(Kr.jsxs)(vc,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>window.open(\"https://discord.nitrodev.co\"),children:\"Discord\"}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open(\"https://git.krews.org/nitro/nitro-react\"),children:\"Git\"}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open(\"https://git.krews.org/nitro/nitro-react/-/issues\"),children:\"Bug Report\"})]})]})]})]}),Object(Kr.jsx)(vc,{center:!0,size:5,children:Object(Kr.jsx)(vc,{className:\"flashui-logo\"})}),Object(Kr.jsxs)(vc,{size:7,children:[Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,fontSize:4,children:\"Flash UI-edit\"}),Object(Kr.jsx)(ei,{small:!0,children:\"is created by Robbis\"})]}),Object(Kr.jsxs)(vc,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>window.open(\"https://discord.gg/j3bqtZKAF3\"),children:\"Flash-UI Discord\"}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open(\"https://git.krews.org/robbis1111/nitro-react-flashUI\"),children:\"Git\"}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>window.open(\"https://git.krews.org/robbis1111/nitro-react-flashUI/-/issues\"),children:\"Bug Report\"})]})]})]})]})})},wd=e=>{const{item:t=null,title:s=e.item&&e.item.title||\"\",close:n=null,...r}=e,[i,a]=Object(c.useState)(!1),o=Object(c.useCallback)((()=>{Pr.openUrl(t.clickUrl),n()}),[t,n]),l=t.alertType===yr.DEFAULT;return Object(Kr.jsxs)(Mc,{title:s,close:n,...r,type:l?yr.DEFAULT:t.alertType,children:[Object(Kr.jsxs)(ec,{fullHeight:!0,overflow:\"auto\",gap:l||t.imageUrl&&!i?2:0,children:[t.imageUrl&&!i&&Object(Kr.jsx)(\"img\",{src:t.imageUrl,alt:t.title,onError:()=>{a(!0)},className:\"align-self-baseline\"}),Object(Kr.jsxs)(Qr,{classNames:[\"notification-text overflow-y-auto d-flex flex-column w-100\",t.clickUrl&&!l?\"justify-content-center\":\"\"],children:[t.messages.length>0&&t.messages.map(((e,t)=>{const s=e.replace(/\\r\\n|\\r|\\n/g,\"<br />\");return Object(Kr.jsx)(Qr,{dangerouslySetInnerHTML:{__html:s}},t)})),t.clickUrl&&t.clickUrl.length>0&&t.imageUrl&&!i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"my-2 w-100\"}),Object(Kr.jsx)(tc,{onClick:o,className:\"align-self-center px-3\",children:nt(t.clickUrlText)})]})]})]}),(!t.imageUrl||t.imageUrl&&i)&&Object(Kr.jsx)(Kr.Fragment,{children:Object(Kr.jsxs)(vc,{alignItems:\"center\",center:!0,gap:0,children:[Object(Kr.jsx)(\"hr\",{className:\"my-2 w-100\"}),!t.clickUrl&&Object(Kr.jsx)(tc,{onClick:n,children:nt(\"generic.close\")}),t.clickUrl&&t.clickUrl.length>0&&Object(Kr.jsx)(tc,{onClick:o,children:nt(t.clickUrlText)})]})})]})},kd=e=>{const{item:t=null,title:s=e.item&&e.item.title||\"\",close:n=null,...r}=e,[i,a]=Object(c.useState)(\"\"),[o,l]=Object(c.useState)([]),u=Object(c.useCallback)((()=>{Pr.openUrl(t.clickUrl),n()}),[t,n]);Object(c.useEffect)((()=>{l(JSON.parse(t.messages[0]))}),[t]);const d=Object(c.useCallback)((e=>{let s=JSON.parse(t.messages[0]);l(s.filter((t=>t.includes(e)))),a(e)}),[t]),h=t.clickUrl&&t.clickUrl.startsWith(\"event:\");return Object(Kr.jsxs)(Mc,{title:s,close:n,...r,children:[Object(Kr.jsx)(ec,{fullWidth:!0,alignItems:\"center\",position:\"relative\",children:Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"generic.search\"),value:i,onChange:e=>d(e.target.value)})}),Object(Kr.jsx)(vc,{fullHeight:!0,className:\"py-1\",overflow:\"hidden\",children:Object(Kr.jsx)(Zr,{gap:1,columnCount:1,children:o&&o.map(((e,t)=>Object(Kr.jsx)(\"span\",{children:e},t)))})}),Object(Kr.jsx)(\"hr\",{className:\"my-2\"}),Object(Kr.jsxs)(vc,{alignItems:\"center\",center:!0,gap:1,children:[!h&&!t.clickUrl&&Object(Kr.jsx)(tc,{onClick:n,children:nt(\"generic.close\")}),t.clickUrl&&t.clickUrl.length>0&&Object(Kr.jsx)(tc,{onClick:u,children:nt(t.clickUrlText)})]})]})},Dd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};switch(e.alertType){case yr.NITRO:return Object(Kr.jsx)(yd,{...s});case yr.SEARCH:return Object(Kr.jsx)(kd,{...s});default:return Object(Kr.jsx)(wd,{...s})}},Ud=e=>{const{item:t=null,close:s=null,...n}=e;return Object(Kr.jsxs)(Gc,{fadesOut:!1,className:\"flex-column nitro-notification club-gift\",close:s,...n,children:[Object(Kr.jsxs)(\"div\",{className:\"d-flex gap-1 mb-2\",children:[Object(Kr.jsx)(Tc,{type:\"hc\",className:\"flex-shrink-0\"}),Object(Kr.jsx)(\"span\",{className:\"ms-1\",children:nt(\"notifications.text.club_gift\")})]}),Object(Kr.jsxs)(\"div\",{className:\"d-flex align-items-center justify-content-end gap-2\",children:[Object(Kr.jsx)(\"span\",{className:\"text-decoration-underline cursor-pointer text-nowrap notification-text-link\",onClick:s,children:nt(\"notifications.button.later\")}),Object(Kr.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:()=>Pr.openUrl(t.linkUrl),children:nt(\"notifications.button.show_gift_list\")})]})]})},Pd=e=>{const{item:t=null,close:s=null,...n}=e,r=t.message.replace(/\\r\\n|\\r|\\n/g,\"<br />\");return Object(Kr.jsxs)(Gc,{close:s,gap:2,alignItems:\"center\",onClick:e=>t.linkUrl&&t.linkUrl.length&&Pr.openUrl(t.linkUrl),...n,children:[Object(Kr.jsx)(ec,{center:!0,className:\"bubble-image-container\",children:t.iconUrl&&t.iconUrl.length&&Object(Kr.jsx)(\"img\",{className:\"no-select\",src:t.iconUrl,alt:\"\"})}),Object(Kr.jsx)(ei,{wrap:!0,className:\"notification-bubble-text\",variant:\"white\",dangerouslySetInnerHTML:{__html:r}})]})},Md=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.notificationType===kr.CLUBGIFT?Object(Kr.jsx)(Ud,{...s}):Object(Kr.jsx)(Pd,{...s})},Ld=e=>{const{item:t=null,close:s=null,...n}=e,{message:r=null,onConfirm:c=null,onCancel:i=null,confirmText:a=null,cancelText:o=null,title:l=null}=t;return Object(Kr.jsxs)(Mc,{title:l,close:s,...n,type:yr.ALERT,children:[Object(Kr.jsx)(ec,{grow:!0,center:!0,children:Object(Kr.jsx)(ei,{children:r})}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",onClick:()=>{i&&i(),s()},children:o}),Object(Kr.jsx)(tc,{fullWidth:!0,onClick:()=>{c&&c(),s()},children:a})]})]})},Fd=(e,t)=>{if(!e)return null;const s={key:e.id,item:e,close:t};return e.confirmType,Object(Kr.jsx)(Ld,{...s})},Hd=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)([]),o=Object(c.useCallback)((e=>{const t=new wr(e.messages,e.alertType,e.clickUrl,e.clickUrlText,e.title,e.imageUrl);s((e=>[t,...e]))}),[]);qt(vt.ALERT,o);const l=Object(c.useCallback)((e=>{const t=new Dr(e.message,e.notificationType,e.imageUrl,e.linkUrl);r((e=>[t,...e]))}),[]);qt(Rt.NEW_BUBBLE,l);const u=Object(c.useCallback)((e=>{const t=new Ur(e.type,e.message,e.onConfirm,e.onCancel,e.confirmText,e.cancelText,e.title);a((e=>[t,...e]))}),[]);qt(wt.CONFIRM,u);const d=Object(c.useCallback)((e=>{s((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),h=Object(c.useCallback)((e=>{r((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),j=Object(c.useCallback)((e=>{a((t=>{const s=[...t],n=s.findIndex((t=>e===t));return n>=0&&s.splice(n,1),s}))}),[]),b=Object(c.useMemo)((()=>{if(!t||!t.length)return null;const e=[];for(const s of t){const t=Dd(s,(()=>d(s)));e.push(t)}return e}),[t,d]),g=Object(c.useMemo)((()=>{if(!n||!n.length)return null;const e=[];for(const t of n){const s=Md(t,(()=>h(t)));t.notificationType!==kr.CLUBGIFT?e.push(s):e.unshift(s)}return e}),[n,h]),O=Object(c.useMemo)((()=>{if(!i||!i.length)return null;const e=[];for(const t of i){const s=Fd(t,(()=>j(t)));e.push(s)}return e}),[i,j]);return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Ad,{}),Object(Kr.jsx)(vc,{gap:1,children:g}),O,b]})};var Bd=s(143);const Gd=e=>{const{type:t=-1,amount:s=-1,short:n=!1}=e,r=Object(c.useMemo)((()=>Object(Kr.jsxs)(ec,{justifyContent:\"end\",pointer:!0,gap:1,className:\"nitro-purse-button rounded\",children:[Object(Kr.jsx)(ei,{bold:!0,truncate:!0,textEnd:!0,variant:\"white\",grow:!0,children:n?st(s):tt(s)}),Object(Kr.jsx)(Tc,{type:t})]})),[s,n,t]);return n?Object(Kr.jsx)(Pl.a,{placement:\"left\",overlay:Object(Kr.jsx)(Bd.a,{id:`tooltip-${t}`,children:tt(s)}),children:r}):r},Wd=e=>{const{type:t=-1,amount:s=-1}=e;return Object(Kr.jsx)(ec,{fullWidth:!0,justifyContent:\"between\",className:\"nitro-purse-seasonal-currency nitro-notification \"+k(\"currency.seasonal.color\"),children:Object(Kr.jsxs)(ec,{fullWidth:!0,children:[Object(Kr.jsx)(ei,{bold:!0,truncate:!0,fullWidth:!0,className:\"seasonal-padding seasonal-bold\",children:nt(`purse.seasonal.currency.${t}`)}),Object(Kr.jsx)(ei,{bold:!0,truncate:!0,variant:\"white\",className:\"seasonal-amount text-end\",children:tt(s)}),Object(Kr.jsx)(ec,{className:\"nitro-seasonal-box seasonal-padding\",children:Object(Kr.jsx)(Tc,{type:t})})]})})},Vd=e=>{const{purse:t=null,hcDisabled:s=!1}=fs(),n=Object(c.useMemo)((()=>k(\"system.currency.types\",[])),[]),r=Object(c.useMemo)((()=>k(\"currency.display.number.short\",!1)),[]),i=Object(c.useMemo)((()=>{if(!t)return null;const e=31*t.clubPeriods+t.clubDays,s=t.minutesUntilExpiration;return t.clubLevel===a.Ed.NO_CLUB?nt(\"purse.clubdays.zero.amount.text\"):s>-1&&s<1440?a.Kb.shortFormat(60*s):a.Kb.shortFormat(86400*e)}),[t]),o=Object(c.useCallback)((function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||!t.activityPoints||!t.activityPoints.size)return null;const i=Array.from(t.activityPoints.keys()).filter((e=>n.indexOf(e)>=0));let a=0;for(;a<e;)i.shift(),a++;a=0;const o=[];for(const n of i){if(s>-1&&a===s)break;c?o.push(Object(Kr.jsx)(Wd,{type:n,amount:t.activityPoints.get(n)},n)):o.push(Object(Kr.jsx)(Gd,{type:n,amount:t.activityPoints.get(n),short:r},n)),a++}return o}),[t,n,r]);return t?Object(Kr.jsxs)(vc,{className:\"nitro-purse-container\",gap:1,children:[Object(Kr.jsx)(ec,{className:\"nitro-purse nitro-notification p-2\",children:Object(Kr.jsxs)(Jr,{fullWidth:!0,gap:2,children:[Object(Kr.jsxs)(vc,{justifyContent:\"center\",size:s?8:4,gap:1,children:[Object(Kr.jsx)(Gd,{type:-1,amount:t.credits,short:r}),o(0,2)]}),!s&&Object(Kr.jsxs)(vc,{center:!0,pointer:!0,size:4,gap:1,className:\"nitro-purse-subscription\",onClick:e=>y(\"habboUI/open/hccenter\"),children:[Object(Kr.jsx)(Tc,{className:\"club-text\",type:\"hc\"}),Object(Kr.jsx)(ei,{bold:!0,className:\"club-text\",children:i})]}),Object(Kr.jsxs)(vc,{justifyContent:\"center\",size:2,gap:1,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"nitro-purse-right-button help p-1\",onClick:e=>y(\"help/show\"),children:Object(Kr.jsx)(ei,{small:!0,children:nt(\"help.button.cfh\")})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"nitro-purse-right-button disconnect p-1\",onClick:e=>y(\"disconnect\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-purse-disconnect\"})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"nitro-purse-right-button settings p-1\",onClick:e=>y(\"user-settings/toggle\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-purse-settings\"})})]})]})}),o(2,-1,!0)]}):null},qd=e=>Object(Kr.jsx)(\"div\",{className:\"nitro-right-side\",children:Object(Kr.jsxs)(vc,{position:\"relative\",gap:1,children:[Object(Kr.jsx)(Vd,{}),Object(Kr.jsx)(Rd,{}),Object(Kr.jsx)(Hd,{})]})}),Yd=Object(c.createContext)({roomSession:null,eventDispatcher:null,widgetHandler:null}),zd=e=>Object(Kr.jsx)(Yd.Provider,{value:e.value,children:e.children}),Kd=()=>Object(c.useContext)(Yd),Qd=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null,eventDispatcher:d=null}=Kd(),h=Object(c.useCallback)((function(e,s,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return;const c=a.jb.hslToRGB(((255&e)<<16)+((255&s)<<8)+(255&n));r&&o(c),t.tint=e||s||n?c:0}),[t]),j=Object(c.useCallback)((e=>{if(!n)return;const t=e>>16&255,s=e>>8&255,r=255&e;n.red=t/255,n.green=s/255,n.blue=r/255}),[n]),b=Object(c.useCallback)((e=>{if(!a.Bg.isRoomPreviewerId(e.roomId))switch(e.type){case a.Jg.ROOM_BACKGROUND_COLOR:{const t=e;return void(t.enable?h(t.hue,t.saturation,t.lightness,!0):h(0,0,0,!0))}case a.Xf.ROOM_COLOR:{const t=e;let s=0,n=255;return t.bgOnly||(s=t.color,n=t.brightness),void j(a.jb.hslToRGB((16776960&a.jb.rgbToHSL(s))+n))}case a.ng.ROOM_COLOR:u.processEvent(e)}}),[u,h,j]);Bt(a.Jg.ROOM_BACKGROUND_COLOR,b),Bt(a.Xf.ROOM_COLOR,b),Bt(a.ng.ROOM_COLOR,b);const g=Object(c.useCallback)((e=>{switch(e.type){case Ce.PREVIEW:return void h(e.hue,e.saturation,e.lightness);case Ce.CLEAR_PREVIEW:if(!t)return;return void(t.tint=i)}}),[t,i,h]);return Pt(Ce.PREVIEW,d,g),Pt(Ce.CLEAR_PREVIEW,d,g),Object(c.useEffect)((()=>{if(!l)return;const e=L().getRoomInstanceRenderingCanvas(l.roomId,1);if(!e)return;const t=new a.af(a.bf.WHITE),n=new a.Pe,c=e.master;t.tint=0,t.width=C().width,t.height=C().height,c.addChildAt(t,0),c.filters=[n],s(t),r(n);const i=e=>{t.width=C().width,t.height=C().height};return window.addEventListener(\"resize\",i),()=>{s((e=>(e&&e.destroy(),null))),r((e=>(e&&e.destroy(),null))),o(0),window.removeEventListener(\"resize\",i)}}),[l]),null},$d=e=>Object(Kr.jsx)(\"div\",{className:\"room-spectator\"}),Xd=e=>{const{justifyContent:t=\"center\",alignItems:s=\"center\",classNames:n=[],...r}=e,i=Object(c.useMemo)((()=>{const e=[\"menu-header\",\"pb-1\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{justifyContent:t,alignItems:s,classNames:i,...r})};class Jd{}Jd.GENERIC_SKILL=0,Jd.DRESS_UP=1,Jd.SETUP_CHAT=2,Jd.RANDOM_WALK=3,Jd.DANCE=4,Jd.CHANGE_BOT_NAME=5,Jd.SERVE_BEVERAGE=6,Jd.INCLIENT_LINK=7,Jd.NUX_PROCEED=8,Jd.CHANGE_BOT_MOTTO=9,Jd.NUX_TAKE_TOUR=10,Jd.NO_PICK_UP=12,Jd.NAVIGATOR_SEARCH=14,Jd.DONATE_TO_USER=24,Jd.DONATE_TO_ALL=25;const Zd=e=>{const{chatEvent:t=null,close:s=null}=e,[n,r]=Object(c.useState)(\"${bot.skill.chatter.configuration.text.placeholder}\"===t.chat?\"\":t.chat),[i,o]=Object(c.useState)(t.automaticChat),[l,u]=Object(c.useState)(t.mixSentences),[d,h]=Object(c.useState)(t.chatDelay),j=Object(c.useMemo)((()=>he(ie().roomId,t.objectId,t.category,1)),[t]);return Object(Kr.jsx)(_c,{windowPosition:Oc.NOTHING,handleSelector:\".drag-handler\",dragStyle:{top:j.y,left:j.x},children:Object(Kr.jsxs)(Qr,{className:\"nitro-context-menu bot-chat\",children:[Object(Kr.jsx)(Xd,{className:\"drag-handler\",children:nt(\"bot.skill.chatter.configuration.title\")}),Object(Kr.jsxs)(vc,{className:\"p-1\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",children:nt(\"bot.skill.chatter.configuration.chat.text\")}),Object(Kr.jsx)(\"textarea\",{className:\"form-control form-control-sm\",placeholder:nt(\"bot.skill.chatter.configuration.text.placeholder\"),value:n,rows:7,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{fullWidth:!0,variant:\"white\",children:nt(\"bot.skill.chatter.configuration.automatic.chat\")}),Object(Kr.jsx)(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:i,onChange:e=>o(e.target.checked)})]}),Object(Kr.jsxs)(ec,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{fullWidth:!0,variant:\"white\",children:nt(\"bot.skill.chatter.configuration.markov\")}),Object(Kr.jsx)(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:l,onChange:e=>u(e.target.checked)})]}),Object(Kr.jsxs)(ec,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{fullWidth:!0,variant:\"white\",children:nt(\"bot.skill.chatter.configuration.chat.delay\")}),Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:d,onChange:e=>h(e.target.valueAsNumber)})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"primary\",onClick:s,children:nt(\"cancel\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:()=>{const e=n.replace(/;#;/g,\" \").replace(/\\r\\n|\\r|\\n/g,\"\\r\")+\";#;\"+i+\";#;\"+d+\";#;\"+l;$n(new a.D(t.botId,Jd.SETUP_CHAT,e)),s()},children:nt(\"save\")})]})]})]})})},eh=e=>{const{item:t=null,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),{roomSession:d=null,widgetHandler:h=null}=Kd(),j=Object(c.useCallback)((()=>{i&&L().selectRoomObject(d.roomId,i.roomIndex,a.Ig.UNIT)}),[d,i]),b=Object(c.useCallback)((()=>{h.processWidgetMessage(new Nn(Nn.PET_PRODUCT,t.requestRoomObjectId,i.webID)),s()}),[h,t,i,s]),g=Object(c.useMemo)((()=>{if(!i||!l)return null;const e=new a.of(i.figure),t=l.customParams.split(\" \"),s=parseInt(t[0]);switch(l.specialType){case Rs.PET_SHAMPOO:{if(t.length<2)return null;const n=L().getPetColorResult(s,e.paletteId),r=L().getPetColorResultsForTag(s,t[1]);let c=-1;for(const e of r)if(e.breed===n.breed){c=parseInt(e.id);break}return Object(Kr.jsx)(Wc,{typeId:e.typeId,paletteId:c,petColor:e.color,customParts:e.customParts,direction:2})}case Rs.PET_CUSTOM_PART:{if(t.length<4)return null;const s=[],n=t[1].split(\",\").map((e=>parseInt(e))),r=t[2].split(\",\").map((e=>parseInt(e))),c=t[3].split(\",\").map((e=>parseInt(e)));let i=0;for(;i<n.length;){const t=n[i],o=e.getCustomPart(t);let l=c[i];null!=o&&(l=o.paletteId),s.push(new a.nf(t,r[i],l)),i++}return Object(Kr.jsx)(Wc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.PET_CUSTOM_PART_SHAMPOO:{if(t.length<3)return null;const s=[],n=t[1].split(\",\").map((e=>parseInt(e))),r=t[2].split(\",\").map((e=>parseInt(e)));let c=0;for(;c<n.length;){const t=n[c],i=e.getCustomPart(t);let o=-1;null!=i&&(o=i.partId),s.push(new a.nf(n[c],o,r[c])),c++}return Object(Kr.jsx)(Wc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.PET_SADDLE:{if(t.length<4)return null;const s=[],n=t[1].split(\",\").map((e=>parseInt(e))),r=t[2].split(\",\").map((e=>parseInt(e))),c=t[3].split(\",\").map((e=>parseInt(e)));let i=0;for(;i<n.length;)s.push(new a.nf(n[i],r[i],c[i])),i++;for(const t of e.customParts)-1===n.indexOf(t.layerId)&&s.push(t);return Object(Kr.jsx)(Wc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:s,direction:2})}case Rs.MONSTERPLANT_REBREED:case Rs.MONSTERPLANT_REVIVAL:case Rs.MONSTERPLANT_FERTILIZE:{let t=\"rip\";const s=L().getRoomObject(d.roomId,i.roomIndex,a.Ig.UNIT);if(s&&(t=s.model.getValue(a.Og.FIGURE_POSTURE),\"rip\"===t)){const e=i.petLevel;t=e<7?`grw${e}`:\"std\"}return Object(Kr.jsx)(Wc,{typeId:e.typeId,paletteId:e.paletteId,petColor:e.color,customParts:e.customParts,posture:t,direction:2})}}}),[i,l,d]);return Object(c.useEffect)((()=>{const e=d.userDataManager.getUserDataByIndex(t.id);o(e);const s=ne(d.roomId,t.requestRoomObjectId,a.Ig.FLOOR);if(!s)return;u(s);let n=-1;switch(s.specialType){case Rs.PET_SHAMPOO:n=0;break;case Rs.PET_CUSTOM_PART:n=1;break;case Rs.PET_CUSTOM_PART_SHAMPOO:n=2;break;case Rs.PET_SADDLE:n=3;break;case Rs.MONSTERPLANT_REVIVAL:n=4;break;case Rs.MONSTERPLANT_REBREED:n=5;break;case Rs.MONSTERPLANT_FERTILIZE:n=6}r(n)}),[d,t]),i?Object(Kr.jsxs)(Ec,{className:\"nitro-use-product-confirmation\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"useproduct.widget.title\",[\"name\"],[i.name]),onCloseClick:s}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"product-preview\",onClick:j,children:g})}),Object(Kr.jsxs)(vc,{justifyContent:\"between\",overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{gap:2,children:[0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.shampoo\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.shampoo\")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.custompart\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.custompart\")})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.custompartshampoo\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.custompartshampoo\")})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.saddle\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.saddle\")})]}),4===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.revive_monsterplant\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.revive_monsterplant\")})]}),5===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.rebreed_monsterplant\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.rebreed_monsterplant\")})]}),6===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.fertilize_monsterplant\",[\"productName\"],[l.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.fertilize_monsterplant\")})]})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:s,children:nt(\"useproduct.widget.cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:b,children:nt(\"useproduct.widget.use\")})]})]})]})})]}):null},th=e=>{const{disabled:t=!1,fullWidth:s=!0,justifyContent:n=\"center\",alignItems:r=\"center\",classNames:i=[],onClick:a=null,...o}=e,l=Object(c.useMemo)((()=>{const e=[\"menu-item\",\"list-item\"];return t&&e.push(\"disabled\"),i.length&&e.push(...i),e}),[t,i]);return Object(Kr.jsx)(ec,{fullWidth:s,justifyContent:n,alignItems:r,classNames:l,onClick:e=>{t||a&&a(e)},...o})},sh=e=>{const{justifyContent:t=\"center\",alignItems:s=\"center\",classNames:n=[],collapsed:r=!0,...i}=e,a=Object(c.useMemo)((()=>{const e=[\"menu-bottom\"];return n.length&&e.push(...n),e}),[n]);return Object(Kr.jsx)(ec,{justifyContent:t,alignItems:s,classNames:a,...i,children:Object(Kr.jsx)(\"i\",{className:r?\"icon icon-context-menu-arrow-up\":\"icon icon-context-menu-arrow-down\"})})},nh=10;let rh=!1;const ch=e=>{const{objectId:t=-1,category:s=-1,userType:n=-1,fades:r=!1,close:i=null,position:o=\"absolute\",classNames:l=[],style:u={},children:d=null,collapsable:h=!1,...j}=e,[b,g]=Object(c.useState)({x:null,y:null}),[O,m]=Object(c.useState)(null),[p,_]=Object(c.useState)(-1e6),[E,f]=Object(c.useState)(1),[x,I]=Object(c.useState)(!1),[T,N]=Object(c.useState)(0),[S,v]=Object(c.useState)(!1),R=Object(c.useRef)(),[A,y]=Object(c.useState)(rh),w=Object(c.useCallback)((e=>{let t=-R.current.offsetHeight;return n>-1&&(n===a.Mg.USER||n===a.Mg.BOT||n===a.Mg.RENTABLE_BOT)?t+=e.height>50?15:0:t-=14,t}),[n]),k=Object(c.useCallback)((e=>{let t=e,s=1;if(x){if(N((e=>(t+=e,t))),s=1*(1-t/75),s<=0)return i(),!1;f(s)}return!0}),[x,i]),D=Object(c.useCallback)(((e,t)=>{if(!e||!t||!O)return;const s=w(e);O.addValue(t.y-e.top);let n=O.getMax();n<p-3&&(n=p-3);const r=t.y-n;let c=~~(t.x-R.current.offsetWidth/2),i=~~(r+s);const a=C().width-R.current.offsetWidth-nh,o=C().height-R.current.offsetHeight-nh;c<nh?c=nh:c>a&&(c=a),i<nh?i=nh:i>o&&(i=o),_(n),g({x:c,y:i})}),[O,p,w]),U=Object(c.useCallback)((e=>{if(!R.current||!k(e))return;const n=he(ie().roomId,t,s),r=je(ie().roomId,t,s);D(n,r)}),[t,s,k,D]),M=Object(c.useMemo)((()=>{const e=[\"nitro-context-menu\"];return A&&e.push(\"menu-hidden\"),e.push(null!==b.x?\"visible\":\"invisible\"),l.length&&e.push(...l),e}),[b,l,A]),L=Object(c.useMemo)((()=>{let e={};return e.left=b.x||0,e.top=b.y||0,e.opacity=E,Object.keys(u).length&&(e={...e,...u}),e}),[b,E,u]);Object(c.useEffect)((()=>{m(new a.Ab(25)),_(-1e6)}),[]),Object(c.useEffect)((()=>{let e=!1;return S||(e=!0,P().add(U)),()=>{e&&P().remove(U)}}),[S,U]),Object(c.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>I(!0)),3e3);return()=>clearTimeout(e)}),[r]);return Object(Kr.jsxs)(Qr,{innerRef:R,position:o,classNames:M,style:L,...j,children:[!(h&&rh)&&d,h&&Object(Kr.jsx)(sh,{onClick:()=>(rh=!rh,void y(rh)),collapsed:A})]})},ih=e=>{const{item:t=null,updateConfirmingProduct:s=null,close:n=null}=e,[r,i]=Object(c.useState)(0),{roomSession:o=null}=Kd();Object(c.useEffect)((()=>{if(!t)return;const e=ne(o.roomId,t.requestRoomObjectId,a.Ig.FLOOR);if(!e)return;let s=0;switch(e.specialType){case Rs.PET_SHAMPOO:s=1;break;case Rs.PET_CUSTOM_PART:s=2;break;case Rs.PET_CUSTOM_PART_SHAMPOO:s=3;break;case Rs.PET_SADDLE:s=4;break;case Rs.MONSTERPLANT_REVIVAL:s=5;break;case Rs.MONSTERPLANT_REBREED:s=6;break;case Rs.MONSTERPLANT_FERTILIZE:s=7}i(s)}),[o,t]);const l=Object(c.useCallback)((e=>{if(e)switch(e){case\"use_product\":case\"use_product_shampoo\":case\"use_product_custom_part\":case\"use_product_custom_part_shampoo\":case\"use_product_saddle\":case\"replace_product_saddle\":case\"revive_monsterplant\":case\"rebreed_monsterplant\":case\"fertilize_monsterplant\":s(t)}}),[t,s]);return Object(Kr.jsxs)(ch,{objectId:t.id,category:a.Ig.UNIT,userType:a.Mg.PET,close:n,collapsable:!0,children:[Object(Kr.jsx)(Xd,{children:t.name}),0===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"use_product\"),children:nt(\"infostand.button.useproduct\")}),1===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"use_product_shampoo\"),children:nt(\"infostand.button.useproduct_shampoo\")}),2===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"use_product_custom_part\"),children:nt(\"infostand.button.useproduct_custom_part\")}),3===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"use_product_custom_part_shampoo\"),children:nt(\"infostand.button.useproduct_custom_part_shampoo\")}),4===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.replace&&Object(Kr.jsx)(th,{onClick:e=>l(\"replace_product_saddle\"),children:nt(\"infostand.button.replaceproduct_saddle\")}),!t.replace&&Object(Kr.jsx)(th,{onClick:e=>l(\"use_product_saddle\"),children:nt(\"infostand.button.useproduct_saddle\")})]}),5===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"revive_monsterplant\"),children:nt(\"infostand.button.revive_monsterplant\")}),6===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"rebreed_monsterplant\"),children:nt(\"infostand.button.rebreed_monsterplant\")}),7===r&&Object(Kr.jsx)(th,{onClick:e=>l(\"fertilize_monsterplant\"),children:nt(\"infostand.button.fertilize_monsterplant\")})]})},ah=e=>{const{userData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{canRequestFriend:l=null}=es(),{widgetHandler:u=null}=Kd(),d=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel<a.eg.GUEST&&!t.isGuildRoom),[t]),h=Object(c.useMemo)((()=>t.amIOwner&&t.targetRoomControllerLevel===a.eg.GUEST&&!t.isGuildRoom),[t]),j=Object(c.useMemo)((()=>t.canBeKicked||t.canBeBanned||t.canBeMuted||d||h),[d,h,t]),b=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),g=Object(c.useCallback)((e=>{let n=null,c=null,a=!0;if(e){switch(e){case\"moderate\":case\"back_moderate\":a=!1,r(1);break;case\"ban\":a=!1,r(2);break;case\"mute\":a=!1,r(3);break;case\"ambassador\":case\"back_ambassador\":a=!1,r(4);break;case\"ambassador_mute\":a=!1,r(5);break;case\"back\":a=!1,r(0);break;case\"whisper\":n=Sn.WHISPER_USER;break;case\"friend\":y(`friends/request/${t.webID}/${t.name}`);break;case\"relationship\":a=!1,r(6);break;case\"respect\":{let e=i-1;o(e),n=Sn.RESPECT_USER,e>0&&(a=!1);break}case\"ignore\":n=Sn.IGNORE_USER;break;case\"unignore\":n=Sn.UNIGNORE_USER;break;case\"kick\":n=Sn.KICK_USER;break;case\"ban_hour\":n=Sn.BAN_USER_HOUR;break;case\"ban_day\":n=Sn.BAN_USER_DAY;break;case\"perm_ban\":n=Sn.BAN_USER_PERM;break;case\"mute_2min\":case\"ambassador_mute_2min\":n=Sn.MUTE_USER_2MIN;break;case\"mute_5min\":n=Sn.MUTE_USER_5MIN;break;case\"mute_10min\":n=Sn.MUTE_USER_10MIN;break;case\"give_rights\":n=Sn.GIVE_RIGHTS;break;case\"remove_rights\":n=Sn.TAKE_RIGHTS;break;case\"trade\":n=Sn.START_TRADING;break;case\"report\":n=Sn.REPORT_CFH_OTHER;break;case\"pass_hand_item\":n=Sn.PASS_CARRY_ITEM;break;case\"ambassador_alert\":n=Sn.AMBASSADOR_ALERT_USER;break;case\"ambassador_kick\":n=Sn.AMBASSADOR_KICK_USER;break;case\"ambassador_mute_10min\":n=Sn.AMBASSADOR_MUTE_USER_10MIN;break;case\"ambassador_mute_60min\":n=Sn.AMBASSADOR_MUTE_USER_60MIN;break;case\"ambassador_mute_18hour\":n=Sn.AMBASSADOR_MUTE_USER_18HOUR;break;case\"rship_heart\":n=Sn.RELATIONSHIP_HEART;break;case\"rship_smile\":n=Sn.RELATIONSHIP_SMILE;break;case\"rship_bobba\":n=Sn.RELATIONSHIP_BOBBA;break;case\"rship_none\":n=Sn.RELATIONSHIP_NONE}n&&(c=new Sn(n,t.webID)),c&&u.processWidgetMessage(c)}a&&s()}),[t,i,u,s]);return Object(c.useEffect)((()=>{r(0),o(t.respectLeft)}),[t]),Object(Kr.jsxs)(ch,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:t.userType,close:s,collapsable:!0,children:[Object(Kr.jsx)(Xd,{className:\"cursor-pointer\",onClick:e=>Lr(t.webID),children:t.name}),0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[l(t.webID)&&Object(Kr.jsx)(th,{onClick:e=>g(\"friend\"),children:nt(\"infostand.button.friend\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"trade\"),children:nt(\"infostand.button.trade\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"whisper\"),children:nt(\"infostand.button.whisper\")}),i>0&&Object(Kr.jsx)(th,{onClick:e=>g(\"respect\"),children:nt(\"infostand.button.respect\",[\"count\"],[i.toString()])}),!l(t.webID)&&Object(Kr.jsxs)(th,{onClick:e=>g(\"relationship\"),children:[nt(\"infostand.link.relationship\"),Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"})]}),!t.isIgnored&&Object(Kr.jsx)(th,{onClick:e=>g(\"ignore\"),children:nt(\"infostand.button.ignore\")}),t.isIgnored&&Object(Kr.jsx)(th,{onClick:e=>g(\"unignore\"),children:nt(\"infostand.button.unignore\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"report\"),children:nt(\"infostand.button.report\")}),j&&Object(Kr.jsxs)(th,{onClick:e=>g(\"moderate\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"}),nt(\"infostand.link.moderate\")]}),t.isAmbassador&&Object(Kr.jsxs)(th,{onClick:e=>g(\"ambassador\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"}),nt(\"infostand.link.ambassador\")]}),b&&Object(Kr.jsx)(th,{onClick:e=>g(\"pass_hand_item\"),children:nt(\"avatar.widget.pass_hand_item\")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>g(\"kick\"),children:nt(\"infostand.button.kick\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"mute\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"}),nt(\"infostand.button.mute\")]}),Object(Kr.jsxs)(th,{onClick:e=>g(\"ban\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"}),nt(\"infostand.button.ban\")]}),d&&Object(Kr.jsx)(th,{onClick:e=>g(\"give_rights\"),children:nt(\"infostand.button.giverights\")}),h&&Object(Kr.jsx)(th,{onClick:e=>g(\"remove_rights\"),children:nt(\"infostand.button.removerights\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>g(\"ban_hour\"),children:nt(\"infostand.button.ban_hour\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ban_day\"),children:nt(\"infostand.button.ban_day\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ban_perm\"),children:nt(\"infostand.button.perm_ban\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back_moderate\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>g(\"mute_2min\"),children:nt(\"infostand.button.mute_2min\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"mute_5min\"),children:nt(\"infostand.button.mute_5min\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"mute_10min\"),children:nt(\"infostand.button.mute_10min\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back_moderate\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]}),4===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_alert\"),children:nt(\"infostand.button.alert\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_kick\"),children:nt(\"infostand.button.kick\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"ambassador_mute\"),children:[nt(\"infostand.button.mute\"),Object(Kr.jsx)(ac.a,{icon:\"chevron-right\",className:\"right\"})]}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]}),5===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_mute_2min\"),children:nt(\"infostand.button.mute_2min\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_mute_10min\"),children:nt(\"infostand.button.mute_10min\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_mute_60min\"),children:nt(\"infostand.button.mute_60min\")}),Object(Kr.jsx)(th,{onClick:e=>g(\"ambassador_mute_18hr\"),children:nt(\"infostand.button.mute_18hour\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back_ambassador\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]}),6===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>g(\"rship_heart\"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-heart\"})}),Object(Kr.jsx)(th,{onClick:e=>g(\"rship_smile\"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-smile\"})}),Object(Kr.jsx)(th,{onClick:e=>g(\"rship_bobba\"),children:Object(Kr.jsx)(Qr,{pointer:!0,className:\"nitro-friends-spritesheet icon-bobba\"})})]}),Object(Kr.jsx)(th,{onClick:e=>g(\"rship_none\"),children:nt(\"avatar.widget.clear_relationship\")}),Object(Kr.jsxs)(th,{onClick:e=>g(\"back\"),children:[Object(Kr.jsx)(ac.a,{icon:\"chevron-left\",className:\"left\"}),nt(\"generic.back\")]})]})]})},oh=e=>{const{classNames:t=[],...s}=e,n=Object(c.useMemo)((()=>{const e=[\"menu-list\"];return t.length&&e.push(...t),e}),[t]);return Object(Kr.jsx)(vc,{classNames:n,...s})},lh=e=>{const{userId:t=-1,userName:s=\"\",roomIndex:n=-1}=e,{eventDispatcher:r=null}=Kd();return Object(Kr.jsxs)(ch,{objectId:n,category:a.Ig.UNIT,close:null,children:[Object(Kr.jsx)(Xd,{}),Object(Kr.jsx)(oh,{children:Object(Kr.jsx)(th,{onClick:()=>r.dispatchEvent(new ye(!1)),children:nt(\"widget.avatar.stop_decorating\")})}),Object(Kr.jsx)(ec,{className:\"menu-bottom\"})]})},uh=e=>{const{nameData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>t.id!==ee().userId),[t]);return Object(Kr.jsx)(ch,{objectId:t.roomIndex,category:t.category,userType:t.userType,fades:n,className:\"name-only\",close:s,children:Object(Kr.jsx)(\"div\",{className:\"text-shadow\",children:t.name})})},dh=e=>{const{userData:t=null,isDancing:s=!1,close:n=null}=e,[r,i]=Object(c.useState)(s&&oe()?1:0),{roomSession:o=null,eventDispatcher:l=null,widgetHandler:u=null}=Kd(),[d,h]=Object(c.useState)(!1),j=Object(c.useCallback)((e=>{let s=null,r=!0;if(e){if(e.startsWith(\"sign_\")){const t=parseInt(e.split(\"_\")[1]);o.sendSignMessage(t)}else switch(e){case\"decorate\":l.dispatchEvent(new ye(!0));break;case\"change_name\":Vt(new Et(Et.INIT));break;case\"change_looks\":y(\"avatar-editor/show\");break;case\"expressions\":r=!1,i(3);break;case\"sit\":s=new dn(dn.POSTURE_SIT);break;case\"stand\":s=new dn(dn.POSTURE_STAND);break;case\"wave\":s=new ln(a.n.WAVE);break;case\"blow\":s=new ln(a.n.BLOW);break;case\"laugh\":s=new ln(a.n.LAUGH);break;case\"idle\":s=new ln(a.n.IDLE);break;case\"dance_menu\":r=!1,i(1);break;case\"dance\":s=new On(1);break;case\"dance_stop\":s=new On(0);break;case\"dance_1\":case\"dance_2\":case\"dance_3\":case\"dance_4\":s=new On(parseInt(e.charAt(e.length-1)));break;case\"signs\":r=!1,i(4);break;case\"back\":r=!1,i(0);break;case\"drop_carry_item\":s=new Sn(Sn.DROP_CARRY_ITEM,t.webID)}s&&u.processWidgetMessage(s)}r&&n()}),[o,l,u,t,n]),b=Object(c.useMemo)((()=>t.amIOwner||t.amIAnyRoomController||t.roomControllerLevel>a.eg.GUEST),[t]),g=function(){const e=de();return!!e&&77===e.model.getValue(a.Og.FIGURE_EFFECT)}();return Object(Kr.jsxs)(ch,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:t.userType,close:n,collapsable:!0,children:[Object(Kr.jsx)(Xd,{className:\"cursor-pointer\",onClick:e=>Lr(t.webID),children:t.name}),!d&&Object(Kr.jsxs)(vc,{gap:0,children:[0===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.allowNameChange&&Object(Kr.jsx)(th,{onClick:e=>j(\"change_name\"),children:nt(\"widget.avatar.change_name\")}),b&&Object(Kr.jsx)(th,{onClick:e=>j(\"decorate\"),children:nt(\"widget.avatar.decorate\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"change_looks\"),children:nt(\"widget.memenu.myclothes\")}),oe()&&!g&&Object(Kr.jsx)(th,{onClick:e=>j(\"dance_menu\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[nt(\"widget.memenu.dance\"),Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),!s&&!oe()&&!g&&Object(Kr.jsx)(th,{onClick:e=>j(\"dance\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[nt(\"widget.memenu.dance\"),Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),s&&!oe()&&!g&&Object(Kr.jsx)(th,{onClick:e=>j(\"dance_stop\"),children:nt(\"widget.memenu.dance.stop\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"expressions\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[nt(\"infostand.link.expressions\"),Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),Object(Kr.jsx)(th,{onClick:e=>j(\"signs\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[nt(\"infostand.show.signs\"),Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),t.carryItem>0&&Object(Kr.jsx)(th,{onClick:e=>j(\"drop_carry_item\"),children:nt(\"avatar.widget.drop_hand_item\")})]}),1===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[s&&Object(Kr.jsx)(th,{onClick:e=>j(\"dance_stop\"),children:nt(\"widget.memenu.dance.stop\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"dance_1\"),children:nt(\"widget.memenu.dance1\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"dance_2\"),children:nt(\"widget.memenu.dance2\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"dance_3\"),children:nt(\"widget.memenu.dance3\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"dance_4\"),children:nt(\"widget.memenu.dance4\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"back\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),nt(\"generic.back\")]})})]}),3===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[re()===a.k.POSTURE_STAND&&Object(Kr.jsx)(th,{onClick:e=>j(\"sit\"),children:nt(\"widget.memenu.sit\")}),J()&&Object(Kr.jsx)(th,{onClick:e=>j(\"stand\"),children:nt(\"widget.memenu.stand\")}),Z()&&Object(Kr.jsx)(th,{onClick:e=>j(\"wave\"),children:nt(\"widget.memenu.wave\")}),Z()&&Object(Kr.jsxs)(th,{disabled:!le(),onClick:e=>j(\"laugh\"),children:[!le()&&Object(Kr.jsx)(Tc,{type:\"hc\"}),nt(\"widget.memenu.laugh\")]}),Z()&&Object(Kr.jsxs)(th,{disabled:!le(),onClick:e=>j(\"blow\"),children:[!le()&&Object(Kr.jsx)(Tc,{type:\"hc\"}),nt(\"widget.memenu.blow\")]}),Object(Kr.jsx)(th,{onClick:e=>j(\"idle\"),children:nt(\"widget.memenu.idle\")}),Object(Kr.jsx)(th,{onClick:e=>j(\"back\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),nt(\"generic.back\")]})})]}),4===r&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_1\"),children:\"1\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_2\"),children:\"2\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_3\"),children:\"3\"})]}),Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_4\"),children:\"4\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_5\"),children:\"5\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_6\"),children:\"6\"})]}),Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_7\"),children:\"7\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_8\"),children:\"8\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_9\"),children:\"9\"})]}),Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_10\"),children:\"10\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_11\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-heart\"})}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_12\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-skull\"})})]}),Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_0\"),children:\"0\"}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_13\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-exclamation\"})}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_15\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-smile\"})})]}),Object(Kr.jsxs)(ec,{className:\"menu-list-split-3\",children:[Object(Kr.jsx)(th,{onClick:e=>j(\"sign_14\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-soccer\"})}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_17\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-yellow\"})}),Object(Kr.jsx)(th,{onClick:e=>j(\"sign_16\"),children:Object(Kr.jsx)(\"i\",{className:\"icon icon-sign-red\"})})]}),Object(Kr.jsx)(th,{onClick:e=>j(\"back\"),children:Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),nt(\"generic.back\")]})})]})]})]})},hh=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Kd(),d=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),h=e=>{let r=null,c=null,i=!0;if(e){switch(e){case\"respect\":let e=0;o((t=>(e=t-1,e))),r=Sn.RESPECT_PET,e>0&&(i=!1);break;case\"treat\":r=Sn.TREAT_PET;break;case\"pass_handitem\":r=Sn.GIVE_CARRY_ITEM_TO_PET;break;case\"train\":break;case\"pick_up\":r=Sn.PICKUP_PET;break;case\"mount\":r=Sn.MOUNT_PET;break;case\"toggle_riding_permission\":r=Sn.TOGGLE_PET_RIDING_PERMISSION;break;case\"toggle_breeding_permission\":r=Sn.TOGGLE_PET_BREEDING_PERMISSION;break;case\"dismount\":r=Sn.DISMOUNT_PET;break;case\"saddle_off\":r=Sn.SADDLE_OFF;break;case\"breed\":0===n||3===n&&(r=Sn.REQUEST_BREED_PET);break;case\"harvest\":r=Sn.HARVEST_PET;break;case\"revive\":r=Sn.REVIVE_PET;break;case\"compost\":r=Sn.COMPOST_PLANT;break;case\"buy_saddle\":y(\"catalog/open/\"+k(\"catalog.links\")[\"pets.buy_saddle\"])}r&&(c=new Sn(r,t.id)),c&&u.processWidgetMessage(c)}i&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.vf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Kr.jsxs)(ch,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.PET,close:s,collapsable:!0,children:[Object(Kr.jsx)(Xd,{children:t.name}),0===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[i>0&&Object(Kr.jsx)(th,{onClick:e=>h(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])}),Object(Kr.jsx)(th,{onClick:e=>h(\"train\"),children:nt(\"infostand.button.train\")}),Object(Kr.jsx)(th,{onClick:e=>h(\"pick_up\"),children:nt(\"infostand.button.pickup\")}),t.petType===a.vf.HORSE&&Object(Kr.jsx)(th,{onClick:e=>h(\"buy_saddle\"),children:nt(\"infostand.button.buy_saddle\")}),[a.vf.BEAR,a.vf.TERRIER,a.vf.CAT,a.vf.DOG,a.vf.PIG].indexOf(t.petType)>-1&&Object(Kr.jsx)(th,{onClick:e=>h(\"breed\"),children:nt(\"infostand.button.breed\")})]}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>h(\"mount\"),children:nt(\"infostand.button.mount\")}),Object(Kr.jsxs)(th,{onClick:e=>h(\"toggle_riding_permission\"),gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"checkbox\",checked:!!t.publiclyRideable,readOnly:!0}),nt(\"infostand.button.toggle_riding_permission\")]}),i>0&&Object(Kr.jsx)(th,{onClick:e=>h(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])}),Object(Kr.jsx)(th,{onClick:e=>h(\"train\"),children:nt(\"infostand.button.train\")}),Object(Kr.jsx)(th,{onClick:e=>h(\"pick_up\"),children:nt(\"infostand.button.pickup\")}),Object(Kr.jsx)(th,{onClick:e=>h(\"saddle_off\"),children:nt(\"infostand.button.saddleoff\")})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>h(\"dismount\"),children:nt(\"infostand.button.dismount\")}),i>0&&Object(Kr.jsx)(th,{onClick:e=>h(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])})]}),3===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>h(\"pick_up\"),children:nt(\"infostand.button.pickup\")}),t.dead&&Object(Kr.jsx)(th,{onClick:e=>h(\"revive\"),children:nt(\"infostand.button.revive\")}),l.isRoomOwner&&Object(Kr.jsx)(th,{onClick:e=>h(\"compost\"),children:nt(\"infostand.button.compost\")}),!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Kr.jsx)(th,{onClick:e=>h(\"treat\"),children:nt(\"infostand.button.treat\")}),!t.dead&&t.level===t.maximumLevel&&t.breedable&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(th,{onClick:e=>h(\"toggle_breeding_permission\"),gap:1,children:[Object(Kr.jsx)(\"input\",{type:\"checkbox\",checked:t.publiclyBreedable,readOnly:!0}),nt(\"infostand.button.toggle_breeding_permission\")]}),Object(Kr.jsx)(th,{onClick:e=>h(\"breed\"),children:nt(\"infostand.button.breed\")})]})]}),d&&Object(Kr.jsx)(th,{onClick:e=>h(\"pass_hand_item\"),children:nt(\"infostand.button.pass_hand_item\")})]})},jh=e=>{const{petData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),{roomSession:l=null,widgetHandler:u=null}=Kd(),d=Object(c.useMemo)((()=>l.isRoomOwner||l.controllerLevel>=a.eg.GUEST||ee().isModerator),[l]),h=Object(c.useMemo)((()=>{let e=!1;const t=de();if(t){const s=t.model.getValue(a.Og.FIGURE_CARRY_OBJECT);s>0&&s<999999&&(e=!0)}return e}),[]),j=e=>{let n=null,r=null,c=!0;if(e){switch(e){case\"respect\":let e=0;o((t=>(e=t-1,e))),n=Sn.RESPECT_PET,e>0&&(c=!1);break;case\"treat\":n=Sn.TREAT_PET;break;case\"pass_handitem\":n=Sn.GIVE_CARRY_ITEM_TO_PET;break;case\"pick_up\":n=Sn.PICKUP_PET;break;case\"mount\":n=Sn.MOUNT_PET;break;case\"dismount\":n=Sn.DISMOUNT_PET}n&&(r=new Sn(n,t.id)),r&&u.processWidgetMessage(r)}c&&s()};return Object(c.useEffect)((()=>{r((e=>t.petType===a.vf.MONSTERPLANT?3:t.saddle&&!t.rider?1:t.rider?2:0)),o(t.respectsPetLeft)}),[t]),Object(Kr.jsxs)(ch,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.PET,close:s,collapsable:!0,children:[Object(Kr.jsx)(Xd,{children:t.name}),0===n&&i>0&&Object(Kr.jsx)(th,{onClick:e=>j(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])}),1===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[!!t.publiclyRideable&&Object(Kr.jsx)(th,{onClick:e=>j(\"mount\"),children:nt(\"infostand.button.mount\")}),i>0&&Object(Kr.jsx)(th,{onClick:e=>j(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])})]}),2===n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(th,{onClick:e=>j(\"dismount\"),children:nt(\"infostand.button.dismount\")}),i>0&&Object(Kr.jsx)(th,{onClick:e=>j(\"respect\"),children:nt(\"infostand.button.petrespect\",[\"count\"],[i.toString()])})]}),3===n&&!t.dead&&t.energy/t.maximumEnergy<.98&&Object(Kr.jsx)(th,{onClick:e=>j(\"treat\"),children:nt(\"infostand.button.treat\")}),d&&Object(Kr.jsx)(th,{onClick:e=>j(\"pick_up\"),children:nt(\"infostand.button.pickup\")}),h&&Object(Kr.jsx)(th,{onClick:e=>j(\"pass_hand_item\"),children:nt(\"infostand.button.pass_hand_item\")})]})},bh=e=>{const{rentableBotData:t=null,close:s=null}=e,[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(\"\"),[l,u]=Object(c.useState)(\"\"),{eventDispatcher:d=null}=Kd(),h=Object(c.useCallback)((e=>{const n=e.getParser();if(n.botId===t.webID)switch(n.commandId){case Jd.CHANGE_BOT_NAME:return o(n.data),void r(1);case Jd.CHANGE_BOT_MOTTO:return u(n.data),void r(2);case Jd.SETUP_CHAT:{const e=n.data,r=e.split(-1===e.indexOf(\";#;\")?\";\":\";#;\");return void(3!==r.length&&4!==r.length||(d.dispatchEvent(new Ge(t.roomIndex,a.Ig.UNIT,t.webID,r[0],\"true\"===r[1].toLowerCase()||\"1\"===r[1],parseInt(r[2]),!!r[3]&&(\"true\"===r[3].toLowerCase()||\"1\"===r[3]))),s()))}}}),[t,d,s]);it(a.z,h);const j=e=>$n(new a.Sf(t.webID,e)),b=e=>{let n=!0;if(e)switch(e){case\"donate_to_all\":j(Jd.DONATE_TO_ALL),$n(new a.D(t.webID,Jd.DONATE_TO_ALL,\"\"));break;case\"donate_to_user\":j(Jd.DONATE_TO_USER),$n(new a.D(t.webID,Jd.DONATE_TO_USER,\"\"));break;case\"change_bot_name\":j(Jd.CHANGE_BOT_NAME),n=!1;break;case\"save_bot_name\":$n(new a.D(t.webID,Jd.CHANGE_BOT_NAME,i));break;case\"change_bot_motto\":j(Jd.CHANGE_BOT_MOTTO),n=!1;break;case\"save_bot_motto\":$n(new a.D(t.webID,Jd.CHANGE_BOT_MOTTO,l));break;case\"dress_up\":$n(new a.D(t.webID,Jd.DRESS_UP,\"\"));break;case\"random_walk\":$n(new a.D(t.webID,Jd.RANDOM_WALK,\"\"));break;case\"setup_chat\":j(Jd.SETUP_CHAT),n=!1;break;case\"dance\":$n(new a.D(t.webID,Jd.DANCE,\"\"));break;case\"nux_take_tour\":C().createLinkEvent(\"help/tour\"),$n(new a.D(t.webID,Jd.NUX_TAKE_TOUR,\"\"));break;case\"pick\":$n(new a.B(t.webID))}n&&s()};Object(c.useEffect)((()=>{r(0)}),[t]);const g=t.amIOwner||t.amIAnyRoomController;return Object(Kr.jsxs)(ch,{objectId:t.roomIndex,category:a.Ig.UNIT,userType:a.Mg.RENTABLE_BOT,close:s,collapsable:!0,children:[Object(Kr.jsx)(Xd,{children:t.name}),0===n&&g&&Object(Kr.jsxs)(Kr.Fragment,{children:[t.botSkills.indexOf(Jd.DONATE_TO_ALL)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"donate_to_all\"),children:nt(\"avatar.widget.donate_to_all\")}),t.botSkills.indexOf(Jd.DONATE_TO_USER)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"donate_to_user\"),children:nt(\"avatar.widget.donate_to_user\")}),t.botSkills.indexOf(Jd.CHANGE_BOT_NAME)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"change_bot_name\"),children:nt(\"avatar.widget.change_bot_name\")}),t.botSkills.indexOf(Jd.CHANGE_BOT_MOTTO)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"change_bot_motto\"),children:nt(\"avatar.widget.change_bot_motto\")}),t.botSkills.indexOf(Jd.DRESS_UP)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"dress_up\"),children:nt(\"avatar.widget.dress_up\")}),t.botSkills.indexOf(Jd.RANDOM_WALK)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"random_walk\"),children:nt(\"avatar.widget.random_walk\")}),t.botSkills.indexOf(Jd.SETUP_CHAT)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"setup_chat\"),children:nt(\"avatar.widget.setup_chat\")}),t.botSkills.indexOf(Jd.DANCE)>=0&&Object(Kr.jsx)(th,{onClick:e=>b(\"dance\"),children:nt(\"avatar.widget.dance\")}),-1===t.botSkills.indexOf(Jd.NO_PICK_UP)&&Object(Kr.jsx)(th,{onClick:e=>b(\"pick\"),children:nt(\"avatar.widget.pick_up\")})]}),1===n&&Object(Kr.jsxs)(vc,{className:\"menu-item context-input-bg\",onClick:null,gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",children:nt(\"bot.skill.name.configuration.new.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:i,maxLength:k(\"bot.name.max.length\",15),onChange:e=>o(e.target.value)}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"secondary\",onClick:e=>b(null),children:nt(\"cancel\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>b(\"save_bot_name\"),children:nt(\"save\")})]})]}),2===n&&Object(Kr.jsxs)(vc,{className:\"menu-item context-input-bg\",onClick:null,gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",children:nt(\"bot.skill.name.configuration.new.motto\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:l,maxLength:k(\"motto.max.length\",38),onChange:e=>u(e.target.value)}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"secondary\",onClick:e=>b(null),children:nt(\"cancel\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>b(\"save_bot_motto\"),children:nt(\"save\")})]})]})]})},gh=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)([]),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{roomSession:f=null,eventDispatcher:x=null,widgetHandler:I=null}=Kd(),T=Object(c.useCallback)((e=>{r((t=>{const s=[...t];return s.splice(e,1),s}))}),[]),C=Object(c.useCallback)((e=>{o((t=>{const s=[...t],n=s.splice(e,1)[0];return l===n&&u(null),s}))}),[l]),N=Object(c.useCallback)((()=>{o([])}),[]),S=Object(c.useCallback)((()=>{h(null)}),[]),v=Object(c.useCallback)((()=>{s(null)}),[]),R=Object(c.useCallback)((e=>{u(e),o([])}),[]),A=Object(c.useCallback)((e=>{switch(e.type){case We.NORMAL_MODE:return void(j&&b(!1));case We.GAME_MODE:return void(j||b(!0))}}),[j]);Pt(We.NORMAL_MODE,x,A),Pt(We.GAME_MODE,x,A);const y=Object(c.useCallback)((e=>{if(t&&e.id===t.id&&s(null),e.category===a.Ig.UNIT){const t=n.findIndex((t=>t.roomIndex===e.id));t>-1&&T(t),i.length&&o((t=>t.filter((t=>t.id!==e.id))))}else e.category===a.Ig.FLOOR&&i.length&&o((t=>t.filter((t=>t.requestRoomObjectId!==e.id))));d&&(d instanceof Pe?d.id===e.id&&S():d instanceof Fe||d instanceof Le?d.roomIndex===e.id&&S():d instanceof Me&&d.roomIndex===e.id&&S())}),[t,d,n,i,T,S]);Pt(Ve.USER_REMOVED,x,y),Pt(Ve.FURNI_REMOVED,x,y);const w=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_ROLL_OVER:{const t=e;if(d)return;return void I.processWidgetMessage(new Cn(Cn.GET_OBJECT_NAME,t.id,t.category))}case Ve.OBJECT_ROLL_OUT:{const n=e;if(!t||t.roomIndex!==n.id)return;return void s(null)}}}),[d,t,I]);Pt(Ve.OBJECT_ROLL_OVER,x,w),Pt(Ve.OBJECT_ROLL_OUT,x,w);const k=Object(c.useCallback)((e=>{d&&S(),i.length&&o([])}),[d,i,S]);Pt(Ve.OBJECT_DESELECTED,x,k);const D=Object(c.useCallback)((e=>{e.category===a.Ig.UNIT&&(s(e),N())}),[N]);Pt(Ie.TYPE,x,D);const U=Object(c.useCallback)((e=>{t&&s(null),e.type===Pe.FURNI?S():h(e),N()}),[t,S,N]);Pt(Pe.FURNI,x,U),Pt(Fe.OWN_USER,x,U),Pt(Fe.PEER,x,U),Pt(Fe.BOT,x,U),Pt(Le.RENTABLE_BOT,x,U),Pt(Me.PET_INFO,x,U);const P=Object(c.useCallback)((e=>{O(e.isDancing)}),[]);Pt(Ae.UPDATE_DANCE,x,P);const M=Object(c.useCallback)((e=>{E(e)}),[]);Pt(Ge.UPDATE_CHAT,x,M);const L=Object(c.useCallback)((e=>{u(null),o((t=>{const s=[...t];for(const n of e.items){const e=s.findIndex((e=>e.id===n.id));e>-1&&s.splice(e,1),s.push(n)}return s}))}),[]);Pt(Ke.USE_PRODUCT_BUBBLES,x,L);const F=Object(c.useCallback)((e=>{p(e.isDecorating)}),[]);Pt(ye.UPDATE_DECORATE,x,F);const H=Object(c.useMemo)((()=>{if(ie().isDecorating=m,!m)return null;const e=ee().userId,t=ee().userName,s=ie().ownRoomIndex;return Object(Kr.jsx)(lh,{userId:e,userName:t,roomIndex:s})}),[m]),B=Object(c.useMemo)((()=>{if(j)return null;if(H)return H;if(t){const e=n.findIndex((e=>e.roomIndex===t.roomIndex));return e>-1&&T(e),Object(Kr.jsx)(uh,{nameData:t,close:v})}if(d)switch(d.type){case Fe.OWN_USER:case Fe.PEER:{const e=d;if(e.isSpectatorMode)return null;const t=n.findIndex((t=>t.roomIndex===e.roomIndex));return t>-1&&T(t),e.isOwnUser?a.ug.isRunning()?null:Object(Kr.jsx)(dh,{userData:e,isDancing:g,close:S}):Object(Kr.jsx)(ah,{userData:e,close:S})}case Me.PET_INFO:{const e=d;return e.isOwner?Object(Kr.jsx)(hh,{petData:e,close:S}):Object(Kr.jsx)(jh,{petData:e,close:S})}case Le.RENTABLE_BOT:return Object(Kr.jsx)(bh,{rentableBotData:d,close:S});case Pe.FURNI:return null}return null}),[j,H,t,n,g,d,v,S,T]);return Object(Kr.jsxs)(Kr.Fragment,{children:[B,n.length>0&&n.map(((e,t)=>Object(Kr.jsx)(uh,{nameData:e,close:()=>T(t)},t))),i.length>0&&i.map(((e,t)=>Object(Kr.jsx)(ih,{item:e,updateConfirmingProduct:R,close:()=>C(t)},e.id))),_&&Object(Kr.jsx)(Zd,{chatEvent:_,close:()=>E(null)}),l&&Object(Kr.jsx)(eh,{item:l,close:()=>u(null)})]})},Oh=e=>{const{chatStyleId:t=0,chatStyleIds:s=null,selectChatStyleId:n=null}=e,[r,i]=Object(c.useState)(null),[a,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{a||i(null)}),[a]),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"chatstyles-selector cursor-pointer\",onClick:e=>{let t=!1;o((e=>(t=!e,t))),t&&i(e.target)}}),Object(Kr.jsx)(fd.a,{show:a,target:r,placement:\"top\",children:Object(Kr.jsx)(Ul.a,{className:\"nitro-chat-style-selector-container\",children:Object(Kr.jsx)(uc,{overflow:\"hidden\",className:\"bg-transparent bubble-window image-rendering-pixelated\",children:Object(Kr.jsx)(Jr,{gap:1,columnCount:3,overflow:\"auto\",children:s&&s.length>0&&s.map((e=>Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"bubble-parent-container\",onClick:t=>(e=>{n(e),o(!1)})(e),children:Object(Kr.jsx)(Qr,{className:\"bubble-container\",children:Object(Kr.jsx)(Qr,{className:`chat-bubble bubble-${e}`,children:\"\\xa0\"})},e)},e)))})})})})]})},mh=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(\"\"),[i,o]=Object(c.useState)(!1),[l,u]=Object(c.useState)(!1),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(ee().chatStyle),[g,O]=Object(c.useState)(!1),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(0),{eventDispatcher:f=null,widgetHandler:x=null}=Kd(),I=Object(c.useRef)(),T=Object(c.useMemo)((()=>nt(\"widgets.chatinput.mode.whisper\")),[]),C=Object(c.useMemo)((()=>nt(\"widgets.chatinput.mode.shout\")),[]),N=Object(c.useMemo)((()=>nt(\"widgets.chatinput.mode.speak\")),[]),S=Object(c.useMemo)((()=>k(\"chat.input.maxlength\",100)),[]),v=Object(c.useCallback)((()=>{const e=document.activeElement;return!!e&&((!I||I.current!==e)&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))}),[I]),R=Object(c.useCallback)((()=>{I.current.focus(),I.current.setSelectionRange(2*I.current.value.length,2*I.current.value.length)}),[I]),A=Object(c.useCallback)((()=>{s((e=>e===T&&n.length?`${e} ${n}`:e))}),[n,T]),y=Object(c.useCallback)((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(\"\"),x.processWidgetMessage(new hn(hn.MESSAGE_CHAT,e,t,n,r))}),[x]),w=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||\"\"===e)return;let n=t?hn.CHAT_SHOUT:hn.CHAT_DEFAULT,r=e;const c=r.split(\" \");let i=\"\",a=\"\";switch(c[0]){case T:n=hn.CHAT_WHISPER,i=c[1],a=T+\" \"+i+\" \",c.shift(),c.shift();break;case C:n=hn.CHAT_SHOUT,c.shift();break;case N:n=hn.CHAT_DEFAULT,c.shift()}r=c.join(\" \"),o(!1),h(!1),r.length<=S&&(g&&(ee().sendChatStyleUpdate(j),O(!1)),y(r,n,i,j)),s(a)}),[T,C,N,S,j,g,y]),D=Object(c.useCallback)((e=>{e&&e.length?(o(!0),h(!0)):o(!1),s(e)}),[]),U=Object(c.useCallback)((e=>{if(m||!I.current||v())return;document.activeElement!==I.current&&R();const t=e.target.value;switch(e.key){case\" \":case\"Space\":return void A();case\"NumpadEnter\":case\"Enter\":return void w(t,e.shiftKey);case\"Backspace\":if(t){const e=t.split(\" \");e[0]===T&&3===e.length&&\"\"===e[2]&&s(\"\")}return}}),[m,I,T,v,R,A,w]),P=Object(c.useCallback)((e=>{r(\"\")}),[]);Pt(Ve.OBJECT_DESELECTED,f,P);const M=Object(c.useCallback)((e=>{r(e.name)}),[]);Pt(Fe.PEER,f,M);const L=Object(c.useCallback)((e=>{switch(e.chatMode){case Se.WHISPER:return void s(`${T} ${e.userName} `);case Se.SHOUT:return}}),[T]);Pt(Se.CHAT_INPUT_CONTENT,f,L);const F=Object(c.useCallback)((e=>{p(!0),E(e.seconds)}),[]);Pt(xe.FLOOD_CONTROL,f,F);const H=Object(c.useCallback)((e=>{b(e),O(!0)}),[]),B=Object(c.useMemo)((()=>{let e=[];const t=k(\"chat.styles\");for(const s of t)s&&(s.minRank>0?ee().hasSecurity(s.minRank)&&e.push(s.styleId):s.isSystemStyle&&ee().hasSecurity(a.eg.MODERATOR)?e.push(s.styleId):k(\"chat.styles.disabled\").indexOf(s.styleId)>=0||(s.isHcOnly&&te()>=a.Ed.CLUB||s.isAmbassadorOnly&&ee().isAmbassador?e.push(s.styleId):s.isHcOnly||s.isAmbassadorOnly||e.push(s.styleId)));return e}),[]);return Object(c.useEffect)((()=>{i?l||(u(!0),x.processWidgetMessage(new bn(i))):l&&(u(!1),x.processWidgetMessage(new bn(i)))}),[x,i,l]),Object(c.useEffect)((()=>{if(!d)return;let e=null;return d&&(e=setTimeout((()=>{h(!1),o(!1)}),1e4)),()=>clearTimeout(e)}),[d]),Object(c.useEffect)((()=>{if(!m)return;let e=0;const t=setInterval((()=>{E((t=>(e=(t||0)-1,e))),e<0&&(clearInterval(t),p(!1))}),1e3);return()=>clearInterval(t)}),[m]),Object(c.useEffect)((()=>(document.body.addEventListener(\"keydown\",U),()=>{document.body.removeEventListener(\"keydown\",U)})),[U]),Object(c.useEffect)((()=>{I.current&&(I.current.parentElement.dataset.value=t)}),[t]),ie().isSpectator?null:Object(gc.createPortal)(Object(Kr.jsxs)(\"div\",{className:\"nitro-chat-input-container\",children:[Object(Kr.jsx)(Oh,{chatStyleId:j,chatStyleIds:B,selectChatStyleId:H}),Object(Kr.jsxs)(\"div\",{className:\"input-sizer align-items-center\",children:[!m&&Object(Kr.jsx)(\"input\",{ref:I,type:\"text\",className:\"chat-input\",placeholder:nt(\"widgets.chatinput.default\"),value:t,maxLength:S,onChange:e=>D(e.target.value),onMouseDown:e=>R()}),m&&Object(Kr.jsxs)(ei,{variant:\"danger\",children:[nt(\"chat.input.alert.flood\",[\"time\"],[_.toString()]),\" \"]})]})]}),document.getElementById(\"toolbar-chat-input-container\"))},ph=e=>{const{chat:t=null,makeRoom:s=null,onChatClicked:n=null,bubbleWidth:r=a.bg.CHAT_BUBBLE_WIDTH_NORMAL}=e,[i,o]=Object(c.useState)(!1),l=Object(c.useRef)(),u=Object(c.useMemo)((()=>{switch(r){case a.bg.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case a.bg.CHAT_BUBBLE_WIDTH_THIN:return 240;case a.bg.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}}),[r]);return Object(c.useEffect)((()=>{const e=l.current;if(!e)return;const n=e.offsetWidth,r=e.offsetHeight;t.width=n,t.height=r,t.elementRef=e;let c=t.left,i=t.top;return c||i||(c=t.location.x-n/2,i=e.parentElement.offsetHeight-r,t.left=c,t.top=i),t.visible||(s(t),t.visible=!0),()=>{t.elementRef=null}}),[l,t,s]),Object(c.useEffect)((()=>o(t.visible)),[t.visible]),Object(Kr.jsxs)(\"div\",{ref:l,className:\"bubble-container \"+(i?\"visible\":\"invisible\"),onClick:e=>n(t),children:[0===t.styleId&&Object(Kr.jsx)(\"div\",{className:\"user-container-bg\",style:{backgroundColor:t.color}}),Object(Kr.jsxs)(\"div\",{className:`chat-bubble bubble-${t.styleId} type-${t.type}`,style:{maxWidth:u},children:[Object(Kr.jsx)(\"div\",{className:\"user-container\",children:t.imageUrl&&t.imageUrl.length>0&&Object(Kr.jsx)(\"div\",{className:\"user-image\",style:{backgroundImage:`url(${t.imageUrl})`}})}),Object(Kr.jsxs)(\"div\",{className:\"chat-content\",children:[Object(Kr.jsx)(\"span\",{className:\"username mr-1\",dangerouslySetInnerHTML:{__html:`${t.username}: `}}),Object(Kr.jsx)(\"span\",{className:\"message\",dangerouslySetInnerHTML:{__html:`${t.formattedText}`}})]}),Object(Kr.jsx)(\"div\",{className:\"pointer\"})]})]})};class _h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:\"\",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:\"\",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:\"\",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;this.senderId=e,this.senderCategory=t,this.roomId=s,this.text=n,this.formattedText=r,this.username=c,this.location=i,this.type=a,this.styleId=o,this.imageUrl=l,this.color=u,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.visible=!1,this.skipMovement=!1,this._top=0,this._left=0,this.id=++_h.BUBBLE_COUNTER}get top(){return this._top}set top(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+\"px\")}get left(){return this._left}set left(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+\"px\")}}_h.BUBBLE_COUNTER=0;const Eh=function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!(e.left+n+e.width<t.left+n||e.left+n>t.left+n+t.width||e.top+e.height<t.top+s||e.top>t.top+s+t.height)};let fh=0;const xh=e=>{const[t,s]=Object(c.useState)({mode:a.bg.CHAT_MODE_FREE_FLOW,weight:a.bg.CHAT_BUBBLE_WIDTH_NORMAL,speed:a.bg.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:a.bg.FLOOD_FILTER_NORMAL}),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(fh++),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Kd(),h=Object(c.useRef)(),j=Object(c.useCallback)((()=>{r((e=>{if(e){const t=e.filter((e=>e.top>2*-e.height));if(t.length!==e.length)return t}return e}))}),[]),b=Object(c.useCallback)((e=>{r((t=>(t&&t.forEach((t=>{t.skipMovement?t.skipMovement=!1:t.top-=e})),t))),j()}),[j]),g=Object(c.useCallback)(((e,t,s)=>{const r=n.length;if(r)for(let c=r-1;c>=0;c--){const r=n[c];if(!(!r||e===r||s.indexOf(r)>=0||r.top-t>=e.top+e.height)&&Eh(e,r,-t,4)){const t=Math.abs(r.top+r.height-e.top);s.push(r),r.top-=t,r.skipMovement=!0,g(r,t,s)}}}),[n]),O=Object(c.useCallback)((e=>{if(t.mode===a.bg.CHAT_MODE_FREE_FLOW)e.skipMovement=!0,g(e,0,[e]),j();else{const t=e.top+e.height,s=e.height,r=h.current.offsetHeight-t,c=s-r;r<s&&(n.forEach((t=>{t!==e&&(t.top-=c)})),j())}}),[t,n,j,g]),m=Object(c.useCallback)((e=>{const t=new _h(e.userId,e.userCategory,e.roomId,e.text,function(e){let t=\"\";if(e=e.replace(/([\\u00A0-\\u9999<>&])(.|$)/g,(function(e,t,s){return\"&\"!==t||\"#\"!==s?(/[\\u00A0-\\u9999<>&]/.test(s)&&(s=\"&#\"+s.charCodeAt(0)+\";\"),\"&#\"+t.charCodeAt(0)+\";\"+s):e})),(e=rn.shortnameToUnicode(e)).startsWith(\"@\")&&e.indexOf(\"@\",1)>-1){let s=null;for(;null!==(s=/@[a-zA-Z]+@/g.exec(e));){const n=s[0].toString(),r=n.substr(1,n.length-2),c=e.replace(n,\"\");t=cn.has(r)?'<span style=\"color: '+cn.get(r)+'\">'+c+\"</span>\":c;break}}else t=e;return t}(e.text),e.userName,new a.Xe(e.userX,e.userY),e.chatType,e.styleId,e.userImage,e.userColor&&(\"#\"+e.userColor.toString(16).padStart(6,\"0\")||!1));r((e=>[...e,t]))}),[]);Pt(Ne.CHAT_EVENT,u,m);const p=Object(c.useCallback)((e=>{if(!n.length||e.roomId!==l.roomId)return;const t=e.offsetX;n.forEach((e=>e.elementRef&&(e.left+=t)))}),[l,n]);Bt(a.mg.ROOM_DRAG,p);const _=Object(c.useCallback)((e=>{d.processWidgetMessage(new Cn(Cn.GET_OBJECT_INFO,e.senderId,e.senderCategory)),d.processWidgetMessage(new jn(jn.MESSAGE_SELECT_AVATAR,e.senderId,e.username,e.roomId))}),[d]),E=Object(c.useCallback)((()=>{if(!t)return 6e3;switch(t.speed){case a.bg.CHAT_SCROLL_SPEED_FAST:return 3e3;case a.bg.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case a.bg.CHAT_SCROLL_SPEED_SLOW:return 12e3}}),[t]),f=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&s(t.chat)}),[]);it(a.nc,f);const x=Object(c.useCallback)((e=>{const t=e.getParser();s(t.chat)}),[]);it(a.cg,x),Object(c.useEffect)((()=>{const e=e=>{if(!h||!h.current)return;const t=h.current.offsetHeight,s=Math.round(document.body.offsetHeight*k(\"chat.viewer.height.percentage\"));h.current.style.height=`${s}px`,r((e=>(e&&e.forEach((e=>e.top-=t-s)),e)))};return window.addEventListener(\"resize\",e),e(),()=>{window.removeEventListener(\"resize\",e)}}),[]);const I=Object(c.useCallback)((e=>{\"MOVE_CHATS\"!==e.type||b(15)}),[b]);return Object(c.useEffect)((()=>{const e={workerMessageReceived:I};var t;return t=e,C().addWorkerEventTracker(t),Xn({type:\"CREATE_INTERVAL\",time:E(),timerId:i,response:{type:\"MOVE_CHATS\"}}),()=>{Xn({type:\"REMOVE_INTERVAL\",timerId:i}),(e=>{C().removeWorkerEventTracker(e)})(e)}}),[i,I,E]),Object(Kr.jsx)(\"div\",{ref:h,className:\"nitro-chat-widget\",children:n.map((e=>Object(Kr.jsx)(ph,{chat:e,makeRoom:O,onChatClicked:_,bubbleWidth:t.weight},e.id)))})},Ih=e=>{const{title:t=null,items:s=null,displayItemId:n=!1,onCloseClick:r=null}=e,[i,a]=Object(c.useState)(null),[o,l]=Object(c.useState)(\"\"),{widgetHandler:u=null}=Kd(),d=Object(c.useMemo)((()=>{if(!s)return[];if(!o||!o.length)return s;const e=o.toLocaleLowerCase();return s.filter((t=>t.name.toLocaleLowerCase().includes(e)))}),[s,o]),h=Object(c.useCallback)((e=>{a(e),u.processWidgetMessage(new Cn(Cn.SELECT_OBJECT,e.id,e.category))}),[u,a]),j=e=>{const t=d[e.index];return Object(Kr.jsx)(ec,{alignItems:\"center\",position:\"absolute\",className:\"rounded px-1\"+(i===t?\" bg-muted\":\"\"),pointer:!0,style:e.style,onClick:e=>h(t),children:Object(Kr.jsxs)(ei,{truncate:!0,children:[t.name,\" \",n&&\" - \"+t.id]})},e.key)};return Object(Kr.jsxs)(Ec,{className:\"nitro-chooser-widget\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:t,onCloseClick:r}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:nt(\"generic.search\"),value:o,onChange:e=>l(e.target.value)}),Object(Kr.jsx)(vc,{fullHeight:!0,overflow:\"auto\",children:Object(Kr.jsx)(io.a,{defaultWidth:0,defaultHeight:0,children:e=>{let{width:t,height:s}=e;return Object(Kr.jsx)(io.d,{width:t,height:s,rowCount:d.length,rowHeight:20,rowRenderer:j})}})})]})]})},Th=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),{eventDispatcher:l=null,widgetHandler:u=null}=Kd(),d=Object(c.useCallback)((()=>{t&&o((e=>(e&&clearTimeout(e),setTimeout((()=>u.processWidgetMessage(new Tn(Tn.FURNI_CHOOSER))),100))))}),[t,u]),h=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);Pt(fe.FURNI_CHOOSER_CONTENT,l,h);const j=Object(c.useCallback)((e=>{if(t)switch(e.type){case Ve.FURNI_ADDED:case Ve.FURNI_REMOVED:return void d()}}),[t,d]);Pt(Ve.FURNI_ADDED,l,j),Pt(Ve.FURNI_REMOVED,l,j);const b=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return n?Object(Kr.jsx)(Ih,{title:nt(\"widget.chooser.furni.title\"),displayItemId:ee().hasSecurity(a.Hh.MODERATOR),items:n,onCloseClick:b}):null},Ch=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(null),{eventDispatcher:o=null,widgetHandler:l=null}=Kd(),u=Object(c.useCallback)((()=>{t&&a((e=>(e&&clearTimeout(e),setTimeout((()=>l.processWidgetMessage(new Tn(Tn.USER_CHOOSER))),100))))}),[t,l]),d=Object(c.useCallback)((e=>{r(e.items),s(!0)}),[]);Pt(fe.USER_CHOOSER_CONTENT,o,d);const h=Object(c.useCallback)((e=>{if(t)switch(e.type){case Ve.USER_ADDED:case Ve.USER_REMOVED:return void u()}}),[t,u]);Pt(Ve.USER_ADDED,o,h),Pt(Ve.USER_REMOVED,o,h);const j=Object(c.useCallback)((()=>{s(!1),r(null)}),[]);return t?Object(Kr.jsx)(Ih,{title:nt(\"widget.chooser.user.title\"),displayItemId:!1,items:n,onCloseClick:j}):null},Nh=e=>{const[t,s]=Object(c.useState)(!1),{users:n=[],answer:r=null}=xs();return Object(c.useEffect)((()=>{s(!!n.length)}),[n]),t?Object(Kr.jsxs)(Ec,{className:\"nitro-widget-doorbell\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"navigator.doorbell.title\"),onCloseClick:e=>s(!1)}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",gap:0,children:[Object(Kr.jsx)(vc,{gap:2,children:Object(Kr.jsx)(Jr,{gap:1,className:\"px-1 pb-1\",children:Object(Kr.jsx)(ei,{small:!0,className:\"g-col-10\",children:nt(\"widgets.doorbell.info\")})})}),Object(Kr.jsx)(vc,{overflow:\"auto\",className:\"striped-children\",gap:0,children:n&&n.length>0&&n.map((e=>Object(Kr.jsxs)(Jr,{gap:1,alignItems:\"center\",className:\"text-black p-1\",children:[Object(Kr.jsx)(ei,{small:!0,className:\"g-col-6\",children:e}),Object(Kr.jsx)(Qr,{className:\"g-col-6\",children:Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-accept-check cursor-pointer\",onClick:()=>r(e,!0)}),Object(Kr.jsx)(\"i\",{className:\"icon icon-decline-x cursor-pointer\",onClick:()=>r(e,!1)})]})})]},e)))})]})]}):null},Sh=e=>{const{objectId:t=-1,category:s=-1,noFollow:n=!1,position:r=\"absolute\",...i}=e,[a,o]=Object(c.useState)({x:-1,y:-1}),l=Object(c.useRef)(),u=Object(c.useCallback)((()=>{const e=ie();return he(e.roomId,t,s,1)}),[t,s]),d=Object(c.useCallback)((()=>{const e=u();e&&l.current&&o({x:Math.round(e.left+e.width/2-l.current.offsetWidth/2),y:Math.round(e.top-l.current.offsetHeight+10)})}),[u]);return Object(c.useEffect)((()=>{let e=!1;return n?d():(e=!0,C().ticker.add(d)),()=>{e&&C().ticker.remove(d)}}),[d,n]),Object(Kr.jsx)(Qr,{innerRef:l,position:r,visible:a.x+(l.current?l.current.offsetWidth:0)>-1,className:\"object-location\",style:{left:a.x,top:a.y},...i})},vh=e=>{const{roomIndex:t=-1,request:s=null,hideFriendRequest:n=null}=e,{requestResponse:r=null}=es();return Object(Kr.jsx)(Sh,{objectId:t,category:a.Ig.UNIT,children:Object(Kr.jsx)(Qr,{className:\"nitro-friend-request-dialog p-2\",children:Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:2,children:[Object(Kr.jsx)(ei,{small:!0,bold:!0,variant:\"white\",className:\"w-75\",children:nt(\"widget.friendrequest.from\",[\"username\"],[s.name])}),Object(Kr.jsx)(\"i\",{className:\"friend-req-close\",onClick:e=>n(s.requesterUserId)})]}),Object(Kr.jsxs)(ec,{children:[Object(Kr.jsx)(ei,{small:!0,className:\"mt-2 cursor-pointer\",underline:!0,onClick:e=>r(s.requesterUserId,!1),children:nt(\"widget.friendrequest.decline\")}),Object(Kr.jsx)(tc,{className:\"accept-friend-btn\",onClick:e=>r(s.requesterUserId,!0),children:nt(\"widget.friendrequest.accept\")})]})]})})})},Rh=e=>{const[t,s]=Object(c.useState)([]),[n,r]=Object(c.useState)([]),{roomSession:i=null,eventDispatcher:o=null}=Kd(),{requests:l=[]}=es(),u=e=>{r((t=>{if(t.indexOf(e)>=0)return t;const s=[...t];return s.push(e),s}))},d=Object(c.useCallback)((e=>{if(e.category!==a.Ig.UNIT)return;const n=i.userDataManager.getUserDataByIndex(e.id);if(n&&n.type===a.Ng.getTypeNumber(a.Ng.USER)){if(e.type===Ve.USER_ADDED){const e=l.find((e=>e.requesterUserId===n.webID));if(!e||t.find((e=>e.request.requesterUserId===n.webID)))return;const r=[...t];r.push({roomIndex:n.roomIndex,request:e}),s(r)}}else if(e.type===Ve.USER_REMOVED){const n=t.findIndex((t=>t.roomIndex===e.id));if(-1===n)return;const r=[...t];r.splice(n,1),s(r)}}),[i,l,t]);return Pt(Ve.USER_ADDED,o,d),Pt(Ve.USER_REMOVED,o,d),Object(c.useEffect)((()=>{if(!l||!l.length)return;const e=[];for(const t of l){const s=i.userDataManager.getUserData(t.requesterUserId);s&&e.push({roomIndex:s.roomIndex,request:t})}s(e)}),[i,l]),l.length?Object(Kr.jsx)(Kr.Fragment,{children:t.map(((e,t)=>n.indexOf(e.request.requesterUserId)>=0?null:Object(Kr.jsx)(vh,{roomIndex:e.roomIndex,request:e.request,hideFriendRequest:u},t)))}):null},Ah=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(0),[l,u]=Object(c.useState)(0),{roomSession:d=null,eventDispatcher:h=null}=Kd(),j=Object(c.useCallback)((()=>{h.dispatchEvent(new Ce(Ce.CLEAR_PREVIEW)),s(-1)}),[h]),b=Object(c.useCallback)((()=>d.isRoomOwner||d.controllerLevel>=a.eg.GUEST||ee().isModerator),[d]),g=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_BACKGROUND_COLOR:{if(!b())return;const t=L().getRoomObject(e.roomId,e.objectId,e.category),n=t.model;return s(t.id),r(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_HUE))),o(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION))),void u(parseInt(n.getValue(a.Og.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)))}case Ve.FURNI_REMOVED:if(t!==e.objectId)return;return void j()}}),[t,b,j]);Bt(a.sg.REQUEST_BACKGROUND_COLOR,g),Pt(Ve.FURNI_REMOVED,h,g);const O=Object(c.useCallback)((e=>{switch(e){case\"apply\":$n(new a.h(t,n,i,l));break;case\"toggle\":d.useMultistateItem(t)}}),[d,t,n,i,l]);return Object(c.useEffect)((()=>{-1!==t&&h.dispatchEvent(new Ce(Ce.PREVIEW,n,i,l))}),[h,t,n,i,l]),-1===t?null:Object(Kr.jsxs)(Ec,{theme:\"primary\",className:\"nitro-room-widget-toner\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"widget.backgroundcolor.title\"),onCloseClick:j}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",justifyContent:\"between\",children:[Object(Kr.jsxs)(vc,{overflow:\"auto\",gap:1,children:[Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"widget.backgroundcolor.hue\")}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:360,value:n,onChange:e=>r(e),thumbClassName:\"thumb degree\",renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:t.valueNow})})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"widget.backgroundcolor.saturation\")}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:255,value:i,onChange:e=>o(e),thumbClassName:\"thumb percent\",renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:t.valueNow})})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{bold:!0,children:nt(\"widget.backgroundcolor.lightness\")}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:255,value:l,onChange:e=>u(e),thumbClassName:\"thumb percent\",renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:t.valueNow})})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"primary\",onClick:e=>O(\"toggle\"),children:nt(\"widget.backgroundcolor.button.on\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"primary\",onClick:e=>O(\"apply\"),children:nt(\"widget.backgroundcolor.button.apply\")})]})]})]})};class yh{constructor(e,t,s,n,r,c,i){this.objectId=e,this.category=t,this.color=s,this.ownerName=n,this.date=r,this.message=c,this.customTitle=i}}const wh=e=>{const[t,s]=Object(c.useState)(null),{widgetHandler:n=null}=Kd(),r=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:case a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING:{const t=e,n=L().getRoomObject(t.roomId,t.objectId,t.category);if(!n)return;const r=new a.Qh;r.initializeFromRoomObjectModel(n.model);const c=et(r.getValue(1)),i=Ze(r.getValue(1)),o=r.getValue(2),l=r.getValue(3);return void s(new yh(t.objectId,t.category,\"1\",l,o,i,c))}case Ve.FURNI_REMOVED:{const t=e;return void s((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING,r),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,r),Pt(Ve.FURNI_REMOVED,n.eventDispatcher,r);const i=Object(c.useCallback)((function(e){\"close\"!==e||s(null)}),[]);return t?Object(Kr.jsx)(Kc,{color:t.color,message:t.message,date:t.date,senderName:t.ownerName,customTitle:t.customTitle,onCloseClick:()=>i(\"close\")}):null},kh=e=>{const{objectId:t=-1,close:s=null}=e,{roomSession:n=null}=Kd();return Object(Kr.jsxs)(Ec,{className:\"nitro-use-product-confirmation\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"effectbox.header.title\"),onCloseClick:s}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsx)(ec,{gap:2,children:Object(Kr.jsxs)(vc,{justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{children:nt(\"effectbox.header.description\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:s,children:nt(\"generic.cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>{n.useMultistateItem(t),s()},children:nt(\"generic.ok\")})]})]})})})]})},Dh=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(-1),{roomSession:l=null,widgetHandler:u=null}=Kd();return Object(c.useEffect)((()=>{if(!l||-1===t)return;const e=ne(l.roomId,t,a.Ig.FLOOR);if(!e)return;r(e);let n=-1;if(e.specialType===Rs.MONSTERPLANT_SEED)n=0;-1!==n?o(n):s()}),[l,t,s]),-1===i?null:Object(Kr.jsxs)(Ec,{className:\"nitro-use-product-confirmation\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"useproduct.widget.title.plant_seed\",[\"name\"],[n.name]),onCloseClick:s}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{children:Object(Kr.jsx)(Qr,{className:\"product-preview\",children:Object(Kr.jsx)(Qr,{className:\"monsterplant-image\"})})}),Object(Kr.jsxs)(vc,{justifyContent:\"between\",overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{gap:2,children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.plant_seed\",[\"productName\"],[n.name])}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.plant_seed\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:s,children:nt(\"useproduct.widget.cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>{u.processWidgetMessage(new Nn(Nn.MONSTERPLANT_SEED,t)),s()},children:nt(\"widget.monsterplant_seed.button.use\")})]})]})]})})]})},Uh=e=>{const{objectId:t=-1,close:s=null}=e,[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(ji.MALE),[l,u]=Object(c.useState)(null),{roomSession:d=null}=Kd();return Object(c.useEffect)((()=>{let e=-1;const n=ee().figure,c=ee().gender,i=[];if(d&&t>=0){const s=ne(d.roomId,t,a.Ig.FLOOR);if(s&&s.specialType===Rs.FIGURE_PURCHASABLE_SET){e=0;const t=s.customParams.split(\",\").map((e=>parseInt(e)));for(const e of t)S().isValidFigureSetForGender(e,c)&&i.push(e)}}-1!==e?(o(c),u(S().getFigureStringWithFigureIds(n,c,i)),r(e)):s()}),[d,t,s]),-1===n?null:Object(Kr.jsxs)(Ec,{className:\"nitro-use-product-confirmation\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"useproduct.widget.title.bind_clothing\"),onCloseClick:s}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{children:Object(Kr.jsx)(Qr,{className:\"mannequin-preview\",children:Object(Kr.jsx)(fc,{figure:l,direction:2})})}),Object(Kr.jsxs)(vc,{justifyContent:\"between\",overflow:\"auto\",children:[Object(Kr.jsxs)(vc,{gap:2,children:[Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.text.bind_clothing\")}),Object(Kr.jsx)(ei,{children:nt(\"useproduct.widget.info.bind_clothing\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(tc,{variant:\"danger\",onClick:s,children:nt(\"useproduct.widget.cancel\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>{D().send(new a.If(t)),D().send(new a.Di(i,l)),s()},children:nt(\"useproduct.widget.bind_clothing\")})]})]})]})})]})},Ph=\"MONSTERPLANT_SEED_CONFIRMATION\",Mh=\"PURCHASABLE_CLOTHING_CONFIRMATION\",Lh=\"GROUP_FURNITURE\",Fh=\"EFFECTBOX_OPEN\",Hh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(-1),[d,h]=Object(c.useState)(null),[j,b]=Object(c.useState)(!1),{roomSession:g=null,widgetHandler:O=null}=Kd(),m=Object(c.useCallback)((()=>{s(-1),h(null),b(!1),r(null)}),[]),p=()=>{o(null),u(-1)},_=Object(c.useCallback)((e=>{const n=L().getRoomObject(g.roomId,e.objectId,e.category);if(n)switch(e.type){case a.sg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!K(n))return;return u(n.id),o(Ph),void m();case a.sg.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!K(n))return;return u(n.id),o(Fh),void m();case a.sg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!K(n))return;return u(n.id),o(Mh),void m();case a.sg.OPEN_FURNI_CONTEXT_MENU:switch(s(n.id),e.contextMenu){case a.nb.FRIEND_FURNITURE:return void r(a.nb.FRIEND_FURNITURE);case a.nb.MONSTERPLANT_SEED:return void(K(n)&&r(a.nb.MONSTERPLANT_SEED));case a.nb.MYSTERY_BOX:return;case a.nb.RANDOM_TELEPORT:return void r(a.nb.RANDOM_TELEPORT);case a.nb.PURCHASABLE_CLOTHING:return void(K(n)&&r(a.nb.PURCHASABLE_CLOTHING))}return;case a.sg.CLOSE_FURNI_CONTEXT_MENU:return void(n.id===t&&m())}}),[g,t,m]);Bt(a.sg.OPEN_FURNI_CONTEXT_MENU,_),Bt(a.sg.CLOSE_FURNI_CONTEXT_MENU,_),Bt(a.sg.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,_),Bt(a.sg.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,_),Bt(a.sg.REQUEST_EFFECTBOX_OPEN_DIALOG,_);const E=Object(c.useCallback)((e=>{const t=e.getParser();s(t.objectId),h(t),b(t.userIsMember),r(Lh)}),[]);it(a.Sc,E);const f=e=>{if(e)switch(e){case\"use_friend_furni\":g.useMultistateItem(t);break;case\"use_monsterplant_seed\":o(Ph),u(t);break;case\"use_random_teleport\":O.processWidgetMessage(new En(En.USE,t,a.Ig.FLOOR));break;case\"use_purchaseable_clothing\":o(Mh),u(t);break;case\"join_group\":return Ir(d.guildId),void b(!0);case\"go_to_group_homeroom\":d&&Ar(d.guildHomeRoomId)}m()};return Object(Kr.jsxs)(Kr.Fragment,{children:[i===Ph&&Object(Kr.jsx)(Dh,{objectId:l,close:p}),i===Mh&&Object(Kr.jsx)(Uh,{objectId:l,close:p}),i===Fh&&Object(Kr.jsx)(kh,{objectId:l,close:p}),t>=0&&n&&Object(Kr.jsxs)(ch,{objectId:t,category:a.Ig.FLOOR,close:m,fades:!0,collapsable:!0,children:[n===a.nb.FRIEND_FURNITURE&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xd,{children:nt(\"friendfurni.context.title\")}),Object(Kr.jsx)(th,{onClick:e=>f(\"use_friend_furni\"),children:nt(\"friendfurni.context.use\")})]}),n===a.nb.MONSTERPLANT_SEED&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xd,{children:nt(\"furni.mnstr_seed.name\")}),Object(Kr.jsx)(th,{onClick:e=>f(\"use_monsterplant_seed\"),children:nt(\"widget.monsterplant_seed.button.use\")})]}),n===a.nb.RANDOM_TELEPORT&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xd,{children:nt(\"furni.random_teleport.name\")}),Object(Kr.jsx)(th,{onClick:e=>f(\"use_random_teleport\"),children:nt(\"widget.random_teleport.button.use\")})]}),n===a.nb.PURCHASABLE_CLOTHING&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xd,{children:nt(\"furni.generic_usable.name\")}),Object(Kr.jsx)(th,{onClick:e=>f(\"use_purchaseable_clothing\"),children:nt(\"widget.generic_usable.button.use\")})]}),n===Lh&&d&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Xd,{className:\"cursor-pointer text-truncate\",onClick:()=>Er(d.guildId),children:d.guildName}),!j&&Object(Kr.jsx)(th,{onClick:e=>f(\"join_group\"),children:nt(\"widget.furniture.button.join.group\")}),Object(Kr.jsx)(th,{onClick:e=>f(\"go_to_group_homeroom\"),children:nt(\"widget.furniture.button.go.to.group.home.room\")}),d.guildHasReadableForum&&Object(Kr.jsx)(th,{onClick:e=>f(\"open_forum\"),children:nt(\"widget.furniture.button.open_group_forum\")})]})]})]})},Bh=40,Gh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),[i,o]=Object(c.useState)(-1),{eventDispatcher:l=null}=Kd(),u=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e=0),e=Math.abs(e),t||e>Bh&&(e=Bh),r(parseFloat(e.toFixed(2))),t||o(100*e)}),[]),d=Object(c.useCallback)((e=>{if(e.type===Re.UPDATE_CUSTOM_STACK_HEIGHT)s(e.objectId),u(e.height,!0)}),[u]);Pt(Re.UPDATE_CUSTOM_STACK_HEIGHT,l,d);const h=Object(c.useCallback)((e=>{const s=e.getParser();t===s.furniId&&u(s.height,!0)}),[t,u]);it(a.Zb,h);const j=Object(c.useCallback)((e=>{$n(new a.Yb(t,~~e))}),[t]);return Object(c.useEffect)((()=>{if(-1===t||-1===i)return;const e=setTimeout((()=>j(~~i)),10);return()=>clearTimeout(e)}),[t,i,j]),-1===t?null:Object(Kr.jsxs)(Ec,{className:\"nitro-widget-custom-stack-height\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"widget.custom.stack.height.title\"),onCloseClick:()=>{s(-1),r(0)}}),Object(Kr.jsxs)(uc,{justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{children:nt(\"widget.custom.stack.height.text\")}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:0,max:Bh,step:.01,value:n,onChange:e=>u(e),renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:t.valueNow})}),Object(Kr.jsx)(\"input\",{type:\"number\",min:0,max:Bh,value:n,onChange:e=>u(parseFloat(e.target.value))})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{onClick:e=>j(-100),children:nt(\"furniture.above.stack\")}),Object(Kr.jsx)(tc,{onClick:e=>j(0),children:nt(\"furniture.floor.level\")})]})]})]})};class Wh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.id=e,this.type=t,this.color=s,this.light=n}}const Vh=[7665141,21495,15161822,15353138,15923281,8581961,0],qh=[\"#74F5F5\",\"#0053F7\",\"#E759DE\",\"#EA4532\",\"#F2F851\",\"#82F349\",\"#000000\"],Yh=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)([]),[i,a]=Object(c.useState)(0),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(0),[h,j]=Object(c.useState)(0),[b,g]=Object(c.useState)(16777215),[O,m]=Object(c.useState)(255),[p,_]=Object(c.useState)(0),[E,f]=Object(c.useState)(0),[x,I]=Object(c.useState)(0),{eventDispatcher:T=null,widgetHandler:C=null}=Kd(),N=Object(c.useCallback)((e=>{switch(e.type){case we.PRESETS:{const t=e,n=[];for(const e of t.presets)n.push(new Wh(e.id,e.type,e.color,e.brightness));return r(n),a(t.selectedPresetId),void s(!0)}case we.HIDE:return void s(!1);case ke.DIMMER_STATE:{const t=e;return d(o),l(t.state),a(t.presetId),j(t.effectId),_(t.effectId),g(t.color),f(t.color),m(t.brightness),void I(t.brightness)}}}),[o]);Pt(we.PRESETS,T,N),Pt(we.HIDE,T,N),Pt(ke.DIMMER_STATE,T,N);const S=Object(c.useCallback)((e=>{const t=n[e-1];t&&(a(t.id),_(t.type),f(t.color),I(t.light))}),[n]),v=Object(c.useCallback)((()=>{C.processWidgetMessage(new pn(b,O,2===h)),s(!1)}),[C,b,O,h]),R=Object(c.useCallback)((()=>{C.processWidgetMessage(new mn)}),[C]),A=Object(c.useCallback)((()=>{if(0===o)return;const e=i-1;if(i<1||i>n.length)return;const t=n[e];!t||p===t.type&&E===t.color&&x===t.light||(r((s=>{const n=[...s];return n[e]=new Wh(t.id,p,E,x),n})),C.processWidgetMessage(new _n(t.id,p,E,x,!0)))}),[C,o,i,n,p,E,x]),y=Object(c.useCallback)((e=>~~(100*(e-76)/179+0)),[]),w=Object(c.useMemo)((()=>k(\"widget.dimmer.colorwheel\",!1)),[]);return Object(c.useEffect)((()=>{0===o&&0===u||C.processWidgetMessage(new pn(E,x,2===p))}),[C,o,u,E,x,p]),t?Object(Kr.jsxs)(Ec,{className:\"nitro-room-widget-dimmer\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"widget.dimmer.title\"),onCloseClick:v}),1===o&&Object(Kr.jsx)(Xc,{children:n.map((e=>Object(Kr.jsx)($c,{isActive:i===e.id,onClick:t=>S(e.id),children:nt(`widget.dimmer.tab.${e.id}`)},e.id)))}),Object(Kr.jsxs)(uc,{children:[0===o&&Object(Kr.jsxs)(vc,{alignItems:\"center\",children:[Object(Kr.jsx)(Qr,{className:\"dimmer-banner\"}),Object(Kr.jsx)(ei,{center:!0,className:\"bg-muted rounded p-1\",children:nt(\"widget.dimmer.info.off\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:R,children:nt(\"widget.dimmer.button.on\")})]}),1===o&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(\"widget.backgroundcolor.hue\")}),w&&Object(Kr.jsx)(\"input\",{type:\"color\",className:\"form-control\",value:Je.makeColorNumberHex(E),onChange:e=>f(Je.convertFromHex(e.target.value))}),!w&&Object(Kr.jsx)(Jr,{gap:1,columnCount:7,children:Vh.map(((e,t)=>Object(Kr.jsx)(vc,{fullWidth:!0,pointer:!0,className:\"color-swatch rounded\"+Zi()({\" active\":e===E}),onClick:()=>f(e),style:{backgroundColor:qh[t]}},t)))})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(\"widget.backgroundcolor.lightness\")}),Object(Kr.jsx)(Bi.a,{className:\"nitro-slider\",min:76,max:255,value:x,onChange:e=>I(e),thumbClassName:\"thumb percent\",renderThumb:(e,t)=>Object(Kr.jsx)(\"div\",{...e,children:y(t.valueNow)})})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:2===p,onChange:e=>_(e.target.checked?2:1)}),Object(Kr.jsx)(ei,{children:nt(\"widget.dimmer.type.checkbox\")})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"danger\",onClick:R,children:nt(\"widget.dimmer.button.off\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:A,children:nt(\"widget.dimmer.button.apply\")})]})]})]})]}):null},zh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(0),{eventDispatcher:i=null,widgetHandler:a=null}=Kd(),o=Object(c.useCallback)((e=>{s(e.objectId),r(e.value)}),[]);Pt(ve.CREDIT_FURNI_UPDATE,i,o);const l=()=>{s(-1),r(0)};return-1===t?null:Object(Kr.jsxs)(Ec,{className:\"nitro-widget-exchange-credit\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"catalog.redeem.dialog.title\"),onCloseClick:l}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsxs)(ec,{overflow:\"hidden\",gap:2,children:[Object(Kr.jsx)(vc,{center:!0,children:Object(Kr.jsx)(Qr,{className:\"exchange-image\"})}),Object(Kr.jsxs)(vc,{grow:!0,justifyContent:\"between\",overflow:\"hidden\",children:[Object(Kr.jsxs)(vc,{gap:1,overflow:\"auto\",children:[Object(Kr.jsx)(ei,{fontWeight:\"bold\",children:nt(\"creditfurni.description\",[\"credits\"],[n.toString()])}),Object(Kr.jsx)(ei,{children:nt(\"creditfurni.prompt\")})]}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:()=>{a.processWidgetMessage(new gn(gn.REDEEM,t)),l()},children:nt(\"catalog.redeem.dialog.button.exchange\")})]})]})})]})},Kh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),{eventDispatcher:i=null}=Kd(),a=Object(c.useCallback)((e=>{if(e.type===De.UPDATE_EXTERNAL_IMAGE)return s(e.objectId),void r(e.photoData)}),[]);return Pt(De.UPDATE_EXTERNAL_IMAGE,i,a),-1!==t&&n?Object(Kr.jsxs)(Ec,{className:\"nitro-external-image-widget\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:\"\",onCloseClick:()=>{s(-1),r(null)}}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsx)(ec,{center:!0,className:\"picture-preview border border-black\",style:n.w?{backgroundImage:\"url(\"+n.w+\")\"}:{},children:!n.w&&Object(Kr.jsx)(ei,{bold:!0,children:nt(\"camera.loading\")})}),n.m&&n.m.length&&Object(Kr.jsx)(ei,{center:!0,children:n.m}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{children:n.n||\"\"}),Object(Kr.jsx)(ei,{children:new Date(1e3*n.t).toLocaleDateString()})]})]})]}):null};class Qh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.objectId=e,this.category=t,this.type=s,this.usernames=n,this.figures=r,this.date=c}}const $h=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Kd(),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(0),l=e=>{switch(e.type){case a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Og.FURNITURE_DATA),c=s.model.getValue(a.Og.FURNITURE_FRIENDFURNI_ENGRAVING);if(\"1\"===n[0]){if(6!==n.length)return;r(new Qh(t.objectId,t.category,c,[n[1],n[2]],[n[3],n[4]],n[5])),o(0)}return}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}};Bt(a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),Pt(Ve.FURNI_REMOVED,t,l);const u=Object(c.useCallback)((e=>{const t=e.getParser();r(new Qh(t.furniId)),o(t.start?1:2)}),[]);it(a.ae,u);const d=Object(c.useCallback)((function(e){switch(e){case\"close_view\":return void r(null);case\"accept_request\":return ie().connection.send(new a.Gb(n.objectId,!0)),void d(\"close_request\");case\"reject_request\":return ie().connection.send(new a.Gb(n.objectId,!1)),void d(\"close_request\");case\"close_request\":return o(0),void r(null)}}),[n]),h=Object(c.useCallback)((e=>{d(\"close_request\")}),[d]);return it(a.Yd,h),it(a.Zd,h),Object(Kr.jsxs)(Kr.Fragment,{children:[i>0&&Object(Kr.jsxs)(Ec,{className:\"nitro-engraving-lock\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"friend.furniture.confirm.lock.caption\"),onCloseClick:e=>d(\"close_request\")}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsx)(\"h5\",{className:\"text-black text-center fw-bold mt-2 mb-2\",children:nt(\"friend.furniture.confirm.lock.subtitle\")}),Object(Kr.jsx)(\"div\",{className:\"d-flex justify-content-center mb-2\",children:Object(Kr.jsx)(\"div\",{className:\"engraving-lock-stage-\"+i})}),2===i&&Object(Kr.jsx)(\"div\",{className:\"text-small text-black text-center mb-2\",children:nt(\"friend.furniture.confirm.lock.other.locked\")}),Object(Kr.jsxs)(\"div\",{className:\"d-flex\",children:[Object(Kr.jsx)(\"button\",{className:\"btn btn-primary w-100 me-2\",onClick:e=>d(\"reject_request\"),children:nt(\"friend.furniture.confirm.lock.button.cancel\")}),Object(Kr.jsx)(\"button\",{className:\"btn btn-success w-100\",onClick:e=>d(\"accept_request\"),children:nt(\"friend.furniture.confirm.lock.button.confirm\")})]})]})]}),n&&n.usernames.length>0&&Object(Kr.jsx)(_c,{handleSelector:\".nitro-engraving-lock-view\",children:Object(Kr.jsxs)(\"div\",{className:\"nitro-engraving-lock-view engraving-lock-\"+n.type,children:[Object(Kr.jsx)(\"div\",{className:\"engraving-lock-close\",onClick:e=>d(\"close_view\")}),Object(Kr.jsxs)(\"div\",{className:\"d-flex justify-content-center\",children:[Object(Kr.jsx)(\"div\",{className:\"engraving-lock-avatar\",children:Object(Kr.jsx)(fc,{figure:n.figures[0],direction:2})}),Object(Kr.jsx)(\"div\",{className:\"engraving-lock-avatar\",children:Object(Kr.jsx)(fc,{figure:n.figures[1],direction:4})})]}),Object(Kr.jsxs)(\"div\",{className:\"text-center mt-1\",children:[Object(Kr.jsxs)(\"div\",{children:[0===n.type&&nt(\"lovelock.engraving.caption\"),3===n.type&&nt(\"wildwest.engraving.caption\")]}),Object(Kr.jsx)(\"div\",{children:n.date}),Object(Kr.jsxs)(\"div\",{className:\"d-flex justify-content-center\",children:[Object(Kr.jsx)(\"div\",{className:\"me-4\",children:n.usernames[0]}),Object(Kr.jsx)(\"div\",{children:n.usernames[1]})]})]})]})})]})},Xh=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(-1),[_,E]=Object(c.useState)(null),[f,x]=Object(c.useState)(!1),[I,T]=Object(c.useState)(null),[C,N]=Object(c.useState)(!1),{roomSession:S=null,eventDispatcher:v=null,widgetHandler:R=null}=Kd(),A=Object(c.useCallback)((()=>{C||s(-1),u(null),h(!1)}),[C]),w=Object(c.useCallback)((e=>\"\"),[]),k=Object(c.useCallback)((e=>{switch(e.type){case Be.PACKAGEINFO:return N(!1),s(e.objectId),u(e.giftMessage),h(e.isController),b(e.purchaserName),O(e.purchaserFigure),void T(e.imageUrl);case Be.CONTENTS_FLOOR:case Be.CONTENTS_LANDSCAPE:case Be.CONTENTS_WALLPAPER:{let t=null;return e.type===Be.CONTENTS_FLOOR?t=\"packagecard_icon_floor\":e.type===Be.CONTENTS_LANDSCAPE?t=\"packagecard_icon_landscape\":e.type===Be.CONTENTS_WALLPAPER&&(t=\"packagecard_icon_wallpaper\"),s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),p(e.placedItemId),E(e.placedItemType),x(e.placedInRoom),void T(w(t))}case Be.CONTENTS_CLUB:return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),void T(w(\"packagecard_icon_hc\"));case Be.CONTENTS:if(!C)return;return s(e.objectId),r(e.classId),o(e.itemType),u(e.giftMessage),h(e.isController),p(e.placedItemId),E(e.placedItemType),x(e.placedInRoom),void T(e.imageUrl);case Be.CONTENTS_IMAGE:if(!C)return;T(e.imageUrl)}}),[C,w]);Pt(Be.PACKAGEINFO,v,k),Pt(Be.CONTENTS,v,k),Pt(Be.CONTENTS_FLOOR,v,k),Pt(Be.CONTENTS_LANDSCAPE,v,k),Pt(Be.CONTENTS_WALLPAPER,v,k),Pt(Be.CONTENTS_CLUB,v,k),Pt(Be.CONTENTS_IMAGE,v,k);const D=Object(c.useCallback)((e=>{e.id===t&&A(),e.id===m&&f&&x(!1)}),[t,m,f,A]);Pt(Ve.FURNI_REMOVED,v,D);const U=Object(c.useCallback)((()=>{s(-1),N(!1),p(-1),x(!1),u(null),h(!1)}),[]),P=Object(c.useMemo)((()=>{if(i!==er.WALL)return!1;const e=ee().getWallItemData(n);if(!e)return!1;const t=e.className;return\"floor\"===t||\"landscape\"===t||\"wallpaper\"===t}),[n,i]),M=Object(c.useMemo)((()=>-1===t?\"\":P?\"widget.furni.present.spaces.message_opened\":\"widget.furni.present.message_opened\"),[t,P]),F=Object(c.useCallback)((e=>{switch(e){case 0:return void y(\"catalog/open\");case 1:return N(!0),void R.processWidgetMessage(new In(In.OPEN_PRESENT,t));case 2:return;case 3:if(m>0&&f)if(_===er.PET)S.pickupPet(m);else{const e=L().getRoomObject(S.roomId,m,a.Ig.FLOOR);e&&L().processRoomObjectOperation(e.id,a.Ig.FLOOR,a.Kg.OBJECT_PICKUP)}return void U()}}),[S,R,t,f,m,_,U]);return-1===t?null:Object(Kr.jsxs)(Ec,{className:\"nitro-gift-opening\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(j?\"widget.furni.present.window.title_from\":\"widget.furni.present.window.title\",[\"name\"],[j]),onCloseClick:U}),Object(Kr.jsxs)(uc,{center:!0,children:[-1===m&&Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[Object(Kr.jsx)(ec,{center:!0,overflow:\"auto\",children:Object(Kr.jsx)(Sc,{userName:j,figure:g,message:l})}),Object(Kr.jsxs)(ec,{gap:1,children:[j&&Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(0),children:nt(\"widget.furni.present.give_gift\",[\"name\"],[j])}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>F(1),children:nt(\"widget.furni.present.open_gift\")})]})]}),m>-1&&Object(Kr.jsxs)(vc,{overflow:\"hidden\",children:[Object(Kr.jsxs)(ec,{center:!0,overflow:\"auto\",gap:2,children:[Object(Kr.jsx)(\"img\",{src:I,className:\"no-select\",alt:\"\"}),Object(Kr.jsx)(ei,{wrap:!0,children:nt(M,[\"product\"],[l])})]}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(3),children:nt(\"widget.furni.present.put_in_inventory\")}),Object(Kr.jsx)(tc,{fullWidth:!0,variant:\"success\",onClick:e=>F(2),children:nt(f?\"widget.furni.present.keep_in_room\":\"widget.furni.present.place_in_room\")})]}),j&&j.length&&Object(Kr.jsx)(tc,{fullWidth:!0,onClick:e=>F(0),children:nt(\"widget.furni.present.give_gift\",[\"name\"],[j])})]})]})]})]})},Jh=[\"perteam\",\"mostwins\",\"classic\"],Zh=[\"alltime\",\"daily\",\"weekly\",\"monthly\"],ej=e=>{const[t,s]=Object(c.useState)(new Map),{roomSession:n=null}=Kd(),r=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_HIGH_SCORE_DISPLAY:{const t=L().getRoomObject(n.roomId,e.objectId,e.category);if(!t)return;const r=t.model.getValue(a.Og.FURNITURE_DATA_FORMAT),c=a.gf.getData(r);return c.initializeFromRoomObjectModel(t.model),void s((e=>{const s=new Map(e);return s.set(t.id,c),s}))}case a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(e.roomId!==n.roomId)return;return void s((t=>{const s=new Map(t);return s.delete(e.objectId),s}))}}),[n]);return Bt(a.sg.REQUEST_HIGH_SCORE_DISPLAY,r),Bt(a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,r),t.size?Object(Kr.jsx)(Kr.Fragment,{children:Array.from(t.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsx)(Sh,{objectId:s,category:a.Ig.FLOOR,children:Object(Kr.jsxs)(vc,{className:\"nitro-widget-high-score\",gap:0,children:[Object(Kr.jsx)(ec,{center:!0,className:\"nitro-widget-high-score-header\",children:Object(Kr.jsx)(ei,{small:!0,bold:!0,children:nt(\"high.score.display.caption\",[\"scoretype\",\"cleartype\"],[nt(`high.score.display.scoretype.${Jh[n.scoreType]}`),nt(`high.score.display.cleartype.${Zh[n.clearType]}`)])})}),Object(Kr.jsxs)(vc,{overflow:\"hidden\",gap:1,className:\"h-100\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",className:\"score-board-header mt-1 p-1\",children:[Object(Kr.jsx)(ei,{small:!0,variant:\"black\",className:\"col-8\",children:nt(\"high.score.display.users.header\")}),Object(Kr.jsx)(ei,{small:!0,variant:\"black\",className:\"col-4\",children:nt(\"high.score.display.score.header\")})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsx)(vc,{overflow:\"auto\",gap:1,className:\"overflow-y-auto high-score-results p-2\",children:n.entries.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:\"center\",children:[Object(Kr.jsx)(ei,{small:!0,variant:\"white\",className:\"col-8\",children:e.users.join(\", \")}),Object(Kr.jsx)(ei,{small:!0,center:!0,variant:\"white\",className:\"col-4\",children:e.score})]},t)))}),Object(Kr.jsx)(\"i\",{className:\"trophy position-absolute\"}),Object(Kr.jsx)(ec,{center:!0,className:\"bottom-text\",children:Object(Kr.jsx)(ei,{small:!0,center:!0,children:nt(\"high.score.display.congratulations.footer\")})})]})]})},t)}))}):null},tj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(-1),[i,o]=Object(c.useState)(-1),{roomSession:l=null,eventDispatcher:u=null,widgetHandler:d=null}=Kd(),h=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_ROTATE_POSITIVE)}),[n,i]),j=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_MOVE)}),[n,i]),b=Object(c.useCallback)((()=>{ge(n,i,a.Kg.OBJECT_PICKUP)}),[n,i]),g=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_REQUEST_MANIPULATION:return s(!0),r(e.id),void o(e.category);case Ve.FURNI_REMOVED:return void(e.id===n&&(s(!1),r(-1),o(-1)));case Ve.OBJECT_DESELECTED:return s(!1),r(-1),void o(-1)}}),[n]);Pt(Ve.OBJECT_REQUEST_MANIPULATION,u,g),Pt(Ve.OBJECT_DESELECTED,u,g);const O=Object(c.useCallback)((e=>{e.isDecorating||(j(),s(!1),r(-1),o(-1))}),[j]);return Pt(ye.UPDATE_DECORATE,u,O),Object(c.useEffect)((()=>{t?(u.dispatchEvent(new ye(!0)),j()):u.dispatchEvent(new ye(!1))}),[u,t,j]),t?Object(Kr.jsx)(Sh,{objectId:n,category:i,children:Object(Kr.jsxs)(\"div\",{className:\"btn-group\",children:[Object(Kr.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:b,children:Object(Kr.jsx)(ac.a,{icon:\"times\"})}),Object(Kr.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:h,children:Object(Kr.jsx)(ac.a,{icon:\"undo\"})})]})}):null},sj=[\"hd\",99999,[99998]],nj=[a.p.CHEST_ACCESSORY,a.p.COAT_CHEST,a.p.CHEST,a.p.LEGS,a.p.SHOES,a.p.WAIST_ACCESSORY],rj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(a.Ed.NO_CLUB),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(a.Ed.NO_CLUB),[m,p]=Object(c.useState)(-1),{roomSession:_=null,eventDispatcher:E=null}=Kd(),f=Object(c.useCallback)((e=>{const t=S().createFigureContainer(e.figure),n=S().getFigureClubLevel(t,e.gender,nj);s(e.objectId),r(e.figure),o(e.gender),u(e.name),h(n),_.isRoomOwner||_.controllerLevel>=a.eg.GUEST||ee().isModerator?p(0):ee().gender.toLowerCase()!==e.gender.toLowerCase()?p(4):te()<n?p(3):p(2)}),[_]);Pt(He.MANNEQUIN_UPDATE,E,f);const x=e=>{for(const t of e.getPartTypeIds())nj.indexOf(t)>=0||e.removePart(t);e.updatePart(sj[0],sj[1],sj[2])},I=Object(c.useCallback)((function(e){switch(e){case 3:$n(new a.Sb(t));break;case 2:$n(new a.Ub(t));break;case 1:return void $n(new a.Tb(t,l))}p(-1)}),[t,l]);return Object(c.useEffect)((()=>{switch(m){case 0:case 4:{const e=S().createFigureContainer(n);x(e),b(e.getFigureString()),O(d);break}case 1:{const e=S().createFigureContainer(ee().figure);x(e),b(e.getFigureString()),O(S().getFigureClubLevel(e,ee().gender,nj));break}case 2:case 3:{const e=((e,t)=>{const s=S().createFigureContainer(e),n=S().createFigureContainer(t);for(const r of nj)s.removePart(r);for(const r of n.getPartTypeIds())s.updatePart(r,n.getPartSetId(r),n.getPartColorIds(r));return s})(ee().figure,n);b(e.getFigureString()),O(d);break}}}),[m,n,d]),-1===m?null:Object(Kr.jsxs)(Ec,{className:\"nitro-mannequin\",theme:\"primary\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"mannequin.widget.title\"),onCloseClick:e=>p(-1)}),Object(Kr.jsx)(uc,{center:!0,children:Object(Kr.jsxs)(ec,{gap:2,overflow:\"hidden\",children:[Object(Kr.jsx)(vc,{children:Object(Kr.jsxs)(Qr,{position:\"relative\",className:\"mannequin-preview\",children:[Object(Kr.jsx)(fc,{figure:j,direction:2}),d>0&&Object(Kr.jsx)(Tc,{className:\"position-absolute end-2 bottom-2\",type:\"hc\"})]})}),Object(Kr.jsxs)(vc,{justifyContent:\"between\",overflow:\"auto\",children:[0===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control\",value:l,onChange:e=>u(e.target.value),onKeyDown:e=>(e=>{\"Enter\"===e.key&&I(1)})(e)}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>p(1),children:nt(\"mannequin.widget.style\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>I(2),children:nt(\"mannequin.widget.wear\")})]})]}),1===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:l}),Object(Kr.jsx)(ei,{wrap:!0,children:nt(\"mannequin.widget.savetext\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsx)(ei,{underline:!0,pointer:!0,onClick:e=>p(0),children:nt(\"mannequin.widget.back\")}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>I(3),children:nt(\"mannequin.widget.save\")})]})]}),2===m&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{bold:!0,children:l}),Object(Kr.jsx)(ei,{children:nt(\"mannequin.widget.weartext\")})]}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:e=>I(2),children:nt(\"mannequin.widget.wear\")})]}),3===m&&Object(Kr.jsx)(ei,{children:nt(\"mannequin.widget.clubnotification\")}),4===m&&Object(Kr.jsx)(ei,{children:nt(\"mannequin.widget.wronggender\")})]})]})})]})};class cj{constructor(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.objectId=e,this.category=t,this.color=s,this.text=n,this.canModify=r,this.isEditing=c}}const ij=[\"9CCEFF\",\"FF9CFF\",\"9CFF9C\",\"FFFF33\"],aj=[\"blue\",\"pink\",\"green\",\"yellow\"];function oj(e){let t=ij.indexOf(e);return-1===t&&(t=0),aj[t]}const lj=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Kd(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_STICKIE:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;const n=s.model.getValue(a.Og.FURNITURE_ITEMDATA);if(n.length<6)return;let c=null,i=null;return n.indexOf(\" \")>0?(c=n.slice(0,n.indexOf(\" \")),i=n.slice(n.indexOf(\" \")+1,n.length)):c=n,void r(new cj(t.objectId,t.category,c,i,ie().isRoomOwner||ee().isModerator,!1))}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_STICKIE,i),Pt(Ve.FURNI_REMOVED,t,i);const o=Object(c.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case\"close\":return void r(null);case\"trash\":return void r((e=>e?(L().deleteRoomObject(e.objectId,e.category),null):null));case\"changeColor\":return void r((e=>{const s=new cj(e.objectId,e.category,t,e.text,e.canModify);return L().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case\"changeText\":return void r((e=>{const s=new cj(e.objectId,e.category,e.color,t,e.canModify);return L().modifyRoomObjectData(s.objectId,s.category,s.color,s.text),s}));case\"editMode\":return void r((e=>e.canModify?new cj(e.objectId,e.category,e.color,e.text,e.canModify,!0):e))}}),[]);return n?Object(Kr.jsx)(_c,{handleSelector:\".drag-handler\",windowPosition:Oc.NOTHING,children:Object(Kr.jsxs)(\"div\",{className:\"nitro-stickie nitro-stickie-image stickie-\"+oj(n.color),children:[Object(Kr.jsxs)(\"div\",{className:\"d-flex align-items-center stickie-header drag-handler\",children:[Object(Kr.jsx)(\"div\",{className:\"d-flex align-items-center flex-grow-1 h-100\",children:n.canModify&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"div\",{className:\"nitro-stickie-image stickie-trash header-trash\",onClick:e=>o(\"trash\")}),ij.map((e=>Object(Kr.jsx)(\"div\",{className:\"stickie-color ms-1\",onClick:t=>o(\"changeColor\",e),style:{backgroundColor:Je.makeColorHex(e)}},e)))]})}),Object(Kr.jsx)(\"div\",{className:\"d-flex align-items-center nitro-stickie-image stickie-close header-close\",onClick:e=>o(\"close\")})]}),Object(Kr.jsx)(\"div\",{className:\"stickie-context\",children:n.isEditing?Object(Kr.jsx)(\"textarea\",{className:\"context-text\",defaultValue:n.text||\"\",tabIndex:0,onBlur:e=>o(\"changeText\",e.target.value),autoFocus:!0}):Object(Kr.jsx)(\"div\",{className:\"context-text\",onClick:e=>o(\"editMode\"),children:n.text})})]})}):null},uj=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Kd(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((e=>{switch(e.type){case a.sg.REQUEST_TROPHY:{const t=e,s=L().getRoomObject(t.roomId,t.objectId,t.category);if(!s)return;let n=s.model.getValue(a.Og.FURNITURE_DATA),c=s.model.getValue(a.Og.FURNITURE_EXTRAS);c||(c=\"0\");const i=s.model.getValue(a.Og.FURNITURE_COLOR),o=n.substring(0,n.indexOf(\"\\t\"));n=n.substring(o.length+1,n.length);const l=n.substring(0,n.indexOf(\"\\t\")),u=n.substr(l.length+1,n.length);return void r(new yh(t.objectId,t.category,i,o,l,u))}case Ve.FURNI_REMOVED:{const t=e;return void r((e=>e&&t.id===e.objectId&&t.category===e.category?null:e))}}}),[]);Bt(a.sg.REQUEST_TROPHY,i),Pt(Ve.FURNI_REMOVED,s.eventDispatcher,i);const o=Object(c.useCallback)((function(e){\"close\"!==e||r(null)}),[]);return n?Object(Kr.jsx)(Kc,{color:n.color,message:n.message,date:n.date,senderName:n.ownerName,onCloseClick:()=>o(\"close\")}):null};var dj=s(86);class hj{}hj.UNSTARTED=-1,hj.ENDED=0,hj.PLAYING=1,hj.PAUSED=2,hj.BUFFERING=3,hj.CUED=5;const jj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(-1),[j,b]=Object(c.useState)(null),[g,O]=Object(c.useState)(null),[m,p]=Object(c.useState)(!1),[_,E]=Object(c.useState)(null),{eventDispatcher:f=null}=Kd(),x=Object(c.useCallback)((e=>{if(e.type===ze.UPDATE_YOUTUBE_DISPLAY)s(e.objectId),p(e.hasControl)}),[]),I=Object(c.useCallback)((()=>{s(-1),b(null),O(null),p(!1),r(null),u(null),o(null),h(-1)}),[]);Pt(ze.UPDATE_YOUTUBE_DISPLAY,f,x);const T=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(r(s.videoId),o(s.startAtSeconds),u(s.endAtSeconds),h(s.state))}),[t]),C=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();t===s.furniId&&(O(s.playlists),b(s.selectedPlaylistId),r(null),h(-1),u(null),o(null))}),[t]),N=Object(c.useCallback)((e=>{if(-1===t)return;const s=e.getParser();if(t===s.furniId)switch(s.commandId){case 1:h(hj.PLAYING),_.getPlayerState()!==hj.PLAYING&&_.playVideo();break;case 2:h(hj.PAUSED),_.getPlayerState()!==hj.PAUSED&&_.pauseVideo()}}),[t,_]);it(a.jj,T),it(a.ij,C),it(a.hj,N);const S=Object(c.useCallback)((e=>{switch(e){case\"playlist_prev\":$n(new a.ob(t,Fn.CONTROL_COMMAND_PREVIOUS_VIDEO));break;case\"playlist_next\":$n(new a.ob(t,Fn.CONTROL_COMMAND_NEXT_VIDEO));break;case\"video_pause\":m&&n&&n.length&&$n(new a.ob(t,Fn.CONTROL_COMMAND_PAUSE_VIDEO));break;case\"video_play\":m&&n&&n.length&&$n(new a.ob(t,Fn.CONTROL_COMMAND_CONTINUE_VIDEO));break;default:if(j===e)return b(null),void $n(new a.Ph(t,\"\"));$n(new a.Ph(t,e)),b(e)}}),[m,t,j,n]),v=Object(c.useCallback)((e=>{E(e.target)}),[]),R=Object(c.useCallback)((e=>{if(E(e.target),t)switch(e.target.getPlayerState()){case-1:case 1:return void(1!==d&&S(\"video_play\"));case 2:2!==d&&S(\"video_pause\")}}),[d,t,S]),A=Object(c.useMemo)((()=>i||l?{height:\"375\",width:\"500\",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:i,end:l}}:{height:\"375\",width:\"500\",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1}}),[l,i]);return-1===t?null:Object(Kr.jsxs)(Ec,{className:\"youtube-tv-widget\",children:[Object(Kr.jsx)(jc,{headerText:\"\",onCloseClick:I}),Object(Kr.jsx)(uc,{children:Object(Kr.jsxs)(\"div\",{className:\"row w-100 h-100\",children:[Object(Kr.jsxs)(\"div\",{className:\"youtube-video-container col-9\",children:[n&&n.length>0&&Object(Kr.jsx)(dj.a,{videoId:n,opts:A,onReady:v,onStateChange:R,containerClassName:\"youtubeContainer\"}),(!n||0===n.length)&&Object(Kr.jsx)(\"div\",{className:\"empty-video w-100 h-100 justify-content-center align-items-center d-flex\",children:nt(\"widget.furni.video_viewer.no_videos\")})]}),Object(Kr.jsxs)(\"div\",{className:\"playlist-container col-3\",children:[Object(Kr.jsxs)(\"span\",{className:\"playlist-controls justify-content-center d-flex\",children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-youtube-prev cursor-pointer\",onClick:()=>S(\"playlist_prev\")}),Object(Kr.jsx)(\"i\",{className:\"icon icon-youtube-next cursor-pointer\",onClick:()=>S(\"playlist_next\")})]}),Object(Kr.jsx)(\"div\",{className:\"mb-1\",children:nt(\"widget.furni.video_viewer.playlists\")}),Object(Kr.jsx)(Jr,{columnCount:1,className:\"playlist-grid\",children:g&&g.map(((e,t)=>Object(Kr.jsxs)(kc,{onClick:()=>S(e.video),itemActive:e.video===j,children:[Object(Kr.jsx)(\"b\",{children:e.title}),\" - \",e.description]},t)))})]})]})})]})},bj=e=>Object(Kr.jsxs)(\"div\",{className:\"position-absolute nitro-room-widgets top-0 start-0 w-100 h-100\",children:[Object(Kr.jsx)(Ah,{}),Object(Kr.jsx)(Hh,{}),Object(Kr.jsx)(Gh,{}),Object(Kr.jsx)(Yh,{}),Object(Kr.jsx)($h,{}),Object(Kr.jsx)(Xh,{}),Object(Kr.jsx)(zh,{}),Object(Kr.jsx)(ej,{}),Object(Kr.jsx)(tj,{}),Object(Kr.jsx)(rj,{}),Object(Kr.jsx)(lj,{}),Object(Kr.jsx)(uj,{}),Object(Kr.jsx)(wh,{}),Object(Kr.jsx)(Kh,{}),Object(Kr.jsx)(jj,{})]}),gj=e=>{const{botData:t=null,close:s=null}=e;return t?Object(Kr.jsx)(vc,{className:\"nitro-infostand rounded\",children:Object(Kr.jsxs)(vc,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,variant:\"white\",wrap:!0,children:t.name}),Object(Kr.jsx)(ac.a,{icon:\"times\",className:\"cursor-pointer\",onClick:s})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(vc,{fullWidth:!0,className:\"body-image bot\",children:Object(Kr.jsx)(fc,{figure:t.figure,direction:4})}),Object(Kr.jsx)(vc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Kr.jsx)(Ic,{badgeCode:e,showInfo:!0},e)))})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsx)(ec,{alignItems:\"center\",className:\"py-1 px-2\",children:Object(Kr.jsx)(ei,{fullWidth:!0,wrap:!0,textBreak:!0,variant:\"white\",className:\"motto-content\",children:t.motto})}),t.carryItem>0&&Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.text.handitem\",[\"item\"],[nt(\"handitem\"+t.carryItem)])})]})]})}):null},Oj=e=>{const{furniData:t=null,close:s=null}=e,{roomSession:n=null,eventDispatcher:r=null,widgetHandler:i=null}=Kd(),[o,l]=Object(c.useState)(0),[u,d]=Object(c.useState)(!1),[h,j]=Object(c.useState)(!1),[b,g]=Object(c.useState)(!1),[O,m]=Object(c.useState)([]),[p,_]=Object(c.useState)([]),[E,f]=Object(c.useState)([]),[x,I]=Object(c.useState)([]),[T,C]=Object(c.useState)(!1),[N,S]=Object(c.useState)(0),[v,R]=Object(c.useState)(0),[A,w]=Object(c.useState)(!1),[k,D]=Object(c.useState)(!1),[U,P]=Object(c.useState)(null);Object(c.useEffect)((()=>{let e=0,s=!1,r=!1,c=!1,i=[],o=[],u=[],h=[],b=!1,O=0,p=0,E=!1,x=!1;const T=t.roomControllerLevel>=a.eg.GUEST;if((T||t.isOwner||t.isRoomOwner||t.isAnyRoomController)&&(s=!0,r=!t.isWallItem,t.roomControllerLevel>=a.eg.MODERATOR&&(E=!0)),t.isAnyRoomController&&(x=!0),(t.usagePolicy===a.Ah.EVERYBODY||t.usagePolicy===a.Ah.CONTROLLER&&T||t.extraParam===a.zh.JUKEBOX&&T||t.extraParam===a.zh.USABLE_PRODUCT&&T)&&(c=!0),t.extraParam){if(t.extraParam===a.zh.CRACKABLE_FURNI){const e=t.stuffData;c=!0,b=!0,O=e.hits,p=e.target}if(E){const e=t.extraParam.substr(a.zh.BRANDING_OPTIONS.length);if(e){const t=e.split(\"\\t\");for(const e of t){const t=e.split(\"=\");t&&2===t.length&&(i.push(t[0]),o.push(t[1]))}}}}if(E){const e=L().getRoomObject(n.roomId,t.id,t.isWallItem?a.Ig.WALL:a.Ig.FLOOR);if(e){const t=e.model.getValue(a.Og.FURNITURE_CUSTOM_VARIABLES),s=e.model.getValue(a.Og.FURNITURE_DATA);if(t&&t.length)for(const e of t)u.push(e),h.push(s[e]||\"\")}}t.isOwner||t.isAnyRoomController?e=2:(t.isRoomOwner||t.roomControllerLevel>=a.eg.GUILD_ADMIN)&&(e=1),t.isStickie&&(e=0),l(e),d(s),j(r),g(c),m(i),_(o),f(u),I(h),C(b),S(O),R(p),w(E),D(x),P(null),t.groupId&&$n(new a.Tc(t.groupId,!1))}),[n,t]);const M=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.groupId===s.id&&!s.flag&&(U&&P(null),P(s.title))}),[t,U]);it(a.Uc,M);const F=Object(c.useCallback)(((e,t)=>{const s=Array.from(p);s[e]=t,_(s)}),[p]),H=Object(c.useCallback)(((e,t)=>{const s=Array.from(x);s[e]=t,I(s)}),[x]),B=Object(c.useCallback)((()=>{if(0===O.length||0===p.length)return\"\";let e=\"\",t=0;for(;t<O.length;){e=e+(O[t]+\"=\")+p[t]+\"\\t\",t++}return e}),[O,p]),G=Object(c.useCallback)((e=>{if(!e||\"\"===e)return;let s=null,n=null;switch(e){case\"buy_one\":return void y(`catalog/open/offerId/${t.purchaseOfferId}`);case\"move\":s=En.MOVE;break;case\"rotate\":s=En.ROTATE;break;case\"pickup\":s=2===o?En.PICKUP:En.EJECT;break;case\"use\":s=En.USE;break;case\"save_branding_configuration\":s=En.SAVE_STUFF_DATA,n=B();break;case\"save_custom_variables\":const e=new Map;for(let t=0;t<E.length;t++){const s=E[t],n=x[t];s&&s.length&&n&&n.length&&e.set(s,n)}$n(new a.Nh(t.id,e))}s&&i.processWidgetMessage(new En(s,t.id,t.category,t.purchaseOfferId,n))}),[i,t,o,E,x,B]),W=Object(c.useCallback)((()=>{const e=t.stuffData;return e&&e instanceof a.Qh?e.getValue(2):null}),[t]);return t?Object(Kr.jsxs)(vc,{gap:1,alignItems:\"end\",children:[Object(Kr.jsx)(vc,{className:\"nitro-infostand\",children:Object(Kr.jsxs)(vc,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,variant:\"white\",wrap:!0,children:t.name}),Object(Kr.jsx)(\"i\",{className:\"infostand-close\",onClick:s})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{position:\"relative\",gap:1,children:[t.stuffData.isUnique&&Object(Kr.jsx)(\"div\",{className:\"position-absolute end-0\",children:Object(Kr.jsx)(yc,{uniqueNumber:t.stuffData.uniqueNumber,uniqueSeries:t.stuffData.uniqueSeries})}),t.stuffData.rarityLevel>-1&&Object(Kr.jsx)(\"div\",{className:\"position-absolute end-0\",children:Object(Kr.jsx)(qc,{level:t.stuffData.rarityLevel})}),t.image&&t.image.src.length&&Object(Kr.jsx)(\"img\",{className:\"d-block mx-auto\",src:t.image.src,alt:\"\"})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{fullWidth:!0,wrap:!0,textBreak:!0,variant:\"white\",children:t.description}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:t.ownerId}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:[t.ownerName]})]}),t.purchaseOfferId>0&&Object(Kr.jsx)(ec,{children:Object(Kr.jsx)(tc,{className:\"volter-button\",onClick:e=>G(\"buy_one\"),children:nt(\"infostand.button.buy\")})})]}),Object(Kr.jsxs)(vc,{gap:1,children:[T&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.crackable_furni.hits_remaining\",[\"hits\",\"target\"],[N.toString(),v.toString()])})]}),t.groupId>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsxs)(ec,{pointer:!0,alignItems:\"center\",gap:2,onClick:()=>Er(t.groupId),children:[Object(Kr.jsx)(Ic,{badgeCode:W(),isGroup:!0}),Object(Kr.jsx)(ei,{variant:\"white\",underline:!0,children:U})]})]}),A&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),k&&Object(Kr.jsxs)(ei,{wrap:!0,variant:\"white\",children:[\"ID: \",t.id]}),O.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsx)(vc,{gap:1,children:O.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{wrap:!0,align:\"end\",variant:\"white\",className:\"col-4\",children:e}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:p[t],onChange:e=>F(t,e.target.value)})]},t)))})]})]}),E.length>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0 my-1\"}),Object(Kr.jsx)(vc,{gap:1,children:E.map(((e,t)=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{small:!0,wrap:!0,align:\"end\",variant:\"white\",className:\"col-4\",children:e}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:x[t],onChange:e=>H(t,e.target.value)})]},t)))})]})]})]})}),Object(Kr.jsxs)(ec,{gap:2,justifyContent:\"end\",children:[u&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:e=>G(\"move\"),children:nt(\"infostand.button.move\")}),h&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:e=>G(\"rotate\"),children:nt(\"infostand.button.rotate\")}),0!==o&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:e=>G(\"pickup\"),children:nt(1===o?\"infostand.button.eject\":\"infostand.button.pickup\")}),b&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:e=>G(\"use\"),children:nt(\"infostand.button.use\")}),O.length>0&&p.length>0&&O.length===p.length&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:()=>G(\"save_branding_configuration\"),children:nt(\"save\")}),E.length>0&&x.length>0&&E.length===x.length&&Object(Kr.jsx)(tc,{className:\"infostand-buttons px-2\",onClick:()=>G(\"save_custom_variables\"),children:nt(\"save\")})]})]}):null},mj=e=>{const{petData:t=null,close:s=null}=e;return t?Object(Kr.jsx)(vc,{className:\"nitro-infostand rounded\",children:Object(Kr.jsxs)(vc,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",gfbold:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ac.a,{icon:\"times\",className:\"cursor-pointer\",onClick:s})]}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(`pet.breed.${t.petType}.${t.petBreed}`)}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(vc,{fullWidth:!0,overflow:\"hidden\",className:\"body-image pet p-1\",children:Object(Kr.jsx)(Wc,{figure:t.petFigure,posture:t.posture,direction:4})}),Object(Kr.jsxs)(vc,{grow:!0,gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",center:!0,wrap:!0,children:nt(\"pet.level\",[\"level\",\"maxlevel\"],[t.level.toString(),t.maximumLevel.toString()])}),Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",truncate:!0,children:nt(\"infostand.pet.text.happiness\")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:\"absolute\",children:Object(Kr.jsx)(ei,{variant:\"white\",children:t.happyness+\"/\"+t.maximumHappyness})}),Object(Kr.jsx)(Qr,{className:\"bg-info rounded pet-stats\",style:{width:t.happyness/t.maximumHappyness*100+\"%\"}})]})]}),Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",truncate:!0,children:nt(\"infostand.pet.text.experience\")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:\"absolute\",children:Object(Kr.jsx)(ei,{variant:\"white\",children:t.experience+\"/\"+t.levelExperienceGoal})}),Object(Kr.jsx)(Qr,{className:\"bg-purple rounded pet-stats\",style:{width:t.experience/t.levelExperienceGoal*100+\"%\"}})]})]}),Object(Kr.jsxs)(vc,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",truncate:!0,children:nt(\"infostand.pet.text.energy\")}),Object(Kr.jsxs)(Qr,{fullWidth:!0,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[Object(Kr.jsx)(ec,{fit:!0,center:!0,position:\"absolute\",children:Object(Kr.jsx)(ei,{variant:\"white\",children:t.energy+\"/\"+t.maximumEnergy})}),Object(Kr.jsx)(Qr,{className:\"bg-success rounded pet-stats\",style:{width:t.energy/t.maximumEnergy*100+\"%\"}})]})]})]})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.text.petrespect\",[\"count\"],[t.respect.toString()])}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"pet.age\",[\"age\"],[t.age.toString()])}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsx)(vc,{gap:1,children:Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:t.ownerId}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.text.petowner\",[\"name\"],[t.ownerName])})]})})]})}):null},pj=e=>{const{rentableBotData:t=null,close:s=null}=e,n=Object(c.useMemo)((()=>!(t.botSkills.indexOf(Jd.NO_PICK_UP)>=0)&&!(!t.amIOwner&&!t.amIAnyRoomController)),[t]);if(t)return Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(vc,{className:\"nitro-infostand rounded\",children:Object(Kr.jsxs)(vc,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[Object(Kr.jsx)(ei,{variant:\"white\",gfbold:!0,wrap:!0,children:t.name}),Object(Kr.jsx)(ac.a,{icon:\"times\",className:\"cursor-pointer\",onClick:s})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(vc,{fullWidth:!0,className:\"body-image bot\",children:Object(Kr.jsx)(fc,{figure:t.figure,direction:4})}),Object(Kr.jsx)(vc,{grow:!0,center:!0,gap:0,children:t.badges.length>0&&t.badges.map((e=>Object(Kr.jsx)(Ic,{badgeCode:e,showInfo:!0},e)))})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ec,{alignItems:\"center\",className:\"py-1 px-2\",children:Object(Kr.jsx)(ei,{fullWidth:!0,wrap:!0,textBreak:!0,variant:\"white\",className:\"motto-content\",children:t.motto})}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(Qc,{userId:t.ownerId}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.text.botowner\",[\"name\"],[t.ownerName])})]}),t.carryItem>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsx)(ei,{variant:\"white\",wrap:!0,children:nt(\"infostand.text.handitem\",[\"item\"],[nt(\"handitem\"+t.carryItem)])})]})]})]})}),n&&Object(Kr.jsx)(ec,{justifyContent:\"end\",children:Object(Kr.jsx)(tc,{className:\"infostand-buttons\",onClick:()=>$n(new a.B(t.webID)),children:nt(\"infostand.button.pickup\")})})]})},_j=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null;if(!n||!n.friendCount)return null;const r=a.Lf.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:`nitro-friends-spritesheet icon-${r}`}),Object(Kr.jsx)(ec,{alignItems:\"center\",gap:0,children:Object(Kr.jsxs)(ei,{gfbold:!0,variant:\"white\",onClick:e=>Lr(n.randomFriendId),children:[Object(Kr.jsx)(\"u\",{children:n.randomFriendName}),n.friendCount>1&&\" \"+nt(`extendedprofile.relstatus.others.${r}`,[\"count\"],[(n.friendCount-1).toString()])]})})]})};return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(s,{type:a.Lf.HEART}),Object(Kr.jsx)(s,{type:a.Lf.SMILE}),Object(Kr.jsx)(s,{type:a.Lf.BOBBA})]})},Ej=e=>{const{userData:t=null,setUserData:s=null,close:n=null}=e,[r,i]=Object(c.useState)(null),[o,l]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),{eventDispatcher:h=null,widgetHandler:j=null}=Kd(),b=(k(\"user.badges.max.slots\",5),e=>{!o||e.length>k(\"motto.max.length\",38)||(j.processWidgetMessage(new un(e)),l(!1))}),g=Object(c.useCallback)((e=>{t&&t.webID===e.userId&&s((t=>{const s=Xe(t);return s.badges=e.badges,s}))}),[t,s]);Pt(a.eh.RSUBE_BADGES,h,g);const O=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Xe(t);return s.figure=e.figure,s.motto=e.customInfo,s.achievementScore=e.activityPoints,s}))}),[t,s]);Pt(a.gh.USER_FIGURE,h,O);const m=Object(c.useCallback)((e=>{t&&t.roomIndex===e.roomIndex&&s((t=>{const s=Xe(t),n=-1===e.status||e.habboGroupId<=0;return s.groupId=n?-1:e.habboGroupId,s.groupName=n?null:e.habboGroupName,s.groupBadgeId=n?null:ee().getGroupBadge(e.habboGroupId),s}))}),[t,s]);Pt(a.Zg.FAVOURITE_GROUP_UPDATE,h,m);const p=Object(c.useCallback)((e=>{const s=e.getParser();t&&t.webID===s.userId&&d(s)}),[t]);return it(a.Mf,p),Object(c.useEffect)((()=>(l(!1),i(t.motto),$n(new a.Ki(t.webID)),()=>{l(!1),i(null),d(null)})),[t]),t?Object(Kr.jsx)(vc,{className:\"nitro-infostand rounded\",children:Object(Kr.jsxs)(vc,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-profile-house cursor-pointer\",onClick:e=>Lr(t.webID)}),Object(Kr.jsx)(ei,{gfbold:!0,variant:\"white\",className:\"infostand-name\",onClick:e=>Lr(t.webID),children:t.name})]}),Object(Kr.jsx)(\"i\",{className:\"infostand-close\",onClick:n})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(vc,{fullWidth:!0,className:\"body-image infostand-thumb-bg\",onClick:e=>Lr(t.webID),children:Object(Kr.jsx)(fc,{figure:t.figure,direction:4})}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:\"badge-image\",children:t.badges[0]&&Object(Kr.jsx)(Ic,{badgeCode:t.badges[0],showInfo:!0})}),Object(Kr.jsx)(Qr,{pointer:t.groupId>0,className:\"badge-image\",onClick:e=>Er(t.groupId),children:t.groupId>0&&Object(Kr.jsx)(Ic,{badgeCode:t.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:t.groupName})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:\"badge-image\",children:t.badges[1]&&Object(Kr.jsx)(Ic,{badgeCode:t.badges[1],showInfo:!0})}),Object(Kr.jsx)(Qr,{className:\"badge-image\",children:t.badges[2]&&Object(Kr.jsx)(Ic,{badgeCode:t.badges[2],showInfo:!0})})]}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(Qr,{className:\"badge-image\",children:t.badges[3]&&Object(Kr.jsx)(Ic,{badgeCode:t.badges[3],showInfo:!0})}),Object(Kr.jsx)(Qr,{className:\"badge-image\",children:t.badges[4]&&Object(Kr.jsx)(Ic,{badgeCode:t.badges[4],showInfo:!0})})]})]})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",className:\"infostand-thumb-bg py-1 px-2\",children:[t.type!==Fe.OWN_USER&&Object(Kr.jsx)(ec,{grow:!0,alignItems:\"center\",className:\"motto-content\",children:Object(Kr.jsx)(ei,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,variant:\"white\",children:r})}),t.type===Fe.OWN_USER&&Object(Kr.jsxs)(ec,{grow:!0,alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(\"i\",{className:\"icon pencil-icon\"}),Object(Kr.jsxs)(ec,{grow:!0,alignItems:\"center\",className:\"motto-content\",children:[!o&&Object(Kr.jsxs)(ei,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,variant:\"white\",onClick:e=>l(!0),children:[r,\"\\xa0\"]}),o&&Object(Kr.jsx)(\"input\",{type:\"text\",className:\"motto-input\",maxLength:k(\"motto.max.length\",38),value:r,onChange:e=>i(e.target.value),onBlur:e=>b(e.target.value),onKeyDown:e=>{e.stopPropagation(),\"Enter\"!==e.key||b(e.target.value)},autoFocus:!0})]})]})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0\"})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,variant:\"white\",wrap:!0,children:nt(\"infostand.text.achievement_score\")+\" \"+t.achievementScore}),t.carryItem>0&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0\"}),Object(Kr.jsx)(ei,{gfbold:!0,variant:\"white\",wrap:!0,children:nt(\"infostand.text.handitem\",[\"item\"],[nt(\"handitem\"+t.carryItem)])})]})]}),Object(Kr.jsx)(vc,{gap:1,children:Object(Kr.jsx)(_j,{relationships:u})})]})}):null},fj=e=>{const{eventDispatcher:t=null,widgetHandler:s=null}=Kd(),[n,r]=Object(c.useState)(null),i=Object(c.useCallback)((()=>{r(null)}),[]),a=Object(c.useCallback)((e=>{switch(e.type){case Ve.OBJECT_SELECTED:{const t=e;return void s.processWidgetMessage(new Cn(Cn.GET_OBJECT_INFO,t.id,t.category))}case Ve.OBJECT_DESELECTED:return void i();case Ve.FURNI_REMOVED:case Ve.USER_REMOVED:{const t=e;return void r((s=>{switch(e.type){case Ve.FURNI_REMOVED:if(s instanceof Pe&&s.id===t.id)return null;break;case Ve.USER_REMOVED:if(s instanceof Fe||s instanceof Le){if(s.roomIndex===t.id)return null}else if(s instanceof Me&&s.roomIndex===t.id)return null}return s}))}case Pe.FURNI:case Fe.OWN_USER:case Fe.PEER:case Fe.BOT:case Le.RENTABLE_BOT:case Me.PET_INFO:return void r(e);default:return void console.log(e)}}),[s,i]);Pt(Ve.OBJECT_SELECTED,t,a),Pt(Ve.OBJECT_DESELECTED,t,a),Pt(Ve.USER_REMOVED,t,a),Pt(Ve.FURNI_REMOVED,t,a),Pt(Pe.FURNI,t,a),Pt(Fe.OWN_USER,t,a),Pt(Fe.PEER,t,a),Pt(Fe.BOT,t,a),Pt(Le.RENTABLE_BOT,t,a),Pt(Me.PET_INFO,t,a),Pt(Me.PET_INFO,t,a);const o=Object(c.useCallback)((()=>{if(!n)return null;switch(n.type){case Pe.FURNI:return Object(Kr.jsx)(Oj,{furniData:n,close:i});case Fe.OWN_USER:case Fe.PEER:return Object(Kr.jsx)(Ej,{userData:n,setUserData:r,close:i});case Fe.BOT:return Object(Kr.jsx)(gj,{botData:n,close:i});case Le.RENTABLE_BOT:return Object(Kr.jsx)(pj,{rentableBotData:n,close:i});case Me.PET_INFO:return Object(Kr.jsx)(mj,{petData:n,close:i})}return null}),[n,i]);return n?Object(Kr.jsx)(vc,{alignItems:\"end\",className:\"nitro-infostand-container\",children:o()}):null},xj=e=>{const[t,s]=Object(c.useState)(!1),{roomSession:n=null}=Kd(),r=Object(c.useCallback)((e=>{switch(e.type){case kt.SHOW_THUMBNAIL:return void s(!0);case kt.HIDE_THUMBNAIL:return void s(!1);case kt.TOGGLE_THUMBNAIL:return void s((e=>!e))}}),[]);qt(kt.SHOW_THUMBNAIL,r),qt(kt.HIDE_THUMBNAIL,r),qt(kt.TOGGLE_THUMBNAIL,r);const i=Object(c.useCallback)((e=>{L().saveTextureAsScreenshot(e,!0),s(!1)}),[]);return t?Object(Kr.jsx)(Pc,{roomId:n.roomId,textureReceiver:i,onClose:()=>s(!1)}):null},Ij=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Object(c.useState)(null),[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(!1),[j,b]=Object(c.useState)(!1),[g,O]=_s(),{roomSession:m=null,widgetHandler:p=null}=Kd(),[_,E]=Object(c.useState)(!0),f=e=>{switch(e){case\"settings\":return void y(\"navigator/toggle-room-info\");case\"zoom\":return void s((e=>{let t=L().getRoomInstanceRenderingCanvasScale(m.roomId,1);return e?t*=2:t/=2,L().setRoomInstanceRenderingCanvasScale(m.roomId,1,t),!e}));case\"chat_history\":return void y(\"chat-history/toggle\");case\"like_room\":return void $n(new a.Fg(1));case\"toggle_room_link\":return void y(\"navigator/toggle-room-link\")}},x=Object(c.useCallback)((e=>{const t=e.getParser();t.roomEnter&&(n!==t.data.roomName&&r(t.data.roomName),i!==t.data.ownerName&&o(t.data.ownerName),l!==t.data.tags&&u(t.data.tags))}),[n,i,l]);return it(a.nc,x),Object(c.useEffect)((()=>{b(!0);const e=setTimeout((()=>b(!1)),5e3);return()=>clearTimeout(e)}),[n,i,l]),Object(Kr.jsxs)(ec,{gap:2,className:\"nitro-room-tools-container\",children:[Object(Kr.jsx)(\"div\",{className:\"btn-toggle toggle-roomtool d-flex align-items-center\",onClick:()=>E(!_),children:Object(Kr.jsx)(\"div\",{className:\"toggle-icon \"+Zi()({right:!_,left:_})})}),_&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsxs)(ec,{gap:0,center:!0,className:\"nitro-room-tools p-3 px-3\",children:[Object(Kr.jsxs)(vc,{center:!0,className:\"p-1\",children:[Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.settings.button.text\"),className:\"icon icon-cog\",onClick:()=>f(\"settings\")}),Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.zoom.button.text\"),onClick:()=>f(\"zoom\"),className:\"icon \"+Zi()({\"icon-zoom-less\":!t,\"icon-zoom-more\":t})}),Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.chathistory.button.text\"),onClick:()=>f(\"chat_history\"),className:\"icon icon-chat-history\"}),g.canRate&&Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.like.button.text\"),onClick:()=>f(\"like_room\"),className:\"icon icon-like-room\"}),Object(Kr.jsx)(Qr,{pointer:!0,title:nt(\"room.like.button.text\"),onClick:()=>f(\"toggle_room_link\"),className:\"icon icon-link-room\"})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ec,{className:\"w-100 room-tool-item\",children:Object(Kr.jsx)(ei,{underline:!0,small:!0,onClick:()=>f(\"settings\"),children:nt(\"room.settings.button.text\")})}),Object(Kr.jsx)(ec,{className:\"w-100 room-tool-item\",children:Object(Kr.jsx)(ei,{underline:!0,small:!0,onClick:()=>f(\"zoom\"),children:nt(\"room.zoom.button.text\")})}),Object(Kr.jsx)(ec,{className:\"w-100 room-tool-item\",children:Object(Kr.jsx)(ei,{underline:!0,small:!0,onClick:()=>f(\"chat_history\"),children:nt(\"room.chathistory.button.text\")})}),g.canRate&&Object(Kr.jsx)(ec,{className:\"w-100 room-tool-item\",children:Object(Kr.jsx)(ei,{underline:!0,small:!0,onClick:()=>f(\"like_room\"),children:nt(\"room.like.button.text\")})}),Object(Kr.jsx)(ec,{className:\"w-100 room-tool-item\",children:Object(Kr.jsx)(ei,{underline:!0,small:!0,onClick:()=>f(\"toggle_room_link\"),children:nt(\"navigator.embed.caption\")})})]})]}),Object(Kr.jsx)(vc,{justifyContent:\"center\",children:Object(Kr.jsx)(Bc,{type:Fc.SLIDE_LEFT,inProp:j,timeout:300,children:Object(Kr.jsx)(vc,{center:!0,gap:2,children:Object(Kr.jsxs)(vc,{className:\"nitro-room-tools-info py-2 px-3\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{wrap:!0,variant:\"white\",fontSize:4,children:n}),Object(Kr.jsx)(ei,{variant:\"muted\",fontSize:5,children:i})]}),l&&l.length>0&&Object(Kr.jsx)(ec,{gap:2,children:l.map(((e,t)=>Object(Kr.jsxs)(ei,{small:!0,variant:\"white\",className:\"rounded bg-primary p-1\",children:[\"#\",e]},t)))})]})})})})]})]})},Tj=\"0\",Cj=e=>{const{question:t=null,canVote:s=null,vote:n=null,noVotes:r=null,yesVotes:c=null}=e;return Object(Kr.jsxs)(vc,{gap:2,className:\"wordquiz-question p-2\",children:[!s&&Object(Kr.jsxs)(ec,{fullWidth:!0,alignItems:\"center\",gap:2,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"bg-danger rounded p-2\",children:Object(Kr.jsx)(ei,{variant:\"white\",children:r})}),Object(Kr.jsx)(ei,{variant:\"white\",center:!0,textBreak:!0,children:t}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"bg-success rounded p-2\",children:Object(Kr.jsx)(ei,{variant:\"white\",children:c})})]}),s&&Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{variant:\"white\",center:!0,textBreak:!0,children:t}),Object(Kr.jsxs)(ec,{fullWidth:!0,justifyContent:\"center\",gap:1,children:[Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"bg-danger rounded p-1\",onClick:e=>n(Tj),children:Object(Kr.jsx)(Qr,{className:\"word-quiz-dislike\"})}),Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:\"bg-success rounded p-1\",onClick:e=>n(\"1\"),children:Object(Kr.jsx)(Qr,{className:\"word-quiz-like\"})})]})]})]})};var Nj=s(50);const Sj=e=>{const{userIndex:t=null,vote:s=null,...n}=e;return Object(Kr.jsx)(Sh,{objectId:t,category:Nj.Kg.UNIT,...n,children:Object(Kr.jsx)(ec,{center:!0,pointer:!0,className:`bg-${s===Tj?\"danger\":\"success\"} rounded p-1`,children:Object(Kr.jsx)(Qr,{className:`word-quiz-${s===Tj?\"dislike\":\"like\"}-sm`})})})},vj=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(new Map),[h,j]=Object(c.useState)(new Map),{eventDispatcher:b=null,widgetHandler:g=null,roomSession:O=null}=Kd(),m=Object(c.useCallback)((()=>{s(-1),r(null)}),[]),p=Object(c.useCallback)((e=>{switch(e.type){case Qe.NEW_QUESTION:s(e.id),r(e.question),a(!1),d(new Map),j(new Map),l((t=>{if(t&&clearTimeout(t),e.duration>0){const t=e.duration<1e3?4e3:e.duration;return setTimeout((()=>m()),t)}return null}));break;case Qe.QUESTION_ANSWERED:{const t=O.userDataManager.getUserData(e.userId);if(!t)return;d(e.answerCounts),j((s=>{if(!s.has(t.roomIndex)){const s=new Map(h);return s.set(t.roomIndex,{value:e.value,secondsLeft:3}),s}return s}));break}case Qe.QUESTION_FINISHED:n&&n.id===e.questionId&&(d(e.answerCounts),a(!0),l((e=>(e&&clearTimeout(e),setTimeout((()=>m()),4e3))))),j(new Map)}}),[n,O.userDataManager,h,m]);Pt(Qe.NEW_QUESTION,b,p),Pt(Qe.QUESTION_ANSWERED,b,p),Pt(Qe.QUESTION_FINISHED,b,p);const _=Object(c.useCallback)((e=>{if(i||!n)return;const s=new xn(xn.ANSWER,t);s.questionId=n.id,s.answers=[e],g.processWidgetMessage(s),a(!0)}),[i,t,n,g]),E=Object(c.useCallback)((()=>{j((e=>{const t=[];if(e.forEach(((e,s)=>{e.secondsLeft--,e.secondsLeft<=0&&t.push(s)})),0===t.length)return e;const s=new Map(e);return t.forEach((e=>s.delete(e))),s}))}),[]);return Object(c.useEffect)((()=>{const e=setInterval((()=>E()),1e3);return()=>clearInterval(e)}),[E]),Object(c.useEffect)((()=>()=>{l((e=>(e&&clearTimeout(e),null)))}),[]),Object(Kr.jsxs)(Kr.Fragment,{children:[n&&Object(Kr.jsx)(Cj,{question:n.content,canVote:!i,vote:_,noVotes:u.get(Tj)||0,yesVotes:u.get(\"1\")||0}),h&&Array.from(h.entries()).map(((e,t)=>{let[s,n]=e;return Object(Kr.jsx)(Sj,{userIndex:s,vote:n.value},t)}))]})},Rj=e=>{const{roomSession:t=null,eventDispatcher:s=null,widgetHandler:n=null}=Kd(),r=Object(c.useCallback)((e=>{if(s&&!a.Bg.isRoomPreviewerId(e.roomId))switch(e.type){case a.og.NORMAL_MODE:return void s.dispatchEvent(new We(We.NORMAL_MODE,e.roomId));case a.og.GAME_MODE:return void s.dispatchEvent(new We(We.GAME_MODE,e.roomId));case a.Bh.ROOM_ZOOM:{const t=e;return void L().setRoomInstanceRenderingCanvasScale(e.roomId,1,t.level,null,null,!1,t.asDelta)}}}),[s]);Bt(a.og.NORMAL_MODE,r),Bt(a.og.GAME_MODE,r),Bt(a.Bh.ROOM_ZOOM,r);const i=Object(c.useCallback)((e=>{}),[]),o=Object(c.useCallback)((e=>{}),[]),l=Object(c.useCallback)((e=>{if(!t||!n)return;const s=e.objectId,r=e.category;let c=null;switch(e.type){case a.pg.SELECTED:(function(e){let t=!1;const s=L().getRoomObject(e.roomId,e.objectId,e.category);s&&1===s.model.getValue(a.Og.FURNITURE_SELECTION_DISABLED)&&(t=!0,ee().isModerator&&(t=!1));return t})(e)||(c=new Ve(Ve.OBJECT_SELECTED,s,r,e.roomId));break;case a.pg.DESELECTED:c=new Ve(Ve.OBJECT_DESELECTED,s,r,e.roomId);break;case a.pg.ADDED:{let t=null;switch(r){case a.Ig.FLOOR:case a.Ig.WALL:t=Ve.FURNI_ADDED;break;case a.Ig.UNIT:t=Ve.USER_ADDED}t&&(c=new Ve(t,s,r,e.roomId));break}case a.pg.REMOVED:{let t=null;switch(r){case a.Ig.FLOOR:case a.Ig.WALL:t=Ve.FURNI_REMOVED;break;case a.Ig.UNIT:t=Ve.USER_REMOVED}t&&(c=new Ve(t,s,r,e.roomId));break}case a.pg.REQUEST_MOVE:Q(t,s,r)&&ge(s,r,a.Kg.OBJECT_MOVE);break;case a.pg.REQUEST_ROTATE:Q(t,s,r)&&ge(s,r,a.Kg.OBJECT_ROTATE_POSITIVE);break;case a.pg.REQUEST_MANIPULATION:Q(t,s,r)&&(c=new Ve(Ve.OBJECT_REQUEST_MANIPULATION,s,r,e.roomId));break;case a.pg.MOUSE_ENTER:c=new Ve(Ve.OBJECT_ROLL_OVER,s,r,e.roomId);break;case a.pg.MOUSE_LEAVE:c=new Ve(Ve.OBJECT_ROLL_OUT,s,r,e.roomId);break;case a.sg.REQUEST_CREDITFURNI:n.processWidgetMessage(new fn(fn.REQUEST_CREDITFURNI,s,r,e.roomId));break;case a.sg.REQUEST_STICKIE:n.processWidgetMessage(new fn(fn.REQUEST_STICKIE,s,r,e.roomId));break;case a.sg.REQUEST_PRESENT:n.processWidgetMessage(new fn(fn.REQUEST_PRESENT,s,r,e.roomId));break;case a.sg.REQUEST_TROPHY:n.processWidgetMessage(new fn(fn.REQUEST_TROPHY,s,r,e.roomId));break;case a.sg.REQUEST_TEASER:n.processWidgetMessage(new fn(fn.REQUEST_TEASER,s,r,e.roomId));break;case a.sg.REQUEST_ECOTRONBOX:n.processWidgetMessage(new fn(fn.REQUEST_ECOTRONBOX,s,r,e.roomId));break;case a.sg.REQUEST_DIMMER:n.processWidgetMessage(new fn(fn.REQUEST_DIMMER,s,r,e.roomId));break;case a.sg.REQUEST_PLACEHOLDER:n.processWidgetMessage(new fn(fn.REQUEST_PLACEHOLDER,s,r,e.roomId));break;case a.sg.REQUEST_CLOTHING_CHANGE:n.processWidgetMessage(new fn(fn.REQUEST_CLOTHING_CHANGE,s,r,e.roomId));break;case a.sg.REQUEST_PLAYLIST_EDITOR:n.processWidgetMessage(new fn(fn.REQUEST_PLAYLIST_EDITOR,s,r,e.roomId));break;case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:n.processWidgetMessage(new fn(fn.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,s,r,e.roomId));break;case a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING:n.processWidgetMessage(new fn(fn.REQUEST_BADGE_DISPLAY_ENGRAVING,s,r,e.roomId));break;case a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED:L().getRoomObject(e.roomId,s,r).model.getValue(a.Og.FURNITURE_OWNER_ID)===ee().userId&&n.processWidgetMessage(new fn(fn.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,s,r,e.roomId));break;case a.sg.OPEN_WIDGET:case a.sg.CLOSE_WIDGET:case a.sg.OPEN_FURNI_CONTEXT_MENU:case a.sg.CLOSE_FURNI_CONTEXT_MENU:case a.sg.REMOVE_DIMMER:case a.sg.REQUEST_MANNEQUIN:case a.tg.USE_PRODUCT_FROM_INVENTORY:case a.tg.USE_PRODUCT_FROM_ROOM:case a.sg.REQUEST_BACKGROUND_COLOR:case a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING:case a.sg.REQUEST_HIGH_SCORE_DISPLAY:case a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case a.sg.REQUEST_INTERNAL_LINK:case a.sg.REQUEST_ROOM_LINK:n.processEvent(e);break;case a.rg.FURNI_CLICK:case a.rg.FURNI_DOUBLE_CLICK:i(e);break;case a.rg.TOOLTIP_SHOW:case a.rg.TOOLTIP_HIDE:o(e)}if(c){let e=!0;c instanceof Ve&&(e=!a.Bg.isRoomPreviewerId(c.roomId)),e&&n.eventDispatcher.dispatchEvent(c)}}),[t,n,i,o]);Bt(a.pg.SELECTED,l),Bt(a.pg.DESELECTED,l),Bt(a.pg.ADDED,l),Bt(a.pg.REMOVED,l),Bt(a.pg.PLACED,l),Bt(a.pg.REQUEST_MOVE,l),Bt(a.pg.REQUEST_ROTATE,l),Bt(a.pg.REQUEST_MANIPULATION,l),Bt(a.pg.MOUSE_ENTER,l),Bt(a.pg.MOUSE_LEAVE,l),Bt(a.sg.REQUEST_CREDITFURNI,l),Bt(a.sg.REQUEST_STICKIE,l),Bt(a.sg.REQUEST_PRESENT,l),Bt(a.sg.REQUEST_TROPHY,l),Bt(a.sg.REQUEST_TEASER,l),Bt(a.sg.REQUEST_ECOTRONBOX,l),Bt(a.sg.REQUEST_DIMMER,l),Bt(a.sg.REQUEST_PLACEHOLDER,l),Bt(a.sg.REQUEST_CLOTHING_CHANGE,l),Bt(a.sg.REQUEST_PLAYLIST_EDITOR,l),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,l),Bt(a.sg.REQUEST_BADGE_DISPLAY_ENGRAVING,l),Bt(a.sg.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,l),Bt(a.sg.OPEN_WIDGET,l),Bt(a.sg.CLOSE_WIDGET,l),Bt(a.sg.OPEN_FURNI_CONTEXT_MENU,l),Bt(a.sg.CLOSE_FURNI_CONTEXT_MENU,l),Bt(a.sg.REMOVE_DIMMER,l),Bt(a.sg.REQUEST_MANNEQUIN,l),Bt(a.tg.USE_PRODUCT_FROM_INVENTORY,l),Bt(a.tg.USE_PRODUCT_FROM_ROOM,l),Bt(a.sg.REQUEST_BACKGROUND_COLOR,l),Bt(a.sg.REQUEST_FRIEND_FURNITURE_ENGRAVING,l),Bt(a.sg.REQUEST_HIGH_SCORE_DISPLAY,l),Bt(a.sg.REQUEST_HIDE_HIGH_SCORE_DISPLAY,l),Bt(a.sg.REQUEST_INTERNAL_LINK,l),Bt(a.sg.REQUEST_ROOM_LINK,l),Bt(a.rg.FURNI_CLICK,l),Bt(a.rg.FURNI_DOUBLE_CLICK,l),Bt(a.rg.TOOLTIP_SHOW,l),Bt(a.rg.TOOLTIP_HIDE,l);const u=Object(c.useCallback)((e=>{n&&n.processEvent(e)}),[n]);Gt(a.Tg.CHAT_EVENT,u),Gt(a.Tg.FLOOD_EVENT,u),Gt(a.Ug.RSDE_DANCE,u),Gt(a.eh.RSUBE_BADGES,u),Gt(a.gh.USER_FIGURE,u),Gt(a.Zg.FAVOURITE_GROUP_UPDATE,u),Gt(a.bh.PET_STATUS_UPDATE,u),Gt(a.Wg.DOORBELL,u),Gt(a.Wg.RSDE_REJECTED,u),Gt(a.Wg.RSDE_ACCEPTED,u),Gt(a.Vg.ROOM_DIMMER_PRESETS,u),Gt(a.dh.RSPE_PRESENT_OPENED,u),Gt(a.ah.PET_INFO,u),Gt(a.hh.ANSWERED,u),Gt(a.hh.FINISHED,u),Gt(a.hh.QUESTION,u),Gt(a.ch.OFFER,u),Gt(a.ch.ERROR,u),Gt(a.ch.CONTENT,u);const d=Object(c.useCallback)((e=>{if(!e)return;let t=nt(\"error.title\"),s=\"\";switch(e.type){case a.Xg.RSEME_MAX_PETS:s=nt(\"room.error.max_pets\");break;case a.Xg.RSEME_MAX_NUMBER_OF_OWN_PETS:s=nt(\"room.error.max_own_pets\");break;case a.Xg.RSEME_KICKED:s=nt(\"room.error.kicked\"),t=nt(\"generic.alert.title\");break;case a.Xg.RSEME_PETS_FORBIDDEN_IN_HOTEL:s=nt(\"room.error.pets.forbidden_in_hotel\");break;case a.Xg.RSEME_PETS_FORBIDDEN_IN_FLAT:s=nt(\"room.error.pets.forbidden_in_flat\");break;case a.Xg.RSEME_NO_FREE_TILES_FOR_PET:s=nt(\"room.error.pets.no_free_tiles\");break;case a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:s=nt(\"room.error.pets.selected_tile_not_free\");break;case a.Xg.RSEME_BOTS_FORBIDDEN_IN_HOTEL:s=nt(\"room.error.bots.forbidden_in_hotel\");break;case a.Xg.RSEME_BOTS_FORBIDDEN_IN_FLAT:s=nt(\"room.error.bots.forbidden_in_flat\");break;case a.Xg.RSEME_BOT_LIMIT_REACHED:s=nt(\"room.error.max_bots\");break;case a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:s=nt(\"room.error.bots.selected_tile_not_free\");break;case a.Xg.RSEME_BOT_NAME_NOT_ACCEPTED:s=nt(\"room.error.bots.name.not.accepted\");break;default:return}Pr.simpleAlert(s,yr.DEFAULT,null,null,t)}),[]);return Gt(a.Xg.RSEME_KICKED,d),Gt(a.Xg.RSEME_PETS_FORBIDDEN_IN_HOTEL,d),Gt(a.Xg.RSEME_PETS_FORBIDDEN_IN_FLAT,d),Gt(a.Xg.RSEME_MAX_PETS,d),Gt(a.Xg.RSEME_MAX_NUMBER_OF_OWN_PETS,d),Gt(a.Xg.RSEME_NO_FREE_TILES_FOR_PET,d),Gt(a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,d),Gt(a.Xg.RSEME_BOTS_FORBIDDEN_IN_HOTEL,d),Gt(a.Xg.RSEME_BOTS_FORBIDDEN_IN_FLAT,d),Gt(a.Xg.RSEME_BOT_LIMIT_REACHED,d),Gt(a.Xg.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,d),Gt(a.Xg.RSEME_BOT_NAME_NOT_ACCEPTED,d),n?Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(gh,{}),Object(Kr.jsx)(xh,{}),Object(Kr.jsx)(mh,{}),Object(Kr.jsx)(Nh,{}),Object(Kr.jsx)(bj,{}),Object(Kr.jsx)(fj,{}),Object(Kr.jsx)(Ij,{}),Object(Kr.jsx)(xj,{}),Object(Kr.jsx)(Th,{}),Object(Kr.jsx)(Ch,{}),Object(Kr.jsx)(vj,{}),Object(Kr.jsx)(Rh,{})]}):null},Aj=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)(null),i=Object(c.useRef)(),o=Object(c.useCallback)((e=>{if(a.Bg.isRoomPreviewerId(e.roomId))return;const t=ie();if(t)switch(e.type){case a.og.INITIALIZED:return Oe(e.roomId),void s(t);case a.og.DISPOSED:return void s(null)}}),[]);Bt(a.og.INITIALIZED,o),Bt(a.og.DISPOSED,o);const l=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return t=e.session,void $().startSession(t);case a.Yg.ENDED:return void s(null)}var t}),[]);Gt(a.Yg.CREATED,l),Gt(a.Yg.ENDED,l);const u=Object(c.useCallback)((function(){const e=C().renderer.view;if(!e)return;e.style.width=`${Math.floor(window.innerWidth)}px`,e.style.height=`${Math.floor(window.innerHeight)}px`;const t=C();t.renderer.resolution=window.devicePixelRatio,t.renderer.resize(window.innerWidth,window.innerHeight),be(window.innerWidth,window.innerHeight,1),t.render()}),[]);return Object(c.useEffect)((()=>{if(!t)return void r(null);const e=new qn(t,new a.xb);e.registerHandler(new Gn),e.registerHandler(new zn),e.registerHandler(new Vn),e.registerHandler(new Wn),e.registerHandler(new Kn),e.registerHandler(new Qn),e.registerHandler(new Hn),e.registerHandler(new Rn),e.registerHandler(new An),e.registerHandler(new yn),e.registerHandler(new wn),e.registerHandler(new Dn),e.registerHandler(new Mn),e.registerHandler(new kn),e.registerHandler(new Fn),e.registerHandler(new Pn),e.registerHandler(new Un),e.registerHandler(new Ln),r(e);const s=L(),n=t.roomId;u();const c=s.getRoomInstanceDisplay(n,1,window.innerWidth,window.innerHeight,a.Ag.SCALE_ZOOMED_IN);if(!c)return;const i=s.getRoomInstanceGeometry(n,1);if(i){let e=((s.getRoomInstanceVariable(n,a.vh.ROOM_MIN_X)||0)+(s.getRoomInstanceVariable(n,a.vh.ROOM_MAX_X)||0))/2,t=((s.getRoomInstanceVariable(n,a.vh.ROOM_MIN_Y)||0)+(s.getRoomInstanceVariable(n,a.vh.ROOM_MAX_Y)||0))/2;const r=20;e+=r-1,t+=r-1;const c=Math.sqrt(r*r+r*r)*Math.tan(30/180*Math.PI);i.location=new a.Ui(e,t,c)}const o=C().stage;o&&(o.addChild(c),Oe(t.roomId))}),[t,u]),Object(c.useEffect)((()=>{const e=C().renderer.view;if(!e)return;e.onclick=e=>G(e),e.onmousemove=e=>G(e),e.onmousedown=e=>G(e),e.onmouseup=e=>G(e),e.ontouchstart=e=>z(e),e.ontouchmove=e=>z(e),e.ontouchend=e=>z(e),e.ontouchcancel=e=>z(e),u();const t=i.current;return t&&t.appendChild(e),window.addEventListener(\"resize\",u),()=>{t&&t.removeChild(e),window.removeEventListener(\"resize\",u)}}),[u]),Object(Kr.jsx)(zd,{value:{roomSession:t,eventDispatcher:n&&n.eventDispatcher,widgetHandler:n},children:Object(Kr.jsx)(Qr,{fit:!0,innerRef:i,className:!t&&\"d-none\",children:t&&n&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Qd,{}),Object(Kr.jsx)(Rj,{}),t.isSpectator&&Object(Kr.jsx)($d,{})]})})})},yj=e=>{const{useGuideTool:t=!1,unseenAchievementCount:s=0,setMeExpanded:n=null,children:r=null,...i}=e,o=Object(c.useRef)();return Object(c.useEffect)((()=>{const e=ie();e&&L().selectRoomObject(e.roomId,e.ownRoomIndex,a.Ig.UNIT)}),[]),Object(c.useEffect)((()=>{const e=e=>n(!1);return document.addEventListener(\"click\",e),()=>document.removeEventListener(a.Ce.MOUSE_CLICK,e)}),[n]),Object(Kr.jsxs)(ec,{innerRef:o,alignItems:\"center\",className:\"nitro-toolbar-me p-2\",gap:3,children:[t&&Object(Kr.jsxs)(vc,{gap:1,alignItems:\"center\",onClick:e=>Vt(new pt(pt.TOGGLE_GUIDE_TOOL)),children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-me-helper-tool\"}),Object(Kr.jsx)(ei,{className:\"me-text\",children:nt(\"widget.memenu.guide\")})]}),Object(Kr.jsxs)(vc,{gap:1,alignItems:\"center\",onClick:e=>y(\"achievements/toggle\"),children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-me-achievements\",children:s>0&&Object(Kr.jsx)(Rc,{count:s})}),Object(Kr.jsx)(ei,{className:\"me-text\",children:nt(\"widget.memenu.achievements\")})]}),Object(Kr.jsxs)(vc,{gap:1,alignItems:\"center\",onClick:e=>Lr(ee().userId),children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-me-profile\"}),Object(Kr.jsx)(ei,{className:\"me-text\",children:nt(\"widget.memenu.profile\")})]}),Object(Kr.jsxs)(vc,{gap:1,alignItems:\"center\",onClick:e=>y(\"navigator/search/myworld_view\"),children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-me-rooms\"}),Object(Kr.jsx)(ei,{className:\"me-text\",children:nt(\"widget.memenu.myrooms\")})]}),Object(Kr.jsxs)(vc,{gap:1,alignItems:\"center\",onClick:e=>y(\"avatar-editor/toggle\"),children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-me-clothing\"}),Object(Kr.jsx)(ei,{className:\"me-text\",children:nt(\"widget.memenu.myclothes\")})]}),r]})},wj=e=>{const{isInRoom:t}=e,[s,n]=Object(c.useState)(!1),[r,i]=Object(c.useState)(!0),[o,l]=Object(c.useState)(!0),[u,d]=Object(c.useState)(!1),{userFigure:h=null}=Ts(),{getFullCount:j=0}=cs(),{getTotalUnseen:b=0}=at(),{requests:g=[]}=es(),{iconState:O=jr.HIDDEN}=ss(),m=ee().isModerator,p=Object(c.useCallback)((e=>{const t=e.getParser();d(t.isAllowed(a.lf.USE_GUIDE_TOOL))}),[d]);it(a.kf,p);const _=Object(c.useCallback)(((e,t,s,n)=>{const r=document.body.getElementsByClassName(e)[0];if(!r)return;t.className=\"toolbar-icon-animation\",t.style.visibility=\"visible\",t.style.left=s+\"px\",t.style.top=n+\"px\",document.body.append(t);const c=r.getBoundingClientRect(),i=t.getBoundingClientRect(),o=i.x-c.x,l=i.y-c.y,u=Math.sqrt(o*o+l*l),d=500-Math.abs(1/u*100*500*.5),h=`ToolbarBouncing[${e}]`;a.Be.getMotionByTag(h)||(a.Be.runMotion(new a.Hf(new a.Xi(d+8),new a.vb(r,400,12))).tag=h);const j=new a.Hf(new a.wb(new a.Ud(t,d,c.x-i.x+20,c.y-i.y,100,1),1),new a.ub(t));a.Be.runMotion(j)}),[]),E=Object(c.useCallback)((e=>{_(\"icon-inventory\",e.image,e.x,e.y)}),[_]);return Bt(a.df.ANIMATE_ICON,E),Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(Bc,{type:Fc.FADE_IN,inProp:s,timeout:300,children:Object(Kr.jsx)(yj,{useGuideTool:u,unseenAchievementCount:b,setMeExpanded:n})}),Object(Kr.jsx)(ec,{alignItems:\"center\",id:\"toolbar-chat-input-container\"}),Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",gap:2,className:\"nitro-toolbar py-1 px-3\",children:[Object(Kr.jsx)(\"button\",{className:r?\"toolbar-left-collapse\":\"toolbar-left-collapse-active\",onClick:()=>i((e=>!e))}),Object(Kr.jsx)(ec,{gap:2,alignItems:\"center\",className:\"toolbar-left-side\",children:Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[r&&Object(Kr.jsxs)(ec,{gap:2,children:[t&&Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-habbo\",onClick:e=>ue()}),!t&&Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-house\",onClick:e=>y(\"navigator/goto/home\")}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-rooms\",onClick:e=>y(\"navigator/toggle\")})]}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-catalog\",onClick:e=>y(\"catalog/toggle\")}),Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-inventory\",onClick:e=>y(\"inventory/toggle\"),children:j>0&&Object(Kr.jsx)(Rc,{count:j})}),Object(Kr.jsxs)(ec,{center:!0,pointer:!0,className:\"navigation-item item-avatar \"+(s?\"active \":\"\"),onClick:e=>n(!s),children:[Object(Kr.jsx)(fc,{figure:h,direction:2,position:\"absolute\"}),b>0&&Object(Kr.jsx)(Rc,{count:b})]}),t&&Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-camera\",onClick:e=>y(\"camera/toggle\")}),m&&Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-modtools\",onClick:e=>Vt(new It(It.TOGGLE_MOD_TOOLS))})]})}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:2,children:[Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(Qr,{pointer:!0,className:\"navigation-item icon icon-friendall\",onClick:e=>y(\"friends/toggle\"),children:g.length>0&&Object(Kr.jsx)(Rc,{count:g.length})}),(O===jr.SHOW||O===jr.UNREAD)&&Object(Kr.jsx)(Qr,{pointer:!0,className:`navigation-item icon icon-message ${O===jr.UNREAD&&\"is-unseen\"}`,onClick:e=>_r()})]}),Object(Kr.jsx)(Qr,{id:\"toolbar-friend-bar-container\",className:o?\"d-none d-lg-block\":\"d-none\"})]}),Object(Kr.jsx)(\"button\",{className:o?\"toolbar-right-collapse\":\"toolbar-right-collapse-active\",onClick:()=>l((e=>!e))})]})]})},kj=e=>{const{badges:t=null,gap:s=1,justifyContent:n=\"between\",...r}=e;return Object(Kr.jsx)(Kr.Fragment,{children:t&&t.length>0&&t.map(((e,t)=>Object(Kr.jsx)(vc,{center:!0,children:Object(Kr.jsx)(Ic,{badgeCode:e},e)},e)))})},Dj=e=>{const{relationships:t=null}=e,s=e=>{let{type:s}=e;const n=t&&t.relationshipStatusMap.hasKey(s)?t.relationshipStatusMap.getValue(s):null,r=a.Lf.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return Object(Kr.jsxs)(ec,{fullWidth:!0,gap:1,children:[Object(Kr.jsx)(ec,{center:!0,className:\"user-relationship\",children:Object(Kr.jsx)(\"i\",{className:`nitro-friends-spritesheet icon-${r}`})}),Object(Kr.jsxs)(vc,{grow:!0,gap:0,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",justifyContent:\"between\",className:\"profile-white-bg px-2 py-1 user-relationship\",children:[Object(Kr.jsxs)(ei,{small:!0,underline:!0,pointer:!0,onClick:e=>n&&n.randomFriendId>=1&&Lr(n.randomFriendId),children:[(!n||0===n.friendCount)&&nt(\"extendedprofile.add.friends\"),n&&n.friendCount>=1&&n.randomFriendName]}),n&&n.friendCount>=1&&Object(Kr.jsx)(ec,{center:!0,position:\"relative\",className:\"avatar-image-container\",children:Object(Kr.jsx)(fc,{figure:n.randomFriendFigure,headOnly:!0,direction:4})})]}),Object(Kr.jsxs)(ei,{small:!0,italics:!0,className:\"user-relationship-count\",children:[(!n||0===n.friendCount)&&nt(\"extendedprofile.no.friends.in.this.category\"),n&&n.friendCount>1&&nt(`extendedprofile.relstatus.others.${r}`,[\"count\"],[(n.friendCount-1).toString()]),\"\\xa0\"]})]})]})};return Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(s,{type:a.Lf.HEART}),Object(Kr.jsx)(s,{type:a.Lf.SMILE}),Object(Kr.jsx)(s,{type:a.Lf.BOBBA})]})},Uj=e=>{const{relationships:t=null,friendsCount:s=null}=e;return Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ei,{small:!0,children:[Object(Kr.jsx)(\"b\",{children:nt(\"extendedprofile.friends.count\")}),\" \",s]}),Object(Kr.jsx)(ei,{bold:!0,small:!0,children:nt(\"extendedprofile.relstatus\")}),Object(Kr.jsx)(vc,{children:Object(Kr.jsx)(Dj,{relationships:t})})]})},Pj=e=>{const{itsMe:t=null,groups:s=null,onLeaveGroup:n=null,overflow:r=\"hidden\",gap:i=2,...o}=e,[l,u]=Object(c.useState)(null),[d,h]=Object(c.useState)(null),j=Object(c.useCallback)((e=>{const t=e.getParser();l&&l===t.id&&!t.flag&&h(t)}),[l]);return it(a.Uc,j),Object(c.useEffect)((()=>{l&&$n(new a.Tc(l,!1))}),[l]),Object(c.useEffect)((()=>{h(null),s.length>0&&u((e=>(e===s[0].groupId&&$n(new a.Tc(s[0].groupId,!1)),s[0].groupId)))}),[s]),s&&s.length?Object(Kr.jsxs)(Jr,{overflow:r,gap:2,...o,children:[Object(Kr.jsx)(vc,{alignItems:\"center\",size:2,overflow:\"auto\",children:Object(Kr.jsx)(Zr,{overflow:null,columnCount:1,columnMinHeight:50,className:\"user-groups-container\",children:s.map(((e,s)=>Object(Kr.jsxs)(kc,{overflow:\"unset\",itemActive:l===e.groupId,onClick:()=>u(e.groupId),className:\"p-1\",children:[t&&Object(Kr.jsx)(\"i\",{className:\"position-absolute end-0 top-0 z-index-1 icon icon-group-\"+(e.favourite?\"favorite\":\"not-favorite\"),onClick:()=>(e=>{$n(e.favourite?new a.jd(e.groupId):new a.Rc(e.groupId))})(e)}),Object(Kr.jsx)(Ic,{badgeCode:e.badgeCode,isGroup:!0})]},s)))})}),Object(Kr.jsx)(vc,{size:10,overflow:\"hidden\",children:d&&Object(Kr.jsx)(Ol,{groupInformation:d,onClose:n})})]}):Object(Kr.jsx)(vc,{center:!0,fullHeight:!0,children:Object(Kr.jsxs)(vc,{className:\"profile-grey-bg py-3 px-4\",children:[Object(Kr.jsxs)(ei,{small:!0,children:[\" \",nt(\"extendedprofile.nogroups.user\")]}),Object(Kr.jsxs)(ec,{justifyContent:\"center\",gap:4,children:[Object(Kr.jsx)(Qr,{className:\"no-group-spritesheet image-1\"}),Object(Kr.jsx)(Qr,{className:\"no-group-spritesheet image-2\"}),Object(Kr.jsx)(Qr,{className:\"no-group-spritesheet image-3\"})]}),Object(Kr.jsx)(ei,{small:!0,children:nt(\"extendedprofile.nogroups.info\")})]})})},Mj=e=>{const{userProfile:t=null}=e,[s,n]=Object(c.useState)(t.requestSent),r=t.id===ee().userId,i=!s&&!r&&!t.isMyFriend&&!t.requestSent;return Object(c.useEffect)((()=>{n(t.requestSent)}),[t]),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(vc,{center:!0,className:\"avatar-container\",children:Object(Kr.jsx)(fc,{figure:t.figure,direction:2})}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ei,{bold:!0,small:!0,children:t.username}),Object(Kr.jsxs)(ei,{italics:!0,textBreak:!0,small:!0,children:[t.motto,\"\\xa0\"]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ei,{small:!0,children:[Object(Kr.jsx)(\"b\",{children:nt(\"extendedprofile.created\")}),\" \",t.registration]}),Object(Kr.jsxs)(ei,{small:!0,children:[Object(Kr.jsx)(\"b\",{children:nt(\"extendedprofile.last.login\")}),\" \",a.Kb.format(t.secondsSinceLastVisit,\".ago\",2)]}),Object(Kr.jsxs)(ei,{small:!0,children:[Object(Kr.jsx)(\"b\",{children:nt(\"extendedprofile.achievementscore\")}),\" \",t.achievementPoints]})]}),Object(Kr.jsxs)(ec,{gap:1,children:[t.isOnline&&Object(Kr.jsx)(\"i\",{className:\"icon icon-pf-online\"}),!t.isOnline&&Object(Kr.jsx)(\"i\",{className:\"icon icon-pf-offline\"}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[i&&Object(Kr.jsx)(ei,{small:!0,underline:!0,pointer:!0,onClick:()=>{n(!0),$n(new a.Uf(t.username))},children:nt(\"extendedprofile.addasafriend\")}),!i&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-pf-tick\"}),r&&Object(Kr.jsx)(ei,{bold:!0,small:!0,children:nt(\"extendedprofile.me\")}),t.isMyFriend&&Object(Kr.jsx)(ei,{children:nt(\"extendedprofile.friend\")}),(s||t.requestSent)&&Object(Kr.jsx)(ei,{children:nt(\"extendedprofile.friendrequestsent\")})]})]})]})]})]})},Lj=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(null),l=Object(c.useCallback)((()=>{t&&t.id===ee().userId&&Lr(t.id)}),[t]),u=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&r(s.badges)}),[t]);it(a.Ci,u);const d=Object(c.useCallback)((e=>{const s=e.getParser();t&&s.userId===t.id&&o(s)}),[t]);it(a.Mf,d);const h=Object(c.useCallback)((e=>{const t=e.getParser();let n=!1;s((e=>(e&&e.id&&(n=e.id===t.id),t))),n||(r([]),o(null)),$n(new a.Bi(t.id)),$n(new a.Ki(t.id))}),[]);it(a.Ji,h);const j=Object(c.useCallback)((e=>{if(!t)return;if(e.category!==a.Ig.UNIT)return;const s=ie().userDataManager.getUserDataByIndex(e.objectId);s.type===a.Mg.USER&&Lr(s.webID)}),[t]);return Bt(a.pg.SELECTED,j),t?Object(Kr.jsxs)(Ec,{uniqueKey:\"nitro-user-profile\",theme:\"primary\",className:\"user-profile\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"extendedprofile.caption\"),onCloseClick:()=>{s(null),r([]),o(null)}}),Object(Kr.jsxs)(uc,{overflow:\"hidden\",children:[Object(Kr.jsxs)(Jr,{fullHeight:!1,gap:2,children:[Object(Kr.jsxs)(vc,{size:7,gap:1,className:\"user-container pe-2\",children:[Object(Kr.jsx)(Mj,{userProfile:t}),t.id===ee().userId&&Object(Kr.jsxs)(ec,{className:\"p-0\",children:[Object(Kr.jsx)(ei,{small:!0,underline:!0,className:\"cursor-pointer\",onClick:e=>y(\"avatar-editor/toggle\"),children:\"Change Clothes\"}),Object(Kr.jsx)(ei,{className:\"cursor-pointer badge-text\",small:!0,underline:!0,onClick:e=>y(\"inventory/toggle\"),children:\"Change Badges\"})]}),Object(Kr.jsx)(Jr,{columnCount:5,fullHeight:!0,className:\"profile-grey-bg p-1\",children:Object(Kr.jsx)(kj,{fullWidth:!0,center:!0,badges:n})})]}),Object(Kr.jsx)(vc,{size:5,children:i&&Object(Kr.jsx)(Uj,{relationships:i,friendsCount:t.friendsCount})})]}),Object(Kr.jsx)(ec,{alignItems:\"center\",className:\"rooms-button-container px-2 py-1\",children:Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,onClick:e=>y(`navigator/search/hotel_view/owner:${t.username}`),children:[Object(Kr.jsx)(\"i\",{className:\"icon icon-rooms\"}),Object(Kr.jsx)(ei,{bold:!0,small:!0,underline:!0,pointer:!0,children:nt(\"extendedprofile.rooms\")})]})}),Object(Kr.jsx)(Pj,{fullWidth:!0,itsMe:t.id===ee().userId,groups:t.groups,onLeaveGroup:l})]})]}):null},Fj=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(null),[i,o]=Kt(),[l,u]=$t(),d=Object(c.useCallback)((e=>{const t=e.getParser(),s=new a.Ze;s.volumeSystem=t.volumeSystem,s.volumeFurni=t.volumeFurni,s.volumeTrax=t.volumeTrax,s.oldChat=t.oldChat,s.roomInvites=t.roomInvites,s.cameraFollow=t.cameraFollow,s.flags=t.flags,s.chatType=t.chatType,r(s),Ft(s)}),[]);it(a.Mi,d);const h=Object(c.useCallback)(((e,t)=>{let c=!0;const i=n.clone();switch(e){case\"close_view\":return s(!1),void(c=!1);case\"oldchat\":i.oldChat=t,$n(new a.Ni(i.oldChat));break;case\"room_invites\":i.roomInvites=t,$n(new a.Oi(i.roomInvites));break;case\"camera_follow\":i.cameraFollow=t,$n(new a.Li(i.cameraFollow));break;case\"system_volume\":i.volumeSystem=t,i.volumeSystem=Math.max(0,i.volumeSystem),i.volumeSystem=Math.min(100,i.volumeSystem);break;case\"furni_volume\":i.volumeFurni=t,i.volumeFurni=Math.max(0,i.volumeFurni),i.volumeFurni=Math.min(100,i.volumeFurni);break;case\"trax_volume\":i.volumeTrax=t,i.volumeTrax=Math.max(0,i.volumeTrax),i.volumeTrax=Math.min(100,i.volumeTrax)}c&&r(i),Ft(i)}),[n]),j=Object(c.useCallback)((e=>{if(\"volume\"===e)$n(new a.Pi(Math.round(n.volumeSystem),Math.round(n.volumeFurni),Math.round(n.volumeTrax)))}),[n]);return Object(c.useEffect)((()=>{const e={linkReceived:e=>{const t=e.split(\"/\");if(!(t.length<2))switch(t[1]){case\"show\":return void s(!0);case\"hide\":return void s(!1);case\"toggle\":return void s((e=>!e))}},eventUrlPrefix:\"user-settings/\"};return N(e),()=>M(e)}),[]),Object(c.useEffect)((()=>{n&&Vt(n)}),[n]),t?Object(Kr.jsxs)(Ec,{uniqueKey:\"user-settings\",className:\"user-settings-window\",theme:\"settings\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"widget.memenu.settings.title\"),onCloseClick:e=>h(\"close_view\")}),Object(Kr.jsxs)(uc,{gap:3,className:\"text-white\",children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:n.oldChat,onChange:e=>h(\"oldchat\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"memenu.settings.chat.prefer.old.chat\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:n.roomInvites,onChange:e=>h(\"room_invites\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"memenu.settings.other.ignore.room.invites\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:n.cameraFollow,onChange:e=>h(\"camera_follow\",e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"memenu.settings.other.disable.room.camera.follow\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:i,onChange:e=>o(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"memenu.settings.other.place.multiple.objects\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:l,onChange:e=>u(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"memenu.settings.other.skip.purchase.confirmation\")})]})]}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{center:!0,children:nt(\"widget.memenu.settings.volume\")}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ei,{className:\"w-25\",children:nt(\"widget.memenu.settings.volume.ui\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:n.volumeSystem>1?\"icon icon-sound-off\":\"icon icon-sound-off-active\"}),Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ec,{className:\"number-range\"}),Object(Kr.jsx)(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeSystem\",value:n.volumeSystem,onChange:e=>h(\"system_volume\",e.target.value),onMouseUp:()=>j(\"volume\")})]}),Object(Kr.jsx)(\"i\",{className:n.volumeSystem<1?\"icon icon-sound-on\":\"icon icon-sound-on-active\"})]})]}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ei,{className:\"w-25\",children:nt(\"widget.memenu.settings.volume.furni\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:n.volumeFurni>1?\"icon icon-sound-off\":\"icon icon-sound-off-active\"}),Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ec,{className:\"number-range\"}),Object(Kr.jsx)(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeFurni\",value:n.volumeFurni,onChange:e=>h(\"furni_volume\",e.target.value),onMouseUp:()=>j(\"volume\")})]}),Object(Kr.jsx)(\"i\",{className:n.volumeFurni<1?\"icon icon-sound-on\":\"icon icon-sound-on-active\"})]})]}),Object(Kr.jsxs)(ec,{gap:2,children:[Object(Kr.jsx)(ei,{className:\"w-25\",children:nt(\"widget.memenu.settings.volume.trax\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:n.volumeTrax>1?\"icon icon-sound-off\":\"icon icon-sound-off-active\"}),Object(Kr.jsxs)(vc,{gap:0,children:[Object(Kr.jsx)(ec,{className:\"number-range\"}),Object(Kr.jsx)(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeTrax\",value:n.volumeTrax,onChange:e=>h(\"trax_volume\",e.target.value),onMouseUp:()=>j(\"volume\")})]}),Object(Kr.jsx)(\"i\",{className:n.volumeTrax<1?\"icon icon-sound-on\":\"icon icon-sound-on-active\"})]})]})]}),Object(Kr.jsx)(ec,{alignItems:\"end\",children:Object(Kr.jsx)(tc,{onClick:e=>h(\"close_view\"),children:nt(\"generic.back\")})})]})]}):null},Hj=Object(c.createContext)({trigger:null,setTrigger:null,intParams:null,setIntParams:null,stringParam:null,setStringParam:null,furniIds:null,setFurniIds:null,actionDelay:null,setActionDelay:null,saveWired:null}),Bj=e=>Object(Kr.jsx)(Hj.Provider,{value:e.value,children:e.children}),Gj=()=>Object(c.useContext)(Hj),Wj=e=>{const{trigger:t=null,furniIds:s=[],setFurniIds:n=null}=Gj(),r=Object(c.useCallback)((e=>{const s=e.objectId;s<=0||n((e=>{const n=[...e],r=e.indexOf(s);return r>=0?(n.splice(r,1),qr.hide(s)):n.length<t.maximumItemSelectionCount&&(n.push(s),qr.show(s)),n}))}),[t,n]);return qt(Ut.SELECT_OBJECT,r),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.pickfurnis.caption\",[\"count\",\"limit\"],[s.length.toString(),t.maximumItemSelectionCount.toString()])}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.pickfurnis.desc\")})]})},Vj=e=>{const{wiredType:t=\"\",requiresFurni:s=Wr.STUFF_SELECTION_OPTION_NONE,save:n=null,validate:r=null,children:i=null,hasSpecialInput:a=!1}=e,[o,l]=Object(c.useState)(null),[u,d]=Object(c.useState)(null),[h,j]=Object(c.useState)(!1),{trigger:b=null,setTrigger:g=null,setIntParams:O=null,setStringParam:m=null,setFurniIds:p=null,saveWired:_=null}=Gj(),E=()=>g(null);return Object(c.useEffect)((()=>{h&&(_(),j(!1))}),[h,_]),Object(c.useEffect)((()=>{if(!b)return;const e=b.spriteId||-1,t=ee().getFloorItemData(e);return t?(l(t.name),d(t.description)):(l(\"NAME: \"+e),d(\"NAME: \"+e)),a&&(O(b.intData),m(b.stringData)),s>Wr.STUFF_SELECTION_OPTION_NONE&&p((e=>(e&&e.length&&qr.clearSelectionShaderFromFurni(e),b.selectedItems&&b.selectedItems.length?(qr.applySelectionShaderToFurni(b.selectedItems),b.selectedItems):[]))),()=>{j(!1),O([]),m(null),p((e=>(e&&e.length&&qr.clearSelectionShaderFromFurni(e),[])))}}),[b,a,s,O,m,p]),Object(Kr.jsxs)(Ec,{uniqueKey:\"nitro-wired\",className:\"nitro-wired\",theme:\"wired\",children:[Object(Kr.jsx)(jc,{headerText:nt(\"wiredfurni.title\"),onCloseClick:E}),Object(Kr.jsxs)(uc,{children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"i\",{className:`icon icon-wired-${t}`}),Object(Kr.jsx)(ei,{gfbold:!0,children:o})]}),Object(Kr.jsx)(ei,{children:u})]}),!!i&&Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),i,s>Wr.STUFF_SELECTION_OPTION_NONE&&Object(Kr.jsxs)(Kr.Fragment,{children:[Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),Object(Kr.jsx)(Wj,{})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:()=>{r&&!r()||(n&&n(),j(!0))},children:nt(\"wiredfurni.ready\")}),Object(Kr.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:E,children:nt(\"cancel\")})]})]})]})},qj=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e,{trigger:i=null,actionDelay:a=0,setActionDelay:o=null}=Gj();return Object(c.useEffect)((()=>{o(i.delayInPulses)}),[i,o]),Object(Kr.jsxs)(Vj,{wiredType:\"action\",requiresFurni:t,save:s,hasSpecialInput:n,children:[r,!!r&&Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),Object(Kr.jsxs)(vc,{children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.delay\",[\"seconds\"],[Fr(a)])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:0,max:20,value:a,onChange:e=>o(e)})]})]})},Yj=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(\"\"),{trigger:i=null,setStringParam:a=null}=Gj();return Object(c.useEffect)((()=>{const e=i.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:\"hd-180-1.ch-210-66.lg-270-82.sh-290-81\")}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(t+Yr+n),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(ec,{center:!0,children:[Object(Kr.jsx)(fc,{figure:n,direction:4}),Object(Kr.jsx)(tc,{onClick:e=>r(ee().figure),children:nt(\"wiredfurni.params.capture.figure\")})]})]})},zj=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Gj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"followMode\",id:\"followMode1\",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.start.following\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"followMode\",id:\"followMode2\",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.stop.following\")})]})]})]})},Kj=[2,5,7,8,9,10,27],Qj=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Gj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.handitem\")}),Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm\",value:n,onChange:e=>r(parseInt(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:\"------\"}),Kj.map((e=>Object(Kr.jsx)(\"option\",{value:e,children:nt(`handitem${e}`)},e)))]})]})]})},$j=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Xj=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(\"\"),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=Gj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:\"\"),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Yr+n),u([i])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.message\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode1\",checked:0===i,onChange:e=>a(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.talk\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode2\",checked:1===i,onChange:e=>a(1)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.whisper\")})]})]})]})},Jj=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(\"\"),[i,a]=Object(c.useState)(-1),{trigger:o=null,setStringParam:l=null,setIntParams:u=null}=Gj();return Object(c.useEffect)((()=>{const e=o.stringData.split(Yr);e.length>0&&s(e[0]),e.length>1&&r(e[1].length>0?e[1]:\"\"),a(o.intData.length>0?o.intData[0]:0)}),[o]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{l(t+Yr+n),u([i])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.message\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:64,value:n,onChange:e=>r(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode1\",checked:0===i,onChange:e=>a(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.talk\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode2\",checked:1===i,onChange:e=>a(1)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.shout\")})]})]})]})},Zj=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},eb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),tb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),sb=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.message\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},nb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),rb=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(!1),[o,l]=Object(c.useState)(1),[u,d]=Object(c.useState)(1),[h,j]=Object(c.useState)([]),{trigger:b=null,setIntParams:g=null,setStringParam:O=null}=Gj(),m=Object(c.useCallback)((()=>{j((e=>[...e,{isBadge:!1,itemCode:\"\",probability:null}]))}),[j]),p=Object(c.useCallback)((e=>{j((t=>{const s=Array.from(t);return s.splice(e,1),s}))}),[j]),_=Object(c.useCallback)(((e,t,s,n)=>{const r=Array.from(h),c=r[e];c&&(c.isBadge=t,c.itemCode=s,c.probability=n,j(r))}),[h,j]),E=Object(c.useCallback)((()=>{let e=[];for(const t of h){if(!t.itemCode)continue;const s=[t.isBadge?\"0\":\"1\",t.itemCode,t.probability.toString()];e.push(s.join(\",\"))}e.length>0&&(O(e.join(\";\")),g([n,i?1:0,o,u]))}),[n,i,o,u,h,g,O]);return Object(c.useEffect)((()=>{const e=[];if(b.stringData.length>0&&b.stringData.includes(\";\")){const t=b.stringData.split(\";\");for(const s of t){const t=s.split(\",\");3===t.length&&e.push({isBadge:\"0\"===t[0],itemCode:t[1],probability:Number(t[2])})}}0===e.length&&e.push({isBadge:!1,itemCode:\"\",probability:null}),r(b.intData.length>0?b.intData[0]:0),a(b.intData.length>1&&1===b.intData[1]),l(b.intData.length>2?b.intData[2]:0),d(b.intData.length>3?b.intData[3]:0),s(b.intData.length>3&&b.intData[3]>0),j(e)}),[b]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:E,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"limitEnabled\",onChange:e=>s(e.target.checked)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.prizelimit\",[\"amount\"],[t?o.toString():\"\"])})]}),!t&&Object(Kr.jsx)(ei,{center:!0,className:\"bg-muted rounded p-1\",children:\"Reward limit not set. Make sure rewards are badges or non-tradeable items.\"}),t&&Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:1e3,value:o,onChange:e=>l(e)}),Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:\"How often can a user be rewarded?\"}),Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(\"select\",{className:\"form-select form-select-sm w-100\",value:n,onChange:e=>r(Number(e.target.value)),children:[Object(Kr.jsx)(\"option\",{value:\"0\",children:\"Once\"}),Object(Kr.jsxs)(\"option\",{value:\"3\",children:[\"Once every \",u,\" minutes\"]}),Object(Kr.jsxs)(\"option\",{value:\"2\",children:[\"Once every \",u,\" hours\"]}),Object(Kr.jsxs)(\"option\",{value:\"1\",children:[\"Once every \",u,\" days\"]})]}),n>0&&Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:u,onChange:e=>d(Number(e.target.value))})]})]}),Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"uniqueRewards\",checked:i,onChange:e=>a(e.target.checked)}),Object(Kr.jsx)(ei,{children:\"Unique rewards\"})]}),Object(Kr.jsx)(ei,{center:!0,className:\"bg-muted rounded p-1\",children:\"If checked each reward will be given once to each user. This will disable the probabilities option.\"}),Object(Kr.jsx)(\"hr\",{className:\"m-0 bg-dark\"}),Object(Kr.jsxs)(ec,{justifyContent:\"between\",alignItems:\"center\",children:[Object(Kr.jsx)(ei,{gfbold:!0,children:\"Rewards\"}),Object(Kr.jsx)(tc,{variant:\"success\",onClick:m,children:Object(Kr.jsx)(ac.a,{icon:\"plus\"})})]}),Object(Kr.jsx)(vc,{gap:1,children:h&&h.map(((e,t)=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:e.isBadge,onChange:s=>_(t,s.target.checked,e.itemCode,e.probability)}),Object(Kr.jsx)(ei,{children:\"Badge?\"})]}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:e.itemCode,onChange:s=>_(t,e.isBadge,s.target.value,e.probability),placeholder:\"Item Code\"}),Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:e.probability,onChange:s=>_(t,e.isBadge,e.itemCode,Number(s.target.value)),placeholder:\"Probability\"}),t>0&&Object(Kr.jsx)(tc,{variant:\"danger\",onClick:e=>p(t),children:Object(Kr.jsx)(ac.a,{icon:\"trash\"})})]},t)))})]})},cb=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),[i,a]=Object(c.useState)(1),{trigger:o=null,setIntParams:l=null}=Gj();return Object(c.useEffect)((()=>{o.intData.length>=2?(s(o.intData[0]),r(o.intData[1]),a(o.intData[2])):(s(1),r(1),a(1))}),[o]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>l([t,n,i]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.setpoints\",[\"points\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.settimesingame\",[\"times\"],[n.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:10,value:n,onChange:e=>r(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.team\")}),[1,2,3,4].map((e=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${e}`,checked:i===e,onChange:t=>a(e)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.team.\"+e)})]},e)))]})]})},ib=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.setpoints\",[\"points\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:100,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.settimesingame\",[\"times\"],[n.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:10,value:n,onChange:e=>r(e)})]})]})},ab=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.team\")}),[1,2,3,4].map((e=>Object(Kr.jsxs)(ec,{gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(ei,{children:nt(`wiredfurni.params.team.${e}`)})]},e)))]})})},ob=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.message\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value),maxLength:100})]})})},lb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),ub=[{value:0,icon:\"ne\"},{value:2,icon:\"se\"},{value:4,icon:\"sw\"},{value:6,icon:\"nw\"}],db=[0,1,2,3,4,5,6],hb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.startdir\")}),Object(Kr.jsx)(ec,{gap:1,children:ub.map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Kr.jsx)(ei,{children:Object(Kr.jsx)(\"i\",{className:`icon icon-${e.icon}`})})]},e.value)))})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.turn\")}),db.map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"rotation\",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Kr.jsx)(ei,{children:nt(`wiredfurni.params.turn.${e}`)})]},e)))]})]})},jb=[{value:0,icon:\"ne\"},{value:2,icon:\"se\"},{value:4,icon:\"sw\"},{value:6,icon:\"nw\"}],bb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[1]),r(i.intData[0])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:()=>a([n,t]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.emptytiles\",[\"tiles\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:5,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.startdir\")}),Object(Kr.jsx)(ec,{gap:1,children:jb.map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${e.value}`,checked:n===e.value,onChange:t=>r(e.value)}),Object(Kr.jsx)(ei,{children:Object(Kr.jsx)(\"i\",{className:`icon icon-${e.icon}`})})]},e.value)))})]})]})},gb=[{value:4,icon:\"ne\"},{value:5,icon:\"se\"},{value:6,icon:\"sw\"},{value:7,icon:\"nw\"},{value:2,icon:\"mv-2\"},{value:3,icon:\"mv-3\"},{value:1,icon:\"mv-1\"}],Ob=[0,1,2,3],mb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(-1),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(-1),r(-1))}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.movefurni\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:\"movement0\",checked:0===t,onChange:e=>s(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.movefurni.0\")})]}),Object(Kr.jsxs)(ec,{gap:1,children:[gb.map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${e.value}`,checked:t===e.value,onChange:t=>s(e.value)}),Object(Kr.jsx)(\"i\",{className:`icon icon-${e.icon}`})]},e.value))),Object(Kr.jsx)(\"div\",{className:\"col\"})]})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.rotatefurni\")}),Ob.map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"rotation\",id:`rotation${e}`,checked:n===e,onChange:t=>r(e)}),Object(Kr.jsxs)(ei,{children:[[1,2].includes(e)&&Object(Kr.jsx)(\"i\",{className:`icon icon-rot-${e}`}),nt(`wiredfurni.params.rotatefurni.${e}`)]})]},e)))]})]})},pb=e=>{const[t,s]=Object(c.useState)(-1),[n,r]=Object(c.useState)(\"\"),{trigger:i=null,setIntParams:a=null,setStringParam:o=null}=Gj();return Object(c.useEffect)((()=>{s(i.intData.length>0?i.intData[0]:0),r(i.stringData)}),[i]),Object(Kr.jsxs)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a([t]),o(n)},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.length.minutes\",[\"minutes\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:10,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.message\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:n,onChange:e=>r(e.target.value),maxLength:100})]})]})},_b=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Eb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=Gj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.conditions\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"stateFlag\",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.state\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"directionFlag\",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.direction\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"positionFlag\",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.position\")})]})]})})},fb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),xb=e=>Object(Kr.jsx)(qj,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),Ib=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Kr.jsx)(Vj,{wiredType:\"condition\",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},Tb=[2,5,7,8,9,10,27],Cb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.handitem\")}),Object(Kr.jsx)(\"select\",{className:\"form-select form-select-sm\",value:t,onChange:e=>s(parseInt(e.target.value)),children:Tb.map((e=>Object(Kr.jsx)(\"option\",{value:e,children:nt(`handitem${e}`)},e)))})]})})},Nb=e=>Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Sb=e=>Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),vb=[1,2,3,4],Rb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.team\")}),vb.map((e=>Object(Kr.jsxs)(ec,{gap:1,alignItems:\"center\",children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(ei,{children:nt(`wiredfurni.params.team.${e}`)})]},e)))]})})},Ab=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.badgecode\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value)})]})})},yb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.effectid\")}),Object(Kr.jsx)(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(parseInt(e.target.value))})]})})},wb=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(\"\"),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{if(i.intData.length>=2){let e=new Date,t=new Date;i.intData[0]>0&&(e=new Date(1e3*i.intData[0])),i.intData[1]>0&&(t=new Date(1e3*i.intData[1])),s(Gr(e)),r(Gr(t))}}),[i]),Object(Kr.jsxs)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{let e=0,s=0;const r=new Date(t),c=new Date(n);r&&c&&(e=r.getTime()/1e3,s=c.getTime()/1e3),a([e,s])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.startdate\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.enddate\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:n,onChange:e=>r(e.target.value)})]})]})},kb=e=>Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),Db=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.requireall\")}),[0,1].map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"requireAll\",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.requireall.\"+e)})]},e)))]})})},Ub=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.not_requireall\")}),[0,1].map((e=>Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"requireAll\",id:`requireAll${e}`,checked:t===e,onChange:t=>s(e)}),Object(Kr.jsx)(ei,{children:nt(`wiredfurni.params.not_requireall.${e}`)})]},e)))]})})},Pb=e=>Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Mb=e=>{const[t,s]=Object(c.useState)(0),[n,r]=Object(c.useState)(0),[i,a]=Object(c.useState)(0),{trigger:o=null,setIntParams:l=null}=Gj();return Object(c.useEffect)((()=>{s(o.getBoolean(0)?1:0),r(o.getBoolean(1)?1:0),a(o.getBoolean(2)?1:0)}),[o]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:()=>l([t,n,i]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.conditions\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"stateFlag\",checked:!!t,onChange:e=>s(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.state\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"directionFlag\",checked:!!n,onChange:e=>r(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.direction\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"positionFlag\",checked:!!i,onChange:e=>a(e.target.checked?1:0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.condition.position\")})]})]})})},Lb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.allowbefore\",[\"seconds\"],[Fr(t)])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Fb=e=>{const[t,s]=Object(c.useState)(-1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.allowafter\",[\"seconds\"],[Fr(t)])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},Hb=e=>{const[t,s]=Object(c.useState)(1),[n,r]=Object(c.useState)(1),{trigger:i=null,setIntParams:a=null}=Gj();return Object(c.useEffect)((()=>{i.intData.length>=2?(s(i.intData[0]),r(i.intData[1])):(s(1),r(1))}),[i]),Object(Kr.jsxs)(Ib,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a([t,n]),children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.usercountmin\",[\"value\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:50,value:t,onChange:e=>s(e)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.usercountmax\",[\"value\"],[n.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:50,value:n,onChange:e=>r(e)})]})]})},Bb=e=>{const{requiresFurni:t=Wr.STUFF_SELECTION_OPTION_NONE,save:s=null,hasSpecialInput:n=!1,children:r=null}=e;return Object(Kr.jsx)(Vj,{wiredType:\"trigger\",requiresFurni:t,hasSpecialInput:n,save:()=>s&&s(),children:r})},Gb=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(0),{trigger:i=null,setStringParam:a=null}=Gj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.stringData?1:0)}),[i]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>a(1===n?t:\"\"),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.picktriggerer\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"avatarMode\",id:\"avatarMode0\",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.anyavatar\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"avatarMode\",id:\"avatarMode1\",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.certainavatar\")})]}),1===n&&Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value)})]})})},Wb=e=>{const[t,s]=Object(c.useState)(\"\"),[n,r]=Object(c.useState)(-1),{trigger:i=null,setStringParam:a=null,setIntParams:o=null}=Gj();return Object(c.useEffect)((()=>{s(i.stringData),r(i.intData.length>0?i.intData[0]:0)}),[i]),Object(Kr.jsxs)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>{a(t),o([n])},children:[Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.whatissaid\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:t,onChange:e=>s(e.target.value)})]}),Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.picktriggerer\")}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"triggererAvatar\",id:\"triggererAvatar0\",checked:0===n,onChange:e=>r(0)}),Object(Kr.jsx)(ei,{children:nt(\"wiredfurni.params.anyavatar\")})]}),Object(Kr.jsxs)(ec,{alignItems:\"center\",gap:1,children:[Object(Kr.jsx)(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"triggererAvatar\",id:\"triggererAvatar1\",checked:1===n,onChange:e=>r(1)}),Object(Kr.jsx)(ei,{children:ee().userName})]})]})]})},Vb=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),qb=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),Yb=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},zb=e=>{const[t,s]=Object(c.useState)(\"\"),{trigger:n=null,setStringParam:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.stringData)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r(t),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.bot.name\")}),Object(Kr.jsx)(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:t,onChange:e=>s(e.target.value)})]})})},Kb=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Qb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.settime\",[\"seconds\"],[Fr(t)])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:1200,value:t,onChange:e=>s(e)})]})})},$b=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.setlongtime\",[\"time\"],[a.Kb.format(5*t).toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:120,value:t,onChange:e=>s(e)})]})})},Xb=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.settime\",[\"seconds\"],[Fr(t)])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:60,value:t,onChange:e=>s(e)})]})})},Jb=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),Zb=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),eg=e=>{const[t,s]=Object(c.useState)(1),{trigger:n=null,setIntParams:r=null}=Gj();return Object(c.useEffect)((()=>{s(n.intData.length>0?n.intData[0]:0)}),[n]),Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:()=>r([t]),children:Object(Kr.jsxs)(vc,{gap:1,children:[Object(Kr.jsx)(ei,{gfbold:!0,children:nt(\"wiredfurni.params.setscore\",[\"points\"],[t.toString()])}),Object(Kr.jsx)(Bi.a,{className:\"wired-slider\",min:1,max:1e3,value:t,onChange:e=>s(e)})]})})},tg=e=>Object(Kr.jsx)(Bb,{requiresFurni:Wr.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),sg=e=>e instanceof a.Zi?(e=>{switch(e){case Hr.BOT_CHANGE_FIGURE:return Object(Kr.jsx)(Yj,{});case Hr.BOT_FOLLOW_AVATAR:return Object(Kr.jsx)(zj,{});case Hr.BOT_GIVE_HAND_ITEM:return Object(Kr.jsx)(Qj,{});case Hr.BOT_MOVE:return Object(Kr.jsx)($j,{});case Hr.BOT_TALK:return Object(Kr.jsx)(Jj,{});case Hr.BOT_TALK_DIRECT_TO_AVTR:return Object(Kr.jsx)(Xj,{});case Hr.BOT_TELEPORT:return Object(Kr.jsx)(Zj,{});case Hr.CALL_ANOTHER_STACK:return Object(Kr.jsx)(eb,{});case Hr.CHASE:return Object(Kr.jsx)(tb,{});case Hr.CHAT:return Object(Kr.jsx)(sb,{});case Hr.FLEE:return Object(Kr.jsx)(nb,{});case Hr.GIVE_REWARD:return Object(Kr.jsx)(rb,{});case Hr.GIVE_SCORE:return Object(Kr.jsx)(ib,{});case Hr.GIVE_SCORE_TO_PREDEFINED_TEAM:return Object(Kr.jsx)(cb,{});case Hr.JOIN_TEAM:return Object(Kr.jsx)(ab,{});case Hr.KICK_FROM_ROOM:return Object(Kr.jsx)(ob,{});case Hr.LEAVE_TEAM:return Object(Kr.jsx)(lb,{});case Hr.MOVE_FURNI:return Object(Kr.jsx)(mb,{});case Hr.MOVE_AND_ROTATE_FURNI:return Object(Kr.jsx)(hb,{});case Hr.MOVE_FURNI_TO:return Object(Kr.jsx)(bb,{});case Hr.MUTE_USER:return Object(Kr.jsx)(pb,{});case Hr.RESET:return Object(Kr.jsx)(_b,{});case Hr.SET_FURNI_STATE:return Object(Kr.jsx)(Eb,{});case Hr.TELEPORT:return Object(Kr.jsx)(fb,{});case Hr.TOGGLE_FURNI_STATE:return Object(Kr.jsx)(xb,{})}return null})(e.code):e instanceof a.oi?(e=>{switch(e){case zr.AVATAR_ENTERS_ROOM:return Object(Kr.jsx)(Gb,{});case zr.AVATAR_SAYS_SOMETHING:return Object(Kr.jsx)(Wb,{});case zr.AVATAR_WALKS_OFF_FURNI:return Object(Kr.jsx)(Vb,{});case zr.AVATAR_WALKS_ON_FURNI:return Object(Kr.jsx)(qb,{});case zr.BOT_REACHED_AVATAR:return Object(Kr.jsx)(Yb,{});case zr.BOT_REACHED_STUFF:return Object(Kr.jsx)(zb,{});case zr.COLLISION:return Object(Kr.jsx)(Kb,{});case zr.EXECUTE_ONCE:return Object(Kr.jsx)(Qb,{});case zr.EXECUTE_PERIODICALLY:return Object(Kr.jsx)(Xb,{});case zr.EXECUTE_PERIODICALLY_LONG:return Object(Kr.jsx)($b,{});case zr.GAME_ENDS:return Object(Kr.jsx)(Jb,{});case zr.GAME_STARTS:return Object(Kr.jsx)(Zb,{});case zr.SCORE_ACHIEVED:return Object(Kr.jsx)(eg,{});case zr.TOGGLE_FURNI:return Object(Kr.jsx)(tg,{})}return null})(e.code):e instanceof a.lb?(e=>{switch(e){case Br.ACTOR_HAS_HANDITEM:return Object(Kr.jsx)(Cb,{});case Br.ACTOR_IS_GROUP_MEMBER:case Br.NOT_ACTOR_IN_GROUP:return Object(Kr.jsx)(Nb,{});case Br.ACTOR_IS_ON_FURNI:case Br.NOT_ACTOR_ON_FURNI:return Object(Kr.jsx)(Sb,{});case Br.ACTOR_IS_IN_TEAM:case Br.NOT_ACTOR_IN_TEAM:return Object(Kr.jsx)(Rb,{});case Br.ACTOR_IS_WEARING_BADGE:case Br.NOT_ACTOR_WEARS_BADGE:return Object(Kr.jsx)(Ab,{});case Br.ACTOR_IS_WEARING_EFFECT:case Br.NOT_ACTOR_WEARING_EFFECT:return Object(Kr.jsx)(yb,{});case Br.DATE_RANGE_ACTIVE:return Object(Kr.jsx)(wb,{});case Br.FURNIS_HAVE_AVATARS:case Br.FURNI_NOT_HAVE_HABBO:return Object(Kr.jsx)(kb,{});case Br.HAS_STACKED_FURNIS:return Object(Kr.jsx)(Db,{});case Br.NOT_HAS_STACKED_FURNIS:return Object(Kr.jsx)(Ub,{});case Br.STUFF_TYPE_MATCHES:case Br.NOT_FURNI_IS_OF_TYPE:return Object(Kr.jsx)(Pb,{});case Br.STATES_MATCH:case Br.NOT_STATES_MATCH:return Object(Kr.jsx)(Mb,{});case Br.TIME_ELAPSED_LESS:return Object(Kr.jsx)(Lb,{});case Br.TIME_ELAPSED_MORE:return Object(Kr.jsx)(Fb,{});case Br.USER_COUNT_IN:case Br.NOT_USER_COUNT_IN:return Object(Kr.jsx)(Hb,{})}return null})(e.code):null,ng=e=>{const{setTrigger:t=null}=Gj(),s=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),n=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),r=Object(c.useCallback)((e=>{const s=e.getParser();t(s.definition)}),[t]),i=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),o=Object(c.useCallback)((e=>{const t=e.getParser();console.log(t)}),[]),l=Object(c.useCallback)((e=>{t(null)}),[t]),u=Object(c.useCallback)((e=>{const t=e.getParser();Pr.simpleAlert(t.info,yr.DEFAULT,null,null,nt(\"error.title\")),console.log(t)}),[]);return it(a.aj,s),it(a.bj,n),it(a.cj,r),it(a.dj,i),it(a.ej,o),it(a.fj,l),it(a.gj,u),null},rg=e=>{const[t,s]=Object(c.useState)(null),[n,r]=Object(c.useState)([]),[i,o]=Object(c.useState)(\"\"),[l,u]=Object(c.useState)([]),[d,h]=Object(c.useState)(0);return Object(Kr.jsxs)(Bj,{value:{trigger:t,setTrigger:s,intParams:n,setIntParams:r,stringParam:i,setStringParam:o,furniIds:l,setFurniIds:u,actionDelay:d,setActionDelay:h,saveWired:()=>{const e=e=>{e&&(e instanceof a.Zi?$n(new a.si(e.id,n,i,l,d,e.stuffTypeSelectionCode)):e instanceof a.oi?$n(new a.vi(e.id,n,i,l,e.stuffTypeSelectionCode)):e instanceof a.lb&&$n(new a.ti(e.id,n,i,l,e.stuffTypeSelectionCode)))};!function(e){const t=L().getRoomObject(ie().roomId,e,a.Ig.FLOOR);return!(!t||!t.model)&&ee().userId===t.model.getValue(a.Og.FURNITURE_OWNER_ID)}(t.id)?Pr.confirm(nt(\"wiredfurni.nonowner.change.confirm.body\"),(()=>{e(t)}),null,null,null,nt(\"wiredfurni.nonowner.change.confirm.title\")):e(t)}},children:[Object(Kr.jsx)(ng,{}),null!==t&&sg(t)]})},cg=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!0),i=Object(c.useCallback)((e=>{switch(e.type){case a.Yg.CREATED:return void r(!1);case a.Yg.ENDED:return void r(e.openLandingView)}}),[]);Gt(a.Yg.CREATED,i),Gt(a.Yg.ENDED,i);const o=Object(c.useCallback)((e=>{const t=e.split(\"/\");if(!(t.length<2))if(\"open\"!==t[1]);else if(t.length>2)if(\"credits\"===t[2]);else{const e=t[2];a.Jd.openHabblet(e)}}),[]);return Object(c.useEffect)((()=>{s(!0),w().connection.onReady()}),[]),Object(c.useEffect)((()=>{const e={linkReceived:o,eventUrlPrefix:\"habblet/\"};return N(e),()=>{M(e)}}),[o]),Object(Kr.jsxs)(Qr,{fit:!0,children:[Object(Kr.jsx)(Bc,{type:Fc.FADE_IN,inProp:n,timeout:300,children:Object(Kr.jsx)(du,{})}),Object(Kr.jsx)(wj,{isInRoom:!n}),Object(Kr.jsx)(sd,{}),Object(Kr.jsx)(Aj,{}),Object(Kr.jsx)(mo,{}),Object(Kr.jsx)(rg,{}),Object(Kr.jsx)(Ui,{}),Object(Kr.jsx)(ui,{}),Object(Kr.jsx)(Nd,{}),Object(Kr.jsx)(Ru,{}),Object(Kr.jsx)(co,{}),Object(Kr.jsx)(Zo,{}),Object(Kr.jsx)(qd,{}),Object(Kr.jsx)(Fj,{}),Object(Kr.jsx)(Lj,{}),Object(Kr.jsx)(Il,{}),Object(Kr.jsx)(Ki,{}),Object(Kr.jsx)(nu,{}),Object(Kr.jsx)(Mo,{}),Object(Kr.jsx)(vd,{}),Object(Kr.jsx)(Dl,{}),Object(Kr.jsx)(Ml,{}),Object(Kr.jsx)(Xi,{})]})};var ig=()=>{const e=[];self.onmessage=t=>{if(!t)return;const s=t.data;switch(s.type){case\"CREATE_INTERVAL\":{const t=s.timerId,n=s.time,r=s.response,c=setInterval((()=>postMessage(r)),n);return void e.push({id:t,interval:c})}case\"REMOVE_INTERVAL\":{const t=s.timerId,n=0;for(;n<e.length;){const s=e[n];if(s.id===t)return clearInterval(s.interval),void e.splice(n,1)}}}}};class ag extends Worker{constructor(e){const t=e.toString(),s=new Blob([`(${t})()`]);super(URL.createObjectURL(s))}}a.ef.UI_VERSION=\"2.0.0\";const og=e=>{const[t,s]=Object(c.useState)(!1),[n,r]=Object(c.useState)(!1),[i,o]=Object(c.useState)(\"Getting Ready\"),[l,u]=Object(c.useState)(0),[d,h]=Object(c.useState)(!0);if(!C()){if(!NitroConfig)throw new Error(\"NitroConfig is not defined!\");a.Oe.bootstrap();const e=new ag(ig);a.Oe.instance.setWorker(e)}const j=Object(c.useCallback)((e=>{switch(e.type){case a.mb.LOADED:return C().localization.init(),u((e=>e+20)),void console.log(\"\\n%c                                                          \\n  Nitro V2 - FLASH UI EDIT!                               \\n  This UI-edit is created by robbis                       \\n  Do you want this UI for your hotel?                     \\n  Join our Discord                                        \\n  https://discord.gg/j3bqtZKAF3                           \\n                                                          \\n\",\"color: #FFFFFF; background: #eab9d0; padding:0px 0\");case a.mb.FAILED:return r(!0),void o(\"Configuration Failed\");case a.Oe.WEBGL_UNAVAILABLE:return r(!0),void o(\"WebGL Required\");case a.Oe.WEBGL_CONTEXT_LOST:return r(!0),o(\"WebGL Context Lost - Reloading\"),void setTimeout((()=>window.location.reload()),1500);case a.Re.CONNECTION_HANDSHAKING:return void u((e=>e+20));case a.Re.CONNECTION_HANDSHAKE_FAILED:return r(!0),void o(\"Handshake Failed\");case a.Re.CONNECTION_AUTHENTICATED:return u((e=>e+20)),C().init(),void(a.Wd.available&&a.Wd.call(\"legacyTrack\",\"authentication\",\"authok\",[]));case a.Re.CONNECTION_ERROR:return r(!0),void o(\"Connection Error\");case a.Re.CONNECTION_CLOSED:return o(\"Connection Error\"),void a.Jd.send(-1,\"client.init.handshake.fail\");case a.og.ENGINE_INITIALIZED:return u((e=>e+20)),void setTimeout((()=>s(!0)),300);case a.Ve.LOADED:{const e=k(\"preload.assets.urls\"),t=[];if(e&&e.length)for(const s of e)t.push(C().core.configuration.interpolate(s));return void C().core.asset.downloadAssets(t,(e=>{e?(w().init(),u((e=>e+20))):(r(!0),o(\"Assets Failed\"))}))}}}),[]);return Ht(a.Oe.WEBGL_UNAVAILABLE,j),Ht(a.Oe.WEBGL_CONTEXT_LOST,j),Ht(a.Re.CONNECTION_HANDSHAKING,j),Ht(a.Re.CONNECTION_HANDSHAKE_FAILED,j),Ht(a.Re.CONNECTION_AUTHENTICATED,j),Ht(a.Re.CONNECTION_ERROR,j),Ht(a.Re.CONNECTION_CLOSED,j),Bt(a.og.ENGINE_INITIALIZED,j),((e,t)=>{Pt(e,C().localization.events,t)})(a.Ve.LOADED,j),Mt(a.mb.LOADED,j),Mt(a.mb.FAILED,j),Object(c.useEffect)((()=>{a.Yi.isWebGLAvailable()?C().core.configuration.init():Vt(new a.Te(a.Oe.WEBGL_UNAVAILABLE));const e=e=>h(!(window.devicePixelRatio%1));return window.addEventListener(\"resize\",e),e(),()=>{window.removeEventListener(\"resize\",e)}}),[]),Object(Kr.jsxs)(Qr,{fit:!0,overflow:\"hidden\",className:d&&\"image-rendering-pixelated\",children:[(!t||n)&&Object(Kr.jsx)(si,{isError:n,message:i,percent:l}),Object(Kr.jsx)(Bc,{type:Fc.FADE_IN,inProp:t,children:Object(Kr.jsx)(cg,{})}),Object(Kr.jsx)(Qr,{id:\"draggable-windows-container\"})]})};s(136);n.b.add(r.a),Object(i.createRoot)(document.getElementById(\"root\")).render(Object(Kr.jsx)(og,{}))}},[[137,2,1,3]]]);","name":"static/js/main.6016a146.chunk.js","input":"(this[\"webpackJsonpnitro-react\"] = this[\"webpackJsonpnitro-react\"] || []).push([[0],{\n\n/***/ 136:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 137:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@fortawesome/fontawesome-svg-core/index.es.js\nvar index_es = __webpack_require__(40);\n\n// EXTERNAL MODULE: ./node_modules/@fortawesome/free-solid-svg-icons/index.es.js\nvar free_solid_svg_icons_index_es = __webpack_require__(89);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(75);\n\n// EXTERNAL MODULE: ./node_modules/@nitrots/nitro-renderer/index.ts\nvar nitro_renderer = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementCategoryMaxProgress.ts\nconst GetAchievementCategoryMaxProgress=category=>{if(!category)return 0;let progress=0;for(const achievement of category.achievements){progress+=achievement.levelCount;}return progress;};\n// CONCATENATED MODULE: ./src/api/achievements/AchievementCategory.ts\nclass AchievementCategory_AchievementCategory{constructor(code){this._code=void 0;this._achievements=void 0;this._code=code;this._achievements=[];}getProgress(){return GetAchievementCategoryProgress(this);}getMaxProgress(){return GetAchievementCategoryMaxProgress(this);}get code(){return this._code;}get achievements(){return this._achievements;}set achievements(achievements){this._achievements=achievements;}}\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementBadgeCode.ts\nconst GetAchievementBadgeCode=achievement=>{if(!achievement)return null;let badgeId=achievement.badgeId;if(!achievement.finalLevel)badgeId=GetLocalization().getPreviousLevelBadgeId(badgeId);return badgeId;};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementCategoryImageUrl.ts\nconst GetAchievementCategoryImageUrl=function(category){let progress=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let icon=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const imageUrl=GetConfiguration('achievements.images.url');let imageName=icon?'achicon_':'achcategory_';imageName+=category.code;if(progress!==null)imageName+=`_${progress>0?'active':'inactive'}`;return imageUrl.replace('%image%',imageName);};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementCategoryProgress.ts\nconst GetAchievementCategoryProgress=category=>{if(!category)return 0;let progress=0;for(const achievement of category.achievements)progress+=achievement.finalLevel?achievement.level:achievement.level-1;return progress;};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementCategoryTotalUnseen.ts\nconst GetAchievementCategoryTotalUnseen=category=>{if(!category)return 0;let unseen=0;for(const achievement of category.achievements)achievement.unseen>0&&unseen++;return unseen;};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementHasStarted.ts\nconst GetAchievementHasStarted=achievement=>{if(!achievement)return false;if(achievement.finalLevel||achievement.level-1>0)return true;return false;};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementIsIgnored.ts\nconst GetAchievementIsIgnored=achievement=>{if(!achievement)return false;const ignored=GetConfiguration('achievements.unseen.ignored');const value=achievement.badgeId.replace(/[0-9]/g,'');const index=ignored.indexOf(value);if(index>=0)return true;return false;};\n// CONCATENATED MODULE: ./src/api/achievements/GetAchievementLevel.ts\nconst GetAchievementLevel=achievement=>{if(!achievement)return 0;if(achievement.finalLevel)return achievement.level;return achievement.level-1;};\n// CONCATENATED MODULE: ./src/api/achievements/IAchievementCategory.ts\n\n// CONCATENATED MODULE: ./src/api/achievements/index.ts\n\n// CONCATENATED MODULE: ./src/api/campaign/CalendarItem.ts\nclass CalendarItem{constructor(productName,customImage,furnitureClassName){this._productName=void 0;this._customImage=void 0;this._furnitureClassName=void 0;this._productName=productName;this._customImage=customImage;this._furnitureClassName=furnitureClassName;}get productName(){return this._productName;}get customImage(){return this._customImage;}get furnitureClassName(){return this._furnitureClassName;}}\n// CONCATENATED MODULE: ./src/api/campaign/CalendarItemState.ts\nclass CalendarItemState{}CalendarItemState.STATE_UNLOCKED=1;CalendarItemState.STATE_LOCKED_AVAILABLE=2;CalendarItemState.STATE_LOCKED_EXPIRED=3;CalendarItemState.STATE_LOCKED_FUTURE=4;\n// CONCATENATED MODULE: ./src/api/campaign/ICalendarItem.ts\n\n// CONCATENATED MODULE: ./src/api/campaign/index.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/BuilderFurniPlaceableStatus.ts\nclass BuilderFurniPlaceableStatus{}BuilderFurniPlaceableStatus.OKAY=0;BuilderFurniPlaceableStatus.MISSING_OFFER=1;BuilderFurniPlaceableStatus.FURNI_LIMIT_REACHED=2;BuilderFurniPlaceableStatus.NOT_IN_ROOM=3;BuilderFurniPlaceableStatus.NOT_ROOM_OWNER=4;BuilderFurniPlaceableStatus.GUILD_ROOM=5;BuilderFurniPlaceableStatus.VISITORS_IN_ROOM=6;\n// CONCATENATED MODULE: ./src/api/catalog/CatalogNode.ts\nclass CatalogNode{constructor(node,depth,parent){this._depth=0;this._localization='';this._pageId=-1;this._pageName='';this._iconId=0;this._children=void 0;this._offerIds=void 0;this._parent=void 0;this._isVisible=void 0;this._isActive=void 0;this._isOpen=void 0;this._depth=depth;this._parent=parent;this._localization=node.localization;this._pageId=node.pageId;this._pageName=node.pageName;this._iconId=node.icon;this._children=[];this._offerIds=node.offerIds;this._isVisible=node.visible;this._isActive=false;this._isOpen=false;}activate(){this._isActive=true;}deactivate(){this._isActive=false;}open(){this._isOpen=true;}close(){this._isOpen=false;}addChild(child){if(!child)return;this._children.push(child);}get depth(){return this._depth;}get isBranch(){return this._children.length>0;}get isLeaf(){return this._children.length===0;}get localization(){return this._localization;}get pageId(){return this._pageId;}get pageName(){return this._pageName;}get iconId(){return this._iconId;}get children(){return this._children;}get offerIds(){return this._offerIds;}get parent(){return this._parent;}get isVisible(){return this._isVisible;}get isActive(){return this._isActive;}get isOpen(){return this._isOpen;}}\n// CONCATENATED MODULE: ./src/api/catalog/CatalogPage.ts\nclass CatalogPage{constructor(pageId,layoutCode,localization,offers,acceptSeasonCurrencyAsCredits){let mode=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;this._pageId=void 0;this._layoutCode=void 0;this._localization=void 0;this._offers=void 0;this._acceptSeasonCurrencyAsCredits=void 0;this._mode=void 0;this._pageId=pageId;this._layoutCode=layoutCode;this._localization=localization;this._offers=offers;this._acceptSeasonCurrencyAsCredits=acceptSeasonCurrencyAsCredits;for(const offer of offers)offer.page=this;if(mode===-1)this._mode=CatalogPage.MODE_NORMAL;else this._mode=mode;}get pageId(){return this._pageId;}get layoutCode(){return this._layoutCode;}get localization(){return this._localization;}get offers(){return this._offers;}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits;}get mode(){return this._mode;}}CatalogPage.MODE_NORMAL=0;\n// CONCATENATED MODULE: ./src/api/catalog/CatalogPageName.ts\nclass CatalogPageName{}CatalogPageName.DUCKET_INFO='ducket_info';CatalogPageName.CREDITS='credits';CatalogPageName.AVATAR_EFFECTS='avatar_effects';CatalogPageName.HC_MEMBERSHIP='hc_membership';CatalogPageName.CLUB_GIFTS='club_gifts';CatalogPageName.LIMITED_SOLD='limited_sold';CatalogPageName.PET_ACCESSORIES='pet_accessories';CatalogPageName.TRAX_SONGS='trax_songs';CatalogPageName.NEW_ADDITIONS='new_additions';CatalogPageName.QUEST_SHELL='quest_shell';CatalogPageName.QUEST_SNOWFLAKES='quest_snowflakes';CatalogPageName.VAL_QUESTS='val_quests';CatalogPageName.GUILD_CUSTOM_FURNI='guild_custom_furni';CatalogPageName.GIFT_SHOP='gift_shop';CatalogPageName.HORSE_STYLES='horse_styles';CatalogPageName.HORSE_SHOE='horse_shoe';CatalogPageName.SET_EASTER='set_easter';CatalogPageName.ECOTRON_TRANSFORM='ecotron_transform';CatalogPageName.LOYALTY_INFO='loyalty_info';CatalogPageName.ROOM_BUNDLES='room_bundles';CatalogPageName.ROOM_BUNDLES_MOBILE='room_bundles_mobile';CatalogPageName.HABBO_CLUB_DESKTOP='habbo_club_desktop';CatalogPageName.MOBILE_SUBSCRIPTIONS='mobile_subscriptions';\n// CONCATENATED MODULE: ./src/api/catalog/CatalogPetPalette.ts\nclass CatalogPetPalette{constructor(breed,palettes){this.breed=breed;this.palettes=palettes;}}\n// CONCATENATED MODULE: ./src/api/catalog/CatalogPurchaseState.ts\nclass CatalogPurchaseState{}CatalogPurchaseState.NONE=0;CatalogPurchaseState.CONFIRM=1;CatalogPurchaseState.PURCHASE=2;CatalogPurchaseState.NO_CREDITS=3;CatalogPurchaseState.NO_POINTS=4;CatalogPurchaseState.SOLD_OUT=5;CatalogPurchaseState.FAILED=6;\n// CONCATENATED MODULE: ./src/api/catalog/CatalogType.ts\nclass CatalogType{}CatalogType.NORMAL='NORMAL';CatalogType.BUILDER='BUILDERS_CLUB';\n// CONCATENATED MODULE: ./src/api/nitro/GetNitroInstance.ts\nfunction GetNitroInstance(){return nitro_renderer[\"Oe\" /* Nitro */].instance;}\n// CONCATENATED MODULE: ./src/api/nitro/AddLinkEventTracker.ts\nfunction AddEventLinkTracker(tracker){GetNitroInstance().addLinkEventTracker(tracker);}\n// CONCATENATED MODULE: ./src/api/nitro/AddWorkerEventTracker.ts\nconst AddWorkerEventTracker=tracker=>{GetNitroInstance().addWorkerEventTracker(tracker);};\n// CONCATENATED MODULE: ./src/api/nitro/avatar/GetAvatarRenderManager.ts\nfunction GetAvatarRenderManager(){return GetNitroInstance().avatar;}\n// CONCATENATED MODULE: ./src/api/nitro/avatar/GetAvatarPalette.ts\nfunction GetAvatarPalette(paletteId){return GetAvatarRenderManager().structureData.getPalette(paletteId);}\n// CONCATENATED MODULE: ./src/api/nitro/avatar/GetAvatarSetType.ts\nfunction GetAvatarSetType(setType){return GetAvatarRenderManager().structureData.getSetType(setType);}\n// CONCATENATED MODULE: ./src/api/nitro/avatar/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/camera/GetRoomCameraWidgetManager.ts\nfunction GetRoomCameraWidgetManager(){return GetNitroInstance().cameraManager;}\n// CONCATENATED MODULE: ./src/api/nitro/camera/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/CreateLinkEvent.ts\nfunction CreateLinkEvent(link){link=link.startsWith('event:')?link.substring(6):link;GetNitroInstance().createLinkEvent(link);}\n// CONCATENATED MODULE: ./src/api/nitro/GetCommunication.ts\nfunction GetCommunication(){return GetNitroInstance().communication;}\n// CONCATENATED MODULE: ./src/api/nitro/GetConfiguration.ts\nfunction GetConfiguration(key){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return GetNitroInstance().getConfiguration(key,value);}\n// CONCATENATED MODULE: ./src/api/nitro/GetConnection.ts\nfunction GetConnection(){return GetCommunication().connection;}\n// CONCATENATED MODULE: ./src/api/nitro/GetLocalization.ts\nfunction GetLocalization(){return GetNitroInstance().localization;}\n// CONCATENATED MODULE: ./src/api/nitro/GetTicker.ts\nfunction GetTicker(){return GetNitroInstance().ticker;}\n// CONCATENATED MODULE: ./src/api/nitro/RemoveLinkEventTracker.ts\nfunction RemoveLinkEventTracker(tracker){GetNitroInstance().removeLinkEventTracker(tracker);}\n// CONCATENATED MODULE: ./src/api/nitro/RemoveWorkerEventTracker.ts\nconst RemoveWorkerEventTracker=tracker=>{GetNitroInstance().removeWorkerEventTracker(tracker);};\n// CONCATENATED MODULE: ./src/api/nitro/room/GetRoomEngine.ts\nfunction GetRoomEngine(){return GetNitroInstance().roomEngine;}\n// CONCATENATED MODULE: ./src/api/nitro/room/DispatchMouseEvent.ts\nlet didMouseMove=false;let lastClick=0;let clickCount=0;const DispatchMouseEvent=function(event){let canvasId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;const x=event.clientX;const y=event.clientY;let eventType=event.type;if(eventType===nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK){if(lastClick){clickCount=1;if(lastClick>=Date.now()-300)clickCount++;}lastClick=Date.now();if(clickCount===2){if(!didMouseMove)eventType=nitro_renderer[\"Ce\" /* MouseEventType */].DOUBLE_CLICK;clickCount=0;lastClick=null;}}switch(eventType){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK:break;case nitro_renderer[\"Ce\" /* MouseEventType */].DOUBLE_CLICK:break;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_MOVE:didMouseMove=true;break;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN:didMouseMove=false;break;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP:break;case nitro_renderer[\"Ce\" /* MouseEventType */].RIGHT_CLICK:break;default:return;}GetRoomEngine().dispatchMouseEvent(canvasId,x,y,eventType,event.altKey,event.ctrlKey||event.metaKey,event.shiftKey,false);};\n// CONCATENATED MODULE: ./src/api/nitro/room/DispatchTouchEvent.ts\nlet DispatchTouchEvent_didMouseMove=false;let DispatchTouchEvent_lastClick=0;let DispatchTouchEvent_clickCount=0;let touchTimer=null;const DispatchTouchEvent=function(event){let canvasId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let longTouch=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let altKey=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let ctrlKey=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let shiftKey=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;let eventType=event.type;if(longTouch)eventType=nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_LONG;if(eventType===nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_END&&!DispatchTouchEvent_didMouseMove){eventType=nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK;if(DispatchTouchEvent_lastClick){DispatchTouchEvent_clickCount=1;if(DispatchTouchEvent_lastClick>=Date.now()-300)DispatchTouchEvent_clickCount++;}DispatchTouchEvent_lastClick=Date.now();if(DispatchTouchEvent_clickCount===2){eventType=nitro_renderer[\"Ce\" /* MouseEventType */].DOUBLE_CLICK;DispatchTouchEvent_clickCount=0;DispatchTouchEvent_lastClick=null;}}if(touchTimer)clearTimeout(touchTimer);let x=0;let y=0;if(event.touches[0]){x=event.touches[0].clientX;y=event.touches[0].clientY;}else if(event.changedTouches[0]){x=event.changedTouches[0].clientX;y=event.changedTouches[0].clientY;}switch(eventType){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK:break;case nitro_renderer[\"Ce\" /* MouseEventType */].DOUBLE_CLICK:break;case nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_START:touchTimer=setTimeout(()=>{if(DispatchTouchEvent_didMouseMove)return;DispatchTouchEvent(event,canvasId,true);},300);eventType=nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN;DispatchTouchEvent_didMouseMove=false;break;case nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_MOVE:eventType=nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_MOVE;DispatchTouchEvent_didMouseMove=true;break;case nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_END:eventType=nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP;break;case nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_LONG:eventType=nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN_LONG;break;default:return;}GetRoomEngine().dispatchMouseEvent(canvasId,x,y,eventType,altKey,ctrlKey,shiftKey,false);};\n// CONCATENATED MODULE: ./src/api/nitro/session/IsOwnerOfFurniture.ts\nfunction IsOwnerOfFurniture(roomObject){if(!roomObject||!roomObject.model)return false;const userId=GetSessionDataManager().userId;const objectOwnerId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_ID);return userId===objectOwnerId;}\n// CONCATENATED MODULE: ./src/api/nitro/session/CanManipulateFurniture.ts\nfunction CanManipulateFurniture(roomSession,objectId,category){if(!roomSession)return false;return roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST||GetSessionDataManager().isModerator||IsOwnerOfFurniture(GetRoomEngine().getRoomObject(roomSession.roomId,objectId,category));}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetRoomSessionManager.ts\nfunction GetRoomSessionManager(){return GetNitroInstance().roomSessionManager;}\n// CONCATENATED MODULE: ./src/api/nitro/session/CreateRoomSession.ts\nfunction CreateRoomSession(roomId){let password=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;GetRoomSessionManager().createSession(roomId,password);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetCanStandUp.ts\nfunction GetCanStandUp(){const roomObject=GetOwnRoomObject();if(!roomObject)return nitro_renderer[\"k\" /* AvatarAction */].POSTURE_STAND;const model=roomObject.model;return model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CAN_STAND_UP);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetCanUseExpression.ts\nfunction GetCanUseExpression(){const roomObject=GetOwnRoomObject();if(!roomObject)return false;const model=roomObject.model;const effectId=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_EFFECT);return!(effectId===29||effectId===30||effectId===185);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetSessionDataManager.ts\nfunction GetSessionDataManager(){return GetNitroInstance().sessionDataManager;}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetClubMemberLevel.ts\nfunction GetClubMemberLevel(){if(GetConfiguration('hc.disabled',false))return nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP;return GetSessionDataManager().clubLevel;}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetFurnitureData.ts\nfunction GetFurnitureData(furniClassId,productType){let furniData=null;switch(productType.toLowerCase()){case ProductTypeEnum.FLOOR:furniData=GetSessionDataManager().getFloorItemData(furniClassId);break;case ProductTypeEnum.WALL:furniData=GetSessionDataManager().getWallItemData(furniClassId);break;}return furniData;}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetFurnitureDataForProductOffer.ts\nfunction GetFurnitureDataForProductOffer(offer){if(!offer)return null;let furniData=null;switch(offer.productType.toUpperCase()){case nitro_renderer[\"ac\" /* FurnitureType */].FLOOR:furniData=GetSessionDataManager().getFloorItemData(offer.furniClassId);break;case nitro_renderer[\"ac\" /* FurnitureType */].WALL:furniData=GetSessionDataManager().getWallItemData(offer.furniClassId);break;}return furniData;}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetFurnitureDataForRoomObject.ts\nfunction GetFurnitureDataForRoomObject(roomId,objectId,category){const roomObject=GetRoomEngine().getRoomObject(roomId,objectId,category);if(!roomObject)return;const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);switch(category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:return GetSessionDataManager().getFloorItemData(typeId);case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:return GetSessionDataManager().getWallItemData(typeId);}return null;}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetOwnPosture.ts\nfunction GetOwnPosture(){const roomObject=GetOwnRoomObject();if(!roomObject)return nitro_renderer[\"k\" /* AvatarAction */].POSTURE_STAND;const model=roomObject.model;return model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_POSTURE);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetProductDataForLocalization.ts\nfunction GetProductDataForLocalization(localizationId){if(!localizationId)return null;return GetSessionDataManager().getProductData(localizationId);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GetRoomSession.ts\nfunction GetRoomSession(){return GetRoomSessionManager().getSession(-1);}\n// CONCATENATED MODULE: ./src/api/nitro/session/GoToDesktop.ts\nfunction GoToDesktop(){SendMessageComposer(new nitro_renderer[\"sb\" /* DesktopViewComposer */]());}\n// CONCATENATED MODULE: ./src/api/nitro/session/HasHabboClub.ts\nfunction HasHabboClub(){return GetSessionDataManager().clubLevel>=nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].CLUB;}\n// CONCATENATED MODULE: ./src/api/nitro/session/HasHabboVip.ts\nfunction HasHabboVip(){return GetSessionDataManager().clubLevel>=nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP;}\n// CONCATENATED MODULE: ./src/api/nitro/session/IsOwnerOfFloorFurniture.ts\nfunction IsOwnerOfFloorFurniture(id){const roomObject=GetRoomEngine().getRoomObject(GetRoomSession().roomId,id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(!roomObject||!roomObject.model)return false;const userId=GetSessionDataManager().userId;const objectOwnerId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_ID);return userId===objectOwnerId;}\n// CONCATENATED MODULE: ./src/api/nitro/session/IsRidingHorse.ts\nfunction IsRidingHorse(){const roomObject=GetOwnRoomObject();if(!roomObject)return false;const model=roomObject.model;const effectId=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_EFFECT);return effectId===77;}\n// CONCATENATED MODULE: ./src/api/nitro/session/StartRoomSession.ts\nfunction StartRoomSession(session){GetRoomSessionManager().startSession(session);}\n// CONCATENATED MODULE: ./src/api/nitro/session/VisitDesktop.ts\nconst VisitDesktop=()=>{if(!GetRoomSession())return;GoToDesktop();GetRoomSessionManager().removeSession(-1);};\n// CONCATENATED MODULE: ./src/api/nitro/session/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/GetOwnRoomObject.ts\nfunction GetOwnRoomObject(){const userId=GetSessionDataManager().userId;const roomId=GetRoomEngine().activeRoomId;const category=nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT;const totalObjects=GetRoomEngine().getTotalObjectsForManager(roomId,category);let i=0;while(i<totalObjects){const roomObject=GetRoomEngine().getRoomObjectByIndex(roomId,i,category);if(roomObject){const userData=GetRoomSession().userDataManager.getUserDataByIndex(roomObject.id);if(userData){if(userData.webID===userId)return roomObject;}}i++;}return null;}\n// CONCATENATED MODULE: ./src/api/nitro/room/GetRoomObjectBounds.ts\nconst GetRoomObjectBounds=function(roomId,objectId,category){let canvasId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;const rectangle=GetRoomEngine().getRoomObjectBoundingRectangle(roomId,objectId,category,canvasId);if(!rectangle)return null;rectangle.x=Math.round(rectangle.x);rectangle.y=Math.round(rectangle.y);return rectangle;};\n// CONCATENATED MODULE: ./src/api/nitro/room/GetRoomObjectScreenLocation.ts\nconst GetRoomObjectScreenLocation=function(roomId,objectId,category){let canvasId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;const point=GetRoomEngine().getRoomObjectScreenLocation(roomId,objectId,category,canvasId);if(!point)return null;point.x=Math.round(point.x);point.y=Math.round(point.y);return point;};\n// CONCATENATED MODULE: ./src/api/nitro/room/InitializeRoomInstanceRenderingCanvas.ts\nconst InitializeRoomInstanceRenderingCanvas=function(width,height){let canvasId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;const roomEngine=GetRoomEngine();const roomId=roomEngine.activeRoomId;roomEngine.initializeRoomInstanceRenderingCanvas(roomId,canvasId,width,height);};\n// CONCATENATED MODULE: ./src/api/nitro/room/IsFurnitureSelectionDisabled.ts\nfunction IsFurnitureSelectionDisabled(event){let result=false;const roomObject=GetRoomEngine().getRoomObject(event.roomId,event.objectId,event.category);if(roomObject){const selectionDisabled=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_SELECTION_DISABLED)===1;if(selectionDisabled){result=true;if(GetSessionDataManager().isModerator)result=false;}}return result;}\n// CONCATENATED MODULE: ./src/api/nitro/room/ProcessRoomObjectOperation.ts\nfunction ProcessRoomObjectOperation(objectId,category,operation){GetRoomEngine().processRoomObjectOperation(objectId,category,operation);}\n// CONCATENATED MODULE: ./src/api/nitro/room/SetActiveRoomId.ts\nfunction SetActiveRoomId(roomId){GetRoomEngine().setActiveRoomId(roomId);}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/IPhotoData.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomDimmerPreset.ts\nclass RoomDimmerPreset{constructor(id,type,color,brightness){this._id=void 0;this._type=void 0;this._color=void 0;this._brightness=void 0;this._id=id;this._type=type;this._color=color;this._brightness=brightness;}get id(){return this._id;}get type(){return this._type;}get color(){return this._color;}get brightness(){return this._brightness;}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomObjectItem.ts\nclass RoomObjectItem{constructor(id,category,name){this._id=void 0;this._category=void 0;this._name=void 0;this._id=id;this._category=category;this._name=name;}get id(){return this._id;}get category(){return this._category;}get name(){return this._name;}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateEvent.ts\nclass RoomWidgetUpdateEvent_RoomWidgetUpdateEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetAvatarInfoEvent.ts\nclass RoomWidgetAvatarInfoEvent_RoomWidgetAvatarInfoEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(userId,userName,userType,roomIndex,allowNameChange){super(RoomWidgetAvatarInfoEvent_RoomWidgetAvatarInfoEvent.AVATAR_INFO);this._userId=void 0;this._userName=void 0;this._userType=void 0;this._roomIndex=void 0;this._allowNameChange=void 0;this._userId=userId;this._userName=userName;this._userType=userType;this._roomIndex=roomIndex;this._allowNameChange=allowNameChange;}get userId(){return this._userId;}get userName(){return this._userName;}get userType(){return this._userType;}get roomIndex(){return this._roomIndex;}get allowNameChange(){return this._allowNameChange;}}RoomWidgetAvatarInfoEvent_RoomWidgetAvatarInfoEvent.AVATAR_INFO='RWAIE_AVATAR_INFO';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetChooserContentEvent.ts\nclass RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,items){super(type);this._items=void 0;this._items=items;}get items(){return this._items;}}RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.USER_CHOOSER_CONTENT='RWCCE_USER_CHOOSER_CONTENT';RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT='RWCCE_FURNI_CHOOSER_CONTENT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetFloodControlEvent.ts\nclass RoomWidgetFloodControlEvent_RoomWidgetFloodControlEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(seconds){super(RoomWidgetFloodControlEvent_RoomWidgetFloodControlEvent.FLOOD_CONTROL);this._seconds=0;this._seconds=seconds;}get seconds(){return this._seconds;}}RoomWidgetFloodControlEvent_RoomWidgetFloodControlEvent.FLOOD_CONTROL='RWFCE_FLOOD_CONTROL';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetObjectNameEvent.ts\nclass RoomWidgetObjectNameEvent_RoomWidgetObjectNameEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,roomIndex,category,id,name,userType){super(type);this._roomIndex=void 0;this._category=void 0;this._id=void 0;this._name=void 0;this._userType=void 0;this._roomIndex=roomIndex;this._category=category;this._id=id;this._name=name;this._userType=userType;}get roomIndex(){return this._roomIndex;}get category(){return this._category;}get id(){return this._id;}get name(){return this._name;}get userType(){return this._userType;}}RoomWidgetObjectNameEvent_RoomWidgetObjectNameEvent.TYPE='RWONE_TYPE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetPollUpdateEvent.ts\nclass RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,id){super(type);this._id=-1;this._summary=void 0;this._headline=void 0;this._numQuestions=0;this._startMessage='';this._endMessage='';this._questionArray=null;this._pollType='';this._npsPoll=false;this._id=id;}get id(){return this._id;}get summary(){return this._summary;}set summary(k){this._summary=k;}get headline(){return this._headline;}set headline(k){this._headline=k;}get numQuestions(){return this._numQuestions;}set numQuestions(k){this._numQuestions=k;}get startMessage(){return this._startMessage;}set startMessage(k){this._startMessage=k;}get endMessage(){return this._endMessage;}set endMessage(k){this._endMessage=k;}get questionArray(){return this._questionArray;}set questionArray(k){this._questionArray=k;}get pollType(){return this._pollType;}set pollType(k){this._pollType=k;}get npsPoll(){return this._npsPoll;}set npsPoll(k){this._npsPoll=k;}}RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.OFFER='RWPUW_OFFER';RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.ERROR='RWPUW_ERROR';RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.CONTENT='RWPUW_CONTENT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateBackgroundColorPreviewEvent.ts\nclass RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type){let hue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let saturation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let lightness=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;super(type);this._hue=void 0;this._saturation=void 0;this._lightness=void 0;this._hue=hue;this._saturation=saturation;this._lightness=lightness;}get hue(){return this._hue;}get saturation(){return this._saturation;}get lightness(){return this._lightness;}}RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.PREVIEW='RWUBCPE_PREVIEW';RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.CLEAR_PREVIEW='RWUBCPE_CLEAR_PREVIEW';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateChatEvent.ts\nclass RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,userId,text,userName,userCategory,userType,petType,userX,userY,userImage,userColor,roomId){let chatType=arguments.length>12&&arguments[12]!==undefined?arguments[12]:0;let styleId=arguments.length>13&&arguments[13]!==undefined?arguments[13]:0;let links=arguments.length>14&&arguments[14]!==undefined?arguments[14]:null;super(type);this._userId=void 0;this._text=void 0;this._chatType=void 0;this._userName=void 0;this._links=void 0;this._userX=void 0;this._userY=void 0;this._userImage=void 0;this._userColor=void 0;this._roomId=void 0;this._userCategory=void 0;this._userType=void 0;this._petType=void 0;this._styleId=void 0;this._userId=userId;this._text=text;this._chatType=chatType;this._userName=userName;this._userCategory=userCategory;this._userType=userType;this._petType=petType;this._links=links;this._userX=userX;this._userY=userY;this._userImage=userImage;this._userColor=userColor;this._roomId=roomId;this._styleId=styleId;}get userId(){return this._userId;}get text(){return this._text;}get chatType(){return this._chatType;}get userName(){return this._userName;}get userCategory(){return this._userCategory;}get userType(){return this._userType;}get petType(){return this._petType;}get links(){return this._links;}get userX(){return this._userX;}get userY(){return this._userY;}get userImage(){return this._userImage;}get userColor(){return this._userColor;}get roomId(){return this._roomId;}get styleId(){return this._styleId;}}RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_EVENT='RWUCE_CHAT_EVENT';RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_SPEAK=0;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_WHISPER=1;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_SHOUT=2;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_RESPECT=3;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_PETRESPECT=4;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_NOTIFY=5;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_PETTREAT=6;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_PETREVIVE=7;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_PET_REBREED_FERTILIZE=8;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_PET_SPEED_FERTILIZE=9;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_BOT_SPEAK=10;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_BOT_SHOUT=11;RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_TYPE_BOT_WHISPER=12;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateChatInputContentEvent.ts\nclass RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(chatMode,userName){super(RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.CHAT_INPUT_CONTENT);this._chatMode='';this._userName='';this._chatMode=chatMode;this._userName=userName;}get chatMode(){return this._chatMode;}get userName(){return this._userName;}}RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.CHAT_INPUT_CONTENT='RWUCICE_CHAT_INPUT_CONTENT';RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.WHISPER='whisper';RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.SHOUT='shout';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateCreditFurniEvent.ts\nclass RoomWidgetUpdateCreditFurniEvent_RoomWidgetUpdateCreditFurniEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,objectId,value,furniType){super(type);this._objectId=void 0;this._value=void 0;this._furniType=void 0;this._objectId=objectId;this._value=value;this._furniType=furniType;}get objectId(){return this._objectId;}get value(){return this._value;}get furniType(){return this._furniType;}}RoomWidgetUpdateCreditFurniEvent_RoomWidgetUpdateCreditFurniEvent.CREDIT_FURNI_UPDATE='RWUCFE_CREDIT_FURNI_UPDATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateCustomStackHeightEvent.ts\nclass RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(objectId){let height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;super(RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT);this._objectId=void 0;this._height=void 0;this._objectId=objectId;this._height=height;}get objectId(){return this._objectId;}get height(){return this._height;}}RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT='RWUCSHE_UPDATE_CUSTOM_STACK_HEIGHT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateDanceStatusEvent.ts\nclass RoomWidgetUpdateDanceStatusEvent_RoomWidgetUpdateDanceStatusEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(isDancing){super(RoomWidgetUpdateDanceStatusEvent_RoomWidgetUpdateDanceStatusEvent.UPDATE_DANCE);this._isDancing=void 0;this._isDancing=isDancing;}get isDancing(){return this._isDancing;}}RoomWidgetUpdateDanceStatusEvent_RoomWidgetUpdateDanceStatusEvent.UPDATE_DANCE='RWUDSE_UPDATE_DANCE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateDecorateModeEvent.ts\nclass RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(isDecorating){super(RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent.UPDATE_DECORATE);this._isDecorating=void 0;this._isDecorating=isDecorating;}get isDecorating(){return this._isDecorating;}}RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent.UPDATE_DECORATE='RWUDME_UPDATE_DECORATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateDimmerEvent.ts\nclass RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type){super(type);this._selectedPresetId=0;this._presets=void 0;this._presets=[];}get presetCount(){return this._presets.length;}get presets(){return this._presets;}get selectedPresetId(){return this._selectedPresetId;}set selectedPresetId(k){this._selectedPresetId=k;}setPresetValues(id,type,color,brightness){const preset=new RoomDimmerPreset(id,type,color,brightness);this._presets[id-1]=preset;}getPresetNumber(id){return this._presets[id];}}RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.PRESETS='RWUDE_PRESETS';RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.HIDE='RWUDE_HIDE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateDimmerStateEvent.ts\nclass RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(state,presetId,effectId,color,brightness){super(RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent.DIMMER_STATE);this._state=void 0;this._presetId=void 0;this._effectId=void 0;this._color=void 0;this._brightness=void 0;this._state=state;this._presetId=presetId;this._effectId=effectId;this._color=color;this._brightness=brightness;}get state(){return this._state;}get presetId(){return this._presetId;}get effectId(){return this._effectId;}get color(){return this._color;}get brightness(){return this._brightness;}}RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent.DIMMER_STATE='RWUDSE_DIMMER_STATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateExternalImageEvent.ts\nclass RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(objectId){let photoData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;super(RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent.UPDATE_EXTERNAL_IMAGE);this._objectId=void 0;this._photoData=void 0;this._objectId=objectId;this._photoData=photoData;}get objectId(){return this._objectId;}get photoData(){return this._photoData;}}RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent.UPDATE_EXTERNAL_IMAGE='RWUEIE_UPDATE_EXTERNAL_IMAGE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateInfostandEvent.ts\nclass RoomWidgetUpdateInfostandEvent_RoomWidgetUpdateInfostandEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateInfostandFurniEvent.ts\nclass RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent extends RoomWidgetUpdateInfostandEvent_RoomWidgetUpdateInfostandEvent{constructor(){super(...arguments);this.id=0;this.category=0;this.name='';this.description='';this.image=null;this.isWallItem=false;this.isStickie=false;this.isRoomOwner=false;this.roomControllerLevel=0;this.isAnyRoomController=false;this.expiration=-1;this.purchaseCatalogPageId=-1;this.purchaseOfferId=-1;this.extraParam='';this.isOwner=false;this.stuffData=null;this.groupId=0;this.ownerId=0;this.ownerName='';this.usagePolicy=0;this.rentCatalogPageId=-1;this.rentOfferId=-1;this.purchaseCouldBeUsedForBuyout=false;this.rentCouldBeUsedForBuyout=false;this.availableForBuildersClub=false;this.tileSizeX=1;this.tileSizeY=1;}}RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI='RWUIFE_FURNI';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateInfostandPetEvent.ts\nclass RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent extends RoomWidgetUpdateInfostandEvent_RoomWidgetUpdateInfostandEvent{constructor(){super(...arguments);this.level=0;this.maximumLevel=0;this.experience=0;this.levelExperienceGoal=0;this.energy=0;this.maximumEnergy=0;this.happyness=0;this.maximumHappyness=0;this.respectsPetLeft=0;this.respect=0;this.age=0;this.name='';this.id=-1;this.image=null;this.petType=0;this.petBreed=0;this.petFigure='';this.posture='std';this.isOwner=false;this.ownerId=-1;this.ownerName='';this.canRemovePet=false;this.roomIndex=0;this.unknownRarityLevel=0;this.saddle=false;this.rider=false;this.breedable=false;this.skillTresholds=[];this.publiclyRideable=0;this.fullyGrown=false;this.dead=false;this.rarityLevel=0;this.maximumTimeToLive=0;this.remainingTimeToLive=0;this.remainingGrowTime=0;this.publiclyBreedable=false;}}RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO='RWUIPE_PET_INFO';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateInfostandRentableBotEvent.ts\nclass RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent extends RoomWidgetUpdateInfostandEvent_RoomWidgetUpdateInfostandEvent{constructor(){super(...arguments);this.name='';this.motto='';this.webID=0;this.figure='';this.badges=[];this.carryItem=0;this.roomIndex=0;this.amIOwner=false;this.amIAnyRoomController=false;this.roomControllerLevel=0;this.ownerId=-1;this.ownerName='';this.botSkills=[];}}RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT='RWUIRBE_RENTABLE_BOT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateInfostandUserEvent.ts\nclass RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent extends RoomWidgetUpdateInfostandEvent_RoomWidgetUpdateInfostandEvent{constructor(){super(...arguments);this.name='';this.motto='';this.achievementScore=0;this.webID=0;this.xp=0;this.userType=-1;this.figure='';this.badges=[];this.groupId=0;this.groupName='';this.groupBadgeId='';this.carryItem=0;this.roomIndex=0;this.isSpectatorMode=false;this.allowNameChange=false;this.amIOwner=false;this.amIAnyRoomController=false;this.roomControllerLevel=0;this.canBeKicked=false;this.canBeBanned=false;this.canBeMuted=false;this.respectLeft=0;this.isIgnored=false;this.isGuildRoom=false;this.canTrade=false;this.canTradeReason=0;this.targetRoomControllerLevel=0;this.isAmbassador=false;}get isOwnUser(){return this.type===RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER;}}RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER='RWUIUE_OWN_USER';RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER='RWUIUE_PEER';RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT='RWUIUE_BOT';RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_OK=0;RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_SHUTDOWN=2;RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_NO_TRADING=3;RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.DEFAULT_BOT_BADGE_ID='BOT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateMannequinEvent.ts\nclass RoomWidgetUpdateMannequinEvent_RoomWidgetUpdateMannequinEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,objectId,figure,gender,name){super(type);this._objectId=void 0;this._figure=void 0;this._gender=void 0;this._name=void 0;this._objectId=objectId;this._figure=figure;this._gender=gender;this._name=name;}get objectId(){return this._objectId;}get figure(){return this._figure;}get gender(){return this._gender;}get name(){return this._name;}}RoomWidgetUpdateMannequinEvent_RoomWidgetUpdateMannequinEvent.MANNEQUIN_UPDATE='RWUME_MANNEQUIN_UPDATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdatePresentDataEvent.ts\nclass RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,objectId,giftMessage){let isOwnerOfFurniture=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;let imageUrl=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let purchaserName=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;let purchaserFigure=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;super(type);this._objectId=-1;this._classId=0;this._itemType='';this._giftMessage='';this._imageUrl=null;this._isController=void 0;this._purchaserName=void 0;this._purchaserFigure=void 0;this._placedItemId=-1;this._placedItemType='';this._placedInRoom=void 0;this._objectId=objectId;this._giftMessage=giftMessage;this._imageUrl=imageUrl;this._isController=isOwnerOfFurniture;this._purchaserName=purchaserName;this._purchaserFigure=purchaserFigure;}get objectId(){return this._objectId;}get classId(){return this._classId;}set classId(classId){this._classId=classId;}get itemType(){return this._itemType;}set itemType(type){this._itemType=type;}get giftMessage(){return this._giftMessage;}get imageUrl(){return this._imageUrl;}get isController(){return this._isController;}get purchaserName(){return this._purchaserName;}get purchaserFigure(){return this._purchaserFigure;}get placedItemId(){return this._placedItemId;}set placedItemId(itemId){this._placedItemId=itemId;}get placedInRoom(){return this._placedInRoom;}set placedInRoom(flag){this._placedInRoom=flag;}get placedItemType(){return this._placedItemType;}set placedItemType(type){this._placedItemType=type;}}RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.PACKAGEINFO='RWUPDE_PACKAGEINFO';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS='RWUPDE_CONTENTS';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_CLUB='RWUPDE_CONTENTS_CLUB';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_FLOOR='RWUPDE_CONTENTS_FLOOR';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_LANDSCAPE='RWUPDE_CONTENTS_LANDSCAPE';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_WALLPAPER='RWUPDE_CONTENTS_WALLPAPER';RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_IMAGE='RWUPDE_CONTENTS_IMAGE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateRentableBotChatEvent.ts\nclass RoomWidgetUpdateRentableBotChatEvent_RoomWidgetUpdateRentableBotChatEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(objectId,category,botId,chat,automaticChat,chatDelay,mixSentences){super(RoomWidgetUpdateRentableBotChatEvent_RoomWidgetUpdateRentableBotChatEvent.UPDATE_CHAT);this._objectId=void 0;this._category=void 0;this._botId=void 0;this._chat=void 0;this._automaticChat=void 0;this._chatDelay=void 0;this._mixSentences=void 0;this._objectId=objectId;this._category=category;this._botId=botId;this._chat=chat;this._automaticChat=automaticChat;this._chatDelay=chatDelay;this._mixSentences=mixSentences;}get objectId(){return this._objectId;}get category(){return this._category;}get botId(){return this._botId;}get chat(){return this._chat;}get automaticChat(){return this._automaticChat;}get chatDelay(){return this._chatDelay;}get mixSentences(){return this._mixSentences;}}RoomWidgetUpdateRentableBotChatEvent_RoomWidgetUpdateRentableBotChatEvent.UPDATE_CHAT='RWURBCE_UPDATE_CHAT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateRoomEngineEvent.ts\nclass RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,roomId){super(type);this._roomId=0;this._roomId=roomId;}get roomId(){return this._roomId;}}RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.GAME_MODE='RWUREE_GAME_MODE';RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.NORMAL_MODE='RWUREE_NORMAL_MODE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateRoomObjectEvent.ts\nclass RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,id,category,roomId){super(type);this._id=void 0;this._category=void 0;this._roomId=void 0;this._id=id;this._category=category;this._roomId=roomId;}get id(){return this._id;}get category(){return this._category;}get roomId(){return this._roomId;}}RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_SELECTED='RWUROE_OBJECT_SELECTED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED='RWUROE_OBJECT_DESELECTED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED='RWUROE_USER_REMOVED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED='RWUROE_FURNI_REMOVED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED='RWUROE_FURNI_ADDED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED='RWUROE_USER_ADDED';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OVER='RWUROE_OBJECT_ROLL_OVER';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OUT='RWUROE_OBJECT_ROLL_OUT';RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_REQUEST_MANIPULATION='RWUROE_OBJECT_REQUEST_MANIPULATION';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateSongEvent.ts\nclass RoomWidgetUpdateSongEvent_RoomWidgetUpdateSongEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,songId,songName,songAuthor){super(type);this._songId=void 0;this._songName=void 0;this._songAuthor=void 0;this._songId=songId;this._songName=songName;this._songAuthor=songAuthor;}get songId(){return this._songId;}get songName(){return this._songName;}get songAuthor(){return this._songAuthor;}}RoomWidgetUpdateSongEvent_RoomWidgetUpdateSongEvent.PLAYING_CHANGED='RWUSE_PLAYING_CHANGED';RoomWidgetUpdateSongEvent_RoomWidgetUpdateSongEvent.DATA_RECEIVED='RWUSE_DATA_RECEIVED';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateTrophyEvent.ts\nclass RoomWidgetUpdateTrophyEvent_RoomWidgetUpdateTrophyEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,color,name,date,message,extra){super(type);this._color=void 0;this._name=void 0;this._date=void 0;this._message=void 0;this._extra=void 0;this._color=color;this._name=name;this._date=date;this._message=message;this._extra=extra;}get color(){return this._color;}get name(){return this._name;}get date(){return this._date;}get message(){return this._message;}get extra(){return this._extra;}}RoomWidgetUpdateTrophyEvent_RoomWidgetUpdateTrophyEvent.TROPHY_UPDATE='RWUTE_TROPHY_UPDATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateUserDataEvent.ts\nclass RoomWidgetUpdateUserDataEvent_RoomWidgetUpdateUserDataEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(){super(RoomWidgetUpdateUserDataEvent_RoomWidgetUpdateUserDataEvent.USER_DATA_UPDATED);}}RoomWidgetUpdateUserDataEvent_RoomWidgetUpdateUserDataEvent.USER_DATA_UPDATED='RWUUDE_USER_DATA_UPDATED';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUpdateYoutubeDisplayEvent.ts\nclass RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(objectId){let hasControl=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;super(RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent.UPDATE_YOUTUBE_DISPLAY);this._objectId=void 0;this._hasControl=void 0;this._objectId=objectId;this._hasControl=hasControl;}get objectId(){return this._objectId;}get hasControl(){return this._hasControl;}}RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent.UPDATE_YOUTUBE_DISPLAY='RWUEIE_UPDATE_YOUTUBE_DISPLAY';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetUseProductBubbleEvent.ts\nclass RoomWidgetUseProductBubbleEvent_RoomWidgetUseProductBubbleEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,items){super(type);this._items=void 0;this._items=items;}get items(){return this._items;}}RoomWidgetUseProductBubbleEvent_RoomWidgetUseProductBubbleEvent.USE_PRODUCT_BUBBLES='RWUPBE_USE_PRODUCT_BUBBLES';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/RoomWidgetWordQuizUpdateEvent.ts\nclass RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent extends RoomWidgetUpdateEvent_RoomWidgetUpdateEvent{constructor(type,id){super(type);this._id=-1;this._pollType=null;this._pollId=-1;this._questionId=-1;this._duration=-1;this._question=null;this._userId=-1;this._value=void 0;this._answerCounts=void 0;this._id=id;}get id(){return this._id;}get pollType(){return this._pollType;}set pollType(k){this._pollType=k;}get pollId(){return this._pollId;}set pollId(k){this._pollId=k;}get questionId(){return this._questionId;}set questionId(k){this._questionId=k;}get duration(){return this._duration;}set duration(k){this._duration=k;}get question(){return this._question;}set question(k){this._question=k;}get userId(){return this._userId;}set userId(k){this._userId=k;}get value(){return this._value;}set value(k){this._value=k;}get answerCounts(){return this._answerCounts;}set answerCounts(k){this._answerCounts=k;}}RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.NEW_QUESTION='RWPUW_NEW_QUESTION';RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_FINISHED='RWPUW_QUESION_FINSIHED';RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_ANSWERED='RWPUW_QUESTION_ANSWERED';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/UseProductItem.ts\nclass UseProductItem{constructor(id,category,name,requestRoomObjectId,targetRoomObjectId,requestInventoryStripId,replace){this._id=void 0;this._category=void 0;this._name=void 0;this._requestRoomObjectId=void 0;this._targetRoomObjectId=void 0;this._requestInventoryStripId=void 0;this._replace=void 0;this._id=id;this._category=category;this._name=name;this._requestRoomObjectId=requestRoomObjectId;this._requestInventoryStripId=requestInventoryStripId;this._replace=replace;}get id(){return this._id;}get category(){return this._category;}get name(){return this._name;}get requestRoomObjectId(){return this._requestRoomObjectId;}get requestInventoryStripId(){return this._requestInventoryStripId;}get replace(){return this._replace;}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/events/index.ts\n\n// CONCATENATED MODULE: ./src/api/utils/CloneObject.ts\nconst CloneObject=object=>{if(object==null||'object'!=typeof object)return object;// @ts-ignore\nconst copy=new object.constructor();for(const attr in object){if(object.hasOwnProperty(attr))copy[attr]=object[attr];}return copy;};\n// CONCATENATED MODULE: ./src/api/utils/ColorUtils.ts\nclass ColorUtils{static makeColorHex(color){return'#'+color;}static makeColorNumberHex(color){let val=color.toString(16);if(val.length<6){const diff=6-val.length;for(let i=0;i<diff;i++){val='0'+val;}}return'#'+val;}static convertFromHex(color){return parseInt(color.replace('#',''),16);}}\n// CONCATENATED MODULE: ./src/api/utils/LocalizeBadgeDescription.ts\nconst LocalizeBadgeDescription=key=>{let badgeDesc=GetNitroInstance().localization.getBadgeDesc(key);if(!badgeDesc||!badgeDesc.length)badgeDesc=`badge_desc_${key}`;return badgeDesc;};\n// CONCATENATED MODULE: ./src/api/utils/LocalizeBageName.ts\nconst LocalizeBadgeName=key=>{let badgeName=GetNitroInstance().localization.getBadgeName(key);if(!badgeName||!badgeName.length)badgeName=`badge_name_${key}`;return badgeName;};\n// CONCATENATED MODULE: ./src/api/utils/LocalizeFormattedNumber.ts\nfunction LocalizeFormattedNumber(number){if(!number||isNaN(number))return'0';return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,' ');};\n// CONCATENATED MODULE: ./src/api/utils/LocalizeShortNumber.ts\nfunction LocalizeShortNumber(number){if(!number||isNaN(number))return'0';let abs=Math.abs(number);const rounder=Math.pow(10,1);const isNegative=number<0;let key='';const powers=[{key:'Q',value:Math.pow(10,15)},{key:'T',value:Math.pow(10,12)},{key:'B',value:Math.pow(10,9)},{key:'M',value:Math.pow(10,6)},{key:'K',value:1000}];for(const power of powers){let reduced=abs/power.value;reduced=Math.round(reduced*rounder)/rounder;if(reduced>=1){abs=reduced;key=power.key;break;}}return(isNegative?'-':'')+abs+key;}\n// CONCATENATED MODULE: ./src/api/utils/LocalizeText.ts\nfunction LocalizeText(key){let parameters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let replacements=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return GetNitroInstance().getLocalizationWithParameters(key,parameters,replacements);}\n// CONCATENATED MODULE: ./src/api/utils/LocalStorageKeys.ts\nclass LocalStorageKeys{}LocalStorageKeys.CATALOG_PLACE_MULTIPLE_OBJECTS='catalogPlaceMultipleObjects';LocalStorageKeys.CATALOG_SKIP_PURCHASE_CONFIRMATION='catalogSkipPurchaseConfirmation';\n// EXTERNAL MODULE: ./node_modules/@nitrots/nitro-renderer/src/nitro/events/NitroSoundEvent.ts\nvar NitroSoundEvent = __webpack_require__(35);\n\n// CONCATENATED MODULE: ./src/hooks/messages/UseMessageEventHook.tsx\nfunction UseMessageEventHook(eventType,handler){Object(react[\"useEffect\"])(()=>{//@ts-ignore\nconst event=new eventType(handler);GetCommunication().registerMessageEvent(event);return()=>GetCommunication().removeMessageEvent(event);},[eventType,handler]);}\n// CONCATENATED MODULE: ./src/hooks/messages/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/achievements/useAchievements.ts\nconst useAchievementsState=()=>{const[needsUpdate,setNeedsUpdate]=Object(react[\"useState\"])(true);const[achievementCategories,setAchievementCategories]=Object(react[\"useState\"])([]);const[selectedCategoryCode,setSelectedCategoryCode]=Object(react[\"useState\"])(null);const[selectedAchievementId,setSelectedAchievementId]=Object(react[\"useState\"])(-1);const[achievementScore,setAchievementScore]=Object(react[\"useState\"])(0);const getTotalUnseen=Object(react[\"useMemo\"])(()=>{let unseen=0;achievementCategories.forEach(category=>unseen+=GetAchievementCategoryTotalUnseen(category));return unseen;},[achievementCategories]);const getProgress=Object(react[\"useMemo\"])(()=>{let progress=0;achievementCategories.forEach(category=>progress+=category.getProgress());return progress;},[achievementCategories]);const getMaxProgress=Object(react[\"useMemo\"])(()=>{let progress=0;achievementCategories.forEach(category=>progress+=category.getMaxProgress());return progress;},[achievementCategories]);const scaledProgressPercent=Object(react[\"useMemo\"])(()=>{return~~((getProgress-0)*(100-0)/(getMaxProgress-0)+0);},[getProgress,getMaxProgress]);const setAchievementSeen=Object(react[\"useCallback\"])((categoryCode,achievementId)=>{setAchievementCategories(prevValue=>{const newValue=[...prevValue];for(const category of newValue){if(category.code!==categoryCode)continue;for(const achievement of category.achievements){if(achievement.achievementId!==achievementId)continue;achievement.unseen=0;}}return newValue;});},[]);const onAchievementEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const achievement=parser.achievement;setAchievementCategories(prevValue=>{const newValue=[...prevValue];const categoryIndex=newValue.findIndex(existing=>existing.code===achievement.category);if(categoryIndex===-1){const category=new AchievementCategory_AchievementCategory(achievement.category);category.achievements.push(achievement);newValue.push(category);}else{const category=CloneObject(newValue[categoryIndex]);const newAchievements=[...category.achievements];const achievementIndex=newAchievements.findIndex(existing=>existing.achievementId===achievement.achievementId);let previousAchievement=null;if(achievementIndex===-1){newAchievements.push(achievement);}else{previousAchievement=newAchievements[achievementIndex];newAchievements[achievementIndex]=achievement;}if(!GetAchievementIsIgnored(achievement)){achievement.unseen++;if(previousAchievement)achievement.unseen+=previousAchievement.unseen;}category.achievements=newAchievements;newValue[categoryIndex]=category;}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"b\" /* AchievementEvent */],onAchievementEvent);const onAchievementsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const categories=[];for(const achievement of parser.achievements){const categoryName=achievement.category;let existing=categories.find(category=>category.code===categoryName);if(!existing){existing=new AchievementCategory_AchievementCategory(categoryName);categories.push(existing);}existing.achievements.push(achievement);}setAchievementCategories(categories);},[]);UseMessageEventHook(nitro_renderer[\"d\" /* AchievementsEvent */],onAchievementsEvent);const onAchievementsScoreEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setAchievementScore(parser.score);},[]);UseMessageEventHook(nitro_renderer[\"e\" /* AchievementsScoreEvent */],onAchievementsScoreEvent);Object(react[\"useEffect\"])(()=>{if(!needsUpdate)return;SendMessageComposer(new nitro_renderer[\"Qf\" /* RequestAchievementsMessageComposer */]());setNeedsUpdate(false);},[needsUpdate]);return{achievementCategories,selectedCategoryCode,setSelectedCategoryCode,selectedAchievementId,setSelectedAchievementId,achievementScore,getTotalUnseen,getProgress,getMaxProgress,scaledProgressPercent,setAchievementSeen};};const useAchievements=useAchievementsState;\n// CONCATENATED MODULE: ./src/hooks/achievements/index.ts\n\n// EXTERNAL MODULE: ./node_modules/use-between/release/index.esm.js\nvar index_esm = __webpack_require__(20);\n\n// CONCATENATED MODULE: ./src/events/catalog/CatalogEvent.ts\nclass CatalogEvent_CatalogEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}CatalogEvent_CatalogEvent.SHOW_CATALOG='CE_SHOW_CATALOG';CatalogEvent_CatalogEvent.HIDE_CATALOG='CE_HIDE_CATALOG';CatalogEvent_CatalogEvent.TOGGLE_CATALOG='CE_TOGGLE_CATALOG';CatalogEvent_CatalogEvent.SOLD_OUT='CE_SOLD_OUT';CatalogEvent_CatalogEvent.APPROVE_NAME_RESULT='CE_APPROVE_NAME_RESULT';CatalogEvent_CatalogEvent.PURCHASE_APPROVED='CE_PURCHASE_APPROVED';CatalogEvent_CatalogEvent.INIT_GIFT='CE_INIT_GIFT';CatalogEvent_CatalogEvent.CATALOG_RESET='CE_RESET';CatalogEvent_CatalogEvent.CATALOG_INVISIBLE_PAGE_VISITED='CE_CATALOG_INVISIBLE_PAGE_VISITED';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogInitGiftEvent.ts\nclass CatalogInitGiftEvent_CatalogInitGiftEvent extends CatalogEvent_CatalogEvent{constructor(pageId,offerId,extraData){super(CatalogEvent_CatalogEvent.INIT_GIFT);this._pageId=void 0;this._offerId=void 0;this._extraData=void 0;this._pageId=pageId;this._offerId=offerId;this._extraData=extraData;}get pageId(){return this._pageId;}get offerId(){return this._offerId;}get extraData(){return this._extraData;}}\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPostMarketplaceOfferEvent.ts\nclass CatalogPostMarketplaceOfferEvent_CatalogPostMarketplaceOfferEvent extends CatalogEvent_CatalogEvent{constructor(item){super(CatalogPostMarketplaceOfferEvent_CatalogPostMarketplaceOfferEvent.POST_MARKETPLACE);this._item=void 0;this._item=item;}get item(){return this._item;}}CatalogPostMarketplaceOfferEvent_CatalogPostMarketplaceOfferEvent.POST_MARKETPLACE='CE_POST_MARKETPLACE';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPurchasedEvent.ts\nclass CatalogPurchasedEvent_CatalogPurchasedEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(purchase){super(CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS);this._purchase=void 0;this._purchase=purchase;}get purchase(){return this._purchase;}}CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS='CPE_PURCHASE_SUCCESS';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPurchaseFailureEvent.ts\nclass CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(code){super(CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED);this._code=void 0;this._code=code;}get code(){return this._code;}}CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED='CPFE_PURCHASE_FAILED';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPurchaseNotAllowedEvent.ts\nclass CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(code){super(CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent.NOT_ALLOWED);this._code=void 0;this._code=code;}get code(){return this._code;}}CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent.NOT_ALLOWED='CPNAE_NOT_ALLOWED';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogWidgetEvent.ts\nclass CatalogWidgetEvent_CatalogWidgetEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}CatalogWidgetEvent_CatalogWidgetEvent.WIDGETS_INITIALIZED='CWE_CWE_WIDGETS_INITIALIZED';CatalogWidgetEvent_CatalogWidgetEvent.SELECT_PRODUCT='CWE_SELECT_PRODUCT';CatalogWidgetEvent_CatalogWidgetEvent.SET_EXTRA_PARM='CWE_CWE_SET_EXTRA_PARM';CatalogWidgetEvent_CatalogWidgetEvent.PURCHASE='CWE_PURCHASE';CatalogWidgetEvent_CatalogWidgetEvent.COLOUR_ARRAY='CWE_COLOUR_ARRAY';CatalogWidgetEvent_CatalogWidgetEvent.MULTI_COLOUR_ARRAY='CWE_MULTI_COLOUR_ARRAY';CatalogWidgetEvent_CatalogWidgetEvent.COLOUR_INDEX='CWE_COLOUR_INDEX';CatalogWidgetEvent_CatalogWidgetEvent.TEXT_INPUT='CWE_TEXT_INPUT';CatalogWidgetEvent_CatalogWidgetEvent.DROPMENU_SELECT='CWE_CWE_DROPMENU_SELECT';CatalogWidgetEvent_CatalogWidgetEvent.PURCHASE_OVERRIDE='CWE_PURCHASE_OVERRIDE';CatalogWidgetEvent_CatalogWidgetEvent.SELLABLE_PET_PALETTES='CWE_SELLABLE_PET_PALETTES';CatalogWidgetEvent_CatalogWidgetEvent.UPDATE_ROOM_PREVIEW='CWE_UPDATE_ROOM_PREVIEW';CatalogWidgetEvent_CatalogWidgetEvent.GUILD_SELECTED='CWE_GUILD_SELECTED';CatalogWidgetEvent_CatalogWidgetEvent.TOTAL_PRICE_WIDGET_INITIALIZED='CWE_TOTAL_PRICE_WIDGET_INITIALIZED';CatalogWidgetEvent_CatalogWidgetEvent.PRODUCT_OFFER_UPDATED='CWE_CWE_PRODUCT_OFFER_UPDATED';CatalogWidgetEvent_CatalogWidgetEvent.SET_PREVIEWER_STUFFDATA='CWE_CWE_SET_PREVIEWER_STUFFDATA';CatalogWidgetEvent_CatalogWidgetEvent.EXTRA_PARAM_REQUIRED_FOR_BUY='CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY';CatalogWidgetEvent_CatalogWidgetEvent.TOGGLE='CWE_CWE_TOGGLE';CatalogWidgetEvent_CatalogWidgetEvent.BUILDER_SUBSCRIPTION_UPDATED='CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED';CatalogWidgetEvent_CatalogWidgetEvent.ROOM_CHANGED='CWE_CWE_ROOM_CHANGED';CatalogWidgetEvent_CatalogWidgetEvent.SHOW_WARNING_TEXT='CWE_CWE_SHOW_WARNING_TEXT';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPurchaseOverrideEvent.ts\nclass CatalogPurchaseOverrideEvent_CatalogPurchaseOverrideEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(callback){super(CatalogWidgetEvent_CatalogWidgetEvent.PURCHASE_OVERRIDE);this._callback=void 0;this._callback=callback;}get callback(){return this._callback;}}\n// CONCATENATED MODULE: ./src/events/catalog/CatalogPurchaseSoldOutEvent.ts\nclass CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(){super(CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent.SOLD_OUT);}}CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent.SOLD_OUT='CPSOE_SOLD_OUT';\n// CONCATENATED MODULE: ./src/events/catalog/CatalogSetRoomPreviewerStuffDataEvent.ts\nclass CatalogSetRoomPreviewerStuffDataEvent_CatalogSetRoomPreviewerStuffDataEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(stuffData){super(CatalogWidgetEvent_CatalogWidgetEvent.SET_PREVIEWER_STUFFDATA);this._stuffData=void 0;this._stuffData=stuffData;}get stuffData(){return this._stuffData;}}\n// CONCATENATED MODULE: ./src/events/catalog/SetRoomPreviewerStuffDataEvent.ts\nclass SetRoomPreviewerStuffDataEvent_SetRoomPreviewerStuffDataEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(offer,stuffData){super(SetRoomPreviewerStuffDataEvent_SetRoomPreviewerStuffDataEvent.UPDATE_STUFF_DATA);this._offer=void 0;this._stuffData=void 0;this._offer=offer;this._stuffData=stuffData;}get offer(){return this._offer;}get stuffData(){return this._stuffData;}}SetRoomPreviewerStuffDataEvent_SetRoomPreviewerStuffDataEvent.UPDATE_STUFF_DATA='SRPSA_UPDATE_STUFF_DATA';\n// CONCATENATED MODULE: ./src/events/catalog/index.ts\n\n// CONCATENATED MODULE: ./src/events/guide-tool/GuideToolEvent.ts\nclass GuideToolEvent_GuideToolEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}GuideToolEvent_GuideToolEvent.SHOW_GUIDE_TOOL='GTE_SHOW_GUIDE_TOOL';GuideToolEvent_GuideToolEvent.HIDE_GUIDE_TOOL='GTE_HIDE_GUIDE_TOOL';GuideToolEvent_GuideToolEvent.TOGGLE_GUIDE_TOOL='GTE_TOGGLE_GUIDE_TOOL';GuideToolEvent_GuideToolEvent.CREATE_HELP_REQUEST='GTE_CREATE_HELP_REQUEST';GuideToolEvent_GuideToolEvent.CREATE_BULLY_REQUEST='GTE_CREATE_BULLY_REQUEST';\n// CONCATENATED MODULE: ./src/events/guide-tool/index.ts\n\n// EXTERNAL MODULE: ./node_modules/@nitrots/nitro-renderer/src/core/events/NitroEvent.ts\nvar NitroEvent = __webpack_require__(9);\n\n// CONCATENATED MODULE: ./src/events/help/HelpNameChangeEvent.ts\nclass HelpNameChangeEvent_HelpNameChangeEvent extends NitroEvent[\"a\" /* NitroEvent */]{}HelpNameChangeEvent_HelpNameChangeEvent.INIT='HC_NAME_CHANGE_INIT';\n// CONCATENATED MODULE: ./src/events/help/HelpReportUserEvent.ts\nclass HelpReportUserEvent_HelpReportUserEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(userId){super(HelpReportUserEvent_HelpReportUserEvent.REPORT_USER);this._reportedUserId=void 0;this._reportedUserId=userId;}get reportedUserId(){return this._reportedUserId;}}HelpReportUserEvent_HelpReportUserEvent.REPORT_USER='HCE_HELP_CENTER_REPORT_USER';\n// CONCATENATED MODULE: ./src/events/help/index.ts\n\n// CONCATENATED MODULE: ./src/events/inventory/InventoryFurniAddedEvent.ts\nclass InventoryFurniAddedEvent_InventoryFurniAddedEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(id,spriteId,category){super(InventoryFurniAddedEvent_InventoryFurniAddedEvent.FURNI_ADDED);this.id=id;this.spriteId=spriteId;this.category=category;}}InventoryFurniAddedEvent_InventoryFurniAddedEvent.FURNI_ADDED='IFAE_FURNI_ADDED';\n// CONCATENATED MODULE: ./src/events/inventory/index.ts\n\n// CONCATENATED MODULE: ./src/events/mod-tools/ModToolsEvent.ts\nclass ModToolsEvent_ModToolsEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}ModToolsEvent_ModToolsEvent.SHOW_MOD_TOOLS='MTE_SHOW_MOD_TOOLS';ModToolsEvent_ModToolsEvent.HIDE_MOD_TOOLS='MTE_HIDE_MOD_TOOLS';ModToolsEvent_ModToolsEvent.TOGGLE_MOD_TOOLS='MTE_TOGGLE_MOD_TOOLS';ModToolsEvent_ModToolsEvent.OPEN_ROOM_INFO='MTE_OPEN_ROOM_INFO';ModToolsEvent_ModToolsEvent.OPEN_ROOM_CHATLOG='MTE_OPEN_ROOM_CHATLOG';ModToolsEvent_ModToolsEvent.OPEN_USER_INFO='MTE_OPEN_USER_INFO';ModToolsEvent_ModToolsEvent.OPEN_USER_CHATLOG='MTE_OPEN_USER_CHATLOG';\n// CONCATENATED MODULE: ./src/events/mod-tools/ModToolsOpenRoomChatlogEvent.ts\nclass ModToolsOpenRoomChatlogEvent_ModToolsOpenRoomChatlogEvent extends ModToolsEvent_ModToolsEvent{constructor(roomId){super(ModToolsEvent_ModToolsEvent.OPEN_ROOM_CHATLOG);this._roomId=void 0;this._roomId=roomId;}get roomId(){return this._roomId;}}\n// CONCATENATED MODULE: ./src/events/mod-tools/ModToolsOpenRoomInfoEvent.ts\nclass ModToolsOpenRoomInfoEvent_ModToolsOpenRoomInfoEvent extends ModToolsEvent_ModToolsEvent{constructor(roomId){super(ModToolsEvent_ModToolsEvent.OPEN_ROOM_INFO);this._roomId=void 0;this._roomId=roomId;}get roomId(){return this._roomId;}}\n// CONCATENATED MODULE: ./src/events/mod-tools/ModToolsOpenUserChatlogEvent.ts\nclass ModToolsOpenUserChatlogEvent_ModToolsOpenUserChatlogEvent extends ModToolsEvent_ModToolsEvent{constructor(userId){super(ModToolsEvent_ModToolsEvent.OPEN_USER_CHATLOG);this._userId=void 0;this._userId=userId;}get userId(){return this._userId;}}\n// CONCATENATED MODULE: ./src/events/mod-tools/ModToolsOpenUserInfoEvent.ts\nclass ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent extends ModToolsEvent_ModToolsEvent{constructor(userId){super(ModToolsEvent_ModToolsEvent.OPEN_USER_INFO);this._userId=void 0;this._userId=userId;}get userId(){return this._userId;}}\n// CONCATENATED MODULE: ./src/events/mod-tools/index.ts\n\n// CONCATENATED MODULE: ./src/events/notification-center/NotificationAlertEvent.ts\nclass NotificationAlertEvent_NotificationAlertEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(messages){let alertType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let clickUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let clickUrlText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let title=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let imageUrl=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;super(NotificationAlertEvent_NotificationAlertEvent.ALERT);this._messages=void 0;this._alertType=void 0;this._clickUrl=void 0;this._clickUrlText=void 0;this._title=void 0;this._imageUrl=void 0;this._messages=messages;this._alertType=alertType;this._clickUrl=clickUrl;this._clickUrlText=clickUrlText;this._title=title;this._imageUrl=imageUrl;}get messages(){return this._messages;}get alertType(){return this._alertType;}get clickUrl(){return this._clickUrl;}get clickUrlText(){return this._clickUrlText;}get title(){return this._title;}get imageUrl(){return this._imageUrl;}}NotificationAlertEvent_NotificationAlertEvent.ALERT='NAE_ALERT';\n// CONCATENATED MODULE: ./src/events/notification-center/NotificationBubbleEvent.ts\nclass NotificationBubbleEvent_NotificationBubbleEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(message,notificationType,imageUrl,linkUrl){super(NotificationBubbleEvent_NotificationBubbleEvent.NEW_BUBBLE);this._message=void 0;this._notificationType=void 0;this._imageUrl=void 0;this._linkUrl=void 0;this._message=message;this._notificationType=notificationType;this._imageUrl=imageUrl;this._linkUrl=linkUrl;}get message(){return this._message;}get notificationType(){return this._notificationType;}get imageUrl(){return this._imageUrl;}get linkUrl(){return this._linkUrl;}}NotificationBubbleEvent_NotificationBubbleEvent.NEW_BUBBLE='NBE_NEW_BUBBLE';\n// CONCATENATED MODULE: ./src/events/notification-center/NotificationCenterAlertEvent.ts\nclass NotificationCenterAlertEvent_NotificationCenterAlertEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(type,message){let clickUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let headerText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;super(type);this._message=void 0;this._clickUrl=void 0;this._headerText=void 0;this._message=message;this._clickUrl=clickUrl;this._headerText=headerText;}get message(){return this._message;}get clickUrl(){return this._clickUrl;}get headerText(){return this._headerText;}}NotificationCenterAlertEvent_NotificationCenterAlertEvent.HOTEL_ALERT='NCAE_HOTEL_ALERT';\n// CONCATENATED MODULE: ./src/events/notification-center/NotificationCenterEvent.ts\nclass NotificationCenterEvent_NotificationCenterEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}NotificationCenterEvent_NotificationCenterEvent.SHOW_NOTIFICATION_CENTER='NCE_SHOW_NOTIFICATION_CENTER';NotificationCenterEvent_NotificationCenterEvent.HIDE_NOTIFICATION_CENTER='NCE_HIDE_NOTIFICATION_CENTER';NotificationCenterEvent_NotificationCenterEvent.TOGGLE_NOTIFICATION_CENTER='NCE_TOGGLE_NOTIFICATION_CENTER';NotificationCenterEvent_NotificationCenterEvent.ADD_NOTIFICATION='NCE_ADD_NOTIFICATION';\n// CONCATENATED MODULE: ./src/events/notification-center/NotificationConfirmEvent.ts\nclass NotificationConfirmEvent_NotificationConfirmEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{constructor(confirmType,message,onConfirm,onCancel,confirmText,cancelText,title){super(NotificationConfirmEvent_NotificationConfirmEvent.CONFIRM);this._confirmType=void 0;this._message=void 0;this._onConfirm=void 0;this._onCancel=void 0;this._confirmText=void 0;this._cancelText=void 0;this._title=void 0;this._confirmType=confirmType;this._message=message;this._onConfirm=onConfirm;this._onCancel=onCancel;this._confirmText=confirmText;this._cancelText=cancelText;this._title=title;}get confirmType(){return this._confirmType;}get message(){return this._message;}get onConfirm(){return this._onConfirm;}get onCancel(){return this._onCancel;}get confirmText(){return this._confirmText;}get cancelText(){return this._cancelText;}get title(){return this._title;}}NotificationConfirmEvent_NotificationConfirmEvent.CONFIRM='NCE_CONFIRM';\n// CONCATENATED MODULE: ./src/events/notification-center/index.ts\n\n// CONCATENATED MODULE: ./src/events/room-widgets/thumbnail/RoomWidgetThumbnailEvent.ts\nclass RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.SHOW_THUMBNAIL='NE_SHOW_THUMBNAIL';RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.HIDE_THUMBNAIL='NE_HIDE_THUMBNAIL';RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.TOGGLE_THUMBNAIL='NE_TOGGLE_THUMBNAIL';\n// CONCATENATED MODULE: ./src/events/room-widgets/thumbnail/index.ts\n\n// CONCATENATED MODULE: ./src/events/room-widgets/index.ts\n\n// CONCATENATED MODULE: ./src/events/wired/WiredEvent.ts\nclass WiredEvent_WiredEvent extends nitro_renderer[\"Te\" /* NitroEvent */]{}WiredEvent_WiredEvent.SAVE_WIRED='WE_SAVE_WIRED';\n// CONCATENATED MODULE: ./src/events/wired/WiredSelectObjectEvent.ts\nclass WiredSelectObjectEvent_WiredSelectObjectEvent extends WiredEvent_WiredEvent{constructor(){let objectId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;let category=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;super(WiredSelectObjectEvent_WiredSelectObjectEvent.SELECT_OBJECT);this._objectId=void 0;this._category=void 0;this._objectId=objectId;this._category=category;}get objectId(){return this._objectId;}get category(){return this._category;}}WiredSelectObjectEvent_WiredSelectObjectEvent.SELECT_OBJECT='WE_SELECT_OBJECT';\n// CONCATENATED MODULE: ./src/events/wired/index.ts\n\n// CONCATENATED MODULE: ./src/events/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/events/UseEventDispatcherHook.tsx\nconst UseEventDispatcherHook=(type,eventDispatcher,handler)=>{Object(react[\"useEffect\"])(()=>{eventDispatcher.addEventListener(type,handler);return()=>eventDispatcher.removeEventListener(type,handler);},[type,eventDispatcher,handler]);};\n// CONCATENATED MODULE: ./src/hooks/events/core/UseCommunicationEvent.tsx\nconst UseCommunicationEvent=(type,handler)=>UseEventDispatcherHook(type,GetCommunication().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/core/UseConfigurationEvent.tsx\nconst UseConfigurationEvent=(type,handler)=>UseEventDispatcherHook(type,GetConfigurationManager().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/core/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/events/DispatchEventHook.ts\nconst DispatchEventHook=(eventDispatcher,event)=>eventDispatcher.dispatchEvent(event);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/DispatchMainEvent.ts\nconst DispatchMainEvent=event=>DispatchEventHook(GetNitroInstance().events,event);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseAvatarEvent.tsx\nconst UseAvatarEvent=(type,handler)=>UseEventDispatcherHook(type,GetAvatarRenderManager().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseCameraEvent.tsx\nconst UseCameraEvent=(type,handler)=>UseEventDispatcherHook(type,GetNitroInstance().cameraManager.events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseLocalizationEvent.tsx\nconst UseLocalizationEvent=(type,handler)=>UseEventDispatcherHook(type,GetNitroInstance().localization.events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseMainEvent.tsx\nconst UseMainEvent=(type,handler)=>UseEventDispatcherHook(type,GetNitroInstance().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseRoomEngineEvent.tsx\nconst UseRoomEngineEvent=(type,handler)=>UseEventDispatcherHook(type,GetRoomEngine().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseRoomSessionManagerEvent.tsx\nconst UseRoomSessionManagerEvent=(type,handler)=>UseEventDispatcherHook(type,GetRoomSessionManager().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/UseSessionDataManagerEvent.tsx\nconst UseSessionDataManagerEvent=(type,handler)=>UseEventDispatcherHook(type,GetSessionDataManager().events,handler);\n// CONCATENATED MODULE: ./src/hooks/events/nitro/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/events/ui/UiEventDispatcher.ts\nconst UI_EVENT_DISPATCHER=new nitro_renderer[\"xb\" /* EventDispatcher */]();\n// CONCATENATED MODULE: ./src/hooks/events/ui/DispatchUiEvent.ts\nconst DispatchUiEvent=event=>DispatchEventHook(UI_EVENT_DISPATCHER,event);\n// CONCATENATED MODULE: ./src/hooks/events/ui/UseUiEvent.tsx\nconst UseUiEvent=(type,handler)=>UseEventDispatcherHook(type,UI_EVENT_DISPATCHER,handler);\n// CONCATENATED MODULE: ./src/hooks/events/ui/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/events/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/useLocalStorage.ts\nconst useLocalStorageState=(key,initialValue)=>{const[storedValue,setStoredValuie]=Object(react[\"useState\"])(()=>{if(typeof window==='undefined')return initialValue;try{const item=window.localStorage.getItem(key);return item?JSON.parse(item):initialValue;}catch(error){return initialValue;}});const setValue=value=>{try{const valueToStore=value instanceof Function?value(storedValue):value;setStoredValuie(valueToStore);if(typeof window!=='undefined')window.localStorage.setItem(key,JSON.stringify(valueToStore));}catch(error){nitro_renderer[\"We\" /* NitroLogger */].error(error);}};return[storedValue,setValue];};const useLocalStorage=useLocalStorageState;\n// CONCATENATED MODULE: ./src/hooks/catalog/useCatalogPlaceMultipleItems.ts\nconst useCatalogPlaceMultipleItemsState=()=>useLocalStorage(LocalStorageKeys.CATALOG_PLACE_MULTIPLE_OBJECTS,false);const useCatalogPlaceMultipleItems=()=>Object(index_esm[\"a\" /* useBetween */])(useCatalogPlaceMultipleItemsState);\n// CONCATENATED MODULE: ./src/hooks/catalog/useCatalogSkipPurchaseConfirmation.ts\nconst useCatalogSkipPurchaseConfirmationState=()=>useLocalStorage(LocalStorageKeys.CATALOG_SKIP_PURCHASE_CONFIRMATION,false);const useCatalogSkipPurchaseConfirmation=()=>Object(index_esm[\"a\" /* useBetween */])(useCatalogSkipPurchaseConfirmationState);\n// CONCATENATED MODULE: ./src/hooks/catalog/useCatalog.ts\nconst DUMMY_PAGE_ID_FOR_OFFER_SEARCH=-12345678;const DRAG_AND_DROP_ENABLED=true;const useCatalogState=()=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[isBusy,setIsBusy]=Object(react[\"useState\"])(false);const[pageId,setPageId]=Object(react[\"useState\"])(-1);const[previousPageId,setPreviousPageId]=Object(react[\"useState\"])(-1);const[currentType,setCurrentType]=Object(react[\"useState\"])(CatalogType.NORMAL);const[rootNode,setRootNode]=Object(react[\"useState\"])(null);const[offersToNodes,setOffersToNodes]=Object(react[\"useState\"])(null);const[currentPage,setCurrentPage]=Object(react[\"useState\"])(null);const[currentOffer,setCurrentOffer]=Object(react[\"useState\"])(null);const[activeNodes,setActiveNodes]=Object(react[\"useState\"])([]);const[searchResult,setSearchResult]=Object(react[\"useState\"])(null);const[frontPageItems,setFrontPageItems]=Object(react[\"useState\"])([]);const[roomPreviewer,setRoomPreviewer]=Object(react[\"useState\"])(null);const[navigationHidden,setNavigationHidden]=Object(react[\"useState\"])(false);const[purchaseOptions,setPurchaseOptions]=Object(react[\"useState\"])({quantity:1,extraData:null,extraParamRequired:false,previewStuffData:null});const[catalogOptions,setCatalogOptions]=Object(react[\"useState\"])({});const[objectMoverRequested,setObjectMoverRequested]=Object(react[\"useState\"])(false);const[catalogPlaceMultipleObjects,setCatalogPlaceMultipleObjects]=useCatalogPlaceMultipleItems();const[catalogSkipPurchaseConfirmation,setCatalogSkipPurchaseConfirmation]=useCatalogSkipPurchaseConfirmation();const[purchasableOffer,setPurchaseableOffer]=Object(react[\"useState\"])(null);const[placedObjectPurchaseData,setPlacedObjectPurchaseData]=Object(react[\"useState\"])(null);const[furniCount,setFurniCount]=Object(react[\"useState\"])(0);const[furniLimit,setFurniLimit]=Object(react[\"useState\"])(0);const[maxFurniLimit,setMaxFurniLimit]=Object(react[\"useState\"])(0);const[secondsLeft,setSecondsLeft]=Object(react[\"useState\"])(0);const[updateTime,setUpdateTime]=Object(react[\"useState\"])(0);const[secondsLeftWithGrace,setSecondsLeftWithGrace]=Object(react[\"useState\"])(0);const requestedPage=Object(react[\"useRef\"])(new RequestedPage());const resetState=Object(react[\"useCallback\"])(()=>{setPageId(-1);setPreviousPageId(-1);setRootNode(null);setOffersToNodes(null);setCurrentPage(null);setCurrentOffer(null);setActiveNodes([]);setSearchResult(null);setFrontPageItems([]);setIsVisible(false);},[]);const getBuilderFurniPlaceableStatus=Object(react[\"useCallback\"])(offer=>{if(!offer)return BuilderFurniPlaceableStatus.MISSING_OFFER;if(furniCount<0||furniCount>=furniLimit)return BuilderFurniPlaceableStatus.FURNI_LIMIT_REACHED;const roomSession=GetRoomSession();if(!roomSession)return BuilderFurniPlaceableStatus.NOT_IN_ROOM;if(!roomSession.isRoomOwner)return BuilderFurniPlaceableStatus.NOT_ROOM_OWNER;if(secondsLeft<=0){const roomEngine=GetRoomEngine();let objectCount=roomEngine.getRoomObjectCount(roomSession.roomId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);while(objectCount>0){const roomObject=roomEngine.getRoomObjectByIndex(roomSession.roomId,objectCount,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);const userData=roomSession.userDataManager.getUserDataByIndex(roomObject.id);if(userData&&userData.type===nitro_renderer[\"Mg\" /* RoomObjectType */].USER&&userData.roomIndex!==roomSession.ownRoomIndex&&!userData.isModerator)return BuilderFurniPlaceableStatus.VISITORS_IN_ROOM;objectCount--;}}return BuilderFurniPlaceableStatus.OKAY;},[furniCount,furniLimit,secondsLeft]);const isDraggable=Object(react[\"useCallback\"])(offer=>{const roomSession=GetRoomSession();if((DRAG_AND_DROP_ENABLED&&roomSession&&offer.page&&offer.page.layoutCode!=='sold_ltd_items'&&currentType===CatalogType.NORMAL&&(roomSession.isRoomOwner||roomSession.isGuildRoom&&roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUILD_MEMBER)||currentType===CatalogType.BUILDER&&getBuilderFurniPlaceableStatus(offer)===BuilderFurniPlaceableStatus.OKAY)&&offer.pricingModel!==Offer_Offer.PRICING_MODEL_BUNDLE&&offer.product.productType!==ProductTypeEnum.EFFECT&&offer.product.productType!==ProductTypeEnum.HABBO_CLUB)return true;return false;},[currentType,getBuilderFurniPlaceableStatus]);const requestOfferToMover=Object(react[\"useCallback\"])(offer=>{if(!isDraggable(offer))return;const product=offer.product;if(!product)return;let category=0;switch(product.productType){case ProductTypeEnum.FLOOR:category=nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR;break;case ProductTypeEnum.WALL:category=nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL;break;}if(GetRoomEngine().processRoomObjectPlacement(nitro_renderer[\"Lg\" /* RoomObjectPlacementSource */].CATALOG,-offer.offerId,category,product.productClassId,product.extraParam)){setPurchaseableOffer(offer);setObjectMoverRequested(true);setIsVisible(false);}},[isDraggable]);const resetRoomPaint=Object(react[\"useCallback\"])((planeType,type)=>{const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';switch(planeType){case'floor':roomEngine.updateRoomInstancePlaneType(roomEngine.activeRoomId,type,wallType,landscapeType,true);return;case'wallpaper':roomEngine.updateRoomInstancePlaneType(roomEngine.activeRoomId,floorType,type,landscapeType,true);return;case'landscape':roomEngine.updateRoomInstancePlaneType(roomEngine.activeRoomId,floorType,wallType,type,true);return;default:roomEngine.updateRoomInstancePlaneType(roomEngine.activeRoomId,floorType,wallType,landscapeType,true);return;}},[]);const cancelObjectMover=Object(react[\"useCallback\"])(()=>{if(!purchasableOffer)return;GetRoomEngine().cancelRoomObjectInsert();setObjectMoverRequested(false);setPurchaseableOffer(null);},[purchasableOffer]);const resetObjectMover=Object(react[\"useCallback\"])(function(){let flag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;setObjectMoverRequested(prevValue=>{if(prevValue&&flag){CreateLinkEvent('catalog/open');}return false;});},[]);const resetPlacedOfferData=Object(react[\"useCallback\"])(function(){let flag=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!flag)resetObjectMover();setPlacedObjectPurchaseData(prevValue=>{if(prevValue){switch(prevValue.category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:GetRoomEngine().removeRoomObjectFloor(prevValue.roomId,prevValue.objectId);break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:{switch(prevValue.furniData.className){case'floor':case'wallpaper':case'landscape':resetRoomPaint('reset','');break;default:GetRoomEngine().removeRoomObjectWall(prevValue.roomId,prevValue.objectId);break;}break;}default:GetRoomEngine().deleteRoomObject(prevValue.objectId,prevValue.category);break;}}return null;});},[resetObjectMover,resetRoomPaint]);const getNodeById=Object(react[\"useCallback\"])((id,node)=>{if(node.pageId===id&&node!==rootNode)return node;for(const child of node.children){const found=getNodeById(id,child);if(found)return found;}return null;},[rootNode]);const getNodeByName=Object(react[\"useCallback\"])((name,node)=>{if(node.pageName===name&&node!==rootNode)return node;for(const child of node.children){const found=getNodeByName(name,child);if(found)return found;}return null;},[rootNode]);const getNodesByOfferId=Object(react[\"useCallback\"])(function(offerId){let flag=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!offersToNodes||!offersToNodes.size)return null;if(flag){const nodes=[];const offers=offersToNodes.get(offerId);if(offers&&offers.length)for(const offer of offers)offer.isVisible&&nodes.push(offer);if(nodes.length)return nodes;}return offersToNodes.get(offerId);},[offersToNodes]);const loadCatalogPage=Object(react[\"useCallback\"])((pageId,offerId)=>{if(pageId<0)return;setIsBusy(true);setPageId(pageId);if(pageId>-1)SendMessageComposer(new nitro_renderer[\"fc\" /* GetCatalogPageComposer */](pageId,offerId,currentType));},[currentType]);const showCatalogPage=Object(react[\"useCallback\"])((pageId,layoutCode,localization,offers,offerId,acceptSeasonCurrencyAsCredits)=>{const catalogPage=new CatalogPage(pageId,layoutCode,localization,offers,acceptSeasonCurrencyAsCredits);setCurrentPage(catalogPage);setPreviousPageId(prevValue=>pageId!==-1?pageId:prevValue);setNavigationHidden(false);if(offerId>-1&&catalogPage.offers.length){for(const offer of catalogPage.offers){if(offer.offerId!==offerId)continue;setCurrentOffer(offer);break;}}},[]);const activateNode=Object(react[\"useCallback\"])(function(targetNode){let offerId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;cancelObjectMover();if(targetNode.parent.pageName==='root'){if(targetNode.children.length){for(const child of targetNode.children){if(!child.isVisible)continue;targetNode=child;break;}}}const nodes=[];let node=targetNode;while(node&&node.pageName!=='root'){nodes.push(node);node=node.parent;}nodes.reverse();setActiveNodes(prevValue=>{const isActive=prevValue.indexOf(targetNode)>=0;const isOpen=targetNode.isOpen;for(const existing of prevValue){existing.deactivate();if(nodes.indexOf(existing)===-1)existing.close();}for(const n of nodes){n.activate();if(n.parent)n.open();if(n===targetNode.parent&&n.children.length)n.open();}if(isActive&&isOpen)targetNode.close();else targetNode.open();return nodes;});if(targetNode.pageId>-1)loadCatalogPage(targetNode.pageId,offerId);},[setActiveNodes,loadCatalogPage,cancelObjectMover]);const openPageById=Object(react[\"useCallback\"])(id=>{setSearchResult(null);if(!isVisible){requestedPage.current.requestById=id;setIsVisible(true);}else{const node=getNodeById(id,rootNode);if(node)activateNode(node);}},[isVisible,rootNode,getNodeById,activateNode]);const openPageByName=Object(react[\"useCallback\"])(name=>{setSearchResult(null);if(!isVisible){requestedPage.current.requestByName=name;setIsVisible(true);}else{const node=getNodeByName(name,rootNode);if(node)activateNode(node);}},[isVisible,rootNode,getNodeByName,activateNode]);const openPageByOfferId=Object(react[\"useCallback\"])(offerId=>{setSearchResult(null);if(!isVisible){requestedPage.current.requestedByOfferId=offerId;setIsVisible(true);}else{const nodes=getNodesByOfferId(offerId);if(!nodes||!nodes.length)return;activateNode(nodes[0],offerId);}},[isVisible,getNodesByOfferId,activateNode]);const refreshBuilderStatus=Object(react[\"useCallback\"])(()=>{},[]);const onCatalogPagesListEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const offers=new Map();const getCatalogNode=(node,depth,parent)=>{const catalogNode=new CatalogNode(node,depth,parent);for(const offerId of catalogNode.offerIds){if(offers.has(offerId))offers.get(offerId).push(catalogNode);else offers.set(offerId,[catalogNode]);}depth++;for(const child of node.children)catalogNode.addChild(getCatalogNode(child,depth,catalogNode));return catalogNode;};setRootNode(getCatalogNode(parser.root,0,null));setOffersToNodes(offers);},[setRootNode,setOffersToNodes]);UseMessageEventHook(nitro_renderer[\"X\" /* CatalogPagesListEvent */],onCatalogPagesListEvent);const onCatalogPageMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.catalogType!==currentType)return;const purchasableOffers=[];for(const offer of parser.offers){const products=[];const productData=GetProductDataForLocalization(offer.localizationId);for(const product of offer.products){const furnitureData=GetFurnitureData(product.furniClassId,product.productType);products.push(new Product_Product(product.productType,product.furniClassId,product.extraParam,product.productCount,productData,furnitureData,product.uniqueLimitedItem,product.uniqueLimitedSeriesSize,product.uniqueLimitedItemsLeft));}if(!products.length)continue;const purchasableOffer=new Offer_Offer(offer.offerId,offer.localizationId,offer.rent,offer.priceCredits,offer.priceActivityPoints,offer.priceActivityPointsType,offer.giftable,offer.clubLevel,products,offer.bundlePurchaseAllowed);if(currentType===CatalogType.NORMAL||purchasableOffer.pricingModel!==Offer_Offer.PRICING_MODEL_BUNDLE&&purchasableOffer.pricingModel!==Offer_Offer.PRICING_MODEL_MULTI)purchasableOffers.push(purchasableOffer);}if(parser.frontPageItems&&parser.frontPageItems.length)setFrontPageItems(parser.frontPageItems);setIsBusy(false);if(pageId===parser.pageId){showCatalogPage(parser.pageId,parser.layoutCode,new PageLocalization_PageLocalization(parser.localization.images.concat(),parser.localization.texts.concat()),purchasableOffers,parser.offerId,parser.acceptSeasonCurrencyAsCredits);}},[currentType,pageId,setFrontPageItems,setIsBusy,showCatalogPage]);UseMessageEventHook(nitro_renderer[\"V\" /* CatalogPageMessageEvent */],onCatalogPageMessageEvent);const onPurchaseOKMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();DispatchUiEvent(new CatalogPurchasedEvent_CatalogPurchasedEvent(parser.offer));},[]);UseMessageEventHook(nitro_renderer[\"Ff\" /* PurchaseOKMessageEvent */],onPurchaseOKMessageEvent);const onPurchaseErrorMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();DispatchUiEvent(new CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent(parser.code));},[]);UseMessageEventHook(nitro_renderer[\"Bf\" /* PurchaseErrorMessageEvent */],onPurchaseErrorMessageEvent);const onPurchaseNotAllowedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();DispatchUiEvent(new CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent(parser.code));},[]);UseMessageEventHook(nitro_renderer[\"Ef\" /* PurchaseNotAllowedMessageEvent */],onPurchaseNotAllowedMessageEvent);const onLimitedEditionSoldOutEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();DispatchUiEvent(new CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent());},[]);UseMessageEventHook(nitro_renderer[\"Xd\" /* LimitedEditionSoldOutEvent */],onLimitedEditionSoldOutEvent);const onProductOfferEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const offerData=parser.offer;if(!offerData||!offerData.products.length)return;const offerProductData=offerData.products[0];if(offerProductData.uniqueLimitedItem){// update unique\n}const products=[];const productData=GetProductDataForLocalization(offerData.localizationId);for(const product of offerData.products){const furnitureData=GetFurnitureData(product.furniClassId,product.productType);products.push(new Product_Product(product.productType,product.furniClassId,product.extraParam,product.productCount,productData,furnitureData,product.uniqueLimitedItem,product.uniqueLimitedSeriesSize,product.uniqueLimitedItemsLeft));}const offer=new Offer_Offer(offerData.offerId,offerData.localizationId,offerData.rent,offerData.priceCredits,offerData.priceActivityPoints,offerData.priceActivityPointsType,offerData.giftable,offerData.clubLevel,products,offerData.bundlePurchaseAllowed);if(!(currentType===CatalogType.NORMAL||offer.pricingModel!==Offer_Offer.PRICING_MODEL_BUNDLE&&offer.pricingModel!==Offer_Offer.PRICING_MODEL_MULTI))return;offer.page=currentPage;setCurrentOffer(offer);if(offer.product&&offer.product.productType===ProductTypeEnum.WALL){setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraData=offer.product.extraParam||null;return newValue;});}// (this._isObjectMoverRequested) && (this._purchasableOffer)\n},[currentType,currentPage,setCurrentOffer,setPurchaseOptions]);UseMessageEventHook(nitro_renderer[\"yf\" /* ProductOfferEvent */],onProductOfferEvent);const onSellablePetPalettesMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const petPalette=new CatalogPetPalette(parser.productCode,parser.palettes.slice());setCatalogOptions(prevValue=>{const petPalettes=[];if(prevValue.petPalettes)petPalettes.push(...prevValue.petPalettes);for(let i=0;i<petPalettes.length;i++){const palette=petPalettes[i];if(palette.breed===petPalette.breed){petPalettes.splice(i,1);break;}}petPalettes.push(petPalette);return{...prevValue,petPalettes};});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"Jh\" /* SellablePetPalettesMessageEvent */],onSellablePetPalettesMessageEvent);const onHabboClubOffersMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCatalogOptions(prevValue=>{const clubOffers=parser.offers;return{...prevValue,clubOffers};});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"Fd\" /* HabboClubOffersMessageEvent */],onHabboClubOffersMessageEvent);const onGuildMembershipsMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCatalogOptions(prevValue=>{const groups=parser.groups;return{...prevValue,groups};});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"Cd\" /* GuildMembershipsMessageEvent */],onGuildMembershipsMessageEvent);const onGiftWrappingConfigurationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCatalogOptions(prevValue=>{const giftConfiguration=new GiftWrappingConfiguration(parser);return{...prevValue,giftConfiguration};});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"Fc\" /* GiftWrappingConfigurationEvent */],onGiftWrappingConfigurationEvent);const onMarketplaceMakeOfferResult=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;let title='';if(parser.result===1){title=LocalizeText('inventory.marketplace.result.title.success');}else{title=LocalizeText('inventory.marketplace.result.title.failure');}const message=LocalizeText(`inventory.marketplace.result.${parser.result}`);NotificationUtilities_NotificationUtilities.simpleAlert(message,NotificationAlertType.DEFAULT,null,null,title);},[]);UseMessageEventHook(nitro_renderer[\"ie\" /* MarketplaceMakeOfferResult */],onMarketplaceMakeOfferResult);const onClubGiftInfoEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCatalogOptions(prevValue=>{const clubGifts=parser;return{...prevValue,clubGifts};});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"gb\" /* ClubGiftInfoEvent */],onClubGiftInfoEvent);const onCatalogPublishedMessageEvent=Object(react[\"useCallback\"])(event=>{const wasVisible=isVisible;resetState();if(wasVisible)NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('catalog.alert.published.description'),NotificationAlertType.ALERT,null,null,LocalizeText('catalog.alert.published.title'));},[isVisible,resetState]);UseMessageEventHook(nitro_renderer[\"Y\" /* CatalogPublishedMessageEvent */],onCatalogPublishedMessageEvent);const onBuildersClubFurniCountMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFurniCount(parser.furniCount);refreshBuilderStatus();},[refreshBuilderStatus]);UseMessageEventHook(nitro_renderer[\"E\" /* BuildersClubFurniCountMessageEvent */],onBuildersClubFurniCountMessageEvent);const onBuildersClubSubscriptionStatusMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFurniLimit(parser._Str_15864);setMaxFurniLimit(parser._Str_24094);setSecondsLeft(parser._Str_3709);setUpdateTime(GetNitroInstance().time);setSecondsLeftWithGrace(parser._Str_24379);refreshBuilderStatus();},[refreshBuilderStatus]);UseMessageEventHook(nitro_renderer[\"I\" /* BuildersClubSubscriptionStatusMessageEvent */],onBuildersClubSubscriptionStatusMessageEvent);const onCatalogPurchasedEvent=Object(react[\"useCallback\"])(event=>{PlaySound(SoundNames.CREDITS);},[]);UseUiEvent(CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS,onCatalogPurchasedEvent);const onRoomEngineObjectPlacedEvent=Object(react[\"useCallback\"])(event=>{if(!objectMoverRequested||event.type!==nitro_renderer[\"qg\" /* RoomEngineObjectPlacedEvent */].PLACED)return;resetPlacedOfferData(true);if(!purchasableOffer){resetObjectMover();return;}let placed=false;const product=purchasableOffer.product;if(event.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL){switch(product.furnitureData.className){case'floor':case'wallpaper':case'landscape':placed=event.placedOnFloor||event.placedOnWall;break;default:placed=event.placedInRoom;break;}}else{placed=event.placedInRoom;}if(!placed){resetObjectMover();return;}setPlacedObjectPurchaseData(new PlacedObjectPurchaseData(event.roomId,event.objectId,event.category,event.wallLocation,event.x,event.y,event.direction,purchasableOffer));switch(currentType){case CatalogType.NORMAL:{switch(event.category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:GetRoomEngine().addFurnitureFloor(event.roomId,event.objectId,product.productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](event.x,event.y,event.z),new nitro_renderer[\"Ui\" /* Vector3d */](event.direction),0,new nitro_renderer[\"Vd\" /* LegacyDataType */]());break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:{switch(product.furnitureData.className){case'floor':case'wallpaper':case'landscape':resetRoomPaint(product.furnitureData.className,product.extraParam);break;default:GetRoomEngine().addFurnitureWall(event.roomId,event.objectId,product.productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](event.x,event.y,event.z),new nitro_renderer[\"Ui\" /* Vector3d */](event.direction*45),0,event.instanceData,0);break;}}}const roomObject=GetRoomEngine().getRoomObject(event.roomId,event.objectId,event.category);if(roomObject)roomObject.model.setValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_ALPHA_MULTIPLIER,0.5);if(catalogSkipPurchaseConfirmation){SendMessageComposer(new nitro_renderer[\"Df\" /* PurchaseFromCatalogComposer */](pageId,purchasableOffer.offerId,product.extraParam,1));if(catalogPlaceMultipleObjects)requestOfferToMover(purchasableOffer);}else{// confirm\nif(catalogPlaceMultipleObjects)requestOfferToMover(purchasableOffer);}break;}case CatalogType.BUILDER:{let pageId=purchasableOffer.page.pageId;if(pageId===DUMMY_PAGE_ID_FOR_OFFER_SEARCH){pageId=-1;}switch(event.category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:SendMessageComposer(new nitro_renderer[\"F\" /* BuildersClubPlaceRoomItemMessageComposer */](pageId,purchasableOffer.offerId,product.extraParam,event.x,event.y,event.direction));break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:SendMessageComposer(new nitro_renderer[\"G\" /* BuildersClubPlaceWallItemMessageComposer */](pageId,purchasableOffer.offerId,product.extraParam,event.wallLocation));break;}if(catalogPlaceMultipleObjects)requestOfferToMover(purchasableOffer);break;}}},[objectMoverRequested,purchasableOffer,catalogPlaceMultipleObjects,catalogSkipPurchaseConfirmation,currentType,pageId,resetPlacedOfferData,resetObjectMover,resetRoomPaint,requestOfferToMover]);UseRoomEngineEvent(nitro_renderer[\"qg\" /* RoomEngineObjectPlacedEvent */].PLACED,onRoomEngineObjectPlacedEvent);const onInventoryFurniAddedEvent=Object(react[\"useCallback\"])(event=>{const roomEngine=GetRoomEngine();if(!placedObjectPurchaseData||placedObjectPurchaseData.productClassId!==event.spriteId||placedObjectPurchaseData.roomId!==roomEngine.activeRoomId)return;switch(event.category){case FurniCategory.FLOOR:{const floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_FLOOR_TYPE);if(placedObjectPurchaseData.extraParam!==floorType)SendMessageComposer(new nitro_renderer[\"Wb\" /* FurniturePlacePaintComposer */](event.id));break;}case FurniCategory.WALL_PAPER:{const wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_WALL_TYPE);if(placedObjectPurchaseData.extraParam!==wallType)SendMessageComposer(new nitro_renderer[\"Wb\" /* FurniturePlacePaintComposer */](event.id));break;}case FurniCategory.LANDSCAPE:{const landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_LANDSCAPE_TYPE);if(placedObjectPurchaseData.extraParam!==landscapeType)SendMessageComposer(new nitro_renderer[\"Wb\" /* FurniturePlacePaintComposer */](event.id));break;}default:SendMessageComposer(new nitro_renderer[\"Vb\" /* FurniturePlaceComposer */](event.id,placedObjectPurchaseData.category,placedObjectPurchaseData.wallLocation,placedObjectPurchaseData.x,placedObjectPurchaseData.y,placedObjectPurchaseData.direction));}if(!catalogPlaceMultipleObjects)resetPlacedOfferData();},[placedObjectPurchaseData,catalogPlaceMultipleObjects,resetPlacedOfferData]);UseUiEvent(InventoryFurniAddedEvent_InventoryFurniAddedEvent.FURNI_ADDED,onInventoryFurniAddedEvent);Object(react[\"useEffect\"])(()=>{return()=>setCurrentOffer(null);},[currentPage]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!rootNode||!requestedPage.current)return;switch(requestedPage.current.requestType){case RequestedPage.REQUEST_TYPE_NONE:if(currentPage)return;if(rootNode.isBranch){for(const child of rootNode.children){if(child&&child.isVisible){activateNode(child);return;}}}return;case RequestedPage.REQUEST_TYPE_ID:openPageById(requestedPage.current.requestById);requestedPage.current.resetRequest();return;case RequestedPage.REQUEST_TYPE_OFFER:openPageByOfferId(requestedPage.current.requestedByOfferId);requestedPage.current.resetRequest();return;case RequestedPage.REQUEST_TYPE_NAME:openPageByName(requestedPage.current.requestByName);requestedPage.current.resetRequest();return;}},[isVisible,rootNode,currentPage,activateNode,openPageById,openPageByOfferId,openPageByName]);Object(react[\"useEffect\"])(()=>{if(!searchResult&&currentPage&&currentPage.pageId===-1)openPageById(previousPageId);},[searchResult,currentPage,previousPageId,openPageById]);Object(react[\"useEffect\"])(()=>{if(!isVisible||rootNode)return;SendMessageComposer(new nitro_renderer[\"mc\" /* GetGiftWrappingConfigurationComposer */]());SendMessageComposer(new nitro_renderer[\"ic\" /* GetClubGiftInfo */]());SendMessageComposer(new nitro_renderer[\"ec\" /* GetCatalogIndexComposer */](currentType));SendMessageComposer(new nitro_renderer[\"H\" /* BuildersClubQueryFurniCountMessageComposer */]());},[isVisible,rootNode,currentType]);Object(react[\"useEffect\"])(()=>{setRoomPreviewer(new nitro_renderer[\"Qg\" /* RoomPreviewer */](GetRoomEngine(),++nitro_renderer[\"Qg\" /* RoomPreviewer */].PREVIEW_COUNTER));return()=>{setRoomPreviewer(prevValue=>{prevValue.dispose();return null;});};},[]);return{isVisible,setIsVisible,isBusy,pageId,previousPageId,currentType,rootNode,offersToNodes,currentPage,setCurrentPage,currentOffer,setCurrentOffer,activeNodes,searchResult,setSearchResult,frontPageItems,roomPreviewer,navigationHidden,setNavigationHidden,purchaseOptions,setPurchaseOptions,catalogOptions,setCatalogOptions,getNodeById,getNodeByName,activateNode,openPageById,openPageByName,openPageByOfferId,requestOfferToMover};};const useCatalog=()=>Object(index_esm[\"a\" /* useBetween */])(useCatalogState);\n// CONCATENATED MODULE: ./src/hooks/catalog/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/friends/useFriends.ts\nconst useFriendsState=()=>{const[friends,setFriends]=Object(react[\"useState\"])([]);const[requests,setRequests]=Object(react[\"useState\"])([]);const[sentRequests,setSentRequests]=Object(react[\"useState\"])([]);const[settings,setSettings]=Object(react[\"useState\"])(null);const onlineFriends=Object(react[\"useMemo\"])(()=>{const onlineFriends=friends.filter(friend=>friend.online);onlineFriends.sort((a,b)=>{if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0;});return onlineFriends;},[friends]);const offlineFriends=Object(react[\"useMemo\"])(()=>{const offlineFriends=friends.filter(friend=>!friend.online);offlineFriends.sort((a,b)=>{if(a.name<b.name)return-1;if(a.name>b.name)return 1;return 0;});return offlineFriends;},[friends]);const followFriend=Object(react[\"useCallback\"])(friend=>SendMessageComposer(new nitro_renderer[\"Fb\" /* FollowFriendMessageComposer */](friend.id)),[]);const updateRelationship=Object(react[\"useCallback\"])((friend,type)=>type!==friend.relationshipStatus&&SendMessageComposer(new nitro_renderer[\"Oh\" /* SetRelationshipStatusComposer */](friend.id,type)),[]);const getFriend=Object(react[\"useCallback\"])(userId=>{for(const friend of friends){if(friend.id===userId)return friend;}return null;},[friends]);const canRequestFriend=Object(react[\"useCallback\"])(userId=>{if(getFriend(userId))return false;if(requests.find(request=>request.requesterUserId===userId))return false;if(sentRequests.indexOf(userId)>=0)return false;return true;},[requests,sentRequests,getFriend]);const requestFriend=Object(react[\"useCallback\"])((userId,userName)=>{if(!canRequestFriend(userId))return false;setSentRequests(prevValue=>{const newSentRequests=[...prevValue];newSentRequests.push(userId);return newSentRequests;});SendMessageComposer(new nitro_renderer[\"Uf\" /* RequestFriendComposer */](userName));},[canRequestFriend]);const requestResponse=Object(react[\"useCallback\"])((requestId,flag)=>{if(requestId===-1&&!flag){SendMessageComposer(new nitro_renderer[\"qb\" /* DeclineFriendMessageComposer */](true));setRequests([]);}else{setRequests(prevValue=>{const newRequests=[...prevValue];const index=newRequests.findIndex(request=>request.id===requestId);if(index===-1)return prevValue;if(flag){SendMessageComposer(new nitro_renderer[\"a\" /* AcceptFriendMessageComposer */](newRequests[index].id));}else{SendMessageComposer(new nitro_renderer[\"qb\" /* DeclineFriendMessageComposer */](false,newRequests[index].id));}newRequests.splice(index,1);return newRequests;});}},[]);const onMessengerInitEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setSettings(new MessengerSettings(parser.userFriendLimit,parser.normalFriendLimit,parser.extendedFriendLimit,parser.categories));SendMessageComposer(new nitro_renderer[\"lc\" /* GetFriendRequestsComposer */]());},[]);UseMessageEventHook(nitro_renderer[\"le\" /* MessengerInitEvent */],onMessengerInitEvent);const onFriendsFragmentEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFriends(prevValue=>{const newValue=[...prevValue];for(const friend of parser.fragment){const index=newValue.findIndex(existingFriend=>existingFriend.id===friend.id);const newFriend=new MessengerFriend();newFriend.populate(friend);if(index>-1)newValue[index]=newFriend;else newValue.push(newFriend);}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Hb\" /* FriendListFragmentEvent */],onFriendsFragmentEvent);const onFriendsUpdateEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFriends(prevValue=>{const newValue=[...prevValue];const processUpdate=friend=>{const index=newValue.findIndex(existingFriend=>existingFriend.id===friend.id);if(index===-1){const newFriend=new MessengerFriend();newFriend.populate(friend);newValue.unshift(newFriend);}else{newValue[index].populate(friend);}};for(const friend of parser.addedFriends)processUpdate(friend);for(const friend of parser.updatedFriends)processUpdate(friend);for(const removedFriendId of parser.removedFriendIds){const index=newValue.findIndex(existingFriend=>existingFriend.id===removedFriendId);if(index>-1)newValue.splice(index,1);}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Ib\" /* FriendListUpdateEvent */],onFriendsUpdateEvent);const onFriendRequestsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setRequests(prevValue=>{const newValue=[...prevValue];for(const request of parser.requests){const index=newValue.findIndex(existing=>existing.requesterUserId===request.requesterUserId);if(index>0){newValue[index]=CloneObject(newValue[index]);newValue[index].populate(request);}else{const newRequest=new MessengerRequest();newRequest.populate(request);newValue.push(newRequest);}}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Jb\" /* FriendRequestsEvent */],onFriendRequestsEvent);const onNewFriendRequestEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const request=parser.request;setRequests(prevValue=>{const newRequests=[...prevValue];const index=newRequests.findIndex(existing=>existing.requesterUserId===request.requesterUserId);if(index===-1){const newRequest=new MessengerRequest();newRequest.populate(request);newRequests.push(newRequest);}return newRequests;});},[]);UseMessageEventHook(nitro_renderer[\"Ne\" /* NewFriendRequestEvent */],onNewFriendRequestEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"ke\" /* MessengerInitComposer */]());},[]);return{friends,requests,sentRequests,settings,onlineFriends,offlineFriends,getFriend,canRequestFriend,requestFriend,requestResponse,followFriend,updateRelationship};};const useFriends=()=>Object(index_esm[\"a\" /* useBetween */])(useFriendsState);\n// CONCATENATED MODULE: ./src/hooks/friends/useMessenger.ts\nconst useMessengerState=()=>{const[messageThreads,setMessageThreads]=Object(react[\"useState\"])([]);const[activeThreadId,setActiveThreadId]=Object(react[\"useState\"])(-1);const[hiddenThreadIds,setHiddenThreadIds]=Object(react[\"useState\"])([]);const[iconState,setIconState]=Object(react[\"useState\"])(MessengerIconState.HIDDEN);const{getFriend=null}=useFriends();const visibleThreads=Object(react[\"useMemo\"])(()=>messageThreads.filter(thread=>hiddenThreadIds.indexOf(thread.threadId)===-1),[messageThreads,hiddenThreadIds]);const activeThread=Object(react[\"useMemo\"])(()=>activeThreadId>0&&visibleThreads.find(thread=>thread.threadId===activeThreadId||null),[activeThreadId,visibleThreads]);const getMessageThread=Object(react[\"useCallback\"])(userId=>{let thread=messageThreads.find(thread=>thread.participant&&thread.participant.id===userId);if(thread)return thread;const friend=getFriend(userId);if(!friend)return null;thread=new MessengerThread_MessengerThread(friend);setMessageThreads(prevValue=>{const newValue=[...prevValue];newValue.push(thread);return newValue;});setHiddenThreadIds(prevValue=>{const index=prevValue.indexOf(thread.threadId);if(index===-1)return prevValue;const newValue=[...prevValue];newValue.splice(index,1);return newValue;});return thread;},[messageThreads,getFriend]);const closeThread=threadId=>{setHiddenThreadIds(prevValue=>{const newValue=[...prevValue];if(newValue.indexOf(threadId)>=0)return prevValue;newValue.push(threadId);return newValue;});};const sendMessage=(thread,text)=>{if(!thread||!text||!text.length)return;SendMessageComposer(new nitro_renderer[\"Kh\" /* SendMessageComposer */](thread.participant.id,text));if(messageThreads.length===1&&thread.groups.length===1)PlaySound(SoundNames.MESSENGER_NEW_THREAD);setMessageThreads(prevValue=>{const newValue=[...prevValue];const index=newValue.findIndex(newThread=>newThread.threadId===thread.threadId);if(index===-1)return prevValue;newValue[index]=CloneObject(newValue[index]);thread=newValue[index];thread.addMessage(GetSessionDataManager().userId,text,0,null,MessengerThreadChat.CHAT);if(activeThreadId===thread.threadId)thread.setRead();return newValue;});};const onNewConsoleMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setMessageThreads(prevValue=>{const newValue=[...prevValue];let existingIndex=newValue.findIndex(newThread=>newThread.participant&&newThread.participant.id===parser.senderId);let thread=null;if(existingIndex===-1){const friend=getFriend(parser.senderId);if(friend){thread=new MessengerThread_MessengerThread(friend);newValue.push(thread);}}else{newValue[existingIndex]=CloneObject(newValue[existingIndex]);thread=newValue[existingIndex];}thread.addMessage(parser.senderId,parser.messageText,parser.secondsSinceSent,parser.extraData);if(activeThreadId===thread.threadId)thread.setRead();if(thread.unreadCount>0)PlaySound(SoundNames.MESSENGER_MESSAGE_RECEIVED);return newValue;});},[activeThreadId,getFriend]);UseMessageEventHook(nitro_renderer[\"Me\" /* NewConsoleMessageEvent */],onNewConsoleMessageEvent);const onRoomInviteEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setMessageThreads(prevValue=>{const newValue=[...prevValue];let existingIndex=newValue.findIndex(newThread=>newThread.participant&&newThread.participant.id===parser.senderId);let thread=null;if(existingIndex===-1){const friend=getFriend(parser.senderId);if(friend){thread=new MessengerThread_MessengerThread(friend);newValue.push(thread);}}else{newValue[existingIndex]=CloneObject(newValue[existingIndex]);thread=newValue[existingIndex];}thread.addMessage(null,parser.messageText,0,null,MessengerThreadChat.ROOM_INVITE);if(activeThreadId===thread.threadId)thread.setRead();if(thread.unreadCount>0)PlaySound(SoundNames.MESSENGER_MESSAGE_RECEIVED);return newValue;});},[activeThreadId,getFriend]);UseMessageEventHook(nitro_renderer[\"Eg\" /* RoomInviteEvent */],onRoomInviteEvent);const onRoomInviteErrorEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const message='Received room invite error: errorCode: '+parser.errorCode+', recipients: '+parser.failedRecipients;NotificationUtilities_NotificationUtilities.simpleAlert(message,NotificationAlertType.DEFAULT,null,null,LocalizeText('friendlist.alert.title'));},[]);UseMessageEventHook(nitro_renderer[\"Dg\" /* RoomInviteErrorEvent */],onRoomInviteErrorEvent);Object(react[\"useEffect\"])(()=>{if(activeThreadId<=0)return;setMessageThreads(prevValue=>{const newValue=[...prevValue];let existingIndex=newValue.findIndex(newThread=>newThread.threadId===activeThreadId);if(existingIndex===-1)return;newValue[existingIndex]=CloneObject(newValue[existingIndex]);newValue[existingIndex].setRead();return newValue;});},[activeThreadId]);Object(react[\"useEffect\"])(()=>{setIconState(prevValue=>{if(!visibleThreads.length)return MessengerIconState.HIDDEN;let isUnread=false;for(const thread of visibleThreads){if(thread.unreadCount>0){isUnread=true;break;}}if(isUnread)return MessengerIconState.UNREAD;return MessengerIconState.SHOW;});},[visibleThreads]);return{messageThreads,activeThread,iconState,visibleThreads,getMessageThread,setActiveThreadId,closeThread,sendMessage};};const useMessenger=()=>Object(index_esm[\"a\" /* useBetween */])(useMessengerState);\n// CONCATENATED MODULE: ./src/hooks/friends/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/useSharedVisibility.ts\nconst useSharedVisibility=()=>{const[activeIds,setActiveIds]=Object(react[\"useState\"])([]);const isVisible=Object(react[\"useMemo\"])(()=>!!activeIds.length,[activeIds]);const activate=Object(react[\"useCallback\"])(()=>{let id=-1;setActiveIds(prevValue=>{const newValue=[...prevValue];id=newValue.length?newValue[newValue.length-1]+1:0;newValue.push(id);return newValue;});return id;},[]);const deactivate=Object(react[\"useCallback\"])(id=>{setActiveIds(prevValue=>{const newValue=[...prevValue];const index=newValue.indexOf(id);if(index===-1)return prevValue;newValue.splice(index,1);return newValue;});},[]);return{isVisible,activate,deactivate};};\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryUnseenTracker.ts\nconst sendResetCategoryMessage=category=>SendMessageComposer(new nitro_renderer[\"qi\" /* UnseenResetCategoryComposer */](category));const sendResetItemsMessage=(category,itemIds)=>SendMessageComposer(new nitro_renderer[\"ri\" /* UnseenResetItemsComposer */](category,...itemIds));const useInventoryUnseenTrackerState=()=>{const[unseenItems,setUnseenItems]=Object(react[\"useState\"])(new Map());const getCount=Object(react[\"useCallback\"])(category=>{var _unseenItems$get;return((_unseenItems$get=unseenItems.get(category))===null||_unseenItems$get===void 0?void 0:_unseenItems$get.length)||0;},[unseenItems]);const getFullCount=Object(react[\"useMemo\"])(()=>{let count=0;for(const key of unseenItems.keys())count+=getCount(key);return count;},[unseenItems,getCount]);const resetCategory=Object(react[\"useCallback\"])(category=>{let didReset=true;setUnseenItems(prevValue=>{if(!prevValue.has(category)){didReset=false;return prevValue;}const newValue=new Map(prevValue);newValue.delete(category);sendResetCategoryMessage(category);return newValue;});return didReset;},[]);const resetItems=Object(react[\"useCallback\"])((category,itemIds)=>{let didReset=true;setUnseenItems(prevValue=>{if(!prevValue.has(category)){didReset=false;return prevValue;}const newValue=new Map(prevValue);const existing=newValue.get(category);if(existing)for(const itemId of itemIds)existing.splice(existing.indexOf(itemId),1);sendResetItemsMessage(category,itemIds);return newValue;});return didReset;},[]);const isUnseen=Object(react[\"useCallback\"])((category,itemId)=>{if(!unseenItems.has(category))return false;const items=unseenItems.get(category);return items.indexOf(itemId)>=0;},[unseenItems]);const removeUnseen=Object(react[\"useCallback\"])((category,itemId)=>{setUnseenItems(prevValue=>{if(!prevValue.has(category))return prevValue;const newValue=new Map(prevValue);const items=newValue.get(category);const index=items.indexOf(itemId);if(index>=0)items.splice(index,1);return newValue;});},[]);const onUnseenItemsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setUnseenItems(prevValue=>{const newValue=new Map(prevValue);for(const category of parser.categories){let existing=newValue.get(category);if(!existing){existing=[];newValue.set(category,existing);}const itemIds=parser.getItemsByCategory(category);for(const itemId of itemIds)existing.indexOf(itemId)===-1&&existing.push(itemId);}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"pi\" /* UnseenItemsEvent */],onUnseenItemsEvent);return{getCount,getFullCount,resetCategory,resetItems,isUnseen,removeUnseen};};const useInventoryUnseenTracker=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryUnseenTrackerState);\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryBadges.ts\nconst useInventoryBadgesState=()=>{const[needsUpdate,setNeedsUpdate]=Object(react[\"useState\"])(true);const[badgeCodes,setBadgeCodes]=Object(react[\"useState\"])([]);const[badgeIds,setBadgeIds]=Object(react[\"useState\"])([]);const[activeBadgeCodes,setActiveBadgeCodes]=Object(react[\"useState\"])([]);const[selectedBadgeCode,setSelectedBadgeCode]=Object(react[\"useState\"])(null);const{isVisible=false,activate=null,deactivate=null}=useSharedVisibility();const{isUnseen=null,resetCategory=null}=useInventoryUnseenTracker();const maxBadgeCount=GetConfiguration('user.badges.max.slots',5);const isWearingBadge=badgeCode=>activeBadgeCodes.indexOf(badgeCode)>=0;const canWearBadges=()=>activeBadgeCodes.length<maxBadgeCount;const toggleBadge=badgeCode=>{setActiveBadgeCodes(prevValue=>{const newValue=[...prevValue];const index=newValue.indexOf(badgeCode);if(index===-1){if(!canWearBadges())return prevValue;newValue.push(badgeCode);}else{newValue.splice(index,1);}const composer=new nitro_renderer[\"Mh\" /* SetActivatedBadgesComposer */]();for(let i=0;i<maxBadgeCount;i++)composer.addActivatedBadge(newValue[i]||null);SendMessageComposer(composer);return newValue;});};const getBadgeId=badgeCode=>{const index=badgeCodes.indexOf(badgeCode);if(index===-1)return 0;return badgeIds[index]||0;};const onBadgesEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const newBadgeCodes=parser.getAllBadgeCodes();const newBadgeIds=[];for(const newBadgeCode of newBadgeCodes)newBadgeIds.push(parser.getBadgeId(newBadgeCode));setBadgeCodes(newBadgeCodes);setBadgeIds(newBadgeIds);setActiveBadgeCodes(parser.getActiveBadgeCodes());},[]);UseMessageEventHook(nitro_renderer[\"v\" /* BadgesEvent */],onBadgesEvent);const onBadgeReceivedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const unseen=isUnseen(UnseenItemCategory.BADGE,parser.badgeId);setBadgeCodes(prevValue=>{const newValue=[...prevValue];if(unseen)newValue.unshift(parser.badgeCode);else newValue.push(parser.badgeCode);return newValue;});setBadgeIds(prevValue=>{const newValue=[...prevValue];if(unseen)newValue.unshift(parser.badgeId);else newValue.push(parser.badgeId);return newValue;});},[isUnseen]);UseMessageEventHook(nitro_renderer[\"u\" /* BadgeReceivedEvent */],onBadgeReceivedEvent);Object(react[\"useEffect\"])(()=>{if(!badgeCodes||!badgeCodes.length)return;setSelectedBadgeCode(prevValue=>{let newValue=prevValue;if(newValue&&badgeCodes.indexOf(newValue)===-1)newValue=null;if(!newValue)newValue=badgeCodes[0];return newValue;});},[badgeCodes]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;return()=>{resetCategory(UnseenItemCategory.BADGE);};},[isVisible,resetCategory]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!needsUpdate)return;SendMessageComposer(new nitro_renderer[\"Rf\" /* RequestBadgesComposer */]());setNeedsUpdate(false);},[isVisible,needsUpdate]);return{badgeCodes,activeBadgeCodes,selectedBadgeCode,setSelectedBadgeCode,isWearingBadge,canWearBadges,toggleBadge,getBadgeId,activate,deactivate};};const useInventoryBadges=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryBadgesState);\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryBots.ts\nconst useInventoryBotsState=()=>{const[needsUpdate,setNeedsUpdate]=Object(react[\"useState\"])(true);const[botItems,setBotItems]=Object(react[\"useState\"])([]);const[selectedBot,setSelectedBot]=Object(react[\"useState\"])(null);const{isVisible=false,activate=null,deactivate=null}=useSharedVisibility();const{isUnseen=null,resetCategory=null}=useInventoryUnseenTracker();const onBotInventoryMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setBotItems(prevValue=>{const newValue=[...prevValue];const existingIds=newValue.map(item=>item.botData.id);const addedDatas=[];for(const botData of parser.items.values())existingIds.indexOf(botData.id)===-1&&addedDatas.push(botData);for(const existingId of existingIds){let remove=true;for(const botData of parser.items.values()){if(botData.id===existingId){remove=false;break;}}if(!remove)continue;const index=newValue.findIndex(item=>item.botData.id===existingId);const botItem=newValue[index];if(index===-1||!botItem)continue;if(getPlacingItemId()===botItem.botData.id){cancelRoomObjectPlacement();CreateLinkEvent('inventory/open');}newValue.splice(index,1);}for(const botData of addedDatas){const botItem={botData};const unseen=isUnseen(UnseenItemCategory.BOT,botData.id);if(unseen)newValue.unshift(botItem);else newValue.push(botItem);}return newValue;});},[isUnseen]);UseMessageEventHook(nitro_renderer[\"A\" /* BotInventoryMessageEvent */],onBotInventoryMessageEvent);const onBotAddedToInventoryEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setBotItems(prevValue=>{const newValue=[...prevValue];const index=newValue.findIndex(item=>item.botData.id===parser.item.id);if(index>=0)return prevValue;const botItem={botData:parser.item};const unseen=isUnseen(UnseenItemCategory.BOT,botItem.botData.id);if(unseen)newValue.unshift(botItem);else newValue.push(botItem);return newValue;});},[isUnseen]);UseMessageEventHook(nitro_renderer[\"y\" /* BotAddedToInventoryEvent */],onBotAddedToInventoryEvent);const onBotRemovedFromInventoryEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setBotItems(prevValue=>{const newValue=[...prevValue];const index=newValue.findIndex(item=>item.botData.id===parser.itemId);if(index===-1)return prevValue;newValue.splice(index,1);if(getPlacingItemId()===parser.itemId){cancelRoomObjectPlacement();CreateLinkEvent('inventory/show');}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"C\" /* BotRemovedFromInventoryEvent */],onBotRemovedFromInventoryEvent);Object(react[\"useEffect\"])(()=>{if(!botItems||!botItems.length)return;setSelectedBot(prevValue=>{let newValue=prevValue;if(newValue&&botItems.indexOf(newValue)===-1)newValue=null;if(!newValue)newValue=botItems[0];return newValue;});},[botItems]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;return()=>{resetCategory(UnseenItemCategory.BOT);};},[isVisible,resetCategory]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!needsUpdate)return;SendMessageComposer(new nitro_renderer[\"dc\" /* GetBotInventoryComposer */]());setNeedsUpdate(false);},[isVisible,needsUpdate]);return{botItems,selectedBot,setSelectedBot,activate,deactivate};};const useInventoryBots=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryBotsState);\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryFurni.ts\nlet furniMsgFragments=null;const useInventoryFurniState=()=>{const[needsUpdate,setNeedsUpdate]=Object(react[\"useState\"])(true);const[groupItems,setGroupItems]=Object(react[\"useState\"])([]);const[selectedItem,setSelectedItem]=Object(react[\"useState\"])(null);const{isVisible=false,activate=null,deactivate=null}=useSharedVisibility();const{isUnseen=null,resetCategory=null}=useInventoryUnseenTracker();const onFurnitureListAddOrUpdateEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setGroupItems(prevValue=>{const newValue=[...prevValue];for(const item of parser.items){let i=0;let groupItem=null;while(i<newValue.length){const group=newValue[i];let j=0;while(j<group.items.length){const furniture=group.items[j];if(furniture.id===item.itemId){furniture.update(item);const newFurniture=[...group.items];newFurniture[j]=furniture;group.items=newFurniture;groupItem=group;break;}j++;}if(groupItem)break;i++;}if(groupItem){groupItem.hasUnseenItems=true;newValue[i]=CloneObject(groupItem);}else{const furniture=new FurnitureItem_FurnitureItem(item);addFurnitureItem(newValue,furniture,isUnseen(UnseenItemCategory.FURNI,item.itemId));DispatchUiEvent(new InventoryFurniAddedEvent_InventoryFurniAddedEvent(furniture.id,furniture.type,furniture.category));}}return newValue;});},[isUnseen]);UseMessageEventHook(nitro_renderer[\"Nb\" /* FurnitureListAddOrUpdateEvent */],onFurnitureListAddOrUpdateEvent);const onFurnitureListEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!furniMsgFragments)furniMsgFragments=new Array(parser.totalFragments);const fragment=mergeFurniFragments(parser.fragment,parser.totalFragments,parser.fragmentNumber,furniMsgFragments);if(!fragment)return;setGroupItems(prevValue=>{const newValue=[...prevValue];const existingIds=getAllItemIds(newValue);for(const existingId of existingIds){if(fragment.get(existingId))continue;let index=0;while(index<newValue.length){const group=newValue[index];const item=group.remove(existingId);if(!item){index++;continue;}if(getPlacingItemId()===item.ref){cancelRoomObjectPlacement();if(!attemptItemPlacement(group)){CreateLinkEvent('inventory/show');}}if(group.getTotalCount()<=0){newValue.splice(index,1);group.dispose();}break;}}for(const itemId of fragment.keys()){if(existingIds.indexOf(itemId)>=0)continue;const parser=fragment.get(itemId);if(!parser)continue;const item=new FurnitureItem_FurnitureItem(parser);addFurnitureItem(newValue,item,isUnseen(UnseenItemCategory.FURNI,itemId));DispatchUiEvent(new InventoryFurniAddedEvent_InventoryFurniAddedEvent(item.id,item.type,item.category));}return newValue;});furniMsgFragments=null;},[isUnseen]);UseMessageEventHook(nitro_renderer[\"Pb\" /* FurnitureListEvent */],onFurnitureListEvent);const onFurnitureListInvalidateEvent=Object(react[\"useCallback\"])(event=>{setNeedsUpdate(true);},[]);UseMessageEventHook(nitro_renderer[\"Qb\" /* FurnitureListInvalidateEvent */],onFurnitureListInvalidateEvent);const onFurnitureListRemovedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setGroupItems(prevValue=>{const newValue=[...prevValue];let index=0;while(index<newValue.length){const group=newValue[index];const item=group.remove(parser.itemId);if(!item){index++;continue;}if(getPlacingItemId()===item.ref){cancelRoomObjectPlacement();if(!attemptItemPlacement(group))CreateLinkEvent('inventory/show');}if(group.getTotalCount()<=0){newValue.splice(index,1);group.dispose();}break;}return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Rb\" /* FurnitureListRemovedEvent */],onFurnitureListRemovedEvent);const onFurniturePostItPlacedEvent=Object(react[\"useCallback\"])(event=>{},[]);UseMessageEventHook(nitro_renderer[\"Xb\" /* FurniturePostItPlacedEvent */],onFurniturePostItPlacedEvent);Object(react[\"useEffect\"])(()=>{if(!groupItems||!groupItems.length)return;setSelectedItem(prevValue=>{let newValue=prevValue;if(newValue&&groupItems.indexOf(newValue)===-1)newValue=null;if(!newValue)newValue=groupItems[0];return newValue;});},[groupItems]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;return()=>{if(resetCategory(UnseenItemCategory.FURNI)){setGroupItems(prevValue=>{const newValue=[...prevValue];for(const newGroup of newValue)newGroup.hasUnseenItems=false;return newValue;});}};},[isVisible,resetCategory]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!needsUpdate)return;SendMessageComposer(new nitro_renderer[\"Ob\" /* FurnitureListComposer */]());setNeedsUpdate(false);},[isVisible,needsUpdate]);return{isVisible,groupItems,setGroupItems,selectedItem,setSelectedItem,activate,deactivate};};const useInventoryFurni=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryFurniState);\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryPets.ts\nlet petMsgFragments=null;const useInventoryPetsState=()=>{const[needsUpdate,setNeedsUpdate]=Object(react[\"useState\"])(true);const[petItems,setPetItems]=Object(react[\"useState\"])([]);const[selectedPet,setSelectedPet]=Object(react[\"useState\"])(null);const{isVisible=false,activate=null,deactivate=null}=useSharedVisibility();const{isUnseen=null,resetCategory=null}=useInventoryUnseenTracker();const onPetInventoryEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!petMsgFragments)petMsgFragments=new Array(parser.totalFragments);const fragment=mergePetFragments(parser.fragment,parser.totalFragments,parser.fragmentNumber,petMsgFragments);if(!fragment)return;setPetItems(prevValue=>{const newValue=[...prevValue];processPetFragment(newValue,fragment,isUnseen);return newValue;});petMsgFragments=null;},[isUnseen]);UseMessageEventHook(nitro_renderer[\"pf\" /* PetInventoryEvent */],onPetInventoryEvent);const onPetAddedToInventoryEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPetItems(prevValue=>{const newValue=[...prevValue];addSinglePetItem(parser.pet,newValue,isUnseen(UnseenItemCategory.PET,parser.pet.id));return newValue;});},[isUnseen]);UseMessageEventHook(nitro_renderer[\"mf\" /* PetAddedToInventoryEvent */],onPetAddedToInventoryEvent);const onPetRemovedFromInventory=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPetItems(prevValue=>{const newValue=[...prevValue];removePetItemById(parser.petId,newValue);return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"sf\" /* PetRemovedFromInventory */],onPetRemovedFromInventory);Object(react[\"useEffect\"])(()=>{if(!petItems||!petItems.length)return;setSelectedPet(prevValue=>{let newValue=prevValue;if(newValue&&petItems.indexOf(newValue)===-1)newValue=null;if(!newValue)newValue=petItems[0];return newValue;});},[petItems]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;return()=>{resetCategory(UnseenItemCategory.PET);};},[isVisible,resetCategory]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!needsUpdate)return;SendMessageComposer(new nitro_renderer[\"Vf\" /* RequestPetsComposer */]());setNeedsUpdate(false);},[isVisible,needsUpdate]);return{petItems,selectedPet,setSelectedPet,activate,deactivate};};const useInventoryPets=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryPetsState);\n// CONCATENATED MODULE: ./src/hooks/inventory/useInventoryTrade.ts\nconst useInventoryTradeState=()=>{const[ownUser,setOwnUser]=Object(react[\"useState\"])(null);const[otherUser,setOtherUser]=Object(react[\"useState\"])(null);const[tradeState,setTradeState]=Object(react[\"useState\"])(TradeState.TRADING_STATE_READY);const{groupItems=[],setGroupItems=null,activate=null,deactivate=null}=useInventoryFurni();const isTrading=tradeState>=TradeState.TRADING_STATE_RUNNING;const progressTrade=()=>{switch(tradeState){case TradeState.TRADING_STATE_RUNNING:if(!otherUser.itemCount&&!ownUser.accepts){NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('inventory.trading.warning.other_not_offering'),null,null,null);}if(ownUser.accepts){SendMessageComposer(new nitro_renderer[\"mi\" /* TradingUnacceptComposer */]());}else{SendMessageComposer(new nitro_renderer[\"Uh\" /* TradingAcceptComposer */]());}return;case TradeState.TRADING_STATE_CONFIRMING:SendMessageComposer(new nitro_renderer[\"bi\" /* TradingConfirmationComposer */]());setTradeState(TradeState.TRADING_STATE_CONFIRMED);return;}};const removeItem=group=>{const item=group.getLastItem();if(!item)return;SendMessageComposer(new nitro_renderer[\"gi\" /* TradingListItemRemoveComposer */](item.id));};const stopTrading=()=>{if(!isTrading)return;switch(tradeState){case TradeState.TRADING_STATE_RUNNING:SendMessageComposer(new nitro_renderer[\"Xh\" /* TradingCloseComposer */]());return;default:SendMessageComposer(new nitro_renderer[\"Wh\" /* TradingCancelComposer */]());return;}};const onTradingAcceptEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!ownUser||!otherUser)return;if(ownUser.userId===parser.userID){setOwnUser(prevValue=>{const newValue=CloneObject(prevValue);newValue.accepts=parser.userAccepts;return newValue;});}else if(otherUser.userId===parser.userID){setOtherUser(prevValue=>{const newValue=CloneObject(prevValue);newValue.accepts=parser.userAccepts;return newValue;});}},[ownUser,otherUser]);UseMessageEventHook(nitro_renderer[\"Vh\" /* TradingAcceptEvent */],onTradingAcceptEvent);const onTradingCloseEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.reason===nitro_renderer[\"Zh\" /* TradingCloseParser */].ERROR_WHILE_COMMIT){TradingNotificationMessage(TradingNotificationType.ERROR_WHILE_COMMIT);}else{if(ownUser&&parser.userID!==ownUser.userId){TradingNotificationMessage(TradingNotificationType.THEY_CANCELLED);}}setOwnUser(null);setOtherUser(null);setTradeState(TradeState.TRADING_STATE_READY);},[ownUser]);UseMessageEventHook(nitro_renderer[\"Yh\" /* TradingCloseEvent */],onTradingCloseEvent);const onTradingCompletedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOwnUser(null);setOtherUser(null);setTradeState(TradeState.TRADING_STATE_READY);},[]);UseMessageEventHook(nitro_renderer[\"ai\" /* TradingCompletedEvent */],onTradingCompletedEvent);const onTradingConfirmationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTradeState(TradeState.TRADING_STATE_COUNTDOWN);},[]);UseMessageEventHook(nitro_renderer[\"ci\" /* TradingConfirmationEvent */],onTradingConfirmationEvent);const onTradingListItemEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const firstUserItems=parseTradeItems(parser.firstUserItemArray);const secondUserItems=parseTradeItems(parser.secondUserItemArray);setOwnUser(prevValue=>{const newValue=CloneObject(prevValue);if(newValue.userId===parser.firstUserID){newValue.creditsCount=parser.firstUserNumCredits;newValue.itemCount=parser.firstUserNumItems;newValue.userItems=firstUserItems;}else{newValue.creditsCount=parser.secondUserNumCredits;newValue.itemCount=parser.secondUserNumItems;newValue.userItems=secondUserItems;}const tradeIds=[];for(const groupItem of newValue.userItems.getValues()){let i=0;while(i<groupItem.getTotalCount()){const item=groupItem.getItemByIndex(i);if(item)tradeIds.push(item.ref);i++;}}setGroupItems(prevValue=>{const newValue=[...prevValue];for(const groupItem of newValue)groupItem.lockItemIds(tradeIds);return newValue;});return newValue;});setOtherUser(prevValue=>{const newValue=CloneObject(prevValue);if(newValue.userId===parser.firstUserID){newValue.creditsCount=parser.firstUserNumCredits;newValue.itemCount=parser.firstUserNumItems;newValue.userItems=firstUserItems;}else{newValue.creditsCount=parser.secondUserNumCredits;newValue.itemCount=parser.secondUserNumItems;newValue.userItems=secondUserItems;}return newValue;});},[setGroupItems]);UseMessageEventHook(nitro_renderer[\"fi\" /* TradingListItemEvent */],onTradingListItemEvent);const onTradingNotOpenEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();},[]);UseMessageEventHook(nitro_renderer[\"hi\" /* TradingNotOpenEvent */],onTradingNotOpenEvent);const onTradingOpenEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const firstUser=new TradeUserData_TradeUserData();const firstUserData=GetRoomSession().userDataManager.getUserData(parser.userID);firstUser.userItems=new nitro_renderer[\"g\" /* AdvancedMap */]();const secondUser=new TradeUserData_TradeUserData();const secondUserData=GetRoomSession().userDataManager.getUserData(parser.otherUserID);secondUser.userItems=new nitro_renderer[\"g\" /* AdvancedMap */]();if(firstUserData.webID===GetSessionDataManager().userId){firstUser.userId=firstUserData.webID;firstUser.userName=firstUserData.name;firstUser.canTrade=parser.userCanTrade;secondUser.userId=secondUserData.webID;secondUser.userName=secondUserData.name;secondUser.canTrade=parser.otherUserCanTrade;}else if(secondUserData.webID===GetSessionDataManager().userId){firstUser.userId=secondUserData.webID;firstUser.userName=secondUserData.name;firstUser.canTrade=parser.otherUserCanTrade;secondUser.userId=firstUserData.webID;secondUser.userName=firstUserData.name;secondUser.canTrade=parser.userCanTrade;}setOwnUser(firstUser);setOtherUser(secondUser);setTradeState(TradeState.TRADING_STATE_RUNNING);},[]);UseMessageEventHook(nitro_renderer[\"ji\" /* TradingOpenEvent */],onTradingOpenEvent);const onTradingOpenFailedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();TradingNotificationMessage(parser.reason,parser.otherUserName);},[]);UseMessageEventHook(nitro_renderer[\"ki\" /* TradingOpenFailedEvent */],onTradingOpenFailedEvent);const onTradingOtherNotAllowedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();TradingNotificationMessage(TradingNotificationType.THEY_NOT_ALLOWED);},[]);UseMessageEventHook(nitro_renderer[\"li\" /* TradingOtherNotAllowedEvent */],onTradingOtherNotAllowedEvent);const onTradingYouAreNotAllowedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();TradingNotificationMessage(TradingNotificationType.YOU_NOT_ALLOWED);},[]);UseMessageEventHook(nitro_renderer[\"ni\" /* TradingYouAreNotAllowedEvent */],onTradingYouAreNotAllowedEvent);Object(react[\"useEffect\"])(()=>{if(tradeState===TradeState.TRADING_STATE_READY)return;const id=activate();return()=>deactivate(id);},[tradeState,activate,deactivate]);return{ownUser,otherUser,tradeState,setTradeState,isTrading,groupItems,progressTrade,removeItem,stopTrading};};const useInventoryTrade=()=>Object(index_esm[\"a\" /* useBetween */])(useInventoryTradeState);\n// CONCATENATED MODULE: ./src/hooks/inventory/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/navigator/useSharedNavigatorData.ts\nconst useNavigatorData=()=>{return Object(react[\"useState\"])({settingsReceived:false,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:false,currentRoomId:0,currentRoomIsStaffPick:false,createdFlatId:0,avatarId:0,roomPicker:false,eventMod:false,currentRoomRating:0,canRate:true});};const useSharedNavigatorData=()=>Object(index_esm[\"a\" /* useBetween */])(useNavigatorData);\n// CONCATENATED MODULE: ./src/hooks/navigator/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/purse/usePurse.ts\nconst usePurseState=()=>{const[purse,setPurse]=Object(react[\"useState\"])(new Purse_Purse());const hcDisabled=Object(react[\"useMemo\"])(()=>GetConfiguration('hc.disabled',false),[]);const clubStatus=Object(react[\"useMemo\"])(()=>{if(hcDisabled||purse.clubDays>0)return ClubStatus.ACTIVE;if(purse.pastVipDays>0||purse.pastVipDays>0)return ClubStatus.EXPIRED;return ClubStatus.NONE;},[purse,hcDisabled]);const getCurrencyAmount=type=>{if(type===-1)return purse.credits;for(const[key,value]of purse.activityPoints.entries()){if(key!==type)continue;return value;}return 0;};const onUserCreditsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPurse(prevValue=>{const newValue=CloneObject(prevValue);newValue.credits=parseFloat(parser.credits);if(prevValue.credits!==newValue.credits)PlaySound(SoundNames.CREDITS);return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"yi\" /* UserCreditsEvent */],onUserCreditsEvent);const onUserCurrencyEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPurse(prevValue=>{const newValue=CloneObject(prevValue);newValue.activityPoints=parser.currencies;return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Ai\" /* UserCurrencyEvent */],onUserCurrencyEvent);const onActivityPointNotificationMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPurse(prevValue=>{const newValue=CloneObject(prevValue);newValue.activityPoints=new Map(newValue.activityPoints);newValue.activityPoints.set(parser.type,parser.amount);if(parser.type===0)PlaySound(SoundNames.DUCKETS);return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"f\" /* ActivityPointNotificationMessageEvent */],onActivityPointNotificationMessageEvent);const onUserSubscriptionEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const productName=parser.productName;if(productName!=='club_habbo'&&productName!=='habbo_club')return;setPurse(prevValue=>{const newValue=CloneObject(prevValue);newValue.clubDays=Math.max(0,parser.daysToPeriodEnd);newValue.clubPeriods=Math.max(0,parser.periodsSubscribedAhead);newValue.isVip=parser.isVip;newValue.pastClubDays=parser.pastClubDays;newValue.pastVipDays=parser.pastVipDays;newValue.isExpiring=parser.responseType===nitro_renderer[\"Si\" /* UserSubscriptionParser */].RESPONSE_TYPE_DISCOUNT_AVAILABLE?true:false;newValue.minutesUntilExpiration=parser.minutesUntilExpiration;newValue.minutesSinceLastModified=parser.minutesSinceLastModified;return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Ri\" /* UserSubscriptionEvent */],onUserSubscriptionEvent);Object(react[\"useEffect\"])(()=>{if(hcDisabled)return;SendMessageComposer(new nitro_renderer[\"Qi\" /* UserSubscriptionComposer */]('habbo_club'));const interval=setInterval(()=>SendMessageComposer(new nitro_renderer[\"Qi\" /* UserSubscriptionComposer */]('habbo_club')),50000);return()=>clearInterval(interval);},[hcDisabled]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"zi\" /* UserCurrencyComposer */]());},[]);return{purse,hcDisabled,clubStatus,getCurrencyAmount};};const usePurse=()=>Object(index_esm[\"a\" /* useBetween */])(usePurseState);\n// CONCATENATED MODULE: ./src/hooks/purse/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/rooms/widgets/useDoorbellWidget.ts\nconst useDoorbellWidgetState=()=>{const[users,setUsers]=Object(react[\"useState\"])([]);const addUser=Object(react[\"useCallback\"])(userName=>{if(users.indexOf(userName)>=0)return;setUsers([...users,userName]);},[users]);const removeUser=Object(react[\"useCallback\"])(userName=>{const index=users.indexOf(userName);if(index===-1)return;const newUsers=[...users];newUsers.splice(index,1);setUsers(newUsers);},[users]);const answer=Object(react[\"useCallback\"])((userName,flag)=>{GetRoomSession().sendDoorbellApprovalMessage(userName,flag);removeUser(userName);},[removeUser]);const onRoomSessionDoorbellEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].DOORBELL:addUser(event.userName);return;case nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_REJECTED:case nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_ACCEPTED:removeUser(event.userName);return;}},[addUser,removeUser]);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].DOORBELL,onRoomSessionDoorbellEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_REJECTED,onRoomSessionDoorbellEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_ACCEPTED,onRoomSessionDoorbellEvent);return{users,addUser,removeUser,answer};};const useDoorbellWidget=useDoorbellWidgetState;\n// CONCATENATED MODULE: ./src/hooks/rooms/widgets/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/rooms/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/session/useSessionInfo.ts\nconst useSessionInfoState=()=>{const[userInfo,setUserInfo]=Object(react[\"useState\"])(null);const[userFigure,setUserFigure]=Object(react[\"useState\"])(null);const onUserInfoEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setUserInfo(parser.userInfo);setUserFigure(parser.userInfo.figure);},[]);UseMessageEventHook(nitro_renderer[\"Fi\" /* UserInfoEvent */],onUserInfoEvent);const onUserFigureEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setUserFigure(parser.figure);},[]);UseMessageEventHook(nitro_renderer[\"zb\" /* FigureUpdateEvent */],onUserFigureEvent);return{userInfo,userFigure};};const useSessionInfo=()=>Object(index_esm[\"a\" /* useBetween */])(useSessionInfoState);\n// CONCATENATED MODULE: ./src/hooks/session/index.ts\n\n// CONCATENATED MODULE: ./src/hooks/UseMountEffect.tsx\n// eslint-disable-next-line react-hooks/exhaustive-deps\nconst useEffectOnce=effect=>Object(react[\"useEffect\"])(effect,[]);const UseMountEffect=fn=>useEffectOnce(()=>fn());\n// CONCATENATED MODULE: ./src/hooks/index.ts\n\n// CONCATENATED MODULE: ./src/api/utils/PlaySound.ts\nlet canPlaySound=false;const PlaySound=sampleCode=>{if(!canPlaySound)return;DispatchMainEvent(new NitroSoundEvent[\"a\" /* NitroSoundEvent */](NitroSoundEvent[\"a\" /* NitroSoundEvent */].PLAY_SOUND,sampleCode));};const PlaySound_eventTypes=[nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK];const startListening=()=>{const stopListening=()=>PlaySound_eventTypes.forEach(type=>window.removeEventListener(type,onEvent));const onEvent=event=>(canPlaySound=true)&&stopListening();PlaySound_eventTypes.forEach(type=>window.addEventListener(type,onEvent));};startListening();\n// CONCATENATED MODULE: ./src/api/inventory/FurniCategory.ts\nclass FurniCategory{}FurniCategory.DEFAULT=1;FurniCategory.WALL_PAPER=2;FurniCategory.FLOOR=3;FurniCategory.LANDSCAPE=4;FurniCategory.POST_IT=5;FurniCategory.POSTER=6;FurniCategory.SOUND_SET=7;FurniCategory.TRAX_SONG=8;FurniCategory.PRESENT=9;FurniCategory.ECOTRON_BOX=10;FurniCategory.TROPHY=11;FurniCategory.CREDIT_FURNI=12;FurniCategory.PET_SHAMPOO=13;FurniCategory.PET_CUSTOM_PART=14;FurniCategory.PET_CUSTOM_PART_SHAMPOO=15;FurniCategory.PET_SADDLE=16;FurniCategory.GUILD_FURNI=17;FurniCategory.GAME_FURNI=18;FurniCategory.MONSTERPLANT_SEED=19;FurniCategory.MONSTERPLANT_REVIVAL=20;FurniCategory.MONSTERPLANT_REBREED=21;FurniCategory.MONSTERPLANT_FERTILIZE=22;FurniCategory.FIGURE_PURCHASABLE_SET=23;\n// CONCATENATED MODULE: ./src/api/inventory/FurnitureItem.ts\nclass FurnitureItem_FurnitureItem{constructor(parser){this._expirationTimeStamp=void 0;this._isWallItem=void 0;this._songId=void 0;this._locked=void 0;this._id=void 0;this._ref=void 0;this._category=void 0;this._type=void 0;this._stuffData=void 0;this._extra=void 0;this._recyclable=void 0;this._tradeable=void 0;this._groupable=void 0;this._sellable=void 0;this._secondsToExpiration=void 0;this._hasRentPeriodStarted=void 0;this._creationDay=void 0;this._creationMonth=void 0;this._creationYear=void 0;this._slotId=void 0;this._isRented=void 0;this._flatId=void 0;if(!parser)return;this._locked=false;this._id=parser.itemId;this._type=parser.spriteId;this._ref=parser.ref;this._category=parser.category;this._groupable=parser.isGroupable&&!parser.rentable;this._tradeable=parser.tradable;this._recyclable=parser.isRecycleable;this._sellable=parser.sellable;this._stuffData=parser.stuffData;this._extra=parser.extra;this._secondsToExpiration=parser.secondsToExpiration;this._expirationTimeStamp=parser.expirationTimeStamp;this._hasRentPeriodStarted=parser.hasRentPeriodStarted;this._creationDay=parser.creationDay;this._creationMonth=parser.creationMonth;this._creationYear=parser.creationYear;this._slotId=parser.slotId;this._songId=parser.songId;this._flatId=parser.flatId;this._isRented=parser.rentable;this._isWallItem=parser.isWallItem;}get rentable(){return this._isRented;}get id(){return this._id;}get ref(){return this._ref;}get category(){return this._category;}get type(){return this._type;}get stuffData(){return this._stuffData;}set stuffData(k){this._stuffData=k;}get extra(){return this._extra;}get recyclable(){return this._recyclable;}get isTradable(){return this._tradeable;}get isGroupable(){return this._groupable;}get sellable(){return this._sellable;}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let time=-1;if(this._hasRentPeriodStarted){time=this._secondsToExpiration-(GetNitroInstance().time-this._expirationTimeStamp)/1000;if(time<0)time=0;}else{time=this._secondsToExpiration;}return time;}get creationDay(){return this._creationDay;}get creationMonth(){return this._creationMonth;}get creationYear(){return this._creationYear;}get slotId(){return this._slotId;}get songId(){return this._songId;}get locked(){return this._locked;}set locked(k){this._locked=k;}get flatId(){return this._flatId;}get isWallItem(){return this._isWallItem;}get hasRentPeriodStarted(){return this._hasRentPeriodStarted;}get expirationTimeStamp(){return this._expirationTimeStamp;}update(parser){this._type=parser.spriteId;this._ref=parser.ref;this._category=parser.category;this._groupable=parser.isGroupable&&!parser.rentable;this._tradeable=parser.tradable;this._recyclable=parser.isRecycleable;this._sellable=parser.sellable;this._stuffData=parser.stuffData;this._extra=parser.extra;this._secondsToExpiration=parser.secondsToExpiration;this._expirationTimeStamp=parser.expirationTimeStamp;this._hasRentPeriodStarted=parser.hasRentPeriodStarted;this._creationDay=parser.creationDay;this._creationMonth=parser.creationMonth;this._creationYear=parser.creationYear;this._slotId=parser.slotId;this._songId=parser.songId;this._flatId=parser.flatId;this._isRented=parser.rentable;this._isWallItem=parser.isWallItem;}clone(){const item=new FurnitureItem_FurnitureItem(null);item._expirationTimeStamp=this._expirationTimeStamp;item._isWallItem=this._isWallItem;item._songId=this._songId;item._locked=this._locked;item._id=this._id;item._ref=this._ref;item._category=this._category;item._type=this._type;item._stuffData=this._stuffData;item._extra=this._extra;item._recyclable=this._recyclable;item._tradeable=this._tradeable;item._groupable=this._groupable;item._sellable=this._sellable;item._secondsToExpiration=this._secondsToExpiration;item._hasRentPeriodStarted=this._hasRentPeriodStarted;item._creationDay=this._creationDay;item._creationMonth=this._creationMonth;item._creationYear=this._creationYear;item._slotId=this._slotId;item._isRented=this._isRented;item._flatId=this._flatId;return item;}}\n// CONCATENATED MODULE: ./src/api/inventory/GroupItem.ts\nclass GroupItem_GroupItem{constructor(){let type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;let category=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;let roomEngine=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let stuffData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let extra=arguments.length>4&&arguments[4]!==undefined?arguments[4]:-1;this._type=void 0;this._category=void 0;this._roomEngine=void 0;this._stuffData=void 0;this._extra=void 0;this._isWallItem=void 0;this._iconUrl=void 0;this._name=void 0;this._description=void 0;this._locked=void 0;this._selected=void 0;this._hasUnseenItems=void 0;this._items=void 0;this._type=type;this._category=category;this._roomEngine=roomEngine;this._stuffData=stuffData;this._extra=extra;this._isWallItem=false;this._iconUrl=null;this._name=null;this._description=null;this._locked=false;this._selected=false;this._hasUnseenItems=false;this._items=[];}clone(){const groupItem=new GroupItem_GroupItem();groupItem._type=this._type;groupItem._category=this._category;groupItem._roomEngine=this._roomEngine;groupItem._stuffData=this._stuffData;groupItem._extra=this._extra;groupItem._isWallItem=this._isWallItem;groupItem._iconUrl=this._iconUrl;groupItem._name=this._name;groupItem._description=this._description;groupItem._locked=this._locked;groupItem._selected=this._selected;groupItem._hasUnseenItems=this._hasUnseenItems;groupItem._items=this._items;return groupItem;}prepareGroup(){this.setIcon();this.setName();this.setDescription();}dispose(){}getItemByIndex(index){return this._items[index];}getItemById(id){for(const item of this._items){if(item.id!==id)continue;return item;}return null;}getTradeItems(count){const items=[];const furnitureItem=this.getLastItem();if(!furnitureItem)return items;let found=0;let i=0;while(i<this._items.length){if(found>=count)break;const item=this.getItemByIndex(i);if(!item.locked&&item.isTradable&&item.type===furnitureItem.type){items.push(item);found++;}i++;}return items;}push(item){const items=[...this._items];let index=0;while(index<items.length){let existingItem=items[index];if(existingItem.id===item.id){existingItem=existingItem.clone();existingItem.locked=false;items.splice(index,1);items.push(existingItem);this._items=items;return;}index++;}items.push(item);this._items=items;if(this._items.length===1)this.prepareGroup();}pop(){const items=[...this._items];let item=null;if(items.length>0){const index=items.length-1;item=items[index];items.splice(index,1);}this._items=items;return item;}remove(k){const items=[...this._items];let index=0;while(index<items.length){let existingItem=items[index];if(existingItem.id===k){items.splice(index,1);this._items=items;return existingItem;}index++;}return null;}getTotalCount(){if(this._category===FurniCategory.POST_IT){let count=0;let index=0;while(index<this._items.length){const item=this.getItemByIndex(index);count=count+parseInt(item.stuffData.getLegacyString());index++;}return count;}return this._items.length;}getUnlockedCount(){if(this.category===FurniCategory.POST_IT)return this.getTotalCount();let count=0;let index=0;while(index<this._items.length){const item=this.getItemByIndex(index);if(!item.locked)count++;index++;}return count;}getLastItem(){if(!this._items.length)return null;const item=this.getItemByIndex(this._items.length-1);return item;}unlockAllItems(){const items=[...this._items];let index=0;while(index<items.length){const item=items[index];if(item.locked){const newItem=item.clone();newItem.locked=false;items[index]=newItem;}index++;}this._items=items;}lockItemIds(itemIds){const items=[...this._items];let index=0;let updated=false;while(index<items.length){const item=items[index];const locked=itemIds.indexOf(item.ref)>=0;if(item.locked!==locked){updated=true;const newItem=item.clone();newItem.locked=locked;items[index]=newItem;}index++;}this._items=items;return updated;}setName(){const k=this.getLastItem();if(!k){this._name='';return;}let key='';switch(this._category){case FurniCategory.POSTER:key='poster_'+k.stuffData.getLegacyString()+'_name';break;case FurniCategory.TRAX_SONG:this._name='SONG_NAME';return;default:if(this.isWallItem){key='wallItem.name.'+k.type;}else{key='roomItem.name.'+k.type;}}this._name=LocalizeText(key);}setDescription(){this._description='';}setIcon(){if(this._iconUrl)return;let url=null;if(this.isWallItem){url=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString());}else{url=this._roomEngine.getFurnitureFloorIconUrl(this._type);}if(!url)return;this._iconUrl=url;}get type(){return this._type;}get category(){return this._category;}get stuffData(){return this._stuffData;}get extra(){return this._extra;}get iconUrl(){return this._iconUrl;}get name(){return this._name;}get description(){return this._description;}get hasUnseenItems(){return this._hasUnseenItems;}set hasUnseenItems(flag){this._hasUnseenItems=flag;}get locked(){return this._locked;}set locked(flag){this._locked=flag;}get selected(){return this._selected;}set selected(flag){this._selected=flag;}get isWallItem(){const item=this.getItemByIndex(0);return item?item.isWallItem:false;}get isGroupable(){const item=this.getItemByIndex(0);return item?item.isGroupable:false;}get isSellable(){const item=this.getItemByIndex(0);return item?item.sellable:false;}get items(){return this._items;}set items(items){this._items=items;}}\n// CONCATENATED MODULE: ./src/api/inventory/FurnitureUtilities.ts\nconst createGroupItem=function(type,category,stuffData){let extra=arguments.length>3&&arguments[3]!==undefined?arguments[3]:NaN;return new GroupItem_GroupItem(type,category,GetRoomEngine(),stuffData,extra);};const addSingleFurnitureItem=(set,item,unseen)=>{const groupItems=[];for(const groupItem of set){if(groupItem.type===item.type)groupItems.push(groupItem);}for(const groupItem of groupItems){if(groupItem.getItemById(item.id))return groupItem;}const groupItem=createGroupItem(item.type,item.category,item.stuffData,item.extra);groupItem.push(item);if(unseen){groupItem.hasUnseenItems=true;set.unshift(groupItem);}else{set.push(groupItem);}return groupItem;};const addGroupableFurnitureItem=(set,item,unseen)=>{let existingGroup=null;for(const groupItem of set){if(groupItem.type===item.type&&groupItem.isWallItem===item.isWallItem&&groupItem.isGroupable){if(item.category===FurniCategory.POSTER){if(groupItem.stuffData.getLegacyString()===item.stuffData.getLegacyString()){existingGroup=groupItem;break;}}else if(item.category===FurniCategory.GUILD_FURNI){if(item.stuffData.compare(groupItem.stuffData)){existingGroup=groupItem;break;}}else{existingGroup=groupItem;break;}}}if(existingGroup){existingGroup.push(item);if(unseen){existingGroup.hasUnseenItems=true;const index=set.indexOf(existingGroup);if(index>=0)set.splice(index,1);set.unshift(existingGroup);}return existingGroup;}existingGroup=createGroupItem(item.type,item.category,item.stuffData,item.extra);existingGroup.push(item);if(unseen){existingGroup.hasUnseenItems=true;set.unshift(existingGroup);}else{set.push(existingGroup);}return existingGroup;};const addFurnitureItem=(set,item,unseen)=>{if(!item.isGroupable){addSingleFurnitureItem(set,item,unseen);}else{addGroupableFurnitureItem(set,item,unseen);}};const mergeFurniFragments=(fragment,totalFragments,fragmentNumber,fragments)=>{if(totalFragments===1)return fragment;fragments[fragmentNumber]=fragment;for(const frag of fragments){if(!frag)return null;}const merged=new Map();for(const frag of fragments){for(const[key,value]of frag)merged.set(key,value);frag.clear();}fragments=null;return merged;};const getAllItemIds=groupItems=>{const itemIds=[];for(const groupItem of groupItems){let totalCount=groupItem.getTotalCount();if(groupItem.category===FurniCategory.POST_IT)totalCount=1;let i=0;while(i<totalCount){itemIds.push(groupItem.getItemByIndex(i).id);i++;}}return itemIds;};\n// CONCATENATED MODULE: ./src/api/inventory/IBotItem.ts\n\n// CONCATENATED MODULE: ./src/api/inventory/IFurnitureItem.ts\n\n// CONCATENATED MODULE: ./src/api/inventory/InventoryUtilities.ts\nlet InventoryUtilities_objectMoverRequested=false;let itemIdInPlacing=-1;const isObjectMoverRequested=()=>InventoryUtilities_objectMoverRequested;const InventoryUtilities_setObjectMoverRequested=flag=>InventoryUtilities_objectMoverRequested=flag;const getPlacingItemId=()=>itemIdInPlacing;const setPlacingItemId=id=>itemIdInPlacing=id;const cancelRoomObjectPlacement=()=>{if(getPlacingItemId()===-1)return;GetRoomEngine().cancelRoomObjectPlacement();setPlacingItemId(-1);InventoryUtilities_setObjectMoverRequested(false);};const attemptPetPlacement=function(petItem){let flag=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const petData=petItem.petData;if(!petData)return false;const session=GetRoomSessionManager().getSession(1);if(!session)return false;if(!session.isRoomOwner&&!session.allowPets)return false;CreateLinkEvent('inventory/hide');if(GetRoomEngine().processRoomObjectPlacement(nitro_renderer[\"Lg\" /* RoomObjectPlacementSource */].INVENTORY,-petData.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,nitro_renderer[\"Mg\" /* RoomObjectType */].PET,petData.figureData.figuredata)){setPlacingItemId(petData.id);InventoryUtilities_setObjectMoverRequested(true);}return true;};const attemptItemPlacement=function(groupItem){let flag=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!groupItem||!groupItem.getUnlockedCount())return false;const item=groupItem.getLastItem();if(!item)return false;if(item.category===FurniCategory.FLOOR||item.category===FurniCategory.WALL_PAPER||item.category===FurniCategory.LANDSCAPE){if(flag)return false;SendMessageComposer(new nitro_renderer[\"Wb\" /* FurniturePlacePaintComposer */](item.id));return false;}else{CreateLinkEvent('inventory/hide');let category=0;let isMoving=false;if(item.isWallItem)category=nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL;else category=nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR;if(item.category===FurniCategory.POSTER)// or external image from furnidata\n{isMoving=GetRoomEngine().processRoomObjectPlacement(nitro_renderer[\"Lg\" /* RoomObjectPlacementSource */].INVENTORY,item.id,category,item.type,item.stuffData.getLegacyString());}else{isMoving=GetRoomEngine().processRoomObjectPlacement(nitro_renderer[\"Lg\" /* RoomObjectPlacementSource */].INVENTORY,item.id,category,item.type,item.extra.toString(),item.stuffData);}if(isMoving){setPlacingItemId(item.ref);InventoryUtilities_setObjectMoverRequested(true);}}return true;};const attemptBotPlacement=function(botItem){let flag=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;const botData=botItem.botData;if(!botData)return false;const session=GetRoomSessionManager().getSession(1);if(!session||!session.isRoomOwner)return false;CreateLinkEvent('inventory/hide');if(GetRoomEngine().processRoomObjectPlacement(nitro_renderer[\"Lg\" /* RoomObjectPlacementSource */].INVENTORY,-botData.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,nitro_renderer[\"Mg\" /* RoomObjectType */].RENTABLE_BOT,botData.figure)){setPlacingItemId(botData.id);InventoryUtilities_setObjectMoverRequested(true);}return true;};\n// CONCATENATED MODULE: ./src/api/inventory/IPetItem.ts\n\n// CONCATENATED MODULE: ./src/api/inventory/unseen/IUnseenItemTracker.ts\n\n// CONCATENATED MODULE: ./src/api/inventory/unseen/UnseenItemCategory.ts\nclass UnseenItemCategory{}UnseenItemCategory.FURNI=1;UnseenItemCategory.RENTABLE=2;UnseenItemCategory.PET=3;UnseenItemCategory.BADGE=4;UnseenItemCategory.BOT=5;UnseenItemCategory.GAMES=6;\n// CONCATENATED MODULE: ./src/api/inventory/unseen/index.ts\n\n// CONCATENATED MODULE: ./src/api/inventory/PetUtilities.ts\nconst getAllPetIds=petItems=>petItems.map(item=>item.petData.id);const addSinglePetItem=function(petData,set){let unseen=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const petItem={petData};if(unseen){//petItem.isUnseen = true;\nset.unshift(petItem);}else{set.push(petItem);}return petItem;};const removePetItemById=(id,set)=>{let index=0;while(index<set.length){const petItem=set[index];if(petItem&&petItem.petData.id===id){if(getPlacingItemId()===petItem.petData.id){cancelRoomObjectPlacement();CreateLinkEvent('inventory/open');}set.splice(index,1);return petItem;}index++;}return null;};const processPetFragment=(set,fragment,isUnseen)=>{const existingIds=getAllPetIds(set);const addedIds=[];const removedIds=[];for(const key of fragment.keys())existingIds.indexOf(key)===-1&&addedIds.push(key);for(const itemId of existingIds)!fragment.get(itemId)&&removedIds.push(itemId);const emptyExistingSet=existingIds.length===0;for(const id of removedIds)removePetItemById(id,set);for(const id of addedIds){const parser=fragment.get(id);if(!parser)continue;addSinglePetItem(parser,set,isUnseen(UnseenItemCategory.PET,parser.id));}return set;};const mergePetFragments=(fragment,totalFragments,fragmentNumber,fragments)=>{if(totalFragments===1)return fragment;fragments[fragmentNumber]=fragment;for(const frag of fragments){if(!frag)return null;}const merged=new Map();for(const frag of fragments){for(const[key,value]of frag)merged.set(key,value);frag.clear();}fragments=null;return merged;};\n// CONCATENATED MODULE: ./src/api/inventory/TradeState.ts\nclass TradeState{}TradeState.TRADING_STATE_READY=0;TradeState.TRADING_STATE_RUNNING=1;TradeState.TRADING_STATE_COUNTDOWN=2;TradeState.TRADING_STATE_CONFIRMING=3;TradeState.TRADING_STATE_CONFIRMED=4;TradeState.TRADING_STATE_COMPLETED=5;TradeState.TRADING_STATE_CANCELLED=6;\n// CONCATENATED MODULE: ./src/api/inventory/TradeUserData.ts\nclass TradeUserData_TradeUserData{constructor(){let userId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;let userName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';let userItems=arguments.length>2&&arguments[2]!==undefined?arguments[2]:new nitro_renderer[\"g\" /* AdvancedMap */]();let itemCount=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;let creditsCount=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;let accepts=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;let canTrade=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;this.userId=userId;this.userName=userName;this.userItems=userItems;this.itemCount=itemCount;this.creditsCount=creditsCount;this.accepts=accepts;this.canTrade=canTrade;}}\n// CONCATENATED MODULE: ./src/api/inventory/TradingNotificationType.ts\nclass TradingNotificationType{}TradingNotificationType.ALERT_SCAM=0;TradingNotificationType.HOTEL_TRADING_DISABLED=1;TradingNotificationType.YOU_NOT_ALLOWED=2;TradingNotificationType.THEY_NOT_ALLOWED=4;TradingNotificationType.ROOM_DISABLED=6;TradingNotificationType.YOU_OPEN=7;TradingNotificationType.THEY_OPEN=8;TradingNotificationType.ERROR_WHILE_COMMIT=9;TradingNotificationType.THEY_CANCELLED=10;\n// CONCATENATED MODULE: ./src/api/inventory/TradingNotificationMessage.ts\nconst TradingNotificationMessage=function(type){let otherUsername=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';switch(type){case TradingNotificationType.ALERT_SCAM:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('inventory.trading.warning.other_not_offering'),null,null,null,LocalizeText('inventory.trading.notification.title'));return;case TradingNotificationType.HOTEL_TRADING_DISABLED:case TradingNotificationType.YOU_NOT_ALLOWED:case TradingNotificationType.THEY_NOT_ALLOWED:case TradingNotificationType.ROOM_DISABLED:case TradingNotificationType.YOU_OPEN:case TradingNotificationType.THEY_OPEN:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText(`inventory.trading.openfail.${type}`,['otherusername'],[otherUsername]),null,null,null,LocalizeText('inventory.trading.openfail.title'));return;case TradingNotificationType.ERROR_WHILE_COMMIT:NotificationUtilities_NotificationUtilities.simpleAlert(`${LocalizeText('inventory.trading.notification.caption')}, ${LocalizeText('inventory.trading.notification.commiterror.info')}`,null,null,null,LocalizeText('inventory.trading.notification.title'));return;case TradingNotificationType.THEY_CANCELLED:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('inventory.trading.info.closed'),null,null,null,LocalizeText('inventory.trading.notification.title'));return;}};\n// CONCATENATED MODULE: ./src/api/inventory/TradingUtilities.ts\nconst isExternalImage=spriteId=>{var _GetSessionDataManage;return((_GetSessionDataManage=GetSessionDataManager().getWallItemData(spriteId))===null||_GetSessionDataManage===void 0?void 0:_GetSessionDataManage.isExternalImage)||false;};const parseTradeItems=items=>{const existingItems=new nitro_renderer[\"g\" /* AdvancedMap */]();const totalItems=items.length;if(totalItems){for(const item of items){const spriteId=item.spriteId;const category=item.category;let name=item.furniType+spriteId;if(!item.isGroupable||isExternalImage(spriteId)){name='itemid'+item.itemId;}if(item.category===FurniCategory.POSTER){name=item.itemId+'poster'+item.stuffData.getLegacyString();}else if(item.category===FurniCategory.GUILD_FURNI){name='';}let groupItem=item.isGroupable&&!isExternalImage(item.spriteId)?existingItems.getValue(name):null;if(!groupItem){groupItem=createGroupItem(spriteId,category,item.stuffData);existingItems.add(name,groupItem);}groupItem.push(new FurnitureItem_FurnitureItem(item));}}return existingItems;};const getGuildFurniType=(spriteId,stuffData)=>{let type=spriteId.toString();if(!(stuffData instanceof nitro_renderer[\"Qh\" /* StringDataType */]))return type;let i=1;while(i<5){type=type+(','+stuffData.getValue(i));i++;}return type;};\n// CONCATENATED MODULE: ./src/api/inventory/index.ts\n\n// CONCATENATED MODULE: ./src/api/utils/ProductImageUtility.ts\nclass ProductImageUtility_ProductImageUtility{static getProductImageUrl(productType,furniClassId,extraParam){let imageUrl=null;switch(productType){case nitro_renderer[\"W\" /* CatalogPageMessageProductData */].S:imageUrl=GetRoomEngine().getFurnitureFloorIconUrl(furniClassId);break;case nitro_renderer[\"W\" /* CatalogPageMessageProductData */].I:const productCategory=this.getProductCategory(nitro_renderer[\"W\" /* CatalogPageMessageProductData */].I,furniClassId);if(productCategory===1){imageUrl=GetRoomEngine().getFurnitureWallIconUrl(furniClassId,extraParam);}else{switch(productCategory){case FurniCategory.WALL_PAPER:break;case FurniCategory.LANDSCAPE:break;case FurniCategory.FLOOR:break;}}break;case nitro_renderer[\"W\" /* CatalogPageMessageProductData */].E:// fx_icon_furniClassId_png\nbreak;}return imageUrl;}static getProductCategory(productType,furniClassId){if(productType===nitro_renderer[\"W\" /* CatalogPageMessageProductData */].S)return 1;if(productType===nitro_renderer[\"W\" /* CatalogPageMessageProductData */].I){if(furniClassId===3001)return FurniCategory.WALL_PAPER;if(furniClassId===3002)return FurniCategory.FLOOR;if(furniClassId===4057)return FurniCategory.LANDSCAPE;}return 1;}}\n// CONCATENATED MODULE: ./src/api/utils/Randomizer.ts\nclass Randomizer{static getRandomNumber(count){return Math.floor(Math.random()*count);}static getRandomElement(elements){return elements[this.getRandomNumber(elements.length)];}static getRandomElements(elements,count){const result=new Array(count);let len=elements.length;const taken=new Array(len);while(count--){var x=this.getRandomNumber(len);result[count]=elements[x in taken?taken[x]:x];taken[x]=--len in taken?taken[len]:len;}return result;}}\n// EXTERNAL MODULE: ./node_modules/emoji-toolkit/lib/js/joypixels.js\nvar joypixels = __webpack_require__(81);\n\n// CONCATENATED MODULE: ./src/api/utils/RoomChatFormatter.ts\nconst allowedColours=new Map();allowedColours.set('r','red');allowedColours.set('b','blue');allowedColours.set('g','green');allowedColours.set('y','yellow');allowedColours.set('w','white');allowedColours.set('o','orange');allowedColours.set('c','cyan');allowedColours.set('br','brown');allowedColours.set('pr','purple');allowedColours.set('pk','pink');allowedColours.set('red','red');allowedColours.set('blue','blue');allowedColours.set('green','green');allowedColours.set('yellow','yellow');allowedColours.set('white','white');allowedColours.set('orange','orange');allowedColours.set('cyan','cyan');allowedColours.set('brown','brown');allowedColours.set('purple','purple');allowedColours.set('pink','pink');function encodeHTML(str){return str.replace(/([\\u00A0-\\u9999<>&])(.|$)/g,function(full,char,next){if(char!=='&'||next!=='#'){if(/[\\u00A0-\\u9999<>&]/.test(next))next='&#'+next.charCodeAt(0)+';';return'&#'+char.charCodeAt(0)+';'+next;}return full;});}function RoomChatFormatter(content){let result='';content=encodeHTML(content);content=joypixels[\"shortnameToUnicode\"](content);if(content.startsWith('@')&&content.indexOf('@',1)>-1){let match=null;while((match=/@[a-zA-Z]+@/g.exec(content))!==null){const colorTag=match[0].toString();const colorName=colorTag.substr(1,colorTag.length-2);const text=content.replace(colorTag,'');if(!allowedColours.has(colorName)){result=text;}else{const color=allowedColours.get(colorName);result='<span style=\"color: '+color+'\">'+text+'</span>';}break;}}else{result=content;}return result;}\n// CONCATENATED MODULE: ./src/api/utils/SoundNames.ts\nclass SoundNames{}SoundNames.CAMERA_SHUTTER='camera_shutter';SoundNames.CREDITS='credits';SoundNames.DUCKETS='duckets';SoundNames.MESSENGER_NEW_THREAD='messenger_new_thread';SoundNames.MESSENGER_MESSAGE_RECEIVED='messenger_message_received';SoundNames.MODTOOLS_NEW_TICKET='modtools_new_ticket';\n// CONCATENATED MODULE: ./src/api/utils/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetMessage.ts\nclass RoomWidgetMessage{constructor(type){this._type=void 0;this._type=type;}get type(){return this._type;}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetAvatarExpressionMessage.ts\nclass RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage extends RoomWidgetMessage{constructor(animation){super(RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage.AVATAR_EXPRESSION);this._animation=void 0;this._animation=animation;}get animation(){return this._animation;}}RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage.AVATAR_EXPRESSION='RWAEM_MESSAGE_AVATAR_EXPRESSION';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetChangeMottoMessage.ts\nclass RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage extends RoomWidgetMessage{constructor(motto){super(RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage.CHANGE_MOTTO);this._motto=void 0;this._motto=motto;}get motto(){return this._motto;}}RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage.CHANGE_MOTTO='RWCMM_CHANGE_MOTTO';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetChangePostureMessage.ts\nclass RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage extends RoomWidgetMessage{constructor(posture){super(RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.CHANGE_POSTURE);this._posture=void 0;this._posture=posture;}get posture(){return this._posture;}}RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.CHANGE_POSTURE='RWCPM_MESSAGE_CHANGE_POSTURE';RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.POSTURE_STAND=0;RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.POSTURE_SIT=1;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetChatMessage.ts\nclass RoomWidgetChatMessage_RoomWidgetChatMessage extends RoomWidgetMessage{constructor(type,text,chatType,recipientName,styleId){super(type);this._chatType=void 0;this._text=void 0;this._recipientName=void 0;this._styleId=void 0;this._text=text;this._chatType=chatType;this._recipientName=recipientName;this._styleId=styleId;}get text(){return this._text;}get chatType(){return this._chatType;}get recipientName(){return this._recipientName;}get styleId(){return this._styleId;}}RoomWidgetChatMessage_RoomWidgetChatMessage.MESSAGE_CHAT='RWCM_MESSAGE_CHAT';RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_DEFAULT=0;RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_WHISPER=1;RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_SHOUT=2;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetChatSelectAvatarMessage.ts\nclass RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage extends RoomWidgetMessage{constructor(type,objectId,userName,roomId){super(type);this._objectId=void 0;this._userName=void 0;this._roomId=void 0;this._objectId=objectId;this._userName=userName;this._roomId=roomId;}get objectId(){return this._objectId;}get userName(){return this._userName;}get roomId(){return this._roomId;}}RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR='RWCSAM_MESSAGE_SELECT_AVATAR';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetChatTypingMessage.ts\nclass RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage extends RoomWidgetMessage{constructor(isTyping){super(RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage.TYPING_STATUS);this._isTyping=void 0;this._isTyping=isTyping;}get isTyping(){return this._isTyping;}}RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage.TYPING_STATUS='RWCTM_TYPING_STATUS';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetCreditFurniRedeemMessage.ts\nclass RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage extends RoomWidgetMessage{constructor(type,objectId){super(type);this._objectId=void 0;this._objectId=objectId;}get objectId(){return this._objectId;}}RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage.REDEEM='RWCFRM_REDEEM';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetDanceMessage.ts\nclass RoomWidgetDanceMessage_RoomWidgetDanceMessage extends RoomWidgetMessage{constructor(style){super(RoomWidgetDanceMessage_RoomWidgetDanceMessage.DANCE);this._style=0;this._style=style;}get style(){return this._style;}}RoomWidgetDanceMessage_RoomWidgetDanceMessage.DANCE='RWDM_MESSAGE_DANCE';RoomWidgetDanceMessage_RoomWidgetDanceMessage.NORMAL_STYLE=0;RoomWidgetDanceMessage_RoomWidgetDanceMessage.CLUB_STYLE=[2,3,4];\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetDimmerChangeStateMessage.ts\nclass RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage extends RoomWidgetMessage{constructor(){super(RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage.CHANGE_STATE);}}RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage.CHANGE_STATE='RWCDSM_CHANGE_STATE';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetDimmerPreviewMessage.ts\nclass RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage extends RoomWidgetMessage{constructor(color,brightness,bgOnly){super(RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET);this._color=void 0;this._brightness=void 0;this._bgOnly=void 0;this._color=color;this._brightness=brightness;this._bgOnly=bgOnly;}get color(){return this._color;}get brightness(){return this._brightness;}get bgOnly(){return this._bgOnly;}}RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET='RWDPM_PREVIEW_DIMMER_PRESET';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetDimmerSavePresetMessage.ts\nclass RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage extends RoomWidgetMessage{constructor(presetNumber,effectTypeId,color,brightness,apply){super(RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage.SAVE_PRESET);this._presetNumber=void 0;this._effectTypeId=void 0;this._color=void 0;this._brightness=void 0;this._apply=void 0;this._presetNumber=presetNumber;this._effectTypeId=effectTypeId;this._color=color;this._brightness=brightness;this._apply=apply;}get presetNumber(){return this._presetNumber;}get effectTypeId(){return this._effectTypeId;}get color(){return this._color;}get brightness(){return this._brightness;}get apply(){return this._apply;}}RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage.SAVE_PRESET='RWSDPM_SAVE_PRESET';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetFurniActionMessage.ts\nclass RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage extends RoomWidgetMessage{constructor(type,id,category){let offerId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:-1;let objectData=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;super(type);this._furniId=void 0;this._furniCategory=void 0;this._offerId=void 0;this._objectData=void 0;this._furniId=id;this._furniCategory=category;this._offerId=offerId;this._objectData=objectData;}get furniId(){return this._furniId;}get furniCategory(){return this._furniCategory;}get objectData(){return this._objectData;}get offerId(){return this._offerId;}}RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.ROTATE='RWFAM_ROTATE';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.MOVE='RWFAM_MOVE';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.PICKUP='RWFAM_PICKUP';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.EJECT='RWFAM_EJECT';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.USE='RWFAM_USE';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.OPEN_WELCOME_GIFT='RWFAM_OPEN_WELCOME_GIFT';RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.SAVE_STUFF_DATA='RWFAM_SAVE_STUFF_DATA';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetFurniToWidgetMessage.ts\nclass RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage extends RoomWidgetMessage{constructor(type,objectId,category,roomId){super(type);this._objectId=void 0;this._category=void 0;this._roomId=void 0;this._objectId=objectId;this._category=category;this._roomId=roomId;}get objectId(){return this._objectId;}get category(){return this._category;}get roomId(){return this._roomId;}}RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CREDITFURNI='RWFWM_MESSAGE_REQUEST_CREDITFURNI';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_STICKIE='RWFWM_MESSAGE_REQUEST_STICKIE';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PRESENT='RWFWM_MESSAGE_REQUEST_PRESENT';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TROPHY='RWFWM_MESSAGE_REQUEST_TROPHY';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TEASER='RWFWM_MESSAGE_REQUEST_TEASER';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ECOTRONBOX='RWFWM_MESSAGE_REQUEST_ECOTRONBOX';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER='RWFWM_MESSAGE_REQUEST_DIMMER';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PLACEHOLDER='RWFWM_MESSAGE_REQUEST_PLACEHOLDER';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CLOTHING_CHANGE='RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PLAYLIST_EDITOR='RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING='RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED='RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED';RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_BADGE_DISPLAY_ENGRAVING='RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetPollMessage.ts\nclass RoomWidgetPollMessage_RoomWidgetPollMessage extends RoomWidgetMessage{constructor(type,id){super(type);this._id=-1;this._questionId=0;this._answers=null;this._id=id;}get id(){return this._id;}get questionId(){return this._questionId;}set questionId(k){this._questionId=k;}get answers(){return this._answers;}set answers(k){this._answers=k;}}RoomWidgetPollMessage_RoomWidgetPollMessage.START='RWPM_START';RoomWidgetPollMessage_RoomWidgetPollMessage.REJECT='RWPM_REJECT';RoomWidgetPollMessage_RoomWidgetPollMessage.ANSWER='RWPM_ANSWER';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetPresentOpenMessage.ts\nclass RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage extends RoomWidgetMessage{constructor(type,objectId){super(type);this._objectId=void 0;this._objectId=objectId;}get objectId(){return this._objectId;}}RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage.OPEN_PRESENT='RWPOM_OPEN_PRESENT';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetRequestWidgetMessage.ts\nclass RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage extends RoomWidgetMessage{}RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.USER_CHOOSER='RWRWM_USER_CHOOSER';RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FURNI_CHOOSER='RWRWM_FURNI_CHOOSER';RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.ME_MENU='RWRWM_ME_MENU';RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.EFFECTS='RWRWM_EFFECTS';RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FLOOR_EDITOR='RWRWM_FLOOR_EDITOR';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetRoomObjectMessage.ts\nclass RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage extends RoomWidgetMessage{constructor(type,id,category){super(type);this._id=void 0;this._category=void 0;this._id=id;this._category=category;}get id(){return this._id;}get category(){return this._category;}}RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_INFO='RWROM_GET_OBJECT_INFO';RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_NAME='RWROM_GET_OBJECT_NAME';RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT='RWROM_SELECT_OBJECT';RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OWN_CHARACTER_INFO='RWROM_GET_OWN_CHARACTER_INFO';RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_AVATAR_LIST='RWROM_GET_AVATAR_LIST';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetUseProductMessage.ts\nclass RoomWidgetUseProductMessage_RoomWidgetUseProductMessage extends RoomWidgetMessage{constructor(type,objectId){let petId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;super(type);this._objectId=void 0;this._petId=void 0;this._objectId=objectId;this._petId=petId;}get objectId(){return this._objectId;}get petId(){return this._petId;}}RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.PET_PRODUCT='RWUPM_PET_PRODUCT';RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.MONSTERPLANT_SEED='RWUPM_MONSTERPLANT_SEED';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/RoomWidgetUserActionMessage.ts\nclass RoomWidgetUserActionMessage_RoomWidgetUserActionMessage extends RoomWidgetMessage{constructor(type,userId){super(type);this._userId=void 0;this._userId=userId;}get userId(){return this._userId;}}RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.WHISPER_USER='RWUAM_WHISPER_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.IGNORE_USER='RWUAM_IGNORE_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.IGNORE_USER_BUBBLE='RWUAM_IGNORE_USER_BUBBLE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.UNIGNORE_USER='RWUAM_UNIGNORE_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.KICK_USER='RWUAM_KICK_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_HOUR='RWUAM_BAN_USER_HOUR';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_DAY='RWUAM_BAN_USER_DAY';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_PERM='RWUAM_BAN_USER_PERM';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_2MIN='RWUAM_MUTE_USER_2MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_5MIN='RWUAM_MUTE_USER_5MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_10MIN='RWUAM_MUTE_USER_10MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_USER='RWUAM_RESPECT_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_RIGHTS='RWUAM_GIVE_RIGHTS';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TAKE_RIGHTS='RWUAM_TAKE_RIGHTS';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_TRADING='RWUAM_START_TRADING';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.OPEN_HOME_PAGE='RWUAM_OPEN_HOME_PAGE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT='RWUAM_REPORT';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET='RWUAM_PICKUP_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET='RWUAM_MOUNT_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_RIDING_PERMISSION='RWUAM_TOGGLE_PET_RIDING_PERMISSION';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_BREEDING_PERMISSION='RWUAM_TOGGLE_PET_BREEDING_PERMISSION';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET='RWUAM_DISMOUNT_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.SADDLE_OFF='RWUAM_SADDLE_OFF';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TRAIN_PET='RWUAM_TRAIN_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET=' RWUAM_RESPECT_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET='RWUAM_TREAT_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE='RWUAM_REQUEST_PET_UPDATE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_NAME_CHANGE='RWUAM_START_NAME_CHANGE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PASS_CARRY_ITEM='RWUAM_PASS_CARRY_ITEM';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DROP_CARRY_ITEM='RWUAM_DROP_CARRY_ITEM';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET='RWUAM_GIVE_CARRY_ITEM_TO_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_WATER_TO_PET='RWUAM_GIVE_WATER_TO_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_LIGHT_TO_PET='RWUAM_GIVE_LIGHT_TO_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_BREED_PET='RWUAM_REQUEST_BREED_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.HARVEST_PET='RWUAM_HARVEST_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REVIVE_PET='RWUAM_REVIVE_PET';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.COMPOST_PLANT='RWUAM_COMPOST_PLANT';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GET_BOT_INFO='RWUAM_GET_BOT_INFO';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT_CFH_OTHER='RWUAM_REPORT_CFH_OTHER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_ALERT_USER='RWUAM_AMBASSADOR_ALERT_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_KICK_USER='RWUAM_AMBASSADOR_KICK_USER';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_2MIN='RWUAM_AMBASSADOR_MUTE_2MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_10MIN='RWUAM_AMBASSADOR_MUTE_10MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_60MIN='RWUAM_AMBASSADOR_MUTE_60MIN';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_18HOUR='RWUAM_AMBASSADOR_MUTE_18HOUR';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_NONE='RWUAM_RELATIONSHIP_NONE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_HEART='RWUAM_RELATIONSHIP_HEART';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_SMILE='RWUAM_RELATIONSHIP_SMILE';RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_BOBBA='RWUAM_RELATIONSHIP_BOBBA';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/messages/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetHandler.ts\nclass RoomWidgetHandler{constructor(){this._container=null;}get container(){return this._container;}set container(container){this._container=container;}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurniChooserWidgetHandler.ts\nclass FurniChooserWidgetHandler_FurniChooserWidgetHandler extends RoomWidgetHandler{processEvent(event){}processWidgetMessage(message){if(!message)return null;switch(message.type){case RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FURNI_CHOOSER:this.processChooser();break;case RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT:this.selectRoomObject(message);break;}return null;}processChooser(){const roomId=this.container.roomSession.roomId;const items=[];const wallItems=GetRoomEngine().getRoomObjects(roomId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL);const floorItems=GetRoomEngine().getRoomObjects(roomId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);wallItems.forEach(roomObject=>{let name=roomObject.type;if(name.startsWith('poster')){name=LocalizeText(`poster_${name.replace('poster','')}_name`);}else{const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);const furniData=GetSessionDataManager().getWallItemData(typeId);if(furniData&&furniData.name.length)name=furniData.name;}items.push(new RoomObjectItem(roomObject.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL,name));});floorItems.forEach(roomObject=>{let name=roomObject.type;const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);const furniData=GetSessionDataManager().getFloorItemData(typeId);if(furniData&&furniData.name.length)name=furniData.name;items.push(new RoomObjectItem(roomObject.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR,name));});items.sort((a,b)=>{return a.name<b.name?-1:1;});this.container.eventDispatcher.dispatchEvent(new RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent(RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT,items));}selectRoomObject(message){if(message.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL&&message.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR)return;GetRoomEngine().selectRoomObject(this.container.roomSession.roomId,message.id,message.category);}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].FURNI_CHOOSER;}get eventTypes(){return[];}get messageTypes(){return[RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FURNI_CHOOSER,RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureContextMenuWidgetHandler.ts\nclass FurnitureContextMenuWidgetHandler_FurnitureContextMenuWidgetHandler extends RoomWidgetHandler{processEvent(event){}processWidgetMessage(message){switch(message.type){case RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.MONSTERPLANT_SEED:const productMessage=message;this.container.roomSession.useMultistateItem(productMessage.objectId);break;}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].FURNITURE_CONTEXT_MENU;}get eventTypes(){return[nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_FURNI_CONTEXT_MENU,nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_FURNI_CONTEXT_MENU];}get messageTypes(){return[RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.MONSTERPLANT_SEED];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureCreditWidgetHandler.ts\nclass FurnitureCreditWidgetHandler_FurnitureCreditWidgetHandler extends RoomWidgetHandler{processEvent(event){return;}processWidgetMessage(message){switch(message.type){case RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CREDITFURNI:{const creditMessage=message;const roomObject=GetRoomEngine().getRoomObject(creditMessage.roomId,creditMessage.objectId,creditMessage.category);if(!roomObject||!IsOwnerOfFurniture(roomObject))return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateCreditFurniEvent_RoomWidgetUpdateCreditFurniEvent(RoomWidgetUpdateCreditFurniEvent_RoomWidgetUpdateCreditFurniEvent.CREDIT_FURNI_UPDATE,creditMessage.objectId,roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_CREDIT_VALUE),roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID)+'_'+creditMessage.type+'_'+creditMessage.objectId));break;}case RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage.REDEEM:{const redeemMessage=message;this.container.roomSession.connection.send(new nitro_renderer[\"Mb\" /* FurnitureExchangeComposer */](redeemMessage.objectId));break;}}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].FURNI_CREDIT_WIDGET;}get eventTypes(){return[];}get messageTypes(){return[RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CREDITFURNI,RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage.REDEEM];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureCustomStackHeightWidgetHandler.ts\nclass FurnitureCustomStackHeightWidgetHandler_FurnitureCustomStackHeightWidgetHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._lastFurniId=-1;}processEvent(event){switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;this._lastFurniId=widgetEvent.objectId;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent(this._lastFurniId,roomObject.getLocation().z));return;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET:{const widgetEvent=event;if(widgetEvent.objectId!==this._lastFurniId)return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent(-1));return;}}}processWidgetMessage(message){switch(message.type){}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].CUSTOM_STACK_HEIGHT;}get eventTypes(){return[];}get messageTypes(){return[];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureDimmerWidgetHandler.ts\nclass FurnitureDimmerWidgetHandler_FurnitureDimmerWidgetHandler extends RoomWidgetHandler{processEvent(event){switch(event.type){case nitro_renderer[\"Vg\" /* RoomSessionDimmerPresetsEvent */].ROOM_DIMMER_PRESETS:{const presetsEvent=event;const updateEvent=new RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent(RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.PRESETS);updateEvent.selectedPresetId=presetsEvent.selectedPresetId;let i=0;while(i<presetsEvent.presetCount){const preset=presetsEvent.getPreset(i);if(preset)updateEvent.setPresetValues(preset.id,preset.type,preset.color,preset.brightness);i++;}this.container.eventDispatcher.dispatchEvent(updateEvent);return;}case nitro_renderer[\"ng\" /* RoomEngineDimmerStateEvent */].ROOM_COLOR:{const stateEvent=event;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent(stateEvent.state,stateEvent.presetId,stateEvent.effectId,stateEvent.color,stateEvent.brightness));return;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REMOVE_DIMMER:{this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent(RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.HIDE));return;}}}processWidgetMessage(message){switch(message.type){case RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER:{if(this.canOpenWidget())this.container.roomSession.requestMoodlightSettings();break;}case RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage.SAVE_PRESET:{if(this.canOpenWidget()){const savePresetMessage=message;this.container.roomSession.updateMoodlightData(savePresetMessage.presetNumber,savePresetMessage.effectTypeId,savePresetMessage.color,savePresetMessage.brightness,savePresetMessage.apply);}break;}case RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage.CHANGE_STATE:{if(this.canOpenWidget())this.container.roomSession.toggleMoodlightState();break;}case RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET:{const roomId=this.container.roomSession.roomId;const previewMessage=message;GetRoomEngine().updateObjectRoomColor(roomId,previewMessage.color,previewMessage.brightness,previewMessage.bgOnly);break;}}return null;}canOpenWidget(){return this.container.roomSession.isRoomOwner||this.container.roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST||GetSessionDataManager().isModerator;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].ROOM_DIMMER;}get eventTypes(){return[nitro_renderer[\"Vg\" /* RoomSessionDimmerPresetsEvent */].ROOM_DIMMER_PRESETS,nitro_renderer[\"ng\" /* RoomEngineDimmerStateEvent */].ROOM_COLOR,nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REMOVE_DIMMER];}get messageTypes(){return[RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER,RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage.SAVE_PRESET,RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage.CHANGE_STATE,RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage.PREVIEW_DIMMER_PRESET];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureExternalImageWidgetHandler.ts\nclass FurnitureExternalImageWidgetHandler_FurnitureExternalImageWidgetHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._lastFurniId=-1;}processEvent(event){switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;this._lastFurniId=widgetEvent.objectId;const data=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);const photoData=JSON.parse(data);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent(roomObject.id,photoData));return;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET:{const widgetEvent=event;if(widgetEvent.objectId!==this._lastFurniId)return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent(-1));return;}}}processWidgetMessage(message){switch(message.type){}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].EXTERNAL_IMAGE;}get eventTypes(){return[];}get messageTypes(){return[];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureInternalLinkHandler.ts\nclass FurnitureInternalLinkHandler_FurnitureInternalLinkHandler extends RoomWidgetHandler{processEvent(event){if(!event)return;switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_INTERNAL_LINK:const linkEvent=event;const roomEngine=GetRoomEngine();if(!linkEvent||!roomEngine)return;const object=roomEngine.getRoomObject(linkEvent.roomId,linkEvent.objectId,linkEvent.category);if(object){let data=object.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);let link=data[FurnitureInternalLinkHandler_FurnitureInternalLinkHandler.INTERNALLINK];if(!link||!link.length)link=object.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_INTERNAL_LINK);if(link&&link.length)CreateLinkEvent(link);}}}processWidgetMessage(message){return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].INTERNAL_LINK;}get eventTypes(){return[nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_INTERNAL_LINK];}get messageTypes(){return[];}}FurnitureInternalLinkHandler_FurnitureInternalLinkHandler.INTERNALLINK='internalLink';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureMannequinWidgetHandler.ts\nclass FurnitureMannequinWidgetHandler_FurnitureMannequinWidgetHandler extends RoomWidgetHandler{processEvent(event){switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MANNEQUIN:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;const model=roomObject.model;const figure=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_MANNEQUIN_FIGURE);const gender=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_MANNEQUIN_GENDER);const name=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_MANNEQUIN_NAME);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateMannequinEvent_RoomWidgetUpdateMannequinEvent(RoomWidgetUpdateMannequinEvent_RoomWidgetUpdateMannequinEvent.MANNEQUIN_UPDATE,roomObject.id,figure,gender,name));return;}}}processWidgetMessage(message){switch(message.type){}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].MANNEQUIN;}get eventTypes(){return[nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MANNEQUIN];}get messageTypes(){return[];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurniturePresentWidgetHandler.ts\nclass FurniturePresentWidgetHandler_FurniturePresentWidgetHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._lastFurniId=-1;this._name=null;}processEvent(event){switch(event.type){case nitro_renderer[\"dh\" /* RoomSessionPresentEvent */].RSPE_PRESENT_OPENED:{const presentEvent=event;let furniData=null;if(presentEvent.itemType===ProductTypeEnum.FLOOR){furniData=GetSessionDataManager().getFloorItemData(presentEvent.classId);}else if(presentEvent.itemType===ProductTypeEnum.WALL){furniData=GetSessionDataManager().getWallItemData(presentEvent.classId);}let isOwnerOfFurni=false;if(presentEvent.placedInRoom){const roomObject=GetRoomEngine().getRoomObject(this.container.roomSession.roomId,presentEvent.placedItemId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(roomObject)isOwnerOfFurni=IsOwnerOfFurniture(roomObject);}let giftImage=null;let dataUpdateEvent=null;switch(presentEvent.itemType){case ProductTypeEnum.WALL:{if(furniData){switch(furniData.className){case FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.FLOOR:dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_FLOOR,0,LocalizeText('inventory.furni.item.floor.name'),isOwnerOfFurni);break;case FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.LANDSCAPE:dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_LANDSCAPE,0,LocalizeText('inventory.furni.item.landscape.name'),isOwnerOfFurni);break;case FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.WALLPAPER:dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_WALLPAPER,0,LocalizeText('inventory.furni.item.wallpaper.name'),isOwnerOfFurni);break;case FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.POSTER:{const productCode=presentEvent.productCode;let extras=null;if(productCode.indexOf('poster')===0)extras=productCode.replace('poster','');giftImage=GetRoomEngine().getFurnitureWallIconUrl(presentEvent.classId,extras);const productData=GetSessionDataManager().getProductData(productCode);if(productData)this._name=productData.name;else if(furniData)this._name=furniData.name;dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS,0,this._name,isOwnerOfFurni,giftImage);break;}default:{giftImage=GetRoomEngine().getFurnitureWallIconUrl(presentEvent.classId);if(furniData)this._name=furniData.name;dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS,0,this._name,isOwnerOfFurni,giftImage);break;}}}break;}case ProductTypeEnum.HABBO_CLUB:dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_CLUB,0,LocalizeText('widget.furni.present.hc'),false);break;default:{if(presentEvent.placedItemType===ProductTypeEnum.PET){const petfigureString=presentEvent.petFigureString;if(petfigureString&&petfigureString.length){const petFigureData=new nitro_renderer[\"of\" /* PetFigureData */](petfigureString);const petImage=GetRoomEngine().getRoomObjectPetImage(petFigureData.typeId,petFigureData.paletteId,petFigureData.color,new nitro_renderer[\"Ui\" /* Vector3d */](90),64,this,true,0,petFigureData.customParts);if(petImage)giftImage=petImage.getImage().src;}}if(!giftImage){const furniImage=GetRoomEngine().getFurnitureFloorImage(presentEvent.classId,new nitro_renderer[\"Ui\" /* Vector3d */](90),64,this);if(furniImage)giftImage=furniImage.getImage().src;}const productData=GetSessionDataManager().getProductData(presentEvent.productCode);if(productData)this._name=productData.name;else this._name=furniData.name;if(giftImage)dataUpdateEvent=new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS,0,this._name,isOwnerOfFurni,giftImage);break;}}if(dataUpdateEvent){dataUpdateEvent.classId=presentEvent.classId;dataUpdateEvent.itemType=presentEvent.itemType;dataUpdateEvent.placedItemId=presentEvent.placedItemId;dataUpdateEvent.placedInRoom=presentEvent.placedInRoom;dataUpdateEvent.placedItemType=presentEvent.placedItemType;this.container.eventDispatcher.dispatchEvent(dataUpdateEvent);}return;}}}processWidgetMessage(message){switch(message.type){case RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PRESENT:{const widgetMessage=message;const roomObject=GetRoomEngine().getRoomObject(widgetMessage.roomId,widgetMessage.objectId,widgetMessage.category);if(!roomObject)return null;this._lastFurniId=widgetMessage.objectId;const giftMessage=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA)||'';const purchaserName=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_PURCHASER_NAME);const purchaserFigure=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_PURCHASER_FIGURE);const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);const extras=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_EXTRAS);const giftImage=GetRoomEngine().getFurnitureFloorImage(typeId,new nitro_renderer[\"Ui\" /* Vector3d */](180),64,null,0,extras);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.PACKAGEINFO,widgetMessage.objectId,giftMessage,IsOwnerOfFurniture(roomObject),giftImage.getImage().src,purchaserName,purchaserFigure));break;}case RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage.OPEN_PRESENT:{const openMessage=message;if(openMessage.objectId!==this._lastFurniId)return null;this.container.roomSession.openGift(openMessage.objectId);GetRoomEngine().changeObjectModelData(GetRoomEngine().activeRoomId,openMessage.objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR,nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DISABLE_PICKING_ANIMATION,1);break;}}return null;}imageReady(id,texture){let image=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let imageUrl=null;if(image)imageUrl=image.src;else if(texture)imageUrl=nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(texture);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_IMAGE,0,this._name,false,imageUrl));}imageFailed(id){}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].FURNI_PRESENT_WIDGET;}get eventTypes(){return[nitro_renderer[\"dh\" /* RoomSessionPresentEvent */].RSPE_PRESENT_OPENED];}get messageTypes(){return[RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PRESENT,RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage.OPEN_PRESENT];}}FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.FLOOR='floor';FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.WALLPAPER='wallpaper';FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.LANDSCAPE='landscape';FurniturePresentWidgetHandler_FurniturePresentWidgetHandler.POSTER='poster';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureRoomLinkHandler.ts\nclass FurnitureRoomLinkHandler_FurnitureRoomLinkHandler extends RoomWidgetHandler{onRoomInfo(event){//todo\n}processEvent(event){if(!event)return;switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ROOM_LINK:const roomLinkEvent=event;const roomEngine=GetRoomEngine();if(!roomLinkEvent||!roomEngine)return;const object=roomEngine.getRoomObject(roomLinkEvent.roomId,roomLinkEvent.objectId,roomLinkEvent.category);if(object){const data=object.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);let roomId=data[FurnitureRoomLinkHandler_FurnitureRoomLinkHandler.INTERNALLINK];if(!roomId||!roomId.length)roomId=object.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_INTERNAL_LINK);if(roomId&&roomId.length)CreateLinkEvent('navigator/goto/'+roomId);}}}processWidgetMessage(message){return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].ROOM_LINK;}get eventTypes(){return[nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ROOM_LINK];}get messageTypes(){return[];}}FurnitureRoomLinkHandler_FurnitureRoomLinkHandler.INTERNALLINK='internalLink';\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureTrophyWidgetHandler.ts\nclass FurnitureTrophyWidgetHandler_FurnitureTrophyWidgetHandler extends RoomWidgetHandler{processEvent(event){return;}processWidgetMessage(message){switch(message.type){case RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TROPHY:{const widgetMessage=message;const roomObject=GetRoomEngine().getRoomObject(widgetMessage.roomId,widgetMessage.objectId,widgetMessage.category);if(!roomObject)return;const color=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_COLOR);const extra=parseInt(roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_EXTRAS));let data=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);const ownerName=data.substring(0,data.indexOf('\\t'));data=data.substring(ownerName.length+1,data.length);const date=data.substring(0,data.indexOf('\\t'));const text=data.substr(date.length+1,data.length);break;}}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].FURNI_TROPHY_WIDGET;}get eventTypes(){return[];}get messageTypes(){return[RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TROPHY];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/FurnitureYoutubeDisplayWidgetHandler.ts\nclass FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._lastFurniId=-1;}processEvent(event){switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;this._lastFurniId=widgetEvent.objectId;const hasControl=GetSessionDataManager().hasSecurity(nitro_renderer[\"Hh\" /* SecurityLevel */].EMPLOYEE)||IsOwnerOfFurniture(roomObject);this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent(roomObject.id,hasControl));SendMessageComposer(new nitro_renderer[\"Dc\" /* GetYoutubeDisplayStatusMessageComposer */](this._lastFurniId));return;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET:{const widgetEvent=event;if(widgetEvent.objectId!==this._lastFurniId)return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent(-1));return;}}}processWidgetMessage(message){switch(message.type){}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].YOUTUBE;}get eventTypes(){return[];}get messageTypes(){return[];}}FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_PREVIOUS_VIDEO=0;FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_NEXT_VIDEO=1;FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_PAUSE_VIDEO=2;FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_CONTINUE_VIDEO=3;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/IRoomWidgetHandler.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/IRoomWidgetHandlerManager.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/PollWidgetHandler.ts\nclass PollWidgetHandler_PollWidgetHandler extends RoomWidgetHandler{processEvent(event){const pollEvent=event;let widgetEvent;switch(event.type){case nitro_renderer[\"ch\" /* RoomSessionPollEvent */].OFFER:widgetEvent=new RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent(RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.OFFER,pollEvent.id);widgetEvent.summary=pollEvent.summary;widgetEvent.headline=pollEvent.headline;break;case nitro_renderer[\"ch\" /* RoomSessionPollEvent */].ERROR:widgetEvent=new RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent(RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.ERROR,pollEvent.id);widgetEvent.summary=pollEvent.summary;widgetEvent.headline=pollEvent.headline;break;case nitro_renderer[\"ch\" /* RoomSessionPollEvent */].CONTENT:widgetEvent=new RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent(RoomWidgetPollUpdateEvent_RoomWidgetPollUpdateEvent.CONTENT,pollEvent.id);widgetEvent.startMessage=pollEvent.startMessage;widgetEvent.endMessage=pollEvent.endMessage;widgetEvent.numQuestions=pollEvent.numQuestions;widgetEvent.questionArray=pollEvent.questionArray;widgetEvent.npsPoll=pollEvent.npsPoll;break;}if(!widgetEvent)return;this.container.eventDispatcher.dispatchEvent(widgetEvent);}processWidgetMessage(message){const pollMessage=message;switch(message.type){case RoomWidgetPollMessage_RoomWidgetPollMessage.START:this.container.roomSession.sendPollStartMessage(pollMessage.id);break;case RoomWidgetPollMessage_RoomWidgetPollMessage.REJECT:this.container.roomSession.sendPollRejectMessage(pollMessage.id);break;case RoomWidgetPollMessage_RoomWidgetPollMessage.ANSWER:this.container.roomSession.sendPollAnswerMessage(pollMessage.id,pollMessage.questionId,pollMessage.answers);break;}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].ROOM_POLL;}get eventTypes(){return[nitro_renderer[\"ch\" /* RoomSessionPollEvent */].OFFER,nitro_renderer[\"ch\" /* RoomSessionPollEvent */].ERROR,nitro_renderer[\"ch\" /* RoomSessionPollEvent */].CONTENT];}get messageTypes(){return[RoomWidgetPollMessage_RoomWidgetPollMessage.ANSWER,RoomWidgetPollMessage_RoomWidgetPollMessage.REJECT,RoomWidgetPollMessage_RoomWidgetPollMessage.START];}}\n// CONCATENATED MODULE: ./src/api/friends/MessengerFriend.ts\nclass MessengerFriend{constructor(){this.id=-1;this.name=null;this.gender=0;this.online=false;this.followingAllowed=false;this.figure=null;this.categoryId=0;this.motto=null;this.realName=null;this.lastAccess=null;this.persistedMessageUser=false;this.vipMember=false;this.pocketHabboUser=false;this.relationshipStatus=-1;this.unread=0;}populate(parser){this.id=parser.id;this.name=parser.name;this.gender=parser.gender;this.online=parser.online;this.followingAllowed=parser.followingAllowed;this.figure=parser.figure;this.categoryId=parser.categoryId;this.motto=parser.motto;this.realName=parser.realName;this.lastAccess=parser.lastAccess;this.persistedMessageUser=parser.persistedMessageUser;this.vipMember=parser.vipMember;this.pocketHabboUser=parser.pocketHabboUser;this.relationshipStatus=parser.relationshipStatus;}}MessengerFriend.RELATIONSHIP_NONE=0;MessengerFriend.RELATIONSHIP_HEART=1;MessengerFriend.RELATIONSHIP_SMILE=2;MessengerFriend.RELATIONSHIP_BOBBA=3;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetAvatarInfoHandler.ts\nclass RoomWidgetAvatarInfoHandler_RoomWidgetAvatarInfoHandler extends RoomWidgetHandler{processEvent(event){switch(event.type){case nitro_renderer[\"fh\" /* RoomSessionUserDataUpdateEvent */].USER_DATA_UPDATED:this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateUserDataEvent_RoomWidgetUpdateUserDataEvent());return;case nitro_renderer[\"Ug\" /* RoomSessionDanceEvent */].RSDE_DANCE:const danceEvent=event;let isDancing=false;const userData=this.container.roomSession.userDataManager.getUserData(GetSessionDataManager().userId);if(userData&&userData.roomIndex===danceEvent.roomIndex)isDancing=danceEvent.danceId!==0;this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateDanceStatusEvent_RoomWidgetUpdateDanceStatusEvent(isDancing));return;case nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_INVENTORY:return;case nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_ROOM:this.processUsableRoomObject(event.objectId);return;case nitro_renderer[\"bh\" /* RoomSessionPetStatusUpdateEvent */].PET_STATUS_UPDATE:this.processRoomSessionPetStatusUpdateEvent(event);return;}}processWidgetMessage(message){let userId=0;if(message instanceof RoomWidgetUserActionMessage_RoomWidgetUserActionMessage)userId=message.userId;switch(message.type){case RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OWN_CHARACTER_INFO:this.processOwnCharacterInfo();break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_NAME_CHANGE:// habbo help - start name change\nbreak;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE:break;case RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.PET_PRODUCT:{const productMessage=message;this.container.roomSession.usePetProduct(productMessage.objectId,productMessage.petId);break;}case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.HARVEST_PET:this.container.roomSession.harvestPet(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.COMPOST_PLANT:this.container.roomSession.compostPlant(userId);break;case RoomWidgetDanceMessage_RoomWidgetDanceMessage.DANCE:{const danceMessage=message;this.container.roomSession.sendDanceMessage(danceMessage.style);break;}case RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage.AVATAR_EXPRESSION:{const expressionMessage=message;this.container.roomSession.sendExpressionMessage(expressionMessage.animation.ordinal);break;}case RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.CHANGE_POSTURE:{const postureMessage=message;this.container.roomSession.sendPostureMessage(postureMessage.posture);break;}case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_NONE:{SendMessageComposer(new nitro_renderer[\"Oh\" /* SetRelationshipStatusComposer */](userId,MessengerFriend.RELATIONSHIP_NONE));break;}case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_HEART:{SendMessageComposer(new nitro_renderer[\"Oh\" /* SetRelationshipStatusComposer */](userId,MessengerFriend.RELATIONSHIP_HEART));break;}case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_SMILE:{SendMessageComposer(new nitro_renderer[\"Oh\" /* SetRelationshipStatusComposer */](userId,MessengerFriend.RELATIONSHIP_SMILE));break;}case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_BOBBA:{SendMessageComposer(new nitro_renderer[\"Oh\" /* SetRelationshipStatusComposer */](userId,MessengerFriend.RELATIONSHIP_BOBBA));break;}}return null;}processOwnCharacterInfo(){const userId=GetSessionDataManager().userId;const userName=GetSessionDataManager().userName;const allowNameChange=GetSessionDataManager().canChangeName;const userData=this.container.roomSession.userDataManager.getUserData(userId);if(!userData)return;this.container.eventDispatcher.dispatchEvent(new RoomWidgetAvatarInfoEvent_RoomWidgetAvatarInfoEvent(userId,userName,userData.type,userData.roomIndex,allowNameChange));}processUsableRoomObject(objectId){const roomId=this.container.roomSession.roomId;const roomObject=GetRoomEngine().getRoomObject(roomId,objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(!roomObject||!IsOwnerOfFurniture(roomObject))return;const ownerId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_ID);const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);const furniData=GetSessionDataManager().getFloorItemData(typeId);const parts=furniData.customParams.split(' ');const part=parts.length?parseInt(parts[0]):-1;if(part===-1)return;this.processUseableProduct(roomId,objectId,part,furniData.specialType,ownerId);}processUseableProduct(roomId,objectId,part,specialType,ownerId){let arg6=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;const useProductBubbles=[];const roomObjects=GetRoomEngine().getRoomObjects(roomId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);for(const roomObject of roomObjects){const userData=this.container.roomSession.userDataManager.getUserDataByIndex(roomObject.id);let replace=false;if(!userData||userData.type!==nitro_renderer[\"Mg\" /* RoomObjectType */].PET){}else{if(userData.ownerId===ownerId){if(userData.hasSaddle&&specialType===FurniCategory.PET_SADDLE)replace=true;const figureParts=userData.figure.split(' ');const figurePart=figureParts.length?parseInt(figureParts[0]):-1;if(figurePart===part){if(specialType===FurniCategory.MONSTERPLANT_REVIVAL){if(!userData.canRevive)continue;}if(specialType===FurniCategory.MONSTERPLANT_REBREED){if(userData.petLevel<7||userData.canRevive||userData.canBreed)continue;}if(specialType===FurniCategory.MONSTERPLANT_FERTILIZE){if(userData.petLevel>=7||userData.canRevive)continue;}useProductBubbles.push(new UseProductItem(userData.roomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userData.name,objectId,roomObject.id,arg6,replace));}}}}if(useProductBubbles.length)this.container.eventDispatcher.dispatchEvent(new RoomWidgetUseProductBubbleEvent_RoomWidgetUseProductBubbleEvent(RoomWidgetUseProductBubbleEvent_RoomWidgetUseProductBubbleEvent.USE_PRODUCT_BUBBLES,useProductBubbles));}processRoomSessionPetStatusUpdateEvent(event){}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].AVATAR_INFO;}get eventTypes(){return[nitro_renderer[\"fh\" /* RoomSessionUserDataUpdateEvent */].USER_DATA_UPDATED,nitro_renderer[\"Ug\" /* RoomSessionDanceEvent */].RSDE_DANCE,nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_INVENTORY,nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_ROOM,nitro_renderer[\"bh\" /* RoomSessionPetStatusUpdateEvent */].PET_STATUS_UPDATE];}// UserNameUpdateEvent.UNUE_NAME_UPDATED\n// RoomSessionNestBreedingSuccessEvent.RSPFUE_NEST_BREEDING_SUCCESS\n// RoomSessionPetLevelUpdateEvent.RSPLUE_PET_LEVEL_UPDATE\nget messageTypes(){return[RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OWN_CHARACTER_INFO,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_NAME_CHANGE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE,RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.PET_PRODUCT,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_BREED_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.HARVEST_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REVIVE_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.COMPOST_PLANT,RoomWidgetDanceMessage_RoomWidgetDanceMessage.DANCE,RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage.AVATAR_EXPRESSION,RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.CHANGE_POSTURE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_NONE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_HEART,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_SMILE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_BOBBA];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetChatHandler.ts\nclass RoomWidgetChatHandler_RoomWidgetChatHandler extends RoomWidgetHandler{constructor(){super(...arguments);this._avatarColorCache=new Map();this._avatarImageCache=new Map();this._petImageCache=new Map();}processEvent(event){switch(event.type){case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_EVENT:{const chatEvent=event;const roomObject=GetRoomEngine().getRoomObject(chatEvent.session.roomId,chatEvent.objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);const objectLocation=roomObject?roomObject.getLocation():new nitro_renderer[\"Ui\" /* Vector3d */]();const bubbleLocation=GetRoomObjectScreenLocation(chatEvent.session.roomId,roomObject===null||roomObject===void 0?void 0:roomObject.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);const userData=roomObject?this.container.roomSession.userDataManager.getUserDataByIndex(chatEvent.objectId):new nitro_renderer[\"th\" /* RoomUserData */](-1);let username='';let avatarColor=0;let imageUrl=null;let chatType=chatEvent.chatType;let styleId=chatEvent.style;let userType=0;let petType=-1;let text=chatEvent.message;if(userData){userType=userData.type;const figure=userData.figure;switch(userType){case nitro_renderer[\"Mg\" /* RoomObjectType */].PET:imageUrl=this.getPetImage(figure,2,true,64,roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_POSTURE));petType=new nitro_renderer[\"of\" /* PetFigureData */](figure).typeId;break;case nitro_renderer[\"Mg\" /* RoomObjectType */].USER:imageUrl=this.getUserImage(figure);break;case nitro_renderer[\"Mg\" /* RoomObjectType */].RENTABLE_BOT:case nitro_renderer[\"Mg\" /* RoomObjectType */].BOT:styleId=nitro_renderer[\"Rh\" /* SystemChatStyleEnum */].BOT;break;}avatarColor=this._avatarColorCache.get(figure);username=userData.name;}switch(chatType){case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_RESPECT:text=LocalizeText('widgets.chatbubble.respect',['username'],[username]);if(GetConfigurationManager().getValue('respect.options')['enabled'])PlaySound(GetConfigurationManager().getValue('respect.options')['sound']);break;case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PETREVIVE:case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PET_REBREED_FERTILIZE:case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PET_SPEED_FERTILIZE:{let textKey='widget.chatbubble.petrevived';if(chatType===nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PET_REBREED_FERTILIZE){textKey='widget.chatbubble.petrefertilized;';}else if(chatType===nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PET_SPEED_FERTILIZE){textKey='widget.chatbubble.petspeedfertilized';}let targetUserName=null;const newRoomObject=GetRoomEngine().getRoomObject(chatEvent.session.roomId,chatEvent.extraParam,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);if(newRoomObject){const newUserData=this.container.roomSession.userDataManager.getUserDataByIndex(roomObject.id);if(newUserData)targetUserName=newUserData.name;}text=LocalizeText(textKey,['petName','userName'],[username,targetUserName]);break;}case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PETRESPECT:text=LocalizeText('widget.chatbubble.petrespect',['petname'],[username]);break;case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_PETTREAT:text=LocalizeText('widget.chatbubble.pettreat',['petname'],[username]);break;case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_HAND_ITEM_RECEIVED:text=LocalizeText('widget.chatbubble.handitem',['username','handitem'],[username,LocalizeText('handitem'+chatEvent.extraParam)]);break;case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_TYPE_MUTE_REMAINING:{const hours=(chatEvent.extraParam>0?Math.floor(chatEvent.extraParam/3600):0).toString();const minutes=(chatEvent.extraParam>0?Math.floor(chatEvent.extraParam%3600/60):0).toString();const seconds=(chatEvent.extraParam%60).toString();text=LocalizeText('widget.chatbubble.mutetime',['hours','minutes','seconds'],[hours,minutes,seconds]);break;}}this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent(RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_EVENT,userData.roomIndex,text,username,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType,petType,bubbleLocation.x,bubbleLocation.y,imageUrl,avatarColor,chatEvent.session.roomId,chatType,styleId,[]));return;}}}processWidgetMessage(message){return null;}getUserImage(figure){let existing=this._avatarImageCache.get(figure);if(!existing){existing=this.setFigureImage(figure);}return existing;}setFigureImage(figure){const avatarImage=GetAvatarRenderManager().createAvatarImage(figure,nitro_renderer[\"q\" /* AvatarScaleType */].LARGE,null,this);if(!avatarImage)return;const image=avatarImage.getCroppedImage(nitro_renderer[\"r\" /* AvatarSetType */].HEAD);const color=avatarImage.getPartColor(nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST);this._avatarColorCache.set(figure,color&&color.rgb||16777215);avatarImage.dispose();this._avatarImageCache.set(figure,image.src);return image.src;}getPetImage(figure,direction,_arg_3){let scale=arguments.length>3&&arguments[3]!==undefined?arguments[3]:64;let posture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let existing=this._petImageCache.get(figure+posture);if(existing)return existing;const figureData=new nitro_renderer[\"of\" /* PetFigureData */](figure);const typeId=figureData.typeId;const image=GetRoomEngine().getRoomObjectPetImage(typeId,figureData.paletteId,figureData.color,new nitro_renderer[\"Ui\" /* Vector3d */](direction*45),scale,null,false,0,figureData.customParts,posture);if(image){existing=nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(image.data);this._petImageCache.set(figure+posture,existing);}return existing;}resetFigure(figure){this.setFigureImage(figure);}dispose(){}get disposed(){return false;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].CHAT_WIDGET;}get eventTypes(){return[nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_EVENT];}get messageTypes(){return[];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetChatInputHandler.ts\nclass RoomWidgetChatInputHandler_RoomWidgetChatInputHandler extends RoomWidgetHandler{processEvent(event){switch(event.type){case nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].FLOOD_EVENT:{const floodEvent=event;this.container.eventDispatcher.dispatchEvent(new RoomWidgetFloodControlEvent_RoomWidgetFloodControlEvent(parseInt(floodEvent.message)));}}}processWidgetMessage(message){switch(message.type){case RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage.TYPING_STATUS:{const typingMessage=message;this.container.roomSession.sendChatTypingMessage(typingMessage.isTyping);break;}case RoomWidgetChatMessage_RoomWidgetChatMessage.MESSAGE_CHAT:{const chatMessage=message;if(chatMessage.text==='')return null;let text=chatMessage.text;const parts=text.split(' ');if(parts.length>0){const firstPart=parts[0];let secondPart='';if(parts.length>1)secondPart=parts[1];if(firstPart.charAt(0)===':'&&secondPart==='x'){const selectedAvatarId=GetRoomEngine().selectedAvatarId;if(selectedAvatarId>-1){const userData=this.container.roomSession.userDataManager.getUserDataByIndex(selectedAvatarId);if(userData){secondPart=userData.name;text=chatMessage.text.replace(' x',' '+userData.name);}}}switch(firstPart.toLowerCase()){case':shake':nitro_renderer[\"lh\" /* RoomShakingEffect */].init(2500,5000);nitro_renderer[\"lh\" /* RoomShakingEffect */].turnVisualizationOn();return null;case':rotate':nitro_renderer[\"Rg\" /* RoomRotatingEffect */].init(2500,5000);nitro_renderer[\"Rg\" /* RoomRotatingEffect */].turnVisualizationOn();return null;case':d':case';d':if(GetClubMemberLevel()===nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP){this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].LAUGH.ordinal);}break;case'o/':case'_o/':this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].WAVE.ordinal);return null;case':kiss':if(GetClubMemberLevel()===nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP){this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].BLOW.ordinal);return null;}break;case':jump':if(GetClubMemberLevel()===nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP){this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].JUMP.ordinal);return null;}break;case':idle':this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].IDLE.ordinal);return null;case'_b':this.container.roomSession.sendExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].RESPECT.ordinal);return null;case':sign':this.container.roomSession.sendSignMessage(parseInt(secondPart));return null;case':iddqd':case':flip':GetRoomEngine().events.dispatchEvent(new nitro_renderer[\"Bh\" /* RoomZoomEvent */](this.container.roomSession.roomId,-1,true));return null;case':zoom':GetRoomEngine().events.dispatchEvent(new nitro_renderer[\"Bh\" /* RoomZoomEvent */](this.container.roomSession.roomId,parseFloat(secondPart),false));return null;case':screenshot':const texture=GetRoomEngine().createTextureFromRoom(this.container.roomSession.roomId,1);const image=new Image();image.src=nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(texture);const newWindow=window.open('');newWindow.document.write(image.outerHTML);return null;case':pickall':if(this.container.roomSession.isRoomOwner||GetSessionDataManager().isModerator){NotificationUtilities_NotificationUtilities.confirm(LocalizeText('room.confirm.pick_all'),()=>{GetSessionDataManager().sendSpecialCommandMessage(':pickall');},null,null,null,LocalizeText('generic.alert.title'));}return null;case':furni':this.container.processWidgetMessage(new RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FURNI_CHOOSER));return null;case':chooser':this.container.processWidgetMessage(new RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.USER_CHOOSER));return null;case':floor':case':bcfloor':if(this.container.roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].ROOM_OWNER)CreateLinkEvent('floor-editor/show');return null;case':togglefps':{if(GetNitroInstance().ticker.maxFPS>0)GetNitroInstance().ticker.maxFPS=0;else GetNitroInstance().ticker.maxFPS=GetConfiguration('system.animation.fps');return null;}case':client':case':nitro':case':billsonnn':NotificationUtilities_NotificationUtilities.showNitroAlert();return null;case':settings':if(this.container.roomSession.isRoomOwner||GetSessionDataManager().isModerator){SendMessageComposer(new nitro_renderer[\"ih\" /* RoomSettingsComposer */](this.container.roomSession.roomId));}return null;}}const styleId=chatMessage.styleId;if(this.container&&this.container.roomSession){switch(chatMessage.chatType){case RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_DEFAULT:this.container.roomSession.sendChatMessage(text,styleId);break;case RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_SHOUT:this.container.roomSession.sendShoutMessage(text,styleId);break;case RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_WHISPER:this.container.roomSession.sendWhisperMessage(chatMessage.recipientName,text,styleId);break;}}break;}case RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR:{const selectedEvent=message;GetRoomEngine().setSelectedAvatar(selectedEvent.roomId,selectedEvent.objectId);break;}}return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].CHAT_INPUT_WIDGET;}get eventTypes(){return[nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].FLOOD_EVENT];}get messageTypes(){return[RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage.TYPING_STATUS,RoomWidgetChatMessage_RoomWidgetChatMessage.MESSAGE_CHAT,RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetHandlerManager.ts\nclass RoomWidgetHandlerManager_RoomWidgetHandlerManager{constructor(roomSession,eventDispatcher){this._roomSession=void 0;this._eventDispatcher=void 0;this._handlers=[];this._eventMap=new Map();this._messageMap=new Map();this._roomSession=roomSession;this._eventDispatcher=eventDispatcher;}registerHandler(handler){const eventTypes=handler.eventTypes;eventTypes.push(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET,nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET);if(eventTypes&&eventTypes.length){for(const name of eventTypes){if(!name)continue;let events=this._eventMap.get(name);if(!events){events=[];this._eventMap.set(name,events);}events.push(handler);}}const messageTypes=handler.messageTypes;if(messageTypes&&messageTypes.length){for(const name of messageTypes){if(!name)continue;let messages=this._messageMap.get(name);if(!messages){messages=[];this._messageMap.set(name,messages);}messages.push(handler);}}handler.container=this;this._handlers.push(handler);}processEvent(event){const handlers=this._eventMap.get(event.type);if(!handlers||!handlers.length)return null;for(const handler of handlers){if(!handler)continue;let dispatch=true;if(event.type===nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET||event.type===nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET){if(event instanceof nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */]){dispatch=handler.type===event.widget;}}if(dispatch)handler.processEvent(event);}}processWidgetMessage(message){const handlers=this._messageMap.get(message.type);if(!handlers||!handlers.length)return null;for(const handler of handlers){if(!handler)continue;const update=handler.processWidgetMessage(message);if(!update)continue;return update;}return null;}get roomSession(){return this._roomSession;}get eventDispatcher(){return this._eventDispatcher;}}\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/common/PetSupplementEnum.ts\nclass PetSupplementEnum{}PetSupplementEnum.WATER=0;PetSupplementEnum.LIGHT=1;\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/RoomWidgetInfostandHandler.ts\nclass RoomWidgetInfostandHandler_RoomWidgetInfostandHandler extends RoomWidgetHandler{processEvent(event){switch(event.type){case nitro_renderer[\"ah\" /* RoomSessionPetInfoUpdateEvent */].PET_INFO:this.processPetInfoEvent(event);return;case nitro_renderer[\"eh\" /* RoomSessionUserBadgesEvent */].RSUBE_BADGES:this.container.eventDispatcher.dispatchEvent(event);return;case nitro_renderer[\"gh\" /* RoomSessionUserFigureUpdateEvent */].USER_FIGURE:this.container.eventDispatcher.dispatchEvent(event);return;case nitro_renderer[\"Zg\" /* RoomSessionFavoriteGroupUpdateEvent */].FAVOURITE_GROUP_UPDATE:this.container.eventDispatcher.dispatchEvent(event);return;}}processWidgetMessage(message){let userId=0;let userData=null;let objectId=0;let category=0;if(message instanceof RoomWidgetUserActionMessage_RoomWidgetUserActionMessage){userId=message.userId;const petMessages=[RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_RIDING_PERMISSION,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_BREEDING_PERMISSION,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.SADDLE_OFF,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_WATER_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_LIGHT_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET];if(petMessages.indexOf(message.type)>=0){userData=this.container.roomSession.userDataManager.getPetData(userId);}else{userData=this.container.roomSession.userDataManager.getUserData(userId);}if(!userData)return null;}else if(message instanceof RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage){objectId=message.furniId;category=message.furniCategory;}switch(message.type){case RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_NAME:return this.processObjectNameMessage(message);case RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_INFO:return this.processObjectInfoMessage(message);case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_USER:GetSessionDataManager().giveRespect(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET:GetSessionDataManager().givePetRespect(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.WHISPER_USER:this.container.eventDispatcher.dispatchEvent(new RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent(RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.WHISPER,userData.name));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.IGNORE_USER:GetSessionDataManager().ignoreUser(userData.name);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.UNIGNORE_USER:GetSessionDataManager().unignoreUser(userData.name);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.KICK_USER:this.container.roomSession.sendKickMessage(message.userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_DAY:case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_HOUR:case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_PERM:this.container.roomSession.sendBanMessage(message.userId,message.type);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(message.userId,2);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_5MIN:this.container.roomSession.sendMuteMessage(message.userId,5);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(message.userId,10);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_RIGHTS:this.container.roomSession.sendGiveRightsMessage(message.userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TAKE_RIGHTS:this.container.roomSession.sendTakeRightsMessage(message.userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_TRADING:SendMessageComposer(new nitro_renderer[\"ii\" /* TradingOpenComposer */](userData.roomIndex));break;// case RoomWidgetUserActionMessage.RWUAM_OPEN_HOME_PAGE:\n//     this._container.sessionDataManager._Str_21275((message as RoomWidgetUserActionMessage).userId, _local_3.name);\n//     break;\ncase RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET:this.container.roomSession.pickupPet(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET:this.container.roomSession.mountPet(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_RIDING_PERMISSION:this.container.roomSession.togglePetRiding(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_BREEDING_PERMISSION:this.container.roomSession.togglePetBreeding(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET:this.container.roomSession.dismountPet(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.SADDLE_OFF:this.container.roomSession.removePetSaddle(userId);break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PASS_CARRY_ITEM:SendMessageComposer(new nitro_renderer[\"rh\" /* RoomUnitGiveHandItemComposer */](userId));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET:SendMessageComposer(new nitro_renderer[\"sh\" /* RoomUnitGiveHandItemPetComposer */](userId));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_WATER_TO_PET:SendMessageComposer(new nitro_renderer[\"uf\" /* PetSupplementComposer */](userId,PetSupplementEnum.WATER));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_LIGHT_TO_PET:SendMessageComposer(new nitro_renderer[\"uf\" /* PetSupplementComposer */](userId,PetSupplementEnum.LIGHT));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET:SendMessageComposer(new nitro_renderer[\"tf\" /* PetRespectComposer */](userId));break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DROP_CARRY_ITEM:SendMessageComposer(new nitro_renderer[\"qh\" /* RoomUnitDropHandItemComposer */]());break;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE:this.container.roomSession.userDataManager.requestPetInfo(userId);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT:return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT_CFH_OTHER:DispatchUiEvent(new HelpReportUserEvent_HelpReportUserEvent(userId));return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_ALERT_USER:this.container.roomSession.sendAmbassadorAlertMessage(userId);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_KICK_USER:this.container.roomSession.sendKickMessage(userId);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_2MIN:this.container.roomSession.sendMuteMessage(userId,2);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_10MIN:this.container.roomSession.sendMuteMessage(userId,10);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_60MIN:this.container.roomSession.sendMuteMessage(userId,60);return;case RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_18HOUR:this.container.roomSession.sendMuteMessage(userId,1080);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.ROTATE:GetRoomEngine().processRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_ROTATE_POSITIVE);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.MOVE:GetRoomEngine().processRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_MOVE);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.PICKUP:GetRoomEngine().processRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_PICKUP);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.EJECT:GetRoomEngine().processRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_EJECT);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.USE:GetRoomEngine().useRoomObject(objectId,category);return;case RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.SAVE_STUFF_DATA:{const furniMessage=message;if(!furniMessage.objectData)return;const mapData=new Map();const dataParts=furniMessage.objectData.split('\\t');if(dataParts){for(const part of dataParts){const[key,value]=part.split('=',2);mapData.set(key,value);}}GetRoomEngine().modifyRoomObjectDataWithMap(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_SAVE_STUFF_DATA,mapData);return;}case RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage.CHANGE_MOTTO:this.container.roomSession.sendMottoMessage(message.motto);return;}return null;}processObjectNameMessage(message){let id=-1;let name=null;let userType=0;switch(message.category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:{const roomObject=GetRoomEngine().getRoomObject(this.container.roomSession.roomId,message.id,message.category);if(!roomObject)break;if(roomObject.type.indexOf('poster')===0){name=LocalizeText('${poster_'+parseInt(roomObject.type.replace('poster',''))+'_name}');}else{let furniData=null;const typeId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);if(message.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR){furniData=GetSessionDataManager().getFloorItemData(typeId);}else if(message.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL){furniData=GetSessionDataManager().getWallItemData(typeId);}if(!furniData)break;id=furniData.id;name=furniData.name;}break;}case nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT:{const userData=this.container.roomSession.userDataManager.getUserDataByIndex(message.id);if(!userData)break;id=userData.webID;name=userData.name;userType=userData.type;break;}}if(name)this.container.eventDispatcher.dispatchEvent(new RoomWidgetObjectNameEvent_RoomWidgetObjectNameEvent(RoomWidgetObjectNameEvent_RoomWidgetObjectNameEvent.TYPE,message.id,message.category,id,name,userType));return null;}processObjectInfoMessage(message){const roomId=this.container.roomSession.roomId;switch(message.category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:this.processFurniInfoMessage(message,roomId);break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT:{const userData=this.container.roomSession.userDataManager.getUserDataByIndex(message.id);if(!userData)break;switch(userData.type){case nitro_renderer[\"Mg\" /* RoomObjectType */].PET:this.container.roomSession.userDataManager.requestPetInfo(userData.webID);break;case nitro_renderer[\"Mg\" /* RoomObjectType */].USER:this.processUserInfoMessage(message,roomId,userData);break;case nitro_renderer[\"Mg\" /* RoomObjectType */].BOT:this.processBotInfoMessage(message,roomId,userData);break;case nitro_renderer[\"Mg\" /* RoomObjectType */].RENTABLE_BOT:this.processRentableBotInfoMessage(message,roomId,userData);break;}}}return null;}processFurniInfoMessage(message,roomId){const event=new RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent(RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI);event.id=message.id;event.category=message.category;const roomObject=GetRoomEngine().getRoomObject(roomId,message.id,message.category);if(!roomObject)return;const model=roomObject.model;if(model.getValue(nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].INFOSTAND_EXTRA_PARAM)){event.extraParam=model.getValue(nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].INFOSTAND_EXTRA_PARAM);}const dataFormat=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA_FORMAT);const objectData=nitro_renderer[\"gf\" /* ObjectDataFactory */].getData(dataFormat);objectData.initializeFromRoomObjectModel(model);event.stuffData=objectData;const objectType=roomObject.type;if(objectType.indexOf('poster')===0){const posterId=parseInt(objectType.replace('poster',''));event.name=LocalizeText('${poster_'+posterId+'_name}');event.description=LocalizeText('${poster_'+posterId+'_desc}');}else{const typeId=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_TYPE_ID);let furnitureData=null;if(message.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR){furnitureData=GetSessionDataManager().getFloorItemData(typeId);}else if(message.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL){furnitureData=GetSessionDataManager().getWallItemData(typeId);}if(furnitureData){event.name=furnitureData.name;event.description=furnitureData.description;event.purchaseOfferId=furnitureData.purchaseOfferId;event.purchaseCouldBeUsedForBuyout=furnitureData.purchaseCouldBeUsedForBuyout;event.rentOfferId=furnitureData.rentOfferId;event.rentCouldBeUsedForBuyout=furnitureData.rentCouldBeUsedForBuyout;event.availableForBuildersClub=furnitureData.availableForBuildersClub;event.tileSizeX=furnitureData.tileSizeX;event.tileSizeY=furnitureData.tileSizeY;DispatchUiEvent(new WiredSelectObjectEvent_WiredSelectObjectEvent(event.id,event.category));}}if(objectType.indexOf('post_it')>-1)event.isStickie=true;const expiryTime=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_EXPIRY_TIME);const expiryTimestamp=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_EXPIRTY_TIMESTAMP);event.expiration=expiryTime<0?expiryTime:Math.max(0,expiryTime-(GetNitroInstance().time-expiryTimestamp)/1000);let roomObjectImage=GetRoomEngine().getRoomObjectImage(roomId,message.id,message.category,new nitro_renderer[\"Ui\" /* Vector3d */](180),64,null);if(!roomObjectImage.data||roomObjectImage.data.width>140||roomObjectImage.data.height>200){roomObjectImage=GetRoomEngine().getRoomObjectImage(roomId,message.id,message.category,new nitro_renderer[\"Ui\" /* Vector3d */](180),1,null);}event.image=roomObjectImage.getImage();event.isWallItem=message.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL;event.isRoomOwner=this.container.roomSession.isRoomOwner;event.roomControllerLevel=this.container.roomSession.controllerLevel;event.isAnyRoomController=GetSessionDataManager().isModerator;event.ownerId=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_ID);event.ownerName=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_NAME);event.usagePolicy=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_USAGE_POLICY);const guildId=model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);if(guildId!==0){event.groupId=guildId;//this.container.connection.send(new _Str_2863(guildId, false));\n}if(IsOwnerOfFurniture(roomObject))event.isOwner=true;this.container.eventDispatcher.dispatchEvent(event);}processUserInfoMessage(message,roomId,userData){let eventType=RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER;if(userData.webID!==GetSessionDataManager().userId)eventType=RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER;const event=new RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent(eventType);event.isSpectatorMode=this.container.roomSession.isSpectator;event.name=userData.name;event.motto=userData.custom;event.achievementScore=userData.activityPoints;event.webID=userData.webID;event.roomIndex=userData.roomIndex;event.userType=nitro_renderer[\"Mg\" /* RoomObjectType */].USER;const roomObject=GetRoomEngine().getRoomObject(roomId,userData.roomIndex,message.category);if(roomObject)event.carryItem=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT)||0;if(eventType===RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER)event.allowNameChange=GetSessionDataManager().canChangeName;event.amIOwner=this.container.roomSession.isRoomOwner;event.isGuildRoom=this.container.roomSession.isGuildRoom;event.roomControllerLevel=this.container.roomSession.controllerLevel;event.amIAnyRoomController=GetSessionDataManager().isModerator;event.isAmbassador=GetSessionDataManager().isAmbassador;if(eventType===RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER){if(roomObject){const flatControl=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_FLAT_CONTROL);if(flatControl!==null)event.targetRoomControllerLevel=flatControl;event.canBeMuted=this.canBeMuted(event);event.canBeKicked=this.canBeKicked(event);event.canBeBanned=this.canBeBanned(event);}event.isIgnored=GetSessionDataManager().isUserIgnored(userData.name);event.respectLeft=GetSessionDataManager().respectsLeft;const isShuttingDown=GetSessionDataManager().isSystemShutdown;const tradeMode=this.container.roomSession.tradeMode;if(isShuttingDown){event.canTrade=false;}else{switch(tradeMode){case nitro_renderer[\"oh\" /* RoomTradingLevelEnum */].ROOM_CONTROLLER_REQUIRED:{const roomController=event.roomControllerLevel!==nitro_renderer[\"eg\" /* RoomControllerLevel */].NONE&&event.roomControllerLevel!==nitro_renderer[\"eg\" /* RoomControllerLevel */].GUILD_MEMBER;const targetController=event.targetRoomControllerLevel!==nitro_renderer[\"eg\" /* RoomControllerLevel */].NONE&&event.targetRoomControllerLevel!==nitro_renderer[\"eg\" /* RoomControllerLevel */].GUILD_MEMBER;event.canTrade=roomController||targetController;break;}case nitro_renderer[\"oh\" /* RoomTradingLevelEnum */].NO_TRADING:event.canTrade=true;break;default:event.canTrade=false;break;}}event.canTradeReason=RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_OK;if(isShuttingDown)event.canTradeReason=RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_SHUTDOWN;if(tradeMode!==nitro_renderer[\"oh\" /* RoomTradingLevelEnum */].FREE_TRADING)event.canTradeReason=RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.TRADE_REASON_NO_TRADING;// const _local_12 = GetSessionDataManager().userId;\n// _local_13 = GetSessionDataManager()._Str_18437(_local_12);\n// this._Str_16287(_local_12, _local_13);\n}event.groupId=userData.groupId;event.groupBadgeId=GetSessionDataManager().getGroupBadge(event.groupId);event.groupName=userData.groupName;event.badges=this.container.roomSession.userDataManager.getUserBadges(userData.webID);event.figure=userData.figure;//var _local_8:Array = GetSessionDataManager()._Str_18437(userData.webID);\n//this._Str_16287(userData._Str_2394, _local_8);\n//this._container._Str_8097._Str_14387(userData.webID);\n//this._container.connection.send(new _Str_8049(userData._Str_2394));\nthis.container.eventDispatcher.dispatchEvent(event);}processBotInfoMessage(message,roomId,userData){const event=new RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT);event.name=userData.name;event.motto=userData.custom;event.webID=userData.webID;event.roomIndex=userData.roomIndex;event.userType=userData.type;const roomObject=GetRoomEngine().getRoomObject(roomId,userData.roomIndex,message.category);if(roomObject)event.carryItem=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT)||0;event.amIOwner=this.container.roomSession.isRoomOwner;event.isGuildRoom=this.container.roomSession.isGuildRoom;event.roomControllerLevel=this.container.roomSession.controllerLevel;event.amIAnyRoomController=GetSessionDataManager().isModerator;event.isAmbassador=GetSessionDataManager().isAmbassador;event.badges=[RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.DEFAULT_BOT_BADGE_ID];event.figure=userData.figure;this.container.eventDispatcher.dispatchEvent(event);}processRentableBotInfoMessage(message,roomId,userData){const event=new RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent(RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT);event.name=userData.name;event.motto=userData.custom;event.webID=userData.webID;event.roomIndex=userData.roomIndex;event.ownerId=userData.ownerId;event.ownerName=userData.ownerName;event.botSkills=userData.botSkills;const roomObject=GetRoomEngine().getRoomObject(roomId,userData.roomIndex,message.category);if(roomObject)event.carryItem=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT)||0;event.amIOwner=this.container.roomSession.isRoomOwner;event.roomControllerLevel=this.container.roomSession.controllerLevel;event.amIAnyRoomController=GetSessionDataManager().isModerator;event.badges=[RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.DEFAULT_BOT_BADGE_ID];event.figure=userData.figure;this.container.eventDispatcher.dispatchEvent(event);}processPetInfoEvent(event){const petData=event.petInfo;if(!petData)return;const roomPetData=this.container.roomSession.userDataManager.getPetData(petData.id);if(!roomPetData)return;const figure=new nitro_renderer[\"of\" /* PetFigureData */](roomPetData.figure);let posture=null;if(figure.typeId===nitro_renderer[\"vf\" /* PetType */].MONSTERPLANT){if(petData.level>=petData.adultLevel)posture='std';else posture='grw'+petData.level;}const isOwner=petData.ownerId===GetSessionDataManager().userId;const infostandEvent=new RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent(RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO);infostandEvent.name=roomPetData.name;infostandEvent.id=petData.id;infostandEvent.ownerId=petData.ownerId;infostandEvent.ownerName=petData.ownerName;infostandEvent.rarityLevel=petData.rarityLevel;infostandEvent.petType=figure.typeId;infostandEvent.petBreed=figure.paletteId;infostandEvent.petFigure=roomPetData.figure;infostandEvent.posture=posture;infostandEvent.isOwner=isOwner;infostandEvent.roomIndex=roomPetData.roomIndex;infostandEvent.level=petData.level;infostandEvent.maximumLevel=petData.maximumLevel;infostandEvent.experience=petData.experience;infostandEvent.levelExperienceGoal=petData.levelExperienceGoal;infostandEvent.energy=petData.energy;infostandEvent.maximumEnergy=petData.maximumEnergy;infostandEvent.happyness=petData.happyness;infostandEvent.maximumHappyness=petData.maximumHappyness;infostandEvent.respect=petData.respect;infostandEvent.respectsPetLeft=GetSessionDataManager().respectsPetLeft;infostandEvent.age=petData.age;infostandEvent.saddle=petData.saddle;infostandEvent.rider=petData.rider;infostandEvent.breedable=petData.breedable;infostandEvent.fullyGrown=petData.fullyGrown;infostandEvent.dead=petData.dead;infostandEvent.rarityLevel=petData.rarityLevel;infostandEvent.skillTresholds=petData.skillTresholds;infostandEvent.canRemovePet=false;infostandEvent.publiclyRideable=petData.publiclyRideable;infostandEvent.maximumTimeToLive=petData.maximumTimeToLive;infostandEvent.remainingTimeToLive=petData.remainingTimeToLive;infostandEvent.remainingGrowTime=petData.remainingGrowTime;infostandEvent.publiclyBreedable=petData.publiclyBreedable;if(isOwner){infostandEvent.canRemovePet=true;}else{if(this.container.roomSession.isRoomOwner||GetSessionDataManager().isModerator||this.container.roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST)infostandEvent.canRemovePet=true;}this.container.eventDispatcher.dispatchEvent(infostandEvent);}checkGuildSetting(event){if(event.isGuildRoom)return event.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUILD_ADMIN;return event.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST;}canBeMuted(event){const checkSetting=(event,moderation)=>{switch(moderation.allowMute){case nitro_renderer[\"Gg\" /* RoomModerationSettings */].MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(event);default:return event.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].ROOM_OWNER;}};return this.isValidSetting(event,checkSetting);}canBeKicked(event){const checkSetting=(event,moderation)=>{switch(moderation.allowKick){case nitro_renderer[\"Gg\" /* RoomModerationSettings */].MODERATION_LEVEL_ALL:return true;case nitro_renderer[\"Gg\" /* RoomModerationSettings */].MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(event);default:return event.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].ROOM_OWNER;}};return this.isValidSetting(event,checkSetting);}canBeBanned(event){const checkSetting=(event,moderation)=>{switch(moderation.allowBan){case nitro_renderer[\"Gg\" /* RoomModerationSettings */].MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(event);default:return event.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].ROOM_OWNER;}};return this.isValidSetting(event,checkSetting);}isValidSetting(event,checkSetting){if(!this.container.roomSession._Str_7411)return false;const moderation=this.container.roomSession.moderationSettings;let flag=false;if(moderation)flag=checkSetting(event,moderation);return flag&&event.targetRoomControllerLevel<nitro_renderer[\"eg\" /* RoomControllerLevel */].ROOM_OWNER;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].INFOSTAND;}get eventTypes(){return[nitro_renderer[\"ah\" /* RoomSessionPetInfoUpdateEvent */].PET_INFO,nitro_renderer[\"eh\" /* RoomSessionUserBadgesEvent */].RSUBE_BADGES,nitro_renderer[\"gh\" /* RoomSessionUserFigureUpdateEvent */].USER_FIGURE,nitro_renderer[\"Zg\" /* RoomSessionFavoriteGroupUpdateEvent */].FAVOURITE_GROUP_UPDATE];}get messageTypes(){return[RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_INFO,RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_NAME,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.WHISPER_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.IGNORE_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.UNIGNORE_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.KICK_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_DAY,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_HOUR,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_PERM,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_2MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_5MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_10MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_RIGHTS,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TAKE_RIGHTS,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_TRADING,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.OPEN_HOME_PAGE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PASS_CARRY_ITEM,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DROP_CARRY_ITEM,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_RIDING_PERMISSION,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_BREEDING_PERMISSION,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.SADDLE_OFF,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TRAIN_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_PET_UPDATE,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_LIGHT_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_WATER_TO_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT_CFH_OTHER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_ALERT_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_KICK_USER,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_2MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_10MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_60MIN,RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_18HOUR,RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage.CHANGE_MOTTO,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.MOVE,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.ROTATE,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.EJECT,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.PICKUP,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.USE,RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.SAVE_STUFF_DATA];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/UserChooserWidgetHandler.ts\nclass UserChooserWidgetHandler_UserChooserWidgetHandler extends RoomWidgetHandler{processEvent(event){}processWidgetMessage(message){if(!message)return null;switch(message.type){case RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.USER_CHOOSER:this.processChooser();break;case RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT:this.selectRoomObject(message);break;}return null;}processChooser(){const roomId=this.container.roomSession.roomId;const items=[];const userItems=GetRoomEngine().getRoomObjects(roomId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);userItems.forEach(roomObject=>{const userData=this.container.roomSession.userDataManager.getUserDataByIndex(roomObject.id);if(!userData)return;items.push(new RoomObjectItem(userData.roomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userData.name));});items.sort((a,b)=>{return a.name<b.name?-1:1;});this.container.eventDispatcher.dispatchEvent(new RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent(RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.USER_CHOOSER_CONTENT,items));}selectRoomObject(message){if(message.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT)return;GetRoomEngine().selectRoomObject(this.container.roomSession.roomId,message.id,message.category);}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].USER_CHOOSER;}get eventTypes(){return[];}get messageTypes(){return[RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.USER_CHOOSER,RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/WordQuizWidgetHandler.ts\nclass WordQuizWidgetHandler_WordQuizWidgetHandler extends RoomWidgetHandler{processEvent(event){const roomQuizEvent=event;let widgetEvent;switch(event.type){case nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].ANSWERED:const roomId=this.container.roomSession.roomId;const userData=this.container.roomSession.userDataManager.getUserData(roomQuizEvent.userId);if(!userData)return;widgetEvent=new RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_ANSWERED,roomQuizEvent.id);widgetEvent.value=roomQuizEvent.value;widgetEvent.userId=roomQuizEvent.userId;widgetEvent.answerCounts=roomQuizEvent.answerCounts;if(widgetEvent.value==='0'){GetRoomEngine().updateRoomObjectUserGesture(roomId,userData.roomIndex,nitro_renderer[\"k\" /* AvatarAction */].getGestureId(nitro_renderer[\"k\" /* AvatarAction */].GESTURE_SAD));}else{GetRoomEngine().updateRoomObjectUserGesture(roomId,userData.roomIndex,nitro_renderer[\"k\" /* AvatarAction */].getGestureId(nitro_renderer[\"k\" /* AvatarAction */].GESTURE_SMILE));}break;case nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].FINISHED:widgetEvent=new RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_FINISHED,roomQuizEvent.id);widgetEvent.pollId=roomQuizEvent.pollId;widgetEvent.questionId=roomQuizEvent.questionId;widgetEvent.answerCounts=roomQuizEvent.answerCounts;break;case nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].QUESTION:widgetEvent=new RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.NEW_QUESTION,roomQuizEvent.id);widgetEvent.question=roomQuizEvent.question;widgetEvent.duration=roomQuizEvent.duration;widgetEvent.pollType=roomQuizEvent.pollType;widgetEvent.questionId=roomQuizEvent.questionId;widgetEvent.pollId=roomQuizEvent.pollId;break;}if(!widgetEvent)return;this.container.eventDispatcher.dispatchEvent(widgetEvent);}processWidgetMessage(message){return null;}get type(){return nitro_renderer[\"yh\" /* RoomWidgetEnum */].WORD_QUIZZ;}get eventTypes(){return[nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].ANSWERED,nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].FINISHED,nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].QUESTION];}get messageTypes(){return[];}}\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/handlers/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/widgets/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/room/index.ts\n\n// CONCATENATED MODULE: ./src/api/nitro/SendMessageComposer.ts\nconst SendMessageComposer=event=>GetConnection().send(event);\n// CONCATENATED MODULE: ./src/api/nitro/SendWorkerEvent.ts\nconst SendWorkerEvent=message=>{GetNitroInstance().sendWorkerEvent(message);};\n// CONCATENATED MODULE: ./src/api/nitro/index.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/CatalogUtilities.ts\nconst GetPixelEffectIcon=id=>{return'';};const GetSubscriptionProductIcon=id=>{return'';};const GetOfferNodes=(offerNodes,offerId)=>{const nodes=offerNodes.get(offerId);const allowedNodes=[];if(nodes&&nodes.length){for(const node of nodes){if(!node.isVisible)continue;allowedNodes.push(node);}}return allowedNodes;};const FilterCatalogNode=(search,furniLines,node,nodes)=>{if(node.isVisible&&node.pageId>0){let nodeAdded=false;const hayStack=[node.pageName,node.localization].join(' ').toLowerCase().replace(/ /gi,'');if(hayStack.indexOf(search)>-1){nodes.push(node);nodeAdded=true;}if(!nodeAdded){for(const furniLine of furniLines){if(hayStack.indexOf(furniLine)>=0){nodes.push(node);break;}}}}for(const child of node.children)FilterCatalogNode(search,furniLines,child,nodes);};function GetPetIndexFromLocalization(localization){if(!localization.length)return 0;let index=localization.length-1;while(index>=0){if(isNaN(parseInt(localization.charAt(index))))break;index--;}if(index>0)return parseInt(localization.substring(index+1));return-1;}function GetPetAvailableColors(petIndex,palettes){switch(petIndex){case 0:return[[16743226],[16750435],[16764339],[0xF59500],[16498012],[16704690],[0xEDD400],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[0xABABAB],[0xD4D4D4],[0xFFFFFF],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[0xF59500],[16498012],[16704690],[0xEDD400],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[0xABABAB],[0xD4D4D4],[0xFFFFFF],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[0xD2FF00],[9764857]];case 3:return[[0xFFFFFF],[0xEEEEEE],[0xDDDDDD]];case 4:return[[0xFFFFFF],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[0xFFFFFF],[0xEEEEEE],[0xDDDDDD]];case 6:return[[0xFFFFFF],[0xEEEEEE],[0xDDDDDD],[16767177],[16770205],[16751331]];case 7:return[[0xCCCCCC],[0xAEAEAE],[16751331],[10149119],[16763290],[16743786]];default:{const colors=[];for(const palette of palettes){const petColorResult=GetRoomEngine().getPetColorResult(petIndex,palette.paletteId);if(!petColorResult)continue;if(petColorResult.primaryColor===petColorResult.secondaryColor){colors.push([petColorResult.primaryColor]);}else{colors.push([petColorResult.primaryColor,petColorResult.secondaryColor]);}}return colors;}}}\n// CONCATENATED MODULE: ./src/api/catalog/ProductTypeEnum.ts\nclass ProductTypeEnum{}ProductTypeEnum.WALL='i';ProductTypeEnum.FLOOR='s';ProductTypeEnum.EFFECT='e';ProductTypeEnum.HABBO_CLUB='h';ProductTypeEnum.BADGE='b';ProductTypeEnum.GAME_TOKEN='GAME_TOKEN';ProductTypeEnum.PET='p';ProductTypeEnum.ROBOT='r';\n// CONCATENATED MODULE: ./src/api/catalog/Product.ts\nclass Product_Product{constructor(productType,productClassId,extraParam,productCount,productData,furnitureData){let isUniqueLimitedItem=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;let uniqueLimitedItemSeriesSize=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;let uniqueLimitedItemsLeft=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;this._productType=void 0;this._productClassId=void 0;this._extraParam=void 0;this._productCount=void 0;this._productData=void 0;this._furnitureData=void 0;this._isUniqueLimitedItem=void 0;this._uniqueLimitedItemSeriesSize=void 0;this._uniqueLimitedItemsLeft=void 0;this._productType=productType.toLowerCase();this._productClassId=productClassId;this._extraParam=extraParam;this._productCount=productCount;this._productData=productData;this._furnitureData=furnitureData;this._isUniqueLimitedItem=isUniqueLimitedItem;this._uniqueLimitedItemSeriesSize=uniqueLimitedItemSeriesSize;this._uniqueLimitedItemsLeft=uniqueLimitedItemsLeft;}static stripAddonProducts(products){if(products.length===1)return products;return products.filter(product=>product.productType!==ProductTypeEnum.BADGE&&product.productType!==ProductTypeEnum.EFFECT&&product.productClassId!==Product_Product.EFFECT_CLASSID_NINJA_DISAPPEAR);}getIconUrl(){let offer=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let stuffData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(this._productType){case ProductTypeEnum.FLOOR:return GetRoomEngine().getFurnitureFloorIconUrl(this.productClassId);case ProductTypeEnum.WALL:{if(offer&&this._furnitureData){let iconName='';switch(this._furnitureData.className){case'floor':iconName=['th',this._furnitureData.className,offer.product.extraParam].join('_');break;case'wallpaper':iconName=['th','wall',offer.product.extraParam].join('_');break;case'landscape':iconName=['th',this._furnitureData.className,(offer.product.extraParam||'').replace('.','_'),'001'].join('_');break;}if(iconName!==''){const assetUrl=GetConfiguration('catalog.asset.url');return`${assetUrl}/${iconName}.png`;}}return GetRoomEngine().getFurnitureWallIconUrl(this.productClassId,this._extraParam);}case ProductTypeEnum.EFFECT:return GetPixelEffectIcon(this.productClassId);case ProductTypeEnum.HABBO_CLUB:return GetSubscriptionProductIcon(this.productClassId);case ProductTypeEnum.BADGE:return GetSessionDataManager().getBadgeUrl(this._extraParam);case ProductTypeEnum.ROBOT:return null;}return null;}get productType(){return this._productType;}get productClassId(){return this._productClassId;}get extraParam(){return this._extraParam;}set extraParam(extraParam){this._extraParam=extraParam;}get productCount(){return this._productCount;}get productData(){return this._productData;}get furnitureData(){return this._furnitureData;}get isUniqueLimitedItem(){return this._isUniqueLimitedItem;}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize;}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft;}set uniqueLimitedItemsLeft(uniqueLimitedItemsLeft){this._uniqueLimitedItemsLeft=uniqueLimitedItemsLeft;}}Product_Product.EFFECT_CLASSID_NINJA_DISAPPEAR=108;\n// CONCATENATED MODULE: ./src/api/catalog/Offer.ts\nclass Offer_Offer{constructor(offerId,localizationId,isRentOffer,priceInCredits,priceInActivityPoints,activityPointType,giftable,clubLevel,products,bundlePurchaseAllowed){this._pricingModel=void 0;this._priceType=void 0;this._offerId=void 0;this._localizationId=void 0;this._priceInCredits=void 0;this._priceInActivityPoints=void 0;this._activityPointType=void 0;this._giftable=void 0;this._isRentOffer=void 0;this._page=void 0;this._clubLevel=0;this._products=void 0;this._badgeCode=void 0;this._bundlePurchaseAllowed=false;this._offerId=offerId;this._localizationId=localizationId;this._isRentOffer=isRentOffer;this._priceInCredits=priceInCredits;this._priceInActivityPoints=priceInActivityPoints;this._activityPointType=activityPointType;this._giftable=giftable;this._clubLevel=clubLevel;this._products=products;this._bundlePurchaseAllowed=bundlePurchaseAllowed;this.setPricingModelForProducts();this.setPricingType();for(const product of products){if(product.productType===ProductTypeEnum.BADGE){this._badgeCode=product.extraParam;break;}}}activate(){}get clubLevel(){return this._clubLevel;}get page(){return this._page;}set page(k){this._page=k;}get offerId(){return this._offerId;}get localizationId(){return this._localizationId;}get priceInCredits(){return this._priceInCredits;}get priceInActivityPoints(){return this._priceInActivityPoints;}get activityPointType(){return this._activityPointType;}get giftable(){return this._giftable;}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const products=Product_Product.stripAddonProducts(this._products);if(products.length)return products[0];return null;}get pricingModel(){return this._pricingModel;}get priceType(){return this._priceType;}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed;}get isRentOffer(){return this._isRentOffer;}get badgeCode(){return this._badgeCode;}get localizationName(){const productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.name;return LocalizeText(this._localizationId);}get localizationDescription(){const productData=GetProductDataForLocalization(this._localizationId);if(productData)return productData.description;return LocalizeText(this._localizationId);}get isLazy(){return false;}get products(){return this._products;}setPricingModelForProducts(){const products=Product_Product.stripAddonProducts(this._products);if(products.length===1){if(products[0].productCount===1){this._pricingModel=Offer_Offer.PRICING_MODEL_SINGLE;}else{this._pricingModel=Offer_Offer.PRICING_MODEL_MULTI;}}else if(products.length>1){this._pricingModel=Offer_Offer.PRICING_MODEL_BUNDLE;}else{this._pricingModel=Offer_Offer.PRICING_MODEL_UNKNOWN;}}setPricingType(){if(this._priceInCredits>0&&this._priceInActivityPoints>0){this._priceType=Offer_Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS;}else if(this._priceInCredits>0){this._priceType=Offer_Offer.PRICE_TYPE_CREDITS;}else if(this._priceInActivityPoints>0){this._priceType=Offer_Offer.PRICE_TYPE_ACTIVITYPOINTS;}else{this._priceType=Offer_Offer.PRICE_TYPE_NONE;}}clone(){const products=[];const productData=GetProductDataForLocalization(this.localizationId);for(const product of this._products){const furnitureData=GetFurnitureData(product.productClassId,product.productType);products.push(new Product_Product(product.productType,product.productClassId,product.extraParam,product.productCount,productData,furnitureData));}const offer=new Offer_Offer(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,products,this.bundlePurchaseAllowed);offer.page=this.page;return offer;}}Offer_Offer.PRICING_MODEL_UNKNOWN='pricing_model_unknown';Offer_Offer.PRICING_MODEL_SINGLE='pricing_model_single';Offer_Offer.PRICING_MODEL_MULTI='pricing_model_multi';Offer_Offer.PRICING_MODEL_BUNDLE='pricing_model_bundle';Offer_Offer.PRICING_MODEL_FURNITURE='pricing_model_furniture';Offer_Offer.PRICE_TYPE_NONE='price_type_none';Offer_Offer.PRICE_TYPE_CREDITS='price_type_credits';Offer_Offer.PRICE_TYPE_ACTIVITYPOINTS='price_type_activitypoints';Offer_Offer.PRICE_TYPE_CREDITS_ACTIVITYPOINTS='price_type_credits_and_activitypoints';\n// CONCATENATED MODULE: ./src/api/catalog/FurnitureOffer.ts\nclass FurnitureOffer_FurnitureOffer{constructor(furniData){this._furniData=void 0;this._page=void 0;this._product=void 0;this._furniData=furniData;this._product=new Product_Product(this._furniData.type,this._furniData.id,this._furniData.customParams,1,GetProductDataForLocalization(this._furniData.className),this._furniData);}activate(){SendMessageComposer(new nitro_renderer[\"vc\" /* GetProductOfferComposer */](this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId));}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId;}get priceInActivityPoints(){return 0;}get activityPointType(){return 0;}get priceInCredits(){return 0;}get page(){return this._page;}set page(page){this._page=page;}get priceType(){return'';}get product(){return this._product;}get products(){return[this._product];}get localizationId(){return'roomItem.name.'+this._furniData.id;}get bundlePurchaseAllowed(){return false;}get isRentOffer(){return this._furniData.rentOfferId>-1;}get giftable(){return false;}get pricingModel(){return Offer_Offer.PRICING_MODEL_FURNITURE;}get clubLevel(){return 0;}get badgeCode(){return'';}get localizationName(){return this._furniData.name;}get localizationDescription(){return this._furniData.description;}get isLazy(){return true;}}\n// CONCATENATED MODULE: ./src/api/catalog/GiftWrappingConfiguration.ts\nclass GiftWrappingConfiguration{constructor(parser){this._isEnabled=false;this._price=null;this._stuffTypes=null;this._boxTypes=null;this._ribbonTypes=null;this._defaultStuffTypes=null;this._isEnabled=parser.isEnabled;this._price=parser.price;this._boxTypes=parser.boxTypes;this._ribbonTypes=parser.ribbonTypes;this._stuffTypes=parser.giftWrappers;this._defaultStuffTypes=parser.giftFurnis;}get isEnabled(){return this._isEnabled;}get price(){return this._price;}get stuffTypes(){return this._stuffTypes;}get boxTypes(){return this._boxTypes;}get ribbonTypes(){return this._ribbonTypes;}get defaultStuffTypes(){return this._defaultStuffTypes;}}\n// CONCATENATED MODULE: ./src/api/catalog/ICatalogNode.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/ICatalogOptions.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/ICatalogPage.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/IPageLocalization.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/IProduct.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/IPurchasableOffer.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/IPurchaseOptions.ts\n\n// CONCATENATED MODULE: ./src/api/catalog/PageLocalization.ts\nclass PageLocalization_PageLocalization{constructor(images,texts){this._images=void 0;this._texts=void 0;this._images=images;this._texts=texts;}getText(index){let message=this._texts[index]||'';if(message&&message.length)message=message.replace(/\\r\\n|\\r|\\n/g,'<br />');return message;}getImage(index){const imageName=this._images[index]||'';if(!imageName||!imageName.length)return null;let assetUrl=GetConfiguration('catalog.asset.image.url');assetUrl=assetUrl.replace('%name%',imageName);return assetUrl;}}\n// CONCATENATED MODULE: ./src/api/catalog/PlacedObjectPurchaseData.ts\nclass PlacedObjectPurchaseData{constructor(roomId,objectId,category,wallLocation,x,y,direction,offer){this.roomId=roomId;this.objectId=objectId;this.category=category;this.wallLocation=wallLocation;this.x=x;this.y=y;this.direction=direction;this.offer=offer;}get offerId(){return this.offer.offerId;}get productClassId(){return this.offer.product.productClassId;}get productData(){return this.offer.product.productData;}get furniData(){return this.offer.product.furnitureData;}get extraParam(){return this.offer.product.extraParam;}}\n// CONCATENATED MODULE: ./src/api/catalog/RequestedPage.ts\nclass RequestedPage{constructor(){this._requestType=void 0;this._requestById=void 0;this._requestedByOfferId=void 0;this._requestByName=void 0;this._requestType=RequestedPage.REQUEST_TYPE_NONE;}resetRequest(){this._requestType=RequestedPage.REQUEST_TYPE_NONE;this._requestById=-1;this._requestedByOfferId=-1;this._requestByName=null;}get requestType(){return this._requestType;}get requestById(){return this._requestById;}set requestById(id){this._requestType=RequestedPage.REQUEST_TYPE_ID;this._requestById=id;}get requestedByOfferId(){return this._requestedByOfferId;}set requestedByOfferId(offerId){this._requestType=RequestedPage.REQUEST_TYPE_OFFER;this._requestedByOfferId=offerId;}get requestByName(){return this._requestByName;}set requestByName(name){this._requestType=RequestedPage.REQUEST_TYPE_NAME;this._requestByName=name;}}RequestedPage.REQUEST_TYPE_NONE=0;RequestedPage.REQUEST_TYPE_ID=1;RequestedPage.REQUEST_TYPE_OFFER=2;RequestedPage.REQUEST_TYPE_NAME=3;\n// CONCATENATED MODULE: ./src/api/catalog/SearchResult.ts\nclass SearchResult{constructor(searchValue,offers,filteredNodes){this.searchValue=searchValue;this.offers=offers;this.filteredNodes=filteredNodes;}}\n// CONCATENATED MODULE: ./src/api/catalog/index.ts\n\n// CONCATENATED MODULE: ./src/api/core/GetNitroCore.ts\nfunction GetNitroCore(){return GetNitroInstance().core;}\n// CONCATENATED MODULE: ./src/api/core/GetConfigurationManager.ts\nfunction GetConfigurationManager(){return GetNitroCore().configuration;}\n// CONCATENATED MODULE: ./src/api/core/index.ts\n\n// CONCATENATED MODULE: ./src/api/friends/GetGroupChatData.ts\nconst GetGroupChatData=extraData=>{if(!extraData||!extraData.length)return null;const splitData=extraData.split('/');const username=splitData[0];const figure=splitData[1];const userId=parseInt(splitData[2]);return{username:username,figure:figure,userId:userId};};\n// CONCATENATED MODULE: ./src/api/friends/GroupType.ts\nclass GroupType{}GroupType.GROUP_CHAT=0;GroupType.PRIVATE_CHAT=1;\n// CONCATENATED MODULE: ./src/api/friends/IGroupChatData.ts\n\n// CONCATENATED MODULE: ./src/api/friends/MessengerIconState.ts\nclass MessengerIconState{}MessengerIconState.HIDDEN=0;MessengerIconState.SHOW=1;MessengerIconState.UNREAD=2;\n// CONCATENATED MODULE: ./src/api/friends/MessengerRequest.ts\nclass MessengerRequest{constructor(){this._id=void 0;this._name=void 0;this._requesterUserId=void 0;this._figureString=void 0;}populate(data){if(!data)return false;this._id=data.requestId;this._name=data.requesterName;this._figureString=data.figureString;this._requesterUserId=data.requesterUserId;return true;}get id(){return this._id;}get name(){return this._name;}get requesterUserId(){return this._requesterUserId;}get figureString(){return this._figureString;}}\n// CONCATENATED MODULE: ./src/api/friends/MessengerSettings.ts\nclass MessengerSettings{constructor(){let userFriendLimit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let normalFriendLimit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let extendedFriendLimit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let categories=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];this.userFriendLimit=userFriendLimit;this.normalFriendLimit=normalFriendLimit;this.extendedFriendLimit=extendedFriendLimit;this.categories=categories;}}\n// CONCATENATED MODULE: ./src/api/friends/MessengerThreadChat.ts\nclass MessengerThreadChat{constructor(senderId,message){let secondsSinceSent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let extraData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let type=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;this._type=void 0;this._senderId=void 0;this._message=void 0;this._secondsSinceSent=void 0;this._extraData=void 0;this._date=void 0;this._type=type;this._senderId=senderId;this._message=message;this._secondsSinceSent=secondsSinceSent;this._extraData=extraData;this._date=new Date();}get type(){return this._type;}get senderId(){return this._senderId;}get message(){return this._message;}get secondsSinceSent(){return this._secondsSinceSent;}get extraData(){return this._extraData;}get date(){return this._date;}}MessengerThreadChat.CHAT=0;MessengerThreadChat.ROOM_INVITE=1;MessengerThreadChat.STATUS_NOTIFICATION=2;MessengerThreadChat.SECURITY_NOTIFICATION=3;\n// CONCATENATED MODULE: ./src/api/friends/MessengerThreadChatGroup.ts\nclass MessengerThreadChatGroup_MessengerThreadChatGroup{constructor(userId){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:GroupType.PRIVATE_CHAT;this._userId=void 0;this._chats=void 0;this._type=void 0;this._userId=userId;this._chats=[];this._type=type;}addChat(message){this._chats.push(message);}get userId(){return this._userId;}get chats(){return this._chats;}get type(){return this._type;}set type(type){this._type=type;}}\n// CONCATENATED MODULE: ./src/api/friends/MessengerThread.ts\nclass MessengerThread_MessengerThread{constructor(participant){let isNew=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this._threadId=void 0;this._participant=void 0;this._groups=void 0;this._lastUpdated=void 0;this._unreadCount=void 0;this._threadId=++MessengerThread_MessengerThread.THREAD_ID;this._participant=participant;this._groups=[];this._lastUpdated=new Date();this._unreadCount=0;if(isNew){this.addMessage(null,LocalizeText('messenger.moderationinfo'),0,null,MessengerThreadChat.SECURITY_NOTIFICATION);this._unreadCount=0;}}addMessage(senderId,message){let secondsSinceSent=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let extraData=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let type=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;const isGroupChat=senderId<0&&extraData;const userId=isGroupChat?GetGroupChatData(extraData).userId:senderId;const group=this.getLastGroup(userId);if(!group)return;if(isGroupChat)group.type=GroupType.GROUP_CHAT;const chat=new MessengerThreadChat(senderId,message,secondsSinceSent,extraData,type);group.addChat(chat);this._lastUpdated=new Date();this._unreadCount++;return chat;}getLastGroup(userId){let group=this._groups[this._groups.length-1];if(group&&group.userId===userId)return group;group=new MessengerThreadChatGroup_MessengerThreadChatGroup(userId);this._groups.push(group);return group;}setRead(){this._unreadCount=0;}get threadId(){return this._threadId;}get participant(){return this._participant;}get groups(){return this._groups;}get lastUpdated(){return this._lastUpdated;}get unreadCount(){return this._unreadCount;}get unread(){return this._unreadCount>0;}}MessengerThread_MessengerThread.MESSAGE_RECEIVED='MT_MESSAGE_RECEIVED';MessengerThread_MessengerThread.THREAD_ID=0;\n// CONCATENATED MODULE: ./src/api/friends/OpenMessengerChat.ts\nfunction OpenMessengerChat(){let friendId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(friendId===0)CreateLinkEvent('friends-messenger/open');else CreateLinkEvent(`friends-messenger/${friendId}`);}\n// CONCATENATED MODULE: ./src/api/friends/index.ts\n\n// CONCATENATED MODULE: ./src/api/GetRendererVersion.ts\nconst GetRendererVersion=()=>nitro_renderer[\"ef\" /* NitroVersion */].RENDERER_VERSION;\n// CONCATENATED MODULE: ./src/api/GetUIVersion.ts\nconst GetUIVersion=()=>'2.0.0';\n// CONCATENATED MODULE: ./src/api/groups/GetGroupInformation.ts\nfunction GetGroupInformation(groupId){SendMessageComposer(new nitro_renderer[\"Tc\" /* GroupInformationComposer */](groupId,true));}\n// CONCATENATED MODULE: ./src/api/groups/GetGroupManager.ts\nfunction GetGroupManager(groupId){CreateLinkEvent(`groups/manage/${groupId}`);}\n// CONCATENATED MODULE: ./src/api/groups/GetGroupMembers.ts\nfunction GetGroupMembers(groupId,levelId){if(!levelId)CreateLinkEvent(`group-members/${groupId}`);else CreateLinkEvent(`group-members/${groupId}/${levelId}`);}\n// CONCATENATED MODULE: ./src/api/groups/ToggleFavoriteGroup.ts\nconst ToggleFavoriteGroup=group=>{SendMessageComposer(group.favourite?new nitro_renderer[\"jd\" /* GroupUnfavoriteComposer */](group.groupId):new nitro_renderer[\"Rc\" /* GroupFavoriteComposer */](group.groupId));};\n// CONCATENATED MODULE: ./src/api/groups/TryJoinGroup.ts\nconst TryJoinGroup=groupId=>SendMessageComposer(new nitro_renderer[\"Vc\" /* GroupJoinComposer */](groupId));\n// CONCATENATED MODULE: ./src/api/groups/index.ts\n\n// CONCATENATED MODULE: ./src/api/hc-center/ClubStatus.ts\nclass ClubStatus{}ClubStatus.ACTIVE='active';ClubStatus.NONE='none';ClubStatus.EXPIRED='expired';\n// CONCATENATED MODULE: ./src/api/hc-center/GetClubBadge.ts\nconst DEFAULT_BADGE='HC1';const BADGES=['ACH_VipHC1','ACH_VipHC2','ACH_VipHC3','ACH_VipHC4','ACH_VipHC5','HC1','HC2','HC3','HC4','HC5'];const GetClubBadge=badgeCodes=>{let badgeCode=null;BADGES.forEach(badge=>badgeCodes.indexOf(badge)>-1&&(badgeCode=badge));return badgeCode||DEFAULT_BADGE;};\n// CONCATENATED MODULE: ./src/api/hc-center/index.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/DoorStateType.ts\nclass DoorStateType{}DoorStateType.NONE=0;DoorStateType.START_DOORBELL=1;DoorStateType.START_PASSWORD=2;DoorStateType.STATE_PENDING_SERVER=3;DoorStateType.UPDATE_STATE=4;DoorStateType.STATE_WAITING=5;DoorStateType.STATE_NO_ANSWER=6;DoorStateType.STATE_WRONG_PASSWORD=7;DoorStateType.STATE_ACCEPTED=8;\n// CONCATENATED MODULE: ./src/api/navigator/INavigatorData.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/INavigatorSearchFilter.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/IRoomChatSettings.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/IRoomData.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/IRoomModel.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/IRoomModerationSettings.ts\n\n// CONCATENATED MODULE: ./src/api/navigator/NavigatorSearchResultViewDisplayMode.ts\nclass NavigatorSearchResultViewDisplayMode{}NavigatorSearchResultViewDisplayMode.LIST=0;NavigatorSearchResultViewDisplayMode.THUMBNAILS=1;NavigatorSearchResultViewDisplayMode.FORCED_THUMBNAILS=2;\n// CONCATENATED MODULE: ./src/api/navigator/RoomInfoData.ts\nclass RoomInfoData{constructor(){this._enteredGuestRoom=null;this._createdRoomId=0;this._currentRoomId=0;this._currentRoomOwner=false;this._canRate=false;}get enteredGuestRoom(){return this._enteredGuestRoom;}set enteredGuestRoom(data){this._enteredGuestRoom=data;}get createdRoomId(){return this._createdRoomId;}set createdRoomId(id){this._createdRoomId=id;}get currentRoomId(){return this._currentRoomId;}set currentRoomId(id){this._currentRoomId=id;}get currentRoomOwner(){return this._currentRoomOwner;}set currentRoomOwner(flag){this._currentRoomOwner=flag;}get canRate(){return this._canRate;}set canRate(flag){this._canRate=flag;}}\n// CONCATENATED MODULE: ./src/api/navigator/RoomSettingsData.ts\nclass RoomSettingsData{constructor(parser){this.roomId=void 0;this.roomName=void 0;this.roomOriginalName=void 0;this.roomDescription=void 0;this.categoryId=void 0;this.userCount=void 0;this.tags=void 0;this.tradeState=void 0;this.allowWalkthrough=void 0;this.lockState=void 0;this.originalLockState=void 0;this.password=void 0;this.confirmPassword=void 0;this.allowPets=void 0;this.allowPetsEat=void 0;this.usersWithRights=void 0;this.hideWalls=void 0;this.wallThickness=void 0;this.floorThickness=void 0;this.chatBubbleMode=void 0;this.chatBubbleWeight=void 0;this.chatBubbleSpeed=void 0;this.chatFloodProtection=void 0;this.chatDistance=void 0;this.muteState=void 0;this.kickState=void 0;this.banState=void 0;this.bannedUsers=void 0;this.selectedUserToUnban=void 0;if(!parser)throw new Error('invalid_parser');this.roomId=parser.roomId;this.roomName=parser.name;this.roomOriginalName=parser.name;this.roomDescription=parser.description;this.categoryId=parser.categoryId;this.userCount=parser.userCount;this.tags=parser.tags;this.tradeState=parser.tradeMode;this.allowWalkthrough=parser.allowWalkthrough;this.lockState=parser.state;this.originalLockState=parser.state;this.password=null;this.confirmPassword=null;this.allowPets=parser.allowPets;this.allowPetsEat=parser.allowPetsEat;this.usersWithRights=new Map();this.hideWalls=parser.hideWalls;this.wallThickness=parser.thicknessWall;this.floorThickness=parser.thicknessFloor;this.chatBubbleMode=parser.chatSettings.mode;this.chatBubbleWeight=parser.chatSettings.weight;this.chatBubbleSpeed=parser.chatSettings.speed;this.chatFloodProtection=parser.chatSettings.protection;this.chatDistance=parser.chatSettings.distance;this.muteState=parser.moderationSettings.allowMute;this.kickState=parser.moderationSettings.allowKick;this.banState=parser.moderationSettings.allowBan;this.bannedUsers=[];}}\n// CONCATENATED MODULE: ./src/api/navigator/RoomSettingsUtils.ts\nconst BuildMaxVisitorsList=()=>{const list=[];for(let i=10;i<=100;i=i+10)list.push(i);return list;};const GetMaxVisitorsList=BuildMaxVisitorsList();\n// CONCATENATED MODULE: ./src/api/navigator/SearchFilterOptions.ts\nconst SearchFilterOptions=[{name:'anything',query:null},{name:'room.name',query:'roomname'},{name:'owner',query:'owner'},{name:'tag',query:'tag'},{name:'group',query:'group'}];\n// CONCATENATED MODULE: ./src/api/navigator/TryVisitRoom.ts\nfunction TryVisitRoom(roomId){SendMessageComposer(new nitro_renderer[\"Cg\" /* RoomInfoComposer */](roomId,false,true));}\n// CONCATENATED MODULE: ./src/api/navigator/index.ts\n\n// CONCATENATED MODULE: ./src/api/notification/NotificationAlertType.ts\nclass NotificationAlertType{}NotificationAlertType.DEFAULT='default';NotificationAlertType.MOTD='motd';NotificationAlertType.MODERATION='moderation';NotificationAlertType.EVENT='event';NotificationAlertType.NITRO='nitro';NotificationAlertType.SEARCH='search';NotificationAlertType.ALERT='alert';\n// CONCATENATED MODULE: ./src/api/notification/NotificationAlertItem.ts\nclass NotificationAlertItem_NotificationAlertItem{constructor(messages){let alertType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NotificationAlertType.DEFAULT;let clickUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let clickUrlText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let title=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let imageUrl=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;this._id=void 0;this._messages=void 0;this._alertType=void 0;this._clickUrl=void 0;this._clickUrlText=void 0;this._title=void 0;this._imageUrl=void 0;NotificationAlertItem_NotificationAlertItem.ITEM_ID+=1;this._id=NotificationAlertItem_NotificationAlertItem.ITEM_ID;this._messages=messages;this._alertType=alertType;this._clickUrl=clickUrl;this._clickUrlText=clickUrlText;this._title=title;this._imageUrl=imageUrl;}get id(){return this._id;}get messages(){return this._messages;}set alertType(alertType){this._alertType=alertType;}get alertType(){return this._alertType;}get clickUrl(){return this._clickUrl;}get clickUrlText(){return this._clickUrlText;}get title(){return this._title;}get imageUrl(){return this._imageUrl;}}NotificationAlertItem_NotificationAlertItem.ITEM_ID=-1;\n// CONCATENATED MODULE: ./src/api/notification/NotificationBubbleType.ts\nclass NotificationBubbleType{}NotificationBubbleType.FRIENDOFFLINE='friendoffline';NotificationBubbleType.FRIENDONLINE='friendonline';NotificationBubbleType.THIRDPARTYFRIENDOFFLINE='thirdpartyfriendoffline';NotificationBubbleType.THIRDPARTYFRIENDONLINE='thirdpartyfriendonline';NotificationBubbleType.ACHIEVEMENT='achievement';NotificationBubbleType.BADGE_RECEIVED='badge_received';NotificationBubbleType.INFO='info';NotificationBubbleType.RECYCLEROK='recyclerok';NotificationBubbleType.RESPECT='respect';NotificationBubbleType.CLUB='club';NotificationBubbleType.SOUNDMACHINE='soundmachine';NotificationBubbleType.PETLEVEL='petlevel';NotificationBubbleType.CLUBGIFT='clubgift';NotificationBubbleType.BUYFURNI='buyfurni';NotificationBubbleType.VIP='vip';NotificationBubbleType.ROOMMESSAGESPOSTED='roommessagesposted';\n// CONCATENATED MODULE: ./src/api/notification/NotificationBubbleItem.ts\nclass NotificationBubbleItem_NotificationBubbleItem{constructor(message){let notificationType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:NotificationBubbleType.INFO;let iconUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let linkUrl=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;this._id=void 0;this._message=void 0;this._notificationType=void 0;this._iconUrl=void 0;this._linkUrl=void 0;NotificationBubbleItem_NotificationBubbleItem.ITEM_ID+=1;this._id=NotificationBubbleItem_NotificationBubbleItem.ITEM_ID;this._message=message;this._notificationType=notificationType;this._iconUrl=iconUrl;this._linkUrl=linkUrl;}get id(){return this._id;}get message(){return this._message;}get notificationType(){return this._notificationType;}get iconUrl(){return this._iconUrl;}get linkUrl(){return this._linkUrl;}}NotificationBubbleItem_NotificationBubbleItem.ITEM_ID=-1;\n// CONCATENATED MODULE: ./src/api/notification/NotificationConfirmItem.ts\nclass NotificationConfirmItem{constructor(confirmType,message,onConfirm,onCancel,confirmText,cancelText,title){this._id=void 0;this._confirmType=void 0;this._message=void 0;this._onConfirm=void 0;this._onCancel=void 0;this._confirmText=void 0;this._cancelText=void 0;this._title=void 0;NotificationConfirmItem.ITEM_ID+=1;this._id=NotificationConfirmItem.ITEM_ID;this._confirmType=confirmType;this._message=message;this._onConfirm=onConfirm;this._onCancel=onCancel;this._confirmText=confirmText;this._cancelText=cancelText;this._title=title;}get id(){return this._id;}get confirmType(){return this._confirmType;}get message(){return this._message;}get onConfirm(){return this._onConfirm;}get onCancel(){return this._onCancel;}get confirmText(){return this._confirmText;}get cancelText(){return this._cancelText;}get title(){return this._title;}}NotificationConfirmItem.ITEM_ID=-1;\n// CONCATENATED MODULE: ./src/api/notification/NotificationConfirmType.ts\nclass NotificationConfirmType{}NotificationConfirmType.DEFAULT='default';\n// CONCATENATED MODULE: ./src/api/notification/NotificationUtilities.ts\nclass NotificationUtilities_NotificationUtilities{static cleanText(text){return text.replace(/\\\\r/g,'\\r');}static getTimeZeroPadded(time){const text='0'+time;return text.substr(text.length-2,text.length);}static getMainNotificationConfig(){return GetConfiguration('notification',{});}static getNotificationConfig(key){const mainConfig=this.getMainNotificationConfig();if(!mainConfig)return null;return mainConfig[key];}static getNotificationPart(options,type,key,localize){if(options.has(key))return options.get(key);const localizeKey=['notification',type,key].join('.');if(GetNitroInstance().localization.hasValue(localizeKey)||localize){return LocalizeText(localizeKey,Array.from(options.keys()),Array.from(options.values()));}return null;}static getNotificationImageUrl(options,type){let imageUrl=options.get('image');if(!imageUrl)imageUrl=GetConfiguration('image.library.notifications.url','').replace('%image%',type.replace(/\\./g,'_'));return LocalizeText(imageUrl);}static showNotification(type){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!options)options=new Map();const configuration=this.getNotificationConfig('notification.'+type);if(configuration)for(const key in configuration)options.set(key,configuration[key]);const title=this.getNotificationPart(options,type,'title',true);const message=this.getNotificationPart(options,type,'message',true).replace(/\\\\r/g,'\\r');const linkTitle=this.getNotificationPart(options,type,'linkTitle',false);const linkUrl=this.getNotificationPart(options,type,'linkUrl',false);const image=this.getNotificationImageUrl(options,type);if(options.get('display')==='BUBBLE'){this.showSingleBubble(LocalizeText(message),NotificationBubbleType.INFO,image,linkUrl);}else{this.simpleAlert(message,type,linkUrl,linkTitle,title,image);}if(options.get('sound'))PlaySound(options.get('sound'));}static showSingleBubble(message,type){let imageUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let internalLink=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;if(this.BUBBLES_DISABLED)return;DispatchUiEvent(new NotificationBubbleEvent_NotificationBubbleEvent(message,type,imageUrl,internalLink));}static showClubGiftNotification(numGifts){if(numGifts<=0)return;this.showSingleBubble(numGifts.toString(),NotificationBubbleType.CLUBGIFT,null,'catalog/open/'+GetConfiguration('catalog.links')['hc.hc_gifts']);}static handleMOTD(messages){messages=messages.map(message=>this.cleanText(message));DispatchUiEvent(new NotificationAlertEvent_NotificationAlertEvent(messages,NotificationAlertType.MOTD,null,null,LocalizeText('notifications.motd.title')));}static confirm(message,onConfirm,onCancel){let confirmText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let cancelText=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let title=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;let type=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;if(!confirmText||!confirmText.length)confirmText=LocalizeText('generic.confirm');if(!cancelText||!cancelText.length)cancelText=LocalizeText('generic.cancel');if(!title||!title.length)title=LocalizeText('notifications.broadcast.title');DispatchUiEvent(new NotificationConfirmEvent_NotificationConfirmEvent(type,this.cleanText(message),onConfirm,onCancel,confirmText,cancelText,title));}static simpleAlert(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let clickUrl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let clickUrlText=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let title=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;let imageUrl=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;if(!title||!title.length)title=LocalizeText('notifications.broadcast.title');if(!type||!type.length)type=NotificationAlertType.DEFAULT;DispatchUiEvent(new NotificationAlertEvent_NotificationAlertEvent([this.cleanText(message)],type,clickUrl,clickUrlText,title,imageUrl));}static showNitroAlert(){DispatchUiEvent(new NotificationAlertEvent_NotificationAlertEvent(null,NotificationAlertType.NITRO));}static showModeratorMessage(message){let url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let showHabboWay=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.simpleAlert(message,NotificationAlertType.DEFAULT,url,LocalizeText('mod.alert.link'),LocalizeText('mod.alert.title'));}static handleModeratorCaution(message){let url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.showModeratorMessage(message,url);}static handleModeratorMessage(message){let url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.showModeratorMessage(message,url,false);}static handleUserBannedMessage(message){this.showModeratorMessage(message);}static handleHotelClosedMessage(open,minute,thrownOut){this.simpleAlert(LocalizeText('opening.hours.'+(thrownOut?'disconnected':'closed'),['h','m'],[this.getTimeZeroPadded(open),this.getTimeZeroPadded(minute)]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}static handleHotelMaintenanceMessage(minutesUntilMaintenance,duration){this.simpleAlert(LocalizeText('maintenance.shutdown',['m','d'],[minutesUntilMaintenance.toString(),duration.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}static handleHotelClosingMessage(minutes){this.simpleAlert(LocalizeText('opening.hours.shutdown',['m'],[minutes.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}static handleLoginFailedHotelClosedMessage(openHour,openMinutes){this.simpleAlert(LocalizeText('opening.hours.disconnected',['h','m'],[openHour.toString(),openMinutes.toString()]),NotificationAlertType.DEFAULT,null,null,LocalizeText('opening.hours.title'));}static openUrl(url){if(!url||!url.length)return;if(url.startsWith('http')){nitro_renderer[\"Jd\" /* HabboWebTools */].openWebPage(url);}else{CreateLinkEvent(url);}}static showModerationDisclaimer(){if(nitro_renderer[\"ug\" /* RoomEnterEffect */].isRunning()){if(this.MODERATION_DISCLAIMER_TIMEOUT)return;this.MODERATION_DISCLAIMER_TIMEOUT=setTimeout(()=>{this.showModerationDisclaimer();},nitro_renderer[\"ug\" /* RoomEnterEffect */].totalRunningTime+this.MODERATION_DISCLAIMER_DELAY_MS);}else{if(this.MODERATION_DISCLAIMER_SHOWN)return;this.showSingleBubble(LocalizeText('mod.chatdisclaimer'),NotificationBubbleType.INFO);this.MODERATION_DISCLAIMER_SHOWN=true;}}}NotificationUtilities_NotificationUtilities.MODERATION_DISCLAIMER_SHOWN=false;NotificationUtilities_NotificationUtilities.MODERATION_DISCLAIMER_DELAY_MS=5000;NotificationUtilities_NotificationUtilities.MODERATION_DISCLAIMER_TIMEOUT=null;NotificationUtilities_NotificationUtilities.BUBBLES_DISABLED=false;\n// CONCATENATED MODULE: ./src/api/notification/index.ts\n\n// CONCATENATED MODULE: ./src/api/purse/IPurse.ts\n\n// CONCATENATED MODULE: ./src/api/purse/Purse.ts\nclass Purse_Purse{constructor(){this._credits=0;this._activityPoints=new Map();this._clubDays=0;this._clubPeriods=0;this._isVIP=false;this._pastClubDays=0;this._pastVipDays=0;this._isExpiring=false;this._minutesUntilExpiration=0;this._minutesSinceLastModified=0;this._lastUpdated=0;}static from(purse){const newPurse=new Purse_Purse();newPurse._credits=purse._credits;newPurse._activityPoints=purse._activityPoints;newPurse._clubDays=purse._clubDays;newPurse._clubPeriods=purse._clubPeriods;newPurse._isVIP=purse._isVIP;newPurse._pastClubDays=purse._pastClubDays;newPurse._pastVipDays=purse._pastVipDays;newPurse._isExpiring=purse._isExpiring;newPurse._minutesUntilExpiration=purse._minutesUntilExpiration;newPurse._minutesSinceLastModified=purse._minutesSinceLastModified;newPurse._lastUpdated=purse._lastUpdated;return newPurse;}get credits(){return this._credits;}set credits(credits){this._lastUpdated=GetNitroInstance().time;this._credits=credits;}get activityPoints(){return this._activityPoints;}set activityPoints(k){this._lastUpdated=GetNitroInstance().time;this._activityPoints=k;}get clubDays(){return this._clubDays;}set clubDays(k){this._lastUpdated=GetNitroInstance().time;this._clubDays=k;}get clubPeriods(){return this._clubPeriods;}set clubPeriods(k){this._lastUpdated=GetNitroInstance().time;this._clubPeriods=k;}get _Str_13571(){return this._clubDays>0||this._clubPeriods>0;}get isVip(){return this._isVIP;}set isVip(k){this._isVIP=k;}get pastClubDays(){return this._pastClubDays;}set pastClubDays(k){this._lastUpdated=GetNitroInstance().time;this._pastClubDays=k;}get pastVipDays(){return this._pastVipDays;}set pastVipDays(k){this._lastUpdated=GetNitroInstance().time;this._pastVipDays=k;}get isExpiring(){return this._isExpiring;}set isExpiring(k){this._isExpiring=k;}get minutesUntilExpiration(){var k=(GetNitroInstance().time-this._lastUpdated)/(1000*60);var _local_2=this._minutesUntilExpiration-k;return _local_2>0?_local_2:0;}set minutesUntilExpiration(k){this._lastUpdated=GetNitroInstance().time;this._minutesUntilExpiration=k;}get minutesSinceLastModified(){return this._minutesSinceLastModified;}set minutesSinceLastModified(k){this._lastUpdated=GetNitroInstance().time;this._minutesSinceLastModified=k;}get lastUpdated(){return this._lastUpdated;}get clubLevel(){if(this.clubDays===0&&this.clubPeriods===0)return nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].NO_CLUB;if(this.isVip)return nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].VIP;return nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].CLUB;}}\n// CONCATENATED MODULE: ./src/api/purse/index.ts\n\n// CONCATENATED MODULE: ./src/api/user/GetUserProfile.ts\nfunction GetUserProfile(userId){SendMessageComposer(new nitro_renderer[\"Ii\" /* UserProfileComposer */](userId));}\n// CONCATENATED MODULE: ./src/api/user/index.ts\n\n// CONCATENATED MODULE: ./src/api/wired/GetWiredTimeLocale.ts\nconst GetWiredTimeLocale=value=>{const time=Math.floor(value/2);if(!(value%2))return time.toString();return(time+0.5).toString();};\n// CONCATENATED MODULE: ./src/api/wired/WiredActionLayoutCode.ts\nclass WiredActionLayout{}WiredActionLayout.TOGGLE_FURNI_STATE=0;WiredActionLayout.RESET=1;WiredActionLayout.SET_FURNI_STATE=3;WiredActionLayout.MOVE_FURNI=4;WiredActionLayout.GIVE_SCORE=6;WiredActionLayout.CHAT=7;WiredActionLayout.TELEPORT=8;WiredActionLayout.JOIN_TEAM=9;WiredActionLayout.LEAVE_TEAM=10;WiredActionLayout.CHASE=11;WiredActionLayout.FLEE=12;WiredActionLayout.MOVE_AND_ROTATE_FURNI=13;WiredActionLayout.GIVE_SCORE_TO_PREDEFINED_TEAM=14;WiredActionLayout.TOGGLE_TO_RANDOM_STATE=15;WiredActionLayout.MOVE_FURNI_TO=16;WiredActionLayout.GIVE_REWARD=17;WiredActionLayout.CALL_ANOTHER_STACK=18;WiredActionLayout.KICK_FROM_ROOM=19;WiredActionLayout.MUTE_USER=20;WiredActionLayout.BOT_TELEPORT=21;WiredActionLayout.BOT_MOVE=22;WiredActionLayout.BOT_TALK=23;WiredActionLayout.BOT_GIVE_HAND_ITEM=24;WiredActionLayout.BOT_FOLLOW_AVATAR=25;WiredActionLayout.BOT_CHANGE_FIGURE=26;WiredActionLayout.BOT_TALK_DIRECT_TO_AVTR=27;\n// CONCATENATED MODULE: ./src/api/wired/WiredConditionLayoutCode.ts\nclass WiredConditionlayout{}WiredConditionlayout.STATES_MATCH=0;WiredConditionlayout.FURNIS_HAVE_AVATARS=1;WiredConditionlayout.ACTOR_IS_ON_FURNI=2;WiredConditionlayout.TIME_ELAPSED_MORE=3;WiredConditionlayout.TIME_ELAPSED_LESS=4;WiredConditionlayout.USER_COUNT_IN=5;WiredConditionlayout.ACTOR_IS_IN_TEAM=6;WiredConditionlayout.HAS_STACKED_FURNIS=7;WiredConditionlayout.STUFF_TYPE_MATCHES=8;WiredConditionlayout.STUFFS_IN_FORMATION=9;WiredConditionlayout.ACTOR_IS_GROUP_MEMBER=10;WiredConditionlayout.ACTOR_IS_WEARING_BADGE=11;WiredConditionlayout.ACTOR_IS_WEARING_EFFECT=12;WiredConditionlayout.NOT_STATES_MATCH=13;WiredConditionlayout.FURNI_NOT_HAVE_HABBO=14;WiredConditionlayout.NOT_ACTOR_ON_FURNI=15;WiredConditionlayout.NOT_USER_COUNT_IN=16;WiredConditionlayout.NOT_ACTOR_IN_TEAM=17;WiredConditionlayout.NOT_HAS_STACKED_FURNIS=18;WiredConditionlayout.NOT_FURNI_IS_OF_TYPE=19;WiredConditionlayout.NOT_STUFFS_IN_FORMATION=20;WiredConditionlayout.NOT_ACTOR_IN_GROUP=21;WiredConditionlayout.NOT_ACTOR_WEARS_BADGE=22;WiredConditionlayout.NOT_ACTOR_WEARING_EFFECT=23;WiredConditionlayout.DATE_RANGE_ACTIVE=24;WiredConditionlayout.ACTOR_HAS_HANDITEM=25;\n// CONCATENATED MODULE: ./src/api/wired/WiredDateToString.ts\nconst WiredDateToString=date=>`${date.getFullYear()}/${('0'+(date.getMonth()+1)).slice(-2)}/${('0'+date.getDate()).slice(-2)} ${('0'+date.getHours()).slice(-2)}:${('0'+date.getMinutes()).slice(-2)}`;\n// CONCATENATED MODULE: ./src/api/wired/WiredFurniType.ts\nclass WiredFurniType{}WiredFurniType.STUFF_SELECTION_OPTION_NONE=0;WiredFurniType.STUFF_SELECTION_OPTION_BY_ID=1;WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2;WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;\n// CONCATENATED MODULE: ./src/api/wired/WiredSelectionFilter.ts\nconst vertex=`\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}`;const WiredSelectionFilter_fragment=`\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}`;class WiredSelectionFilter_WiredSelectionFilter extends nitro_renderer[\"Ue\" /* NitroFilter */]{constructor(lineColor,color){super(vertex,WiredSelectionFilter_fragment);this._lineColor=void 0;this._color=void 0;this.uniforms.lineColor=new Float32Array(3);this.uniforms.color=new Float32Array(3);this.lineColor=lineColor;this.color=color;}get lineColor(){return this._lineColor;}set lineColor(value){const arr=this.uniforms.lineColor;if(typeof value==='number'){nitro_renderer[\"jb\" /* ColorConverter */].hex2rgb(value,arr);this._lineColor=value;}else{arr[0]=value[0];arr[1]=value[1];arr[2]=value[2];this._lineColor=nitro_renderer[\"jb\" /* ColorConverter */].rgb2hex(arr);}}get color(){return this._color;}set color(value){const arr=this.uniforms.color;if(typeof value==='number'){nitro_renderer[\"jb\" /* ColorConverter */].hex2rgb(value,arr);this._color=value;}else{arr[0]=value[0];arr[1]=value[1];arr[2]=value[2];this._color=nitro_renderer[\"jb\" /* ColorConverter */].rgb2hex(arr);}}}\n// CONCATENATED MODULE: ./src/api/wired/WiredSelectionVisualizer.ts\nclass WiredSelectionVisualizer_WiredSelectionVisualizer{static show(furniId){WiredSelectionVisualizer_WiredSelectionVisualizer.applySelectionShader(WiredSelectionVisualizer_WiredSelectionVisualizer.getRoomObject(furniId));}static hide(furniId){WiredSelectionVisualizer_WiredSelectionVisualizer.clearSelectionShader(WiredSelectionVisualizer_WiredSelectionVisualizer.getRoomObject(furniId));}static clearSelectionShaderFromFurni(furniIds){for(const furniId of furniIds){WiredSelectionVisualizer_WiredSelectionVisualizer.clearSelectionShader(WiredSelectionVisualizer_WiredSelectionVisualizer.getRoomObject(furniId));}}static applySelectionShaderToFurni(furniIds){for(const furniId of furniIds){WiredSelectionVisualizer_WiredSelectionVisualizer.applySelectionShader(WiredSelectionVisualizer_WiredSelectionVisualizer.getRoomObject(furniId));}}static getRoomObject(objectId){const roomEngine=GetRoomEngine();return roomEngine.getRoomObject(roomEngine.activeRoomId,objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);}static applySelectionShader(roomObject){if(!roomObject)return;const visualization=roomObject.visualization;if(!visualization)return;for(const sprite of visualization.sprites){if(sprite.blendMode===1)continue;// BLEND_MODE: ADD\nsprite.filters=[WiredSelectionVisualizer_WiredSelectionVisualizer._selectionShader];}}static clearSelectionShader(roomObject){if(!roomObject)return;const visualization=roomObject.visualization;if(!visualization)return;for(const sprite of visualization.sprites)sprite.filters=[];}}WiredSelectionVisualizer_WiredSelectionVisualizer._selectionShader=new WiredSelectionFilter_WiredSelectionFilter([1,1,1],[0.6,0.6,0.6]);\n// CONCATENATED MODULE: ./src/api/wired/WiredStringDelimeter.ts\nconst WIRED_STRING_DELIMETER='\\t';\n// CONCATENATED MODULE: ./src/api/wired/WiredTriggerLayoutCode.ts\nclass WiredTriggerLayout{}WiredTriggerLayout.AVATAR_SAYS_SOMETHING=0;WiredTriggerLayout.AVATAR_WALKS_ON_FURNI=1;WiredTriggerLayout.AVATAR_WALKS_OFF_FURNI=2;WiredTriggerLayout.EXECUTE_ONCE=3;WiredTriggerLayout.TOGGLE_FURNI=4;WiredTriggerLayout.EXECUTE_PERIODICALLY=6;WiredTriggerLayout.AVATAR_ENTERS_ROOM=7;WiredTriggerLayout.GAME_STARTS=8;WiredTriggerLayout.GAME_ENDS=9;WiredTriggerLayout.SCORE_ACHIEVED=10;WiredTriggerLayout.COLLISION=11;WiredTriggerLayout.EXECUTE_PERIODICALLY_LONG=12;WiredTriggerLayout.BOT_REACHED_STUFF=13;WiredTriggerLayout.BOT_REACHED_AVATAR=14;\n// CONCATENATED MODULE: ./src/api/wired/index.ts\n\n// CONCATENATED MODULE: ./src/api/index.ts\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/common/Base.tsx\nconst Base=props=>{const{ref=null,innerRef=null,display=null,fit=false,grow=false,shrink=false,fullWidth=false,fullHeight=false,overflow=null,position=null,float=null,pointer=false,visible=null,textColor=null,classNames=[],className='',style={},children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[];if(display&&display.length)newClassNames.push('d-'+display);if(fit||fullWidth)newClassNames.push('w-100');if(fit||fullHeight)newClassNames.push('h-100');if(grow)newClassNames.push('flex-grow-1');if(shrink)newClassNames.push('flex-shrink-0');if(overflow)newClassNames.push('overflow-'+overflow);if(position)newClassNames.push('position-'+position);if(float)newClassNames.push('float-'+float);if(pointer)newClassNames.push('cursor-pointer');if(visible!==null)newClassNames.push(visible?'visible':'invisible');if(textColor)newClassNames.push('text-'+textColor);if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[display,fit,grow,shrink,fullWidth,fullHeight,overflow,position,float,pointer,visible,textColor,classNames]);const getClassName=Object(react[\"useMemo\"])(()=>{let newClassName=getClassNames.join(' ');if(className.length)newClassName+=' '+className;return newClassName.trim();},[getClassNames,className]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:innerRef,className:getClassName,style:getStyle,...rest,children:children});};\n// CONCATENATED MODULE: ./src/common/GridContext.tsx\nconst GridContext=/*#__PURE__*/Object(react[\"createContext\"])({isCssGrid:false});const GridContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridContext.Provider,{value:props.value,children:props.children});};const useGridContext=()=>Object(react[\"useContext\"])(GridContext);\n// CONCATENATED MODULE: ./src/common/Grid.tsx\nconst Grid=props=>{const{inline=false,gap=2,maxContent=false,columnCount=0,center=false,alignSelf=null,alignItems=null,justifyContent=null,fullHeight=true,classNames=[],style={},...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[];if(inline)newClassNames.push('inline-grid');else newClassNames.push('grid');if(gap)newClassNames.push('gap-'+gap);else if(gap===0)newClassNames.push('gap-0');if(maxContent)newClassNames.push('flex-basis-max-content');if(alignSelf)newClassNames.push('align-self-'+alignSelf);if(alignItems)newClassNames.push('align-items-'+alignItems);if(justifyContent)newClassNames.push('justify-content-'+justifyContent);if(!alignItems&&!justifyContent&&center)newClassNames.push('align-items-center','justify-content-center');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[inline,gap,maxContent,alignSelf,alignItems,justifyContent,center,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};if(columnCount)newStyle['--bs-columns']=columnCount.toString();if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[columnCount,style]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridContextProvider,{value:{isCssGrid:true},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullHeight:fullHeight,classNames:getClassNames,style:getStyle,...rest})});};\n// CONCATENATED MODULE: ./src/common/AutoGrid.tsx\nconst AutoGrid=props=>{const{columnMinWidth=40,columnMinHeight=40,columnCount=0,fullHeight=false,maxContent=true,overflow='auto',style={},...rest}=props;const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};newStyle['--nitro-grid-column-min-height']=columnMinHeight+'px';if(columnCount>1)newStyle.gridTemplateColumns=`repeat(auto-fill, minmax(${columnMinWidth}px, 1fr))`;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[columnMinWidth,columnMinHeight,columnCount,style]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:columnCount,fullHeight:fullHeight,overflow:overflow,style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/Flex.tsx\nconst Flex=props=>{const{display='flex',column=undefined,reverse=false,gap=null,center=false,alignSelf=null,alignItems=null,justifyContent=null,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[];if(column){if(reverse)newClassNames.push('flex-column-reverse');else newClassNames.push('flex-column');}else{if(reverse)newClassNames.push('flex-row-reverse');}if(gap)newClassNames.push('gap-'+gap);if(alignSelf)newClassNames.push('align-self-'+alignSelf);if(alignItems)newClassNames.push('align-items-'+alignItems);if(justifyContent)newClassNames.push('justify-content-'+justifyContent);if(!alignItems&&!justifyContent&&center)newClassNames.push('align-items-center','justify-content-center');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[column,reverse,gap,center,alignSelf,alignItems,justifyContent,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{display:display,classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/common/Button.tsx\nconst Button=props=>{const{variant='primary',size='',active=false,disabled=false,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['btn'];if(variant)newClassNames.push('btn-'+variant);if(size)newClassNames.push('btn-'+size);if(active)newClassNames.push('active');if(disabled)newClassNames.push('disabled');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[variant,size,active,disabled,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/common/ButtonGroup.tsx\nconst ButtonGroup=props=>{const{classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['btn-group'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/common/card/accordion/NitroCardAccordionContext.tsx\nconst NitroCardAccordionContext=/*#__PURE__*/Object(react[\"createContext\"])({closers:null,setClosers:null,closeAll:null});const NitroCardAccordionContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardAccordionContext.Provider,{...props});};const useNitroCardAccordionContext=()=>Object(react[\"useContext\"])(NitroCardAccordionContext);\n// CONCATENATED MODULE: ./src/common/card/accordion/NitroCardAccordionItemView.tsx\nconst NitroCardAccordionItemView=props=>{const{alignItems='center',gap=1,children=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:alignItems,gap:gap,...rest,children:children});};\n// EXTERNAL MODULE: ./node_modules/@fortawesome/react-fontawesome/index.es.js\nvar react_fontawesome_index_es = __webpack_require__(10);\n\n// CONCATENATED MODULE: ./src/common/card/accordion/NitroCardAccordionSetView.tsx\nconst NitroCardAccordionSetView=props=>{const{headerText='',isExpanded=false,gap=0,classNames=[],children=null,...rest}=props;const[isOpen,setIsOpen]=Object(react[\"useState\"])(false);const{setClosers=null,closeAll=null}=useNitroCardAccordionContext();const onClick=()=>{closeAll();setIsOpen(prevValue=>!prevValue);};const close=Object(react[\"useCallback\"])(()=>setIsOpen(false),[]);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-card-accordion-set'];if(isOpen)newClassNames.push('active');if(classNames&&classNames.length)newClassNames.push(...classNames);return newClassNames;},[isOpen,classNames]);Object(react[\"useEffect\"])(()=>{setIsOpen(isExpanded);},[isExpanded]);Object(react[\"useEffect\"])(()=>{const closeFunction=close;setClosers(prevValue=>{const newClosers=[...prevValue];newClosers.push(closeFunction);return newClosers;});return()=>{setClosers(prevValue=>{const newClosers=[...prevValue];const index=newClosers.indexOf(closeFunction);if(index>=0)newClosers.splice(index,1);return newClosers;});};},[close,setClosers]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{classNames:getClassNames,gap:gap,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,justifyContent:\"between\",className:\"nitro-card-accordion-set-header px-2 py-1\",onClick:onClick,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-header-text d-inline\",children:headerText}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:isOpen?'caret-up':'caret-down'})]}),isOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullHeight:true,overflow:\"auto\",gap:0,className:\"nitro-card-accordion-set-content p-1\",children:children})]});};\n// CONCATENATED MODULE: ./src/common/card/accordion/NitroCardAccordionView.tsx\nconst NitroCardAccordionView=props=>{const{...rest}=props;const[closers,setClosers]=Object(react[\"useState\"])([]);const closeAll=Object(react[\"useCallback\"])(()=>{for(const closer of closers)closer();},[closers]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardAccordionContextProvider,{value:{closers,setClosers,closeAll},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:0,...rest})});};\n// CONCATENATED MODULE: ./src/common/card/accordion/index.ts\n\n// CONCATENATED MODULE: ./src/common/card/NitroCardContentView.tsx\nconst NitroCardContentView=props=>{const{overflow='auto',classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['container-fluid','content-area'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{classNames:getClassNames,overflow:overflow,...rest});};\n// CONCATENATED MODULE: ./src/common/card/NitroCardContext.tsx\nconst NitroCardContext=/*#__PURE__*/Object(react[\"createContext\"])({theme:null});const NitroCardContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContext.Provider,{value:props.value,children:props.children});};const useNitroCardContext=()=>Object(react[\"useContext\"])(NitroCardContext);\n// CONCATENATED MODULE: ./src/common/card/NitroCardHeaderView.tsx\nconst NitroCardHeaderView=props=>{const{headerText=null,noCloseButton=false,onCloseClick=null,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['drag-handler','container-fluid','nitro-card-header'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);const onMouseDown=Object(react[\"useCallback\"])(event=>{event.stopPropagation();event.nativeEvent.stopImmediatePropagation();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,position:\"relative\",classNames:getClassNames,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,className:\"nitro-card-header-holder\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"nitro-card-header-text\",children:headerText}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{position:\"absolute\",className:\"end-2 nitro-card-header-close\",onMouseDownCapture:onMouseDown,onClick:onCloseClick})]})});};\n// CONCATENATED MODULE: ./src/common/card/NitroCardSubHeaderView.tsx\nconst NitroCardSubHeaderView=props=>{const{justifyContent='center',classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['container-fluid','bg-muted','p-1'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:justifyContent,classNames:getClassNames,...rest});};\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(23);\n\n// CONCATENATED MODULE: ./src/common/draggable-window/DraggableWindowPosition.ts\nclass DraggableWindowPosition{}DraggableWindowPosition.CENTER='DWP_CENTER';DraggableWindowPosition.TOP_CENTER='DWP_TOP_CENTER';DraggableWindowPosition.TOP_LEFT='DWP_TOP_LEFT';DraggableWindowPosition.NOTHING='DWP_NOTHING';\n// CONCATENATED MODULE: ./src/common/draggable-window/DraggableWindow.tsx\nconst CURRENT_WINDOWS=[];const POS_MEMORY=new Map();const BOUNDS_THRESHOLD_TOP=0;const BOUNDS_THRESHOLD_LEFT=0;const DraggableWindow=props=>{const{uniqueKey=null,handleSelector='.drag-handler',windowPosition=DraggableWindowPosition.CENTER,disableDrag=false,dragStyle={},children=null,offsetLeft=0,offsetTop=0}=props;const[delta,setDelta]=Object(react[\"useState\"])(null);const[offset,setOffset]=Object(react[\"useState\"])(null);const[start,setStart]=Object(react[\"useState\"])({x:0,y:0});const[isDragging,setIsDragging]=Object(react[\"useState\"])(false);const[dragHandler,setDragHandler]=Object(react[\"useState\"])(null);const elementRef=Object(react[\"useRef\"])();const bringToTop=Object(react[\"useCallback\"])(()=>{let zIndex=400;for(const existingWindow of CURRENT_WINDOWS){zIndex+=1;existingWindow.style.zIndex=zIndex.toString();}},[]);const moveCurrentWindow=Object(react[\"useCallback\"])(()=>{const index=CURRENT_WINDOWS.indexOf(elementRef.current);if(index===-1){CURRENT_WINDOWS.push(elementRef.current);}else if(index===CURRENT_WINDOWS.length-1)return;else if(index>=0){CURRENT_WINDOWS.splice(index,1);CURRENT_WINDOWS.push(elementRef.current);}bringToTop();},[bringToTop]);const onMouseDown=Object(react[\"useCallback\"])(event=>{moveCurrentWindow();},[moveCurrentWindow]);const onTouchStart=Object(react[\"useCallback\"])(event=>{moveCurrentWindow();},[moveCurrentWindow]);const startDragging=Object(react[\"useCallback\"])((startX,startY)=>{setStart({x:startX,y:startY});setIsDragging(true);},[]);const onDragMouseDown=Object(react[\"useCallback\"])(event=>{startDragging(event.clientX,event.clientY);},[startDragging]);const onTouchDown=Object(react[\"useCallback\"])(event=>{const touch=event.touches[0];startDragging(touch.clientX,touch.clientY);},[startDragging]);const onDragMouseMove=Object(react[\"useCallback\"])(event=>{setDelta({x:event.clientX-start.x,y:event.clientY-start.y});},[start]);const onDragTouchMove=Object(react[\"useCallback\"])(event=>{const touch=event.touches[0];setDelta({x:touch.clientX-start.x,y:touch.clientY-start.y});},[start]);const completeDrag=Object(react[\"useCallback\"])(()=>{if(!elementRef.current||!dragHandler)return;let offsetX=offset.x+delta.x;let offsetY=offset.y+delta.y;const left=elementRef.current.offsetLeft+offsetX;const top=elementRef.current.offsetTop+offsetY;if(top<BOUNDS_THRESHOLD_TOP){offsetY=-elementRef.current.offsetTop;}else if(top+dragHandler.offsetHeight>=document.body.offsetHeight-BOUNDS_THRESHOLD_TOP){offsetY=document.body.offsetHeight-elementRef.current.offsetHeight-elementRef.current.offsetTop;}if(left+elementRef.current.offsetWidth<BOUNDS_THRESHOLD_LEFT){offsetX=-elementRef.current.offsetLeft;}else if(left>=document.body.offsetWidth-BOUNDS_THRESHOLD_LEFT){offsetX=document.body.offsetWidth-elementRef.current.offsetWidth-elementRef.current.offsetLeft;}setDelta({x:0,y:0});setOffset({x:offsetX,y:offsetY});setIsDragging(false);if(uniqueKey!==null)POS_MEMORY.set(uniqueKey,{x:offsetX,y:offsetY});},[dragHandler,delta,offset,uniqueKey]);const onDragMouseUp=Object(react[\"useCallback\"])(event=>{completeDrag();},[completeDrag]);const onDragTouchUp=Object(react[\"useCallback\"])(event=>{completeDrag();},[completeDrag]);Object(react[\"useEffect\"])(()=>{const element=elementRef.current;if(!element)return;CURRENT_WINDOWS.push(element);bringToTop();if(!disableDrag){const handle=element.querySelector(handleSelector);if(handle)setDragHandler(handle);}let offsetX=0;let offsetY=0;switch(windowPosition){case DraggableWindowPosition.TOP_CENTER:element.style.top=50+offsetTop+'px';element.style.left=`calc(50vw - ${element.offsetWidth/2+offsetLeft}px)`;break;case DraggableWindowPosition.CENTER:element.style.top=`calc(50vh - ${element.offsetHeight/2+offsetTop}px)`;element.style.left=`calc(50vw - ${element.offsetWidth/2+offsetLeft}px)`;break;case DraggableWindowPosition.TOP_LEFT:element.style.top=50+offsetTop+'px';element.style.left=50+offsetLeft+'px';break;}if(uniqueKey!==null){const memory=POS_MEMORY.get(uniqueKey);if(memory){offsetX=memory.x;offsetY=memory.y;}}setDelta({x:0,y:0});setOffset({x:offsetX,y:offsetY});return()=>{const index=CURRENT_WINDOWS.indexOf(element);if(index>=0)CURRENT_WINDOWS.splice(index,1);};},[handleSelector,windowPosition,uniqueKey,disableDrag,offsetLeft,offsetTop,bringToTop]);Object(react[\"useEffect\"])(()=>{if(!offset&&!delta)return;const element=elementRef.current;if(!element)return;element.style.transform=`translate(${offset.x+delta.x}px, ${offset.y+delta.y}px)`;element.style.visibility='visible';},[offset,delta]);Object(react[\"useEffect\"])(()=>{if(!dragHandler)return;dragHandler.addEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN,onDragMouseDown);dragHandler.addEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_START,onTouchDown);return()=>{dragHandler.removeEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN,onDragMouseDown);dragHandler.removeEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_START,onTouchDown);};},[dragHandler,onDragMouseDown,onTouchDown]);Object(react[\"useEffect\"])(()=>{if(!isDragging)return;document.addEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP,onDragMouseUp);document.addEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_END,onDragTouchUp);document.addEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_MOVE,onDragMouseMove);document.addEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_MOVE,onDragTouchMove);return()=>{document.removeEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP,onDragMouseUp);document.removeEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_END,onDragTouchUp);document.removeEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_MOVE,onDragMouseMove);document.removeEventListener(nitro_renderer[\"Th\" /* TouchEventType */].TOUCH_MOVE,onDragTouchMove);};},[isDragging,onDragMouseUp,onDragMouseMove,onDragTouchUp,onDragTouchMove]);return/*#__PURE__*/Object(react_dom[\"createPortal\"])(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{position:\"absolute\",innerRef:elementRef,className:\"draggable-window\",onMouseDownCapture:onMouseDown,onTouchStartCapture:onTouchStart,style:dragStyle,children:children}),document.getElementById('draggable-windows-container'));};\n// CONCATENATED MODULE: ./src/common/draggable-window/index.ts\n\n// CONCATENATED MODULE: ./src/common/card/NitroCardView.tsx\nconst NitroCardView=props=>{const{theme='primary',uniqueKey=null,handleSelector='.drag-handler',windowPosition=DraggableWindowPosition.CENTER,disableDrag=false,overflow='hidden',position='relative',gap=0,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-card','rounded'];newClassNames.push(`theme-${theme||'primary'}`);if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[theme,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContextProvider,{value:{theme},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{uniqueKey:uniqueKey,handleSelector:handleSelector,windowPosition:windowPosition,disableDrag:disableDrag,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:overflow,position:position,gap:gap,classNames:getClassNames,...rest})})});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutAvatarImageView.tsx\nconst LayoutAvatarImageView=props=>{const{figure='',gender='M',headOnly=false,direction=0,scale=1,classNames=[],style={},...rest}=props;const[avatarUrl,setAvatarUrl]=Object(react[\"useState\"])(null);const[randomValue,setRandomValue]=Object(react[\"useState\"])(-1);const isDisposed=Object(react[\"useRef\"])(false);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['avatar-image'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};if(avatarUrl&&avatarUrl.length)newStyle.backgroundImage=`url('${avatarUrl}')`;if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[avatarUrl,scale,style]);Object(react[\"useEffect\"])(()=>{const avatarImage=GetAvatarRenderManager().createAvatarImage(figure,nitro_renderer[\"q\" /* AvatarScaleType */].LARGE,gender,{resetFigure:figure=>{if(isDisposed.current)return;setRandomValue(Math.random());},dispose:()=>{},disposed:false},null);if(!avatarImage)return;let setType=nitro_renderer[\"r\" /* AvatarSetType */].FULL;if(headOnly)setType=nitro_renderer[\"r\" /* AvatarSetType */].HEAD;avatarImage.setDirection(setType,direction);const image=avatarImage.getCroppedImage(setType);if(image)setAvatarUrl(image.src);avatarImage.dispose();},[figure,gender,direction,headOnly,randomValue]);Object(react[\"useEffect\"])(()=>{isDisposed.current=false;return()=>{isDisposed.current=true;};},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutBackgroundImage.tsx\nconst LayoutBackgroundImage=props=>{const{imageUrl=null,fit=true,style=null,...rest}=props;const getStyle=Object(react[\"useMemo\"])(()=>{const newStyle={...style};if(imageUrl)newStyle.background=`url(${imageUrl}) center no-repeat`;return newStyle;},[style,imageUrl]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:fit,style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutBadgeImageView.tsx\nconst LayoutBadgeImageView=props=>{const{badgeCode=null,isGroup=false,showInfo=false,customTitle=null,isGrayscale=false,scale=1,classNames=[],style={},children=null,...rest}=props;const[imageElement,setImageElement]=Object(react[\"useState\"])(null);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['badge-image'];if(isGroup)newClassNames.push('group-badge');if(isGrayscale)newClassNames.push('grayscale');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames,isGroup,isGrayscale]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};if(imageElement){newStyle.backgroundImage=`url('${imageElement.src}')`;newStyle.width=imageElement.width;newStyle.height=imageElement.height;if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';newStyle.width=imageElement.width*scale;newStyle.height=imageElement.height*scale;}}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[imageElement,scale,style]);Object(react[\"useEffect\"])(()=>{if(!badgeCode||!badgeCode.length)return;let didSetBadge=false;const onBadgeImageReadyEvent=event=>{if(event.badgeId!==badgeCode)return;const element=nitro_renderer[\"Sh\" /* TextureUtils */].generateImage(new nitro_renderer[\"af\" /* NitroSprite */](event.image));element.onload=()=>setImageElement(element);didSetBadge=true;GetSessionDataManager().events.removeEventListener(nitro_renderer[\"s\" /* BadgeImageReadyEvent */].IMAGE_READY,onBadgeImageReadyEvent);};GetSessionDataManager().events.addEventListener(nitro_renderer[\"s\" /* BadgeImageReadyEvent */].IMAGE_READY,onBadgeImageReadyEvent);const texture=isGroup?GetSessionDataManager().getGroupBadgeImage(badgeCode):GetSessionDataManager().getBadgeImage(badgeCode);if(texture&&!didSetBadge){const element=nitro_renderer[\"Sh\" /* TextureUtils */].generateImage(new nitro_renderer[\"af\" /* NitroSprite */](texture));element.onload=()=>setImageElement(element);}return()=>GetSessionDataManager().events.removeEventListener(nitro_renderer[\"s\" /* BadgeImageReadyEvent */].IMAGE_READY,onBadgeImageReadyEvent);},[badgeCode,isGroup]);const BadgeInformationView=props=>{const{title=null,description=null}=props;if(!GetConfiguration('badge.descriptions.enabled',true))return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"badge-information text-black pt-2 px-2 pb-4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mb-1 pb-1\",children:title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"badge-desc\",children:description})]});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{classNames:getClassNames,style:getStyle,...rest,children:[showInfo&&GetConfiguration('badge.descriptions.enabled',true)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"badge-information text-black p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"mb-1\",children:isGroup?customTitle:LocalizeBadgeName(badgeCode)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"badge-desc\",children:isGroup?LocalizeText('group.badgepopup.body'):LocalizeBadgeDescription(badgeCode)})]}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutCurrencyIcon.tsx\nconst LayoutCurrencyIcon=props=>{const{type='',classNames=[],style={},...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-currency-icon'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);const urlString=Object(react[\"useMemo\"])(()=>{let url=GetConfiguration('currency.asset.icon.url','');url=url.replace('%type%',type.toString());return`url(${url})`;},[type]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};newStyle.backgroundImage=urlString;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,urlString]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutFurniIconImageView.tsx\nconst LayoutFurniIconImageView=props=>{const{productType='s',productClassId=-1,extraData='',...rest}=props;const getImageIconUrl=()=>{let imageUrl=null;switch(productType.toLocaleLowerCase()){case ProductTypeEnum.FLOOR:imageUrl=GetRoomEngine().getFurnitureFloorIconUrl(productClassId);break;case ProductTypeEnum.WALL:imageUrl=GetRoomEngine().getFurnitureWallIconUrl(productClassId,extraData);break;}return imageUrl;};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:getImageIconUrl(),className:\"furni-image\",...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutFurniImageView.tsx\nconst LayoutFurniImageView=props=>{const{productType='s',productClassId=-1,direction=2,extraData='',scale=1,style={},...rest}=props;const[imageElement,setImageElement]=Object(react[\"useState\"])(null);const getStyle=Object(react[\"useMemo\"])(()=>{var _imageElement$src;let newStyle={};if(imageElement!==null&&imageElement!==void 0&&(_imageElement$src=imageElement.src)!==null&&_imageElement$src!==void 0&&_imageElement$src.length){newStyle.backgroundImage=`url('${imageElement.src}')`;newStyle.width=imageElement.width;newStyle.height=imageElement.height;}if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[imageElement,scale,style]);const buildImage=Object(react[\"useCallback\"])(()=>{let imageResult=null;const listener={imageReady:(id,texture,image)=>{if(!image&&texture){image=nitro_renderer[\"Sh\" /* TextureUtils */].generateImage(texture);}image.onload=()=>setImageElement(image);},imageFailed:null};switch(productType.toLocaleLowerCase()){case ProductTypeEnum.FLOOR:imageResult=GetRoomEngine().getFurnitureFloorImage(productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](direction),64,listener,0,extraData);break;case ProductTypeEnum.WALL:imageResult=GetRoomEngine().getFurnitureWallImage(productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](direction),64,listener,0,extraData);break;}if(imageResult){const image=imageResult.getImage();image.onload=()=>setImageElement(image);}},[productType,productClassId,direction,extraData]);Object(react[\"useEffect\"])(()=>{buildImage();},[buildImage]);if(!imageElement)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:['furni-image'],style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutGiftTagView.tsx\nconst LayoutGiftTagView=props=>{const{figure=null,userName=null,message=null,editable=false,onChange=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{overflow:\"hidden\",className:\"nitro-gift-card text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex align-items-center justify-content-center gift-face flex-shrink-0\",children:[!userName&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"gift-incognito\"}),figure&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"gift-avatar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:figure,direction:2,headOnly:true})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{overflow:\"hidden\",className:\"w-100 pt-4 pb-4 pe-4 ps-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,overflow:\"auto\",justifyContent:\"between\",children:[!editable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textBreak:true,className:\"gift-message\",children:message}),editable&&onChange!==null&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"gift-message h-100\",maxLength:140,value:message,onChange:e=>onChange(e.target.value),placeholder:LocalizeText('catalog.gift_wrapping_new.message_hint')}),userName&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{italics:true,textEnd:true,className:\"pe-1\",children:LocalizeText('catalog.gift_wrapping_new.message_from',['name'],[userName])})]})})]});};\n// CONCATENATED MODULE: ./src/common/Column.tsx\nconst Column=props=>{const{size=0,itemActive=false,offset=0,column=true,gap=2,classNames=[],...rest}=props;const{isCssGrid=false}=useGridContext();const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[];if(size){let colClassName=`col-${size}`;if(isCssGrid)colClassName=`g-${colClassName}`;newClassNames.push(colClassName);}if(itemActive)newClassNames.push('active');if(offset){let colClassName=`offset-${offset}`;if(isCssGrid)colClassName=`g-start-${offset}`;newClassNames.push(colClassName);}if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[size,itemActive,offset,isCssGrid,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{classNames:getClassNames,column:column,gap:gap,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutItemCountView.tsx\nconst LayoutItemCountView=props=>{const{count=0,position='absolute',classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['fw-bold','nitro-item-count'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"absolute\",classNames:getClassNames,...rest,children:[count,children]});};\n// CONCATENATED MODULE: ./src/common/layout/limited-edition/LayoutLimitedEditionStyledNumberView.tsx\nconst LayoutLimitedEditionStyledNumberView=props=>{const{value=0}=props;const numbers=value.toString().split('');return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:numbers.map((number,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'limited-edition-number n-'+number},index))});};\n// CONCATENATED MODULE: ./src/common/layout/limited-edition/LayoutLimitedEditionCompactPlateView.tsx\nconst LayoutLimitedEditionCompactPlateView=props=>{const{uniqueNumber=0,uniqueSeries=0,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['unique-compact-plate','z-index-1'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{classNames:getClassNames,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:uniqueNumber})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:uniqueSeries})}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/limited-edition/LayoutLimitedEditionCompletePlateView.tsx\nconst LayoutLimitedEditionCompletePlateView=props=>{const{uniqueLimitedItemsLeft=0,uniqueLimitedSeriesSize=0,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['unique-complete-plate'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"plate-container\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:[LocalizeText('unique.items.left'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:uniqueLimitedItemsLeft})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:[LocalizeText('unique.items.number.sold'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:uniqueLimitedSeriesSize})})]})]})});};\n// CONCATENATED MODULE: ./src/common/layout/limited-edition/index.ts\n\n// CONCATENATED MODULE: ./src/common/layout/LayoutGridItem.tsx\nconst LayoutGridItem=props=>{const{itemImage=undefined,itemColor=undefined,itemActive=false,itemCount=1,itemCountMinimum=1,itemUniqueSoldout=false,itemUniqueNumber=-2,itemUnseen=false,itemHighlight=false,disabled=false,center=true,column=true,style={},classNames=[],position='relative',overflow='hidden',children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['layout-grid-item','border','border-2','border-muted','rounded'];if(itemActive)newClassNames.push('active');if(itemUniqueSoldout||itemUniqueNumber>0)newClassNames.push('unique-item');if(itemUniqueSoldout)newClassNames.push('sold-out');if(itemUnseen)newClassNames.push('unseen');if(itemHighlight)newClassNames.push('has-highlight');if(disabled)newClassNames.push('disabled');if(itemImage===null)newClassNames.push('icon','loading-icon');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[itemActive,itemUniqueSoldout,itemUniqueNumber,itemUnseen,itemHighlight,disabled,itemImage,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={...style};if(itemImage)newStyle.backgroundImage=`url(${itemImage})`;if(itemColor)newStyle.backgroundColor=itemColor;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,itemImage,itemColor]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:center,pointer:true,position:position,overflow:overflow,column:column,classNames:getClassNames,style:getStyle,...rest,children:[itemCount>itemCountMinimum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:itemCount}),itemUniqueNumber>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,className:\"unique-bg-override\",style:{backgroundImage:`url(${itemImage})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:itemUniqueNumber})})]}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutImage.tsx\nconst LayoutImage=props=>{const{imageUrl=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:imageUrl,alt:\"\",...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutLoadingSpinnerView.tsx\nconst LayoutLoadingSpinnerView=props=>{const{...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{classNames:['spinner-container'],...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"spinner\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"spinner\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"spinner\"})]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutMiniCameraView.tsx\nconst LayoutMiniCameraView=props=>{const{roomId=-1,textureReceiver=null,onClose=null}=props;const elementRef=Object(react[\"useRef\"])();const getCameraBounds=Object(react[\"useCallback\"])(()=>{if(!elementRef||!elementRef.current)return null;const frameBounds=elementRef.current.getBoundingClientRect();return new nitro_renderer[\"Ye\" /* NitroRectangle */](Math.floor(frameBounds.x),Math.floor(frameBounds.y),Math.floor(frameBounds.width),Math.floor(frameBounds.height));},[]);const takePicture=Object(react[\"useCallback\"])(()=>{PlaySound(SoundNames.CAMERA_SHUTTER);textureReceiver(GetRoomEngine().createTextureFromRoom(roomId,1,getCameraBounds()));},[roomId,getCameraBounds,textureReceiver]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{handleSelector:\".nitro-room-thumbnail-camera\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"nitro-room-thumbnail-camera pt-2 px-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{ref:elementRef,className:'camera-frame'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"align-items-end camera-buttons\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:onClose,children:LocalizeText('cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:takePicture,children:LocalizeText('navigator.thumbeditor.save')})]})]})});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutNotificationAlertView.tsx\nconst LayoutNotificationAlertView=props=>{const{title='',close=null,classNames=[],children=null,type=NotificationAlertType.DEFAULT,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-alert'];newClassNames.push('nitro-alert-'+type);if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames,type]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{classNames:getClassNames,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:title,onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{grow:true,justifyContent:\"between\",overflow:\"hidden\",className:\"text-black\",gap:0,children:children})]});};\n// EXTERNAL MODULE: ./node_modules/react-transition-group/esm/Transition.js + 2 modules\nvar Transition = __webpack_require__(24);\n\n// CONCATENATED MODULE: ./src/common/transitions/TransitionAnimationTypes.ts\nclass TransitionAnimationTypes{}TransitionAnimationTypes.BOUNCE='bounce';TransitionAnimationTypes.SLIDE_LEFT='slideLeft';TransitionAnimationTypes.SLIDE_RIGHT='slideRight';TransitionAnimationTypes.FLIP_X='flipX';TransitionAnimationTypes.FADE_IN='fadeIn';TransitionAnimationTypes.FADE_DOWN='fadeDown';TransitionAnimationTypes.FADE_UP='fadeUp';TransitionAnimationTypes.HEAD_SHAKE='headShake';\n// CONCATENATED MODULE: ./src/common/transitions/TransitionAnimationStyles.ts\nfunction getTransitionAnimationStyle(type,transition){let timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:300;switch(type){case TransitionAnimationTypes.BOUNCE:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'bounceIn',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'bounceOut',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.SLIDE_LEFT:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'slideInLeft',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'slideOutLeft',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.SLIDE_RIGHT:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'slideInRight',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'slideOutRight',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.FLIP_X:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'flipInX',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'flipOutX',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.FADE_UP:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'fadeInUp',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'fadeOutDown',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.FADE_IN:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'fadeIn',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'fadeOut',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.FADE_DOWN:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'fadeInDown',animationDuration:`${timeout}ms`};case Transition[\"c\" /* EXITING */]:return{animationName:'fadeOutUp',animationDuration:`${timeout}ms`};}case TransitionAnimationTypes.HEAD_SHAKE:switch(transition){default:return{};case Transition[\"b\" /* ENTERING */]:return{animationName:'headShake',animationDuration:`${timeout}ms`};}}return null;}\n// CONCATENATED MODULE: ./src/common/transitions/TransitionAnimation.tsx\nconst TransitionAnimation=props=>{const{type=null,inProp=false,timeout=300,className=null,children=null}=props;const[isChildrenVisible,setChildrenVisible]=Object(react[\"useState\"])(false);Object(react[\"useEffect\"])(()=>{let timeoutData=null;if(inProp){setChildrenVisible(true);}else{timeoutData=setTimeout(()=>{setChildrenVisible(false);clearTimeout(timeout);},timeout);}return()=>{if(timeoutData)clearTimeout(timeoutData);};},[inProp,timeout]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Transition[\"d\" /* default */],{in:inProp,timeout:timeout,children:state=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:(className!==null&&className!==void 0?className:'')+' animate__animated',style:{...getTransitionAnimationStyle(type,state,timeout)},children:isChildrenVisible&&children})});};\n// CONCATENATED MODULE: ./src/common/transitions/index.ts\n\n// CONCATENATED MODULE: ./src/common/layout/LayoutNotificationBubbleView.tsx\nconst LayoutNotificationBubbleView=props=>{const{fadesOut=true,timeoutMs=8000,close=null,overflow='hidden',classNames=[],...rest}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-notification-bubble','rounded','p-2','notification-height'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);Object(react[\"useEffect\"])(()=>{if(!fadesOut)return;const timeout=setTimeout(()=>{setIsVisible(false);setTimeout(()=>close(),300);},timeoutMs);return()=>clearTimeout(timeout);},[fadesOut,timeoutMs,close]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TransitionAnimation,{type:TransitionAnimationTypes.FADE_IN,inProp:isVisible,timeout:300,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{overflow:overflow,classNames:getClassNames,onClick:close,...rest})});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutPetImageView.tsx\nconst LayoutPetImageView=props=>{const{figure='',typeId=-1,paletteId=-1,petColor=0xFFFFFF,customParts=[],posture='std',headOnly=false,direction=0,scale=1,style={},...rest}=props;const[petUrl,setPetUrl]=Object(react[\"useState\"])(null);const isDisposed=Object(react[\"useRef\"])(false);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};if(petUrl&&petUrl.length)newStyle.backgroundImage=`url(${petUrl})`;if(scale!==1){newStyle.transform=`scale(${scale})`;if(!(scale%1))newStyle.imageRendering='pixelated';}if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[petUrl,scale,style]);Object(react[\"useEffect\"])(()=>{let url=null;let petTypeId=typeId;let petPaletteId=paletteId;let petColor1=petColor;let petCustomParts=customParts;let petHeadOnly=headOnly;if(figure&&figure.length){const petFigureData=new nitro_renderer[\"of\" /* PetFigureData */](figure);petTypeId=petFigureData.typeId;petPaletteId=petFigureData.paletteId;petColor1=petFigureData.color;petCustomParts=petFigureData.customParts;}if(petTypeId===16)petHeadOnly=false;const imageResult=GetRoomEngine().getRoomObjectPetImage(petTypeId,petPaletteId,petColor1,new nitro_renderer[\"Ui\" /* Vector3d */](direction*45),64,{imageReady:(id,texture,image)=>{if(isDisposed.current)return;if(image)setPetUrl(image.src);else if(texture)setPetUrl(nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(texture));},imageFailed:id=>{}},petHeadOnly,0,petCustomParts,posture);if(imageResult){const image=imageResult.getImage();if(image)setPetUrl(image.src);}},[figure,typeId,paletteId,petColor,customParts,posture,headOnly,direction]);Object(react[\"useEffect\"])(()=>{isDisposed.current=false;return()=>{isDisposed.current=true;};},[]);const url=`url('${petUrl}')`;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:['pet-image'],style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutProgressBar.tsx\nconst LayoutProgressBar=props=>{const{text='',progress=0,maxProgress=100,position='relative',justifyContent='center',classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-progress-bar','text-white'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{position:position,justifyContent:justifyContent,classNames:getClassNames,...rest,children:[text&&text.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fit:true,center:true,position:\"absolute\",className:\"nitro-progress-bar-text small\",children:text}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-progress-bar-inner\",style:{width:~~((progress-0)*(100-0)/(maxProgress-0)+0)+'%'}}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutRarityLevelView.tsx\nconst LayoutRarityLevelView=props=>{const{level=0,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-rarity-level'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{classNames:getClassNames,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:level}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutRoomPreviewerView.tsx\nconst LayoutRoomPreviewerView=props=>{const{roomPreviewer=null,height=0,children=null}=props;const[renderingCanvas,setRenderingCanvas]=Object(react[\"useState\"])(null);const elementRef=Object(react[\"useRef\"])();const onClick=event=>{if(!roomPreviewer)return;if(event.shiftKey){roomPreviewer.changeRoomObjectDirection();}else{roomPreviewer.changeRoomObjectState();}};const update=Object(react[\"useCallback\"])(time=>{if(!roomPreviewer||!renderingCanvas||!elementRef.current)return;roomPreviewer.updatePreviewRoomView();if(!renderingCanvas.canvasUpdated)return;elementRef.current.style.backgroundImage=`url(${nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(renderingCanvas.master)})`;},[roomPreviewer,renderingCanvas,elementRef]);const setupPreviewer=Object(react[\"useCallback\"])(()=>{if(!elementRef.current||!roomPreviewer)return;const computed=document.defaultView.getComputedStyle(elementRef.current,null);let backgroundColor=computed.backgroundColor;backgroundColor=nitro_renderer[\"jb\" /* ColorConverter */].rgbStringToHex(backgroundColor);backgroundColor=backgroundColor.replace('#','0x');roomPreviewer.backgroundColor=parseInt(backgroundColor,16);const width=elementRef.current.parentElement.clientWidth;roomPreviewer.getRoomCanvas(width,height);const canvas=roomPreviewer.getRenderingCanvas();setRenderingCanvas(canvas);canvas.canvasUpdated=true;update(-1);},[elementRef,height,roomPreviewer,update]);Object(react[\"useEffect\"])(()=>{if(!roomPreviewer)return;if(!renderingCanvas)setupPreviewer();GetNitroInstance().ticker.add(update);const resizeObserver=new ResizeObserver(()=>{if(!roomPreviewer||!elementRef.current)return;const width=elementRef.current.parentElement.offsetWidth;roomPreviewer.modifyRoomCanvas(width,height);update(-1);});resizeObserver.observe(elementRef.current);return()=>{resizeObserver.disconnect();GetNitroInstance().ticker.remove(update);};},[renderingCanvas,roomPreviewer,elementRef,height,setupPreviewer,update]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"room-preview-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:elementRef,className:\"room-preview-image\",style:{height},onClick:onClick}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutRoomThumbnailView.tsx\nconst LayoutRoomThumbnailView=props=>{const{roomId=-1,customUrl=null,shrink=true,overflow='hidden',classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['room-thumbnail','border'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);const getImageUrl=Object(react[\"useMemo\"])(()=>{if(customUrl&&customUrl.length)return GetConfiguration('image.library.url')+customUrl;return GetConfiguration('thumbnails.url').replace('%thumbnail%',roomId.toString());},[customUrl,roomId]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{shrink:shrink,overflow:overflow,classNames:getClassNames,...rest,children:[getImageUrl&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:getImageUrl}),children]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutTrophyView.tsx\nconst LayoutTrophyView=props=>{const{color='',message='',date='',senderName='',customTitle=null,onCloseClick=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{handleSelector:\".drag-handler\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,alignItems:\"center\",className:`nitro-layout-trophy trophy-${color}`,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,fullWidth:true,position:\"relative\",className:\"trophy-header drag-handler\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{position:\"absolute\",pointer:true,className:\"trophy-close\",onClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('widget.furni.trophy.title')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"trophy-content py-1\",gap:1,children:[customTitle&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:customTitle}),message]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",className:\"trophy-footer mt-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:date}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:senderName})]})]})});};\n// CONCATENATED MODULE: ./src/common/layout/UserProfileIconView.tsx\nconst UserProfileIconView=props=>{const{userId=0,userName=null,classNames=[],pointer=true,children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-friends-spritesheet','icon-profile-sm'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,pointer:pointer,onClick:event=>GetUserProfile(userId),...rest,children:children});};\n// CONCATENATED MODULE: ./src/common/layout/index.ts\n\n// CONCATENATED MODULE: ./src/common/card/tabs/NitroCardTabsItemView.tsx\nconst NitroCardTabsItemView=props=>{const{isActive=false,count=0,overflow='hidden',position='relative',pointer=true,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nav-link','cursor-pointer','position-relative'];if(isActive)newClassNames.push('active');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[isActive,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:pointer,position:position,classNames:getClassNames,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{shrink:true,center:true,children:children}),count>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:count})]});};\n// CONCATENATED MODULE: ./src/common/card/tabs/NitroCardTabsView.tsx\nconst NitroCardTabsView=props=>{const{justifyContent='center',gap=1,classNames=[],children=null,subClassName='',...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['container-fluid','nitro-card-tabs','pt-1','position-relative'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{classNames:getClassNames,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{className:'nav nav-tabs border-0 '+subClassName,children:children})});};\n// CONCATENATED MODULE: ./src/common/card/tabs/index.ts\n\n// CONCATENATED MODULE: ./src/common/card/index.ts\n\n// CONCATENATED MODULE: ./src/common/FormGroup.tsx\nconst FormGroup=props=>{const{classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['form-group'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/common/HorizontalRule.tsx\nconst HorizontalRule=props=>{const{variant='black',height=1,classNames=[],style={},...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[];if(variant)newClassNames.push('bg-'+variant);if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[variant,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={display:'list-item'};if(height>0)newStyle.height=height;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[height,style]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,style:getStyle,...rest});};\n// CONCATENATED MODULE: ./src/common/Text.tsx\nconst Text=props=>{const{variant=null,fontWeight=null,fontSize=0,align=null,bold=false,gfbold=false,underline=false,italics=false,truncate=false,center=false,textEnd=false,small=false,wrap=false,noWrap=false,textBreak=false,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=[''];if(variant)newClassNames.push('text-'+variant);if(bold)newClassNames.push('font-bold');if(gfbold)newClassNames.push('goldfish-bold');if(fontWeight)newClassNames.push('fw-'+fontWeight);if(fontSize)newClassNames.push('fs-'+fontSize);if(align)newClassNames.push('text-'+align);if(underline)newClassNames.push('text-decoration-underline');if(italics)newClassNames.push('font-italic');if(truncate)newClassNames.push('text-truncate');if(center)newClassNames.push('text-center');if(textEnd)newClassNames.push('text-end');if(small)newClassNames.push('small');if(wrap)newClassNames.push('text-wrap');if(noWrap)newClassNames.push('text-nowrap');if(textBreak)newClassNames.push('text-break');return newClassNames;},[variant,fontWeight,fontSize,align,bold,gfbold,underline,italics,truncate,center,textEnd,small,wrap,noWrap,textBreak]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/common/types/AlignItemType.ts\n\n// CONCATENATED MODULE: ./src/common/types/AlignSelfType.ts\n\n// CONCATENATED MODULE: ./src/common/types/ButtonSizeType.ts\n\n// CONCATENATED MODULE: ./src/common/types/ColorVariantType.ts\n\n// CONCATENATED MODULE: ./src/common/types/ColumnSizesType.ts\n\n// CONCATENATED MODULE: ./src/common/types/DisplayType.ts\n\n// CONCATENATED MODULE: ./src/common/types/FloatType.ts\n\n// CONCATENATED MODULE: ./src/common/types/FontSizeType.ts\n\n// CONCATENATED MODULE: ./src/common/types/FontWeightType.ts\n\n// CONCATENATED MODULE: ./src/common/types/JustifyContentType.ts\n\n// CONCATENATED MODULE: ./src/common/types/OverflowType.ts\n\n// CONCATENATED MODULE: ./src/common/types/PositionType.ts\n\n// CONCATENATED MODULE: ./src/common/types/SpacingType.ts\n\n// CONCATENATED MODULE: ./src/common/types/TextAlignType.ts\n\n// CONCATENATED MODULE: ./src/common/types/index.ts\n\n// CONCATENATED MODULE: ./src/common/utils/CreateTransitionToIcon.ts\nconst CreateTransitionToIcon=(image,fromElement,icon)=>{const bounds=fromElement.getBoundingClientRect();const x=bounds.x+bounds.width/2;const y=bounds.y+bounds.height/2;const event=new nitro_renderer[\"df\" /* NitroToolbarAnimateIconEvent */](image,x,y);event.iconName=icon;GetRoomEngine().events.dispatchEvent(event);};\n// CONCATENATED MODULE: ./src/common/utils/FriendlyTimeView.tsx\nconst FriendlyTimeView=props=>{const{seconds=0,isShort=false,children=null,...rest}=props;const[updateId,setUpdateId]=Object(react[\"useState\"])(-1);const getStartSeconds=Object(react[\"useMemo\"])(()=>Math.round(new Date().getSeconds())-seconds,[seconds]);const getFriendlyTime=Object(react[\"useCallback\"])(()=>{const value=Math.round(new Date().getSeconds())-getStartSeconds;if(isShort)return nitro_renderer[\"Kb\" /* FriendlyTime */].format(value);return nitro_renderer[\"Kb\" /* FriendlyTime */].format(value);},[getStartSeconds,isShort]);Object(react[\"useEffect\"])(()=>{const interval=setInterval(()=>setUpdateId(prevValue=>prevValue+1),10000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{...rest,children:getFriendlyTime()});};\n// CONCATENATED MODULE: ./src/common/utils/index.ts\n\n// CONCATENATED MODULE: ./src/common/index.ts\n\n// CONCATENATED MODULE: ./src/components/loading/LoadingView.tsx\nvar randomImage='loadingPhoto position-absolute';const randomImg=Math.floor(Math.random()*30);const LoadingView=props=>{const{isError=false,message='',percent=0}=props;Object(react[\"useEffect\"])(()=>{if(!isError)return;NotificationUtilities_NotificationUtilities.simpleAlert(message,null,null,null,'Connection Error');},[isError,message]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,alignItems:\"center\",justifyContent:\"center\",className:\"nitro-loading\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"loading-stories\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"loadingPhoto position-absolute\",\"data-image\":randomImg}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"imageOverlay position-absolute\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"text-center py-4\",children:isError&&message&&message.length?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"fs-4 text-shadow\",children:message}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"fs-4 text-shadow\",children:message}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"nitro-loading-bar mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"nitro-loading-bar-inner\",style:{width:`${percent}%`}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"percent\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[percent.toFixed(),\"%\"]})})]})})]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/AchievementBadgeView.tsx\nconst AchievementBadgeView=props=>{const{achievement=null,scale=1,...rest}=props;if(!achievement)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:GetAchievementBadgeCode(achievement),isGrayscale:!GetAchievementHasStarted(achievement),scale:scale,...rest});};\n// CONCATENATED MODULE: ./src/components/achievements/views/achievement-list/AchievementListItemView.tsx\nconst AchievementListItemView=props=>{const{achievement=null,selectedAchievementId=-1,setSelectedAchievementId=null,children=null,...rest}=props;if(!achievement)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemActive:selectedAchievementId===achievement.achievementId,itemUnseen:achievement.unseen>0,onClick:event=>setSelectedAchievementId(achievement.achievementId),...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementBadgeView,{achievement:achievement}),children]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/achievement-list/AchievementListView.tsx\nconst AchievementListView=props=>{const{achievements=null,selectedAchievementId=-1,setSelectedAchievementId=null,children=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{columnCount:6,columnMinWidth:50,columnMinHeight:50,...rest,children:[achievements&&achievements.length>0&&achievements.map((achievement,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementListItemView,{achievement:achievement,selectedAchievementId:selectedAchievementId,setSelectedAchievementId:setSelectedAchievementId},index)),children]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/AchievementDetailsView.tsx\nconst AchievementDetailsView=props=>{const{achievement=null,children=null,...rest}=props;if(!achievement)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{shrink:true,className:\"bg-muted rounded p-2 text-black\",gap:2,overflow:\"hidden\",...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementBadgeView,{className:\"nitro-achievements-badge-image\",achievement:achievement,scale:2}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText('achievements.details.level',['level','limit'],[GetAchievementLevel(achievement).toString(),achievement.levelCount.toString()])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,justifyContent:\"center\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",truncate:true,children:LocalizeBadgeName(GetAchievementBadgeCode(achievement))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textBreak:true,children:LocalizeBadgeDescription(GetAchievementBadgeCode(achievement))})]}),(achievement.levelRewardPoints>0||achievement.scoreLimit>0)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[achievement.levelRewardPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,className:\"small\",children:LocalizeText('achievements.details.reward')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,className:\"fw-bold small\",gap:1,children:[achievement.levelRewardPoints,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:achievement.levelRewardPointType})]})]}),achievement.scoreLimit>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutProgressBar,{text:LocalizeText('achievements.details.progress',['progress','limit'],[(achievement.currentPoints+achievement.scoreAtStartOfLevel).toString(),(achievement.scoreLimit+achievement.scoreAtStartOfLevel).toString()]),progress:achievement.currentPoints+achievement.scoreAtStartOfLevel,maxProgress:achievement.scoreLimit+achievement.scoreAtStartOfLevel})]})]}),children]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/AchievementCategoryView.tsx\nconst AchievementCategoryView=props=>{const{category=null,selectedAchievementId=-1,setSelectedAchievementId=null,setAchievementSeen=null}=props;const selectedAchievement=Object(react[\"useMemo\"])(()=>{if(selectedAchievementId===-1)return null;return category.achievements.find(achievement=>achievement.achievementId===selectedAchievementId);},[category,selectedAchievementId]);Object(react[\"useEffect\"])(()=>{if(!selectedAchievement){if(category.achievements.length)setSelectedAchievementId(category.achievements[0].achievementId);}},[selectedAchievement,category,setSelectedAchievementId]);Object(react[\"useEffect\"])(()=>{if(!selectedAchievement)return;setAchievementSeen(category.code,selectedAchievement.achievementId);},[selectedAchievement,category,setAchievementSeen]);if(!category)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementListView,{achievements:category.achievements,selectedAchievementId:selectedAchievementId,setSelectedAchievementId:setSelectedAchievementId}),!!selectedAchievement&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementDetailsView,{achievement:selectedAchievement})]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/category-list/AchievementsCategoryListItemView.tsx\nconst AchievementsCategoryListItemView=props=>{const{category=null,selectedCategoryCode=null,setSelectedCategoryCode=null,children=null,...rest}=props;if(!category)return null;const progress=GetAchievementCategoryProgress(category);const maxProgress=GetAchievementCategoryMaxProgress(category);const getCategoryImage=GetAchievementCategoryImageUrl(category,progress);const getTotalUnseen=GetAchievementCategoryTotalUnseen(category);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemActive:selectedCategoryCode===category.code,itemCount:getTotalUnseen,itemCountMinimum:0,gap:1,onClick:event=>setSelectedCategoryCode(category.code),...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,center:true,small:true,className:\"pt-1\",children:LocalizeText(`quests.${category.code}.name`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBackgroundImage,{position:\"relative\",imageUrl:getCategoryImage,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{fullWidth:true,center:true,position:\"absolute\",variant:\"white\",style:{fontSize:12,bottom:9},children:[progress,\" / \",maxProgress]})}),children]});};\n// CONCATENATED MODULE: ./src/components/achievements/views/category-list/AchievementsCategoryListView.tsx\nconst AchievementsCategoryListView=props=>{const{categories=null,selectedCategoryCode=null,setSelectedCategoryCode=null,children=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{columnCount:3,columnMinWidth:90,columnMinHeight:100,...rest,children:[categories&&categories.length>0&&categories.map((category,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementsCategoryListItemView,{category:category,selectedCategoryCode:selectedCategoryCode,setSelectedCategoryCode:setSelectedCategoryCode},index)),children]});};\n// CONCATENATED MODULE: ./src/components/achievements/AchievementsView.tsx\nconst AchievementsView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{achievementCategories=[],selectedCategoryCode=null,setSelectedCategoryCode=null,selectedAchievementId=-1,setSelectedAchievementId=null,achievementScore=0,getProgress=0,getMaxProgress=0,setAchievementSeen=null}=useAchievements();const selectedCategory=Object(react[\"useMemo\"])(()=>{if(selectedCategoryCode===null)return null;return achievementCategories.find(category=>category.code===selectedCategoryCode);},[achievementCategories,selectedCategoryCode]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},eventUrlPrefix:'achievements/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"achievements\",className:\"nitro-achievements\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('inventory.achievements'),onCloseClick:event=>setIsVisible(false)}),selectedCategory&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardSubHeaderView,{position:\"relative\",className:\"justify-content-center align-items-center cursor-pointer\",gap:3,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{onClick:event=>setSelectedCategoryCode(null),className:\"nitro-achievements-back-arrow\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,fontWeight:\"bold\",className:\"text-small\",children:LocalizeText(`quests.${selectedCategory.code}.name`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('achievements.details.categoryprogress',['progress','limit'],[selectedCategory.getProgress().toString(),selectedCategory.getMaxProgress().toString()])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:GetAchievementCategoryImageUrl(selectedCategory,null,true)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{gap:1,children:[!selectedCategory&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementsCategoryListView,{categories:achievementCategories,selectedCategoryCode:selectedCategoryCode,setSelectedCategoryCode:setSelectedCategoryCode}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,center:true,children:LocalizeText('achievements.categories.score',['score'],[achievementScore.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutProgressBar,{text:LocalizeText('achievements.categories.totalprogress',['progress','limit'],[getProgress.toString(),getMaxProgress.toString()]),progress:getProgress,maxProgress:getMaxProgress})]})]}),selectedCategory&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementCategoryView,{category:selectedCategory,selectedAchievementId:selectedAchievementId,setSelectedAchievementId:setSelectedAchievementId,setAchievementSeen:setAchievementSeen})]})]});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/AvatarEditorAction.ts\nclass AvatarEditorAction{}AvatarEditorAction.ACTION_SAVE='AEA_ACTION_SAVE';AvatarEditorAction.ACTION_CLEAR='AEA_ACTION_CLEAR';AvatarEditorAction.ACTION_RESET='AEA_ACTION_RESET';AvatarEditorAction.ACTION_RANDOMIZE='AEA_ACTION_RANDOMIZE';\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/AvatarEditorGridColorItem.ts\nclass AvatarEditorGridColorItem_AvatarEditorGridColorItem{constructor(partColor){let isDisabled=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this._partColor=void 0;this._isDisabled=void 0;this._isHC=void 0;this._isSelected=void 0;this._notifier=void 0;this._partColor=partColor;this._isDisabled=isDisabled;this._isHC=this._partColor.clubLevel>0;this._isSelected=false;}dispose(){this._partColor=null;}get partColor(){return this._partColor;}get color(){return nitro_renderer[\"jb\" /* ColorConverter */].int2rgb(this._partColor.rgb);}get isDisabled(){return this._isDisabled;}get isHC(){return this._isHC;}get isSelected(){return this._isSelected;}set isSelected(flag){this._isSelected=flag;if(this.notify)this.notify();}get notify(){return this._notifier;}set notify(notifier){this._notifier=notifier;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/FigureData.ts\nclass FigureData_FigureData{constructor(){this._data=void 0;this._colors=void 0;this._gender='M';this._direction=FigureData_FigureData.DEFAULT_DIRECTION;this._avatarEffectType=-1;this._notifier=null;}loadAvatarData(figureString,gender){this._data=new Map();this._colors=new Map();this._gender=gender;this.parseFigureString(figureString);this.updateView();}parseFigureString(figure){if(!figure)return;const sets=figure.split('.');if(!sets||!sets.length)return;for(const set of sets){const parts=set.split('-');if(!parts.length)continue;const setType=parts[0];const setId=parseInt(parts[1]);const colorIds=[];let offset=2;while(offset<parts.length){colorIds.push(parseInt(parts[offset]));offset++;}if(!colorIds.length)colorIds.push(0);this.savePartSetId(setType,setId,false);this.savePartSetColourId(setType,colorIds,false);}}getPartSetId(setType){const existing=this._data.get(setType);if(existing!==undefined)return existing;return-1;}getColorIds(setType){const existing=this._colors.get(setType);if(existing!==undefined)return existing;return[AvatarEditorUtilities_AvatarEditorUtilities.avatarSetFirstSelectableColor(setType)];}getFigureString(){let figureString='';const setParts=[];for(const[setType,setId]of this._data.entries()){const colorIds=this._colors.get(setType);let setPart=setType+'-'+setId;if(colorIds&&colorIds.length){let i=0;while(i<colorIds.length){setPart=setPart+('-'+colorIds[i]);i++;}}setParts.push(setPart);}let i=0;while(i<setParts.length){figureString=figureString+setParts[i];if(i<setParts.length-1)figureString=figureString+'.';i++;}return figureString;}savePartData(setType,partId,colorIds){let update=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.savePartSetId(setType,partId,update);this.savePartSetColourId(setType,colorIds,update);}savePartSetId(setType,partId){let update=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;switch(setType){case FigureData_FigureData.FACE:case FigureData_FigureData.HAIR:case FigureData_FigureData.HAT:case FigureData_FigureData.HEAD_ACCESSORIES:case FigureData_FigureData.EYE_ACCESSORIES:case FigureData_FigureData.FACE_ACCESSORIES:case FigureData_FigureData.SHIRT:case FigureData_FigureData.JACKET:case FigureData_FigureData.CHEST_ACCESSORIES:case FigureData_FigureData.CHEST_PRINTS:case FigureData_FigureData.TROUSERS:case FigureData_FigureData.SHOES:case FigureData_FigureData.TROUSER_ACCESSORIES:if(partId>=0){this._data.set(setType,partId);}else{this._data.delete(setType);}break;}if(update)this.updateView();}savePartSetColourId(setType,colorIds){let update=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;switch(setType){case FigureData_FigureData.FACE:case FigureData_FigureData.HAIR:case FigureData_FigureData.HAT:case FigureData_FigureData.HEAD_ACCESSORIES:case FigureData_FigureData.EYE_ACCESSORIES:case FigureData_FigureData.FACE_ACCESSORIES:case FigureData_FigureData.SHIRT:case FigureData_FigureData.JACKET:case FigureData_FigureData.CHEST_ACCESSORIES:case FigureData_FigureData.CHEST_PRINTS:case FigureData_FigureData.TROUSERS:case FigureData_FigureData.SHOES:case FigureData_FigureData.TROUSER_ACCESSORIES:this._colors.set(setType,colorIds);break;}if(update)this.updateView();}getFigureStringWithFace(k){let override=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let figureString='';const setTypes=[FigureData_FigureData.FACE];const figureSets=[];for(const setType of setTypes){const colors=this._colors.get(setType);if(!colors)continue;let setId=this._data.get(setType);if(setType===FigureData_FigureData.FACE&&override)setId=k;let figureSet=setType+'-'+setId;if(setId>=0){let i=0;while(i<colors.length){figureSet=figureSet+('-'+colors[i]);i++;}}figureSets.push(figureSet);}let i=0;while(i<figureSets.length){figureString=figureString+figureSets[i];if(i<figureSets.length-1)figureString=figureString+'.';i++;}return figureString;}updateView(){if(this.notify)this.notify();}get gender(){return this._gender;}get direction(){return this._direction;}set direction(direction){this._direction=direction;this.updateView();}set avatarEffectType(k){this._avatarEffectType=k;}get avatarEffectType(){return this._avatarEffectType;}get notify(){return this._notifier;}set notify(notifier){this._notifier=notifier;}}FigureData_FigureData.DEFAULT_DIRECTION=4;FigureData_FigureData.MALE='M';FigureData_FigureData.FEMALE='F';FigureData_FigureData.UNISEX='U';FigureData_FigureData.SCALE='h';FigureData_FigureData.STD='std';FigureData_FigureData.DEFAULT_FRAME='0';FigureData_FigureData.FACE='hd';FigureData_FigureData.HAIR='hr';FigureData_FigureData.HAT='ha';FigureData_FigureData.HEAD_ACCESSORIES='he';FigureData_FigureData.EYE_ACCESSORIES='ea';FigureData_FigureData.FACE_ACCESSORIES='fa';FigureData_FigureData.JACKET='cc';FigureData_FigureData.SHIRT='ch';FigureData_FigureData.CHEST_ACCESSORIES='ca';FigureData_FigureData.CHEST_PRINTS='cp';FigureData_FigureData.TROUSERS='lg';FigureData_FigureData.SHOES='sh';FigureData_FigureData.TROUSER_ACCESSORIES='wa';FigureData_FigureData.SET_TYPES=[FigureData_FigureData.FACE,FigureData_FigureData.HAIR,FigureData_FigureData.HAT,FigureData_FigureData.HEAD_ACCESSORIES,FigureData_FigureData.EYE_ACCESSORIES,FigureData_FigureData.FACE_ACCESSORIES,FigureData_FigureData.JACKET,FigureData_FigureData.SHIRT,FigureData_FigureData.CHEST_ACCESSORIES,FigureData_FigureData.CHEST_PRINTS,FigureData_FigureData.TROUSERS,FigureData_FigureData.SHOES,FigureData_FigureData.TROUSERS];\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/AvatarEditorGridPartItem.ts\nclass AvatarEditorGridPartItem_AvatarEditorGridPartItem{constructor(partSet,partColors){let useColors=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;let isDisabled=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this._renderManager=void 0;this._partSet=void 0;this._partColors=void 0;this._useColors=void 0;this._isDisabled=void 0;this._thumbContainer=void 0;this._imageUrl=void 0;this._maxColorIndex=void 0;this._isValidFigure=void 0;this._isHC=void 0;this._isSellable=void 0;this._isClear=void 0;this._isSelected=void 0;this._disposed=void 0;this._isInitalized=void 0;this._notifier=void 0;this._renderManager=GetAvatarRenderManager();this._partSet=partSet;this._partColors=partColors;this._useColors=useColors;this._isDisabled=isDisabled;this._thumbContainer=null;this._imageUrl=null;this._maxColorIndex=0;this._isValidFigure=false;this._isHC=false;this._isSellable=false;this._isClear=false;this._isSelected=false;this._disposed=false;this._isInitalized=false;if(partSet){const colors=partSet.parts;for(const color of colors)this._maxColorIndex=Math.max(this._maxColorIndex,color.colorLayerIndex);}}init(){if(this._isInitalized)return;this._isInitalized=true;this.update();}dispose(){if(this._disposed)return;this._renderManager=null;this._partSet=null;this._partColors=null;this._imageUrl=null;this._disposed=true;this._isInitalized=false;if(this._thumbContainer){this._thumbContainer.destroy();this._thumbContainer=null;}}update(){this.updateThumbVisualization();}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return false;const figureContainer=this._renderManager.createFigureContainer(this.partSet.type+'-'+this.partSet.id);if(!this._renderManager.isFigureContainerReady(figureContainer)){this._renderManager.downloadAvatarFigure(figureContainer,this);return false;}this._isValidFigure=true;return true;}renderThumb(){if(!this._renderManager||!this._partSet)return null;if(!this._isValidFigure){if(!this.analyzeFigure())return null;}const parts=this._partSet.parts.concat().sort(this.sortByDrawOrder);const container=new nitro_renderer[\"Se\" /* NitroContainer */]();for(const part of parts){if(!part)continue;let asset=null;let direction=0;let hasAsset=false;while(!hasAsset&&direction<AvatarEditorGridPartItem_AvatarEditorGridPartItem.THUMB_DIRECTIONS.length){const assetName=FigureData_FigureData.SCALE+'_'+FigureData_FigureData.STD+'_'+part.type+'_'+part.id+'_'+AvatarEditorGridPartItem_AvatarEditorGridPartItem.THUMB_DIRECTIONS[direction]+'_'+FigureData_FigureData.DEFAULT_FRAME;asset=this._renderManager.getAssetByName(assetName);if(asset&&asset.texture){hasAsset=true;}else{direction++;}}if(!hasAsset)continue;const x=asset.offsetX;const y=asset.offsetY;let partColor=null;if(this._useColors&&part.colorLayerIndex>0){const color=this._partColors[part.colorLayerIndex-1];if(color)partColor=color;}const sprite=new nitro_renderer[\"af\" /* NitroSprite */](asset.texture);sprite.position.set(x,y);if(partColor)sprite.tint=partColor.rgb;container.addChild(sprite);}return container;}updateThumbVisualization(){if(!this._isInitalized)return;let container=this._thumbContainer;if(!container)container=this.renderThumb();if(!container)return;if(this._partSet){this._isHC=this._partSet.clubLevel>0;this._isSellable=this._partSet.isSellable;}else{this._isHC=false;this._isSellable=false;}if(this._isDisabled)this.setAlpha(container,0.2);this._imageUrl=nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(container);if(this.notify)this.notify();}setAlpha(container,alpha){container.filters=[AvatarEditorGridPartItem_AvatarEditorGridPartItem.ALPHA_FILTER];return container;}sortByDrawOrder(a,b){const indexA=AvatarEditorGridPartItem_AvatarEditorGridPartItem.DRAW_ORDER.indexOf(a.type);const indexB=AvatarEditorGridPartItem_AvatarEditorGridPartItem.DRAW_ORDER.indexOf(b.type);if(indexA<indexB)return-1;if(indexA>indexB)return 1;if(a.index<b.index)return-1;if(a.index>b.index)return 1;return 0;}resetFigure(figure){if(!this.analyzeFigure())return;this.update();}get disposed(){return this._disposed;}get id(){if(!this._partSet)return-1;return this._partSet.id;}get partSet(){return this._partSet;}set partColors(partColors){this._partColors=partColors;this.update();}get isDisabled(){return this._isDisabled;}set thumbContainer(container){this._thumbContainer=container;this.update();}get imageUrl(){return this._imageUrl;}get maxColorIndex(){return this._maxColorIndex;}get isHC(){return this._isHC;}get isSellable(){return this._isSellable;}get isClear(){return this._isClear;}set isClear(flag){this._isClear=flag;}get isSelected(){return this._isSelected;}set isSelected(flag){this._isSelected=flag;if(this.notify)this.notify();}get notify(){return this._notifier;}set notify(notifier){this._notifier=notifier;}}AvatarEditorGridPartItem_AvatarEditorGridPartItem.ALPHA_FILTER=new nitro_renderer[\"Qe\" /* NitroAlphaFilter */](0.2);AvatarEditorGridPartItem_AvatarEditorGridPartItem.THUMB_DIRECTIONS=[2,6,0,4,3,1];AvatarEditorGridPartItem_AvatarEditorGridPartItem.DRAW_ORDER=[nitro_renderer[\"p\" /* AvatarFigurePartType */].LEFT_HAND_ITEM,nitro_renderer[\"p\" /* AvatarFigurePartType */].LEFT_HAND,nitro_renderer[\"p\" /* AvatarFigurePartType */].LEFT_SLEEVE,nitro_renderer[\"p\" /* AvatarFigurePartType */].LEFT_COAT_SLEEVE,nitro_renderer[\"p\" /* AvatarFigurePartType */].BODY,nitro_renderer[\"p\" /* AvatarFigurePartType */].SHOES,nitro_renderer[\"p\" /* AvatarFigurePartType */].LEGS,nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST,nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].COAT_CHEST,nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST_PRINT,nitro_renderer[\"p\" /* AvatarFigurePartType */].WAIST_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].RIGHT_HAND,nitro_renderer[\"p\" /* AvatarFigurePartType */].RIGHT_SLEEVE,nitro_renderer[\"p\" /* AvatarFigurePartType */].RIGHT_COAT_SLEEVE,nitro_renderer[\"p\" /* AvatarFigurePartType */].HEAD,nitro_renderer[\"p\" /* AvatarFigurePartType */].FACE,nitro_renderer[\"p\" /* AvatarFigurePartType */].EYES,nitro_renderer[\"p\" /* AvatarFigurePartType */].HAIR,nitro_renderer[\"p\" /* AvatarFigurePartType */].HAIR_BIG,nitro_renderer[\"p\" /* AvatarFigurePartType */].FACE_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].EYE_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].HEAD_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].HEAD_ACCESSORY_EXTRA,nitro_renderer[\"p\" /* AvatarFigurePartType */].RIGHT_HAND_ITEM];\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/CategoryData.ts\nclass CategoryData{constructor(name,partItems,colorItems){this._name=void 0;this._parts=void 0;this._palettes=void 0;this._selectedPartIndex=-1;this._paletteIndexes=void 0;this._name=name;this._parts=partItems;this._palettes=colorItems;this._selectedPartIndex=-1;}static defaultColorId(palettes,clubLevel){if(!palettes||!palettes.length)return-1;let i=0;while(i<palettes.length){const colorItem=palettes[i];if(colorItem.partColor&&colorItem.partColor.clubLevel<=clubLevel){return colorItem.partColor.id;}i++;}return-1;}init(){for(const part of this._parts){if(!part)continue;part.init();}}dispose(){if(this._parts){for(const part of this._parts)part.dispose();this._parts=null;}if(this._palettes){for(const palette of this._palettes)for(const colorItem of palette)colorItem.dispose();this._palettes=null;}this._selectedPartIndex=-1;this._paletteIndexes=null;}selectPartId(partId){if(!this._parts)return;let i=0;while(i<this._parts.length){const partItem=this._parts[i];if(partItem.id===partId){this.selectPartIndex(i);return;}i++;}}selectColorIds(colorIds){if(!colorIds||!this._palettes)return;this._paletteIndexes=new Array(colorIds.length);let i=0;while(i<this._palettes.length){const palette=this.getPalette(i);if(palette){let colorId=0;if(colorIds.length>i){colorId=colorIds[i];}else{const colorItem=palette[0];if(colorItem&&colorItem.partColor)colorId=colorItem.partColor.id;}let j=0;while(j<palette.length){const colorItem=palette[j];if(colorItem.partColor.id===colorId){this._paletteIndexes[i]=j;colorItem.isSelected=true;}else{colorItem.isSelected=false;}j++;}}i++;}this.updatePartColors();}selectPartIndex(partIndex){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const partItem=this._parts[this._selectedPartIndex];if(partItem)partItem.isSelected=false;}if(this._parts.length>partIndex){const partItem=this._parts[partIndex];if(partItem){partItem.isSelected=true;this._selectedPartIndex=partIndex;return partItem;}}return null;}selectColorIndex(colorIndex,paletteId){const palette=this.getPalette(paletteId);if(!palette)return null;if(palette.length<=colorIndex)return null;this.deselectColorIndex(this._paletteIndexes[paletteId],paletteId);this._paletteIndexes[paletteId]=colorIndex;const colorItem=palette[colorIndex];if(!colorItem)return null;colorItem.isSelected=true;this.updatePartColors();return colorItem;}getCurrentColorIndex(k){return this._paletteIndexes[k];}deselectColorIndex(colorIndex,paletteIndex){const palette=this.getPalette(paletteIndex);if(!palette)return;if(palette.length<=colorIndex)return;const colorItem=palette[colorIndex];if(!colorItem)return;colorItem.isSelected=false;}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length)return null;if(!this._palettes||!this._palettes.length)return null;const palette=this._palettes[0];if(!palette||!palette.length)return null;const colorItem=palette[0];if(!colorItem||!colorItem.partColor)return null;const colorId=colorItem.partColor.id;const colorIds=[];let i=0;while(i<this._paletteIndexes.length){const paletteSet=this._palettes[i];if(!(!paletteSet||paletteSet.length<=i)){if(paletteSet.length>this._paletteIndexes[i]){const color=paletteSet[this._paletteIndexes[i]];if(color&&color.partColor){colorIds.push(color.partColor.id);}else{colorIds.push(colorId);}}else{colorIds.push(colorId);}}i++;}const partItem=this.getCurrentPart();if(!partItem)return null;return colorIds.slice(0,Math.max(partItem.maxColorIndex,1));}getSelectedColors(){const partColors=[];let i=0;while(i<this._paletteIndexes.length){const colorItem=this.getSelectedColor(i);if(colorItem){partColors.push(colorItem.partColor);}else{partColors.push(null);}i++;}return partColors;}getSelectedColor(paletteId){const palette=this.getPalette(paletteId);if(!palette||palette.length<=this._paletteIndexes[paletteId])return null;return palette[this._paletteIndexes[paletteId]];}getSelectedColorId(paletteId){const colorItem=this.getSelectedColor(paletteId);if(colorItem&&colorItem.partColor)return colorItem.partColor.id;return 0;}getPalette(paletteId){if(!this._paletteIndexes||!this._palettes||this._palettes.length<=paletteId){return null;}return this._palettes[paletteId];}getCurrentPart(){return this._parts[this._selectedPartIndex];}updatePartColors(){const partColors=this.getSelectedColors();for(const partItem of this._parts){if(partItem)partItem.partColors=partColors;}}hasClubSelectionsOverLevel(level){let hasInvalidSelections=false;const partColors=this.getSelectedColors();if(partColors){let i=0;while(i<partColors.length){const partColor=partColors[i];if(partColor&&partColor.clubLevel>level)hasInvalidSelections=true;i++;}}const partItem=this.getCurrentPart();if(partItem&&partItem.partSet){const partSet=partItem.partSet;if(partSet&&partSet.clubLevel>level)hasInvalidSelections=true;}return hasInvalidSelections;}hasInvalidSelectedItems(ownedItems){const part=this.getCurrentPart();if(!part)return false;const partSet=part.partSet;if(!partSet||!partSet.isSellable)return;return ownedItems.indexOf(partSet.id)>-1;}stripClubItemsOverLevel(level){const partItem=this.getCurrentPart();if(partItem&&partItem.partSet){const partSet=partItem.partSet;if(partSet.clubLevel>level){const newPartItem=this.selectPartIndex(0);if(newPartItem&&!newPartItem.partSet)this.selectPartIndex(1);return true;}}return false;}stripClubColorsOverLevel(level){const colorIds=[];const partColors=this.getSelectedColors();const colorItems=this.getPalette(0);let didStrip=false;const colorId=CategoryData.defaultColorId(colorItems,level);if(colorId===-1)return false;let i=0;while(i<partColors.length){const partColor=partColors[i];if(!partColor){colorIds.push(colorId);didStrip=true;}else{if(partColor.clubLevel>level){colorIds.push(colorId);didStrip=true;}else{colorIds.push(partColor.id);}}i++;}if(didStrip)this.selectColorIds(colorIds);return didStrip;}// public stripInvalidSellableItems(k:IHabboInventory): boolean\n// {\n//     var _local_3:IFigurePartSet;\n//     var _local_4:AvatarEditorGridPartItem;\n//     var _local_2:AvatarEditorGridPartItem = this._Str_6315();\n//     if (((_local_2) && (_local_2.partSet)))\n//     {\n//         _local_3 = _local_2.partSet;\n//         if (((_local_3.isSellable) && (!(k._Str_14439(_local_3.id)))))\n//         {\n//             _local_4 = this._Str_8066(0);\n//             if (((!(_local_4 == null)) && (_local_4.partSet == null)))\n//             {\n//                 this._Str_8066(1);\n//             }\n//             return true;\n//         }\n//     }\n//     return false;\n// }\nget name(){return this._name;}get parts(){return this._parts;}get selectedPartIndex(){return this._selectedPartIndex;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/AvatarEditorUtilities.ts\nclass AvatarEditorUtilities_AvatarEditorUtilities{static getGender(gender){switch(gender){case FigureData_FigureData.MALE:case'm':case'M':gender=FigureData_FigureData.MALE;break;case FigureData_FigureData.FEMALE:case'f':case'F':gender=FigureData_FigureData.FEMALE;break;default:gender=FigureData_FigureData.MALE;}return gender;}static hasFigureSetId(setId){return this.FIGURE_SET_IDS.indexOf(setId)>=0;}static createCategory(model,name){if(!model||!name||!this.CURRENT_FIGURE)return null;const partItems=[];const colorItems=[];let i=0;while(i<this.MAX_PALETTES){colorItems.push([]);i++;}const setType=GetAvatarSetType(name);if(!setType)return null;const palette=GetAvatarPalette(setType.paletteID);if(!palette)return null;let colorIds=this.CURRENT_FIGURE.getColorIds(name);if(!colorIds)colorIds=[];const partColors=new Array(colorIds.length);const clubItemsDimmed=this.clubItemsDimmed;const clubMemberLevel=GetClubMemberLevel();for(const partColor of palette.colors.getValues()){if(partColor.isSelectable&&(clubItemsDimmed||clubMemberLevel>=partColor.clubLevel)){let i=0;while(i<this.MAX_PALETTES){const isDisabled=clubMemberLevel<partColor.clubLevel;const colorItem=new AvatarEditorGridColorItem_AvatarEditorGridColorItem(partColor,isDisabled);colorItems[i].push(colorItem);i++;}if(name!==FigureData_FigureData.FACE){let i=0;while(i<colorIds.length){if(partColor.id===colorIds[i])partColors[i]=partColor;i++;}}}}let mandatorySetIds=[];if(clubItemsDimmed){mandatorySetIds=GetAvatarRenderManager().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2);}else{mandatorySetIds=GetAvatarRenderManager().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,clubMemberLevel);}const isntMandatorySet=mandatorySetIds.indexOf(name)===-1;if(isntMandatorySet){const partItem=new AvatarEditorGridPartItem_AvatarEditorGridPartItem(null,null,false);partItem.isClear=true;partItems.push(partItem);}const usesColors=name!==FigureData_FigureData.FACE;const partSets=setType.partSets;const totalPartSets=partSets.length;i=totalPartSets-1;while(i>=0){const partSet=partSets.getWithIndex(i);let isValidGender=false;if(partSet.gender===FigureData_FigureData.UNISEX){isValidGender=true;}else if(partSet.gender===this.CURRENT_FIGURE.gender){isValidGender=true;}if(partSet.isSelectable&&isValidGender&&(clubItemsDimmed||clubMemberLevel>=partSet.clubLevel)){const isDisabled=clubMemberLevel<partSet.clubLevel;let isValid=true;if(partSet.isSellable)isValid=this.hasFigureSetId(partSet.id);if(isValid)partItems.push(new AvatarEditorGridPartItem_AvatarEditorGridPartItem(partSet,partColors,usesColors,isDisabled));}i--;}partItems.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter);// if(this._forceSellableClothingVisibility || GetNitroInstance().getConfiguration<boolean>(\"avatareditor.support.sellablefurni\", false))\n// {\n//     _local_31 = (this._manager.windowManager.assets.getAssetByName(\"camera_zoom_in\") as BitmapDataAsset);\n//     _local_32 = (_local_31.content as BitmapData).clone();\n//     _local_33 = (AvatarEditorView._Str_6802.clone() as IWindowContainer);\n//     _local_33.name = AvatarEditorGridView.GET_MORE;\n//     _local_7 = new AvatarEditorGridPartItem(_local_33, k, null, null, false);\n//     _local_7._Str_3093 = _local_32;\n//     _local_3.push(_local_7);\n// }\ni=0;while(i<this.MAX_PALETTES){colorItems[i].sort(this.colorSorter);i++;}return new CategoryData(name,partItems,colorItems);}static clubSorter(a,b){const clubLevelA=!a.partSet?9999999999:a.partSet.clubLevel;const clubLevelB=!b.partSet?9999999999:b.partSet.clubLevel;const isSellableA=!a.partSet?false:a.partSet.isSellable;const isSellableB=!b.partSet?false:b.partSet.isSellable;if(isSellableA&&!isSellableB)return 1;if(isSellableB&&!isSellableA)return-1;if(clubLevelA>clubLevelB)return-1;if(clubLevelA<clubLevelB)return 1;if(a.partSet.id>b.partSet.id)return-1;if(a.partSet.id<b.partSet.id)return 1;return 0;}static colorSorter(a,b){const clubLevelA=!a.partColor?-1:a.partColor.clubLevel;const clubLevelB=!b.partColor?-1:b.partColor.clubLevel;if(clubLevelA<clubLevelB)return-1;if(clubLevelA>clubLevelB)return 1;if(a.partColor.index<b.partColor.index)return-1;if(a.partColor.index>b.partColor.index)return 1;return 0;}static noobSorter(a,b){const clubLevelA=!a.partSet?-1:a.partSet.clubLevel;const clubLevelB=!b.partSet?-1:b.partSet.clubLevel;const isSellableA=!a.partSet?false:a.partSet.isSellable;const isSellableB=!b.partSet?false:b.partSet.isSellable;if(isSellableA&&!isSellableB)return 1;if(isSellableB&&!isSellableA)return-1;if(clubLevelA<clubLevelB)return-1;if(clubLevelA>clubLevelB)return 1;if(a.partSet.id<b.partSet.id)return-1;if(a.partSet.id>b.partSet.id)return 1;return 0;}static avatarSetFirstSelectableColor(name){const setType=GetAvatarSetType(name);if(!setType)return-1;const palette=GetAvatarPalette(setType.paletteID);if(!palette)return-1;for(const color of palette.colors.getValues()){if(!color.isSelectable||GetClubMemberLevel()<color.clubLevel)continue;return color.id;}return-1;}static get clubItemsFirst(){return GetConfiguration('avatareditor.show.clubitems.first',true);}static get clubItemsDimmed(){return GetConfiguration('avatareditor.show.clubitems.dimmed',true);}}AvatarEditorUtilities_AvatarEditorUtilities.MAX_PALETTES=2;AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE=null;AvatarEditorUtilities_AvatarEditorUtilities.FIGURE_SET_IDS=[];AvatarEditorUtilities_AvatarEditorUtilities.BOUND_FURNITURE_NAMES=[];\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/CategoryBaseModel.ts\nclass CategoryBaseModel_CategoryBaseModel{constructor(){this._categories=void 0;this._isInitalized=void 0;this._maxPaletteCount=void 0;this._disposed=void 0;this._isInitalized=false;this._maxPaletteCount=0;}dispose(){this._categories=null;this._disposed=true;}get disposed(){return this._disposed;}init(){if(!this._categories)this._categories=new Map();}reset(){this._isInitalized=false;if(this._categories){for(const category of this._categories.values())category&&category.dispose();}this._categories=new Map();}addCategory(name){let existing=this._categories.get(name);if(existing)return;existing=AvatarEditorUtilities_AvatarEditorUtilities.createCategory(this,name);if(!existing)return;this._categories.set(name,existing);this.updateSelectionsFromFigure(name);}updateSelectionsFromFigure(figure){const category=this._categories.get(figure);if(!category)return;const setId=AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.getPartSetId(figure);let colorIds=AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.getColorIds(figure);if(!colorIds)colorIds=[];category.selectPartId(setId);category.selectColorIds(colorIds);}hasClubSelectionsOverLevel(level){if(!this._categories)return false;for(const category of this._categories.values()){if(!category)continue;if(category.hasClubSelectionsOverLevel(level))return true;}return false;}hasInvalidSelectedItems(ownedItems){if(!this._categories)return false;for(const category of this._categories.values()){if(category.hasInvalidSelectedItems(ownedItems))return true;}return false;}stripClubItemsOverLevel(level){if(!this._categories)return false;let didStrip=false;for(const[name,category]of this._categories.entries()){let isValid=false;if(category.stripClubItemsOverLevel(level))isValid=true;if(category.stripClubColorsOverLevel(level))isValid=true;if(isValid){const partItem=category.getCurrentPart();if(partItem&&AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE){AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.savePartData(name,partItem.id,category.getSelectedColorIds(),true);}didStrip=true;}}return didStrip;}stripInvalidSellableItems(){if(!this._categories)return false;let didStrip=false;for(const[name,category]of this._categories.entries()){const isValid=false;// if(category._Str_8360(this._Str_2278.manager.inventory)) _local_6 = true;\nif(isValid){const partItem=category.getCurrentPart();if(partItem&&AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE){AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.savePartData(name,partItem.id,category.getSelectedColorIds(),true);}didStrip=true;}}return didStrip;}selectPart(category,partIndex){const categoryData=this._categories.get(category);if(!categoryData)return;const selectedPartIndex=categoryData.selectedPartIndex;categoryData.selectPartIndex(partIndex);const partItem=categoryData.getCurrentPart();if(!partItem)return;if(partItem.isDisabled){categoryData.selectPartIndex(selectedPartIndex);// open hc window\nreturn;}this._maxPaletteCount=partItem.maxColorIndex;AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.savePartData(category,partItem.id,categoryData.getSelectedColorIds(),true);}selectColor(category,colorIndex,paletteId){const categoryData=this._categories.get(category);if(!categoryData)return;const paletteIndex=categoryData.getCurrentColorIndex(paletteId);categoryData.selectColorIndex(colorIndex,paletteId);const colorItem=categoryData.getSelectedColor(paletteId);if(colorItem.isDisabled){categoryData.selectColorIndex(paletteIndex,paletteId);// open hc window\nreturn;}AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.savePartSetColourId(category,categoryData.getSelectedColorIds(),true);}getCategoryData(category){if(!this._isInitalized)this.init();if(!this._categories)return null;return this._categories.get(category);}get categories(){return this._categories;}get canSetGender(){return false;}get maxPaletteCount(){return this._maxPaletteCount||1;}set maxPaletteCount(count){this._maxPaletteCount=count;}get name(){return null;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/BodyModel.ts\nclass BodyModel_BodyModel extends CategoryBaseModel_CategoryBaseModel{constructor(){super(...arguments);this._imageCallBackHandled=false;}init(){super.init();this.addCategory(FigureData_FigureData.FACE);this._isInitalized=true;}selectColor(category,colorIndex,paletteId){super.selectColor(category,colorIndex,paletteId);this.updateSelectionsFromFigure(FigureData_FigureData.FACE);}updateSelectionsFromFigure(name){if(!this._categories||!AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE)return;const category=this._categories.get(name);if(!category)return;const setId=AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.getPartSetId(name);let colorIds=AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.getColorIds(name);if(!colorIds)colorIds=[];category.selectPartId(setId);category.selectColorIds(colorIds);for(const part of category.parts){const resetFigure=figure=>{const figureString=AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE.getFigureStringWithFace(part.id);const avatarImage=GetAvatarRenderManager().createAvatarImage(figureString,nitro_renderer[\"q\" /* AvatarScaleType */].LARGE,null,{resetFigure,dispose:null,disposed:false});const sprite=avatarImage.getImageAsSprite(nitro_renderer[\"r\" /* AvatarSetType */].HEAD);if(sprite){sprite.y=10;part.thumbContainer=sprite;setTimeout(()=>avatarImage.dispose(),0);}};resetFigure(null);}}get canSetGender(){return true;}get name(){return nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].GENERIC;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/FigureGenerator.ts\nfunction getTotalColors(partSet){const parts=partSet.parts;let totalColors=0;for(const part of parts)totalColors=Math.max(totalColors,part.colorLayerIndex);return totalColors;}function getRandomSetTypes(requiredSets,options){options=options.filter(option=>requiredSets.indexOf(option)===-1);return[...requiredSets,...Randomizer.getRandomElements(options,Randomizer.getRandomNumber(options.length)+1)];}function getRandomPartSet(setType,gender){let clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let figureSetIds=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];if(!setType)return null;const options=setType.partSets.getValues().filter(option=>{if(!option.isSelectable||option.gender!=='U'&&option.gender!==gender||option.clubLevel>clubLevel||option.isSellable&&figureSetIds.indexOf(option.id)===-1)return null;return option;});if(!options||!options.length)return null;return Randomizer.getRandomElement(options);}function getRandomColors(palette,partSet){let clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!palette)return[];const options=palette.colors.getValues().filter(option=>{if(!option.isSelectable||option.clubLevel>clubLevel)return null;return option;});if(!options||!options.length)return null;return Randomizer.getRandomElements(options,getTotalColors(partSet));}function generateRandomFigure(figureData,gender){let clubLevel=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let figureSetIds=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];let ignoredSets=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];const structure=GetAvatarRenderManager().structure;const figureContainer=new nitro_renderer[\"o\" /* AvatarFigureContainer */]('');const requiredSets=getRandomSetTypes(structure.getMandatorySetTypeIds(gender,clubLevel),FigureData_FigureData.SET_TYPES);for(const setType of ignoredSets){const partSetId=figureData.getPartSetId(setType);const colors=figureData.getColorIds(setType);figureContainer.updatePart(setType,partSetId,colors);}for(const type of requiredSets){if(figureContainer.hasPartType(type))continue;const setType=structure.figureData.getSetType(type);const selectedSet=getRandomPartSet(setType,gender,clubLevel,figureSetIds);if(!selectedSet)continue;let selectedColors=[];if(selectedSet.isColorable){selectedColors=getRandomColors(structure.figureData.getPalette(setType.paletteID),selectedSet,clubLevel).map(color=>color.id);}figureContainer.updatePart(setType.type,selectedSet.id,selectedColors);}return figureContainer.getFigureString();}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/HeadModel.ts\nclass HeadModel_HeadModel extends CategoryBaseModel_CategoryBaseModel{init(){super.init();this.addCategory(FigureData_FigureData.HAIR);this.addCategory(FigureData_FigureData.HAT);this.addCategory(FigureData_FigureData.HEAD_ACCESSORIES);this.addCategory(FigureData_FigureData.EYE_ACCESSORIES);this.addCategory(FigureData_FigureData.FACE_ACCESSORIES);this._isInitalized=true;}get name(){return nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].HEAD;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/LegModel.ts\nclass LegModel_LegModel extends CategoryBaseModel_CategoryBaseModel{init(){super.init();this.addCategory(FigureData_FigureData.TROUSERS);this.addCategory(FigureData_FigureData.SHOES);this.addCategory(FigureData_FigureData.TROUSER_ACCESSORIES);this._isInitalized=true;}get name(){return nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].LEGS;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/common/TorsoModel.ts\nclass TorsoModel_TorsoModel extends CategoryBaseModel_CategoryBaseModel{init(){super.init();this.addCategory(FigureData_FigureData.SHIRT);this.addCategory(FigureData_FigureData.CHEST_PRINTS);this.addCategory(FigureData_FigureData.JACKET);this.addCategory(FigureData_FigureData.CHEST_ACCESSORIES);this._isInitalized=true;}get name(){return nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].TORSO;}}\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/figure-preview/AvatarEditorFigurePreviewView.tsx\nconst AvatarEditorFigurePreviewView=props=>{const{figureData=null}=props;const[updateId,setUpdateId]=Object(react[\"useState\"])(-1);const rerender=Object(react[\"useCallback\"])(()=>{setUpdateId(prevValue=>prevValue+1);},[]);const rotateFigure=Object(react[\"useCallback\"])(direction=>{if(direction<nitro_renderer[\"l\" /* AvatarDirectionAngle */].MIN_DIRECTION){direction=nitro_renderer[\"l\" /* AvatarDirectionAngle */].MAX_DIRECTION+(direction+1);}if(direction>nitro_renderer[\"l\" /* AvatarDirectionAngle */].MAX_DIRECTION){direction=direction-(nitro_renderer[\"l\" /* AvatarDirectionAngle */].MAX_DIRECTION+1);}figureData.direction=direction;},[figureData]);Object(react[\"useEffect\"])(()=>{if(!figureData)return;figureData.notify=rerender;return()=>{figureData.notify=null;};},[figureData,rerender]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"figure-preview-container\",overflow:\"hidden\",position:\"relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:figureData.getFigureString(),direction:figureData.direction,scale:2}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"avatar-shadow\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"arrow-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon arrow-left\",onClick:event=>rotateFigure(figureData.direction+1)})})]});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/AvatarEditorIcon.tsx\nconst AvatarEditorIcon=props=>{const{icon=null,selected=false,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-avatar-editor-spritesheet'];if(icon&&icon.length)newClassNames.push(icon+'-icon');if(selected)newClassNames.push('selected');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[icon,selected,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/figure-set/AvatarEditorFigureSetItemView.tsx\nconst AvatarEditorFigureSetItemView=props=>{const{partItem=null,children=null,...rest}=props;const[updateId,setUpdateId]=Object(react[\"useState\"])(-1);const hcDisabled=GetConfiguration('hc.disabled',false);const rerender=Object(react[\"useCallback\"])(()=>{setUpdateId(prevValue=>prevValue+1);},[]);Object(react[\"useEffect\"])(()=>{partItem.notify=rerender;return()=>{partItem.notify=null;};},[partItem,rerender]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemImage:partItem.isClear?undefined:partItem.imageUrl,itemActive:partItem.isSelected,...rest,children:[!hcDisabled&&partItem.isHC&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon hc-icon position-absolute\"}),partItem.isClear&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorIcon,{icon:\"clear\"}),partItem.isSellable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorIcon,{icon:\"sellable\",position:\"absolute\",className:\"end-1 bottom-1\"}),children]});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/figure-set/AvatarEditorFigureSetView.tsx\nconst AvatarEditorFigureSetView=props=>{const{model=null,category=null,setMaxPaletteCount=null}=props;const selectPart=Object(react[\"useCallback\"])(item=>{const index=category.parts.indexOf(item);if(index===-1)return;model.selectPart(category.name,index);const partItem=category.getCurrentPart();setMaxPaletteCount(partItem.maxColorIndex||1);},[model,category,setMaxPaletteCount]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,columnMinHeight:50,children:category.parts.length>0&&category.parts.map((item,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorFigureSetItemView,{partItem:item,onClick:event=>selectPart(item)},index))});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutGridColorPickerItem.tsx\nconst LayoutGridColorPickerItem=props=>{const{itemImage=undefined,itemColor=undefined,itemActive=false,itemCount=1,itemCountMinimum=1,itemUniqueSoldout=false,itemUniqueNumber=-2,itemUnseen=false,itemHighlight=false,disabled=false,center=true,column=true,style={},classNames=[],position='relative',overflow='hidden',children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['layout-grid-item','color-picker-frame'];if(itemActive)newClassNames.push('active');if(itemUniqueSoldout||itemUniqueNumber>0)newClassNames.push('unique-item');if(itemUniqueSoldout)newClassNames.push('sold-out');if(itemUnseen)newClassNames.push('unseen');if(itemHighlight)newClassNames.push('has-highlight');if(disabled)newClassNames.push('disabled');if(itemImage===null)newClassNames.push('icon','loading-icon');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[itemActive,itemUniqueSoldout,itemUniqueNumber,itemUnseen,itemHighlight,disabled,itemImage,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={...style};if(itemImage)newStyle.backgroundImage=`url(${itemImage})`;if(itemColor)newStyle.backgroundColor=itemColor;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,itemImage,itemColor]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:center,pointer:true,position:position,overflow:overflow,column:column,classNames:getClassNames,style:getStyle,...rest,children:[itemCount>itemCountMinimum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:itemCount}),itemUniqueNumber>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,className:\"unique-bg-override\",style:{backgroundImage:`url(${itemImage})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:itemUniqueNumber})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/palette-set/AvatarEditorPaletteSetItemView.tsx\nconst AvatarEditorPaletteSetItem=props=>{const{colorItem=null,children=null,...rest}=props;const[updateId,setUpdateId]=Object(react[\"useState\"])(-1);const hcDisabled=GetConfiguration('hc.disabled',false);const rerender=Object(react[\"useCallback\"])(()=>{setUpdateId(prevValue=>prevValue+1);},[]);Object(react[\"useEffect\"])(()=>{colorItem.notify=rerender;return()=>colorItem.notify=null;});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridColorPickerItem,{itemHighlight:true,itemColor:colorItem.color,itemActive:colorItem.isSelected,className:\"color-picker-frame clear-bg\",...rest,children:[!hcDisabled&&colorItem.isHC&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon hc-icon position-absolute\"}),children]});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/palette-set/AvatarEditorPaletteSetView.tsx\nconst AvatarEditorPaletteSetView=props=>{const{model=null,category=null,paletteSet=[],paletteIndex=-1}=props;const selectColor=Object(react[\"useCallback\"])(item=>{const index=paletteSet.indexOf(item);if(index===-1)return;model.selectColor(category.name,index,paletteIndex);},[model,category,paletteSet,paletteIndex]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{gap:1,columnCount:5,columnMinWidth:11,className:\"p-1\",children:paletteSet.length>0&&paletteSet.map((item,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorPaletteSetItem,{colorItem:item,onClick:event=>selectColor(item)},index))});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/model/AvatarEditorModelView.tsx\nconst AvatarEditorModelView=props=>{const{model=null,gender=null,setGender=null}=props;const[activeCategory,setActiveCategory]=Object(react[\"useState\"])(null);const[maxPaletteCount,setMaxPaletteCount]=Object(react[\"useState\"])(1);const selectCategory=Object(react[\"useCallback\"])(name=>{const category=model.categories.get(name);if(!category)return;category.init();setActiveCategory(category);for(const part of category.parts){if(!part||!part.isSelected)continue;setMaxPaletteCount(part.maxColorIndex||1);break;}},[model]);Object(react[\"useEffect\"])(()=>{model.init();for(const name of model.categories.keys()){selectCategory(name);break;}},[model,selectCategory]);if(!model||!activeCategory)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"choose-clothing overflow-auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"center\",gap:4,children:[model.canSetGender&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,pointer:true,className:\"category-item\",gap:3,onClick:event=>setGender(FigureData_FigureData.MALE),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorIcon,{icon:\"male\",selected:gender===FigureData_FigureData.MALE}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('avatareditor.generic.boy')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,pointer:true,className:\"category-item\",gap:3,onClick:event=>setGender(FigureData_FigureData.FEMALE),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorIcon,{icon:\"female\",selected:gender===FigureData_FigureData.FEMALE}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('avatareditor.generic.girl')})]})]}),!model.canSetGender&&model.categories&&model.categories.size>0&&Array.from(model.categories.keys()).map(name=>{const category=model.categories.get(name);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"category-item\",onClick:event=>selectCategory(name),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorIcon,{icon:category.name,selected:activeCategory===category})},name);})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"h-50\",size:5,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorFigureSetView,{model:model,category:activeCategory,setMaxPaletteCount:setMaxPaletteCount})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"hidden\",className:\"h-50\",children:[maxPaletteCount>=1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorPaletteSetView,{model:model,category:activeCategory,paletteSet:activeCategory.getPalette(0),paletteIndex:0}),maxPaletteCount===2&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorPaletteSetView,{model:model,category:activeCategory,paletteSet:activeCategory.getPalette(1),paletteIndex:1})]})]})});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/views/wardrobe/AvatarEditorWardrobeView.tsx\nconst AvatarEditorWardrobeView=props=>{const{figureData=null,savedFigures=[],setSavedFigures=null,loadAvatarInEditor=null}=props;const hcDisabled=GetConfiguration('hc.disabled',false);const wearFigureAtIndex=Object(react[\"useCallback\"])(index=>{if(index>=savedFigures.length||index<0)return;const[figure,gender]=savedFigures[index];loadAvatarInEditor(figure.getFigureString(),gender);},[savedFigures,loadAvatarInEditor]);const saveFigureAtWardrobeIndex=Object(react[\"useCallback\"])(index=>{if(!figureData||index>=savedFigures.length||index<0)return;const newFigures=[...savedFigures];const figure=figureData.getFigureString();const gender=figureData.gender;newFigures[index]=[GetAvatarRenderManager().createFigureContainer(figure),gender];setSavedFigures(newFigures);SendMessageComposer(new nitro_renderer[\"Eh\" /* SaveWardrobeOutfitMessageComposer */](index+1,figure,gender));},[figureData,savedFigures,setSavedFigures]);const figures=Object(react[\"useMemo\"])(()=>{if(!savedFigures||!savedFigures.length)return[];const items=[];savedFigures.forEach((_ref,index)=>{let[figureContainer,gender]=_ref;let clubLevel=0;if(figureContainer)clubLevel=GetAvatarRenderManager().getFigureClubLevel(figureContainer,gender);items.push(/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{position:\"relative\",overflow:\"hidden\",className:\"nitro-avatar-editor-wardrobe-figure-preview\",children:[figureContainer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:figureContainer.getFigureString(),gender:gender,direction:2}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"avatar-shadow\"}),!hcDisabled&&clubLevel>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{className:\"position-absolute top-1 start-1\",type:\"hc\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"button-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>saveFigureAtWardrobeIndex(index),children:LocalizeText('avatareditor.wardrobe.save')}),figureContainer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>wearFigureAtIndex(index),disabled:clubLevel>GetClubMemberLevel(),children:LocalizeText('generic_usable.button.use')})]})]},index));});return items;},[savedFigures,hcDisabled,saveFigureAtWardrobeIndex,wearFigureAtIndex]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:figures});};\n// CONCATENATED MODULE: ./src/components/avatar-editor/AvatarEditorView.tsx\nconst DEFAULT_MALE_FIGURE='hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007';const DEFAULT_FEMALE_FIGURE='hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68';const AvatarEditorView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[figures,setFigures]=Object(react[\"useState\"])(null);const[figureData,setFigureData]=Object(react[\"useState\"])(null);const[categories,setCategories]=Object(react[\"useState\"])(null);const[activeCategory,setActiveCategory]=Object(react[\"useState\"])(null);const[figureSetIds,setFigureSetIds]=Object(react[\"useState\"])([]);const[boundFurnitureNames,setBoundFurnitureNames]=Object(react[\"useState\"])([]);const[savedFigures,setSavedFigures]=Object(react[\"useState\"])([]);const[isWardrobeVisible,setIsWardrobeVisible]=Object(react[\"useState\"])(false);const[lastFigure,setLastFigure]=Object(react[\"useState\"])(null);const[lastGender,setLastGender]=Object(react[\"useState\"])(null);const[needsReset,setNeedsReset]=Object(react[\"useState\"])(true);const[isInitalized,setIsInitalized]=Object(react[\"useState\"])(false);const maxWardrobeSlots=Object(react[\"useMemo\"])(()=>GetConfiguration('avatar.wardrobe.max.slots',10),[]);const onFigureSetIdsMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFigureSetIds(parser.figureSetIds);setBoundFurnitureNames(parser.boundsFurnitureNames);},[]);UseMessageEventHook(nitro_renderer[\"yb\" /* FigureSetIdsMessageEvent */],onFigureSetIdsMessageEvent);const onUserWardrobePageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const savedFigures=[];let i=0;while(i<maxWardrobeSlots){savedFigures.push([null,null]);i++;}for(let[index,[look,gender]]of parser.looks.entries()){const container=GetAvatarRenderManager().createFigureContainer(look);savedFigures[index-1]=[container,gender];}setSavedFigures(savedFigures);},[maxWardrobeSlots]);UseMessageEventHook(nitro_renderer[\"Ti\" /* UserWardrobePageEvent */],onUserWardrobePageEvent);const selectCategory=Object(react[\"useCallback\"])(name=>{if(!categories)return;setActiveCategory(categories.get(name));},[categories]);const resetCategories=Object(react[\"useCallback\"])(()=>{const categories=new Map();categories.set(nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].GENERIC,new BodyModel_BodyModel());categories.set(nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].HEAD,new HeadModel_HeadModel());categories.set(nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].TORSO,new TorsoModel_TorsoModel());categories.set(nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].LEGS,new LegModel_LegModel());setCategories(categories);},[]);const setupFigures=Object(react[\"useCallback\"])(()=>{const figures=new Map();const maleFigure=new FigureData_FigureData();const femaleFigure=new FigureData_FigureData();maleFigure.loadAvatarData(DEFAULT_MALE_FIGURE,FigureData_FigureData.MALE);femaleFigure.loadAvatarData(DEFAULT_FEMALE_FIGURE,FigureData_FigureData.FEMALE);figures.set(FigureData_FigureData.MALE,maleFigure);figures.set(FigureData_FigureData.FEMALE,femaleFigure);setFigures(figures);setFigureData(figures.get(FigureData_FigureData.MALE));},[]);const loadAvatarInEditor=Object(react[\"useCallback\"])(function(figure,gender){let reset=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;gender=AvatarEditorUtilities_AvatarEditorUtilities.getGender(gender);let newFigureData=figureData;if(gender!==newFigureData.gender)newFigureData=figures.get(gender);if(figure!==newFigureData.getFigureString())newFigureData.loadAvatarData(figure,gender);if(newFigureData!==figureData)setFigureData(newFigureData);if(reset){setLastFigure(figureData.getFigureString());setLastGender(figureData.gender);}},[figures,figureData]);const processAction=Object(react[\"useCallback\"])(action=>{switch(action){case AvatarEditorAction.ACTION_CLEAR:loadAvatarInEditor(figureData.getFigureStringWithFace(0,false),figureData.gender,false);resetCategories();return;case AvatarEditorAction.ACTION_RESET:loadAvatarInEditor(lastFigure,lastGender);resetCategories();return;case AvatarEditorAction.ACTION_RANDOMIZE:const figure=generateRandomFigure(figureData,figureData.gender,GetClubMemberLevel(),figureSetIds,[FigureData_FigureData.FACE]);loadAvatarInEditor(figure,figureData.gender,false);resetCategories();return;case AvatarEditorAction.ACTION_SAVE:SendMessageComposer(new nitro_renderer[\"Di\" /* UserFigureComposer */](figureData.gender,figureData.getFigureString()));setIsVisible(false);return;}},[figureData,lastFigure,lastGender,figureSetIds,loadAvatarInEditor,resetCategories]);const setGender=Object(react[\"useCallback\"])(gender=>{gender=AvatarEditorUtilities_AvatarEditorUtilities.getGender(gender);setFigureData(figures.get(gender));},[figures]);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'avatar-editor/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{setSavedFigures(new Array(maxWardrobeSlots));},[maxWardrobeSlots]);Object(react[\"useEffect\"])(()=>{if(!isWardrobeVisible)return;setActiveCategory(null);SendMessageComposer(new nitro_renderer[\"Cc\" /* GetWardrobeMessageComposer */]());},[isWardrobeVisible]);Object(react[\"useEffect\"])(()=>{if(!activeCategory)return;setIsWardrobeVisible(false);},[activeCategory]);Object(react[\"useEffect\"])(()=>{if(!categories)return;selectCategory(nitro_renderer[\"m\" /* AvatarEditorFigureCategory */].GENERIC);},[categories,selectCategory]);Object(react[\"useEffect\"])(()=>{if(!figureData)return;AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE=figureData;resetCategories();return()=>AvatarEditorUtilities_AvatarEditorUtilities.CURRENT_FIGURE=null;},[figureData,resetCategories]);Object(react[\"useEffect\"])(()=>{AvatarEditorUtilities_AvatarEditorUtilities.FIGURE_SET_IDS=figureSetIds;AvatarEditorUtilities_AvatarEditorUtilities.BOUND_FURNITURE_NAMES=boundFurnitureNames;resetCategories();return()=>{AvatarEditorUtilities_AvatarEditorUtilities.FIGURE_SET_IDS=null;AvatarEditorUtilities_AvatarEditorUtilities.BOUND_FURNITURE_NAMES=null;};},[figureSetIds,boundFurnitureNames,resetCategories]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;if(!figures){setupFigures();setIsInitalized(true);return;}},[isVisible,figures,setupFigures]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!isInitalized||!needsReset)return;loadAvatarInEditor(GetSessionDataManager().figure,GetSessionDataManager().gender);setNeedsReset(false);},[isVisible,isInitalized,needsReset,loadAvatarInEditor]);Object(react[\"useEffect\"])(()=>{if(isVisible)return;return()=>{setNeedsReset(true);};},[isVisible]);if(!isVisible||!figureData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"avatar-editor\",className:\"nitro-avatar-editor\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('avatareditor.title'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardTabsView,{className:\"avatar-editor-tabs\",children:[categories&&categories.size>0&&Array.from(categories.keys()).map(category=>{const isActive=activeCategory&&activeCategory.name===category;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:isActive,onClick:event=>selectCategory(category),children:LocalizeText(`avatareditor.category.${category}`)},category);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:isWardrobeVisible,onClick:event=>setIsWardrobeVisible(true),children:LocalizeText('avatareditor.category.wardrobe')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,overflow:\"hidden\",children:[activeCategory&&!isWardrobeVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorModelView,{model:activeCategory,gender:figureData.gender,setGender:setGender}),isWardrobeVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorWardrobeView,{figureData:figureData,savedFigures:savedFigures,setSavedFigures:setSavedFigures,loadAvatarInEditor:loadAvatarInEditor})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:3,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorFigurePreviewView,{figureData:figureData}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"randomize-container position-absolute\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon randomize-icon\",onClick:event=>processAction(AvatarEditorAction.ACTION_RANDOMIZE)})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"w-100\",variant:\"success\",onClick:event=>processAction(AvatarEditorAction.ACTION_SAVE),children:LocalizeText('avatareditor.save')})})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/camera/CameraWidgetContext.tsx\nconst CameraWidgetContext=/*#__PURE__*/Object(react[\"createContext\"])({cameraRoll:null,setCameraRoll:null,selectedPictureIndex:null,setSelectedPictureIndex:null});const CameraWidgetContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetContext.Provider,{value:props.value,children:props.children});};const useCameraWidgetContext=()=>Object(react[\"useContext\"])(CameraWidgetContext);\n// CONCATENATED MODULE: ./src/components/camera/common/CameraPicture.ts\nclass CameraPicture{constructor(texture,imageUrl){this.texture=texture;this.imageUrl=imageUrl;}}\n// CONCATENATED MODULE: ./src/components/camera/views/capture/CameraWidgetCaptureView.tsx\nconst CAMERA_ROLL_LIMIT=5;const CameraWidgetCaptureView=props=>{const{onClose=null,onEdit=null,onDelete=null}=props;const{cameraRoll=null,setCameraRoll=null,selectedPictureIndex=-1,setSelectedPictureIndex=null}=useCameraWidgetContext();const elementRef=Object(react[\"useRef\"])();const selectedPicture=selectedPictureIndex>-1?cameraRoll[selectedPictureIndex]:null;const getCameraBounds=Object(react[\"useCallback\"])(()=>{if(!elementRef||!elementRef.current)return null;const frameBounds=elementRef.current.getBoundingClientRect();return new nitro_renderer[\"Ye\" /* NitroRectangle */](Math.floor(frameBounds.x),Math.floor(frameBounds.y),Math.floor(frameBounds.width),Math.floor(frameBounds.height));},[]);const takePicture=Object(react[\"useCallback\"])(()=>{if(selectedPictureIndex>-1){setSelectedPictureIndex(-1);return;}const texture=GetRoomEngine().createTextureFromRoom(GetRoomSession().roomId,1,getCameraBounds());const clone=[...cameraRoll];if(clone.length>=CAMERA_ROLL_LIMIT){NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('camera.full.body'));clone.pop();}PlaySound(SoundNames.CAMERA_SHUTTER);clone.push(new CameraPicture(texture,nitro_renderer[\"Sh\" /* TextureUtils */].generateImageUrl(texture)));setCameraRoll(clone);},[cameraRoll,selectedPictureIndex,getCameraBounds,setCameraRoll,setSelectedPictureIndex]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{uniqueKey:\"nitro-camera-capture\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,className:\"nitro-camera-capture\",gap:0,children:[selectedPicture&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",className:\"camera-area\",src:selectedPicture.imageUrl}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"camera-canvas drag-handler\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute header-close\",onClick:onClose}),!selectedPicture&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:elementRef,className:\"camera-area camera-view-finder\"}),selectedPicture&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"camera-area camera-frame\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-success me-3\",title:LocalizeText('camera.editor.button.tooltip'),onClick:onEdit,children:LocalizeText('camera.editor.button.text')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-danger\",onClick:onDelete,children:LocalizeText('camera.delete.button.text')})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"camera-button\",title:LocalizeText('camera.take.photo.button.tooltip'),onClick:takePicture})})]}),cameraRoll.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,justifyContent:\"center\",className:\"camera-roll d-flex justify-content-center py-2\",children:cameraRoll.map((picture,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:picture.imageUrl,onClick:event=>setSelectedPictureIndex(index)},index);})})]})});};\n// CONCATENATED MODULE: ./src/components/camera/views/checkout/CameraWidgetCheckoutView.tsx\nconst CameraWidgetCheckoutView=props=>{const{base64Url=null,onCloseClick=null,onCancelClick=null,price=null}=props;const[pictureUrl,setPictureUrl]=Object(react[\"useState\"])(null);const[publishUrl,setPublishUrl]=Object(react[\"useState\"])(null);const[picturesBought,setPicturesBought]=Object(react[\"useState\"])(0);const[wasPicturePublished,setWasPicturePublished]=Object(react[\"useState\"])(false);const[isWaiting,setIsWaiting]=Object(react[\"useState\"])(false);const[publishCooldown,setPublishCooldown]=Object(react[\"useState\"])(0);const publishDisabled=Object(react[\"useMemo\"])(()=>GetConfiguration('camera.publish.disabled',false),[]);const onCameraPurchaseOKMessageEvent=Object(react[\"useCallback\"])(event=>{setPicturesBought(value=>value+1);setIsWaiting(false);},[]);UseMessageEventHook(nitro_renderer[\"N\" /* CameraPurchaseOKMessageEvent */],onCameraPurchaseOKMessageEvent);const onCameraPublishStatusMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPublishUrl(parser.extraDataId);setPublishCooldown(parser.secondsToWait);setWasPicturePublished(parser.ok);setIsWaiting(false);},[]);UseMessageEventHook(nitro_renderer[\"M\" /* CameraPublishStatusMessageEvent */],onCameraPublishStatusMessageEvent);const onCameraStorageUrlMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPictureUrl(GetConfiguration('camera.url')+'/'+parser.url);},[]);UseMessageEventHook(nitro_renderer[\"O\" /* CameraStorageUrlMessageEvent */],onCameraStorageUrlMessageEvent);const processAction=function(type){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':onCloseClick();return;case'buy':if(isWaiting)return;setIsWaiting(true);SendMessageComposer(new nitro_renderer[\"Gf\" /* PurchasePhotoMessageComposer */](''));return;case'publish':if(isWaiting)return;setIsWaiting(true);SendMessageComposer(new nitro_renderer[\"Af\" /* PublishPhotoMessageComposer */]());return;case'cancel':onCancelClick();return;}};Object(react[\"useEffect\"])(()=>{if(!base64Url)return;GetRoomEngine().saveBase64AsScreenshot(base64Url);},[base64Url]);if(!price)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-camera-checkout\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('camera.confirm_phase.title'),onCloseClick:event=>processAction('close')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,children:[pictureUrl&&pictureUrl.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{className:\"picture-preview border\",imageUrl:pictureUrl}),(!pictureUrl||!pictureUrl.length)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"picture-preview border\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('camera.loading')})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",className:\"bg-muted rounded p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:publishDisabled?10:6,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('camera.purchase.header')}),(price.credits>0||price.duckets>0)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.purchase.confirmation.dialog.cost')}),price.credits>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:price.credits}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:-1})]}),price.duckets>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:price.duckets}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:5})]})]}),picturesBought>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('camera.purchase.count.info')}),\" \",picturesBought,/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"u\",{className:\"ms-1 cursor-pointer\",onClick:()=>CreateLinkEvent('inventory/toggle'),children:LocalizeText('camera.open.inventory')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",disabled:isWaiting,onClick:event=>processAction('buy'),children:LocalizeText(!picturesBought?'buy':'camera.buy.another.button.text')})})]}),!publishDisabled&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",className:\"bg-muted rounded p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText(wasPicturePublished?'camera.publish.successful':'camera.publish.explanation')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(wasPicturePublished?'camera.publish.success.short.info':'camera.publish.detailed.explanation')}),wasPicturePublished&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:publishUrl,rel:\"noreferrer\",target:\"_blank\",children:LocalizeText('camera.link.to.published')}),!wasPicturePublished&&price.publishDucketPrice>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.purchase.confirmation.dialog.cost')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:price.publishDucketPrice}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:5})]})]}),publishCooldown>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mt-1 text-center fw-bold\",children:LocalizeText('camera.publish.wait',['minutes'],[Math.ceil(publishCooldown/60).toString()])})]}),!wasPicturePublished&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"d-flex align-items-end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",disabled:isWaiting||publishCooldown>0,onClick:event=>processAction('publish'),children:LocalizeText('camera.publish.button.text')})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,children:LocalizeText('camera.warning.disclaimer')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('cancel'),children:LocalizeText('generic.cancel')})})]})]});};\n// EXTERNAL MODULE: ./node_modules/react-slider/dist/es/prod/index.js + 3 modules\nvar prod = __webpack_require__(16);\n\n// CONCATENATED MODULE: ./src/components/camera/common/CameraEditorTabs.ts\nclass CameraEditorTabs{}CameraEditorTabs.COLORMATRIX='colormatrix';CameraEditorTabs.COMPOSITE='composite';\n// CONCATENATED MODULE: ./src/components/camera/common/CameraPictureThumbnail.ts\nclass CameraPictureThumbnail{constructor(effectName,thumbnailUrl){this.effectName=effectName;this.thumbnailUrl=thumbnailUrl;}}\n// CONCATENATED MODULE: ./src/components/camera/views/editor/effect-list/CameraWidgetEffectListItemView.tsx\nconst CameraWidgetEffectListItemView=props=>{const{effect=null,thumbnailUrl=null,isActive=false,isLocked=false,selectEffect=null,removeEffect=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{title:LocalizeText(!isLocked?`camera.effect.name.${effect.name}`:`camera.effect.required.level ${effect.minLevel}`),itemActive:isActive,onClick:event=>!isActive&&selectEffect(),children:[isActive&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",className:\"rounded-circle remove-effect\",onClick:removeEffect,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\"})}),!isLocked&&thumbnailUrl&&thumbnailUrl.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"effect-thumbnail-image border\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:thumbnailUrl})}),isLocked&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{center:true,bold:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"lock\"})}),effect.minLevel]})]});};\n// CONCATENATED MODULE: ./src/components/camera/views/editor/effect-list/CameraWidgetEffectListView.tsx\nconst CameraWidgetEffectListView=props=>{const{myLevel=0,selectedEffects=[],effects=[],thumbnails=[],processAction=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:3,overflow:\"auto\",children:effects&&effects.length>0&&effects.map((effect,index)=>{const thumbnailUrl=thumbnails.find(thumbnail=>thumbnail.effectName===effect.name);const isActive=selectedEffects.findIndex(selectedEffect=>selectedEffect.effect.name===effect.name)>-1;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetEffectListItemView,{effect:effect,thumbnailUrl:thumbnailUrl&&thumbnailUrl.thumbnailUrl||null,isActive:isActive,isLocked:effect.minLevel>myLevel,selectEffect:()=>processAction('select_effect',effect.name),removeEffect:()=>processAction('remove_effect',effect.name)},index);})});};\n// CONCATENATED MODULE: ./src/components/camera/views/editor/CameraWidgetEditorView.tsx\nconst TABS=[CameraEditorTabs.COLORMATRIX,CameraEditorTabs.COMPOSITE];const CameraWidgetEditorView=props=>{const{picture=null,availableEffects=null,myLevel=1,onClose=null,onCancel=null,onCheckout=null}=props;const[currentTab,setCurrentTab]=Object(react[\"useState\"])(TABS[0]);const[selectedEffectName,setSelectedEffectName]=Object(react[\"useState\"])(null);const[selectedEffects,setSelectedEffects]=Object(react[\"useState\"])([]);const[effectsThumbnails,setEffectsThumbnails]=Object(react[\"useState\"])([]);const[isZoomed,setIsZoomed]=Object(react[\"useState\"])(false);const getColorMatrixEffects=Object(react[\"useMemo\"])(()=>{return availableEffects.filter(effect=>effect.colorMatrix);},[availableEffects]);const getCompositeEffects=Object(react[\"useMemo\"])(()=>{return availableEffects.filter(effect=>effect.texture);},[availableEffects]);const getEffectList=Object(react[\"useCallback\"])(()=>{if(currentTab===CameraEditorTabs.COLORMATRIX){return getColorMatrixEffects;}return getCompositeEffects;},[currentTab,getColorMatrixEffects,getCompositeEffects]);const getSelectedEffectIndex=Object(react[\"useCallback\"])(name=>{if(!name||!name.length||!selectedEffects||!selectedEffects.length)return-1;return selectedEffects.findIndex(effect=>effect.effect.name===name);},[selectedEffects]);const getCurrentEffectIndex=Object(react[\"useMemo\"])(()=>{return getSelectedEffectIndex(selectedEffectName);},[selectedEffectName,getSelectedEffectIndex]);const getCurrentEffect=Object(react[\"useMemo\"])(()=>{if(!selectedEffectName)return null;return selectedEffects[getCurrentEffectIndex]||null;},[selectedEffectName,getCurrentEffectIndex,selectedEffects]);const setSelectedEffectAlpha=Object(react[\"useCallback\"])(alpha=>{const index=getCurrentEffectIndex;if(index===-1)return;setSelectedEffects(prevValue=>{const clone=[...prevValue];const currentEffect=clone[index];clone[getCurrentEffectIndex]=new nitro_renderer[\"ag\" /* RoomCameraWidgetSelectedEffect */](currentEffect.effect,alpha);return clone;});},[getCurrentEffectIndex,setSelectedEffects]);const getCurrentPictureUrl=Object(react[\"useMemo\"])(()=>{return GetRoomCameraWidgetManager().applyEffects(picture.texture,selectedEffects,isZoomed).src;},[picture,selectedEffects,isZoomed]);const processAction=Object(react[\"useCallback\"])(function(type){let effectName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':onClose();return;case'cancel':onCancel();return;case'checkout':onCheckout(getCurrentPictureUrl);return;case'change_tab':setCurrentTab(String(effectName));return;case'select_effect':{let existingIndex=getSelectedEffectIndex(effectName);if(existingIndex>=0)return;const effect=availableEffects.find(effect=>effect.name===effectName);if(!effect)return;setSelectedEffects(prevValue=>{return[...prevValue,new nitro_renderer[\"ag\" /* RoomCameraWidgetSelectedEffect */](effect,1)];});setSelectedEffectName(effect.name);return;}case'remove_effect':{let existingIndex=getSelectedEffectIndex(effectName);if(existingIndex===-1)return;setSelectedEffects(prevValue=>{const clone=[...prevValue];clone.splice(existingIndex,1);return clone;});if(selectedEffectName===effectName)setSelectedEffectName(null);return;}case'clear_effects':setSelectedEffectName(null);setSelectedEffects([]);return;case'download':{const image=new Image();image.src=getCurrentPictureUrl;const newWindow=window.open('');newWindow.document.write(image.outerHTML);return;}case'zoom':setIsZoomed(!isZoomed);return;}},[isZoomed,availableEffects,selectedEffectName,getCurrentPictureUrl,getSelectedEffectIndex,onCancel,onCheckout,onClose,setIsZoomed,setSelectedEffects]);Object(react[\"useEffect\"])(()=>{const thumbnails=[];for(const effect of availableEffects){thumbnails.push(new CameraPictureThumbnail(effect.name,GetRoomCameraWidgetManager().applyEffects(picture.texture,[new nitro_renderer[\"ag\" /* RoomCameraWidgetSelectedEffect */](effect,1)],false).src));}setEffectsThumbnails(thumbnails);},[picture,availableEffects]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-camera-editor\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('camera.editor.button.text'),onCloseClick:event=>processAction('close')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:TABS.map(tab=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:currentTab===tab,onClick:event=>processAction('change_tab',tab),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'icon icon-camera-'+tab})},tab);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:5,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetEffectListView,{myLevel:myLevel,selectedEffects:selectedEffects,effects:getEffectList(),thumbnails:effectsThumbnails,processAction:processAction})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,justifyContent:\"between\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:getCurrentPictureUrl,className:\"picture-preview\"}),selectedEffectName&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('camera.effect.name.'+selectedEffectName)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'nitro-slider',min:0,max:1,step:0.01,value:getCurrentEffect.alpha,onChange:event=>setSelectedEffectAlpha(event),renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:state.valueNow})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('clear_effects'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"trash\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('download'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"save\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('zoom'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:isZoomed?'search-minus':'search-plus'})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('cancel'),children:LocalizeText('generic.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('checkout'),children:LocalizeText('camera.preview.button.text')})]})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/camera/CameraWidgetView.tsx\nconst MODE_NONE=0;const MODE_CAPTURE=1;const MODE_EDITOR=2;const MODE_CHECKOUT=3;const CameraWidgetView=props=>{const[mode,setMode]=Object(react[\"useState\"])(MODE_NONE);const[availableEffects,setAvailableEffects]=Object(react[\"useState\"])([]);const[cameraRoll,setCameraRoll]=Object(react[\"useState\"])([]);const[selectedPictureIndex,setSelectedPictureIndex]=Object(react[\"useState\"])(-1);const[myLevel,setMyLevel]=Object(react[\"useState\"])(10);const[base64Url,setSavedPictureUrl]=Object(react[\"useState\"])(null);const[price,setPrice]=Object(react[\"useState\"])(null);const onRoomCameraWidgetManagerEvent=Object(react[\"useCallback\"])(event=>{setAvailableEffects(Array.from(GetRoomCameraWidgetManager().effects.values()));},[]);UseCameraEvent(nitro_renderer[\"Zf\" /* RoomCameraWidgetManagerEvent */].INITIALIZED,onRoomCameraWidgetManagerEvent);const onCameraConfigurationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setPrice({credits:parser.creditPrice,duckets:parser.ducketPrice,publishDucketPrice:parser.publishDucketPrice});},[]);UseMessageEventHook(nitro_renderer[\"Od\" /* InitCameraMessageEvent */],onCameraConfigurationEvent);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{setMode(MODE_NONE);},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);Object(react[\"useEffect\"])(()=>{if(!GetRoomCameraWidgetManager().isLoaded){GetRoomCameraWidgetManager().init();SendMessageComposer(new nitro_renderer[\"Tf\" /* RequestCameraConfigurationComposer */]());return;}},[]);const processAction=Object(react[\"useCallback\"])(type=>{switch(type){case'close':setMode(MODE_NONE);return;case'edit':setMode(MODE_EDITOR);return;case'delete':setCameraRoll(prevValue=>{const clone=[...prevValue];clone.splice(selectedPictureIndex,1);return clone;});return;case'editor_cancel':setMode(MODE_CAPTURE);return;}},[selectedPictureIndex]);const checkoutPictureUrl=Object(react[\"useCallback\"])(pictureUrl=>{setSavedPictureUrl(pictureUrl);setMode(MODE_CHECKOUT);},[]);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setMode(MODE_CAPTURE);return;case'hide':setMode(MODE_NONE);return;case'toggle':setMode(prevValue=>{if(!prevValue)return MODE_CAPTURE;else return MODE_NONE;});return;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'camera/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);if(mode===MODE_NONE)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(CameraWidgetContextProvider,{value:{cameraRoll,setCameraRoll,selectedPictureIndex,setSelectedPictureIndex},children:[mode===MODE_CAPTURE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetCaptureView,{onClose:()=>processAction('close'),onEdit:()=>processAction('edit'),onDelete:()=>processAction('delete')}),mode===MODE_EDITOR&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetEditorView,{picture:cameraRoll[selectedPictureIndex],myLevel:myLevel,onClose:()=>processAction('close'),onCancel:()=>processAction('editor_cancel'),onCheckout:checkoutPictureUrl,availableEffects:availableEffects}),mode===MODE_CHECKOUT&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetCheckoutView,{base64Url:base64Url,onCloseClick:()=>processAction('close'),onCancelClick:()=>processAction('editor_cancel'),price:price})]});};\n// CONCATENATED MODULE: ./src/components/campaign/CalendarItemView.tsx\nconst CalendarItemView=props=>{const{itemId=-1,state=null,product=null,active=false,onClick=null}=props;const getFurnitureIcon=name=>{let furniData=GetSessionDataManager().getFloorItemDataByName(name);let url=null;if(furniData)url=GetRoomEngine().getFurnitureFloorIconUrl(furniData.id);else{furniData=GetSessionDataManager().getWallItemDataByName(name);if(furniData)url=GetRoomEngine().getFurnitureWallIconUrl(furniData.id);}return url;};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fit:true,center:true,pointer:true,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${active?'active':''}`,onClick:()=>onClick(itemId),children:[state===CalendarItemState.STATE_UNLOCKED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"campaign-spritesheet unlocked-bg\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"campaign-spritesheet campaign-opened\",children:product&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:product.customImage?GetConfiguration('image.library.url')+product.customImage:getFurnitureIcon(product.productName)})})}),state!==CalendarItemState.STATE_UNLOCKED&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,className:\"campaign-spritesheet locked-bg\",children:[state===CalendarItemState.STATE_LOCKED_AVAILABLE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"campaign-spritesheet available\"}),(state===CalendarItemState.STATE_LOCKED_EXPIRED||state===CalendarItemState.STATE_LOCKED_FUTURE)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"campaign-spritesheet unavailable\"})]})]});};\n// CONCATENATED MODULE: ./src/components/campaign/CalendarView.tsx\nconst TOTAL_SHOWN_ITEMS=5;const CalendarView=props=>{const{close=null,campaignName=null,currentDay=null,numDays=null,missedDays=null,openedDays=null,openPackage=null,receivedProducts=null}=props;const[selectedDay,setSelectedDay]=Object(react[\"useState\"])(currentDay);const[index,setIndex]=Object(react[\"useState\"])(Math.max(0,selectedDay-1));const getDayState=day=>{if(openedDays.includes(day))return CalendarItemState.STATE_UNLOCKED;if(day>currentDay)return CalendarItemState.STATE_LOCKED_FUTURE;if(missedDays.includes(day))return CalendarItemState.STATE_LOCKED_EXPIRED;return CalendarItemState.STATE_LOCKED_AVAILABLE;};const dayMessage=day=>{const state=getDayState(day);switch(state){case CalendarItemState.STATE_UNLOCKED:return LocalizeText('campaign.calendar.info.unlocked');case CalendarItemState.STATE_LOCKED_FUTURE:return LocalizeText('campaign.calendar.info.future');case CalendarItemState.STATE_LOCKED_EXPIRED:return LocalizeText('campaign.calendar.info.expired');default:return LocalizeText('campaign.calendar.info.available.desktop');}};const onClickNext=()=>{const nextDay=selectedDay+1;if(nextDay===numDays)return;setSelectedDay(nextDay);if(index+TOTAL_SHOWN_ITEMS<nextDay+1)setIndex(index+1);};const onClickPrev=()=>{const prevDay=selectedDay-1;if(prevDay<0)return;setSelectedDay(prevDay);if(index>prevDay)setIndex(index-1);};const onClickItem=item=>{if(selectedDay===item){const state=getDayState(item);if(state===CalendarItemState.STATE_LOCKED_AVAILABLE)openPackage(item,false);return;}setSelectedDay(item);};const forceOpen=()=>{const id=selectedDay;const state=getDayState(id);if(state!==CalendarItemState.STATE_UNLOCKED)openPackage(id,true);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-campaign-calendar\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText(`campaign.calendar.${campaignName}.title`),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:false,justifyContent:\"between\",alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:1}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:10,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:3,children:LocalizeText('campaign.calendar.heading.day',['number'],[(selectedDay+1).toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:dayMessage(selectedDay)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:GetSessionDataManager().isModerator&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:forceOpen,children:\"Force open\"})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:1})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullHeight:true,gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"campaign-spritesheet prev\",onClick:onClickPrev})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,fullWidth:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{fit:true,columnCount:TOTAL_SHOWN_ITEMS,gap:1,children:[...Array(TOTAL_SHOWN_ITEMS)].map((e,i)=>{const day=index+i;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CalendarItemView,{itemId:day,state:getDayState(day),active:selectedDay===day,product:receivedProducts.has(day)?receivedProducts.get(day):null,onClick:onClickItem})},i);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"campaign-spritesheet next\",onClick:onClickNext})})]})]})]});};\n// CONCATENATED MODULE: ./src/components/campaign/CampaignView.tsx\nconst CampaignView=props=>{const[calendarData,setCalendarData]=Object(react[\"useState\"])(null);const[lastOpenAttempt,setLastOpenAttempt]=Object(react[\"useState\"])(-1);const[receivedProducts,setReceivedProducts]=Object(react[\"useState\"])(new Map());const[isCalendarOpen,setCalendarOpen]=Object(react[\"useState\"])(false);const onCampaignCalendarDataMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;setCalendarData(parser.calendarData);},[]);UseMessageEventHook(nitro_renderer[\"P\" /* CampaignCalendarDataMessageEvent */],onCampaignCalendarDataMessageEvent);const onCampaignCalendarDoorOpenedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const lastAttempt=lastOpenAttempt;if(parser.doorOpened){setCalendarData(prev=>{const copy=prev.clone();copy.openedDays.push(lastOpenAttempt);return copy;});setReceivedProducts(prev=>{const copy=new Map(prev);copy.set(lastAttempt,new CalendarItem(parser.productName,parser.customImage,parser.furnitureClassName));return copy;});}setLastOpenAttempt(-1);},[lastOpenAttempt]);UseMessageEventHook(nitro_renderer[\"Q\" /* CampaignCalendarDoorOpenedMessageEvent */],onCampaignCalendarDoorOpenedMessageEvent);const openPackage=Object(react[\"useCallback\"])(function(id){let asStaff=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!calendarData)return;setLastOpenAttempt(id);if(asStaff){SendMessageComposer(new nitro_renderer[\"hf\" /* OpenCampaignCalendarDoorAsStaffComposer */](calendarData.campaignName,id));}else{SendMessageComposer(new nitro_renderer[\"if\" /* OpenCampaignCalendarDoorComposer */](calendarData.campaignName,id));}},[calendarData]);const onCalendarClose=Object(react[\"useCallback\"])(()=>{setCalendarOpen(false);},[]);const onLinkReceived=Object(react[\"useCallback\"])(link=>{const value=link.split('/');if(value.length<2)return;switch(value[1]){case'calendar':setCalendarOpen(true);break;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:onLinkReceived,eventUrlPrefix:'openView/'};AddEventLinkTracker(linkTracker);return()=>{RemoveLinkEventTracker(linkTracker);};},[onLinkReceived]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:calendarData&&isCalendarOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CalendarView,{close:onCalendarClose,campaignName:calendarData.campaignName,currentDay:calendarData.currentDay,numDays:calendarData.campaignDays,openedDays:calendarData.openedDays,missedDays:calendarData.missedDays,openPackage:openPackage,receivedProducts:receivedProducts})});};\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(22);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// CONCATENATED MODULE: ./src/common/GiftColorButton.tsx\nconst GiftColorButton=props=>{const{variant='primary',size='',active=false,disabled=false,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['gift-color-btn'];if(variant)newClassNames.push('btn-'+variant);if(size)newClassNames.push('btn-'+size);if(active)newClassNames.push('active');if(disabled)newClassNames.push('disabled');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[variant,size,active,disabled,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/components/catalog/views/gift/CatalogGiftView.tsx\nconst CatalogGiftView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[pageId,setPageId]=Object(react[\"useState\"])(0);const[offerId,setOfferId]=Object(react[\"useState\"])(0);const[extraData,setExtraData]=Object(react[\"useState\"])('');const[receiverName,setReceiverName]=Object(react[\"useState\"])('');const[showMyFace,setShowMyFace]=Object(react[\"useState\"])(true);const[message,setMessage]=Object(react[\"useState\"])('');const[colors,setColors]=Object(react[\"useState\"])([]);const[selectedBoxIndex,setSelectedBoxIndex]=Object(react[\"useState\"])(0);const[selectedRibbonIndex,setSelectedRibbonIndex]=Object(react[\"useState\"])(0);const[selectedColorId,setSelectedColorId]=Object(react[\"useState\"])(0);const[maxBoxIndex,setMaxBoxIndex]=Object(react[\"useState\"])(0);const[maxRibbonIndex,setMaxRibbonIndex]=Object(react[\"useState\"])(0);const[receiverNotFound,setReceiverNotFound]=Object(react[\"useState\"])(false);const{catalogOptions=null}=useCatalog();const{giftConfiguration=null}=catalogOptions;const close=Object(react[\"useCallback\"])(()=>{setIsVisible(false);setPageId(0);setOfferId(0);setExtraData('');setReceiverName('');setShowMyFace(true);setMessage('');setSelectedBoxIndex(0);setSelectedRibbonIndex(0);if(colors.length)setSelectedColorId(colors[0].id);},[colors]);const onCatalogEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS:close();return;case CatalogEvent_CatalogEvent.INIT_GIFT:const castedEvent=event;close();setPageId(castedEvent.pageId);setOfferId(castedEvent.offerId);setExtraData(castedEvent.extraData);setIsVisible(true);return;}},[close]);UseUiEvent(CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS,onCatalogEvent);UseUiEvent(CatalogEvent_CatalogEvent.INIT_GIFT,onCatalogEvent);const isBoxDefault=Object(react[\"useMemo\"])(()=>{return giftConfiguration?giftConfiguration.defaultStuffTypes.findIndex(s=>s===giftConfiguration.boxTypes[selectedBoxIndex])>-1:true;},[giftConfiguration,selectedBoxIndex]);const boxExtraData=Object(react[\"useMemo\"])(()=>{if(!giftConfiguration)return'';return(giftConfiguration.boxTypes[selectedBoxIndex]*1000+giftConfiguration.ribbonTypes[selectedRibbonIndex]).toString();},[giftConfiguration,selectedBoxIndex,selectedRibbonIndex]);const isColorable=Object(react[\"useMemo\"])(()=>{if(!giftConfiguration)return false;const boxType=giftConfiguration.boxTypes[selectedBoxIndex];return boxType===8||boxType>=3&&boxType<=6?false:true;},[giftConfiguration,selectedBoxIndex]);const handleAction=Object(react[\"useCallback\"])(action=>{switch(action){case'prev_box':setSelectedBoxIndex(value=>value===0?maxBoxIndex:value-1);return;case'next_box':setSelectedBoxIndex(value=>value===maxBoxIndex?0:value+1);return;case'prev_ribbon':setSelectedRibbonIndex(value=>value===0?maxRibbonIndex:value-1);return;case'next_ribbon':setSelectedRibbonIndex(value=>value===maxRibbonIndex?0:value+1);return;case'buy':if(!receiverName||receiverName.length===0){setReceiverNotFound(true);return;}SendMessageComposer(new nitro_renderer[\"Cf\" /* PurchaseFromCatalogAsGiftComposer */](pageId,offerId,extraData,receiverName,message,selectedColorId,selectedBoxIndex,selectedRibbonIndex,showMyFace));return;}},[extraData,maxBoxIndex,maxRibbonIndex,message,offerId,pageId,receiverName,selectedBoxIndex,selectedColorId,selectedRibbonIndex,showMyFace]);const onGiftReceiverNotFoundEvent=Object(react[\"useCallback\"])(()=>{setReceiverNotFound(true);},[]);UseMessageEventHook(nitro_renderer[\"Ec\" /* GiftReceiverNotFoundEvent */],onGiftReceiverNotFoundEvent);Object(react[\"useEffect\"])(()=>{setReceiverNotFound(false);},[receiverName]);Object(react[\"useEffect\"])(()=>{if(!giftConfiguration)return;const newColors=[];for(const colorId of giftConfiguration.stuffTypes){const giftData=GetSessionDataManager().getFloorItemData(colorId);if(!giftData)continue;if(giftData.colors&&giftData.colors.length>0)newColors.push({id:colorId,color:`#${giftData.colors[0].toString(16)}`});}setMaxBoxIndex(giftConfiguration.boxTypes.length-1);setMaxRibbonIndex(giftConfiguration.ribbonTypes.length-1);if(newColors.length){setSelectedColorId(newColors[0].id);setColors(newColors);}},[giftConfiguration]);if(!giftConfiguration||!giftConfiguration.isEnabled||!isVisible)return null;const boxName='catalog.gift_wrapping_new.box.'+(isBoxDefault?'default':selectedBoxIndex);const ribbonName=`catalog.gift_wrapping_new.ribbon.${selectedRibbonIndex}`;const priceText='catalog.gift_wrapping_new.'+(isBoxDefault?'freeprice':'price');return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"catalog-gift\",className:\"nitro-catalog-gift\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('catalog.gift_wrapping.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FormGroup,{column:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.gift_wrapping.receiver')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:'form-control form-control-sm'+classnames_default()({' is-invalid':receiverNotFound}),value:receiverName,onChange:e=>setReceiverName(e.target.value)}),receiverNotFound&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"invalid-feedback\",children:LocalizeText('catalog.gift_wrapping.receiver_not_found.title')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGiftTagView,{figure:GetSessionDataManager().figure,userName:GetSessionDataManager().userName,message:message,editable:true,onChange:value=>setMessage(value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"form-check\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",name:\"showMyFace\",checked:showMyFace,onChange:e=>setShowMyFace(value=>!value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{className:\"form-check-label\",children:LocalizeText('catalog.gift_wrapping.show_face.title')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[selectedColorId&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"gift-preview\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutFurniImageView,{productType:ProductTypeEnum.FLOOR,productClassId:selectedColorId,extraData:boxExtraData})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:()=>handleAction('prev_box'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:()=>handleAction('next_box'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText(boxName)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[LocalizeText(priceText,['price'],[giftConfiguration.price.toString()]),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:-1})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:()=>handleAction('prev_ribbon'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:()=>handleAction('next_ribbon'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText(ribbonName)})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText('catalog.gift_wrapping.pick_color')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ButtonGroup,{fullWidth:true,className:\"gap-2\",children:colors.map(color=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GiftColorButton,{variant:\"dark\",active:color.id===selectedColorId,disabled:!isColorable,style:{backgroundColor:color.color},onClick:()=>setSelectedColorId(color.id)},color.id))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"link\",onClick:close,className:\"text-black\",children:LocalizeText('cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:()=>handleAction('buy'),children:LocalizeText('catalog.gift_wrapping.give_gift')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/common/CatalogSearchView.tsx\nconst CatalogSearchView=props=>{const[searchValue,setSearchValue]=Object(react[\"useState\"])('');const[needsProcessing,setNeedsProcessing]=Object(react[\"useState\"])(false);const{currentType=null,rootNode=null,offersToNodes=null,searchResult=null,setSearchResult=null,setCurrentPage=null}=useCatalog();const updateSearchValue=value=>{if(!value||!value.length){setSearchValue('');if(searchResult)setSearchResult(null);}else{setSearchValue(value);setNeedsProcessing(true);}};const processSearch=Object(react[\"useCallback\"])(search=>{setNeedsProcessing(false);search=search.toLocaleLowerCase().replace(' ','');if(!search||!search.length)return;const furnitureDatas=GetSessionDataManager().getAllFurnitureData({loadFurnitureData:null});if(!furnitureDatas||!furnitureDatas.length)return;const foundFurniture=[];const foundFurniLines=[];for(const furniture of furnitureDatas){if(currentType===CatalogType.BUILDER&&!furniture.availableForBuildersClub)continue;if(currentType===CatalogType.NORMAL&&furniture.excludeDynamic)continue;const searchValues=[furniture.className,furniture.name,furniture.description].join(' ').replace(/ /gi,'').toLowerCase();if(currentType===CatalogType.BUILDER&&furniture.purchaseOfferId===-1&&furniture.rentOfferId===-1){if(furniture.furniLine!==''&&foundFurniLines.indexOf(furniture.furniLine)<0){if(searchValues.indexOf(search)>=0)foundFurniLines.push(furniture.furniLine);}}else{const foundNodes=[...GetOfferNodes(offersToNodes,furniture.purchaseOfferId),...GetOfferNodes(offersToNodes,furniture.rentOfferId)];if(foundNodes.length){if(searchValues.indexOf(search)>=0)foundFurniture.push(furniture);if(foundFurniture.length===250)break;}}}const offers=[];for(const furniture of foundFurniture)offers.push(new FurnitureOffer_FurnitureOffer(furniture));let nodes=[];FilterCatalogNode(search,foundFurniLines,rootNode,nodes);setCurrentPage(new CatalogPage(-1,'default_3x3',new PageLocalization_PageLocalization([],[]),offers,false,1));setSearchResult(new SearchResult(search,offers,nodes.filter(node=>node.isVisible)));},[offersToNodes,currentType,rootNode,setCurrentPage,setSearchResult]);Object(react[\"useEffect\"])(()=>{if(!needsProcessing)return;const timeout=setTimeout(()=>processSearch(searchValue),300);return()=>clearTimeout(timeout);},[searchValue,needsProcessing,processSearch]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"position-relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:true,alignItems:\"center\",position:\"relative\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>updateSearchValue(event.target.value),onKeyDown:event=>(event.code==='Enter'||event.code==='NumpadEnter')&&processSearch(searchValue)})}),(!searchValue||!searchValue.length)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-pen position-absolute catalog-search-button\"}),searchValue&&!!searchValue.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-clear position-absolute catalog-clear-button\",onClick:event=>updateSearchValue('')})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/catalog-icon/CatalogIconView.tsx\nconst CatalogIconView=props=>{const{icon=0}=props;const getIconUrl=Object(react[\"useMemo\"])(()=>{return GetConfiguration('catalog.asset.icon.url').replace('%name%',icon.toString());},[icon]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{className:\"catalog-icon\",imageUrl:getIconUrl,style:{width:20,height:20}});};\n// CONCATENATED MODULE: ./src/components/catalog/views/navigation/CatalogNavigationSetView.tsx\nconst CatalogNavigationSetView=props=>{const{node=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:node&&node.children.length>0&&node.children.map((n,index)=>{if(!n.isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogNavigationItemView,{node:n},index);})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/navigation/CatalogNavigationItemView.tsx\nconst CatalogNavigationItemView=props=>{const{node=null}=props;const{activateNode=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{style:{marginLeft:`${(node.depth-2)*10}px`},gap:1,column:false,itemActive:node.isActive,onClick:event=>activateNode(node),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogIconView,{icon:node.iconId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,truncate:true,children:node.localization}),node.isBranch&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:node.isOpen?'caret-up':'caret-down'})]}),node.isOpen&&node.isBranch&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogNavigationSetView,{node:node})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/navigation/CatalogNavigationView.tsx\nconst CatalogNavigationView=props=>{const{node=null}=props;const{searchResult=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogSearchView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullHeight:true,className:\"nitro-catalog-navigation-grid-container grid-bg w-100 p-1\",overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{gap:1,columnCount:1,children:[searchResult&&searchResult.filteredNodes.length>0&&searchResult.filteredNodes.map((n,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogNavigationItemView,{node:n},index);}),!searchResult&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogNavigationSetView,{node:node})]})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/common/CatalogHeaderView.tsx\nconst CatalogHeaderView=props=>{const{node=null}=props;const{currentPage=null,activateNode=null,rootNode=null,getNodeById=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"catalog-header\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,className:\"catalog-header-content\",children:[currentPage&&rootNode&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogIconView,{icon:getNodeById(currentPage.pageId,rootNode).iconId}),currentPage&&rootNode&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,className:\"catalog-header-title h-100\",children:getNodeById(currentPage.pageId,rootNode).localization}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"catalog-header-desc\",dangerouslySetInnerHTML:{__html:currentPage&&currentPage.localization.getText(0)}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"catalog-header-image\",style:{backgroundImage:`url(${currentPage&&currentPage.localization.getImage(0)})`}})]})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogBadgeSelectorWidgetView.tsx\nconst EXCLUDED_BADGE_CODES=[];const CatalogBadgeSelectorWidgetView=props=>{const{columnCount=5,...rest}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[currentBadgeCode,setCurrentBadgeCode]=Object(react[\"useState\"])(null);const{currentOffer=null,setPurchaseOptions=null}=useCatalog();const{badgeCodes=[],activate=null,deactivate=null}=useInventoryBadges();const previewStuffData=Object(react[\"useMemo\"])(()=>{if(!currentBadgeCode)return null;const stuffData=new nitro_renderer[\"Qh\" /* StringDataType */]();stuffData.setValue(['0',currentBadgeCode,'','']);return stuffData;},[currentBadgeCode]);Object(react[\"useEffect\"])(()=>{if(!currentOffer)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraParamRequired=true;newValue.extraData=previewStuffData&&previewStuffData.getValue(1)||null;newValue.previewStuffData=previewStuffData;return newValue;});},[currentOffer,previewStuffData,setPurchaseOptions]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:columnCount,...rest,children:badgeCodes&&badgeCodes.length>0&&badgeCodes.map((badgeCode,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:currentBadgeCode===badgeCode,onClick:event=>setCurrentBadgeCode(badgeCode),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badgeCode})},index);})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogFirstProductSelectorWidgetView.tsx\nconst CatalogFirstProductSelectorWidgetView=props=>{const{currentPage=null,setCurrentOffer=null}=useCatalog();Object(react[\"useEffect\"])(()=>{if(!currentPage||!currentPage.offers.length)return;setCurrentOffer(currentPage.offers[0]);},[currentPage,setCurrentOffer]);return null;};\n// CONCATENATED MODULE: ./src/common/layout/LayoutCatalogGridItem.tsx\nconst LayoutCatalogGridItem=props=>{const{itemImage=undefined,itemColor=undefined,itemActive=false,itemCount=1,itemCountMinimum=1,itemUniqueSoldout=false,itemUniqueNumber=-2,itemUnseen=false,itemHighlight=false,disabled=false,center=true,column=true,style={},classNames=[],position='relative',overflow='hidden',children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['layout-catalog-grid-item','justify-content-end'];if(itemActive)newClassNames.push('active');if(itemUniqueSoldout||itemUniqueNumber>0)newClassNames.push('unique-item');if(itemUniqueSoldout)newClassNames.push('sold-out');if(itemUnseen)newClassNames.push('unseen');if(itemHighlight)newClassNames.push('has-highlight');if(disabled)newClassNames.push('disabled');if(itemImage===null)newClassNames.push('icon','loading-icon');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[itemActive,itemUniqueSoldout,itemUniqueNumber,itemUnseen,itemHighlight,disabled,itemImage,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={...style};if(itemImage)newStyle.backgroundImage=`url(${itemImage})`;if(itemColor)newStyle.backgroundColor=itemColor;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,itemImage,itemColor]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{pointer:true,position:position,overflow:overflow,column:column,classNames:getClassNames,style:getStyle,...rest,children:[itemCount>itemCountMinimum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:itemCount}),itemUniqueNumber>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,className:\"unique-bg-override\",style:{backgroundImage:`url(${itemImage})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute unique-item-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:itemUniqueNumber})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogPriceGridDisplayWidgetViev.tsx\nconst CatalogPriceGridDisplayWidgetView=props=>{const{offer=null,separator=false}=props;const{purchaseOptions=null}=useCatalog();const{quantity=1}=purchaseOptions;if(!offer)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[offer.priceInCredits>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"end\",justifyContent:\"end\",gap:1,className:\"grid-price-view\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:offer.priceInCredits*quantity}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-small-coin\"})]}),separator&&offer.priceInCredits>0&&offer.priceInActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{size:\"xs\",color:\"black\",icon:\"plus\"}),offer.priceInActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"end\",justifyContent:\"end\",gap:1,className:\"grid-price-view\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:offer.priceInActivityPoints*quantity}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'icon icon-small-'+offer.activityPointType})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/common/CatalogGridOfferView.tsx\nconst CatalogGridOfferView=props=>{const{offer=null,selectOffer=null,itemActive=false,...rest}=props;const[isMouseDown,setMouseDown]=Object(react[\"useState\"])(false);const{requestOfferToMover=null}=useCatalog();const{isVisible=false}=useInventoryFurni();const iconUrl=Object(react[\"useMemo\"])(()=>{if(offer.pricingModel===Offer_Offer.PRICING_MODEL_BUNDLE){return null;}return offer.product.getIconUrl(offer);},[offer]);const onMouseEvent=event=>{switch(event.type){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN:selectOffer(offer);setMouseDown(true);return;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP:setMouseDown(false);return;case nitro_renderer[\"Ce\" /* MouseEventType */].ROLL_OUT:if(!isMouseDown||!itemActive||!isVisible)return;requestOfferToMover(offer);return;}};const product=offer.product;if(!product)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"catalog-grid-active cursor-pointer\",gap:0,itemActive:itemActive,onMouseDown:onMouseEvent,onMouseUp:onMouseEvent,onMouseOut:onMouseEvent,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCatalogGridItem,{itemImage:iconUrl,itemCount:offer.pricingModel===Offer_Offer.PRICING_MODEL_MULTI?product.productCount:1,itemUniqueSoldout:product.uniqueLimitedItemSeriesSize&&!product.uniqueLimitedItemsLeft,itemUniqueNumber:product.uniqueLimitedItemSeriesSize,...rest,children:offer.product.productType===ProductTypeEnum.ROBOT&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:offer.product.extraParam,headOnly:true,direction:3})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"end\",justifyContent:\"end\",fullWidth:true,gap:0,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:0,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPriceGridDisplayWidgetView,{offer:offer})})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogItemGridWidgetView.tsx\nconst CatalogItemGridWidgetView=props=>{const{columnCount=5,children=null,...rest}=props;const{currentOffer=null,setCurrentOffer=null,currentPage=null,setPurchaseOptions=null}=useCatalog();if(!currentPage)return null;const selectOffer=offer=>{offer.activate();if(offer.isLazy)return;setCurrentOffer(offer);if(offer.product&&offer.product.productType===ProductTypeEnum.WALL){setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraData=offer.product.extraParam||null;return newValue;});}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{columnCount:columnCount,...rest,children:[currentPage.offers&&currentPage.offers.length>0&&currentPage.offers.map((offer,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGridOfferView,{itemActive:currentOffer&&currentOffer.offerId===offer.offerId,offer:offer,selectOffer:selectOffer},index)),children]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogLimitedItemWidgetView.tsx\nconst CatalogLimitedItemWidgetView=props=>{const{children=null,...rest}=props;const{currentOffer=null}=useCatalog();if(!currentOffer||currentOffer.pricingModel!==Offer_Offer.PRICING_MODEL_SINGLE||!currentOffer.product.isUniqueLimitedItem)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionCompletePlateView,{className:\"mx-auto\",uniqueLimitedItemsLeft:currentOffer.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:currentOffer.product.uniqueLimitedItemSeriesSize}),children]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogPurchaseWidgetView.tsx\nconst CatalogPurchaseWidgetView=props=>{const{noGiftOption=false,purchaseCallback=null}=props;const[purchaseWillBeGift,setPurchaseWillBeGift]=Object(react[\"useState\"])(false);const[purchaseState,setPurchaseState]=Object(react[\"useState\"])(CatalogPurchaseState.NONE);const[catalogSkipPurchaseConfirmation,setCatalogSkipPurchaseConfirmation]=useLocalStorage(LocalStorageKeys.CATALOG_SKIP_PURCHASE_CONFIRMATION,false);const{currentOffer=null,currentPage=null,purchaseOptions=null,setPurchaseOptions=null}=useCatalog();const{getCurrencyAmount=null}=usePurse();const onCatalogEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS:setPurchaseState(CatalogPurchaseState.NONE);return;case CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED:setPurchaseState(CatalogPurchaseState.FAILED);return;case CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent.NOT_ALLOWED:setPurchaseState(CatalogPurchaseState.FAILED);return;case CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent.SOLD_OUT:setPurchaseState(CatalogPurchaseState.SOLD_OUT);return;}},[]);UseUiEvent(CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS,onCatalogEvent);UseUiEvent(CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED,onCatalogEvent);UseUiEvent(CatalogPurchaseNotAllowedEvent_CatalogPurchaseNotAllowedEvent.NOT_ALLOWED,onCatalogEvent);UseUiEvent(CatalogPurchaseSoldOutEvent_CatalogPurchaseSoldOutEvent.SOLD_OUT,onCatalogEvent);const isLimitedSoldOut=Object(react[\"useMemo\"])(()=>{if(!currentOffer)return false;if(purchaseOptions.extraParamRequired&&(!purchaseOptions.extraData||!purchaseOptions.extraData.length))return false;if(currentOffer.pricingModel===Offer_Offer.PRICING_MODEL_SINGLE){const product=currentOffer.product;if(product&&product.isUniqueLimitedItem)return!product.uniqueLimitedItemsLeft;}return false;},[currentOffer,purchaseOptions]);const purchase=function(){let isGift=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!currentOffer)return;if(GetClubMemberLevel()<currentOffer.clubLevel){CreateLinkEvent('habboUI/open/hccenter');return;}if(isGift){DispatchUiEvent(new CatalogInitGiftEvent_CatalogInitGiftEvent(currentOffer.page.pageId,currentOffer.offerId,purchaseOptions.extraData));return;}setPurchaseState(CatalogPurchaseState.PURCHASE);if(purchaseCallback){purchaseCallback();return;}let pageId=currentOffer.page.pageId;// if(pageId === -1)\n// {\n//     const nodes = getNodesByOfferId(currentOffer.offerId);\n//     if(nodes) pageId = nodes[0].pageId;\n// }\nSendMessageComposer(new nitro_renderer[\"Df\" /* PurchaseFromCatalogComposer */](pageId,currentOffer.offerId,purchaseOptions.extraData,purchaseOptions.quantity));};Object(react[\"useEffect\"])(()=>{if(!currentOffer)return;return()=>{setPurchaseState(CatalogPurchaseState.NONE);setPurchaseOptions({quantity:1,extraData:null,extraParamRequired:false,previewStuffData:null});};},[currentOffer,setPurchaseOptions]);Object(react[\"useEffect\"])(()=>{let timeout=null;if(purchaseState===CatalogPurchaseState.CONFIRM||purchaseState===CatalogPurchaseState.FAILED){timeout=setTimeout(()=>setPurchaseState(CatalogPurchaseState.NONE),3000);}return()=>{if(timeout)clearTimeout(timeout);};},[purchaseState]);if(!currentOffer)return null;const PurchaseButton=()=>{const priceCredits=currentOffer.priceInCredits*purchaseOptions.quantity;const pricePoints=currentOffer.priceInActivityPoints*purchaseOptions.quantity;if(GetClubMemberLevel()<currentOffer.clubLevel)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('catalog.alert.hc.required')});if(isLimitedSoldOut)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('catalog.alert.limited_edition_sold_out.title')});if(priceCredits>getCurrencyAmount(-1))return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('catalog.alert.notenough.title')});if(pricePoints>getCurrencyAmount(currentOffer.activityPointType))return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('catalog.alert.notenough.activitypoints.title.'+currentOffer.activityPointType)});switch(purchaseState){case CatalogPurchaseState.CONFIRM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"warning\",onClick:event=>purchase(),children:LocalizeText('catalog.marketplace.confirm_title')});case CatalogPurchaseState.PURCHASE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLoadingSpinnerView,{})});case CatalogPurchaseState.FAILED:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",children:LocalizeText('generic.failed')});case CatalogPurchaseState.SOLD_OUT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",children:LocalizeText('generic.failed')+' - '+LocalizeText('catalog.alert.limited_edition_sold_out.title')});case CatalogPurchaseState.NONE:default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",disabled:purchaseOptions.extraParamRequired&&(!purchaseOptions.extraData||!purchaseOptions.extraData.length),onClick:event=>setPurchaseState(CatalogPurchaseState.CONFIRM),children:LocalizeText('catalog.purchase_confirmation.'+(currentOffer.isRentOffer?'rent':'buy'))});}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!noGiftOption&&!currentOffer.isRentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:purchaseOptions.quantity>1||!currentOffer.giftable||isLimitedSoldOut||purchaseOptions.extraParamRequired&&(!purchaseOptions.extraData||!purchaseOptions.extraData.length),onClick:event=>purchase(true),children:LocalizeText('catalog.purchase_confirmation.gift')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PurchaseButton,{})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogPriceDisplayWidgetView.tsx\nconst CatalogPriceDisplayWidgetView=props=>{const{offer=null,separator=false}=props;const{purchaseOptions=null}=useCatalog();const{quantity=1}=purchaseOptions;if(!offer)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[offer.priceInCredits>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:offer.priceInCredits*quantity}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:-1})]}),offer.priceInCredits>0&&offer.priceInActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:\"+\"}),offer.priceInActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{bold:true,children:[\" \",offer.priceInActivityPoints*quantity]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:offer.activityPointType})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogTotalPriceWidget.tsx\nconst CatalogTotalPriceWidget=props=>{const{gap=1,...rest}=props;const{currentOffer=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:gap,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPriceDisplayWidgetView,{offer:currentOffer})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogViewProductWidgetView.tsx\nconst CatalogViewProductWidgetView=props=>{const{currentOffer=null,roomPreviewer=null,purchaseOptions=null}=useCatalog();const{previewStuffData=null}=purchaseOptions;Object(react[\"useEffect\"])(()=>{if(!currentOffer||currentOffer.pricingModel===Offer_Offer.PRICING_MODEL_BUNDLE||!roomPreviewer)return;const product=currentOffer.product;if(!product)return;switch(product.productType){case ProductTypeEnum.FLOOR:{if(!product.furnitureData)return;if(product.furnitureData.specialType===FurniCategory.FIGURE_PURCHASABLE_SET){const furniData=GetSessionDataManager().getFloorItemData(product.furnitureData.id);const customParts=furniData.customParams.split(',').map(value=>parseInt(value));const figureSets=[];for(const part of customParts){if(GetAvatarRenderManager().isValidFigureSetForGender(part,GetSessionDataManager().gender))figureSets.push(part);}const figureString=GetAvatarRenderManager().getFigureStringWithFigureIds(GetSessionDataManager().figure,GetSessionDataManager().gender,figureSets);roomPreviewer.addAvatarIntoRoom(figureString,product.productClassId);}else{roomPreviewer.addFurnitureIntoRoom(product.productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](90),previewStuffData,product.extraParam);}return;}case ProductTypeEnum.WALL:{if(!product.furnitureData)return;switch(product.furnitureData.specialType){case FurniCategory.FLOOR:roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(product.extraParam);return;case FurniCategory.WALL_PAPER:roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(null,product.extraParam);return;case FurniCategory.LANDSCAPE:{roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(null,null,product.extraParam);const furniData=GetSessionDataManager().getWallItemDataByName('ads_twi_windw');if(furniData)roomPreviewer.addWallItemIntoRoom(furniData.id,new nitro_renderer[\"Ui\" /* Vector3d */](90),furniData.customParams);return;}default:roomPreviewer.updateObjectRoom('default','default','default');roomPreviewer.addWallItemIntoRoom(product.productClassId,new nitro_renderer[\"Ui\" /* Vector3d */](90),product.extraParam);return;}}case ProductTypeEnum.ROBOT:roomPreviewer.addAvatarIntoRoom(product.extraParam,0);return;case ProductTypeEnum.EFFECT:roomPreviewer.addAvatarIntoRoom(GetSessionDataManager().figure,product.productClassId);return;}},[currentOffer,previewStuffData,roomPreviewer]);if(!currentOffer)return null;if(currentOffer.pricingModel===Offer_Offer.PRICING_MODEL_BUNDLE){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fit:true,overflow:\"hidden\",className:\"bg-muted p-2 rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{fullWidth:true,columnCount:4,className:\"nitro-catalog-layout-bundle-grid\",children:currentOffer.products.length>0&&currentOffer.products.map((product,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemImage:product.getIconUrl(currentOffer),itemCount:product.productCount},index);})})});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:235});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutBadgeDisplayView.tsx\nconst CatalogLayoutBadgeDisplayView=props=>{const{page=null}=props;const{currentOffer=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogFirstProductSelectorWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogItemGridWidgetView,{shrink:true}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,shrink:true,fontWeight:\"bold\",children:LocalizeText('catalog_selectbadge')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogBadgeSelectorWidgetView,{})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:!currentOffer,size:5,overflow:\"hidden\",children:[!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})]}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogViewProductWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLimitedItemWidgetView,{fullWidth:true,position:\"absolute\",className:\"top-1\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,truncate:true,children:currentOffer.localizationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{alignItems:\"end\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})]})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogAddOnBadgeWidgetView.tsx\nconst CatalogAddOnBadgeWidgetView=props=>{const{...rest}=props;const{currentOffer=null}=useCatalog();if(!currentOffer||!currentOffer.badgeCode||!currentOffer.badgeCode.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:currentOffer.badgeCode,...rest});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogSpinnerWidgetView.tsx\nconst MIN_VALUE=1;const MAX_VALUE=100;const CatalogSpinnerWidgetView=props=>{const{currentOffer=null,purchaseOptions=null,setPurchaseOptions=null}=useCatalog();const{quantity=1}=purchaseOptions;const updateQuantity=value=>{if(isNaN(value))value=1;value=Math.max(value,MIN_VALUE);value=Math.min(value,MAX_VALUE);if(value===quantity)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.quantity=value;return newValue;});};if(!currentOffer||!currentOffer.bundlePurchaseAllowed)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.bundlewidget.spinner.select.amount')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm quantity-input\",value:quantity,onChange:event=>updateQuantity(event.target.valueAsNumber)})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutDefaultView.tsx\nconst CatalogLayoutDefaultView=props=>{const{page=null}=props;const{currentOffer=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"position-relative catalog-default-image\",center:!currentOffer,size:5,overflow:\"hidden\",children:[!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"catalog-image-column\",alt:\"\",src:page.localization.getImage(1)})}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogViewProductWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLimitedItemWidgetView,{fullWidth:true,position:\"absolute\",className:\"top-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogAddOnBadgeWidgetView,{position:\"absolute\",className:\"bg-muted rounded top-1 end-1\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,variant:\"white\",className:\"item-title\",grow:true,truncate:true,children:currentOffer.localizationName})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogItemGridWidgetView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:1,className:\"quanity-container mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogSpinnerWidgetView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogGuildBadgeWidgetView.tsx\nconst CatalogGuildBadgeWidgetView=props=>{const{...rest}=props;const{currentOffer=null,purchaseOptions=null}=useCatalog();const{previewStuffData=null}=purchaseOptions;const badgeCode=Object(react[\"useMemo\"])(()=>{if(!currentOffer||!previewStuffData)return null;const badgeCode=previewStuffData.getValue(2);if(!badgeCode||!badgeCode.length)return null;return badgeCode;},[currentOffer,previewStuffData]);if(!badgeCode)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badgeCode,isGroup:true,...rest});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogGuildSelectorWidgetView.tsx\nconst CatalogGuildSelectorWidgetView=props=>{const[selectedGroupIndex,setSelectedGroupIndex]=Object(react[\"useState\"])(0);const{currentOffer=null,catalogOptions=null,setPurchaseOptions=null}=useCatalog();const{groups=null}=catalogOptions;const previewStuffData=Object(react[\"useMemo\"])(()=>{if(!groups||!groups.length)return null;const group=groups[selectedGroupIndex];if(!group)return null;const stuffData=new nitro_renderer[\"Qh\" /* StringDataType */]();stuffData.setValue(['0',group.groupId.toString(),group.badgeCode,group.colorA,group.colorB]);return stuffData;},[selectedGroupIndex,groups]);Object(react[\"useEffect\"])(()=>{if(!currentOffer)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraParamRequired=true;newValue.extraData=previewStuffData&&previewStuffData.getValue(1)||null;newValue.previewStuffData=previewStuffData;return newValue;});},[currentOffer,previewStuffData,setPurchaseOptions]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"U\" /* CatalogGroupsComposer */]());},[]);if(!groups||!groups.length){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"bg-muted rounded p-1 text-black text-center\",children:[LocalizeText('catalog.guild_selector.members_only'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"mt-1\",children:LocalizeText('catalog.guild_selector.find_groups')})]});}const selectedGroup=groups[selectedGroupIndex];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[!!selectedGroup&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorA}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullHeight:true,style:{width:'20px',backgroundColor:'#'+selectedGroup.colorB}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:selectedGroupIndex,onChange:event=>setSelectedGroupIndex(parseInt(event.target.value)),children:groups.map((group,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:index,children:group.groupName},index))})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutGuildCustomFurniView.tsx\nconst CatalogLayouGuildCustomFurniView=props=>{const{page=null}=props;const{currentOffer=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"position-relative\",center:!currentOffer,size:5,overflow:\"hidden\",children:[!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"py-5\",center:true,dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})]}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogViewProductWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGuildBadgeWidgetView,{position:\"absolute\",className:\"top-1 end-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,variant:\"white\",className:\"item-title\",grow:true,truncate:true,children:currentOffer.localizationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"between\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{grow:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGuildSelectorWidgetView,{})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"grid-bg group-furni-picker p-2\",size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogItemGridWidgetView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutGuildForumView.tsx\nconst CatalogLayouGuildForumView=props=>{const{page=null}=props;const[selectedGroupIndex,setSelectedGroupIndex]=Object(react[\"useState\"])(0);const{currentOffer=null,setCurrentOffer=null,catalogOptions=null}=useCatalog();const{groups=null}=catalogOptions;Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"U\" /* CatalogGroupsComposer */]());},[page]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogFirstProductSelectorWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"p-1\",overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"group-forum-page\",dangerouslySetInnerHTML:{__html:page.localization.getText(1)}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",gap:1,children:!!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,children:currentOffer.localizationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{grow:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGuildSelectorWidgetView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{alignItems:\"end\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{noGiftOption:true})]})})})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutGuildFrontpageView.tsx\nconst CatalogLayouGuildFrontpageView=props=>{const{page=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:4,overflow:\"hidden\",className:\"p-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,dangerouslySetInnerHTML:{__html:page.localization.getText(2)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{overflow:\"auto\",dangerouslySetInnerHTML:{__html:page.localization.getText(0)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{dangerouslySetInnerHTML:{__html:page.localization.getText(1)}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,size:5,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:()=>CreateLinkEvent('groups/create'),children:LocalizeText('catalog.start.guild.purchase.button')})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutInfoLoyaltyView.tsx\nconst CatalogLayoutInfoLoyaltyView=props=>{const{page=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"overflow-auto h-100 d-flex flex-column info-loyalty-content\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutPets3View.tsx\nconst CatalogLayoutPets3View=props=>{const{page=null}=props;const imageUrl=page.localization.getImage(1);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,className:\"bg-muted rounded text-black p-2\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[imageUrl&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:imageUrl}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"fs-5\",dangerouslySetInnerHTML:{__html:page.localization.getText(1)}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,alignItems:\"center\",overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{dangerouslySetInnerHTML:{__html:page.localization.getText(2)}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"fw-bold\",dangerouslySetInnerHTML:{__html:page.localization.getText(3)}})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutPets2View.tsx\nconst CatalogLayoutPets2View=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutPets3View,{...props});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogBundleGridWidgetView.tsx\nconst CatalogBundleGridWidgetView=props=>{const{columnCount=5,children=null,...rest}=props;const{currentOffer=null}=useCatalog();if(!currentOffer)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{columnCount:5,...rest,children:[currentOffer.products&&currentOffer.products.length>0&&currentOffer.products.map((product,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemImage:product.getIconUrl(),itemCount:product.productCount},index)),children]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogSimplePriceWidgetView.tsx\nconst CatalogSimplePriceWidgetView=props=>{const{gap=1,...rest}=props;const{currentOffer=null}=useCatalog();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:gap,alignItems:\"center\",classNames:['bg-muted','p-1','rounded'],...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPriceDisplayWidgetView,{separator:true,offer:currentOffer})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutRoomBundleView.tsx\nconst CatalogLayoutRoomBundleView=props=>{const{page=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogFirstProductSelectorWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,overflow:\"hidden\",children:[!!page.localization.getText(2)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{dangerouslySetInnerHTML:{__html:page.localization.getText(2)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,overflow:\"hidden\",className:\"bg-muted p-2 rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogBundleGridWidgetView,{fullWidth:true,className:\"nitro-catalog-layout-bundle-grid\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"hidden\",gap:1,children:[!!page.localization.getText(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,small:true,overflow:\"auto\",children:page.localization.getText(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,position:\"relative\",overflow:\"hidden\",gap:0,children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",className:\"flex-grow-1\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogAddOnBadgeWidgetView,{position:\"absolute\",className:\"bg-muted rounded bottom-0 start-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogSimplePriceWidgetView,{position:\"absolute\",className:\"bottom-0 end-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutSingleBundleView.tsx\nconst CatalogLayoutSingleBundleView=props=>{const{page=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogFirstProductSelectorWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:!!page.localization.getText(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,small:true,overflow:\"auto\",children:page.localization.getText(1)})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"hidden\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,position:\"relative\",overflow:\"hidden\",gap:0,children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",className:\"flex-grow-1\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogAddOnBadgeWidgetView,{position:\"absolute\",className:\"bg-muted rounded bottom-0 start-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogSimplePriceWidgetView,{position:\"absolute\",className:\"bottom-0 end-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,overflow:\"hidden\",children:[!!page.localization.getText(2)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{dangerouslySetInnerHTML:{__html:page.localization.getText(2)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,overflow:\"hidden\",className:\"grid-bg p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogBundleGridWidgetView,{fullWidth:true,className:\"nitro-catalog-layout-bundle-grid\"})})]})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/widgets/CatalogSpacesWidgetView.tsx\nconst SPACES_GROUP_NAMES=['floors','walls','views'];const CatalogSpacesWidgetView=props=>{const{columnCount=5,children=null,...rest}=props;const[groupedOffers,setGroupedOffers]=Object(react[\"useState\"])(null);const[selectedGroupIndex,setSelectedGroupIndex]=Object(react[\"useState\"])(-1);const[selectedOfferForGroup,setSelectedOfferForGroup]=Object(react[\"useState\"])(null);const{currentPage=null,currentOffer=null,setCurrentOffer=null,setPurchaseOptions=null}=useCatalog();const setSelectedOffer=offer=>{if(!offer)return;setSelectedOfferForGroup(prevValue=>{const newValue=[...prevValue];newValue[selectedGroupIndex]=offer;return newValue;});};Object(react[\"useEffect\"])(()=>{if(!currentPage)return;const groupedOffers=[[],[],[]];for(const offer of currentPage.offers){if(offer.pricingModel!==Offer_Offer.PRICING_MODEL_SINGLE&&offer.pricingModel!==Offer_Offer.PRICING_MODEL_MULTI)continue;const product=offer.product;if(!product||product.productType!==ProductTypeEnum.WALL&&product.productType!==ProductTypeEnum.FLOOR||!product.furnitureData)continue;const className=product.furnitureData.className;switch(className){case'floor':groupedOffers[0].push(offer);break;case'wallpaper':groupedOffers[1].push(offer);break;case'landscape':groupedOffers[2].push(offer);break;}}setGroupedOffers(groupedOffers);setSelectedGroupIndex(0);setSelectedOfferForGroup([groupedOffers[0][0],groupedOffers[1][0],groupedOffers[2][0]]);},[currentPage]);Object(react[\"useEffect\"])(()=>{if(selectedGroupIndex===-1||!selectedOfferForGroup)return;setCurrentOffer(selectedOfferForGroup[selectedGroupIndex]);},[selectedGroupIndex,selectedOfferForGroup,setCurrentOffer]);Object(react[\"useEffect\"])(()=>{if(selectedGroupIndex===-1||!selectedOfferForGroup||!currentOffer)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraData=selectedOfferForGroup[selectedGroupIndex].product.extraParam;newValue.extraParamRequired=true;return newValue;});},[currentOffer,selectedGroupIndex,selectedOfferForGroup,setPurchaseOptions]);if(!groupedOffers||selectedGroupIndex===-1)return null;const offers=groupedOffers[selectedGroupIndex];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ButtonGroup,{className:\"purchase-buttons\",children:SPACES_GROUP_NAMES.map((name,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{active:selectedGroupIndex===index,onClick:event=>setSelectedGroupIndex(index),children:LocalizeText(`catalog.spaces.tab.${name}`)},index))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{columnCount:columnCount,...rest,children:[offers&&offers.length>0&&offers.map((offer,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGridOfferView,{itemActive:currentOffer&&currentOffer===offer,offer:offer,selectOffer:offer=>setSelectedOffer(offer)},index)),children]})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutSpacesView.tsx\nconst CatalogLayoutSpacesView=props=>{const{page=null}=props;const{currentOffer=null,roomPreviewer=null}=useCatalog();Object(react[\"useEffect\"])(()=>{roomPreviewer.updatePreviewObjectBoundingRectangle(new nitro_renderer[\"Xe\" /* NitroPoint */]());},[roomPreviewer]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:!currentOffer,size:5,overflow:\"hidden\",children:[!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})]}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogViewProductWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,variant:\"white\",className:\"item-title\",grow:true,truncate:true,children:currentOffer.localizationName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogSpacesWidgetView,{})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutTrophiesView.tsx\nconst CatalogLayoutTrophiesView=props=>{const{page=null}=props;const[trophyText,setTrophyText]=Object(react[\"useState\"])('');const{currentOffer=null,setPurchaseOptions=null}=useCatalog();Object(react[\"useEffect\"])(()=>{if(!currentOffer)return;setPurchaseOptions(prevValue=>{const newValue={...prevValue};newValue.extraData=trophyText;return newValue;});},[currentOffer,trophyText,setPurchaseOptions]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"pt-2\",center:!currentOffer,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,center:true,dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"grid-bg item-picker p-2\",size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogItemGridWidgetView,{})}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,center:true,truncate:true,children:currentOffer.localizationName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{alignItems:\"end\",className:\"credits-bg py-1 px-2\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"flex-grow-1 form-control w-100 trophy-text\",defaultValue:trophyText||'',onChange:event=>setTrophyText(event.target.value)})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/CatalogLayoutVipBuyView.tsx\nconst CatalogLayoutVipBuyView=props=>{const[pendingOffer,setPendingOffer]=Object(react[\"useState\"])(null);const[purchaseState,setPurchaseState]=Object(react[\"useState\"])(CatalogPurchaseState.NONE);const{currentPage=null,catalogOptions=null}=useCatalog();const{purse=null,getCurrencyAmount=null}=usePurse();const{clubOffers=null}=catalogOptions;const onCatalogEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS:setPurchaseState(CatalogPurchaseState.NONE);return;case CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED:setPurchaseState(CatalogPurchaseState.FAILED);return;}},[]);UseUiEvent(CatalogPurchasedEvent_CatalogPurchasedEvent.PURCHASE_SUCCESS,onCatalogEvent);UseUiEvent(CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent.PURCHASE_FAILED,onCatalogEvent);const getOfferText=Object(react[\"useCallback\"])(offer=>{let offerText='';if(offer.months>0){offerText=LocalizeText('catalog.vip.item.header.months',['num_months'],[offer.months.toString()]);}if(offer.extraDays>0){if(offerText!=='')offerText+=' ';offerText+=' '+LocalizeText('catalog.vip.item.header.days',['num_days'],[offer.extraDays.toString()]);}return offerText;},[]);const getPurchaseHeader=Object(react[\"useCallback\"])(()=>{if(!purse)return'';const extensionOrSubscription=purse.clubDays>0||purse.clubPeriods>0?'extension.':'subscription.';const daysOrMonths=pendingOffer.months===0?'days':'months';const daysOrMonthsText=pendingOffer.months===0?pendingOffer.extraDays:pendingOffer.months;const locale=LocalizeText('catalog.vip.buy.confirm.'+extensionOrSubscription+daysOrMonths);return locale.replace('%NUM_'+daysOrMonths.toUpperCase()+'%',daysOrMonthsText.toString());},[pendingOffer,purse]);const getPurchaseValidUntil=Object(react[\"useCallback\"])(()=>{let locale=LocalizeText('catalog.vip.buy.confirm.end_date');locale=locale.replace('%month%',pendingOffer.month.toString());locale=locale.replace('%day%',pendingOffer.day.toString());locale=locale.replace('%year%',pendingOffer.year.toString());return locale;},[pendingOffer]);const getSubscriptionDetails=Object(react[\"useMemo\"])(()=>{const clubDays=purse.clubDays;const clubPeriods=purse.clubPeriods;const totalDays=clubPeriods*31+clubDays;return LocalizeText('catalog.vip.extend.info',['days'],[totalDays.toString()]);},[purse]);const purchaseSubscription=Object(react[\"useCallback\"])(()=>{if(!pendingOffer)return;setPurchaseState(CatalogPurchaseState.PURCHASE);SendMessageComposer(new nitro_renderer[\"Df\" /* PurchaseFromCatalogComposer */](currentPage.pageId,pendingOffer.offerId,null,1));},[pendingOffer,currentPage]);const setOffer=Object(react[\"useCallback\"])(offer=>{setPurchaseState(CatalogPurchaseState.NONE);setPendingOffer(offer);},[]);const getPurchaseButton=Object(react[\"useCallback\"])(()=>{if(!pendingOffer)return null;if(pendingOffer.priceCredits>getCurrencyAmount(-1)){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",children:LocalizeText('catalog.alert.notenough.title')});}if(pendingOffer.priceActivityPoints>getCurrencyAmount(pendingOffer.priceActivityPointsType)){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",children:LocalizeText('catalog.alert.notenough.activitypoints.title.'+pendingOffer.priceActivityPointsType)});}switch(purchaseState){case CatalogPurchaseState.CONFIRM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"warning\",onClick:purchaseSubscription,children:LocalizeText('catalog.marketplace.confirm_title')});case CatalogPurchaseState.PURCHASE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",disabled:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLoadingSpinnerView,{})});case CatalogPurchaseState.FAILED:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('generic.failed')});case CatalogPurchaseState.NONE:default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:()=>setPurchaseState(CatalogPurchaseState.CONFIRM),children:LocalizeText('buy')});}},[pendingOffer,purchaseState,purchaseSubscription,getCurrencyAmount]);Object(react[\"useEffect\"])(()=>{if(!clubOffers)SendMessageComposer(new nitro_renderer[\"jc\" /* GetClubOffersMessageComposer */](1));},[clubOffers]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullHeight:true,center:true,overflow:\"hidden\",children:[currentPage.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:currentPage.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"px-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('catalog.vip.extend.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,overflow:\"auto\",dangerouslySetInnerHTML:{__html:getSubscriptionDetails}})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,size:7,overflow:\"hidden\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:1,className:\"nitro-catalog-layout-vip-buy-grid\",children:clubOffers&&clubOffers.length>0&&clubOffers.map((offer,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{column:false,center:false,alignItems:\"center\",justifyContent:\"between\",itemActive:pendingOffer===offer,className:\"p-1\",onClick:()=>setOffer(offer),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon-hc-banner\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"end\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textEnd:true,children:getOfferText(offer)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"end\",gap:1,children:[offer.priceCredits>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:offer.priceCredits}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:-1})]}),offer.priceActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:offer.priceActivityPoints}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:offer.priceActivityPointsType})]})]})]})]},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:5,overflow:\"hidden\",children:pendingOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,grow:true,justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"end\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:getPurchaseHeader()}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[pendingOffer.priceCredits>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:pendingOffer.priceCredits}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:-1})]}),pendingOffer.priceActivityPoints>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:pendingOffer.priceActivityPoints}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:pendingOffer.priceActivityPointsType})]})]})]}),getPurchaseButton()]})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,center:true,className:\"pb-2\",dangerouslySetInnerHTML:{__html:LocalizeText('catalog.vip.buy.hccenter')}})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/common/CatalogRedeemVoucherView.tsx\nconst CatalogRedeemVoucherView=props=>{const{text=null}=props;const[voucher,setVoucher]=Object(react[\"useState\"])('');const[isWaiting,setIsWaiting]=Object(react[\"useState\"])(false);const redeemVoucher=()=>{if(!voucher||!voucher.length||isWaiting)return;SendMessageComposer(new nitro_renderer[\"Kf\" /* RedeemVoucherMessageComposer */](voucher));setIsWaiting(true);};const onVoucherRedeemOkMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();let message=LocalizeText('catalog.alert.voucherredeem.ok.description');if(parser.productName)message=LocalizeText('catalog.alert.voucherredeem.ok.description.furni',['productName','productDescription'],[parser.productName,parser.productDescription]);NotificationUtilities_NotificationUtilities.simpleAlert(message,null,null,null,LocalizeText('catalog.alert.voucherredeem.ok.title'));setIsWaiting(false);setVoucher('');},[]);UseMessageEventHook(nitro_renderer[\"Wi\" /* VoucherRedeemOkMessageEvent */],onVoucherRedeemOkMessageEvent);const onVoucherRedeemErrorMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText(`catalog.alert.voucherredeem.error.description.${parser.errorCode}`),null,null,null,LocalizeText('catalog.alert.voucherredeem.error.title'));setIsWaiting(false);},[]);UseMessageEventHook(nitro_renderer[\"Vi\" /* VoucherRedeemErrorMessageEvent */],onVoucherRedeemErrorMessageEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"voucher-box p-2\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"px-1\",children:text}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"voucher-form\",gap:5,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:voucher,onChange:event=>setVoucher(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:redeemVoucher,disabled:isWaiting,children:LocalizeText('redeem')})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/frontpage4/CatalogLayoutFrontPageItemView.tsx\nconst CatalogLayoutFrontPageItemView=props=>{const{item=null,position='relative',pointer=true,overflow='hidden',fullHeight=true,classNames=[],children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-front-page-item'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);if(!item)return null;const imageUrl=GetConfiguration('image.library.url')+item.itemPromoImage;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutBackgroundImage,{imageUrl:imageUrl,classNames:getClassNames,position:position,fullHeight:fullHeight,pointer:pointer,overflow:overflow,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{position:\"absolute\",variant:\"white\",className:\"nitro-front-page-item-text p-2 m-2 bottom-0\",children:item.itemName}),children]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/frontpage4/CatalogLayoutFrontpage4View.tsx\nconst CatalogLayoutFrontpage4View=props=>{const{page=null,hideNavigation=null}=props;const{frontPageItems=[]}=useCatalog();const selectItem=Object(react[\"useCallback\"])(item=>{switch(item.type){case nitro_renderer[\"Lb\" /* FrontPageItem */].ITEM_CATALOGUE_PAGE:CreateLinkEvent(`catalog/open/${item.catalogPageLocation}`);return;case nitro_renderer[\"Lb\" /* FrontPageItem */].ITEM_PRODUCT_OFFER:CreateLinkEvent(`catalog/open/${item.productOfferId}`);return;}},[]);Object(react[\"useEffect\"])(()=>{hideNavigation();},[page,hideNavigation]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:4,children:frontPageItems[0]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutFrontPageItemView,{item:frontPageItems[0],onClick:event=>selectItem(frontPageItems[0])})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:8,children:[frontPageItems[1]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutFrontPageItemView,{item:frontPageItems[1],onClick:event=>selectItem(frontPageItems[1])}),frontPageItems[2]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutFrontPageItemView,{item:frontPageItems[2],onClick:event=>selectItem(frontPageItems[2])}),frontPageItems[3]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutFrontPageItemView,{item:frontPageItems[3],onClick:event=>selectItem(frontPageItems[3])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogRedeemVoucherView,{text:page.localization.getText(1)})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/common/MarketplaceOfferData.ts\nclass MarketplaceOfferData{constructor(offerId,furniId,furniType,extraData,stuffData,price,status,averagePrice){let offerCount=arguments.length>8&&arguments[8]!==undefined?arguments[8]:-1;this._offerId=void 0;this._furniId=void 0;this._furniType=void 0;this._extraData=void 0;this._stuffData=void 0;this._price=void 0;this._averagePrice=void 0;this._imageCallback=void 0;this._status=void 0;this._timeLeftMinutes=-1;this._offerCount=void 0;this._image=void 0;this._offerId=offerId;this._furniId=furniId;this._furniType=furniType;this._extraData=extraData;this._stuffData=stuffData;this._price=price;this._status=status;this._averagePrice=averagePrice;this._offerCount=offerCount;}get offerId(){return this._offerId;}set offerId(offerId){this._offerId=offerId;}get furniId(){return this._furniId;}get furniType(){return this._furniType;}get extraData(){return this._extraData;}get stuffData(){return this._stuffData;}get price(){return this._price;}set price(price){this._price=price;}get averagePrice(){return this._averagePrice;}get image(){return this._image;}set image(image){this._image=image;}get imageCallback(){return this._imageCallback;}set imageCallback(callback){this._imageCallback=callback;}get status(){return this._status;}get timeLeftMinutes(){return this._timeLeftMinutes;}set timeLeftMinutes(minutes){this._timeLeftMinutes=minutes;}get offerCount(){return this._offerCount;}set offerCount(count){this._offerCount=count;}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0;}}MarketplaceOfferData.TYPE_FLOOR=1;MarketplaceOfferData.TYPE_WALL=2;\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/common/MarketplaceOfferState.ts\nclass MarketPlaceOfferState{}MarketPlaceOfferState.ONGOING=1;MarketPlaceOfferState.ONGOING_OWN=1;MarketPlaceOfferState.SOLD=2;MarketPlaceOfferState.EXPIRED=3;\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/CatalogLayoutMarketplaceItemView.tsx\nconst OWN_OFFER=1;const PUBLIC_OFFER=2;const CatalogLayoutMarketplaceItemView=props=>{const{offerData=null,type=PUBLIC_OFFER,onClick=null}=props;const getMarketplaceOfferTitle=Object(react[\"useMemo\"])(()=>{if(!offerData)return'';// desc\nreturn LocalizeText((offerData.furniType===2?'wallItem':'roomItem')+`.name.${offerData.furniId}`);},[offerData]);const offerTime=Object(react[\"useCallback\"])(()=>{if(!offerData)return'';if(offerData.status===MarketPlaceOfferState.SOLD)return LocalizeText('catalog.marketplace.offer.sold');if(offerData.timeLeftMinutes<=0)return LocalizeText('catalog.marketplace.offer.expired');const time=Math.max(1,offerData.timeLeftMinutes);const hours=Math.floor(time/60);const minutes=time-hours*60;let text=minutes+' '+LocalizeText('catalog.marketplace.offer.minutes');if(hours>0){text=hours+' '+LocalizeText('catalog.marketplace.offer.hours')+' '+text;}return LocalizeText('catalog.marketplace.offer.time_left',['time'],[text]);},[offerData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{shrink:true,center:false,column:false,alignItems:\"center\",className:\"p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutFurniIconImageView,{productType:offerData.furniType===MarketplaceOfferData.TYPE_FLOOR?ProductTypeEnum.FLOOR:ProductTypeEnum.WALL,productClassId:offerData.furniId,extraData:offerData.extraData,style:{width:50,height:50}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:getMarketplaceOfferTitle}),type===OWN_OFFER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.marketplace.offer.price_own_item',['price'],[offerData.price.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:offerTime()})]}),type===PUBLIC_OFFER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.marketplace.offer.price_public_item',['price','average'],[offerData.price.toString(),offerData.averagePrice.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.marketplace.offer_count',['count'],[offerData.offerCount.toString()])})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[type===OWN_OFFER&&offerData.status!==MarketPlaceOfferState.SOLD&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:()=>onClick(offerData),children:LocalizeText('catalog.marketplace.offer.pick')}),type===PUBLIC_OFFER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:()=>onClick(offerData),children:LocalizeText('buy')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",disabled:true,children:LocalizeText('catalog.marketplace.view_more')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/CatalogLayoutMarketplaceOwnItemsView.tsx\nconst CatalogLayoutMarketplaceOwnItemsView=props=>{const[creditsWaiting,setCreditsWaiting]=Object(react[\"useState\"])(0);const[offers,setOffers]=Object(react[\"useState\"])([]);const onMarketPlaceOwnOffersEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const offers=parser.offers.map(offer=>{const newOffer=new MarketplaceOfferData(offer.offerId,offer.furniId,offer.furniType,offer.extraData,offer.stuffData,offer.price,offer.status,offer.averagePrice,offer.offerCount);newOffer.timeLeftMinutes=offer.timeLeftMinutes;return newOffer;});setCreditsWaiting(parser.creditsWaiting);setOffers(offers);},[]);UseMessageEventHook(nitro_renderer[\"je\" /* MarketplaceOwnOffersEvent */],onMarketPlaceOwnOffersEvent);const onMarketplaceCancelOfferResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;if(!parser.success){NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('catalog.marketplace.cancel_failed'),NotificationAlertType.DEFAULT,null,null,LocalizeText('catalog.marketplace.operation_failed.topic'));return;}setOffers(prevValue=>prevValue.filter(value=>value.offerId!==parser.offerId));},[]);UseMessageEventHook(nitro_renderer[\"ge\" /* MarketplaceCancelOfferResultEvent */],onMarketplaceCancelOfferResultEvent);const soldOffers=Object(react[\"useMemo\"])(()=>{return offers.filter(value=>value.status===MarketPlaceOfferState.SOLD);},[offers]);const redeemSoldOffers=Object(react[\"useCallback\"])(()=>{setOffers(prevValue=>{const idsToDelete=soldOffers.map(value=>value.offerId);return prevValue.filter(value=>idsToDelete.indexOf(value.offerId)===-1);});SendMessageComposer(new nitro_renderer[\"Jf\" /* RedeemMarketplaceOfferCreditsMessageComposer */]());},[soldOffers]);const takeItemBack=offerData=>{SendMessageComposer(new nitro_renderer[\"S\" /* CancelMarketplaceOfferMessageComposer */](offerData.offerId));};Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"qc\" /* GetMarketplaceOwnOffersMessageComposer */]());},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[creditsWaiting<=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"bg-muted rounded p-1\",children:LocalizeText('catalog.marketplace.redeem.no_sold_items')}),creditsWaiting>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,gap:1,className:\"bg-muted rounded p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('catalog.marketplace.redeem.get_credits',['count','credits'],[soldOffers.length.toString(),creditsWaiting.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"mt-1\",onClick:redeemSoldOffers,children:LocalizeText('catalog.marketplace.offer.redeem')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,shrink:true,fontWeight:\"bold\",children:LocalizeText('catalog.marketplace.items_found',['count'],[offers.length.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",className:\"nitro-catalog-layout-marketplace-grid\",children:offers.length>0&&offers.map(offer=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutMarketplaceItemView,{offerData:offer,type:OWN_OFFER,onClick:takeItemBack},offer.offerId))})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/common/MarketplaceSearchType.ts\nclass MarketplaceSearchType{}MarketplaceSearchType.BY_ACTIVITY=1;MarketplaceSearchType.BY_VALUE=2;MarketplaceSearchType.ADVANCED=3;\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/CatalogLayoutMarketplaceSearchFormView.tsx\nconst SearchFormView=props=>{const{searchType=null,sortTypes=null,onSearch=null}=props;const[sortType,setSortType]=Object(react[\"useState\"])(sortTypes?sortTypes[0]:3);// first item of SORT_TYPES_ACTIVITY\nconst[searchQuery,setSearchQuery]=Object(react[\"useState\"])('');const[min,setMin]=Object(react[\"useState\"])(0);const[max,setMax]=Object(react[\"useState\"])(0);const onSortTypeChange=Object(react[\"useCallback\"])(sortType=>{setSortType(sortType);if(searchType===MarketplaceSearchType.BY_ACTIVITY||searchType===MarketplaceSearchType.BY_VALUE)onSearch({minPrice:-1,maxPrice:-1,query:'',type:sortType});},[onSearch,searchType]);const onClickSearch=Object(react[\"useCallback\"])(()=>{const minPrice=min>0?min:-1;const maxPrice=max>0?max:-1;onSearch({minPrice:minPrice,maxPrice:maxPrice,type:sortType,query:searchQuery});},[max,min,onSearch,searchQuery,sortType]);Object(react[\"useEffect\"])(()=>{if(!sortTypes||!sortTypes.length)return;const sortType=sortTypes[0];setSortType(sortType);if(searchType===MarketplaceSearchType.BY_ACTIVITY||MarketplaceSearchType.BY_VALUE===searchType)onSearch({minPrice:-1,maxPrice:-1,query:'',type:sortType});},[onSearch,searchType,sortTypes]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('catalog.marketplace.sort_order')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:sortType,onChange:event=>onSortTypeChange(parseInt(event.target.value)),children:sortTypes.map(type=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:type,children:LocalizeText(`catalog.marketplace.sort.${type}`)},type))})]}),searchType===MarketplaceSearchType.ADVANCED&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('catalog.marketplace.search_name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control form-control-sm\",type:\"text\",value:searchQuery,onChange:event=>setSearchQuery(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('catalog.marketplace.search_price')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:min,onChange:event=>setMin(event.target.valueAsNumber)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:max,onChange:event=>setMax(event.target.valueAsNumber)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",className:\"mx-auto\",onClick:onClickSearch,children:LocalizeText('generic.search')})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/CatalogLayoutMarketplacePublicItemsView.tsx\nconst SORT_TYPES_VALUE=[1,2];const SORT_TYPES_ACTIVITY=[3,4,5,6];const SORT_TYPES_ADVANCED=[1,2,3,4,5,6];const CatalogLayoutMarketplacePublicItemsView=props=>{const[searchType,setSearchType]=Object(react[\"useState\"])(MarketplaceSearchType.BY_ACTIVITY);const[totalItemsFound,setTotalItemsFound]=Object(react[\"useState\"])(0);const[offers,setOffers]=Object(react[\"useState\"])(new Map());const[lastSearch,setLastSearch]=Object(react[\"useState\"])({minPrice:-1,maxPrice:-1,query:'',type:3});const{getCurrencyAmount=null}=usePurse();const requestOffers=Object(react[\"useCallback\"])(options=>{setLastSearch(options);SendMessageComposer(new nitro_renderer[\"pc\" /* GetMarketplaceOffersMessageComposer */](options.minPrice,options.maxPrice,options.query,options.type));},[]);const getSortTypes=Object(react[\"useMemo\"])(()=>{switch(searchType){case MarketplaceSearchType.BY_ACTIVITY:return SORT_TYPES_ACTIVITY;case MarketplaceSearchType.BY_VALUE:return SORT_TYPES_VALUE;case MarketplaceSearchType.ADVANCED:return SORT_TYPES_ADVANCED;}return[];},[searchType]);const purchaseItem=Object(react[\"useCallback\"])(offerData=>{if(offerData.price>getCurrencyAmount(-1)){NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('catalog.alert.notenough.credits.description'),NotificationAlertType.DEFAULT,null,null,LocalizeText('catalog.alert.notenough.title'));return;}const offerId=offerData.offerId;NotificationUtilities_NotificationUtilities.confirm(LocalizeText('catalog.marketplace.confirm_header'),()=>{SendMessageComposer(new nitro_renderer[\"J\" /* BuyMarketplaceOfferMessageComposer */](offerId));},null,null,null,LocalizeText('catalog.marketplace.confirm_title'));},[getCurrencyAmount]);const onMarketPlaceOffersEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const latestOffers=new Map();parser.offers.forEach(entry=>{const offerEntry=new MarketplaceOfferData(entry.offerId,entry.furniId,entry.furniType,entry.extraData,entry.stuffData,entry.price,entry.status,entry.averagePrice,entry.offerCount);offerEntry.timeLeftMinutes=entry.timeLeftMinutes;latestOffers.set(entry.offerId,offerEntry);});setTotalItemsFound(parser.totalItemsFound);setOffers(latestOffers);},[]);const onMarketplaceBuyOfferResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;switch(parser.result){case 1:requestOffers(lastSearch);break;case 2:setOffers(prev=>{const newVal=new Map(prev);newVal.delete(parser.requestedOfferId);return newVal;});NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('catalog.marketplace.not_available_header'),NotificationAlertType.DEFAULT,null,null,LocalizeText('catalog.marketplace.not_available_title'));break;case 3:// our shit was updated\n// todo: some dialogue modal \nsetOffers(prev=>{const newVal=new Map(prev);const item=newVal.get(parser.requestedOfferId);if(item){item.offerId=parser.offerId;item.price=parser.newPrice;item.offerCount--;newVal.set(item.offerId,item);}newVal.delete(parser.requestedOfferId);return newVal;});NotificationUtilities_NotificationUtilities.confirm(LocalizeText('catalog.marketplace.confirm_higher_header')+'\\n'+LocalizeText('catalog.marketplace.confirm_price',['price'],[parser.newPrice.toString()]),()=>{SendMessageComposer(new nitro_renderer[\"J\" /* BuyMarketplaceOfferMessageComposer */](parser.offerId));},null,null,null,LocalizeText('catalog.marketplace.confirm_higher_title'));break;case 4:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('catalog.alert.notenough.credits.description'),NotificationAlertType.DEFAULT,null,null,LocalizeText('catalog.alert.notenough.title'));break;}},[lastSearch,requestOffers]);UseMessageEventHook(nitro_renderer[\"ee\" /* MarketPlaceOffersEvent */],onMarketPlaceOffersEvent);UseMessageEventHook(nitro_renderer[\"fe\" /* MarketplaceBuyOfferResultEvent */],onMarketplaceBuyOfferResultEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{active:searchType===MarketplaceSearchType.BY_ACTIVITY,onClick:()=>setSearchType(MarketplaceSearchType.BY_ACTIVITY),children:LocalizeText('catalog.marketplace.search_by_activity')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{active:searchType===MarketplaceSearchType.BY_VALUE,onClick:()=>setSearchType(MarketplaceSearchType.BY_VALUE),children:LocalizeText('catalog.marketplace.search_by_value')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{active:searchType===MarketplaceSearchType.ADVANCED,onClick:()=>setSearchType(MarketplaceSearchType.ADVANCED),children:LocalizeText('catalog.marketplace.search_advanced')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SearchFormView,{sortTypes:getSortTypes,searchType:searchType,onSearch:requestOffers}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,shrink:true,fontWeight:\"bold\",children:LocalizeText('catalog.marketplace.items_found',['count'],[offers.size.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-catalog-layout-marketplace-grid\",overflow:\"auto\",children:Array.from(offers.values()).map((entry,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutMarketplaceItemView,{offerData:entry,type:PUBLIC_OFFER,onClick:purchaseItem},index))})]})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/pets/CatalogLayoutPetView.tsx\nconst CatalogLayoutPetView=props=>{const{page=null}=props;const[petIndex,setPetIndex]=Object(react[\"useState\"])(-1);const[sellablePalettes,setSellablePalettes]=Object(react[\"useState\"])([]);const[selectedPaletteIndex,setSelectedPaletteIndex]=Object(react[\"useState\"])(-1);const[sellableColors,setSellableColors]=Object(react[\"useState\"])([]);const[selectedColorIndex,setSelectedColorIndex]=Object(react[\"useState\"])(-1);const[colorsShowing,setColorsShowing]=Object(react[\"useState\"])(false);const[petName,setPetName]=Object(react[\"useState\"])('');const[approvalPending,setApprovalPending]=Object(react[\"useState\"])(true);const[approvalResult,setApprovalResult]=Object(react[\"useState\"])(-1);const{currentOffer=null,setCurrentOffer=null,setPurchaseOptions=null,catalogOptions=null,roomPreviewer=null}=useCatalog();const{petPalettes=null}=catalogOptions;const getColor=Object(react[\"useMemo\"])(()=>{if(!sellableColors.length||selectedColorIndex===-1)return 0xFFFFFF;return sellableColors[selectedColorIndex][0];},[sellableColors,selectedColorIndex]);const petBreedName=Object(react[\"useMemo\"])(()=>{if(petIndex===-1||!sellablePalettes.length||selectedPaletteIndex===-1)return'';return LocalizeText(`pet.breed.${petIndex}.${sellablePalettes[selectedPaletteIndex].breedId}`);},[petIndex,sellablePalettes,selectedPaletteIndex]);const petPurchaseString=Object(react[\"useMemo\"])(()=>{if(!sellablePalettes.length||selectedPaletteIndex===-1)return'';const paletteId=sellablePalettes[selectedPaletteIndex].paletteId;let color=0xFFFFFF;if(petIndex<=7){if(selectedColorIndex===-1)return'';color=sellableColors[selectedColorIndex][0];}let colorString=color.toString(16).toUpperCase();while(colorString.length<6)colorString='0'+colorString;return`${paletteId}\\n${colorString}`;},[sellablePalettes,selectedPaletteIndex,petIndex,sellableColors,selectedColorIndex]);const validationErrorMessage=Object(react[\"useMemo\"])(()=>{let key='';switch(approvalResult){case 1:key='catalog.alert.petname.long';break;case 2:key='catalog.alert.petname.short';break;case 3:key='catalog.alert.petname.chars';break;case 4:key='catalog.alert.petname.bobba';break;}if(!key||!key.length)return'';return LocalizeText(key);},[approvalResult]);const purchasePet=Object(react[\"useCallback\"])(()=>{if(approvalResult===-1){SendMessageComposer(new nitro_renderer[\"i\" /* ApproveNameMessageComposer */](petName,1));return;}if(approvalResult===0){SendMessageComposer(new nitro_renderer[\"Df\" /* PurchaseFromCatalogComposer */](page.pageId,currentOffer.offerId,`${petName}\\n${petPurchaseString}`,1));return;}},[page,currentOffer,petName,petPurchaseString,approvalResult]);const onApproveNameMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setApprovalResult(parser.result);if(parser.result===0)purchasePet();else DispatchUiEvent(new CatalogPurchaseFailureEvent_CatalogPurchaseFailureEvent(-1));},[purchasePet]);UseMessageEventHook(nitro_renderer[\"j\" /* ApproveNameMessageEvent */],onApproveNameMessageEvent);Object(react[\"useEffect\"])(()=>{if(!page||!page.offers.length)return;const offer=page.offers[0];setCurrentOffer(offer);setPetIndex(GetPetIndexFromLocalization(offer.localizationId));setColorsShowing(false);},[page,setCurrentOffer]);Object(react[\"useEffect\"])(()=>{if(!currentOffer)return;const productData=currentOffer.product.productData;if(!productData)return;if(petPalettes){for(const paletteData of petPalettes){if(paletteData.breed!==productData.type)continue;const palettes=[];for(const palette of paletteData.palettes){if(!palette.sellable)continue;palettes.push(palette);}setSelectedPaletteIndex(palettes.length?0:-1);setSellablePalettes(palettes);return;}}setSelectedPaletteIndex(-1);setSellablePalettes([]);SendMessageComposer(new nitro_renderer[\"Ac\" /* GetSellablePetPalettesComposer */](productData.type));},[currentOffer,petPalettes]);Object(react[\"useEffect\"])(()=>{if(petIndex===-1)return;const colors=GetPetAvailableColors(petIndex,sellablePalettes);setSelectedColorIndex(colors.length?0:-1);setSellableColors(colors);},[petIndex,sellablePalettes]);Object(react[\"useEffect\"])(()=>{if(!roomPreviewer)return;roomPreviewer.reset(false);if(petIndex===-1||!sellablePalettes.length||selectedPaletteIndex===-1)return;let petFigureString=`${petIndex} ${sellablePalettes[selectedPaletteIndex].paletteId}`;if(petIndex<=7)petFigureString+=` ${getColor.toString(16)}`;roomPreviewer.addPetIntoRoom(petFigureString);},[roomPreviewer,petIndex,sellablePalettes,selectedPaletteIndex,getColor]);Object(react[\"useEffect\"])(()=>{setApprovalResult(-1);},[petName]);if(!currentOffer)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:!currentOffer,size:5,overflow:\"hidden\",children:[!currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!page.localization.getImage(1)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:page.localization.getImage(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,dangerouslySetInnerHTML:{__html:page.localization.getText(0)}})]}),currentOffer&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogViewProductWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogTotalPriceWidget,{className:\"credits-default-layout credits-bg py-1 px-2 bottom-1 end-1\",justifyContent:\"end\",alignItems:\"end\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogAddOnBadgeWidgetView,{position:\"absolute\",className:\"bg-muted rounded bottom-1 end-1\"}),petIndex>-1&&petIndex<=7&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{position:\"absolute\",className:\"bottom-1 start-1\",onClick:event=>setColorsShowing(!colorsShowing),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"fill-drip\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(AutoGrid,{className:\"grid-bg group-furni-picker p-2\",columnCount:7,children:[!colorsShowing&&sellablePalettes.length>0&&sellablePalettes.map((palette,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:selectedPaletteIndex===index,onClick:event=>setSelectedPaletteIndex(index),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petIndex,paletteId:palette.paletteId,direction:2,headOnly:true})},index);}),colorsShowing&&sellableColors.length>0&&sellableColors.map((colorSet,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemHighlight:true,itemActive:selectedColorIndex===index,itemColor:nitro_renderer[\"jb\" /* ColorConverter */].int2rgb(colorSet[0]),className:\"clear-bg\",onClick:event=>setSelectedColorIndex(index)},index))]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,children:petBreedName}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm w-100\",placeholder:LocalizeText('widgets.petpackage.name.title'),value:petName,onChange:event=>setPetName(event.target.value)}),approvalResult>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"invalid-feedback d-block m-0\",children:validationErrorMessage})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,className:\"purchase-buttons align-items-end mt-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogPurchaseWidgetView,{purchaseCallback:purchasePet})})]})]})]})});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/vip-gifts/VipGiftItemView.tsx\nconst VipGiftItem=props=>{const{offer=null,isAvailable=false,onSelect=null}=props;const getImageUrlForOffer=Object(react[\"useCallback\"])(()=>{if(!offer||!offer.products.length)return'';const productData=offer.products[0];return ProductImageUtility_ProductImageUtility.getProductImageUrl(productData.productType,productData.furniClassId,productData.extraParam);},[offer]);const getItemTitle=Object(react[\"useCallback\"])(()=>{if(!offer||!offer.products.length)return'';const productData=offer.products[0];const localizationKey=ProductImageUtility_ProductImageUtility.getProductCategory(productData.productType,productData.furniClassId)===2?'wallItem.name.'+productData.furniClassId:'roomItem.name.'+productData.furniClassId;return LocalizeText(localizationKey);},[offer]);const getItemDesc=Object(react[\"useCallback\"])(()=>{if(!offer||!offer.products.length)return'';const productData=offer.products[0];const localizationKey=ProductImageUtility_ProductImageUtility.getProductCategory(productData.productType,productData.furniClassId)===2?'wallItem.desc.'+productData.furniClassId:'roomItem.desc.'+productData.furniClassId;return LocalizeText(localizationKey);},[offer]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{center:false,column:false,alignItems:\"center\",className:\"p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutImage,{imageUrl:getImageUrlForOffer()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,fontWeight:\"bold\",children:getItemTitle()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:()=>onSelect(offer.localizationId),disabled:!isAvailable,children:LocalizeText('catalog.club_gift.select')})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/vip-gifts/CatalogLayoutVipGiftsView.tsx\nconst CatalogLayoutVipGiftsView=props=>{const{purse=null}=usePurse();const{catalogOptions=null,setCatalogOptions=null}=useCatalog();const{clubGifts=null}=catalogOptions;const giftsAvailable=Object(react[\"useCallback\"])(()=>{if(!clubGifts)return'';if(clubGifts.giftsAvailable>0)return LocalizeText('catalog.club_gift.available',['amount'],[clubGifts.giftsAvailable.toString()]);if(clubGifts.daysUntilNextGift>0)return LocalizeText('catalog.club_gift.days_until_next',['days'],[clubGifts.daysUntilNextGift.toString()]);if(purse.isVip)return LocalizeText('catalog.club_gift.not_available');return LocalizeText('catalog.club_gift.no_club');},[clubGifts,purse]);const selectGift=Object(react[\"useCallback\"])(localizationId=>{NotificationUtilities_NotificationUtilities.confirm(LocalizeText('catalog.club_gift.confirm'),()=>{SendMessageComposer(new nitro_renderer[\"Ih\" /* SelectClubGiftComposer */](localizationId));setCatalogOptions(prevValue=>{prevValue.clubGifts.giftsAvailable--;return{...prevValue};});},null);},[setCatalogOptions]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,shrink:true,fontWeight:\"bold\",children:giftsAvailable()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:1,className:\"nitro-catalog-layout-vip-gifts-grid\",children:clubGifts.offers.length>0&&clubGifts.offers.map(offer=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(VipGiftItem,{offer:offer,isAvailable:clubGifts.getOfferExtraData(offer.offerId).isSelectable&&clubGifts.giftsAvailable>0,onSelect:selectGift},offer.offerId))})]});};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/GetCatalogLayout.tsx\nconst GetCatalogLayout=(page,hideNavigation)=>{if(!page)return null;const layoutProps={page,hideNavigation};switch(page.layoutCode){case'frontpage_featured':return null;case'frontpage4':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutFrontpage4View,{...layoutProps});case'pets':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutPetView,{...layoutProps});case'pets2':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutPets2View,{...layoutProps});case'pets3':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutPets3View,{...layoutProps});case'vip_buy':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutVipBuyView,{...layoutProps});case'guild_frontpage':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayouGuildFrontpageView,{...layoutProps});case'guild_forum':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayouGuildForumView,{...layoutProps});case'guild_custom_furni':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayouGuildCustomFurniView,{...layoutProps});case'club_gifts':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutVipGiftsView,{...layoutProps});case'marketplace_own_items':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutMarketplaceOwnItemsView,{...layoutProps});case'marketplace':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutMarketplacePublicItemsView,{...layoutProps});case'single_bundle':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutSingleBundleView,{...layoutProps});case'room_bundle':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutRoomBundleView,{...layoutProps});case'spaces_new':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutSpacesView,{...layoutProps});case'trophies':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutTrophiesView,{...layoutProps});case'info_loyalty':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutInfoLoyaltyView,{...layoutProps});case'badge_display':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutBadgeDisplayView,{...layoutProps});//case 'default_3x3_color_grouping':\n//return <CatalogLayoutColorGroupingView { ...layoutProps } />;\ncase'bots':case'default_3x3':default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogLayoutDefaultView,{...layoutProps});}};\n// CONCATENATED MODULE: ./src/components/catalog/views/page/layout/marketplace/MarketplacePostOfferView.tsx\nconst MarketplacePostOfferView=props=>{const[item,setItem]=Object(react[\"useState\"])(null);const[askingPrice,setAskingPrice]=Object(react[\"useState\"])(0);const{catalogOptions=null,setCatalogOptions=null}=useCatalog();const{marketplaceConfiguration=null}=catalogOptions;const onMarketplaceConfigurationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCatalogOptions(prevValue=>{const newValue={...prevValue};newValue.marketplaceConfiguration=parser;return newValue;});},[setCatalogOptions]);UseMessageEventHook(nitro_renderer[\"he\" /* MarketplaceConfigurationEvent */],onMarketplaceConfigurationEvent);const onCatalogPostMarketplaceOfferEvent=Object(react[\"useCallback\"])(event=>{setItem(event.item);},[]);UseUiEvent(CatalogPostMarketplaceOfferEvent_CatalogPostMarketplaceOfferEvent.POST_MARKETPLACE,onCatalogPostMarketplaceOfferEvent);Object(react[\"useEffect\"])(()=>{if(!item||marketplaceConfiguration)return;SendMessageComposer(new nitro_renderer[\"oc\" /* GetMarketplaceConfigurationMessageComposer */]());},[item,marketplaceConfiguration]);Object(react[\"useEffect\"])(()=>{if(!item)return;return()=>setAskingPrice(0);},[item]);if(!marketplaceConfiguration||!item)return null;const getFurniTitle=item?LocalizeText(item.isWallItem?'wallItem.name.'+item.type:'roomItem.name.'+item.type):'';const getFurniDescription=item?LocalizeText(item.isWallItem?'wallItem.desc.'+item.type:'roomItem.desc.'+item.type):'';const postItem=()=>{if(!item||askingPrice<=marketplaceConfiguration.minimumPrice)return;NotificationUtilities_NotificationUtilities.confirm(LocalizeText('inventory.marketplace.confirm_offer.info',['furniname','price'],[getFurniTitle,askingPrice.toString()]),()=>{SendMessageComposer(new nitro_renderer[\"de\" /* MakeOfferMessageComposer */](askingPrice,item.isWallItem?2:1,item.id));setItem(null);},()=>{setItem(null);},null,null,LocalizeText('inventory.marketplace.confirm_offer.title'));};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-catalog-layout-marketplace-post-offer\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('inventory.marketplace.make_offer.title'),onCloseClick:event=>setItem(null)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,className:\"bg-muted rounded p-2\",size:4,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutFurniImageView,{productType:item.isWallItem?ProductTypeEnum.WALL:ProductTypeEnum.FLOOR,productClassId:item.type,extraData:item.extra.toString()})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:8,justifyContent:\"between\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:getFurniTitle}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,shrink:true,children:getFurniDescription})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{italics:true,children:LocalizeText('inventory.marketplace.make_offer.expiration_info',['time'],[marketplaceConfiguration.offerTime.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"input-group has-validation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control form-control-sm\",type:\"number\",min:0,value:askingPrice,onChange:event=>setAskingPrice(parseInt(event.target.value)),placeholder:LocalizeText('inventory.marketplace.make_offer.price_request')}),(askingPrice<marketplaceConfiguration.minimumPrice||isNaN(askingPrice))&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"invalid-feedback d-block\",children:LocalizeText('inventory.marketplace.make_offer.min_price',['minprice'],[marketplaceConfiguration.minimumPrice.toString()])}),askingPrice>marketplaceConfiguration.maximumPrice&&!isNaN(askingPrice)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"invalid-feedback d-block\",children:LocalizeText('inventory.marketplace.make_offer.max_price',['maxprice'],[marketplaceConfiguration.maximumPrice.toString()])}),!(askingPrice<marketplaceConfiguration.minimumPrice||askingPrice>marketplaceConfiguration.maximumPrice||isNaN(askingPrice))&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"invalid-feedback d-block\",children:LocalizeText('inventory.marketplace.make_offer.final_price',['commission','finalprice'],[marketplaceConfiguration.commission.toString(),(askingPrice+marketplaceConfiguration.commission).toString()])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:askingPrice<marketplaceConfiguration.minimumPrice||askingPrice>marketplaceConfiguration.maximumPrice||isNaN(askingPrice),onClick:postItem,children:LocalizeText('inventory.marketplace.make_offer.post')})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/catalog/CatalogView.tsx\nconst CatalogView=props=>{const{isVisible=false,setIsVisible=null,rootNode=null,currentPage=null,navigationHidden=false,setNavigationHidden=null,activeNodes=[],searchResult=null,setSearchResult=null,openPageByName=null,openPageByOfferId=null,getNodeById=null,activateNode=null}=useCatalog();Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;case'open':if(parts.length>2){if(parts.length===4){switch(parts[2]){case'offerId':openPageByOfferId(parseInt(parts[3]));return;}}else{openPageByName(parts[2]);}}else{setIsVisible(true);}return;}},eventUrlPrefix:'catalog/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[setIsVisible,openPageByOfferId,openPageByName]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"catalog\",className:\"nitro-catalog\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('catalog.title'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{subClassName:\"w-100\",children:rootNode&&rootNode.children.length>0&&rootNode.children.map(child=>{if(!child.isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:child.isActive,onClick:event=>{if(searchResult)setSearchResult(null);activateNode(child);},children:child.localization},child.pageId);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogHeaderView,{node:rootNode}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[!navigationHidden&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"catalog-left\",size:4,overflow:\"hidden\",children:activeNodes&&activeNodes.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogNavigationView,{node:activeNodes[0]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:!navigationHidden?8:12,overflow:\"hidden\",children:GetCatalogLayout(currentPage,()=>setNavigationHidden(true))})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogGiftView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MarketplacePostOfferView,{})]});};\n// EXTERNAL MODULE: ./node_modules/react-virtualized/dist/es/index.js + 67 modules\nvar es = __webpack_require__(28);\n\n// CONCATENATED MODULE: ./src/components/chat-history/ChatHistoryContext.tsx\nconst ChatHistoryContext=/*#__PURE__*/Object(react[\"createContext\"])({chatHistoryState:null,roomHistoryState:null});const ChatHistoryContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatHistoryContext.Provider,{value:props.value,children:props.children});};const useChatHistoryContext=()=>Object(react[\"useContext\"])(ChatHistoryContext);\n// CONCATENATED MODULE: ./src/components/chat-history/common/ChatEntryType.ts\nclass ChatEntryType{}ChatEntryType.TYPE_CHAT=1;ChatEntryType.TYPE_ROOM_INFO=2;\n// CONCATENATED MODULE: ./src/components/chat-history/common/Utilities.ts\nconst currentDate=()=>{const currentTime=new Date();return`${currentTime.getHours().toString().padStart(2,'0')}:${currentTime.getMinutes().toString().padStart(2,'0')}`;};\n// CONCATENATED MODULE: ./src/components/chat-history/ChatHistoryMessageHandler.tsx\nconst CHAT_HISTORY_MAX=1000;const ROOM_HISTORY_MAX=10;const ChatHistoryMessageHandler=props=>{const{chatHistoryState=null,roomHistoryState=null}=useChatHistoryContext();const[needsRoomInsert,setNeedsRoomInsert]=Object(react[\"useState\"])(false);const addChatEntry=Object(react[\"useCallback\"])(entry=>{entry.id=chatHistoryState.chats.length;chatHistoryState.chats.push(entry);//check for overflow\nif(chatHistoryState.chats.length>CHAT_HISTORY_MAX){chatHistoryState.chats.shift();}chatHistoryState.notify();//dispatchUiEvent(new ChatHistoryEvent(ChatHistoryEvent.CHAT_HISTORY_CHANGED));\n},[chatHistoryState]);const addRoomHistoryEntry=Object(react[\"useCallback\"])(entry=>{roomHistoryState.roomHistory.push(entry);// check for overflow\nif(roomHistoryState.roomHistory.length>ROOM_HISTORY_MAX){roomHistoryState.roomHistory.shift();}roomHistoryState.notify();},[roomHistoryState]);const onChatEvent=Object(react[\"useCallback\"])(event=>{const roomSession=GetRoomSession();if(!roomSession)return;const userData=roomSession.userDataManager.getUserDataByIndex(event.objectId);if(!userData)return;const timeString=currentDate();const entry={id:-1,entityId:userData.webID,name:userData.name,look:userData.figure,entityType:userData.type,message:event.message,timestamp:timeString,type:ChatEntryType.TYPE_CHAT,roomId:roomSession.roomId};addChatEntry(entry);},[addChatEntry]);UseRoomSessionManagerEvent(nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_EVENT,onChatEvent);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].STARTED:setNeedsRoomInsert(true);break;case nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED://dispatchUiEvent(new ChatHistoryEvent(ChatHistoryEvent.HIDE_CHAT_HISTORY));\nbreak;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].STARTED,onRoomSessionEvent);const onGetGuestRoomResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const session=GetRoomSession();if(!session||session.roomId!==parser.data.roomId)return;if(needsRoomInsert){const chatEntry={id:-1,entityId:parser.data.roomId,name:parser.data.roomName,timestamp:currentDate(),type:ChatEntryType.TYPE_ROOM_INFO,roomId:parser.data.roomId};addChatEntry(chatEntry);const roomEntry={id:parser.data.roomId,name:parser.data.roomName};addRoomHistoryEntry(roomEntry);setNeedsRoomInsert(false);}},[addChatEntry,addRoomHistoryEntry,needsRoomInsert]);UseMessageEventHook(nitro_renderer[\"nc\" /* GetGuestRoomResultEvent */],onGetGuestRoomResultEvent);return null;};\n// CONCATENATED MODULE: ./src/components/chat-history/common/ChatHistoryState.ts\nclass ChatHistoryState{constructor(){this._chats=void 0;this._notifier=void 0;this._chats=[];}notify(){if(this._notifier)this._notifier();}get chats(){return this._chats;}get notifier(){return this._notifier;}set notifier(notifier){this._notifier=notifier;}}\n// CONCATENATED MODULE: ./src/components/chat-history/common/GetChatHistory.ts\nlet GLOBAL_CHATS=null;const SetChatHistory=chatHistory=>GLOBAL_CHATS=chatHistory;const GetChatHistory=()=>GLOBAL_CHATS;\n// CONCATENATED MODULE: ./src/components/chat-history/common/RoomHistoryState.ts\nclass RoomHistoryState{constructor(){this._roomHistory=void 0;this._notifier=void 0;this._roomHistory=[];}get roomHistory(){return this._roomHistory;}get notifier(){return this._notifier;}set notifier(notifier){this._notifier=notifier;}notify(){if(this._notifier)this._notifier();}}\n// CONCATENATED MODULE: ./src/components/chat-history/ChatHistoryView.tsx\nconst ChatHistoryView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[chatHistoryUpdateId,setChatHistoryUpdateId]=Object(react[\"useState\"])(-1);const[roomHistoryUpdateId,setRoomHistoryUpdateId]=Object(react[\"useState\"])(-1);const[chatHistoryState,setChatHistoryState]=Object(react[\"useState\"])(new ChatHistoryState());const[roomHistoryState,setRoomHistoryState]=Object(react[\"useState\"])(new RoomHistoryState());const elementRef=Object(react[\"useRef\"])(null);const cache=Object(react[\"useMemo\"])(()=>new es[\"c\" /* CellMeasurerCache */]({defaultHeight:25,fixedWidth:true}),[]);const RowRenderer=props=>{const item=chatHistoryState.chats[props.index];const isDark=props.index%2===0;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"b\" /* CellMeasurer */],{cache:cache,columnIndex:0,parent:props.parent,rowIndex:props.index,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{style:props.style,className:\"p-1\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"muted\",children:item.timestamp}),item.type===ChatEntryType.TYPE_CHAT&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{pointer:true,noWrap:true,dangerouslySetInnerHTML:{__html:item.name+':'}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textBreak:true,wrap:true,grow:true,children:item.message})]}),item.type===ChatEntryType.TYPE_ROOM_INFO&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-small-room\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"danger\",textBreak:true,wrap:true,grow:true,children:item.name})]})]},props.key)},props.key);};const onResize=info=>cache.clearAll();const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'chat-history/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{const chatState=new ChatHistoryState();const roomState=new RoomHistoryState();SetChatHistory(chatState);chatState.notifier=()=>setChatHistoryUpdateId(prevValue=>prevValue+1);roomState.notifier=()=>setRoomHistoryUpdateId(prevValue=>prevValue+1);setChatHistoryState(chatState);setRoomHistoryState(roomState);return()=>{chatState.notifier=null;roomState.notifier=null;};},[]);Object(react[\"useEffect\"])(()=>{if(elementRef&&elementRef.current&&isVisible)elementRef.current.scrollToRow(-1);},[isVisible]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ChatHistoryContextProvider,{value:{chatHistoryState,roomHistoryState},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatHistoryMessageHandler,{}),isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,className:\"nitro-chat-history\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"chat-history-content h-100\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"h-100\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* AutoSizer */],{defaultWidth:300,defaultHeight:200,onResize:onResize,children:_ref=>{let{height,width}=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* List */],{ref:elementRef,width:width,height:height,rowCount:chatHistoryState.chats.length,rowHeight:cache.rowHeight,className:'chat-history-list',rowRenderer:RowRenderer,deferredMeasurementCache:cache});}})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"chat-toggle\",onClick:event=>setIsVisible(false)})]})]});};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/Constants.ts\nconst TILE_SIZE=32;const MAX_NUM_TILE_PER_AXIS=64;const HEIGHT_SCHEME='x0123456789abcdefghijklmnopq';class FloorAction{}FloorAction.DOOR=0;FloorAction.UP=1;FloorAction.DOWN=2;FloorAction.SET=3;FloorAction.UNSET=4;const COLORMAP={'x':'101010','0':'0065ff','1':'0091ff','2':'00bcff','3':'00e8ff','4':'00ffea','5':'00ffbf','6':'00ff93','7':'00ff68','8':'00ff3d','9':'19ff00','a':'44ff00','b':'70ff00','c':'9bff00','d':'f2ff00','e':'ffe000','f':'ffb500','g':'ff8900','h':'ff5e00','i':'ff3200','j':'ff0700','k':'ff0023','l':'ff007a','m':'ff00a5','n':'ff00d1','o':'ff00fc','p':'d600ff','q':'aa00ff'};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/ActionSettings.ts\nclass ActionSettings_ActionSettings{constructor(){this._currentAction=void 0;this._currentHeight=void 0;this._currentAction=FloorAction.SET;this._currentHeight=HEIGHT_SCHEME[1];}get currentAction(){return this._currentAction;}set currentAction(value){this._currentAction=value;}get currentHeight(){return this._currentHeight;}set currentHeight(value){this._currentHeight=value;}clear(){this._currentAction=FloorAction.SET;this._currentHeight=HEIGHT_SCHEME[1];}}\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/Tile.ts\nclass Tile{constructor(height,isBlocked){this._height=void 0;this._isBlocked=void 0;this._height=height;this._isBlocked=isBlocked;}get height(){return this._height;}set height(height){this._height=height;}get isBlocked(){return this._isBlocked;}set isBlocked(val){this._isBlocked=val;}}\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/Utils.ts\nconst getScreenPositionForTile=(x,y)=>{let positionX=x*TILE_SIZE/2-y*TILE_SIZE/2;const positionY=x*TILE_SIZE/4+y*TILE_SIZE/4;positionX=positionX+1024;// center the map in the canvas\nreturn[positionX,positionY];};const getTileFromScreenPosition=(x,y)=>{const translatedX=x-1024;// after centering translation\nconst realX=(translatedX/(TILE_SIZE/2)+y/(TILE_SIZE/4))/2;const realY=(y/(TILE_SIZE/4)-translatedX/(TILE_SIZE/2))/2;return[realX,realY];};const convertNumbersForSaving=value=>{value=parseInt(value.toString());switch(value){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0;}};const convertSettingToNumber=value=>{switch(value){case 0.25:return 0;case 0.5:return 1;case 2:return 3;default:return 2;}};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/FloorplanEditor.ts\nclass FloorplanEditor_FloorplanEditor extends nitro_renderer[\"xf\" /* PixiApplicationProxy */]{constructor(){const width=TILE_SIZE*MAX_NUM_TILE_PER_AXIS+20;const height=TILE_SIZE*MAX_NUM_TILE_PER_AXIS/2+100;super({width:width,height:height,backgroundColor:0x000000,antialias:true,autoDensity:true,resolution:1,sharedLoader:true,sharedTicker:true});this._tilemap=void 0;this._width=void 0;this._height=void 0;this._isHolding=void 0;this._doorLocation=void 0;this._lastUsedTile=void 0;this._tilemapRenderer=void 0;this._actionSettings=void 0;this._isInitialized=void 0;this._assetCollection=void 0;this._tilemap=[];this._doorLocation=new nitro_renderer[\"Xe\" /* NitroPoint */](0,0);this._width=0;this._height=0;this._isHolding=false;this._lastUsedTile=new nitro_renderer[\"Xe\" /* NitroPoint */](-1,-1);this._actionSettings=new ActionSettings_ActionSettings();}initialize(){if(this._isInitialized)return;const collection=GetNitroCore().asset.getCollection('floor_editor');if(!collection)return;this._assetCollection=collection;this._tilemapRenderer=new nitro_renderer[\"cf\" /* NitroTilemap */](collection.baseTexture);this.registerEventListeners();this.stage.addChild(this._tilemapRenderer);this._isInitialized=true;}registerEventListeners(){//this._tilemapRenderer.interactive = true;\nconst tempPoint=new nitro_renderer[\"Xe\" /* NitroPoint */]();// @ts-ignore\nthis._tilemapRenderer.containsPoint=position=>{this._tilemapRenderer.worldTransform.applyInverse(position,tempPoint);return this.tileHitDetection(tempPoint,false);};this._tilemapRenderer.on('pointerup',()=>{this._isHolding=false;});this._tilemapRenderer.on('pointerout',()=>{this._isHolding=false;});this._tilemapRenderer.on('pointerdown',event=>{if(!(event.data.originalEvent instanceof PointerEvent)&&!(event.data.originalEvent instanceof TouchEvent))return;const pointerEvent=event.data.originalEvent;if(pointerEvent instanceof MouseEvent&&pointerEvent.button===2)return;const location=event.data.global;this.tileHitDetection(location,true);});this._tilemapRenderer.on('click',event=>{if(!(event.data.originalEvent instanceof PointerEvent))return;const pointerEvent=event.data.originalEvent;if(pointerEvent.button===2)return;const location=event.data.global;this.tileHitDetection(location,true,true);});}tileHitDetection(tempPoint,setHolding){let isClick=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;// @ts-ignore\nconst buffer=this._tilemapRenderer.pointsBuf;const bufSize=nitro_renderer[\"jf\" /* POINT_STRUCT_SIZE */];const len=buffer.length;if(setHolding){this._isHolding=true;}for(let j=0;j<len;j+=bufSize){const bufIndex=j+bufSize;const data=buffer.slice(j,bufIndex);const width=TILE_SIZE;const height=TILE_SIZE/2;const mousePositionX=Math.floor(tempPoint.x);const mousePositionY=Math.floor(tempPoint.y);const tileStartX=data[2];const tileStartY=data[3];const centreX=tileStartX+width/2;const centreY=tileStartY+height/2;const dx=Math.abs(mousePositionX-centreX);const dy=Math.abs(mousePositionY-centreY);const solution=dx/(width*0.5)+dy/(height*0.5)<=1;//todo: improve this\nif(solution){if(this._isHolding){const[realX,realY]=getTileFromScreenPosition(tileStartX,tileStartY);if(isClick){this.onClick(realX,realY);}else if(this._lastUsedTile.x!==realX||this._lastUsedTile.y!==realY){this._lastUsedTile.x=realX;this._lastUsedTile.y=realY;this.onClick(realX,realY);}}return true;}}return false;}onClick(x,y){const tile=this._tilemap[y][x];const heightIndex=HEIGHT_SCHEME.indexOf(tile.height);let futureHeightIndex=0;switch(this._actionSettings.currentAction){case FloorAction.DOOR:if(tile.height!=='x'){this._doorLocation.x=x;this._doorLocation.y=y;this.renderTiles();}return;case FloorAction.UP:if(tile.height==='x')return;futureHeightIndex=heightIndex+1;break;case FloorAction.DOWN:if(tile.height==='x'||heightIndex<=1)return;futureHeightIndex=heightIndex-1;break;case FloorAction.SET:futureHeightIndex=HEIGHT_SCHEME.indexOf(this._actionSettings.currentHeight);break;case FloorAction.UNSET:futureHeightIndex=0;break;}if(futureHeightIndex===-1)return;if(heightIndex===futureHeightIndex)return;if(futureHeightIndex>0){if(x+1>this._width)this._width=x+1;if(y+1>this._height)this._height=y+1;}const newHeight=HEIGHT_SCHEME[futureHeightIndex];if(!newHeight)return;if(tile.isBlocked)return;this._tilemap[y][x].height=newHeight;this.renderTiles();}renderTiles(){this.tilemapRenderer.clear();for(let y=0;y<this._tilemap.length;y++){for(let x=0;x<this.tilemap[y].length;x++){const tile=this.tilemap[y][x];let assetName=tile.height;if(this._doorLocation.x===x&&this._doorLocation.y===y)assetName=FloorplanEditor_FloorplanEditor.TILE_DOOR;if(tile.isBlocked)assetName=FloorplanEditor_FloorplanEditor.TILE_BLOCKED;//if((tile.height === 'x') || tile.height === 'X') continue;\nconst[positionX,positionY]=getScreenPositionForTile(x,y);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${assetName}`),positionX,positionY);}}}setTilemap(map,blockedTiles){this._tilemap=[];const roomMapStringSplit=map.split('\\r');let width=0;let height=roomMapStringSplit.length;// find the map width, height\nfor(let y=0;y<height;y++){const originalRow=roomMapStringSplit[y];if(originalRow.length===0){roomMapStringSplit.splice(y,1);height=roomMapStringSplit.length;y--;continue;}if(originalRow.length>width){width=originalRow.length;}}// fill map with room heightmap tiles\nfor(let y=0;y<height;y++){this._tilemap[y]=[];const rowString=roomMapStringSplit[y];for(let x=0;x<width;x++){const blocked=blockedTiles[y]&&blockedTiles[y][x]||false;const char=rowString[x];if(!(char==='x')&&!(char==='X')&&char){this._tilemap[y][x]=new Tile(char,blocked);}else{this._tilemap[y][x]=new Tile('x',blocked);}}for(let x=width;x<MAX_NUM_TILE_PER_AXIS;x++){this.tilemap[y][x]=new Tile('x',false);}}// fill remaining map with empty tiles\nfor(let y=height;y<MAX_NUM_TILE_PER_AXIS;y++){if(!this.tilemap[y])this.tilemap[y]=[];for(let x=0;x<MAX_NUM_TILE_PER_AXIS;x++){this.tilemap[y][x]=new Tile('x',false);}}this._width=width;this._height=height;}getCurrentTilemapString(){const highestTile=this._tilemap[this._height-1][this._width-1];if(highestTile.height==='x'){this._width=-1;this._height=-1;for(let y=MAX_NUM_TILE_PER_AXIS-1;y>=0;y--){if(!this._tilemap[y])continue;for(let x=MAX_NUM_TILE_PER_AXIS-1;x>=0;x--){if(!this._tilemap[y][x])continue;const tile=this._tilemap[y][x];if(tile.height!=='x'){if(x+1>this._width)this._width=x+1;if(y+1>this._height)this._height=y+1;}}}}const rows=[];for(let y=0;y<this._height;y++){const row=[];for(let x=0;x<this._width;x++){const tile=this._tilemap[y][x];row[x]=tile.height;}rows[y]=row.join('');}return rows.join('\\r');}clear(){this._tilemapRenderer.interactive=false;this._tilemap=[];this._doorLocation.set(-1,-1);this._width=0;this._height=0;this._isHolding=false;this._lastUsedTile.set(-1,-1);this._actionSettings.clear();this._tilemapRenderer.clear();}get tilemapRenderer(){return this._tilemapRenderer;}get tilemap(){return this._tilemap;}get doorLocation(){return this._doorLocation;}set doorLocation(value){this._doorLocation=value;}get actionSettings(){return this._actionSettings;}static get instance(){if(!FloorplanEditor_FloorplanEditor._INSTANCE){FloorplanEditor_FloorplanEditor._INSTANCE=new FloorplanEditor_FloorplanEditor();}return FloorplanEditor_FloorplanEditor._INSTANCE;}}FloorplanEditor_FloorplanEditor._INSTANCE=null;FloorplanEditor_FloorplanEditor.TILE_BLOCKED='r_blocked';FloorplanEditor_FloorplanEditor.TILE_DOOR='r_door';\n// CONCATENATED MODULE: ./src/components/floorplan-editor/FloorplanEditorContext.tsx\nconst FloorplanEditorContext=/*#__PURE__*/Object(react[\"createContext\"])({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null});const FloorplanEditorContextProvider=props=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FloorplanEditorContext.Provider,{...props});const useFloorplanEditorContext=()=>Object(react[\"useContext\"])(FloorplanEditorContext);\n// CONCATENATED MODULE: ./src/components/floorplan-editor/views/FloorplanCanvasView.tsx\nconst FloorplanCanvasView=props=>{const{gap=1,children=null,...rest}=props;const[occupiedTilesReceived,setOccupiedTilesReceived]=Object(react[\"useState\"])(false);const[entryTileReceived,setEntryTileReceived]=Object(react[\"useState\"])(false);const{originalFloorplanSettings=null,setOriginalFloorplanSettings=null,setVisualizationSettings=null}=useFloorplanEditorContext();const elementRef=Object(react[\"useRef\"])(null);const onRoomOccupiedTilesMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOriginalFloorplanSettings(prevValue=>{const newValue={...prevValue};newValue.reservedTiles=parser.blockedTilesMap;FloorplanEditor_FloorplanEditor.instance.setTilemap(newValue.tilemap,newValue.reservedTiles);return newValue;});setOccupiedTilesReceived(true);elementRef.current.scrollTo(FloorplanEditor_FloorplanEditor.instance.view.width/3,0);},[setOriginalFloorplanSettings]);UseMessageEventHook(nitro_renderer[\"Pg\" /* RoomOccupiedTilesMessageEvent */],onRoomOccupiedTilesMessageEvent);const onRoomEntryTileMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOriginalFloorplanSettings(prevValue=>{const newValue={...prevValue};newValue.entryPoint=[parser.x,parser.y];newValue.entryPointDir=parser.direction;return newValue;});setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.entryPointDir=parser.direction;return newValue;});FloorplanEditor_FloorplanEditor.instance.doorLocation=new nitro_renderer[\"Xe\" /* NitroPoint */](parser.x,parser.y);setEntryTileReceived(true);},[setOriginalFloorplanSettings,setVisualizationSettings]);UseMessageEventHook(nitro_renderer[\"yg\" /* RoomEntryTileMessageEvent */],onRoomEntryTileMessageEvent);const onClickArrowButton=scrollDirection=>{const element=elementRef.current;if(!element)return;switch(scrollDirection){case'up':element.scrollBy({top:-10});break;case'down':element.scrollBy({top:10});break;case'left':element.scrollBy({left:-10});break;case'right':element.scrollBy({left:10});break;}};Object(react[\"useEffect\"])(()=>{return()=>{FloorplanEditor_FloorplanEditor.instance.clear();setVisualizationSettings(prevValue=>{return{wallHeight:originalFloorplanSettings.wallHeight,thicknessWall:originalFloorplanSettings.thicknessWall,thicknessFloor:originalFloorplanSettings.thicknessFloor,entryPointDir:prevValue.entryPointDir};});};},[originalFloorplanSettings.thicknessFloor,originalFloorplanSettings.thicknessWall,originalFloorplanSettings.wallHeight,setVisualizationSettings]);Object(react[\"useEffect\"])(()=>{if(!entryTileReceived||!occupiedTilesReceived)return;FloorplanEditor_FloorplanEditor.instance.renderTiles();},[entryTileReceived,occupiedTilesReceived]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"yc\" /* GetRoomEntryTileMessageComposer */]());SendMessageComposer(new nitro_renderer[\"tc\" /* GetOccupiedTilesMessageComposer */]());FloorplanEditor_FloorplanEditor.instance.tilemapRenderer.interactive=true;if(!elementRef.current)return;elementRef.current.appendChild(FloorplanEditor_FloorplanEditor.instance.renderer.view);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:gap,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"d-md-none\",onClick:event=>onClickArrowButton('left'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"arrow-left\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",size:10,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"center\",className:\"d-md-none\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{shrink:true,onClick:event=>onClickArrowButton('up'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"arrow-up\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{overflow:\"auto\",innerRef:elementRef}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"center\",className:\"d-md-none\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{shrink:true,onClick:event=>onClickArrowButton('down'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"arrow-down\"})})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"d-md-none\",onClick:event=>onClickArrowButton('right'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"arrow-right\"})})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/common/ConvertMapToString.ts\nconst ConvertTileMapToString=map=>map.replace(/\\r\\n|\\r|\\n/g,'\\n').toLowerCase();\n// CONCATENATED MODULE: ./src/components/floorplan-editor/views/FloorplanImportExportView.tsx\nconst FloorplanImportExportView=props=>{const{onCloseClick=null}=props;const[map,setMap]=Object(react[\"useState\"])('');const{originalFloorplanSettings=null}=useFloorplanEditorContext();const saveFloorChanges=()=>{SendMessageComposer(new nitro_renderer[\"ui\" /* UpdateFloorPropertiesMessageComposer */](map.split('\\n').join('\\r'),originalFloorplanSettings.entryPoint[0],originalFloorplanSettings.entryPoint[1],originalFloorplanSettings.entryPointDir,convertNumbersForSaving(originalFloorplanSettings.thicknessWall),convertNumbersForSaving(originalFloorplanSettings.thicknessFloor),originalFloorplanSettings.wallHeight-1));};UseMountEffect(()=>{setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap));});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{theme:\"primary\",className:\"floorplan-import-export\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('floor.plan.editor.import.export'),onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"h-100\",value:map,onChange:event=>setMap(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setMap(ConvertTileMapToString(originalFloorplanSettings.tilemap)),children:LocalizeText('floor.plan.editor.revert.to.last.received.map')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:saveFloorChanges,children:LocalizeText('floor.plan.editor.save')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/views/FloorplanOptionsView.tsx\nconst MIN_WALL_HEIGHT=0;const MAX_WALL_HEIGHT=16;const MIN_FLOOR_HEIGHT=0;const MAX_FLOOR_HEIGHT=26;const FloorplanOptionsView=props=>{const{visualizationSettings=null,setVisualizationSettings=null}=useFloorplanEditorContext();const[floorAction,setFloorAction]=Object(react[\"useState\"])(FloorAction.SET);const[floorHeight,setFloorHeight]=Object(react[\"useState\"])(0);const selectAction=action=>{setFloorAction(action);FloorplanEditor_FloorplanEditor.instance.actionSettings.currentAction=action;};const changeDoorDirection=()=>{setVisualizationSettings(prevValue=>{const newValue={...prevValue};if(newValue.entryPointDir<7){++newValue.entryPointDir;}else{newValue.entryPointDir=0;}return newValue;});};const onFloorHeightChange=value=>{if(isNaN(value)||value<=0)value=0;if(value>26)value=26;setFloorHeight(value);FloorplanEditor_FloorplanEditor.instance.actionSettings.currentHeight=value.toString(36);};const onFloorThicknessChange=value=>{setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.thicknessFloor=value;return newValue;});};const onWallThicknessChange=value=>{setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.thicknessWall=value;return newValue;});};const onWallHeightChange=value=>{if(isNaN(value)||value<=0)value=MIN_WALL_HEIGHT;if(value>MAX_WALL_HEIGHT)value=MAX_WALL_HEIGHT;setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.wallHeight=value;return newValue;});};const increaseWallHeight=()=>{let height=visualizationSettings.wallHeight+1;if(height>MAX_WALL_HEIGHT)height=MAX_WALL_HEIGHT;onWallHeightChange(height);};const decreaseWallHeight=()=>{let height=visualizationSettings.wallHeight-1;if(height<=0)height=MIN_WALL_HEIGHT;onWallHeightChange(height);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('floor.plan.editor.draw.mode')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:3,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:floorAction===FloorAction.SET,onClick:event=>selectAction(FloorAction.SET),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-set-tile\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:floorAction===FloorAction.UNSET,onClick:event=>selectAction(FloorAction.UNSET),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-unset-tile\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:floorAction===FloorAction.UP,onClick:event=>selectAction(FloorAction.UP),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-increase-height\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:floorAction===FloorAction.DOWN,onClick:event=>selectAction(FloorAction.DOWN),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-decrease-height\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:floorAction===FloorAction.DOOR,onClick:event=>selectAction(FloorAction.DOOR),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-set-door\"})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",size:4,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('floor.plan.editor.enter.direction')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-door-direction-${visualizationSettings.entryPointDir} cursor-pointer`,onClick:changeDoorDirection})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:3,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('floor.editor.wall.height')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"caret-left\",className:\"cursor-pointer\",onClick:decreaseWallHeight}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm quantity-input\",value:visualizationSettings.wallHeight,onChange:event=>onWallHeightChange(event.target.valueAsNumber)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"caret-right\",className:\"cursor-pointer\",onClick:increaseWallHeight})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{bold:true,children:[LocalizeText('floor.plan.editor.tile.height'),\": \",floorHeight]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:\"nitro-slider\",min:MIN_FLOOR_HEIGHT,max:MAX_FLOOR_HEIGHT,step:1,value:floorHeight,onChange:event=>onFloorHeightChange(event),renderThumb:(_ref,state)=>{let{style,...rest}=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{backgroundColor:`#${COLORMAP[state.valueNow.toString(33)]}`,...style},...rest,children:state.valueNow});}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('floor.plan.editor.room.options')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"align-items-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-control form-control-sm\",value:visualizationSettings.thicknessWall,onChange:event=>onWallThicknessChange(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:0,children:LocalizeText('navigator.roomsettings.wall_thickness.thinnest')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:1,children:LocalizeText('navigator.roomsettings.wall_thickness.thin')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:2,children:LocalizeText('navigator.roomsettings.wall_thickness.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:3,children:LocalizeText('navigator.roomsettings.wall_thickness.thick')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-control form-control-sm\",value:visualizationSettings.thicknessFloor,onChange:event=>onFloorThicknessChange(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:0,children:LocalizeText('navigator.roomsettings.floor_thickness.thinnest')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:1,children:LocalizeText('navigator.roomsettings.floor_thickness.thin')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:2,children:LocalizeText('navigator.roomsettings.floor_thickness.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:3,children:LocalizeText('navigator.roomsettings.floor_thickness.thick')})]})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/floorplan-editor/FloorplanEditorView.tsx\nconst FloorplanEditorView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[importExportVisible,setImportExportVisible]=Object(react[\"useState\"])(false);const[originalFloorplanSettings,setOriginalFloorplanSettings]=Object(react[\"useState\"])({tilemap:'',reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1});const[visualizationSettings,setVisualizationSettings]=Object(react[\"useState\"])({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1});const saveFloorChanges=()=>{SendMessageComposer(new nitro_renderer[\"ui\" /* UpdateFloorPropertiesMessageComposer */](FloorplanEditor_FloorplanEditor.instance.getCurrentTilemapString(),FloorplanEditor_FloorplanEditor.instance.doorLocation.x,FloorplanEditor_FloorplanEditor.instance.doorLocation.y,visualizationSettings.entryPointDir,convertNumbersForSaving(visualizationSettings.thicknessWall),convertNumbersForSaving(visualizationSettings.thicknessFloor),visualizationSettings.wallHeight-1));};const revertChanges=()=>{setVisualizationSettings({wallHeight:originalFloorplanSettings.wallHeight,thicknessWall:originalFloorplanSettings.thicknessWall,thicknessFloor:originalFloorplanSettings.thicknessFloor,entryPointDir:originalFloorplanSettings.entryPointDir});FloorplanEditor_FloorplanEditor.instance.doorLocation=new nitro_renderer[\"Xe\" /* NitroPoint */](originalFloorplanSettings.entryPoint[0],originalFloorplanSettings.entryPoint[1]);FloorplanEditor_FloorplanEditor.instance.setTilemap(originalFloorplanSettings.tilemap,originalFloorplanSettings.reservedTiles);FloorplanEditor_FloorplanEditor.instance.renderTiles();};const onRoomEngineEvent=Object(react[\"useCallback\"])(event=>{setIsVisible(false);},[]);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].DISPOSED,onRoomEngineEvent);const onFloorHeightMapEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOriginalFloorplanSettings(prevValue=>{const newValue={...prevValue};newValue.tilemap=parser.model;newValue.wallHeight=parser.wallHeight+1;return newValue;});setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.wallHeight=parser.wallHeight+1;return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"Eb\" /* FloorHeightMapEvent */],onFloorHeightMapEvent);const onRoomVisualizationSettingsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOriginalFloorplanSettings(prevValue=>{const newValue={...prevValue};newValue.thicknessFloor=convertSettingToNumber(parser.thicknessFloor);newValue.thicknessWall=convertSettingToNumber(parser.thicknessWall);return newValue;});setVisualizationSettings(prevValue=>{const newValue={...prevValue};newValue.thicknessFloor=convertSettingToNumber(parser.thicknessFloor);newValue.thicknessWall=convertSettingToNumber(parser.thicknessWall);return newValue;});},[]);UseMessageEventHook(nitro_renderer[\"xh\" /* RoomVisualizationSettingsEvent */],onRoomVisualizationSettingsEvent);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},eventUrlPrefix:'floor-editor/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);Object(react[\"useEffect\"])(()=>{FloorplanEditor_FloorplanEditor.instance.initialize();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(FloorplanEditorContextProvider,{value:{originalFloorplanSettings:originalFloorplanSettings,setOriginalFloorplanSettings:setOriginalFloorplanSettings,visualizationSettings:visualizationSettings,setVisualizationSettings:setVisualizationSettings},children:[isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"floorpan-editor\",className:\"nitro-floorplan-editor\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('floor.plan.editor.title'),onCloseClick:()=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FloorplanOptionsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FloorplanCanvasView,{overflow:\"hidden\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:revertChanges,children:LocalizeText('floor.plan.editor.reload')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,children:LocalizeText('floor.plan.editor.preview')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setImportExportVisible(true),children:LocalizeText('floor.plan.editor.import.export')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:saveFloorChanges,children:LocalizeText('floor.plan.editor.save')})]})]})]})]}),importExportVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FloorplanImportExportView,{onCloseClick:()=>setImportExportVisible(false)})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-bar/FriendBarItemView.tsx\nconst FriendBarItemView=props=>{const{friend=null}=props;const[isVisible,setVisible]=Object(react[\"useState\"])(false);const{followFriend=null}=useFriends();const elementRef=Object(react[\"useRef\"])();Object(react[\"useEffect\"])(()=>{const onClick=event=>{const element=elementRef.current;if(!element)return;if(event.target!==element&&!element.contains(event.target)){setVisible(false);}};document.addEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK,onClick);return()=>document.removeEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK,onClick);},[]);if(!friend){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{ref:elementRef,className:\"btn find-friends friend-bar-item friend-bar-search\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-bar-item-head position-absolute\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-bar-text\",children:LocalizeText('friend.bar.find.title')})]});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{ref:elementRef,className:'btn find-friends-active friend-bar-item '+(isVisible?'friend-bar-item-active':''),onClick:event=>setVisible(prevValue=>!prevValue),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:`friend-bar-item-head position-absolute ${friend.id>0?'avatar':'group'}`,children:[friend.id>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{headOnly:true,figure:friend.figure,direction:2}),friend.id<=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{isGroup:true,badgeCode:friend.figure})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-bar-text\",children:friend.name}),isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex pt-3 justify-content-between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer\",onClick:event=>OpenMessengerChat(friend.id)}),friend.followingAllowed&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer\",onClick:event=>followFriend(friend)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-profile cursor-pointer\",onClick:event=>GetUserProfile(friend.id)})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-bar/FriendsBarView.tsx\nconst MAX_DISPLAY_COUNT=3;const FriendBarView=props=>{const{onlineFriends=null}=props;const[indexOffset,setIndexOffset]=Object(react[\"useState\"])(0);const elementRef=Object(react[\"useRef\"])();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{innerRef:elementRef,alignItems:\"center\",className:\"friend-bar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"friend-bar-button left\",disabled:indexOffset<=0,onClick:event=>setIndexOffset(indexOffset-1)}),Array.from(Array(MAX_DISPLAY_COUNT),(e,i)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendBarItemView,{friend:onlineFriends[indexOffset+i]||null},i)),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"friend-bar-button right\",disabled:!(onlineFriends.length>MAX_DISPLAY_COUNT&&indexOffset+MAX_DISPLAY_COUNT<=onlineFriends.length-1),onClick:event=>setIndexOffset(indexOffset+1)})]});};\n// CONCATENATED MODULE: ./src/common/card/accordion/NitroCardAccordionSetInnerView.tsx\nconst NitroCardAccordionSetInnerView=props=>{const{headerText='',isExpanded=false,gap=0,classNames=[],children=null,...rest}=props;const[isOpen,setIsOpen]=Object(react[\"useState\"])(false);const{setClosers=null,closeAll=null}=useNitroCardAccordionContext();const onClick=()=>{setIsOpen(prevValue=>!prevValue);};const close=Object(react[\"useCallback\"])(()=>setIsOpen(false),[]);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-card-accordion-set'];if(isOpen)newClassNames.push('active');if(classNames&&classNames.length)newClassNames.push(...classNames);return newClassNames;},[isOpen,classNames]);Object(react[\"useEffect\"])(()=>{setIsOpen(isExpanded);},[isExpanded]);Object(react[\"useEffect\"])(()=>{const closeFunction=close;setClosers(prevValue=>{const newClosers=[...prevValue];newClosers.push(closeFunction);return newClosers;});return()=>{setClosers(prevValue=>{const newClosers=[...prevValue];const index=newClosers.indexOf(closeFunction);if(index>=0)newClosers.splice(index,1);return newClosers;});};},[close,setClosers]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{classNames:getClassNames,gap:gap,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,justifyContent:\"between\",className:\"nitro-card-accordion-set-header px-2 py-1\",onClick:onClick,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:headerText}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:isOpen?'caret-up':'caret-down'})]}),isOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullHeight:true,overflow:\"auto\",gap:0,className:\"nitro-card-accordion-set-content p-1\",children:children})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/friends-list-group/FriendsListGroupItemView.tsx\nconst FriendsListGroupItemView=props=>{const{friend=null,selected=false,selectFriend=null}=props;const[isRelationshipOpen,setIsRelationshipOpen]=Object(react[\"useState\"])(false);const{followFriend=null,updateRelationship=null}=useFriends();const clickFollowFriend=event=>{event.stopPropagation();followFriend(friend);};const openMessengerChat=event=>{event.stopPropagation();OpenMessengerChat(friend.id);};const openRelationship=event=>{event.stopPropagation();setIsRelationshipOpen(true);};const clickUpdateRelationship=(event,type)=>{event.stopPropagation();updateRelationship(friend,type);setIsRelationshipOpen(false);};const getCurrentRelationshipName=()=>{if(!friend)return'none';switch(friend.relationshipStatus){case MessengerFriend.RELATIONSHIP_HEART:return'heart';case MessengerFriend.RELATIONSHIP_SMILE:return'smile';case MessengerFriend.RELATIONSHIP_BOBBA:return'bobba';default:return'none';}};if(!friend)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionItemView,{justifyContent:\"between\",className:`friend-tab px-2 py-1 ${selected&&'bg-primary text-white'}`,onClick:event=>selectFriend(friend.id),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{onClick:event=>event.stopPropagation(),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:friend.id})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:friend.name})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[!isRelationshipOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[friend.followingAllowed&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,onClick:clickFollowFriend,className:\"nitro-friends-spritesheet icon-follow\",title:LocalizeText('friendlist.tip.follow')}),friend.online&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-chat\",onClick:openMessengerChat,title:LocalizeText('friendlist.tip.im')}),friend.id>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:`nitro-friends-spritesheet icon-${getCurrentRelationshipName()} cursor-pointer`,onClick:openRelationship,title:LocalizeText('infostand.link.relationship')})]}),isRelationshipOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-heart\",onClick:event=>clickUpdateRelationship(event,MessengerFriend.RELATIONSHIP_HEART)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-smile\",onClick:event=>clickUpdateRelationship(event,MessengerFriend.RELATIONSHIP_SMILE)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-bobba\",onClick:event=>clickUpdateRelationship(event,MessengerFriend.RELATIONSHIP_BOBBA)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-none\",onClick:event=>clickUpdateRelationship(event,MessengerFriend.RELATIONSHIP_NONE)})]})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/friends-list-group/FriendsListGroupView.tsx\nconst FriendsListGroupView=props=>{const{list=null,selectedFriendsIds=null,selectFriend=null}=props;if(!list||!list.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:list.map((item,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListGroupItemView,{friend:item,selected:selectedFriendsIds&&selectedFriendsIds.indexOf(item.id)>=0,selectFriend:selectFriend},index))});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/friends-list-request/FriendsListRequestItemView.tsx\nconst FriendsListRequestItemView=props=>{const{request=null}=props;const{requestResponse=null}=useFriends();if(!request)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionItemView,{justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:request.id}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:request.name})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-accept cursor-pointer\",onClick:event=>requestResponse(request.id,true)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-deny cursor-pointer\",onClick:event=>requestResponse(request.id,false)})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/friends-list-request/FriendsListRequestView.tsx\nconst FriendsListRequestView=props=>{const{children=null,...rest}=props;const{requests=[],requestResponse=null}=useFriends();if(!requests.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionSetView,{...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:0,children:requests.map((request,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListRequestItemView,{request:request},index))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"center\",className:\"px-2 py-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>requestResponse(-1,false),children:LocalizeText('friendlist.requests.dismissall')})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/FriendsListRemoveConfirmationView.tsx\nconst FriendsRemoveConfirmationView=props=>{const{selectedFriendsIds=null,removeFriendsText=null,removeSelectedFriends=null,onCloseClick=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-friends-remove-confirmation\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('friendlist.removefriendconfirm.title'),onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:removeFriendsText}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",disabled:selectedFriendsIds.length===0,onClick:removeSelectedFriends,children:LocalizeText('generic.ok')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:onCloseClick,children:LocalizeText('generic.cancel')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/FriendsListRoomInviteView.tsx\nconst FriendsRoomInviteView=props=>{const{selectedFriendsIds=null,onCloseClick=null,sendRoomInvite=null}=props;const[roomInviteMessage,setRoomInviteMessage]=Object(react[\"useState\"])('');return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-friends-room-invite\",uniqueKey:\"nitro-friends-room-invite\",theme:\"friendlist\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('friendlist.invite.title'),onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[LocalizeText('friendlist.invite.summary',['count'],[selectedFriendsIds.length.toString()]),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control\",value:roomInviteMessage,onChange:event=>setRoomInviteMessage(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"bg-muted rounded p-1\",children:LocalizeText('friendlist.invite.note')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",disabled:roomInviteMessage.length===0||selectedFriendsIds.length===0,onClick:()=>sendRoomInvite(roomInviteMessage),children:LocalizeText('friendlist.invite.send')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:onCloseClick,children:LocalizeText('generic.cancel')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/FriendsListSearchView.tsx\nconst FriendsSearchView=props=>{const{...rest}=props;const[searchValue,setSearchValue]=Object(react[\"useState\"])('');const[friendResults,setFriendResults]=Object(react[\"useState\"])(null);const[otherResults,setOtherResults]=Object(react[\"useState\"])(null);const{canRequestFriend=null,requestFriend=null}=useFriends();const onHabboSearchResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setFriendResults(parser.friends);setOtherResults(parser.others);},[]);UseMessageEventHook(nitro_renderer[\"Id\" /* HabboSearchResultEvent */],onHabboSearchResultEvent);Object(react[\"useEffect\"])(()=>{if(!searchValue||!searchValue.length)return;const timeout=setTimeout(()=>{if(!searchValue||!searchValue.length)return;SendMessageComposer(new nitro_renderer[\"Hd\" /* HabboSearchComposer */](searchValue));},500);return()=>clearTimeout(timeout);},[searchValue]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardAccordionSetView,{...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"w-100 friend-search\",placeholder:LocalizeText('generic.search'),value:searchValue,maxLength:50,onChange:event=>setSearchValue(event.target.value)})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[friendResults&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[friendResults.length===0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.nofriendsfound')}),friendResults.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.friendscaption',['cnt'],[friendResults.length.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:0,children:friendResults.map(result=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionItemView,{justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:result.avatarId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:result.avatarName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",gap:1,children:result.isAvatarOnline&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-chat cursor-pointer\",onClick:event=>OpenMessengerChat(result.avatarId),title:LocalizeText('friendlist.tip.im')})})]},result.avatarId);})})]})]}),otherResults&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[otherResults.length===0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.noothersfound')}),otherResults.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"px-2 py-1\",children:LocalizeText('friendlist.search.otherscaption',['cnt'],[otherResults.length.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"mx-2 mt-0 mb-1 text-black\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:0,children:otherResults.map(result=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionItemView,{justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:result.avatarId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:result.avatarName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",gap:1,children:canRequestFriend(result.avatarId)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-add cursor-pointer\",onClick:event=>requestFriend(result.avatarId,result.avatarName),title:LocalizeText('friendlist.tip.addfriend')})})]},result.avatarId);})})]})]})]})]})});};\n// CONCATENATED MODULE: ./src/components/friends/views/friends-list/FriendsListView.tsx\nconst FriendsListView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[selectedFriendsIds,setSelectedFriendsIds]=Object(react[\"useState\"])([]);const[showRoomInvite,setShowRoomInvite]=Object(react[\"useState\"])(false);const[showRemoveFriendsConfirmation,setShowRemoveFriendsConfirmation]=Object(react[\"useState\"])(false);const{onlineFriends=[],offlineFriends=[],requests=[],requestFriend=null}=useFriends();const removeFriendsText=Object(react[\"useMemo\"])(()=>{if(!selectedFriendsIds||!selectedFriendsIds.length)return'';const userNames=[];for(const userId of selectedFriendsIds){let existingFriend=onlineFriends.find(f=>f.id===userId);if(!existingFriend)existingFriend=offlineFriends.find(f=>f.id===userId);if(!existingFriend)continue;userNames.push(existingFriend.name);}return LocalizeText('friendlist.removefriendconfirm.userlist',['user_names'],[userNames.join(', ')]);},[offlineFriends,onlineFriends,selectedFriendsIds]);const selectFriend=Object(react[\"useCallback\"])(userId=>{if(userId<0)return;setSelectedFriendsIds(prevValue=>{const newValue=[...prevValue];const existingUserIdIndex=newValue.indexOf(userId);if(existingUserIdIndex>-1){newValue.splice(existingUserIdIndex,1);}else{newValue.push(userId);}return newValue;});},[setSelectedFriendsIds]);const sendRoomInvite=message=>{if(selectedFriendsIds.length===0||!message||message.length===0)return;SendMessageComposer(new nitro_renderer[\"Lh\" /* SendRoomInviteComposer */](message,selectedFriendsIds));setShowRoomInvite(false);};const removeSelectedFriends=()=>{if(selectedFriendsIds.length===0)return;setSelectedFriendsIds(prevValue=>{SendMessageComposer(new nitro_renderer[\"Pf\" /* RemoveFriendComposer */](...prevValue));return[];});setShowRemoveFriendsConfirmation(false);};Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;case'request':if(parts.length<4)return;requestFriend(parseInt(parts[2]),parts[3]);}},eventUrlPrefix:'friends/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[requestFriend]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-friends\",uniqueKey:\"nitro-friends\",theme:\"friendlist\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('friendlist.friends'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{overflow:\"hidden\",gap:1,className:\"text-black p-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionView,{fullHeight:true,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardAccordionSetView,{className:\"friend-headers\",headerText:LocalizeText('friendlist.friends'),isExpanded:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardAccordionSetInnerView,{headerText:LocalizeText('friendlist.friends')+` (${onlineFriends.length})`,isExpanded:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListGroupView,{list:onlineFriends,selectedFriendsIds:selectedFriendsIds,selectFriend:selectFriend})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardAccordionSetInnerView,{headerText:LocalizeText('friendlist.friends.offlinecaption')+` (${offlineFriends.length})`,isExpanded:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListGroupView,{list:offlineFriends,selectedFriendsIds:selectedFriendsIds,selectFriend:selectFriend})}),selectedFriendsIds&&selectedFriendsIds.length===0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"friend-active-tab p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-follow-icon\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-profile-icon\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-delete-icon\"})]}),selectedFriendsIds&&selectedFriendsIds.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"friend-active-tab p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-follow-icon active\",onClick:()=>setShowRoomInvite(true)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-profile-icon active\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friend-delete-icon active\",onClick:event=>setShowRemoveFriendsConfirmation(true)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListRequestView,{className:\"friend-headers\",headerText:LocalizeText('friendlist.tab.friendrequests')+` (${requests.length})`,isExpanded:false}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsSearchView,{className:\"search-headers\",headerText:LocalizeText('people.search.title')})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"friendlist-bottom p-1\"})]}),showRoomInvite&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsRoomInviteView,{selectedFriendsIds:selectedFriendsIds,onCloseClick:()=>setShowRoomInvite(false),sendRoomInvite:sendRoomInvite}),showRemoveFriendsConfirmation&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsRemoveConfirmationView,{selectedFriendsIds:selectedFriendsIds,removeFriendsText:removeFriendsText,onCloseClick:()=>setShowRemoveFriendsConfirmation(false),removeSelectedFriends:removeSelectedFriends})]});};\n// CONCATENATED MODULE: ./src/common/layout/LayoutMessengerGrid.tsx\nconst LayoutMessengerGrid=props=>{const{itemImage=undefined,itemColor=undefined,itemActive=false,itemCount=1,itemCountMinimum=1,itemUniqueSoldout=false,itemUniqueNumber=-2,itemUnseen=false,itemHighlight=false,disabled=false,center=true,column=true,style={},classNames=[],position='relative',overflow='hidden',children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['layout-grid-item-messenger'];if(itemActive)newClassNames.push('active');if(itemUniqueSoldout||itemUniqueNumber>0)newClassNames.push('unique-item');if(itemUniqueSoldout)newClassNames.push('sold-out');if(itemUnseen)newClassNames.push('unseen');if(itemHighlight)newClassNames.push('has-highlight');if(disabled)newClassNames.push('disabled');if(itemImage===null)newClassNames.push('icon','loading-icon');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[itemActive,itemUniqueSoldout,itemUniqueNumber,itemUnseen,itemHighlight,disabled,itemImage,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={...style};if(itemImage)newStyle.backgroundImage=`url(${itemImage})`;if(itemColor)newStyle.backgroundColor=itemColor;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,itemImage,itemColor]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:center,pointer:true,position:position,overflow:overflow,column:column,classNames:getClassNames,style:getStyle,...rest,children:[itemCount>itemCountMinimum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:itemCount}),itemUniqueNumber>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,className:\"unique-bg-override\",style:{backgroundImage:`url(${itemImage})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:itemUniqueNumber})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/friends/views/messenger/messenger-thread/FriendsMessengerThreadGroup.tsx\nconst FriendsMessengerThreadGroup=props=>{const{thread=null,group=null}=props;const groupChatData=Object(react[\"useMemo\"])(()=>group.type===GroupType.GROUP_CHAT&&GetGroupChatData(group.chats[0].extraData),[group]);const isOwnChat=Object(react[\"useMemo\"])(()=>{if(!thread||!group)return false;if(group.type===GroupType.PRIVATE_CHAT&&group.userId===GetSessionDataManager().userId)return true;if(groupChatData&&group.chats.length&&groupChatData.userId===GetSessionDataManager().userId)return true;return false;},[thread,group,groupChatData]);if(!thread||!group)return null;if(!group.userId){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:group.chats.map((chat,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:true,gap:2,justifyContent:\"start\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"w-100 text-break\",children:[chat.type===MessengerThreadChat.SECURITY_NOTIFICATION&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,alignItems:\"center\",className:\"thread-message mb-2 px-2 py-1 \",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friends-spritesheet icon-warning flex-shrink-0 px-3\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{children:chat.message})]}),chat.type===MessengerThreadChat.ROOM_INVITE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,alignItems:\"center\",className:\"bg-light rounded mb-2 px-2 py-1 small text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"messenger-notification-icon flex-shrink-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{children:[LocalizeText('messenger.invitation')+' ',chat.message]})]})]})},index);})});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,justifyContent:isOwnChat?'end':'start',gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{shrink:true,className:\"message-avatar\",children:[group.type===GroupType.PRIVATE_CHAT&&!isOwnChat&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:thread.participant.figure,direction:2}),groupChatData&&!isOwnChat&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:groupChatData.figure,direction:2})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:'message-bubble text-black mt-2 py-1 px-2 messages-group-'+(isOwnChat?'right':'left'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"fw-bold username\",children:[isOwnChat&&GetSessionDataManager().userName,!isOwnChat&&(groupChatData?groupChatData.username:thread.participant.name)]}),group.chats.map((chat,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"text-break\",children:chat.message},index))]}),isOwnChat&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{shrink:true,className:\"message-avatar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:GetSessionDataManager().figure,direction:4})})]});};\n// CONCATENATED MODULE: ./src/components/friends/views/messenger/messenger-thread/FriendsMessengerThreadView.tsx\nconst FriendsMessengerThreadView=props=>{const{thread=null}=props;thread.setRead();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:thread.groups.length>0&&thread.groups.map((group,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsMessengerThreadGroup,{thread:thread,group:group},index))});};\n// CONCATENATED MODULE: ./src/components/friends/views/messenger/FriendsMessengerView.tsx\nconst FriendsMessengerView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[lastThreadId,setLastThreadId]=Object(react[\"useState\"])(-1);const[messageText,setMessageText]=Object(react[\"useState\"])('');const{visibleThreads=[],activeThread=null,getMessageThread=null,sendMessage=null,setActiveThreadId=null,closeThread=null}=useMessenger();const messagesBox=Object(react[\"useRef\"])();const followFriend=()=>activeThread&&activeThread.participant&&SendMessageComposer(new nitro_renderer[\"Fb\" /* FollowFriendMessageComposer */](activeThread.participant.id));const openProfile=()=>activeThread&&activeThread.participant&&GetUserProfile(activeThread.participant.id);const send=()=>{if(!activeThread||!messageText.length)return;sendMessage(activeThread,messageText);setMessageText('');};const onKeyDown=event=>{if(event.key!=='Enter')return;send();};Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length===2){if(parts[1]==='open'){setIsVisible(true);return;}else{const thread=getMessageThread(parseInt(parts[1]));if(!thread)return;setActiveThreadId(thread.threadId);setIsVisible(true);}}},eventUrlPrefix:'friends-messenger/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[getMessageThread,setActiveThreadId]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!activeThread)return;messagesBox.current.scrollTop=messagesBox.current.scrollHeight;},[isVisible,activeThread]);Object(react[\"useEffect\"])(()=>{if(isVisible&&!activeThread){if(lastThreadId>0){setActiveThreadId(lastThreadId);}else{if(visibleThreads.length>0)setActiveThreadId(visibleThreads[0].threadId);}return;}if(!isVisible&&activeThread){setLastThreadId(activeThread.threadId);setActiveThreadId(-1);}},[isVisible,activeThread,lastThreadId,visibleThreads,setActiveThreadId]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-friends-messenger\",uniqueKey:\"nitro-friends-messenger\",theme:\"messenger\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('messenger.window.title',['OPEN_CHAT_COUNT'],[visibleThreads.length.toString()]),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,size:4,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex h-100 overflow-auto gap-2\",children:visibleThreads&&visibleThreads.length>0&&visibleThreads.map(thread=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutMessengerGrid,{itemActive:activeThread===thread,onClick:event=>setActiveThreadId(thread.threadId),children:[thread.unread&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:thread.unreadCount}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:true,alignItems:\"center\",gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",className:\"friend-head px-1\",children:[thread.participant.id>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:thread.participant.figure,headOnly:true,direction:2}),thread.participant.id<=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{isGroup:true,badgeCode:thread.participant.figure})]})})]},thread.threadId);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:8,overflow:\"hidden\",className:\"w-100\",children:activeThread&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"messenger-line\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"nitro-messenger-header-text fw-bold\",children:LocalizeText('messenger.window.separator',['FRIEND_NAME'],[activeThread.participant.name])})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{className:\"gap-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"follow\",onClick:followFriend}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"profile\",onClick:openProfile})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"messenger-button fw-bold px-3\",onClick:openProfile,children:LocalizeText('messenger.window.button.report')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"clear\",onClick:event=>closeThread(activeThread.threadId)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fit:true,className:\"chat-messages\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{innerRef:messagesBox,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsMessengerThreadView,{thread:activeThread})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"chat-input-form form-control-sm\",maxLength:255,placeholder:LocalizeText('messenger.window.input.default',['FRIEND_NAME'],[activeThread.participant.name]),value:messageText,onChange:event=>setMessageText(event.target.value),onKeyDown:onKeyDown}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"messenger-button chat-submit fw-bold px-3\",onClick:send,children:LocalizeText('widgets.chatinput.say')})]})]})})]})]});};\n// CONCATENATED MODULE: ./src/components/friends/FriendsView.tsx\nconst FriendsView=props=>{const{settings=null,onlineFriends=[]}=useFriends();// const onRoomEngineObjectEvent = useCallback((event: RoomEngineObjectEvent) =>\n// {\n//     const roomSession = GetRoomSession();\n//     if(!roomSession) return;\n//     if(event.category !== RoomObjectCategory.UNIT) return;\n//     const userData = roomSession.userDataManager.getUserDataByIndex(event.objectId);\n//     if(!userData || (userData.type !== RoomObjectUserType.getTypeNumber(RoomObjectUserType.USER))) return;\n//     const friend = getFriend(userData.webID);\n//     if(!friend) return;\n//     DispatchUiEvent(new FriendEnteredRoomEvent(userData.roomIndex, RoomObjectCategory.UNIT, userData.webID, userData.name, userData.type));\n// }, [ getFriend ]);\n// UseRoomEngineEvent(RoomEngineObjectEvent.ADDED, onRoomEngineObjectEvent);\nif(!settings)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(react_dom[\"createPortal\"])(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendBarView,{onlineFriends:onlineFriends}),document.getElementById('toolbar-friend-bar-container')),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsListView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsMessengerView,{})]});};\n// CONCATENATED MODULE: ./src/components/groups/common/CompareId.ts\nconst CompareId=(a,b)=>{if(a.id<b.id)return-1;if(a.id>b.id)return 1;return 0;};\n// CONCATENATED MODULE: ./src/components/groups/GroupsContext.tsx\nconst GroupsContext=/*#__PURE__*/Object(react[\"createContext\"])({groupCustomize:null,setGroupCustomize:null});const GroupsContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupsContext.Provider,{value:props.value,children:props.children});};const useGroupsContext=()=>Object(react[\"useContext\"])(GroupsContext);\n// CONCATENATED MODULE: ./src/components/groups/common/GroupBadgePart.ts\nclass GroupBadgePart{constructor(type,key,color,position){this.type=void 0;this.key=void 0;this.color=void 0;this.position=void 0;this.type=type;this.key=key?key:0;this.color=color?color:0;this.position=position?position:4;}get code(){if(this.key===0)return null;return GroupBadgePart.getCode(this.type,this.key,this.color,this.position);}static getCode(type,key,color,position){return type+(key<10?'0':'')+key+(color<10?'0':'')+color+position;}}GroupBadgePart.BASE='b';GroupBadgePart.SYMBOL='s';\n// CONCATENATED MODULE: ./src/components/groups/views/GroupBadgeCreatorView.tsx\nconst POSITIONS=[0,1,2,3,4,5,6,7,8];const GroupBadgeCreatorView=props=>{const{badgeParts=[],setBadgeParts=null}=props;const[selectedIndex,setSelectedIndex]=Object(react[\"useState\"])(-1);const{groupCustomize=null}=useGroupsContext();const setPartProperty=(partIndex,property,value)=>{const newBadgeParts=[...badgeParts];newBadgeParts[partIndex][property]=value;setBadgeParts(newBadgeParts);if(property==='key')setSelectedIndex(-1);};if(!badgeParts||!badgeParts.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[selectedIndex<0&&badgeParts&&badgeParts.length>0&&badgeParts.map((part,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:2,className:\"bg-muted rounded px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,center:true,className:\"bg-muted rounded p-1\",onClick:event=>setSelectedIndex(index),children:[badgeParts[index].code&&badgeParts[index].code.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badgeParts[index].code,isGroup:true}),(!badgeParts[index].code||!badgeParts[index].code.length)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"badge-image group-badge\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"plus\"})})]}),part.type!==GroupBadgePart.BASE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{gap:1,columnCount:3,children:POSITIONS.map((position,posIndex)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:`group-badge-position-swatch ${badgeParts[index].position===position?'active':''}`,onClick:event=>setPartProperty(index,'position',position)},posIndex);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{gap:1,columnCount:8,children:groupCustomize.badgePartColors.length>0&&groupCustomize.badgePartColors.map((item,colorIndex)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:`group-badge-color-swatch ${badgeParts[index].color===colorIndex+1?'active':''}`,style:{backgroundColor:'#'+item.color},onClick:event=>setPartProperty(index,'color',colorIndex+1)},colorIndex);})})]},index);}),selectedIndex>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,columnCount:5,children:[badgeParts[selectedIndex].type===GroupBadgePart.SYMBOL&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{pointer:true,center:true,className:\"bg-muted rounded p-1\",onClick:event=>setPartProperty(selectedIndex,'key',0),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"badge-image group-badge\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\"})})}),(badgeParts[selectedIndex].type===GroupBadgePart.BASE?groupCustomize.badgeBases:groupCustomize.badgeSymbols).map((item,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{pointer:true,center:true,className:\"bg-muted rounded p-1\",onClick:event=>setPartProperty(selectedIndex,'key',item.id),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:GroupBadgePart.getCode(badgeParts[selectedIndex].type,item.id,badgeParts[selectedIndex].color,4),isGroup:true})},index);})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/tabs/GroupTabBadgeView.tsx\nconst GroupTabBadgeView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null,skipDefault=null}=props;const[badgeParts,setBadgeParts]=Object(react[\"useState\"])(null);const{groupCustomize=null}=useGroupsContext();const getModifiedBadgeCode=()=>{if(!badgeParts||!badgeParts.length)return'';let badgeCode='';badgeParts.forEach(part=>part.code&&(badgeCode+=part.code));return badgeCode;};const saveBadge=Object(react[\"useCallback\"])(()=>{if(!groupData||!badgeParts||!badgeParts.length)return false;if(groupData.groupBadgeParts===badgeParts)return true;if(groupData.groupId<=0){setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupBadgeParts=badgeParts;return newValue;});return true;}const badge=[];badgeParts.forEach(part=>{if(!part.code)return;badge.push(part.key);badge.push(part.color);badge.push(part.position);});SendMessageComposer(new nitro_renderer[\"dd\" /* GroupSaveBadgeComposer */](groupData.groupId,badge));return true;},[groupData,badgeParts,setGroupData]);Object(react[\"useEffect\"])(()=>{if(groupData.groupBadgeParts)return;const badgeParts=[new GroupBadgePart(GroupBadgePart.BASE,groupCustomize.badgeBases[0].id,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id),new GroupBadgePart(GroupBadgePart.SYMBOL,0,groupCustomize.badgePartColors[0].id)];setGroupData(prevValue=>{const groupBadgeParts=badgeParts;return{...prevValue,groupBadgeParts};});},[groupData.groupBadgeParts,groupCustomize,setGroupData]);Object(react[\"useEffect\"])(()=>{if(groupData.groupId<=0){setBadgeParts(groupData.groupBadgeParts?[...groupData.groupBadgeParts]:null);return;}setBadgeParts(groupData.groupBadgeParts);},[groupData]);Object(react[\"useEffect\"])(()=>{setCloseAction({action:saveBadge});return()=>setCloseAction(null);},[setCloseAction,saveBadge]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"bg-muted rounded p-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:getModifiedBadgeCode(),isGroup:true})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:10,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupBadgeCreatorView,{badgeParts:badgeParts,setBadgeParts:setBadgeParts})})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/tabs/GroupTabColorsView.tsx\nconst GroupTabColorsView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null}=props;const[colors,setColors]=Object(react[\"useState\"])(null);const{groupCustomize=null}=useGroupsContext();const getGroupColor=colorIndex=>{if(colorIndex===0)return groupCustomize.groupColorsA.find(color=>color.id===colors[colorIndex]).color;return groupCustomize.groupColorsB.find(color=>color.id===colors[colorIndex]).color;};const selectColor=(colorIndex,colorId)=>{setColors(prevValue=>{const newColors=[...prevValue];newColors[colorIndex]=colorId;return newColors;});};const saveColors=Object(react[\"useCallback\"])(()=>{if(!groupData||!colors||!colors.length)return false;if(groupData.groupColors===colors)return true;if(groupData.groupId<=0){setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupColors=[...colors];return newValue;});return true;}SendMessageComposer(new nitro_renderer[\"ed\" /* GroupSaveColorsComposer */](groupData.groupId,colors[0],colors[1]));return true;},[groupData,colors,setGroupData]);Object(react[\"useEffect\"])(()=>{if(!groupCustomize.groupColorsA||!groupCustomize.groupColorsB||groupData.groupColors)return;const groupColors=[groupCustomize.groupColorsA[0].id,groupCustomize.groupColorsB[0].id];setGroupData(prevValue=>{return{...prevValue,groupColors};});},[groupCustomize,groupData.groupColors,setGroupData]);Object(react[\"useEffect\"])(()=>{if(groupData.groupId<=0){setColors(groupData.groupColors?[...groupData.groupColors]:null);return;}setColors(groupData.groupColors);},[groupData]);Object(react[\"useEffect\"])(()=>{setCloseAction({action:saveColors});return()=>setCloseAction(null);},[setCloseAction,saveColors]);if(!colors)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:2,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('group.edit.color.guild.color')}),groupData.groupColors&&groupData.groupColors.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(0)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(1)}})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('group.edit.color.primary.color')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:groupData.groupColors&&groupCustomize.groupColorsA&&groupCustomize.groupColorsA.map((item,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'group-badge-color-swatch cursor-pointer'+classnames_default()({' active':groupData.groupColors[0]===item.id}),style:{backgroundColor:'#'+item.color},onClick:()=>selectColor(0,item.id)},index);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('group.edit.color.secondary.color')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:groupData.groupColors&&groupCustomize.groupColorsB&&groupCustomize.groupColorsB.map((item,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'group-badge-color-swatch cursor-pointer'+classnames_default()({' active':groupData.groupColors[1]===item.id}),style:{backgroundColor:'#'+item.color},onClick:()=>selectColor(1,item.id)},index);})})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/tabs/GroupTabCreatorConfirmationView.tsx\nconst GroupTabCreatorConfirmationView=props=>{const{groupData=null,setGroupData=null,purchaseCost=0}=props;const{groupCustomize=null}=useGroupsContext();const getCompleteBadgeCode=()=>{if(!groupData||!groupData.groupBadgeParts||!groupData.groupBadgeParts.length)return'';let badgeCode='';groupData.groupBadgeParts.forEach(part=>part.code&&(badgeCode+=part.code));return badgeCode;};const getGroupColor=colorIndex=>{if(colorIndex===0)return groupCustomize.groupColorsA.find(c=>c.id===groupData.groupColors[colorIndex]).color;return groupCustomize.groupColorsB.find(c=>c.id===groupData.groupColors[colorIndex]).color;};if(!groupData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:3,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,className:\"bg-muted rounded p-1\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,center:true,children:LocalizeText('group.create.confirm.guildbadge')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:getCompleteBadgeCode(),isGroup:true})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,className:\"bg-muted rounded p-1\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,center:true,children:LocalizeText('group.edit.color.guild.color')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{overflow:\"hidden\",className:\"rounded border\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(0)}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"group-color-swatch\",style:{backgroundColor:'#'+getGroupColor(1)}})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:9,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:groupData.groupName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:groupData.groupDescription})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{overflow:\"auto\",children:LocalizeText('group.create.confirm.info')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,variant:\"white\",className:\"bg-primary rounded p-1\",children:LocalizeText('group.create.confirm.buyinfo',['amount'],[purchaseCost.toString()])})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/tabs/GroupTabIdentityView.tsx\nconst GroupTabIdentityView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null,close=null,isCreator=false,availableRooms=[]}=props;const[groupName,setGroupName]=Object(react[\"useState\"])('');const[groupDescription,setGroupDescription]=Object(react[\"useState\"])('');const[groupHomeroomId,setGroupHomeroomId]=Object(react[\"useState\"])(-1);const deleteGroup=()=>{if(!groupData||groupData.groupId<=0)return;NotificationUtilities_NotificationUtilities.confirm(LocalizeText('group.deleteconfirm.desc'),()=>{SendMessageComposer(new nitro_renderer[\"Qc\" /* GroupDeleteComposer */](groupData.groupId));if(close)close();},null,null,null,LocalizeText('group.deleteconfirm.title'));};const saveIdentity=Object(react[\"useCallback\"])(()=>{if(!groupData||!groupName||!groupName.length)return false;if(groupName===groupData.groupName&&groupDescription===groupData.groupDescription)return true;if(groupData.groupId<=0){if(groupHomeroomId<=0)return false;setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupName=groupName;newValue.groupDescription=groupDescription;newValue.groupHomeroomId=groupHomeroomId;return newValue;});return true;}SendMessageComposer(new nitro_renderer[\"fd\" /* GroupSaveInformationComposer */](groupData.groupId,groupName,groupDescription||''));return true;},[groupData,groupName,groupDescription,groupHomeroomId,setGroupData]);Object(react[\"useEffect\"])(()=>{setGroupName(groupData.groupName||'');setGroupDescription(groupData.groupDescription||'');setGroupHomeroomId(groupData.groupHomeroomId);},[groupData]);Object(react[\"useEffect\"])(()=>{setCloseAction({action:saveIdentity});return()=>setCloseAction(null);},[setCloseAction,saveIdentity]);if(!groupData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:groupName,maxLength:29,onChange:event=>setGroupName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.desc')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control form-control-sm\",value:groupDescription,maxLength:254,onChange:event=>setGroupDescription(event.target.value)})]}),isCreator&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"col-3\",children:LocalizeText('group.edit.base')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:groupHomeroomId,onChange:event=>setGroupHomeroomId(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:-1,disabled:true,children:LocalizeText('group.edit.base.select.room')}),availableRooms&&availableRooms.map((room,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:room.id,children:room.name},index))]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"col-3\",children:\"\\xA0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('group.edit.base.warning')})]})]})]}),!isCreator&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:deleteGroup,children:LocalizeText('group.delete')}),isCreator&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,center:true,fullWidth:true,pointer:true,onClick:event=>CreateLinkEvent('navigator/create'),children:LocalizeText('group.createroom')})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/GroupCreatorView.tsx\nconst GroupCreatorView_TABS=[1,2,3,4];const GroupCreatorView=props=>{const{onClose=null}=props;const[currentTab,setCurrentTab]=Object(react[\"useState\"])(1);const[closeAction,setCloseAction]=Object(react[\"useState\"])(null);const[groupData,setGroupData]=Object(react[\"useState\"])(null);const[availableRooms,setAvailableRooms]=Object(react[\"useState\"])(null);const[purchaseCost,setPurchaseCost]=Object(react[\"useState\"])(0);const close=()=>{setCloseAction(null);setGroupData(null);if(onClose)onClose();};const buyGroup=()=>{if(!groupData)return;const badge=[];groupData.groupBadgeParts.forEach(part=>{if(part.code){badge.push(part.key);badge.push(part.color);badge.push(part.position);}});SendMessageComposer(new nitro_renderer[\"Lc\" /* GroupBuyComposer */](groupData.groupName,groupData.groupDescription,groupData.groupHomeroomId,groupData.groupColors[0],groupData.groupColors[1],badge));};const previousStep=()=>{if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===1){onClose();return;}setCurrentTab(value=>value-1);};const nextStep=()=>{if(closeAction&&closeAction.action){if(!closeAction.action())return;}if(currentTab===4){buyGroup();return;}setCurrentTab(value=>value===4?value:value+1);};const onGroupBuyDataEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const rooms=[];parser.availableRooms.forEach((name,id)=>rooms.push({id,name}));setAvailableRooms(rooms);setPurchaseCost(parser.groupCost);},[]);UseMessageEventHook(nitro_renderer[\"Nc\" /* GroupBuyDataEvent */],onGroupBuyDataEvent);Object(react[\"useEffect\"])(()=>{setCurrentTab(1);setGroupData({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:true,groupColors:null,groupBadgeParts:null});SendMessageComposer(new nitro_renderer[\"Mc\" /* GroupBuyDataComposer */]());},[setGroupData]);if(!groupData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-group-creator\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('group.create.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"creator-tabs\",children:GroupCreatorView_TABS.map((tab,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:`tab tab-${tab===1?'blue-flat':tab===4?'yellow':'blue-arrow'} ${currentTab===tab?'active':''}`,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:LocalizeText(`group.create.steplabel.${tab}`)})},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:`nitro-group-tab-image tab-${currentTab}`}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:4,children:LocalizeText(`group.create.stepcaption.${currentTab}`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`group.create.stepdesc.${currentTab}`)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:null,isCreator:true,availableRooms:availableRooms}),currentTab===2&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===3&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===4&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabCreatorConfirmationView,{groupData:groupData,setGroupData:setGroupData,purchaseCost:purchaseCost})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"link\",className:\"text-black\",onClick:previousStep,children:LocalizeText(currentTab===1?'generic.cancel':'group.create.previousstep')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:currentTab===4&&!HasHabboClub(),variant:currentTab===4?HasHabboClub()?'success':'danger':'primary',onClick:nextStep,children:LocalizeText(currentTab===4?HasHabboClub()?'group.create.confirm.buy':'group.create.confirm.viprequired':'group.create.nextstep')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/common/GroupMembershipType.ts\nclass GroupMembershipType{}GroupMembershipType.NOT_MEMBER=0;GroupMembershipType.MEMBER=1;GroupMembershipType.REQUEST_PENDING=2;\n// CONCATENATED MODULE: ./src/components/groups/common/GroupType.ts\nclass GroupType_GroupType{}GroupType_GroupType.REGULAR=0;GroupType_GroupType.EXCLUSIVE=1;GroupType_GroupType.PRIVATE=2;\n// CONCATENATED MODULE: ./src/components/groups/views/GroupInformationView.tsx\nconst STATES=['regular','exclusive','private'];const GroupInformationView=props=>{const{groupInformation=null,onClose=null,overflow='hidden',...rest}=props;const isRealOwner=groupInformation&&groupInformation.ownerName===GetSessionDataManager().userName;const joinGroup=()=>groupInformation&&TryJoinGroup(groupInformation.id);const leaveGroup=()=>{NotificationUtilities_NotificationUtilities.confirm(LocalizeText('group.leaveconfirm.desc'),()=>{SendMessageComposer(new nitro_renderer[\"cd\" /* GroupRemoveMemberComposer */](groupInformation.id,GetSessionDataManager().userId));if(onClose)onClose();},null);};const getRoleIcon=()=>{if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER||groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return null;if(isRealOwner)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-group-owner\",title:LocalizeText('group.youareowner')});if(groupInformation.isAdmin)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-group-admin\",title:LocalizeText('group.youareadmin')});return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-group-member\",title:LocalizeText('group.youaremember')});};const getButtonText=()=>{if(isRealOwner)return'group.youareowner';if(groupInformation.type===GroupType_GroupType.PRIVATE)return'';if(groupInformation.membershipType===GroupMembershipType.MEMBER)return'group.leave';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType_GroupType.REGULAR)return'group.join';if(groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return'group.membershippending';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType_GroupType.EXCLUSIVE)return'group.requestmembership';};const handleButtonClick=()=>{if(groupInformation.type===GroupType_GroupType.PRIVATE&&groupInformation.membershipType===GroupMembershipType.NOT_MEMBER)return;if(groupInformation.membershipType===GroupMembershipType.MEMBER){leaveGroup();return;}joinGroup();};const handleAction=Object(react[\"useCallback\"])(action=>{switch(action){case'members':GetGroupMembers(groupInformation.id);break;case'members_pending':GetGroupMembers(groupInformation.id,2);break;case'manage':GetGroupManager(groupInformation.id);break;case'homeroom':TryVisitRoom(groupInformation.roomId);break;case'furniture':CreateLinkEvent('catalog/open/'+CatalogPageName.GUILD_CUSTOM_FURNI);break;case'popular_groups':CreateLinkEvent('navigator/search/groups');break;}},[groupInformation]);if(!groupInformation)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{className:\"profile-grey-bg-border p-2\",overflow:overflow,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,size:3,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",overflow:\"hidden\",className:\"group-badge\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:groupInformation.badge,isGroup:true,scale:2})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('members'),children:LocalizeText('group.membercount',['totalMembers'],[groupInformation.membersCount.toString()])}),groupInformation.pendingRequestsCount>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('members_pending'),children:LocalizeText('group.pendingmembercount',['amount'],[groupInformation.pendingRequestsCount.toString()])}),groupInformation.isOwner&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('manage'),children:LocalizeText('group.manage')})]}),getRoleIcon()]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:9,justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:groupInformation.title}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'icon icon-group-type-'+groupInformation.type,title:LocalizeText(`group.edit.settings.type.${STATES[groupInformation.type]}.help`)}),groupInformation.canMembersDecorate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-group-decorate\",title:LocalizeText('group.memberscandecorate')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('group.created',['date','owner'],[groupInformation.createdAt,groupInformation.ownerName])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,textBreak:true,overflow:\"auto\",className:\"group-description\",children:groupInformation.description})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('homeroom'),children:LocalizeText('group.linktobase')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('furniture'),children:LocalizeText('group.buyfurni')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:()=>handleAction('popular_groups'),children:LocalizeText('group.showgroups')})]}),groupInformation.type!==GroupType_GroupType.PRIVATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING||isRealOwner,onClick:handleButtonClick,children:LocalizeText(getButtonText())})]})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/GroupInformationStandaloneView.tsx\nconst GroupInformationStandaloneView=props=>{const[groupInformation,setGroupInformation]=Object(react[\"useState\"])(null);const onGroupInformationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(groupInformation&&groupInformation.id===parser.id||parser.flag)setGroupInformation(parser);},[groupInformation]);UseMessageEventHook(nitro_renderer[\"Uc\" /* GroupInformationEvent */],onGroupInformationEvent);if(!groupInformation)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-group-information-standalone\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('group.window.title'),onCloseClick:event=>setGroupInformation(null)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupInformationView,{groupInformation:groupInformation,onClose:()=>setGroupInformation(null)})})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/tabs/GroupTabSettingsView.tsx\nconst GroupTabSettingsView_STATES=['regular','exclusive','private'];const GroupTabSettingsView=props=>{const{groupData=null,setGroupData=null,setCloseAction=null}=props;const[groupState,setGroupState]=Object(react[\"useState\"])(groupData.groupState);const[groupDecorate,setGroupDecorate]=Object(react[\"useState\"])(groupData.groupCanMembersDecorate);const saveSettings=Object(react[\"useCallback\"])(()=>{if(!groupData)return false;if(groupState===groupData.groupState&&groupDecorate===groupData.groupCanMembersDecorate)return true;if(groupData.groupId<=0){setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupState=groupState;newValue.groupCanMembersDecorate=groupDecorate;return newValue;});return true;}SendMessageComposer(new nitro_renderer[\"gd\" /* GroupSavePreferencesComposer */](groupData.groupId,groupState,groupDecorate?0:1));return true;},[groupData,groupState,groupDecorate,setGroupData]);Object(react[\"useEffect\"])(()=>{setGroupState(groupData.groupState);setGroupDecorate(groupData.groupCanMembersDecorate);},[groupData]);Object(react[\"useEffect\"])(()=>{setCloseAction({action:saveSettings});return()=>setCloseAction(null);},[setCloseAction,saveSettings]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:GroupTabSettingsView_STATES.map((state,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"groupState\",checked:groupState===index,onChange:event=>setGroupState(index)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-group-type-${index}`}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText(`group.edit.settings.type.${state}.label`)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`group.edit.settings.type.${state}.help`)})]})]},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HorizontalRule,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:groupDecorate,onChange:event=>setGroupDecorate(prevValue=>!prevValue)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('group.edit.settings.rights.caption')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('group.edit.settings.rights.members.help')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/GroupManagerView.tsx\nconst GroupManagerView_TABS=[1,2,3,5];const GroupManagerView=props=>{const[currentTab,setCurrentTab]=Object(react[\"useState\"])(1);const[closeAction,setCloseAction]=Object(react[\"useState\"])(null);const[groupData,setGroupData]=Object(react[\"useState\"])(null);const close=()=>{setCloseAction(prevValue=>{if(prevValue&&prevValue.action)prevValue.action();return null;});setGroupData(null);};const changeTab=tab=>{if(closeAction&&closeAction.action)closeAction.action();setCurrentTab(tab);};const onGroupInformationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!groupData||groupData.groupId!==parser.id)return;setGroupData(prevValue=>{const newValue={...prevValue};newValue.groupName=parser.title;newValue.groupDescription=parser.description;newValue.groupState=parser.type;newValue.groupCanMembersDecorate=parser.canMembersDecorate;return newValue;});},[groupData]);UseMessageEventHook(nitro_renderer[\"Uc\" /* GroupInformationEvent */],onGroupInformationEvent);const onGroupSettingsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const groupBadgeParts=[];parser.badgeParts.forEach((part,id)=>{groupBadgeParts.push(new nitro_renderer[\"Ic\" /* GroupBadgePart */](part.isBase?nitro_renderer[\"Ic\" /* GroupBadgePart */].BASE:nitro_renderer[\"Ic\" /* GroupBadgePart */].SYMBOL,part.key,part.color,part.position));});setGroupData({groupId:parser.id,groupName:parser.title,groupDescription:parser.description,groupHomeroomId:parser.roomId,groupState:parser.state,groupCanMembersDecorate:parser.canMembersDecorate,groupColors:[parser.colorA,parser.colorB],groupBadgeParts});},[setGroupData]);UseMessageEventHook(nitro_renderer[\"id\" /* GroupSettingsEvent */],onGroupSettingsEvent);if(!groupData||groupData.groupId<=0)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-group-manager\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('group.window.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:GroupManagerView_TABS.map(tab=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:currentTab===tab,onClick:()=>changeTab(tab),children:LocalizeText(`group.edit.tab.${tab}`)},tab);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:`nitro-group-tab-image tab-${currentTab}`}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:4,children:LocalizeText(`group.edit.tabcaption.${currentTab}`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`group.edit.tabdesc.${currentTab}`)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,overflow:\"hidden\",children:[currentTab===1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabIdentityView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,close:close}),currentTab===2&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabBadgeView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction,skipDefault:true}),currentTab===3&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabColorsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction}),currentTab===5&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupTabSettingsView,{groupData:groupData,setGroupData:setGroupData,setCloseAction:setCloseAction})]})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/GroupMembersView.tsx\nconst GroupMembersView=props=>{const[groupId,setGroupId]=Object(react[\"useState\"])(-1);const[levelId,setLevelId]=Object(react[\"useState\"])(-1);const[membersData,setMembersData]=Object(react[\"useState\"])(null);const[pageId,setPageId]=Object(react[\"useState\"])(-1);const[totalPages,setTotalPages]=Object(react[\"useState\"])(0);const[searchQuery,setSearchQuery]=Object(react[\"useState\"])('');const[removingMemberName,setRemovingMemberName]=Object(react[\"useState\"])(null);const getRankDescription=member=>{if(member.rank===nitro_renderer[\"bd\" /* GroupRank */].OWNER)return'group.members.owner';if(membersData.admin){if(member.rank===nitro_renderer[\"bd\" /* GroupRank */].ADMIN)return'group.members.removerights';if(member.rank===nitro_renderer[\"bd\" /* GroupRank */].MEMBER)return'group.members.giverights';}return'';};const refreshMembers=Object(react[\"useCallback\"])(()=>{if(groupId===-1||levelId===-1||pageId===-1)return;SendMessageComposer(new nitro_renderer[\"Wc\" /* GroupMembersComposer */](groupId,pageId,searchQuery,levelId));},[groupId,levelId,pageId,searchQuery]);const toggleAdmin=member=>{if(!membersData.admin||member.rank===nitro_renderer[\"bd\" /* GroupRank */].OWNER)return;if(member.rank!==nitro_renderer[\"bd\" /* GroupRank */].ADMIN)SendMessageComposer(new nitro_renderer[\"Gc\" /* GroupAdminGiveComposer */](membersData.groupId,member.id));else SendMessageComposer(new nitro_renderer[\"Hc\" /* GroupAdminTakeComposer */](membersData.groupId,member.id));refreshMembers();};const acceptMembership=member=>{if(!membersData.admin||member.rank!==nitro_renderer[\"bd\" /* GroupRank */].REQUESTED)return;SendMessageComposer(new nitro_renderer[\"Yc\" /* GroupMembershipAcceptComposer */](membersData.groupId,member.id));refreshMembers();};const removeMemberOrDeclineMembership=member=>{if(!membersData.admin)return;if(member.rank===nitro_renderer[\"bd\" /* GroupRank */].REQUESTED){SendMessageComposer(new nitro_renderer[\"Zc\" /* GroupMembershipDeclineComposer */](membersData.groupId,member.id));refreshMembers();return;}setRemovingMemberName(member.name);SendMessageComposer(new nitro_renderer[\"Pc\" /* GroupConfirmRemoveMemberComposer */](membersData.groupId,member.id));};const onGroupMembersEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setMembersData(parser);setLevelId(parser.level);setTotalPages(Math.ceil(parser.totalMembersCount/parser.pageSize));},[]);UseMessageEventHook(nitro_renderer[\"Xc\" /* GroupMembersEvent */],onGroupMembersEvent);const onGroupConfirmMemberRemoveEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.confirm(LocalizeText(parser.furnitureCount>0?'group.kickconfirm.desc':'group.kickconfirm_nofurni.desc',['user','amount'],[removingMemberName,parser.furnitureCount.toString()]),()=>{SendMessageComposer(new nitro_renderer[\"cd\" /* GroupRemoveMemberComposer */](membersData.groupId,parser.userId));refreshMembers();},null);setRemovingMemberName(null);},[membersData,removingMemberName,refreshMembers]);UseMessageEventHook(nitro_renderer[\"Oc\" /* GroupConfirmMemberRemoveEvent */],onGroupConfirmMemberRemoveEvent);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;const groupId=parseInt(parts[1])||-1;const levelId=parseInt(parts[2])||3;setGroupId(groupId);setLevelId(levelId);},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'group-members/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{setPageId(0);},[groupId,levelId,searchQuery]);Object(react[\"useEffect\"])(()=>{if(groupId===-1||levelId===-1||pageId===-1)return;SendMessageComposer(new nitro_renderer[\"Wc\" /* GroupMembersComposer */](groupId,pageId,searchQuery,levelId));},[groupId,levelId,pageId,searchQuery]);Object(react[\"useEffect\"])(()=>{if(groupId===-1)return;setLevelId(-1);setMembersData(null);setTotalPages(0);setSearchQuery('');setRemovingMemberName(null);},[groupId]);if(groupId===-1||!membersData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-group-members\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('group.members.title',['groupName'],[membersData?membersData.groupTitle:'']),onCloseClick:event=>setGroupId(-1)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"group-badge\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:membersData.badge,isGroup:true,className:\"mx-auto d-block\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm w-100\",placeholder:LocalizeText('group.members.searchinfo'),value:searchQuery,onChange:event=>setSearchQuery(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm w-100\",value:levelId,onChange:event=>setLevelId(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:LocalizeText('group.members.search.all')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"1\",children:LocalizeText('group.members.search.admins')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"2\",children:LocalizeText('group.members.search.pending')})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:2,overflow:\"auto\",className:\"nitro-group-members-list-grid\",children:membersData.result.map((member,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,alignItems:\"center\",overflow:\"hidden\",className:\"member-list-item bg-white rounded p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"avatar-head cursor-pointer\",onClick:()=>GetUserProfile(member.id),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:member.figure,headOnly:true,direction:2})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,pointer:true,onClick:event=>GetUserProfile(member.id),children:member.name}),member.rank!==nitro_renderer[\"bd\" /* GroupRank */].REQUESTED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,italics:true,variant:\"muted\",children:LocalizeText('group.members.since',['date'],[member.joinedAt])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[member.rank!==nitro_renderer[\"bd\" /* GroupRank */].REQUESTED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:membersData.admin,className:`icon icon-group-small-${member.rank===nitro_renderer[\"bd\" /* GroupRank */].OWNER?'owner':member.rank===nitro_renderer[\"bd\" /* GroupRank */].ADMIN?'admin':membersData.admin&&member.rank===nitro_renderer[\"bd\" /* GroupRank */].MEMBER?'not-admin':''}`,title:LocalizeText(getRankDescription(member)),onClick:event=>toggleAdmin(member)})}),membersData.admin&&member.rank===nitro_renderer[\"bd\" /* GroupRank */].REQUESTED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-accept\",title:LocalizeText('group.members.accept'),onClick:event=>acceptMembership(member)})}),membersData.admin&&member.rank!==nitro_renderer[\"bd\" /* GroupRank */].OWNER&&member.id!==GetSessionDataManager().userId&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-deny\",title:LocalizeText(member.rank===nitro_renderer[\"bd\" /* GroupRank */].REQUESTED?'group.members.reject':'group.members.kick'),onClick:event=>removeMemberOrDeclineMembership(member)})})]})]},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,justifyContent:\"between\",alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:membersData.pageIndex===0,onClick:event=>setPageId(prevValue=>prevValue-1),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('group.members.pageinfo',['amount','page','totalPages'],[membersData.totalMembersCount.toString(),(membersData.pageIndex+1).toString(),totalPages.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:membersData.pageIndex===totalPages-1,onClick:event=>setPageId(prevValue=>prevValue+1),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\"})})]})]})]});};\n// CONCATENATED MODULE: ./src/components/groups/GroupsView.tsx\nconst GroupsView=props=>{const[isCreatorVisible,setCreatorVisible]=Object(react[\"useState\"])(false);const[groupCustomize,setGroupCustomize]=Object(react[\"useState\"])(null);const onGroupPurchasedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCreatorVisible(false);TryVisitRoom(parser.roomId);},[]);UseMessageEventHook(nitro_renderer[\"ad\" /* GroupPurchasedEvent */],onGroupPurchasedEvent);const onGroupBadgePartsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const customize={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};parser.bases.forEach((images,id)=>customize.badgeBases.push({id,images}));parser.symbols.forEach((images,id)=>customize.badgeSymbols.push({id,images}));parser.partColors.forEach((color,id)=>customize.badgePartColors.push({id,color}));parser.colorsA.forEach((color,id)=>customize.groupColorsA.push({id,color}));parser.colorsB.forEach((color,id)=>customize.groupColorsB.push({id,color}));customize.badgeBases.sort(CompareId);customize.badgeSymbols.sort(CompareId);customize.badgePartColors.sort(CompareId);customize.groupColorsA.sort(CompareId);customize.groupColorsB.sort(CompareId);setGroupCustomize(customize);},[setGroupCustomize]);UseMessageEventHook(nitro_renderer[\"Kc\" /* GroupBadgePartsEvent */],onGroupBadgePartsEvent);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'create':setCreatorVisible(true);return;case'manage':if(!parts[2])return;setCreatorVisible(false);SendMessageComposer(new nitro_renderer[\"hd\" /* GroupSettingsComposer */](Number(parts[2])));return;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'groups/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"Jc\" /* GroupBadgePartsComposer */]());},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(GroupsContextProvider,{value:{groupCustomize,setGroupCustomize},children:[isCreatorVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupCreatorView,{onClose:()=>setCreatorVisible(false)}),!isCreatorVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupManagerView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupMembersView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupInformationStandaloneView,{})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/common/GuideSessionState.ts\nclass GuideSessionState{}GuideSessionState.NONE='NONE';GuideSessionState.ERROR='ERROR';GuideSessionState.REJECTED='REJECTED';GuideSessionState.USER_CREATE='USER_CREATE';GuideSessionState.USER_PENDING='USER_PENDING';GuideSessionState.USER_ONGOING='USER_ONGOING';GuideSessionState.USER_FEEDBACK='USER_FEEDBACK';GuideSessionState.USER_THANKS='USER_THANKS';GuideSessionState.USER_GUIDE_DISCONNECTED='USER_GUIDE_DISCONNECTED';GuideSessionState.GUIDE_TOOL_MENU='GUIDE_TOOL_MENU';GuideSessionState.GUIDE_ACCEPT='GUIDE_ACCEPT';GuideSessionState.GUIDE_ONGOING='GUIDE_ONGOING';GuideSessionState.GUIDE_CLOSED='GUIDE_CLOSED';GuideSessionState.GUARDIAN_CHAT_REVIEW_ACCEPT='GUARDIAN_CHAT_REVIEW_ACCEPT';GuideSessionState.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS='GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS';GuideSessionState.GUARDIAN_CHAT_REVIEW_VOTE='GUARDIAN_CHAT_REVIEW_VOTE';GuideSessionState.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS='GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS';GuideSessionState.GUARDIAN_CHAT_REVIEW_RESULTS='GUARDIAN_CHAT_REVIEW_RESULTS';\n// CONCATENATED MODULE: ./src/components/guide-tool/common/GuideToolMessage.ts\nclass GuideToolMessage{constructor(message,roomId){this._message=void 0;this._roomId=void 0;this._message=message;this._roomId=roomId;}get message(){return this._message;}get roomId(){return this._roomId;}}\n// CONCATENATED MODULE: ./src/components/guide-tool/common/GuideToolMessageGroup.ts\nclass GuideToolMessageGroup{constructor(userId){this._userId=void 0;this._messages=void 0;this._userId=userId;this._messages=[];}addChat(message){this._messages.push(message);}get userId(){return this._userId;}get messages(){return this._messages;}}\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolAcceptView.tsx\nconst GuideToolAcceptView=props=>{const{helpRequestDescription=null,helpRequestAverageTime=0}=props;const answerRequest=response=>SendMessageComposer(new nitro_renderer[\"rd\" /* GuideSessionGuideDecidesMessageComposer */](response));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,className:\"bg-muted p-2 rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.request.guide.accept.request.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"muted\",children:LocalizeText('guide.help.request.type.1')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,textBreak:true,children:helpRequestDescription})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>answerRequest(true),children:LocalizeText('guide.help.request.guide.accept.accept.button')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>answerRequest(false),children:LocalizeText('guide.help.request.guide.accept.skip.link')})]})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolMenuView.tsx\nconst GuideToolMenuView=props=>{const{isOnDuty=false,isHandlingGuideRequests=false,setIsHandlingGuideRequests=null,isHandlingHelpRequests=false,setIsHandlingHelpRequests=null,isHandlingBullyReports=false,setIsHandlingBullyReports=null,guidesOnDuty=0,helpersOnDuty=0,guardiansOnDuty=0,processAction=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,className:\"bg-muted p-2 rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:'duty-switch'+(isOnDuty?'':' off'),onClick:event=>processAction('toggle_duty')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.guide.tool.yourstatus')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`guide.help.guide.tool.duty.${isOnDuty?'on':'off'}`)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.guide.tool.tickettypeselection.caption')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",disabled:isOnDuty,type:\"checkbox\",checked:isHandlingGuideRequests,onChange:event=>setIsHandlingGuideRequests(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.guide.tool.tickettypeselection.guiderequests')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",disabled:isOnDuty,type:\"checkbox\",checked:isHandlingHelpRequests,onChange:event=>setIsHandlingHelpRequests(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.guide.tool.tickettypeselection.onlyhelprequests')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",disabled:isOnDuty,type:\"checkbox\",checked:isHandlingBullyReports,onChange:event=>setIsHandlingBullyReports(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.guide.tool.tickettypeselection.bullyreports')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"bg-dark m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"info-icon\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{dangerouslySetInnerHTML:{__html:LocalizeText('guide.help.guide.tool.guidesonduty',['amount'],[guidesOnDuty.toString()])}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{dangerouslySetInnerHTML:{__html:LocalizeText('guide.help.guide.tool.helpersonduty',['amount'],[helpersOnDuty.toString()])}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{dangerouslySetInnerHTML:{__html:LocalizeText('guide.help.guide.tool.guardiansonduty',['amount'],[guardiansOnDuty.toString()])}})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"bg-dark m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,onClick:event=>processAction('forum_link'),children:LocalizeText('guide.help.guide.tool.forum.link')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,children:LocalizeText('guide.help.guide.tool.skill.link')})]})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolOngoingView.tsx\nconst GuideToolOngoingView=props=>{const{isGuide=false,userId=0,userName=null,userFigure=null,isTyping=false,messageGroups=[]}=props;const[messageText,setMessageText]=Object(react[\"useState\"])('');const visit=Object(react[\"useCallback\"])(()=>{SendMessageComposer(new nitro_renderer[\"qd\" /* GuideSessionGetRequesterRoomMessageComposer */]());},[]);const invite=Object(react[\"useCallback\"])(()=>{SendMessageComposer(new nitro_renderer[\"sd\" /* GuideSessionInviteRequesterMessageComposer */]());},[]);const resolve=Object(react[\"useCallback\"])(()=>{SendMessageComposer(new nitro_renderer[\"Ad\" /* GuideSessionResolvedMessageComposer */]());},[]);const onGuideSessionRequesterRoomMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();TryVisitRoom(parser.requesterRoomId);},[]);UseMessageEventHook(nitro_renderer[\"zd\" /* GuideSessionRequesterRoomMessageEvent */],onGuideSessionRequesterRoomMessageEvent);const sendMessage=Object(react[\"useCallback\"])(()=>{if(!messageText||!messageText.length)return;SendMessageComposer(new nitro_renderer[\"ud\" /* GuideSessionMessageMessageComposer */](messageText));setMessageText('');},[messageText]);const onKeyDown=Object(react[\"useCallback\"])(event=>{if(event.key!=='Enter')return;sendMessage();},[sendMessage]);const isOwnChat=Object(react[\"useCallback\"])(userId=>{return userId===GetSessionDataManager().userId;},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,className:\"bg-muted p-2 rounded\",children:[isGuide&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonGroup,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:visit,children:LocalizeText('guide.help.request.guide.ongoing.visit.button')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,onClick:invite,children:LocalizeText('guide.help.request.guide.ongoing.invite.button')})]}),!isGuide&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.ongoing.guide.desc')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('guide.help.common.report.link')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",gap:1,className:\"bg-muted rounded chat-messages p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",children:messageGroups.map((group,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,justifyContent:isOwnChat(group.userId)?'end':'start',gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{shrink:true,className:\"message-avatar\",children:!isOwnChat(group.userId)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userFigure,direction:2})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:'bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-'+(isOwnChat(group.userId)?'right':'left'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{bold:true,children:[isOwnChat(group.userId)&&GetSessionDataManager().userName,!isOwnChat(group.userId)&&userName]}),group.messages.map((chat,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"text-break\",children:chat.message},index))]}),isOwnChat(group.userId)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"message-avatar flex-shrink-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:GetSessionDataManager().figure,direction:4})})]},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('guide.help.request.guide.ongoing.input.empty',['name'],[userName]),value:messageText,onChange:event=>setMessageText(event.target.value),onKeyDown:onKeyDown}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:sendMessage,children:LocalizeText('widgets.chatinput.say')})]}),isTyping&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"muted\",children:LocalizeText('guide.help.common.typing')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:resolve,children:LocalizeText('guide.help.request.'+(isGuide?'guide':'user')+'.ongoing.close.link')})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolUserCreateRequestView.tsx\nconst MIN_REQUEST_LENGTH=15;const GuideToolUserCreateRequestView=props=>{const{userRequest='',setUserRequest=null}=props;const[isPending,setIsPending]=Object(react[\"useState\"])(false);const sendRequest=()=>{setIsPending(true);SendMessageComposer(new nitro_renderer[\"md\" /* GuideSessionCreateMessageComposer */](1,userRequest));};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.create.help')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"request-message\",maxLength:140,value:userRequest,onChange:event=>setUserRequest(event.target.value),placeholder:LocalizeText('guide.help.request.user.create.input.help')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",disabled:userRequest.length<MIN_REQUEST_LENGTH||isPending,onClick:sendRequest,children:LocalizeText('guide.help.request.user.create.input.button')})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolUserFeedbackView.tsx\nconst GuideToolUserFeedbackView=props=>{const{userName=null}=props;const giveFeedback=Object(react[\"useCallback\"])(recommend=>{SendMessageComposer(new nitro_renderer[\"pd\" /* GuideSessionFeedbackMessageComposer */](recommend));},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",gap:1,className:\"bg-muted p-2 rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.feedback.guide.desc')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('guide.help.common.report.link')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.request.user.feedback.closed.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.feedback.closed.desc')})]}),userName&&userName.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"bg-dark m-0 mt-auto\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,bold:true,children:LocalizeText('guide.help.request.user.feedback.question')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>giveFeedback(true),children:LocalizeText('guide.help.request.user.feedback.positive.button')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",onClick:event=>giveFeedback(false),children:LocalizeText('guide.help.request.user.feedback.negative.button')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolUserPendingView.tsx\nconst GuideToolUserPendingView=props=>{const{helpRequestDescription=null,helpRequestAverageTime=0}=props;const cancelRequest=()=>SendMessageComposer(new nitro_renderer[\"yd\" /* GuideSessionRequesterCancelsMessageComposer */]());return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,className:\"bg-muted rounded p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.request.guide.accept.request.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"muted\",children:LocalizeText('guide.help.request.type.1')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,textBreak:true,children:helpRequestDescription})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.request.user.pending.info.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.pending.info.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.pending.info.waiting',['waitingtime'],[helpRequestAverageTime.toString()])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:cancelRequest,children:LocalizeText('guide.help.request.user.pending.cancel.button')})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/views/GuideToolUserThanksView.tsx\nconst GuideToolUserThanksView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('guide.help.request.user.thanks.info.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('guide.help.request.user.thanks.info.desc')})]});};\n// CONCATENATED MODULE: ./src/components/guide-tool/GuideToolView.tsx\nconst GuideToolView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[headerText,setHeaderText]=Object(react[\"useState\"])(LocalizeText('guide.help.guide.tool.title'));const[noCloseButton,setNoCloseButton]=Object(react[\"useState\"])(false);const[sessionState,setSessionState]=Object(react[\"useState\"])(GuideSessionState.GUIDE_TOOL_MENU);const[isOnDuty,setIsOnDuty]=Object(react[\"useState\"])(false);const[isHandlingBullyReports,setIsHandlingBullyReports]=Object(react[\"useState\"])(false);const[isHandlingGuideRequests,setIsHandlingGuideRequests]=Object(react[\"useState\"])(false);const[isHandlingHelpRequests,setIsHandlingHelpRequests]=Object(react[\"useState\"])(false);const[helpersOnDuty,setHelpersOnDuty]=Object(react[\"useState\"])(0);const[guidesOnDuty,setGuidesOnDuty]=Object(react[\"useState\"])(0);const[guardiansOnDuty,setGuardiansOnDuty]=Object(react[\"useState\"])(0);const[userRequest,setUserRequest]=Object(react[\"useState\"])('');const[helpRequestDescription,setHelpRequestDescription]=Object(react[\"useState\"])(null);const[helpRequestAverageTime,setHelpRequestAverageTime]=Object(react[\"useState\"])(0);const[ongoingUserId,setOngoingUserId]=Object(react[\"useState\"])(0);const[ongoingUsername,setOngoingUsername]=Object(react[\"useState\"])(null);const[ongoingFigure,setOngoingFigure]=Object(react[\"useState\"])(null);const[ongoingIsTyping,setOngoingIsTyping]=Object(react[\"useState\"])(false);const[ongoingMessageGroups,setOngoingMessageGroups]=Object(react[\"useState\"])([]);const updateSessionState=Object(react[\"useCallback\"])((newState,replacement)=>{switch(newState){case GuideSessionState.GUIDE_TOOL_MENU:setHeaderText(LocalizeText('guide.help.guide.tool.title'));setNoCloseButton(false);break;case GuideSessionState.GUIDE_ACCEPT:setHeaderText(LocalizeText('guide.help.request.guide.accept.title'));setNoCloseButton(true);break;case GuideSessionState.GUIDE_ONGOING:setHeaderText(LocalizeText('guide.help.request.guide.ongoing.title',['name'],[replacement]));setNoCloseButton(true);break;case GuideSessionState.USER_CREATE:setHeaderText(LocalizeText('guide.help.request.user.create.title'));setNoCloseButton(false);break;case GuideSessionState.USER_PENDING:setHeaderText(LocalizeText('guide.help.request.user.pending.title'));setNoCloseButton(true);break;case GuideSessionState.USER_ONGOING:setHeaderText(LocalizeText('guide.help.request.user.ongoing.title',['name'],[replacement]));setNoCloseButton(true);break;case GuideSessionState.USER_FEEDBACK:setHeaderText(LocalizeText('guide.help.request.user.feedback.title'));setNoCloseButton(true);break;case GuideSessionState.USER_THANKS:setHeaderText(LocalizeText('guide.help.request.user.thanks.title'));setNoCloseButton(false);break;}setSessionState(newState);setIsVisible(true);},[]);const onGuideToolEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case GuideToolEvent_GuideToolEvent.SHOW_GUIDE_TOOL:setIsVisible(true);return;case GuideToolEvent_GuideToolEvent.HIDE_GUIDE_TOOL:setIsVisible(false);return;case GuideToolEvent_GuideToolEvent.TOGGLE_GUIDE_TOOL:setIsVisible(value=>!value);return;case GuideToolEvent_GuideToolEvent.CREATE_HELP_REQUEST:updateSessionState(GuideSessionState.USER_CREATE);return;}},[updateSessionState]);UseUiEvent(GuideToolEvent_GuideToolEvent.SHOW_GUIDE_TOOL,onGuideToolEvent);UseUiEvent(GuideToolEvent_GuideToolEvent.HIDE_GUIDE_TOOL,onGuideToolEvent);UseUiEvent(GuideToolEvent_GuideToolEvent.TOGGLE_GUIDE_TOOL,onGuideToolEvent);UseUiEvent(GuideToolEvent_GuideToolEvent.CREATE_HELP_REQUEST,onGuideToolEvent);const onPerkAllowancesMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.isAllowed(nitro_renderer[\"lf\" /* PerkEnum */].USE_GUIDE_TOOL)&&isOnDuty){setIsOnDuty(false);SendMessageComposer(new nitro_renderer[\"wd\" /* GuideSessionOnDutyUpdateMessageComposer */](false,false,false,false));}},[isOnDuty,setIsOnDuty]);UseMessageEventHook(nitro_renderer[\"kf\" /* PerkAllowancesMessageEvent */],onPerkAllowancesMessageEvent);const onGuideOnDutyStatusMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setIsOnDuty(parser.onDuty);setGuidesOnDuty(parser.guidesOnDuty);setHelpersOnDuty(parser.helpersOnDuty);setGuardiansOnDuty(parser.guardiansOnDuty);},[setIsOnDuty,setHelpersOnDuty,setGuidesOnDuty,setGuardiansOnDuty]);UseMessageEventHook(nitro_renderer[\"kd\" /* GuideOnDutyStatusMessageEvent */],onGuideOnDutyStatusMessageEvent);const onGuideSessionAttachedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setHelpRequestDescription(parser.helpRequestDescription);setHelpRequestAverageTime(parser.roleSpecificWaitTime);if(parser.asGuide&&isOnDuty)updateSessionState(GuideSessionState.GUIDE_ACCEPT);if(!parser.asGuide)updateSessionState(GuideSessionState.USER_PENDING);},[isOnDuty,updateSessionState]);UseMessageEventHook(nitro_renderer[\"ld\" /* GuideSessionAttachedMessageEvent */],onGuideSessionAttachedMessageEvent);const onGuideSessionStartedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(isOnDuty){setOngoingUserId(parser.requesterUserId);setOngoingUsername(parser.requesterName);setOngoingFigure(parser.requesterFigure);updateSessionState(GuideSessionState.GUIDE_ONGOING,parser.requesterName);}else{setOngoingUserId(parser.guideUserId);setOngoingUsername(parser.guideName);setOngoingFigure(parser.guideFigure);updateSessionState(GuideSessionState.USER_ONGOING,parser.guideName);}},[isOnDuty,updateSessionState]);UseMessageEventHook(nitro_renderer[\"Bd\" /* GuideSessionStartedMessageEvent */],onGuideSessionStartedMessageEvent);const onGuideSessionPartnerIsTypingMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setOngoingIsTyping(parser.isTyping);},[]);UseMessageEventHook(nitro_renderer[\"xd\" /* GuideSessionPartnerIsTypingMessageEvent */],onGuideSessionPartnerIsTypingMessageEvent);const onGuideSessionMessageMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const messageGroups=[...ongoingMessageGroups];let lastGroup=messageGroups[messageGroups.length-1];if(!lastGroup||lastGroup.userId!==parser.senderId){lastGroup=new GuideToolMessageGroup(parser.senderId);messageGroups.push(lastGroup);}lastGroup.addChat(new GuideToolMessage(parser.chatMessage));setOngoingMessageGroups(messageGroups);},[ongoingMessageGroups]);UseMessageEventHook(nitro_renderer[\"vd\" /* GuideSessionMessageMessageEvent */],onGuideSessionMessageMessageEvent);const onGuideSessionInvitedToGuideRoomMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const messageGroups=[...ongoingMessageGroups];let lastGroup=messageGroups[messageGroups.length-1];const guideId=isOnDuty?GetSessionDataManager().userId:ongoingUserId;if(!lastGroup||lastGroup.userId!==guideId){lastGroup=new GuideToolMessageGroup(guideId);messageGroups.push(lastGroup);}lastGroup.addChat(new GuideToolMessage(parser.roomName,parser.roomId));setOngoingMessageGroups(messageGroups);},[isOnDuty,ongoingMessageGroups,ongoingUserId]);UseMessageEventHook(nitro_renderer[\"td\" /* GuideSessionInvitedToGuideRoomMessageEvent */],onGuideSessionInvitedToGuideRoomMessageEvent);const onGuideSessionEndedMessageEvent=Object(react[\"useCallback\"])(event=>{if(isOnDuty){setOngoingUserId(0);setOngoingUsername(null);setOngoingFigure(null);setOngoingIsTyping(false);setOngoingMessageGroups([]);updateSessionState(GuideSessionState.GUIDE_TOOL_MENU);}else{updateSessionState(GuideSessionState.USER_FEEDBACK);}},[isOnDuty,updateSessionState]);UseMessageEventHook(nitro_renderer[\"od\" /* GuideSessionEndedMessageEvent */],onGuideSessionEndedMessageEvent);const onGuideSessionDetachedMessageEvent=Object(react[\"useCallback\"])(event=>{setOngoingUserId(0);setOngoingUsername(null);setOngoingFigure(null);setOngoingIsTyping(false);setOngoingMessageGroups([]);if(isOnDuty){updateSessionState(GuideSessionState.GUIDE_TOOL_MENU);}else{updateSessionState(GuideSessionState.USER_THANKS);}},[isOnDuty,updateSessionState]);UseMessageEventHook(nitro_renderer[\"nd\" /* GuideSessionDetachedMessageEvent */],onGuideSessionDetachedMessageEvent);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'tour'://Create Tour Request\nreturn;}},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'help/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);const processAction=Object(react[\"useCallback\"])(action=>{switch(action){case'close':setIsVisible(false);setUserRequest('');setSessionState(GuideSessionState.GUIDE_TOOL_MENU);return;case'toggle_duty':if(!isHandlingBullyReports&&!isHandlingGuideRequests&&!isHandlingHelpRequests){DispatchUiEvent(new NotificationAlertEvent_NotificationAlertEvent([LocalizeText('guide.help.guide.tool.noqueueselected.message')],null,null,null,LocalizeText('guide.help.guide.tool.noqueueselected.caption'),null));return;}setIsOnDuty(v=>{SendMessageComposer(new nitro_renderer[\"wd\" /* GuideSessionOnDutyUpdateMessageComposer */](!v,v?false:isHandlingGuideRequests,v?false:isHandlingHelpRequests,v?false:isHandlingBullyReports));return!v;});return;case'forum_link':const url=GetConfiguration('group.homepage.url','').replace('%groupid%',GetConfiguration('guide.help.alpha.groupid','0'));window.open(url);return;}},[isHandlingBullyReports,isHandlingGuideRequests,isHandlingHelpRequests]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-guide-tool\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:headerText,onCloseClick:event=>processAction('close'),noCloseButton:noCloseButton}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[sessionState===GuideSessionState.GUIDE_TOOL_MENU&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolMenuView,{isOnDuty:isOnDuty,isHandlingGuideRequests:isHandlingGuideRequests,setIsHandlingGuideRequests:setIsHandlingGuideRequests,isHandlingHelpRequests:isHandlingHelpRequests,setIsHandlingHelpRequests:setIsHandlingHelpRequests,isHandlingBullyReports:isHandlingBullyReports,setIsHandlingBullyReports:setIsHandlingBullyReports,guidesOnDuty:guidesOnDuty,helpersOnDuty:helpersOnDuty,guardiansOnDuty:guardiansOnDuty,processAction:processAction}),sessionState===GuideSessionState.GUIDE_ACCEPT&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolAcceptView,{helpRequestDescription:helpRequestDescription,helpRequestAverageTime:helpRequestAverageTime}),[GuideSessionState.GUIDE_ONGOING,GuideSessionState.USER_ONGOING].includes(sessionState)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolOngoingView,{isGuide:isOnDuty,userId:ongoingUserId,userName:ongoingUsername,userFigure:ongoingFigure,isTyping:ongoingIsTyping,messageGroups:ongoingMessageGroups}),sessionState===GuideSessionState.USER_CREATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolUserCreateRequestView,{userRequest:userRequest,setUserRequest:setUserRequest}),sessionState===GuideSessionState.USER_PENDING&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolUserPendingView,{helpRequestDescription:helpRequestDescription,helpRequestAverageTime:helpRequestAverageTime}),sessionState===GuideSessionState.USER_FEEDBACK&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolUserFeedbackView,{userName:ongoingUsername}),sessionState===GuideSessionState.USER_THANKS&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolUserThanksView,{})]})]});};\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Popover.js + 4 modules\nvar Popover = __webpack_require__(91);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/OverlayTrigger.js + 8 modules\nvar OverlayTrigger = __webpack_require__(144);\n\n// CONCATENATED MODULE: ./src/components/hc-center/HcCenterView.tsx\nconst HcCenterView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[kickbackData,setKickbackData]=Object(react[\"useState\"])(null);const[unclaimedGifts,setUnclaimedGifts]=Object(react[\"useState\"])(0);const[badgeCode,setBadgeCode]=Object(react[\"useState\"])(null);const{userFigure=null}=useSessionInfo();const{purse=null,clubStatus=null}=usePurse();const{badgeCodes=[],activate=null,deactivate=null}=useInventoryBadges();const getClubText=()=>{if(purse.clubDays<=0)return LocalizeText('purse.clubdays.zero.amount.text');if(purse.minutesUntilExpiration>-1&&purse.minutesUntilExpiration<60*24){return nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat(purse.minutesUntilExpiration*60);}return nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat((purse.clubPeriods*31+purse.clubDays)*86400);};const getInfoText=()=>{switch(clubStatus){case ClubStatus.ACTIVE:return LocalizeText(`hccenter.status.${clubStatus}.info`,['timeleft','joindate','streakduration'],[getClubText(),kickbackData.firstSubscriptionDate,nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat(kickbackData.currentHcStreak*86400)]);case ClubStatus.EXPIRED:return LocalizeText(`hccenter.status.${clubStatus}.info`,['joindate'],[kickbackData.firstSubscriptionDate]);default:return LocalizeText(`hccenter.status.${clubStatus}.info`);}};const getHcPaydayTime=()=>kickbackData.timeUntilPayday<60?LocalizeText('hccenter.special.time.soon'):nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat(kickbackData.timeUntilPayday*60);const getHcPaydayAmount=()=>LocalizeText('hccenter.special.sum',['credits'],[(kickbackData.creditRewardForStreakBonus+kickbackData.creditRewardForMonthlySpent).toString()]);const onClubGiftInfoEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setUnclaimedGifts(parser.giftsAvailable);},[]);UseMessageEventHook(nitro_renderer[\"gb\" /* ClubGiftInfoEvent */],onClubGiftInfoEvent);const onScrSendKickbackInfo=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setKickbackData(parser.data);},[]);UseMessageEventHook(nitro_renderer[\"Gh\" /* ScrSendKickbackInfoMessageEvent */],onScrSendKickbackInfo);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'open':if(parts.length>2){switch(parts[2]){case'hccenter':setIsVisible(true);break;}}return;}},eventUrlPrefix:'habboUI/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);Object(react[\"useEffect\"])(()=>{setBadgeCode(GetClubBadge(badgeCodes));},[badgeCodes]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"ic\" /* GetClubGiftInfo */]());SendMessageComposer(new nitro_renderer[\"Fh\" /* ScrGetKickbackInfoMessageComposer */]());},[]);if(!isVisible)return null;const popover=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Popover[\"a\" /* default */],{id:\"popover-basic\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Popover[\"a\" /* default */].Body,{className:\"text-black py-2 px-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{children:LocalizeText('hccenter.breakdown.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('hccenter.breakdown.creditsspent',['credits'],[kickbackData.totalCreditsSpent.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('hccenter.breakdown.paydayfactor.percent',['percent'],[(kickbackData.kickbackPercentage*100).toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('hccenter.breakdown.streakbonus',['credits'],[kickbackData.creditRewardForStreakBonus.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"w-100 text-black my-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('hccenter.breakdown.total',['credits','actual'],[getHcPaydayAmount(),((kickbackData.kickbackPercentage*kickbackData.totalCreditsSpent+kickbackData.creditRewardForStreakBonus)*100/100).toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"btn btn-link text-primary p-0\",onClick:()=>CreateLinkEvent('habbopages/'+GetConfiguration('hc.center')['payday.habbopage']),children:LocalizeText('hccenter.special.infolink')})]})});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{theme:\"primary\",className:\"nitro-hc-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('generic.hccenter'),onCloseClick:()=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{position:\"relative\",className:\"bg-muted p-2 hc-logo\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,justifyContent:\"end\",className:\"px-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>CreateLinkEvent('catalog/open/'+GetConfiguration('catalog.links')['hc.buy_hc']),children:LocalizeText(clubStatus===ClubStatus.ACTIVE?'hccenter.btn.extend':'hccenter.btn.buy')})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{position:\"absolute\",className:\"end-0 p-4 top-3 habbo-avatar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userFigure,direction:4,scale:2})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badgeCode,className:\"align-self-center flex-shrink-0 me-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,className:\"streak-info\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('hccenter.status.'+clubStatus)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,dangerouslySetInnerHTML:{__html:getInfoText()}})]})]}),GetConfiguration('hc.center')['payday.info']&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,className:\"p-2 payday-special mb-1 ml-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",bold:true,children:LocalizeText('hccenter.special.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",small:true,children:LocalizeText('hccenter.special.info')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",small:true,underline:true,className:\"pt-4 cursor-pointer\",onClick:()=>CreateLinkEvent('habbopages/'+GetConfiguration('hc.center')['payday.habbopage']),children:LocalizeText('hccenter.special.infolink')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,className:\"payday flex-shrink-0 p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,className:\"ms-2\",children:LocalizeText('hccenter.special.time.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"clock me-2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"align-self-center\",children:getHcPaydayTime()})]}),clubStatus===ClubStatus.ACTIVE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,className:\"pe-3 pt-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,className:\"ms-2\",children:LocalizeText('hccenter.special.amount.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"w-100 text-center ms-4n\",children:getHcPaydayAmount()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(OverlayTrigger[\"a\" /* default */],{trigger:['hover','focus'],placement:\"left\",overlay:popover,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,variant:\"primary\",className:\"pt-4\",children:LocalizeText('hccenter.breakdown.infolink')})})]})]})]})]}),GetConfiguration('hc.center')['gift.info']&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"hc-gift-special p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",bold:true,children:LocalizeText('hccenter.gift.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",dangerouslySetInnerHTML:{__html:unclaimedGifts>0?LocalizeText('hccenter.unclaimedgifts',['unclaimedgifts'],[unclaimedGifts.toString()]):LocalizeText('hccenter.gift.info')}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"btn-lg align-self-center ms-auto\",onClick:()=>CreateLinkEvent('catalog/open/'+GetConfiguration('catalog.links')['hc.hc_gifts']),children:LocalizeText(clubStatus===ClubStatus.ACTIVE?'hccenter.btn.gifts.redeem':'hccenter.btn.gifts.view')})]}),GetConfiguration('hc.center')['benefits.info']&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"benefits py-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,variant:\"primary\",children:LocalizeText('hccenter.general.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,dangerouslySetInnerHTML:{__html:LocalizeText('hccenter.general.info')}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,className:\"cursor-pointer\",variant:\"primary\",onClick:()=>CreateLinkEvent('habbopages/'+GetConfiguration('hc.center')['benefits.habbopage']),children:LocalizeText('hccenter.general.infolink')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/help/HelpContext.tsx\nconst HelpContext=/*#__PURE__*/Object(react[\"createContext\"])({helpReportState:null,setHelpReportState:null});const HelpContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HelpContext.Provider,{value:props.value,children:props.children});};const useHelpContext=()=>Object(react[\"useContext\"])(HelpContext);\n// CONCATENATED MODULE: ./src/components/help/common/CallForHelpResult.ts\nclass CallForHelpResult{}CallForHelpResult.TOO_MANY_PENDING_CALLS_CODE=1;CallForHelpResult.HAS_ABUSIVE_CALL_CODE=2;\n// CONCATENATED MODULE: ./src/components/help/common/GetCloseReasonKey.ts\nconst GetCloseReasonKey=code=>{if(code===1)return'useless';if(code===2)return'abusive';return'resolved';};\n// CONCATENATED MODULE: ./src/components/help/HelpMessageHandler.tsx\nconst HelpMessageHandler=props=>{const onCallForHelpResultMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();let message=parser.messageText;switch(parser.resultType){case CallForHelpResult.TOO_MANY_PENDING_CALLS_CODE:SendMessageComposer(new nitro_renderer[\"uc\" /* GetPendingCallsForHelpMessageComposer */]());NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('help.cfh.error.pending'),NotificationAlertType.MODERATION,null,null,LocalizeText('help.cfh.error.title'));break;case CallForHelpResult.HAS_ABUSIVE_CALL_CODE:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('help.cfh.error.abusive'),NotificationAlertType.MODERATION,null,null,LocalizeText('help.cfh.error.title'));break;default:if(message.trim().length===0){message=LocalizeText('help.cfh.sent.text');}NotificationUtilities_NotificationUtilities.simpleAlert(message,NotificationAlertType.MODERATION,null,null,LocalizeText('help.cfh.sent.title'));}},[]);UseMessageEventHook(nitro_renderer[\"L\" /* CallForHelpResultMessageEvent */],onCallForHelpResultMessageEvent);const onIssueCloseNotificationMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const message=parser.messageText.length===0?LocalizeText('help.cfh.closed.'+GetCloseReasonKey(parser.closeReason)):parser.messageText;NotificationUtilities_NotificationUtilities.simpleAlert(message,NotificationAlertType.MODERATION,null,null,LocalizeText('mod.alert.title'));},[]);UseMessageEventHook(nitro_renderer[\"Pd\" /* IssueCloseNotificationMessageEvent */],onIssueCloseNotificationMessageEvent);return null;};\n// CONCATENATED MODULE: ./src/components/help/views/DescribeReportView.tsx\nconst DescribeReportView=props=>{const[message,setMessage]=Object(react[\"useState\"])('');const{helpReportState=null,setHelpReportState=null}=useHelpContext();const{reportedChats,cfhTopic,reportedUserId}=helpReportState;const submitReport=()=>{if(message.length<15)return;const roomId=reportedChats[0].roomId;const chats=[];reportedChats.forEach(entry=>{chats.push(entry.entityId);chats.push(entry.message);});SendMessageComposer(new nitro_renderer[\"K\" /* CallForHelpMessageComposer */](message,cfhTopic,reportedUserId,roomId,chats));CreateLinkEvent('help/hide');};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,children:LocalizeText('help.emergency.chat_report.subtitle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('help.cfh.input.text')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control h-100\",value:message,onChange:event=>setMessage(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",disabled:message.length<15,onClick:submitReport,children:LocalizeText('help.bully.submit')})]});};\n// CONCATENATED MODULE: ./src/components/help/views/HelpIndexView.tsx\nconst HelpIndexView=props=>{const{helpReportState=null,setHelpReportState=null}=useHelpContext();const onReportClick=Object(react[\"useCallback\"])(()=>{const reportState=Object.assign({},helpReportState);reportState.currentStep=1;setHelpReportState(reportState);},[helpReportState,setHelpReportState]);const onRequestMySanctionStatusClick=Object(react[\"useCallback\"])(()=>{SendMessageComposer(new nitro_renderer[\"hc\" /* GetCfhStatusMessageComposer */](false));},[]);const onNewHelpRequestClick=Object(react[\"useCallback\"])(()=>{DispatchUiEvent(new GuideToolEvent_GuideToolEvent(GuideToolEvent_GuideToolEvent.CREATE_HELP_REQUEST));},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:3,children:LocalizeText('help.main.frame.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('help.main.self.description')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:onReportClick,children:LocalizeText('help.main.bully.subtitle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:onNewHelpRequestClick,children:LocalizeText('help.main.help.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:true,children:LocalizeText('help.main.self.tips.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"link\",className:\"text-black\",onClick:onRequestMySanctionStatusClick,children:LocalizeText('help.main.my.sanction.status')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/name-change/NameChangeConfirmationView.tsx\nconst NameChangeConfirmationView=props=>{const{username='',onAction=null}=props;const[isConfirming,setIsConfirming]=Object(react[\"useState\"])(false);const onUserNameChangeMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;if(parser.webId!==GetSessionDataManager().userId)return;onAction('close');},[onAction]);UseMessageEventHook(nitro_renderer[\"Gi\" /* UserNameChangeMessageEvent */],onUserNameChangeMessageEvent);const confirm=Object(react[\"useCallback\"])(()=>{if(isConfirming)return;setIsConfirming(true);SendMessageComposer(new nitro_renderer[\"cb\" /* ChangeUserNameMessageComposer */](username));},[isConfirming,username]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column gap-4 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:LocalizeText('tutorial.name_change.info.confirm')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column align-items-center gap-1 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('tutorial.name_change.confirm')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"fw-bold\",children:username})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-success w-100\",disabled:isConfirming,onClick:confirm,children:LocalizeText('generic.ok')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>onAction('close'),children:LocalizeText('cancel')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/name-change/NameChangeInitView.tsx\nconst NameChangeInitView=props=>{const{onAction=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column gap-4 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:LocalizeText('tutorial.name_change.info.main')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"fw-bold d-flex align-items-center justify-content-center h-100 w-100\",children:LocalizeText('tutorial.name_change.current',['name'],[GetSessionDataManager().userName])}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-success w-100\",onClick:()=>onAction('start'),children:LocalizeText('tutorial.name_change.change')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>onAction('confirmation',GetSessionDataManager().userName),children:LocalizeText('tutorial.name_change.keep')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/name-change/NameChangeInputView.tsx\nconst AVAILABLE=0;const TOO_SHORT=2;const TOO_LONG=3;const NOT_VALID=4;const TAKEN_WITH_SUGGESTIONS=5;const DISABLED=6;const NameChangeInputView=props=>{const{onAction=null}=props;const[newUsername,setNewUsername]=Object(react[\"useState\"])('');const[canProceed,setCanProceed]=Object(react[\"useState\"])(false);const[isChecking,setIsChecking]=Object(react[\"useState\"])(false);const[errorCode,setErrorCode]=Object(react[\"useState\"])(null);const[suggestions,setSuggestions]=Object(react[\"useState\"])([]);const onCheckUserNameResultMessageEvent=Object(react[\"useCallback\"])(event=>{setIsChecking(false);const parser=event.getParser();if(!parser)return;switch(parser.resultCode){case AVAILABLE:setCanProceed(true);break;case TOO_SHORT:setErrorCode('short');break;case TOO_LONG:setErrorCode('long');break;case NOT_VALID:setErrorCode('invalid');break;case TAKEN_WITH_SUGGESTIONS:setSuggestions(parser.nameSuggestions);setErrorCode('taken');break;case DISABLED:setErrorCode('change_not_allowed');}},[]);UseMessageEventHook(nitro_renderer[\"eb\" /* CheckUserNameResultMessageEvent */],onCheckUserNameResultMessageEvent);const check=Object(react[\"useCallback\"])(()=>{if(newUsername==='')return;setCanProceed(false);setSuggestions([]);setErrorCode(null);setIsChecking(true);SendMessageComposer(new nitro_renderer[\"db\" /* CheckUserNameMessageComposer */](newUsername));},[newUsername]);const handleUsernameChange=Object(react[\"useCallback\"])(username=>{setCanProceed(false);setSuggestions([]);setErrorCode(null);setNewUsername(username);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column gap-3 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:LocalizeText('tutorial.name_change.info.select')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:newUsername,onChange:e=>handleUsernameChange(e.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary\",disabled:newUsername===''||isChecking,onClick:check,children:LocalizeText('tutorial.name_change.check')})]}),!errorCode&&!canProceed&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-muted rounded p-2 text-center\",children:LocalizeText('help.tutorial.name.info')}),errorCode&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-danger rounded p-2 text-center text-white\",children:LocalizeText(`help.tutorial.name.${errorCode}`,['name'],[newUsername])}),canProceed&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"bg-success rounded p-2 text-center text-white\",children:LocalizeText('help.tutorial.name.available',['name'],[newUsername])}),suggestions&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex flex-column gap-2\",children:suggestions.map((suggestion,i)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col bg-muted rounded p-1 cursor-pointer\",onClick:()=>handleUsernameChange(suggestion),children:suggestion},i);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-success w-100\",disabled:!canProceed,onClick:()=>onAction('confirmation',newUsername),children:LocalizeText('tutorial.name_change.pick')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary w-100\",onClick:()=>onAction('close'),children:LocalizeText('cancel')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/name-change/NameChangeView.tsx\nconst INIT='INIT';const INPUT='INPUT';const CONFIRMATION='CONFIRMATION';const NameChangeView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[layout,setLayout]=Object(react[\"useState\"])(INIT);const[newUsername,setNewUsername]=Object(react[\"useState\"])('');const onHelpNameChangeEvent=Object(react[\"useCallback\"])(event=>{setLayout(INIT);setIsVisible(true);},[]);UseUiEvent(HelpNameChangeEvent_HelpNameChangeEvent.INIT,onHelpNameChangeEvent);const onAction=Object(react[\"useCallback\"])((action,value)=>{switch(action){case'start':setLayout(INPUT);break;case'confirmation':setNewUsername(value);setLayout(CONFIRMATION);break;case'close':setNewUsername('');setIsVisible(false);break;}},[]);const titleKey=Object(react[\"useMemo\"])(()=>{switch(layout){case INIT:return'tutorial.name_change.title.main';case INPUT:return'tutorial.name_change.title.select';case CONFIRMATION:return'tutorial.name_change.title.confirm';}},[layout]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-change-username\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText(titleKey),onCloseClick:()=>onAction('close')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[layout===INIT&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NameChangeInitView,{onAction:onAction}),layout===INPUT&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NameChangeInputView,{onAction:onAction}),layout===CONFIRMATION&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NameChangeConfirmationView,{username:newUsername,onAction:onAction})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/SanctionStatusView.tsx\nconst SanctionSatusView=props=>{const[sanctionInfo,setSanctionInfo]=Object(react[\"useState\"])(null);const onSanctionStatusEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;setSanctionInfo(parser);},[]);UseMessageEventHook(nitro_renderer[\"Ch\" /* SanctionStatusEvent */],onSanctionStatusEvent);const sanctionLocalization=Object(react[\"useCallback\"])((param,sanctionName,length)=>{let localizationName=`help.sanction.${param}`;switch(sanctionName){case'ALERT':localizationName=localizationName+'.alert';break;case'MUTE':localizationName=localizationName+'.mute';break;case'BAN_PERMANENT':localizationName=localizationName+'.permban';break;default:localizationName=localizationName+'.ban';if(length>24){localizationName=localizationName+'.days';return LocalizeText(localizationName,['days'],[(length/24).toString()]);}}return LocalizeText(localizationName,['hours'],[length.toString()]);},[]);if(!sanctionInfo)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-help\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('help.sanction.info.title'),onCloseClick:()=>setSanctionInfo(null)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:5,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"index-image\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:[sanctionInfo.sanctionReason==='cfh.reason.EMPTY'?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-12 fw-bold\",children:LocalizeText('help.sanction.current.none')}):/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[(sanctionInfo.probationHoursLeft>0||sanctionInfo.isSanctionActive)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-12 fw-bold\",children:LocalizeText('help.sanction.probation.reminder')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:`col-12 fw-bold ${sanctionInfo.isSanctionNew?'text-danger':''}`,children:[LocalizeText('help.sanction.last.sanction'),\" \",sanctionLocalization('current',sanctionInfo.sanctionName,sanctionInfo.sanctionLengthHours)]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-12\",children:[LocalizeText('generic.start.time'),\" \",sanctionInfo.sanctionCreationTime]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-12\",children:[LocalizeText('generic.reason'),\" \",sanctionInfo.sanctionReason]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-12\",children:[LocalizeText('help.sanction.probation.days.left'),\" \",Math.trunc(sanctionInfo.probationHoursLeft/24)+1]})]}),sanctionInfo.hasCustomMute&&!sanctionInfo.isSanctionActive&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-12 fw-bold\",children:LocalizeText('help.sanction.custom.mute')}),sanctionInfo.tradeLockExpiryTime&&sanctionInfo.tradeLockExpiryTime.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-12 fw-bold\",children:[LocalizeText('trade.locked.until'),\" \",sanctionInfo.tradeLockExpiryTime]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-12\",children:sanctionLocalization('next',sanctionInfo.nextSanctionName,sanctionInfo.nextSanctionLengthHours)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>setSanctionInfo(null),children:LocalizeText('habbo.way.ok.button')})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/help/views/SelectReportedChatsView.tsx\nconst SelectReportedChatsView=props=>{const[selectedChats,setSelectedChats]=Object(react[\"useState\"])(new Map());const{helpReportState=null,setHelpReportState=null}=useHelpContext();const{reportedUserId=-1}=helpReportState;const userChats=Object(react[\"useMemo\"])(()=>{return GetChatHistory().chats.filter(chat=>chat.type===ChatEntryType.TYPE_CHAT&&chat.entityId===reportedUserId&&chat.entityType===nitro_renderer[\"Mg\" /* RoomObjectType */].USER);},[reportedUserId]);const selectChat=chatEntry=>{const chats=new Map(selectedChats);if(chats.has(chatEntry.id))chats.delete(chatEntry.id);else chats.set(chatEntry.id,chatEntry);setSelectedChats(chats);};const submitChats=()=>{if(!selectedChats||selectedChats.size<=0)return;setHelpReportState(prevValue=>{const reportedChats=Array.from(selectedChats.values());const currentStep=3;return{...prevValue,reportedChats,currentStep};});};const back=()=>{setHelpReportState(prevValue=>{const currentStep=prevValue.currentStep-1;return{...prevValue,currentStep};});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,children:LocalizeText('help.emergency.chat_report.subtitle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('help.emergency.chat_report.description')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"hidden\",children:[!!!userChats.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('help.cfh.error.no_user_data')}),userChats.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{gap:1,columnCount:1,columnMinHeight:25,overflow:\"auto\",children:userChats.map((chat,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{onClick:event=>selectChat(chat),itemActive:selectedChats.has(chat.id),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:chat.message})},chat.id);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:selectedChats.size<=0,onClick:submitChats,children:LocalizeText('help.emergency.main.submit.button')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/views/SelectReportedUserView.tsx\nconst SelectReportedUserView=props=>{const[selectedUserId,setSelectedUserId]=Object(react[\"useState\"])(-1);const{helpReportState=null,setHelpReportState=null}=useHelpContext();const availableUsers=Object(react[\"useMemo\"])(()=>{const users=new Map();GetChatHistory().chats.forEach(chat=>{if(chat.type===ChatEntryType.TYPE_CHAT&&chat.entityType===nitro_renderer[\"Mg\" /* RoomObjectType */].USER&&chat.entityId!==GetSessionDataManager().userId){if(!users.has(chat.entityId)){users.set(chat.entityId,{id:chat.entityId,username:chat.name});}}});return Array.from(users.values());},[]);const submitUser=()=>{if(selectedUserId<=0)return;setHelpReportState(prevValue=>{const reportedUserId=selectedUserId;const currentStep=2;return{...prevValue,reportedUserId,currentStep};});};const selectUser=userId=>{if(selectedUserId===userId)setSelectedUserId(-1);else setSelectedUserId(userId);};const back=()=>{setHelpReportState(prevValue=>{const currentStep=prevValue.currentStep-1;return{...prevValue,currentStep};});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,children:LocalizeText('help.emergency.main.step.two.title')}),availableUsers.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('report.user.pick.user')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"hidden\",children:[!!!availableUsers.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('report.user.error.nolist')}),availableUsers.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:1,columnMinHeight:25,gap:1,children:availableUsers.map((user,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{onClick:event=>selectUser(user.id),itemActive:selectedUserId===user.id,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{dangerouslySetInnerHTML:{__html:user.username}})},user.id);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:selectedUserId<=0,onClick:submitUser,children:LocalizeText('help.emergency.main.submit.button')})]})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/common/GetCFHCategories.ts\nlet GetCFHCategories_cfhCategories=[];const SetCfhCategories=categories=>GetCFHCategories_cfhCategories=categories;const GetCfhCategories=()=>GetCFHCategories_cfhCategories;\n// CONCATENATED MODULE: ./src/components/help/views/SelectTopicView.tsx\nconst SelectTopicView=props=>{const{setHelpReportState=null}=useHelpContext();const[selectedCategory,setSelectedCategory]=Object(react[\"useState\"])(-1);const[selectedTopic,setSelectedTopic]=Object(react[\"useState\"])(-1);const cfhCategories=Object(react[\"useMemo\"])(()=>GetCfhCategories(),[]);const submitTopic=()=>{if(selectedCategory<0||selectedTopic<0)return;setHelpReportState(prevValue=>{const cfhCategory=selectedCategory;const cfhTopic=cfhCategories[selectedCategory].topics[selectedTopic].id;const currentStep=4;return{...prevValue,cfhCategory,cfhTopic,currentStep};});};const back=()=>{setHelpReportState(prevValue=>{const currentStep=prevValue.currentStep-1;return{...prevValue,currentStep};});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,children:LocalizeText('help.emergency.chat_report.subtitle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('help.cfh.pick.topic')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"auto\",children:[selectedCategory<0&&cfhCategories.map((category,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>setSelectedCategory(index),children:LocalizeText(`help.cfh.reason.${category.name}`)},index)),selectedCategory>=0&&cfhCategories[selectedCategory].topics.map((topic,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>setSelectedTopic(index),active:selectedTopic===index,children:LocalizeText(`help.cfh.topic.${topic.id}`)},index))]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:selectedTopic<0,onClick:submitTopic,children:LocalizeText('help.emergency.main.submit.button')})]})]});};\n// CONCATENATED MODULE: ./src/components/help/HelpView.tsx\nconst HelpView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[helpReportState,setHelpReportState]=Object(react[\"useState\"])({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:0});const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},[]);const onHelpReportUserEvent=Object(react[\"useCallback\"])(event=>{setHelpReportState({reportedUserId:event.reportedUserId,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:2});setIsVisible(true);},[]);UseUiEvent(HelpReportUserEvent_HelpReportUserEvent.REPORT_USER,onHelpReportUserEvent);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'help/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;setHelpReportState({reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,message:'',currentStep:0});},[isVisible]);const CurrentStepView=Object(react[\"useCallback\"])(()=>{switch(helpReportState.currentStep){case 0:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HelpIndexView,{});case 1:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SelectReportedUserView,{});case 2:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SelectReportedChatsView,{});case 3:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SelectTopicView,{});case 4:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DescribeReportView,{});}return null;},[helpReportState.currentStep]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(HelpContextProvider,{value:{helpReportState,setHelpReportState},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HelpMessageHandler,{}),isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-help\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('help.button.cfh'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:5,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"index-image\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CurrentStepView,{})})]})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SanctionSatusView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NameChangeView,{})]});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/bonus-rare/BonusRareWidgetView.tsx\nconst BonusRareWidgetView=props=>{const[productType,setProductType]=Object(react[\"useState\"])(null);const[productClassId,setProductClassId]=Object(react[\"useState\"])(null);const[totalCoinsForBonus,setTotalCoinsForBonus]=Object(react[\"useState\"])(null);const[coinsStillRequiredToBuy,setCoinsStillRequiredToBuy]=Object(react[\"useState\"])(null);const onBonusRareInfoMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setProductType(parser.productType);setProductClassId(parser.productClassId);setTotalCoinsForBonus(parser.totalCoinsForBonus);setCoinsStillRequiredToBuy(parser.coinsStillRequiredToBuy);},[]);UseMessageEventHook(nitro_renderer[\"x\" /* BonusRareInfoMessageEvent */],onBonusRareInfoMessageEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"cc\" /* GetBonusRareInfoMessageComposer */]());},[]);if(!productType)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bonus-rare widget d-flex\",children:[productType,/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0\",children:totalCoinsForBonus-coinsStillRequiredToBuy+'/'+totalCoinsForBonus}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"small bg-info rounded position-absolute top-0 h-100\",style:{width:(totalCoinsForBonus-coinsStillRequiredToBuy)/totalCoinsForBonus*100+'%'}})]})]});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/hall-of-fame-item/HallOfFameItemView.tsx\nconst HallOfFameItemView=props=>{const{data=null,level=0}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"hof-user-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"hof-tooltip\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"hof-header\",children:[level,\". \",data.userName,\" \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:data.userId})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"small text-center text-white\",children:LocalizeText('landing.view.competition.hof.points',['points'],[LocalizeFormattedNumber(data.currentScore).toString()])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:data.figure,direction:2})]});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/hall-of-fame/HallOfFameWidgetView.tsx\nconst HallOfFameWidgetView=props=>{const{slot=-1,conf=null}=props;const[data,setData]=Object(react[\"useState\"])(null);const onCommunityGoalHallOfFameMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setData(parser.data);},[]);UseMessageEventHook(nitro_renderer[\"kb\" /* CommunityGoalHallOfFameMessageEvent */],onCommunityGoalHallOfFameMessageEvent);Object(react[\"useEffect\"])(()=>{const campaign=conf?conf['campaign']:'';SendMessageComposer(new nitro_renderer[\"kc\" /* GetCommunityGoalHallOfFameMessageComposer */](campaign));},[conf]);if(!data)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"hall-of-fame d-flex\",children:data.hof&&data.hof.length>0&&data.hof.map((entry,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HallOfFameItemView,{data:entry,level:index+1},index);})});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/promo-article/PromoArticleWidgetView.tsx\nconst PromoArticleWidgetView=props=>{const[articles,setArticles]=Object(react[\"useState\"])(null);const[index,setIndex]=Object(react[\"useState\"])(0);const onPromoArticlesMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setArticles(parser.articles);},[]);UseMessageEventHook(nitro_renderer[\"zf\" /* PromoArticlesMessageEvent */],onPromoArticlesMessageEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"wc\" /* GetPromoArticlesComposer */]());},[]);if(!articles)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"promo-articles widget mb-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-row align-items-center w-100 mb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"small\",{className:\"flex-shrink-0 pe-1\",children:LocalizeText('landing.view.promo.article.header')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"w-100 my-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex flex-row mb-1\",children:articles&&articles.length>0&&articles.map((article,ind)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'promo-articles-bullet cursor-pointer '+(article===articles[index]?'promo-articles-bullet-active':''),onClick:event=>setIndex(ind)},article.id))}),articles&&articles[index]&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"promo-article d-flex flex-row row mx-0\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"promo-article-image\",style:{backgroundImage:`url(${articles[index].imageUrl})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-3 d-flex flex-column h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{className:\"my-0\",children:articles[index].title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:articles[index].bodyText}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-sm mt-auto btn-gainsboro\",onClick:event=>NotificationUtilities_NotificationUtilities.openUrl(articles[index].linkContent),children:articles[index].buttonText})]})]})]});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/widget-container/WidgetContainerView.tsx\nconst WidgetContainerView=props=>{const{conf=null}=props;const getOption=Object(react[\"useCallback\"])(key=>{const option=conf[key];if(!option)return null;switch(key){case'image':return GetConfigurationManager().interpolate(option);}return option;},[conf]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"widgetcontainer widget d-flex flex-row overflow-hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"widgetcontainer-image flex-shrink-0\",style:{backgroundImage:`url(${getOption('image')})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex flex-column align-self-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{className:\"my-0\",children:LocalizeText(`landing.view.${getOption('texts')}.header`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{children:LocalizeText(`landing.view.${getOption('texts')}.body`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-sm btn-gainsboro align-self-start px-3 mt-auto\",onClick:event=>NotificationUtilities_NotificationUtilities.openUrl(getOption('btnLink')),children:LocalizeText(`landing.view.${getOption('texts')}.button`)})]})]});};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/GetWidgetLayout.tsx\nconst GetWidgetLayout=props=>{switch(props.widgetType){case'promoarticle':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PromoArticleWidgetView,{});case'achievementcompetition_hall_of_fame':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HallOfFameWidgetView,{slot:props.slot,conf:props.widgetConf});case'bonusrare':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(BonusRareWidgetView,{});case'widgetcontainer':return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetContainerView,{conf:props.widgetConf});default:return null;}};\n// CONCATENATED MODULE: ./src/components/hotel-view/views/widgets/WidgetSlotView.tsx\nconst WidgetSlotView=props=>{const{widgetType=null,widgetSlot=0,widgetConf=null,className='',...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:`widget-slot slot-${widgetSlot} ${className||''}`,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GetWidgetLayout,{widgetType:widgetType,slot:widgetSlot,widgetConf:widgetConf})});};\n// CONCATENATED MODULE: ./src/components/hotel-view/HotelView.tsx\nconst widgetSlotCount=7;const HotelView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(true);const{userFigure=null}=useSessionInfo();const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED:setIsVisible(false);return;case nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED:setIsVisible(event.openLandingView);return;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);if(!isVisible)return null;const backgroundColor=GetConfiguration('hotelview')['images']['background.colour'];const background=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['background']);const sun=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['sun']);const drape=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['drape']);const left=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['left']);const rightRepeat=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['right.repeat']);const right=GetConfigurationManager().interpolate(GetConfiguration('hotelview')['images']['right']);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"nitro-hotel-view\",style:backgroundColor&&backgroundColor?{background:backgroundColor}:{},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container h-100 py-3 overflow-hidden landing-widgets\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"row h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-9 h-100 d-flex flex-column\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:1,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+1+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+1+'.conf'],className:\"col-6\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"col-12 row mx-0\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:2,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+2+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+2+'.conf'],className:\"col-7\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:3,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+3+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+3+'.conf'],className:\"col-5\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:4,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+4+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+4+'.conf'],className:\"col-7\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:5,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+5+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+5+'.conf'],className:\"col-5\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:6,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+6+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+6+'.conf'],className:\"mt-auto\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col-3 h-100\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WidgetSlotView,{widgetSlot:7,widgetType:GetConfiguration('hotelview')['widgets']['slot.'+7+'.widget'],widgetConf:GetConfiguration('hotelview')['widgets']['slot.'+7+'.conf']})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"background position-absolute\",style:background&&background.length?{backgroundImage:`url(${background})`}:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"sun position-absolute\",style:sun&&sun.length?{backgroundImage:`url(${sun})`}:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"drape position-absolute\",style:drape&&drape.length?{backgroundImage:`url(${drape})`}:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"left position-absolute\",style:left&&left.length?{backgroundImage:`url(${left})`}:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"right-repeat position-absolute\",style:rightRepeat&&rightRepeat.length?{backgroundImage:`url(${rightRepeat})`}:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"right position-absolute\",style:right&&right.length?{backgroundImage:`url(${right})`}:{}}),GetConfiguration('hotelview')['show.avatar']&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"avatar-image\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userFigure,direction:2})})]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/badge/InventoryBadgeItemView.tsx\nconst InventoryBadgeItemView=props=>{const{badgeCode=null,children=null,...rest}=props;const{selectedBadgeCode=null,setSelectedBadgeCode=null,getBadgeId=null}=useInventoryBadges();const{isUnseen=null}=useInventoryUnseenTracker();const unseen=isUnseen(UnseenItemCategory.BADGE,getBadgeId(badgeCode));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemActive:selectedBadgeCode===badgeCode,itemUnseen:unseen,onMouseDown:event=>setSelectedBadgeCode(badgeCode),...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badgeCode}),children]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/badge/InventoryBadgeView.tsx\nconst InventoryBadgeView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{badgeCodes=[],activeBadgeCodes=[],selectedBadgeCode=null,isWearingBadge=null,canWearBadges=null,toggleBadge=null,getBadgeId=null,activate=null,deactivate=null}=useInventoryBadges();const{isUnseen=null,removeUnseen=null}=useInventoryUnseenTracker();Object(react[\"useEffect\"])(()=>{if(!selectedBadgeCode||!isUnseen(UnseenItemCategory.BADGE,getBadgeId(selectedBadgeCode)))return;removeUnseen(UnseenItemCategory.BADGE,getBadgeId(selectedBadgeCode));},[selectedBadgeCode,isUnseen,removeUnseen,getBadgeId]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:4,children:badgeCodes&&badgeCodes.length>0&&badgeCodes.map((badgeCode,index)=>{if(activeBadgeCodes.indexOf(badgeCode)>=0)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryBadgeItemView,{badgeCode:badgeCode},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"justify-content-between\",size:5,overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('inventory.badges.activebadges')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,children:activeBadgeCodes&&activeBadgeCodes.length>0&&activeBadgeCodes.map((badgeCode,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryBadgeItemView,{badgeCode:badgeCode},index))})]}),!!selectedBadgeCode&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"end\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{shrink:true,badgeCode:selectedBadgeCode}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeBadgeName(selectedBadgeCode)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{disabled:!isWearingBadge(selectedBadgeCode)&&!canWearBadges(),onClick:event=>toggleBadge(selectedBadgeCode),children:LocalizeText(isWearingBadge(selectedBadgeCode)?'inventory.badges.clearbadge':'inventory.badges.wearbadge')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/InventoryCategoryEmptyView.tsx\nconst InventoryCategoryEmptyView=props=>{const{title='',desc='',children=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:5,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"empty-image\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"center\",size:7,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:5,overflow:\"unset\",truncate:true,children:title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{overflow:\"auto\",children:desc})]}),children]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/bot/InventoryBotItemView.tsx\nconst InventoryBotItemView=props=>{const{botItem=null,children=null,...rest}=props;const[isMouseDown,setMouseDown]=Object(react[\"useState\"])(false);const{selectedBot=null,setSelectedBot=null}=useInventoryBots();const{isUnseen=null}=useInventoryUnseenTracker();const unseen=isUnseen(UnseenItemCategory.BOT,botItem.botData.id);const onMouseEvent=event=>{switch(event.type){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN:setSelectedBot(botItem);setMouseDown(true);return;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP:setMouseDown(false);return;case nitro_renderer[\"Ce\" /* MouseEventType */].ROLL_OUT:if(!isMouseDown||selectedBot!==botItem)return;attemptBotPlacement(botItem);return;}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemActive:selectedBot===botItem,itemUnseen:unseen,onMouseDown:onMouseEvent,onMouseUp:onMouseEvent,onMouseOut:onMouseEvent,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:botItem.botData.figure,direction:3,headOnly:true}),children]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/bot/InventoryBotView.tsx\nconst InventoryBotView=props=>{const{roomSession=null,roomPreviewer=null}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{botItems=[],selectedBot=null,activate=null,deactivate=null}=useInventoryBots();const{isUnseen=null,removeUnseen=null}=useInventoryUnseenTracker();Object(react[\"useEffect\"])(()=>{if(!selectedBot||!roomPreviewer)return;const botData=selectedBot.botData;const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.addAvatarIntoRoom(botData.figure,0);},[roomPreviewer,selectedBot]);Object(react[\"useEffect\"])(()=>{if(!selectedBot||!isUnseen(UnseenItemCategory.BOT,selectedBot.botData.id))return;removeUnseen(UnseenItemCategory.BOT,selectedBot.botData.id);},[selectedBot,isUnseen,removeUnseen]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);if(!botItems||!botItems.length)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.bots.title'),desc:LocalizeText('inventory.empty.bots.desc')});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:5,children:botItems&&botItems.length>0&&botItems.map(item=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryBotItemView,{botItem:item},item.botData.id))})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140})}),selectedBot&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,truncate:true,children:selectedBot.botData.name}),!!roomSession&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>attemptBotPlacement(selectedBot),children:LocalizeText('inventory.furni.placetoroom')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/furniture/InventoryFurnitureItemView.tsx\nconst InventoryFurnitureItemView=props=>{const{groupItem=null,...rest}=props;const[isMouseDown,setMouseDown]=Object(react[\"useState\"])(false);const{selectedItem=null,setSelectedItem=null}=useInventoryFurni();const onMouseEvent=event=>{switch(event.type){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN:setSelectedItem(groupItem);setMouseDown(true);return;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP:setMouseDown(false);return;case nitro_renderer[\"Ce\" /* MouseEventType */].ROLL_OUT:if(!isMouseDown||!(groupItem===selectedItem))return;attemptItemPlacement(groupItem);return;}};const count=groupItem.getUnlockedCount();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{className:!count?'opacity-0-5 ':'',itemImage:groupItem.iconUrl,itemCount:groupItem.getUnlockedCount(),itemActive:groupItem===selectedItem,itemUniqueNumber:groupItem.stuffData.uniqueNumber,itemUnseen:groupItem.hasUnseenItems,onMouseDown:onMouseEvent,onMouseUp:onMouseEvent,onMouseOut:onMouseEvent,...rest});};\n// CONCATENATED MODULE: ./src/components/inventory/views/furniture/InventoryFurnitureSearchView.tsx\nconst InventoryFurnitureSearchView=props=>{const{groupItems=[],setGroupItems=null}=props;const[searchValue,setSearchValue]=Object(react[\"useState\"])('');Object(react[\"useEffect\"])(()=>{let filteredGroupItems=[...groupItems];if(searchValue&&searchValue.length){const comparison=searchValue.toLocaleLowerCase();filteredGroupItems=groupItems.filter(item=>{if(comparison&&comparison.length){if(item.name.toLocaleLowerCase().includes(comparison))return item;}return null;});}setGroupItems(filteredGroupItems);},[groupItems,setGroupItems,searchValue]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>setSearchValue(event.target.value)})});};\n// CONCATENATED MODULE: ./src/components/inventory/views/furniture/InventoryFurnitureView.tsx\nconst attemptPlaceMarketplaceOffer=groupItem=>{const item=groupItem.getLastItem();if(!item)return false;if(!item.sellable)return false;DispatchUiEvent(new CatalogPostMarketplaceOfferEvent_CatalogPostMarketplaceOfferEvent(item));};const InventoryFurnitureView=props=>{const{roomSession=null,roomPreviewer=null}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[filteredGroupItems,setFilteredGroupItems]=Object(react[\"useState\"])([]);const{groupItems=[],selectedItem=null,activate=null,deactivate=null}=useInventoryFurni();const{resetItems=null}=useInventoryUnseenTracker();Object(react[\"useEffect\"])(()=>{if(!selectedItem||!roomPreviewer)return;const furnitureItem=selectedItem.getLastItem();if(!furnitureItem)return;const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);if(furnitureItem.category===FurniCategory.WALL_PAPER||furnitureItem.category===FurniCategory.FLOOR||furnitureItem.category===FurniCategory.LANDSCAPE){floorType=furnitureItem.category===FurniCategory.FLOOR?selectedItem.stuffData.getLegacyString():floorType;wallType=furnitureItem.category===FurniCategory.WALL_PAPER?selectedItem.stuffData.getLegacyString():wallType;landscapeType=furnitureItem.category===FurniCategory.LANDSCAPE?selectedItem.stuffData.getLegacyString():landscapeType;roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);if(furnitureItem.category===FurniCategory.LANDSCAPE){const data=GetSessionDataManager().getWallItemDataByName('noob_window_double');if(data)roomPreviewer.addWallItemIntoRoom(data.id,new nitro_renderer[\"Ui\" /* Vector3d */](90,0,0),data.customParams);}}else{if(selectedItem.isWallItem){roomPreviewer.addWallItemIntoRoom(selectedItem.type,new nitro_renderer[\"Ui\" /* Vector3d */](90),furnitureItem.stuffData.getLegacyString());}else{roomPreviewer.addFurnitureIntoRoom(selectedItem.type,new nitro_renderer[\"Ui\" /* Vector3d */](90),selectedItem.stuffData,furnitureItem.extra.toString());}}},[roomPreviewer,selectedItem]);Object(react[\"useEffect\"])(()=>{if(!selectedItem||!selectedItem.hasUnseenItems)return;resetItems(UnseenItemCategory.FURNI,selectedItem.items.map(item=>item.id));selectedItem.hasUnseenItems=false;},[selectedItem,resetItems]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);if(!groupItems||!groupItems.length)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.title'),desc:LocalizeText('inventory.empty.desc')});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryFurnitureSearchView,{groupItems:groupItems,setGroupItems:setFilteredGroupItems}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:5,children:filteredGroupItems&&filteredGroupItems.length>0&&filteredGroupItems.map((item,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryFurnitureItemView,{groupItem:item},index))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",position:\"relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140}),selectedItem&&selectedItem.stuffData.isUnique&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionCompactPlateView,{className:\"top-2 end-2\",position:\"absolute\",uniqueNumber:selectedItem.stuffData.uniqueNumber,uniqueSeries:selectedItem.stuffData.uniqueSeries}),selectedItem&&selectedItem.stuffData.rarityLevel>-1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRarityLevelView,{className:\"top-2 end-2\",position:\"absolute\",level:selectedItem.stuffData.rarityLevel})]}),selectedItem&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,truncate:true,children:selectedItem.name}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[!!roomSession&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>attemptItemPlacement(selectedItem),children:LocalizeText('inventory.furni.placetoroom')}),selectedItem&&selectedItem.isSellable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>attemptPlaceMarketplaceOffer(selectedItem),children:LocalizeText('inventory.marketplace.sell')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/furniture/InventoryTradeView.tsx\nconst MAX_ITEMS_TO_TRADE=9;const InventoryTradeView=props=>{const{cancelTrade=null}=props;const[groupItem,setGroupItem]=Object(react[\"useState\"])(null);const[ownGroupItem,setOwnGroupItem]=Object(react[\"useState\"])(null);const[otherGroupItem,setOtherGroupItem]=Object(react[\"useState\"])(null);const[filteredGroupItems,setFilteredGroupItems]=Object(react[\"useState\"])(null);const[countdownTick,setCountdownTick]=Object(react[\"useState\"])(3);const{ownUser=null,otherUser=null,groupItems=[],tradeState=TradeState.TRADING_STATE_READY,progressTrade=null,removeItem=null,setTradeState=null}=useInventoryTrade();const canTradeItem=(isWallItem,spriteId,category,groupable,stuffData)=>{if(!ownUser||ownUser.accepts||!ownUser.userItems)return false;if(ownUser.userItems.length<MAX_ITEMS_TO_TRADE)return true;if(!groupable)return false;let type=spriteId.toString();if(category===FurniCategory.POSTER){type=type+'poster'+stuffData.getLegacyString();}else{if(category===FurniCategory.GUILD_FURNI){type=getGuildFurniType(spriteId,stuffData);}else{type=(isWallItem?'I':'S')+type;}}return!!ownUser.userItems.getValue(type);};const attemptItemOffer=count=>{if(!groupItem)return;const tradeItems=groupItem.getTradeItems(count);if(!tradeItems||!tradeItems.length)return;let coreItem=null;const itemIds=[];for(const item of tradeItems){itemIds.push(item.id);if(!coreItem)coreItem=item;}const ownItemCount=ownUser.userItems.length;if(ownItemCount+itemIds.length<=1500){if(!coreItem.isGroupable&&itemIds.length){SendMessageComposer(new nitro_renderer[\"di\" /* TradingListAddItemComposer */](itemIds.pop()));}else{const tradeIds=[];for(const itemId of itemIds){if(canTradeItem(coreItem.isWallItem,coreItem.type,coreItem.category,coreItem.isGroupable,coreItem.stuffData)){tradeIds.push(itemId);}}if(tradeIds.length){if(tradeIds.length===1){SendMessageComposer(new nitro_renderer[\"di\" /* TradingListAddItemComposer */](tradeIds.pop()));}else{SendMessageComposer(new nitro_renderer[\"ei\" /* TradingListAddItemsComposer */](...tradeIds));}}}}else{NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('trading.items.too_many_items.desc'),NotificationAlertType.DEFAULT,null,null,LocalizeText('trading.items.too_many_items.title'));}};const getLockIcon=accepts=>{const iconName=accepts?'locked':'open';return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'mt-auto pb-5 icon icon-lock-'+iconName});};Object(react[\"useEffect\"])(()=>{if(tradeState!==TradeState.TRADING_STATE_COUNTDOWN)return;setCountdownTick(3);const interval=setInterval(()=>{setCountdownTick(prevValue=>{const newValue=prevValue-1;if(newValue===0)clearInterval(interval);return newValue;});},1000);return()=>clearInterval(interval);},[tradeState,setTradeState]);Object(react[\"useEffect\"])(()=>{if(countdownTick!==0)return;setTradeState(TradeState.TRADING_STATE_CONFIRMING);},[countdownTick,setTradeState]);if(tradeState===TradeState.TRADING_STATE_READY||!ownUser||!otherUser)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:4,fullWidth:true,overflow:\"hidden\",className:\"trading-inventory\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryFurnitureSearchView,{groupItems:groupItems,setGroupItems:setFilteredGroupItems}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{column:true,fullHeight:true,fullWidth:true,justifyContent:\"between\",overflow:\"hidden\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,children:filteredGroupItems&&filteredGroupItems.length>0&&filteredGroupItems.map((item,index)=>{const count=item.getUnlockedCount();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{className:!count?'opacity-0-5 ':'',itemImage:item.iconUrl,itemCount:count,itemActive:groupItem===item,itemUniqueNumber:item.stuffData.uniqueNumber,onClick:event=>count&&setGroupItem(item),children:count>0&&groupItem===item&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{position:\"absolute\",variant:\"success\",className:\"trade-button bottom-1 end-1\",onClick:event=>attemptItemOffer(1),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\"})})},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullWidth:true,className:\"badge bg-muted\",children:groupItem?groupItem.name:LocalizeText('catalog_selectproduct')})]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,size:8,overflow:\"hidden\",className:\"trade-bg p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:4,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[LocalizeText('inventory.trading.you'),\" \",LocalizeText('inventory.trading.areoffering'),\":\"]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,children:Array.from(Array(MAX_ITEMS_TO_TRADE),(e,i)=>{const item=ownUser.userItems.getWithIndex(i)||null;if(!item)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{},i);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:ownGroupItem===item,itemImage:item.iconUrl,itemCount:item.getTotalCount(),itemUniqueNumber:item.stuffData.uniqueNumber,onClick:event=>setOwnGroupItem(item),children:ownGroupItem===item&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{position:\"absolute\",variant:\"danger\",className:\"trade-button bottom-1 start-1\",onClick:event=>removeItem(item),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\"})})},i);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullWidth:true,className:\"badge bg-muted\",children:ownGroupItem?ownGroupItem.name:LocalizeText('catalog_selectproduct')})]}),getLockIcon(ownUser.accepts),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:4,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[otherUser.userName,\" \",LocalizeText('inventory.trading.isoffering'),\":\"]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,children:Array.from(Array(MAX_ITEMS_TO_TRADE),(e,i)=>{const item=otherUser.userItems.getWithIndex(i)||null;if(!item)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{},i);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGridItem,{itemActive:otherGroupItem===item,itemImage:item.iconUrl,itemCount:item.getTotalCount(),itemUniqueNumber:item.stuffData.uniqueNumber,onClick:event=>setOtherGroupItem(item)},i);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fullWidth:true,className:\"badge bg-muted w-100\",children:otherGroupItem?otherGroupItem.name:LocalizeText('catalog_selectproduct')})]}),getLockIcon(otherUser.accepts)]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{grow:true,justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:cancelTrade,children:LocalizeText('generic.cancel')}),tradeState===TradeState.TRADING_STATE_READY&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",disabled:!ownUser.itemCount&&!otherUser.itemCount,onClick:progressTrade,children:LocalizeText('inventory.trading.accept')}),tradeState===TradeState.TRADING_STATE_RUNNING&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",disabled:!ownUser.itemCount&&!otherUser.itemCount,onClick:progressTrade,children:LocalizeText(ownUser.accepts?'inventory.trading.modify':'inventory.trading.accept')}),tradeState===TradeState.TRADING_STATE_COUNTDOWN&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",disabled:true,children:LocalizeText('inventory.trading.countdown',['counter'],[countdownTick.toString()])}),tradeState===TradeState.TRADING_STATE_CONFIRMING&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:progressTrade,children:LocalizeText('inventory.trading.button.restore')}),tradeState===TradeState.TRADING_STATE_CONFIRMED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",children:LocalizeText('inventory.trading.info.waiting')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/pet/InventoryPetItemView.tsx\nconst InventoryPetItemView=props=>{const{petItem=null,children=null,...rest}=props;const[isMouseDown,setMouseDown]=Object(react[\"useState\"])(false);const{selectedPet=null,setSelectedPet=null}=useInventoryPets();const{isUnseen}=useInventoryUnseenTracker();const unseen=isUnseen(UnseenItemCategory.PET,petItem.petData.id);const onMouseEvent=event=>{switch(event.type){case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_DOWN:setSelectedPet(petItem);setMouseDown(true);return;case nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_UP:setMouseDown(false);return;case nitro_renderer[\"Ce\" /* MouseEventType */].ROLL_OUT:if(!isMouseDown||!(petItem===selectedPet))return;attemptPetPlacement(petItem);return;}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{itemActive:petItem===selectedPet,itemUnseen:unseen,onMouseDown:onMouseEvent,onMouseUp:onMouseEvent,onMouseOut:onMouseEvent,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{figure:petItem.petData.figureData.figuredata,direction:3,headOnly:true}),children]});};\n// CONCATENATED MODULE: ./src/components/inventory/views/pet/InventoryPetView.tsx\nconst InventoryPetView=props=>{const{roomSession=null,roomPreviewer=null}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{petItems=null,selectedPet=null,activate=null,deactivate=null}=useInventoryPets();const{isUnseen=null,removeUnseen=null}=useInventoryUnseenTracker();Object(react[\"useEffect\"])(()=>{if(!selectedPet||!roomPreviewer)return;const petData=selectedPet.petData;const roomEngine=GetRoomEngine();let wallType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_WALL_TYPE);let floorType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_FLOOR_TYPE);let landscapeType=roomEngine.getRoomInstanceVariable(roomEngine.activeRoomId,nitro_renderer[\"Og\" /* RoomObjectVariable */].ROOM_LANDSCAPE_TYPE);wallType=wallType&&wallType.length?wallType:'101';floorType=floorType&&floorType.length?floorType:'101';landscapeType=landscapeType&&landscapeType.length?landscapeType:'1.1';roomPreviewer.reset(false);roomPreviewer.updateRoomWallsAndFloorVisibility(true,true);roomPreviewer.updateObjectRoom(floorType,wallType,landscapeType);roomPreviewer.addPetIntoRoom(petData.figureString);},[roomPreviewer,selectedPet]);Object(react[\"useEffect\"])(()=>{if(!selectedPet||!isUnseen(UnseenItemCategory.PET,selectedPet.petData.id))return;removeUnseen(UnseenItemCategory.PET,selectedPet.petData.id);},[selectedPet,isUnseen,removeUnseen]);Object(react[\"useEffect\"])(()=>{if(!isVisible)return;const id=activate();return()=>deactivate(id);},[isVisible,activate,deactivate]);Object(react[\"useEffect\"])(()=>{setIsVisible(true);return()=>setIsVisible(false);},[]);if(!petItems||!petItems.length)return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryCategoryEmptyView,{title:LocalizeText('inventory.empty.pets.title'),desc:LocalizeText('inventory.empty.pets.desc')});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:5,children:petItems&&petItems.length>0&&petItems.map(item=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryPetItemView,{petItem:item},item.petData.id))})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",position:\"relative\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomPreviewerView,{roomPreviewer:roomPreviewer,height:140})}),selectedPet&&selectedPet.petData&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"between\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{grow:true,truncate:true,children:selectedPet.petData.name}),!!roomSession&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>attemptPetPlacement(selectedPet),children:LocalizeText('inventory.furni.placetoroom')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/inventory/InventoryView.tsx\nconst TAB_FURNITURE='inventory.furni';const TAB_BOTS='inventory.bots';const TAB_PETS='inventory.furni.tab.pets';const TAB_BADGES='inventory.badges';const InventoryView_TABS=[TAB_FURNITURE,TAB_BOTS,TAB_PETS,TAB_BADGES];const UNSEEN_CATEGORIES=[UnseenItemCategory.FURNI,UnseenItemCategory.BOT,UnseenItemCategory.PET,UnseenItemCategory.BADGE];const InventoryView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[currentTab,setCurrentTab]=Object(react[\"useState\"])(InventoryView_TABS[0]);const[roomSession,setRoomSession]=Object(react[\"useState\"])(null);const[roomPreviewer,setRoomPreviewer]=Object(react[\"useState\"])(null);const{isTrading=false,stopTrading=null}=useInventoryTrade();const{getCount=null,resetCategory=null}=useInventoryUnseenTracker();const close=()=>{if(isTrading)stopTrading();setIsVisible(false);};const onRoomEngineObjectPlacedEvent=Object(react[\"useCallback\"])(event=>{if(!isObjectMoverRequested())return;InventoryUtilities_setObjectMoverRequested(false);if(!event.placedInRoom)setIsVisible(true);},[]);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].PLACED,onRoomEngineObjectPlacedEvent);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED:setRoomSession(event.session);return;case nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED:setRoomSession(null);setIsVisible(false);return;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);const onBadgePointLimitsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();for(const data of parser.data)GetLocalization().setBadgePointLimit(data.badgeId,data.limit);},[]);UseMessageEventHook(nitro_renderer[\"t\" /* BadgePointLimitsEvent */],onBadgePointLimitsEvent);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},eventUrlPrefix:'inventory/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);Object(react[\"useEffect\"])(()=>{setRoomPreviewer(new nitro_renderer[\"Qg\" /* RoomPreviewer */](GetRoomEngine(),++nitro_renderer[\"Qg\" /* RoomPreviewer */].PREVIEW_COUNTER));return()=>{setRoomPreviewer(prevValue=>{prevValue.dispose();return null;});};},[]);Object(react[\"useEffect\"])(()=>{if(!isVisible&&isTrading)setIsVisible(true);},[isVisible,isTrading]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:'inventory',className:isTrading?'nitro-inventory trading':'nitro-inventory',theme:isTrading?'primary':'',children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('inventory.title'),onCloseClick:close}),!isTrading&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:InventoryView_TABS.map((name,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:currentTab===name,onClick:event=>setCurrentTab(name),count:getCount(UNSEEN_CATEGORIES[index]),children:LocalizeText(name)},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[currentTab===TAB_FURNITURE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryFurnitureView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_BOTS&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryBotView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_PETS&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryPetView,{roomSession:roomSession,roomPreviewer:roomPreviewer}),currentTab===TAB_BADGES&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryBadgeView,{})]})]}),isTrading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryTradeView,{cancelTrade:close})})]});};\n// CONCATENATED MODULE: ./src/common/ButtonModtool.tsx\nconst ButtonModtool=props=>{const{variant='',size='',active=false,disabled=false,classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['px-4 fw-bold'];if(variant)newClassNames.push('btn-'+variant);if(size)newClassNames.push('btn-'+size);if(active)newClassNames.push('active');if(disabled)newClassNames.push('disabled');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[variant,size,active,disabled,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/components/mod-tools/ModToolsContext.tsx\nconst ModToolsContext=/*#__PURE__*/Object(react[\"createContext\"])({modToolsState:null,dispatchModToolsState:null});const ModToolsContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsContext.Provider,{value:props.value,children:props.children});};const useModToolsContext=()=>Object(react[\"useContext\"])(ModToolsContext);\n// CONCATENATED MODULE: ./src/components/mod-tools/reducers/ModToolsReducer.tsx\nclass ModToolsActions{}ModToolsActions.SET_INIT_DATA='MTA_SET_INIT_DATA';ModToolsActions.SET_CURRENT_ROOM_ID='MTA_SET_CURRENT_ROOM_ID';ModToolsActions.SET_OPEN_ROOMS='MTA_SET_OPEN_ROOMS';ModToolsActions.SET_OPEN_USERINFO='MTA_SET_OPEN_USERINFO';ModToolsActions.SET_OPEN_ROOM_CHATLOGS='MTA_SET_OPEN_CHATLOGS';ModToolsActions.SET_OPEN_USER_CHATLOGS='MTA_SET_OPEN_USER_CHATLOGS';ModToolsActions.SET_TICKETS='MTA_SET_TICKETS';ModToolsActions.SET_CFH_CATEGORIES='MTA_SET_CFH_CATEGORIES';ModToolsActions.RESET_STATE='MTA_RESET_STATE';const initialModTools={settings:null,currentRoomId:null,openRooms:null,openRoomChatlogs:null,openUserChatlogs:null,openUserInfo:null,tickets:null,cfhCategories:null};const ModToolsReducer=(state,action)=>{switch(action.type){case ModToolsActions.SET_INIT_DATA:{const settings=action.payload.settings||state.settings||null;return{...state,settings};}case ModToolsActions.SET_CURRENT_ROOM_ID:{const currentRoomId=action.payload.currentRoomId||state.currentRoomId||null;return{...state,currentRoomId};}case ModToolsActions.SET_OPEN_ROOMS:{const openRooms=action.payload.openRooms||state.openRooms||null;return{...state,openRooms};}case ModToolsActions.SET_OPEN_USERINFO:{const openUserInfo=action.payload.openUserInfo||state.openUserInfo||null;return{...state,openUserInfo};}case ModToolsActions.SET_OPEN_ROOM_CHATLOGS:{const openRoomChatlogs=action.payload.openRoomChatlogs||state.openRoomChatlogs||null;return{...state,openRoomChatlogs};}case ModToolsActions.SET_OPEN_USER_CHATLOGS:{const openUserChatlogs=action.payload.openUserChatlogs||state.openUserChatlogs||null;return{...state,openUserChatlogs};}case ModToolsActions.SET_TICKETS:{const tickets=action.payload.tickets||state.tickets||null;return{...state,tickets};}case ModToolsActions.SET_CFH_CATEGORIES:{const cfhCategories=action.payload.cfhCategories||state.cfhCategories||null;return{...state,cfhCategories};}case ModToolsActions.RESET_STATE:{return{...initialModTools};}default:return state;}};\n// CONCATENATED MODULE: ./src/components/mod-tools/ModToolsMessageHandler.tsx\nconst ModToolsMessageHandler=props=>{const{modToolsState=null,dispatchModToolsState=null}=useModToolsContext();const{openRooms=null,openRoomChatlogs=null,openUserChatlogs=null,openUserInfo=null,tickets=null}=modToolsState;const onModeratorInitMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const data=parser.data;dispatchModToolsState({type:ModToolsActions.SET_INIT_DATA,payload:{settings:data}});dispatchModToolsState({type:ModToolsActions.SET_TICKETS,payload:{tickets:data.issues}});},[dispatchModToolsState]);const onIssueInfoMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const newTickets=tickets?Array.from(tickets):[];const existingIndex=newTickets.findIndex(entry=>entry.issueId===parser.issueData.issueId);if(existingIndex>-1){newTickets[existingIndex]=parser.issueData;}else{newTickets.push(parser.issueData);PlaySound(SoundNames.MODTOOLS_NEW_TICKET);}dispatchModToolsState({type:ModToolsActions.SET_TICKETS,payload:{tickets:newTickets}});},[dispatchModToolsState,tickets]);const onModeratorToolPreferencesEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;},[]);const onIssuePickFailedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;NotificationUtilities_NotificationUtilities.simpleAlert('Failed to pick issue',NotificationAlertType.DEFAULT,null,null,'Error');},[]);const onIssueDeletedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const newTickets=tickets?Array.from(tickets):[];const existingIndex=newTickets.findIndex(entry=>entry.issueId===parser.issueId);if(existingIndex===-1)return;newTickets.splice(existingIndex,1);dispatchModToolsState({type:ModToolsActions.SET_TICKETS,payload:{tickets:newTickets}});},[dispatchModToolsState,tickets]);const onModeratorActionResultMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;if(parser.success){NotificationUtilities_NotificationUtilities.simpleAlert('Moderation action was successfull',NotificationAlertType.MODERATION,null,null,'Success');}else{NotificationUtilities_NotificationUtilities.simpleAlert('There was a problem applying tht moderation action',NotificationAlertType.MODERATION,null,null,'Error');}},[]);const onCfhTopicsInitEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;const categories=parser.callForHelpCategories;dispatchModToolsState({type:ModToolsActions.SET_CFH_CATEGORIES,payload:{cfhCategories:categories}});SetCfhCategories(categories);},[dispatchModToolsState]);const onCfhSanctionMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;// todo: update sanction data\n},[]);UseMessageEventHook(nitro_renderer[\"we\" /* ModeratorInitMessageEvent */],onModeratorInitMessageEvent);UseMessageEventHook(nitro_renderer[\"Rd\" /* IssueInfoMessageEvent */],onIssueInfoMessageEvent);UseMessageEventHook(nitro_renderer[\"ze\" /* ModeratorToolPreferencesEvent */],onModeratorToolPreferencesEvent);UseMessageEventHook(nitro_renderer[\"Td\" /* IssuePickFailedMessageEvent */],onIssuePickFailedMessageEvent);UseMessageEventHook(nitro_renderer[\"Qd\" /* IssueDeletedMessageEvent */],onIssueDeletedMessageEvent);UseMessageEventHook(nitro_renderer[\"ue\" /* ModeratorActionResultMessageEvent */],onModeratorActionResultMessageEvent);UseMessageEventHook(nitro_renderer[\"bb\" /* CfhTopicsInitEvent */],onCfhTopicsInitEvent);UseMessageEventHook(nitro_renderer[\"ab\" /* CfhSanctionMessageEvent */],onCfhSanctionMessageEvent);const onRoomEngineEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"og\" /* RoomEngineEvent */].INITIALIZED:dispatchModToolsState({type:ModToolsActions.SET_CURRENT_ROOM_ID,payload:{currentRoomId:event.roomId}});return;case nitro_renderer[\"og\" /* RoomEngineEvent */].DISPOSED:dispatchModToolsState({type:ModToolsActions.SET_CURRENT_ROOM_ID,payload:{currentRoomId:null}});return;}},[dispatchModToolsState]);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].INITIALIZED,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].DISPOSED,onRoomEngineEvent);const onModToolsEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case ModToolsEvent_ModToolsEvent.OPEN_ROOM_INFO:{const castedEvent=event;if(openRooms&&openRooms.includes(castedEvent.roomId))return;const rooms=openRooms||[];dispatchModToolsState({type:ModToolsActions.SET_OPEN_ROOMS,payload:{openRooms:[...rooms,castedEvent.roomId]}});return;}case ModToolsEvent_ModToolsEvent.OPEN_ROOM_CHATLOG:{const castedEvent=event;if(openRoomChatlogs&&openRoomChatlogs.includes(castedEvent.roomId))return;const chatlogs=openRoomChatlogs||[];dispatchModToolsState({type:ModToolsActions.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:[...chatlogs,castedEvent.roomId]}});return;}case ModToolsEvent_ModToolsEvent.OPEN_USER_INFO:{const castedEvent=event;if(openUserInfo&&openUserInfo.includes(castedEvent.userId))return;const userInfo=openUserInfo||[];dispatchModToolsState({type:ModToolsActions.SET_OPEN_USERINFO,payload:{openUserInfo:[...userInfo,castedEvent.userId]}});return;}case ModToolsEvent_ModToolsEvent.OPEN_USER_CHATLOG:{const castedEvent=event;if(openUserChatlogs&&openUserChatlogs.includes(castedEvent.userId))return;const userChatlog=openUserChatlogs||[];dispatchModToolsState({type:ModToolsActions.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:[...userChatlog,castedEvent.userId]}});return;}}},[openRooms,dispatchModToolsState,openRoomChatlogs,openUserInfo,openUserChatlogs]);UseUiEvent(ModToolsEvent_ModToolsEvent.OPEN_ROOM_INFO,onModToolsEvent);UseUiEvent(ModToolsEvent_ModToolsEvent.OPEN_ROOM_CHATLOG,onModToolsEvent);UseUiEvent(ModToolsEvent_ModToolsEvent.OPEN_USER_INFO,onModToolsEvent);UseUiEvent(ModToolsEvent_ModToolsEvent.OPEN_USER_CHATLOG,onModToolsEvent);return null;};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/chatlog/ChatlogView.tsx\nconst ChatlogView=props=>{const{records=null}=props;const rowRenderer=props=>{let chatlogEntry=records[0].chatlog[props.index];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"b\" /* CellMeasurer */],{cache:cache,columnIndex:0,parent:props.parent,rowIndex:props.index,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:false,style:props.style,gap:1,alignItems:\"center\",className:\"log-entry py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"g-col-1\",children:chatlogEntry.timestamp}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"g-col-3\",gfbold:true,pointer:true,onClick:event=>DispatchUiEvent(new ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent(chatlogEntry.userId)),children:chatlogEntry.userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textBreak:true,wrap:true,className:\"g-col-7\",children:chatlogEntry.message})]},props.key)},props.key);};const advancedRowRenderer=props=>{let chatlogEntry=null;let currentRecord=null;let isRoomInfo=false;let totalIndex=0;for(let i=0;i<records.length;i++){currentRecord=records[i];totalIndex++;// row for room info\ntotalIndex=totalIndex+currentRecord.chatlog.length;if(props.index>totalIndex-1)continue;if(props.index+1===totalIndex-currentRecord.chatlog.length){isRoomInfo=true;break;}const index=props.index-(totalIndex-currentRecord.chatlog.length);chatlogEntry=currentRecord.chatlog[index];break;}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(es[\"b\" /* CellMeasurer */],{cache:cache,columnIndex:0,parent:props.parent,rowIndex:props.index,children:[isRoomInfo&&currentRecord&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomInfo,{roomId:currentRecord.roomId,roomName:currentRecord.roomName,uniqueKey:props.key,style:props.style}),!isRoomInfo&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:false,style:props.style,gap:1,alignItems:\"center\",className:\"log-entry py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"g-col-2\",children:chatlogEntry.timestamp}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"g-col-3\",gfbold:true,underline:true,pointer:true,onClick:event=>DispatchUiEvent(new ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent(chatlogEntry.userId)),children:chatlogEntry.userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{textBreak:true,wrap:true,className:\"g-col-7\",children:chatlogEntry.message})]},props.key)]},props.key);};const getNumRowsForAdvanced=Object(react[\"useCallback\"])(()=>{let count=0;for(let i=0;i<records.length;i++){count++;// add room info row\ncount=count+records[i].chatlog.length;}return count;},[records]);const RoomInfo=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,alignItems:\"center\",justifyContent:\"between\",style:props.style,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:\"Room name:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:props.roomName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>TryVisitRoom(props.roomId),children:\"Visit Room\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>DispatchUiEvent(new ModToolsOpenRoomInfoEvent_ModToolsOpenRoomInfoEvent(props.roomId)),children:\"Room Tools\"})]})]},props.uniqueKey);};const cache=new es[\"c\" /* CellMeasurerCache */]({defaultHeight:25,fixedWidth:true});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[records&&records.length===1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomInfo,{roomId:records[0].roomId,roomName:records[0].roomName,uniqueKey:null,style:{}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fit:true,gap:0,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,className:\"text-black pb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-1\",children:\"Time\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"User\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-7\",children:\"Message\"})]})}),records&&records.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"log-container striped-children\",overflow:\"auto\",gap:0,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* AutoSizer */],{defaultWidth:400,defaultHeight:200,children:_ref=>{let{height,width}=_ref;cache.clearAll();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* List */],{width:width,height:height,rowCount:records.length>1?getNumRowsForAdvanced():records[0].chatlog.length,rowHeight:cache.rowHeight,className:'log-entry-container',rowRenderer:records.length>1?advancedRowRenderer:rowRenderer,deferredMeasurementCache:cache});}})})]})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/room/ModToolsChatlogView.tsx\nconst ModToolsChatlogView=props=>{const{roomId=null,onCloseClick=null}=props;const[roomChatlog,setRoomChatlog]=Object(react[\"useState\"])(null);const onModtoolRoomChatlogEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.roomId!==roomId)return;setRoomChatlog(parser.data);},[roomId]);UseMessageEventHook(nitro_renderer[\"dg\" /* RoomChatlogEvent */],onModtoolRoomChatlogEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"xc\" /* GetRoomChatlogMessageComposer */](roomId));},[roomId]);if(!roomChatlog)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:`Room Chatlog ${roomChatlog.roomName}`,onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black h-100\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"mod-content p-2\",children:roomChatlog&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatlogView,{records:[roomChatlog]})})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/room/ModToolsRoomView.tsx\nconst ModToolsRoomView=props=>{const{roomId=null,onCloseClick=null}=props;const[infoRequested,setInfoRequested]=Object(react[\"useState\"])(false);const[loadedRoomId,setLoadedRoomId]=Object(react[\"useState\"])(null);const[name,setName]=Object(react[\"useState\"])(null);const[desc,setDesc]=Object(react[\"useState\"])(null);const[ownerId,setOwnerId]=Object(react[\"useState\"])(null);const[ownerName,setOwnerName]=Object(react[\"useState\"])(null);const[ownerInRoom,setOwnerInRoom]=Object(react[\"useState\"])(false);const[usersInRoom,setUsersInRoom]=Object(react[\"useState\"])(0);//form data\nconst[kickUsers,setKickUsers]=Object(react[\"useState\"])(false);const[lockRoom,setLockRoom]=Object(react[\"useState\"])(false);const[changeRoomName,setChangeRoomName]=Object(react[\"useState\"])(false);const[message,setMessage]=Object(react[\"useState\"])('');const onModtoolRoomInfoEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.flatId!==roomId)return;setLoadedRoomId(parser.data.flatId);setName(parser.data.room.name);setDesc(parser.data.room.desc);setOwnerId(parser.data.ownerId);setOwnerName(parser.data.ownerName);setOwnerInRoom(parser.data.ownerInRoom);setUsersInRoom(parser.data.userCount);},[roomId]);UseMessageEventHook(nitro_renderer[\"ye\" /* ModeratorRoomInfoEvent */],onModtoolRoomInfoEvent);const handleClick=Object(react[\"useCallback\"])((action,value)=>{if(!action)return;switch(action){case'alert_only':if(message.trim().length===0)return;SendMessageComposer(new nitro_renderer[\"te\" /* ModeratorActionMessageComposer */](nitro_renderer[\"te\" /* ModeratorActionMessageComposer */].ACTION_ALERT,message,''));SendMessageComposer(new nitro_renderer[\"se\" /* ModerateRoomMessageComposer */](roomId,lockRoom?1:0,changeRoomName?1:0,kickUsers?1:0));return;case'send_message':if(message.trim().length===0)return;SendMessageComposer(new nitro_renderer[\"te\" /* ModeratorActionMessageComposer */](nitro_renderer[\"te\" /* ModeratorActionMessageComposer */].ACTION_MESSAGE,message,''));SendMessageComposer(new nitro_renderer[\"se\" /* ModerateRoomMessageComposer */](roomId,lockRoom?1:0,changeRoomName?1:0,kickUsers?1:0));return;}},[changeRoomName,kickUsers,lockRoom,message,roomId]);Object(react[\"useEffect\"])(()=>{if(infoRequested)return;SendMessageComposer(new nitro_renderer[\"rc\" /* GetModeratorRoomInfoMessageComposer */](roomId));setInfoRequested(true);},[roomId,infoRequested,setInfoRequested]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-room\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Room Info',onCloseClick:event=>onCloseClick()}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,className:\"mod-content p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:desc})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,className:\"mod-content p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"center\",grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"\",children:\"Room Owner:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,pointer:true,truncate:true,children:ownerName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"\",children:\"Users in room:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:usersInRoom})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,className:\"\",children:\"Owner in room:\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:ownerInRoom?'Yes':'No'})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>TryVisitRoom(roomId),children:\"Visit Room\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>DispatchUiEvent(new ModToolsOpenRoomChatlogEvent_ModToolsOpenRoomChatlogEvent(roomId)),children:\"Chatlog\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"mod-content p-2\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:kickUsers,onChange:event=>setKickUsers(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:\"Kick everyone out\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:lockRoom,onChange:event=>setLockRoom(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:\"Enable the doorbell\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:changeRoomName,onChange:event=>setChangeRoomName(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:\"Change room name\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control message-input p-1\",placeholder:\"Type a mandatory message to the users in this text box...\",value:message,onChange:event=>setMessage(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>handleClick('send_message'),children:\"Send Caution\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>handleClick('alert_only'),children:\"Send Alert only\"})]})]})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/common/IssueCategoryNames.ts\nconst getSourceName=categoryId=>{switch(categoryId){case 1:case 2:return'Normal';case 3:return'Automatic';case 4:return'Automatic IM';case 5:return'Guide System';case 6:return'IM';case 7:return'Room';case 8:return'Panic';case 9:return'Guardian';case 10:return'Automatic Helper';case 11:return'Discussion';case 12:return'Selfie';case 14:return'Photo';case 15:return'Ambassador';default:return'Unknown';}};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/CfhChatlogView.tsx\nconst CfhChatlogView=props=>{const{onCloseClick=null,issueId=null}=props;const[chatlogData,setChatlogData]=Object(react[\"useState\"])(null);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"gc\" /* GetCfhChatlogMessageComposer */](issueId));},[issueId]);const onCfhChatlogEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.issueId!==issueId)return;setChatlogData(parser.data);},[issueId]);UseMessageEventHook(nitro_renderer[\"Z\" /* CfhChatlogEvent */],onCfhChatlogEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Issue Chatlog',onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",children:chatlogData&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatlogView,{records:[chatlogData.chatRecord]})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/ModToolsIssueInfoView.tsx\nconst ModToolsIssueInfoView=props=>{const{issueId=null,onIssueInfoClosed=null}=props;const{modToolsState=null}=useModToolsContext();const{tickets=null}=modToolsState;const[cfhChatlogOpen,setcfhChatlogOpen]=Object(react[\"useState\"])(false);const ticket=Object(react[\"useMemo\"])(()=>{if(!tickets||!tickets.length)return null;return tickets.find(issue=>issue.issueId===issueId);},[issueId,tickets]);const releaseIssue=issueId=>{SendMessageComposer(new nitro_renderer[\"Nf\" /* ReleaseIssuesMessageComposer */]([issueId]));onIssueInfoClosed(issueId);};const closeIssue=resolutionType=>{SendMessageComposer(new nitro_renderer[\"fb\" /* CloseIssuesMessageComposer */]([issueId],resolutionType));onIssueInfoClosed(issueId);};const openUserInfo=userId=>DispatchUiEvent(new ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent(userId));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-handle-issue\",theme:\"modtool-windows\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Resolving issue '+issueId,onCloseClick:()=>onIssueInfoClosed(issueId)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontSize:4,children:\"Issue Information\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:8,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tbody\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Source\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:getSourceName(ticket.categoryId)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Category\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{className:\"text-break\",children:LocalizeText('help.cfh.topic.'+ticket.reportedCategoryId)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Description\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{className:\"text-break\",children:ticket.message})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Caller\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,underline:true,pointer:true,onClick:event=>openUserInfo(ticket.reporterUserId),children:ticket.reporterUserName})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Reported User\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,underline:true,pointer:true,onClick:event=>openUserInfo(ticket.reportedUserId),children:ticket.reportedUserName})})]})]})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:4,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:()=>setcfhChatlogOpen(!cfhChatlogOpen),children:\"Chatlog\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>closeIssue(nitro_renderer[\"fb\" /* CloseIssuesMessageComposer */].RESOLUTION_USELESS),children:\"Close as useless\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>closeIssue(nitro_renderer[\"fb\" /* CloseIssuesMessageComposer */].RESOLUTION_ABUSIVE),children:\"Close as abusive\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>closeIssue(nitro_renderer[\"fb\" /* CloseIssuesMessageComposer */].RESOLUTION_RESOLVED),children:\"Close as resolved\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"secondary\",onClick:event=>releaseIssue(issueId),children:\"Release\"})]})]})]})]}),cfhChatlogOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CfhChatlogView,{issueId:issueId,onCloseClick:()=>setcfhChatlogOpen(false)})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/ModToolsMyIssuesTabView.tsx\nconst ModToolsMyIssuesTabView=props=>{const{myIssues=null,onIssueHandleClick=null}=props;const onReleaseIssue=issueId=>SendMessageComposer(new nitro_renderer[\"Nf\" /* ReleaseIssuesMessageComposer */]([issueId]));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:\"Type\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Room/Player\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Opened\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",className:\"striped-children\",gap:0,children:myIssues&&myIssues.length>0&&myIssues.map(issue=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:issue.categoryId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:issue.reportedUserName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:new Date(Date.now()-issue.issueAgeInMilliseconds).toLocaleTimeString()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:event=>onIssueHandleClick(issue.issueId),children:\"Handle\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>onReleaseIssue(issue.issueId),children:\"Release\"})})]},issue.issueId);})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/ModToolsOpenIssuesTabView.tsx\nconst ModToolsOpenIssuesTabView=props=>{const{openIssues=null}=props;const onPickIssue=issueId=>SendMessageComposer(new nitro_renderer[\"wf\" /* PickIssuesMessageComposer */]([issueId],false,0,'pick issue button'));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:\"Type\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Room/Player\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-4\",children:\"Opened\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",className:\"striped-children\",gap:0,children:openIssues&&openIssues.length>0&&openIssues.map(issue=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:issue.categoryId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:issue.reportedUserName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-4\",children:new Date(Date.now()-issue.issueAgeInMilliseconds).toLocaleTimeString()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>onPickIssue(issue.issueId),children:\"Pick Issue\"})})]},issue.issueId);})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/ModToolsPickedIssuesTabView.tsx\nconst ModToolsPickedIssuesTabView=props=>{const{pickedIssues=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:\"Type\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Room/Player\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-4\",children:\"Opened\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Picker\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",className:\"striped-children\",gap:0,children:pickedIssues&&pickedIssues.length>0&&pickedIssues.map(issue=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:issue.categoryId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:issue.reportedUserName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-4\",children:new Date(Date.now()-issue.issueAgeInMilliseconds).toLocaleTimeString()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:issue.pickerUserName})]},issue.issueId);})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/tickets/ModToolsTicketsView.tsx\nconst ModToolsTicketsView_TABS=['Open Issues','My Issues','Picked Issues'];const ModToolsTicketsView=props=>{const{onCloseClick=null}=props;const{modToolsState=null}=useModToolsContext();const{tickets=null}=modToolsState;const[currentTab,setCurrentTab]=Object(react[\"useState\"])(0);const[issueInfoWindows,setIssueInfoWindows]=Object(react[\"useState\"])([]);const openIssues=Object(react[\"useMemo\"])(()=>{if(!tickets)return[];return tickets.filter(issue=>issue.state===nitro_renderer[\"Sd\" /* IssueMessageData */].STATE_OPEN);},[tickets]);const myIssues=Object(react[\"useMemo\"])(()=>{if(!tickets)return[];return tickets.filter(issue=>issue.state===nitro_renderer[\"Sd\" /* IssueMessageData */].STATE_PICKED&&issue.pickerUserId===GetSessionDataManager().userId);},[tickets]);const pickedIssues=Object(react[\"useMemo\"])(()=>{if(!tickets)return[];return tickets.filter(issue=>issue.state===nitro_renderer[\"Sd\" /* IssueMessageData */].STATE_PICKED);},[tickets]);const onIssueInfoClosed=Object(react[\"useCallback\"])(issueId=>{const indexOfValue=issueInfoWindows.indexOf(issueId);if(indexOfValue===-1)return;const newValues=Array.from(issueInfoWindows);newValues.splice(indexOfValue,1);setIssueInfoWindows(newValues);},[issueInfoWindows]);const onIssueHandleClicked=Object(react[\"useCallback\"])(issueId=>{if(issueInfoWindows.indexOf(issueId)===-1){const newValues=Array.from(issueInfoWindows);newValues.push(issueId);setIssueInfoWindows(newValues);}else{onIssueInfoClosed(issueId);}},[issueInfoWindows,onIssueInfoClosed]);const CurrentTabComponent=Object(react[\"useCallback\"])(()=>{switch(currentTab){case 0:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsOpenIssuesTabView,{openIssues:openIssues});case 1:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsMyIssuesTabView,{myIssues:myIssues,onIssueHandleClick:onIssueHandleClicked});case 2:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsPickedIssuesTabView,{pickedIssues:pickedIssues});default:return null;}},[currentTab,myIssues,onIssueHandleClicked,openIssues,pickedIssues]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-tickets\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Tickets',onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:ModToolsTicketsView_TABS.map((tab,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:currentTab===index,onClick:event=>setCurrentTab(index),children:tab},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CurrentTabComponent,{})})]}),issueInfoWindows&&issueInfoWindows.length>0&&issueInfoWindows.map(issueId=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsIssueInfoView,{issueId:issueId,onIssueInfoClosed:onIssueInfoClosed},issueId))]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/user/ModToolsUserChatlogView.tsx\nconst ModToolsUserChatlogView=props=>{const{userId=null,onCloseClick=null}=props;const[userChatlog,setUserChatlog]=Object(react[\"useState\"])(null);const[username,setUsername]=Object(react[\"useState\"])(null);const onModtoolUserChatlogEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.userId!==userId)return;setUsername(parser.data.username);setUserChatlog(parser.data.roomChatlogs);},[userId]);UseMessageEventHook(nitro_renderer[\"xi\" /* UserChatlogEvent */],onModtoolUserChatlogEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"Bc\" /* GetUserChatlogMessageComposer */](userId));},[userId]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-chatlog\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:`User Chatlog: ${username||''}`,onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black h-100\",children:userChatlog&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatlogView,{records:userChatlog})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/common/ModActionDefinition.ts\nclass ModActionDefinition{constructor(actionId,actionName,actionType,sanctionTypeId,actionLengthHours){this._actionId=void 0;this._name=void 0;this._actionType=void 0;this._sanctionTypeId=void 0;this._actionLengthHours=void 0;this._actionId=actionId;this._name=actionName;this._actionType=actionType;this._sanctionTypeId=sanctionTypeId;this._actionLengthHours=actionLengthHours;}get actionId(){return this._actionId;}get name(){return this._name;}get actionType(){return this._actionType;}get sanctionTypeId(){return this._sanctionTypeId;}get actionLengthHours(){return this._actionLengthHours;}}ModActionDefinition.ALERT=1;ModActionDefinition.MUTE=2;ModActionDefinition.BAN=3;ModActionDefinition.KICK=4;ModActionDefinition.TRADE_LOCK=5;ModActionDefinition.MESSAGE=6;\n// CONCATENATED MODULE: ./src/components/mod-tools/views/user/ModToolsUserModActionView.tsx\nconst MOD_ACTION_DEFINITIONS=[new ModActionDefinition(1,'Alert',ModActionDefinition.ALERT,1,0),new ModActionDefinition(2,'Mute 1h',ModActionDefinition.MUTE,2,0),new ModActionDefinition(3,'Ban 18h',ModActionDefinition.BAN,3,0),new ModActionDefinition(4,'Ban 7 days',ModActionDefinition.BAN,4,0),new ModActionDefinition(5,'Ban 30 days (step 1)',ModActionDefinition.BAN,5,0),new ModActionDefinition(7,'Ban 30 days (step 2)',ModActionDefinition.BAN,7,0),new ModActionDefinition(6,'Ban 100 years',ModActionDefinition.BAN,6,0),new ModActionDefinition(106,'Ban avatar-only 100 years',ModActionDefinition.BAN,6,0),new ModActionDefinition(101,'Kick',ModActionDefinition.KICK,0,0),new ModActionDefinition(102,'Lock trade 1 week',ModActionDefinition.TRADE_LOCK,0,168),new ModActionDefinition(104,'Lock trade permanent',ModActionDefinition.TRADE_LOCK,0,876000),new ModActionDefinition(105,'Message',ModActionDefinition.MESSAGE,0,0)];const ModToolsUserModActionView=props=>{const{user=null,onCloseClick=null}=props;const[selectedTopic,setSelectedTopic]=Object(react[\"useState\"])(-1);const[selectedAction,setSelectedAction]=Object(react[\"useState\"])(-1);const[message,setMessage]=Object(react[\"useState\"])('');const{modToolsState=null}=useModToolsContext();const{cfhCategories=null,settings=null}=modToolsState;const topics=Object(react[\"useMemo\"])(()=>{const values=[];if(cfhCategories&&cfhCategories.length){for(const category of cfhCategories){for(const topic of category.topics)values.push(topic);}}return values;},[cfhCategories]);const sendAlert=message=>{NotificationUtilities_NotificationUtilities.simpleAlert(message,NotificationAlertType.DEFAULT,null,null,'Error');};const sendDefaultSanction=()=>{let errorMessage=null;const category=topics[selectedTopic];if(selectedTopic===-1)errorMessage='You must select a CFH topic';if(errorMessage)return sendAlert(errorMessage);const messageOrDefault=message.trim().length===0?LocalizeText(`help.cfh.topic.${category.id}`):message;SendMessageComposer(new nitro_renderer[\"rb\" /* DefaultSanctionMessageComposer */](user.userId,selectedTopic,messageOrDefault));onCloseClick();};const sendSanction=()=>{let errorMessage=null;const category=topics[selectedTopic];const sanction=MOD_ACTION_DEFINITIONS[selectedAction];if(selectedTopic===-1||selectedAction===-1)errorMessage='You must select a CFH topic and Sanction';else if(!settings||!settings.cfhPermission)errorMessage='You do not have permission to do this';else if(!category)errorMessage='You must select a CFH topic';else if(!sanction)errorMessage='You must select a sanction';if(errorMessage){sendAlert(errorMessage);return;}const messageOrDefault=message.trim().length===0?LocalizeText(`help.cfh.topic.${category.id}`):message;switch(sanction.actionType){case ModActionDefinition.ALERT:{if(!settings.alertPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new nitro_renderer[\"me\" /* ModAlertMessageComposer */](user.userId,messageOrDefault,category.id));break;}case ModActionDefinition.MUTE:SendMessageComposer(new nitro_renderer[\"qe\" /* ModMuteMessageComposer */](user.userId,messageOrDefault,category.id));break;case ModActionDefinition.BAN:{if(!settings.banPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new nitro_renderer[\"ne\" /* ModBanMessageComposer */](user.userId,messageOrDefault,category.id,selectedAction,sanction.actionId===106));break;}case ModActionDefinition.KICK:{if(!settings.kickPermission){sendAlert('You have insufficient permissions');return;}SendMessageComposer(new nitro_renderer[\"oe\" /* ModKickMessageComposer */](user.userId,messageOrDefault,category.id));break;}case ModActionDefinition.TRADE_LOCK:{const numSeconds=sanction.actionLengthHours*60;SendMessageComposer(new nitro_renderer[\"re\" /* ModTradingLockMessageComposer */](user.userId,messageOrDefault,numSeconds,category.id));break;}case ModActionDefinition.MESSAGE:{if(message.trim().length===0){sendAlert('Please write a message to user');return;}SendMessageComposer(new nitro_renderer[\"pe\" /* ModMessageMessageComposer */](user.userId,message,category.id));break;}}onCloseClick();};if(!user)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-user-action\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Mod Action: '+(user?user.username:''),onCloseClick:()=>onCloseClick()}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:selectedTopic,onChange:event=>setSelectedTopic(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:-1,disabled:true,children:\"CFH Topic\"}),topics.map((topic,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:index,children:LocalizeText('help.cfh.topic.'+topic.id)},index))]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:selectedAction,onChange:event=>setSelectedAction(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:-1,disabled:true,children:\"Sanction Type\"}),MOD_ACTION_DEFINITIONS.map((action,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:index,children:action.name},index))]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:\"Optional message type, overrides default\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control\",value:message,onChange:event=>setMessage(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"primary\",onClick:sendDefaultSanction,children:\"Default Sanction\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:sendSanction,children:\"Sanction\"})]})]})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/user/ModToolsUserRoomVisitsView.tsx\nconst ModToolsUserRoomVisitsView=props=>{const{userId=null,onCloseClick=null}=props;const[roomVisitData,setRoomVisitData]=Object(react[\"useState\"])(null);const onModtoolReceivedRoomsUserEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.userId!==userId)return;setRoomVisitData(parser.data);},[userId]);UseMessageEventHook(nitro_renderer[\"wh\" /* RoomVisitsEvent */],onModtoolReceivedRoomsUserEvent);const RowRenderer=props=>{const item=roomVisitData.rooms[props.index];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:false,style:props.style,gap:1,alignItems:\"center\",className:\"text-black py-1 border-bottom\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{className:\"g-col-2\",children:[item.enterHour.toString().padStart(2,'0'),\": \",item.enterMinute.toString().padStart(2,'0')]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"g-col-7\",children:item.roomName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,underline:true,pointer:true,variant:\"primary\",className:\"g-col-3\",onClick:event=>TryVisitRoom(item.roomId),children:\"Visit Room\"})]},props.key);};Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"zc\" /* GetRoomVisitsMessageComposer */](userId));},[userId]);if(!userId)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-user-visits\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'User Visits',onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullHeight:true,gap:0,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,className:\"text-black fw-bold border-bottom pb-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-2\",children:\"Time\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-7\",children:\"Room name\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-3\",children:\"Visit\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"log-container striped-children\",overflow:\"auto\",gap:0,children:roomVisitData&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* AutoSizer */],{defaultWidth:400,defaultHeight:200,children:_ref=>{let{height,width}=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* List */],{width:width,height:height,rowCount:roomVisitData.rooms.length,rowHeight:25,className:'log-entry-container',rowRenderer:RowRenderer});}})})]})})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/user/ModToolsUserSendMessageView.tsx\nconst ModToolsUserSendMessageView=props=>{const{user=null,onCloseClick=null}=props;const[message,setMessage]=Object(react[\"useState\"])('');const sendMessage=Object(react[\"useCallback\"])(()=>{if(message.trim().length===0){DispatchUiEvent(new NotificationAlertEvent_NotificationAlertEvent(['Please write a message to user.'],null,null,null,'Error',null));return;}SendMessageComposer(new nitro_renderer[\"pe\" /* ModMessageMessageComposer */](user.userId,message,-999));onCloseClick();},[message,user,onCloseClick]);if(!user)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-user-message\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Send Message',onCloseClick:()=>onCloseClick()}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[\"Message To: \",user.username]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control\",value:message,onChange:event=>setMessage(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:sendMessage,children:\"Send message\"})]})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/views/user/ModToolsUserView.tsx\nconst ModToolsUserView=props=>{const{onCloseClick=null,userId=null}=props;const[userInfo,setUserInfo]=Object(react[\"useState\"])(null);const[sendMessageVisible,setSendMessageVisible]=Object(react[\"useState\"])(false);const[modActionVisible,setModActionVisible]=Object(react[\"useState\"])(false);const[roomVisitsVisible,setRoomVisitsVisible]=Object(react[\"useState\"])(false);const onModtoolUserInfoEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser||parser.data.userId!==userId)return;setUserInfo(parser.data);},[userId]);UseMessageEventHook(nitro_renderer[\"Ae\" /* ModeratorUserInfoEvent */],onModtoolUserInfoEvent);const userProperties=Object(react[\"useMemo\"])(()=>{if(!userInfo)return null;return[{localeKey:'modtools.userinfo.userName',value:userInfo.userName,showOnline:true},{localeKey:'modtools.userinfo.cfhCount',value:userInfo.cfhCount.toString()},{localeKey:'modtools.userinfo.abusiveCfhCount',value:userInfo.abusiveCfhCount.toString()},{localeKey:'modtools.userinfo.cautionCount',value:userInfo.cautionCount.toString()},{localeKey:'modtools.userinfo.banCount',value:userInfo.banCount.toString()},{localeKey:'modtools.userinfo.lastSanctionTime',value:userInfo.lastSanctionTime},{localeKey:'modtools.userinfo.tradingLockCount',value:userInfo.tradingLockCount.toString()},{localeKey:'modtools.userinfo.tradingExpiryDate',value:userInfo.tradingExpiryDate},{localeKey:'modtools.userinfo.minutesSinceLastLogin',value:nitro_renderer[\"Kb\" /* FriendlyTime */].format(userInfo.minutesSinceLastLogin*60,'.ago',2)},{localeKey:'modtools.userinfo.lastPurchaseDate',value:userInfo.lastPurchaseDate},{localeKey:'modtools.userinfo.primaryEmailAddress',value:userInfo.primaryEmailAddress},{localeKey:'modtools.userinfo.identityRelatedBanCount',value:userInfo.identityRelatedBanCount.toString()},{localeKey:'modtools.userinfo.registrationAgeInMinutes',value:nitro_renderer[\"Kb\" /* FriendlyTime */].format(userInfo.registrationAgeInMinutes*60,'.ago',2)},{localeKey:'modtools.userinfo.userClassification',value:userInfo.userClassification}];},[userInfo]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"sc\" /* GetModeratorUserInfoMessageComposer */](userId));},[userId]);if(!userInfo)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mod-tools-user\",theme:\"modtool-windows\",windowPosition:DraggableWindowPosition.TOP_CENTER,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('modtools.userinfo.title',['username'],[userInfo.userName]),onCloseClick:()=>onCloseClick()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",className:\"mod-content p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:8,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"table\",{className:\"table table-striped table-sm table-text-small text-black m-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:userProperties.map((property,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{scope:\"row\",children:LocalizeText(property.localeKey)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"td\",{children:[property.value,property.showOnline&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-pf-${userInfo.online?'online':'offline'} ms-2`})]})]},index);})})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:4,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>DispatchUiEvent(new ModToolsOpenUserChatlogEvent_ModToolsOpenUserChatlogEvent(userId)),children:\"Room Chat\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setSendMessageVisible(!sendMessageVisible),children:\"Send Message\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setRoomVisitsVisible(!roomVisitsVisible),children:\"Room Visits\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setModActionVisible(!modActionVisible),children:\"Mod Action\"})]})]})})]}),sendMessageVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsUserSendMessageView,{user:{userId:userId,username:userInfo.userName},onCloseClick:()=>setSendMessageVisible(false)}),modActionVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsUserModActionView,{user:{userId:userId,username:userInfo.userName},onCloseClick:()=>setModActionVisible(false)}),roomVisitsVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsUserRoomVisitsView,{userId:userId,onCloseClick:()=>setRoomVisitsVisible(false)})]});};\n// CONCATENATED MODULE: ./src/components/mod-tools/ModToolsView.tsx\nconst ModToolsView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(true);const[selectedUser,setSelectedUser]=Object(react[\"useState\"])(null);const[isTicketsVisible,setIsTicketsVisible]=Object(react[\"useState\"])(false);const[modToolsState,dispatchModToolsState]=Object(react[\"useReducer\"])(ModToolsReducer,initialModTools);const{currentRoomId=null,openRooms=null,openRoomChatlogs=null,openUserChatlogs=null,openUserInfo=null}=modToolsState;const elementRef=Object(react[\"useRef\"])(null);const isMod=GetSessionDataManager().isModerator;const onModToolsEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case ModToolsEvent_ModToolsEvent.SHOW_MOD_TOOLS:setIsVisible(true);return;case ModToolsEvent_ModToolsEvent.HIDE_MOD_TOOLS:setIsVisible(false);return;case ModToolsEvent_ModToolsEvent.TOGGLE_MOD_TOOLS:setIsVisible(value=>!value);return;}},[]);UseUiEvent(ModToolsEvent_ModToolsEvent.SHOW_MOD_TOOLS,onModToolsEvent);UseUiEvent(ModToolsEvent_ModToolsEvent.HIDE_MOD_TOOLS,onModToolsEvent);UseUiEvent(ModToolsEvent_ModToolsEvent.TOGGLE_MOD_TOOLS,onModToolsEvent);const onRoomEngineObjectEvent=Object(react[\"useCallback\"])(event=>{if(event.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT)return;const roomSession=GetRoomSession();if(!roomSession)return;const userData=roomSession.userDataManager.getUserDataByIndex(event.objectId);if(!userData||userData.type!==nitro_renderer[\"Mg\" /* RoomObjectType */].USER)return;setSelectedUser({userId:userData.webID,username:userData.name});},[]);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].SELECTED,onRoomEngineObjectEvent);const handleClick=Object(react[\"useCallback\"])((action,value)=>{if(!action)return;switch(action){case'toggle_room':{if(!openRooms){DispatchUiEvent(new ModToolsOpenRoomInfoEvent_ModToolsOpenRoomInfoEvent(currentRoomId));return;}if(openRooms.indexOf(currentRoomId)>-1){handleClick('close_room',currentRoomId.toString());}else{DispatchUiEvent(new ModToolsOpenRoomInfoEvent_ModToolsOpenRoomInfoEvent(currentRoomId));}return;}case'close_room':{const itemIndex=openRooms.indexOf(Number(value));const clone=Array.from(openRooms);clone.splice(itemIndex,1);dispatchModToolsState({type:ModToolsActions.SET_OPEN_ROOMS,payload:{openRooms:clone}});return;}case'toggle_room_chatlog':{if(!openRoomChatlogs){DispatchUiEvent(new ModToolsOpenRoomChatlogEvent_ModToolsOpenRoomChatlogEvent(currentRoomId));return;}if(openRoomChatlogs.indexOf(currentRoomId)>-1){handleClick('close_room_chatlog',currentRoomId.toString());}else{DispatchUiEvent(new ModToolsOpenRoomChatlogEvent_ModToolsOpenRoomChatlogEvent(currentRoomId));}return;}case'close_room_chatlog':{const itemIndex=openRoomChatlogs.indexOf(Number(value));const clone=Array.from(openRoomChatlogs);clone.splice(itemIndex,1);dispatchModToolsState({type:ModToolsActions.SET_OPEN_ROOM_CHATLOGS,payload:{openRoomChatlogs:clone}});return;}case'toggle_user_info':{if(!selectedUser)return;const userId=selectedUser.userId;if(!openUserInfo){DispatchUiEvent(new ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent(userId));return;}if(openUserInfo.indexOf(userId)>-1){handleClick('close_user_info',userId.toString());}else{DispatchUiEvent(new ModToolsOpenUserInfoEvent_ModToolsOpenUserInfoEvent(userId));}return;}case'close_user_info':{const itemIndex=openUserInfo.indexOf(Number(value));const clone=Array.from(openUserInfo);clone.splice(itemIndex,1);dispatchModToolsState({type:ModToolsActions.SET_OPEN_USERINFO,payload:{openUserInfo:clone}});return;}case'close_user_chatlog':{const itemIndex=openUserChatlogs.indexOf(Number(value));const clone=Array.from(openUserChatlogs);clone.splice(itemIndex,1);dispatchModToolsState({type:ModToolsActions.SET_OPEN_USER_CHATLOGS,payload:{openUserChatlogs:clone}});return;}}},[openRooms,currentRoomId,openRoomChatlogs,selectedUser,openUserInfo,openUserChatlogs]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ModToolsContextProvider,{value:{modToolsState,dispatchModToolsState},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsMessageHandler,{}),isVisible&&isMod&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"mod-tools\",className:\"nitro-mod-tools\",windowPosition:DraggableWindowPosition.TOP_LEFT,theme:\"primary-modtool\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'Mod Tools',onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"text-black pb-3 pt-2\",gap:3,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonModtool,{gap:1,onClick:event=>handleClick('toggle_room'),disabled:!currentRoomId,className:\"position-relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"icon icon-small-room position-absolute start-1\"}),\" Room tool\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonModtool,{innerRef:elementRef,gap:1,onClick:event=>handleClick('toggle_room_chatlog'),disabled:!currentRoomId,className:\"position-relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"icon icon-chat-history position-absolute start-1\"}),\" Chatlog Tool\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonModtool,{gap:1,onClick:()=>handleClick('toggle_user_info'),disabled:!selectedUser,className:\"position-relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"icon icon-user position-absolute start-1\"}),\" User: \",selectedUser?selectedUser.username:'']}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ButtonModtool,{gap:1,onClick:()=>setIsTicketsVisible(value=>!value),className:\"position-relative\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"icon icon-tickets position-absolute start-1\"}),\" Report Tool\"]})]})]}),openRooms&&openRooms.map(roomId=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsRoomView,{roomId:roomId,onCloseClick:()=>handleClick('close_room',roomId.toString())},roomId);}),openRoomChatlogs&&openRoomChatlogs.map(roomId=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsChatlogView,{roomId:roomId,onCloseClick:()=>handleClick('close_room_chatlog',roomId.toString())},roomId);}),openUserInfo&&openUserInfo.map(userId=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsUserView,{userId:userId,onCloseClick:()=>handleClick('close_user_info',userId.toString())},userId);}),openUserChatlogs&&openUserChatlogs.map(userId=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsUserChatlogView,{userId:userId,onCloseClick:()=>handleClick('close_user_chatlog',userId.toString())},userId);}),isTicketsVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsTicketsView,{onCloseClick:()=>setIsTicketsVisible(false)})]});};\n// CONCATENATED MODULE: ./src/components/navigator/NavigatorContext.tsx\nconst NavigatorContext=/*#__PURE__*/Object(react[\"createContext\"])({categories:null,setCategories:null,topLevelContext:null,setTopLevelContext:null,topLevelContexts:null,setTopLevelContexts:null,navigatorData:null,setNavigatorData:null,doorData:null,setDoorData:null,searchResult:null,setSearchResult:null});const NavigatorContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorContext.Provider,{value:props.value,children:props.children});};const useNavigatorContext=()=>Object(react[\"useContext\"])(NavigatorContext);\n// CONCATENATED MODULE: ./src/components/navigator/NavigatorMessageHandler.tsx\nconst NavigatorMessageHandler=props=>{const{setCategories=null,setTopLevelContext=null,topLevelContexts=null,setTopLevelContexts=null,setNavigatorData=null,setDoorData=null,setSearchResult=null}=useNavigatorContext();const onRoomSettingsUpdatedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();SendMessageComposer(new nitro_renderer[\"Cg\" /* RoomInfoComposer */](parser.roomId,false,false));},[]);UseMessageEventHook(nitro_renderer[\"kh\" /* RoomSettingsUpdatedEvent */],onRoomSettingsUpdatedEvent);const onCanCreateRoomEventEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.canCreate){// show room event cvreate\nreturn;}NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText(`navigator.cannotcreateevent.error.${parser.errorCode}`),null,null,null,LocalizeText('navigator.cannotcreateevent.title'));},[]);UseMessageEventHook(nitro_renderer[\"R\" /* CanCreateRoomEventEvent */],onCanCreateRoomEventEvent);const onUserInfoEvent=Object(react[\"useCallback\"])(event=>{SendMessageComposer(new nitro_renderer[\"De\" /* NavigatorCategoriesComposer */]());SendMessageComposer(new nitro_renderer[\"Le\" /* NavigatorSettingsComposer */]());},[]);const onUserPermissionsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setNavigatorData(prevValue=>{const newValue={...prevValue};newValue.eventMod=parser.securityLevel>=nitro_renderer[\"Hh\" /* SecurityLevel */].MODERATOR;newValue.roomPicker=parser.securityLevel>=nitro_renderer[\"Hh\" /* SecurityLevel */].COMMUNITY;return newValue;});},[setNavigatorData]);const onRoomForwardEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();TryVisitRoom(parser.roomId);},[]);const onRoomEntryInfoMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setNavigatorData(prevValue=>{const newValue={...prevValue};newValue.enteredGuestRoom=null;newValue.currentRoomOwner=parser.isOwner;newValue.currentRoomId=parser.roomId;return newValue;});// close room info\n// close room settings\n// close room filter\nSendMessageComposer(new nitro_renderer[\"Cg\" /* RoomInfoComposer */](parser.roomId,true,false));if(nitro_renderer[\"Wd\" /* LegacyExternalInterface */].available)nitro_renderer[\"Wd\" /* LegacyExternalInterface */].call('legacyTrack','navigator','private',[parser.roomId]);},[setNavigatorData]);const onGetGuestRoomResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.roomEnter){setDoorData({roomInfo:null,state:DoorStateType.NONE});setNavigatorData(prevValue=>{const newValue={...prevValue};newValue.enteredGuestRoom=parser.data;newValue.currentRoomIsStaffPick=parser.staffPick;const isCreated=newValue.createdFlatId===parser.data.roomId;if(!isCreated&&parser.data.displayRoomEntryAd){if(GetConfiguration('roomenterad.habblet.enabled',false))nitro_renderer[\"Jd\" /* HabboWebTools */].openRoomEnterAd();}newValue.createdFlatId=0;if(newValue.enteredGuestRoom&&newValue.enteredGuestRoom.habboGroupId>0){// close event info\n}return newValue;});}else if(parser.roomForward){if(parser.data.ownerName!==GetSessionDataManager().userName&&!parser.isGroupMember){switch(parser.data.doorMode){case nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE:setDoorData(prevValue=>{const newValue={...prevValue};newValue.roomInfo=parser.data;newValue.state=DoorStateType.START_DOORBELL;return newValue;});return;case nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE:setDoorData(prevValue=>{const newValue={...prevValue};newValue.roomInfo=parser.data;newValue.state=DoorStateType.START_PASSWORD;return newValue;});return;}}if(parser.data.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].NOOB_STATE&&!GetSessionDataManager().isAmbassador&&!GetSessionDataManager().isRealNoob&&!GetSessionDataManager().isModerator)return;CreateRoomSession(parser.data.roomId);}else{setNavigatorData(prevValue=>{const newValue={...prevValue};newValue.enteredGuestRoom=parser.data;newValue.currentRoomIsStaffPick=parser.staffPick;return newValue;});}},[setNavigatorData,setDoorData]);const onRoomScoreEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setNavigatorData(prevValue=>{const newValue={...prevValue};newValue.currentRoomRating=parser.totalLikes;newValue.canRate=parser.canLike;return newValue;});},[setNavigatorData]);const onRoomDoorbellEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.userName||parser.userName.length===0){setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_WAITING;return newValue;});}},[setDoorData]);const onRoomDoorbellAcceptedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.userName||parser.userName.length===0){setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_ACCEPTED;return newValue;});}},[setDoorData]);const onRoomDoorbellRejectedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.userName||parser.userName.length===0){setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_NO_ANSWER;return newValue;});}},[setDoorData]);const onGenericErrorEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();switch(parser.errorCode){case-100002:setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_WRONG_PASSWORD;return newValue;});return;case 4009:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.alert.need.to.be.vip'),NotificationAlertType.DEFAULT,null,null,LocalizeText('generic.alert.title'));return;case 4010:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.alert.invalid_room_name'),NotificationAlertType.DEFAULT,null,null,LocalizeText('generic.alert.title'));return;case 4011:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.alert.cannot_perm_ban'),NotificationAlertType.DEFAULT,null,null,LocalizeText('generic.alert.title'));return;case 4013:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.alert.room_in_maintenance'),NotificationAlertType.DEFAULT,null,null,LocalizeText('generic.alert.title'));return;}},[setDoorData]);const onNavigatorMetadataEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTopLevelContexts(parser.topLevelContexts);setTopLevelContext(parser.topLevelContexts.length?parser.topLevelContexts[0]:null);},[setTopLevelContexts,setTopLevelContext]);const onNavigatorSearchEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTopLevelContext(prevValue=>{let newValue=prevValue;if(!newValue)newValue=topLevelContexts&&topLevelContexts.length&&topLevelContexts[0]||null;if(!newValue)return null;if(parser.result.code!==newValue.code&&topLevelContexts&&topLevelContexts.length){for(const context of topLevelContexts){if(context.code!==parser.result.code)continue;newValue=context;}}for(const context of topLevelContexts){if(context.code!==parser.result.code)continue;newValue=context;}return newValue;});setSearchResult(parser.result);},[topLevelContexts,setTopLevelContext,setSearchResult]);const onNavigatorCategoriesEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setCategories(parser.categories);},[setCategories]);const onRoomCreatedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();CreateRoomSession(parser.roomId);},[]);const onNavigatorHomeRoomEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();let prevSettingsReceived=false;setNavigatorData(prevValue=>{prevSettingsReceived=prevValue.settingsReceived;const newValue={...prevValue};newValue.homeRoomId=parser.homeRoomId;newValue.settingsReceived=true;return newValue;});if(prevSettingsReceived){// refresh room info window\nreturn;}let forwardType=-1;let forwardId=-1;if(GetConfiguration('friend.id')!==undefined&&parseInt(GetConfiguration('friend.id'))>0){forwardType=0;SendMessageComposer(new nitro_renderer[\"Fb\" /* FollowFriendMessageComposer */](parseInt(GetConfiguration('friend.id'))));}if(GetConfiguration('forward.type')!==undefined&&GetConfiguration('forward.id')!==undefined){forwardType=parseInt(GetConfiguration('forward.type'));forwardId=parseInt(GetConfiguration('forward.id'));}if(forwardType===2){TryVisitRoom(forwardId);}else if(forwardType===-1&&parser.roomIdToEnter>0){CreateLinkEvent('navigator/close');if(parser.roomIdToEnter!==parser.homeRoomId){CreateRoomSession(parser.roomIdToEnter);}else{CreateRoomSession(parser.homeRoomId);}}},[setNavigatorData]);const onRoomEnterErrorEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();switch(parser.reason){case nitro_renderer[\"T\" /* CantConnectMessageParser */].REASON_FULL:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.guestroomfull.text'),NotificationAlertType.DEFAULT,null,null,LocalizeText('navigator.guestroomfull.title'));break;case nitro_renderer[\"T\" /* CantConnectMessageParser */].REASON_QUEUE_ERROR:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText(`room.queue.error.${parser.parameter}`),NotificationAlertType.DEFAULT,null,null,LocalizeText('room.queue.error.title'));break;case nitro_renderer[\"T\" /* CantConnectMessageParser */].REASON_BANNED:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('navigator.banned.text'),NotificationAlertType.DEFAULT,null,null,LocalizeText('navigator.banned.title'));break;default:NotificationUtilities_NotificationUtilities.simpleAlert(LocalizeText('room.queue.error.title'),NotificationAlertType.DEFAULT,null,null,LocalizeText('room.queue.error.title'));break;}VisitDesktop();},[]);const onRoomCreatorEvent=Object(react[\"useCallback\"])(event=>{CreateLinkEvent('navigator/show');},[]);UseMessageEventHook(nitro_renderer[\"Fi\" /* UserInfoEvent */],onUserInfoEvent);UseMessageEventHook(nitro_renderer[\"Hi\" /* UserPermissionsEvent */],onUserPermissionsEvent);UseMessageEventHook(nitro_renderer[\"zg\" /* RoomForwardEvent */],onRoomForwardEvent);UseMessageEventHook(nitro_renderer[\"xg\" /* RoomEntryInfoMessageEvent */],onRoomEntryInfoMessageEvent);UseMessageEventHook(nitro_renderer[\"nc\" /* GetGuestRoomResultEvent */],onGetGuestRoomResultEvent);UseMessageEventHook(nitro_renderer[\"Sg\" /* RoomScoreEvent */],onRoomScoreEvent);UseMessageEventHook(nitro_renderer[\"kg\" /* RoomDoorbellEvent */],onRoomDoorbellEvent);UseMessageEventHook(nitro_renderer[\"jg\" /* RoomDoorbellAcceptedEvent */],onRoomDoorbellAcceptedEvent);UseMessageEventHook(nitro_renderer[\"lg\" /* RoomDoorbellRejectedEvent */],onRoomDoorbellRejectedEvent);UseMessageEventHook(nitro_renderer[\"bc\" /* GenericErrorEvent */],onGenericErrorEvent);UseMessageEventHook(nitro_renderer[\"He\" /* NavigatorMetadataEvent */],onNavigatorMetadataEvent);UseMessageEventHook(nitro_renderer[\"Ke\" /* NavigatorSearchEvent */],onNavigatorSearchEvent);UseMessageEventHook(nitro_renderer[\"Ee\" /* NavigatorCategoriesEvent */],onNavigatorCategoriesEvent);UseMessageEventHook(nitro_renderer[\"gg\" /* RoomCreatedEvent */],onRoomCreatedEvent);UseMessageEventHook(nitro_renderer[\"Fe\" /* NavigatorHomeRoomEvent */],onNavigatorHomeRoomEvent);UseMessageEventHook(nitro_renderer[\"vg\" /* RoomEnterErrorEvent */],onRoomEnterErrorEvent);UseMessageEventHook(nitro_renderer[\"Ie\" /* NavigatorOpenRoomCreatorEvent */],onRoomCreatorEvent);return null;};\n// CONCATENATED MODULE: ./src/components/navigator/views/NavigatorDoorStateView.tsx\nconst VISIBLE_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER,DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];const DOORBELL_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER];const PASSWORD_STATES=[DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];const NavigatorDoorStateView=props=>{const[password,setPassword]=Object(react[\"useState\"])('');const{doorData=null,setDoorData=null}=useNavigatorContext();const close=()=>{if(doorData&&doorData.state===DoorStateType.STATE_WAITING)GoToDesktop();setDoorData(null);};const ring=()=>{if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId);setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};const tryEntering=()=>{if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId,password);setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};Object(react[\"useEffect\"])(()=>{if(!doorData||doorData.state!==DoorStateType.STATE_NO_ANSWER)return;GoToDesktop();},[doorData]);if(!doorData||doorData.state===DoorStateType.NONE||VISIBLE_STATES.indexOf(doorData.state)===-1)return null;const isDoorbell=DOORBELL_STATES.indexOf(doorData.state)>=0;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-navigator-doorbell\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText(isDoorbell?'navigator.doorbell.title':'navigator.password.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{className:\"px-3 pb-4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,bold:true,children:doorData&&doorData.roomInfo&&doorData.roomInfo.roomName}),doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('navigator.doorbell.info')}),doorData.state===DoorStateType.STATE_WAITING&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('navigator.doorbell.waiting')}),doorData.state===DoorStateType.STATE_NO_ANSWER&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('navigator.doorbell.no.answer')}),doorData.state===DoorStateType.START_PASSWORD&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('navigator.password.info')}),doorData.state===DoorStateType.STATE_WRONG_PASSWORD&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('navigator.password.retryinfo')})]}),isDoorbell&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,className:\"align-items-end mt-auto pt-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,className:\"cursor-pointer\",underline:true,onClick:close,children:LocalizeText('generic.cancel')}),doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"ms-auto\",onClick:ring,children:LocalizeText('navigator.doorbell.button.ring')})]}),!isDoorbell&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"pt-3 align-items-center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,fullWidth:true,children:LocalizeText('navigator.password.enter')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",className:\"form-control form-control-sm\",onChange:event=>setPassword(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,className:\"align-items-end mt-auto pt-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,className:\"cursor-pointer\",underline:true,onClick:close,children:LocalizeText('generic.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"ms-auto\",onClick:tryEntering,children:LocalizeText('navigator.password.button.try')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/common/layout/RoomCreatorGridItem.tsx\nconst RoomCreatorGridItem=props=>{const{itemImage=undefined,itemColor=undefined,itemActive=false,itemCount=1,itemCountMinimum=1,itemUniqueSoldout=false,itemUniqueNumber=-2,itemUnseen=false,itemHighlight=false,disabled=false,center=true,column=true,style={},classNames=[],position='relative',overflow='hidden',children=null,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['room-creator-grid-item'];if(itemActive)newClassNames.push('active');if(itemUniqueSoldout||itemUniqueNumber>0)newClassNames.push('unique-item');if(itemUniqueSoldout)newClassNames.push('sold-out');if(itemUnseen)newClassNames.push('unseen');if(itemHighlight)newClassNames.push('has-highlight');if(disabled)newClassNames.push('disabled');if(itemImage===null)newClassNames.push('icon','loading-icon');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[itemActive,itemUniqueSoldout,itemUniqueNumber,itemUnseen,itemHighlight,disabled,itemImage,classNames]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={...style};if(itemImage)newStyle.backgroundImage=`url(${itemImage})`;if(itemColor)newStyle.backgroundColor=itemColor;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[style,itemImage,itemColor]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:center,pointer:true,position:position,overflow:overflow,column:column,classNames:getClassNames,style:getStyle,...rest,children:[itemCount>itemCountMinimum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:itemCount}),itemUniqueNumber>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,className:\"unique-bg-override\",style:{backgroundImage:`url(${itemImage})`}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute bottom-0 unique-item-counter\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionStyledNumberView,{value:itemUniqueNumber})})]}),children]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/NavigatorRoomCreatorView.tsx\n/* eslint-disable no-template-curly-in-string */const NavigatorRoomCreatorView=props=>{const[maxVisitorsList,setMaxVisitorsList]=Object(react[\"useState\"])(null);const[name,setName]=Object(react[\"useState\"])(null);const[description,setDescription]=Object(react[\"useState\"])(null);const[category,setCategory]=Object(react[\"useState\"])(null);const[visitorsCount,setVisitorsCount]=Object(react[\"useState\"])(null);const[tradesSetting,setTradesSetting]=Object(react[\"useState\"])(0);const[roomModels,setRoomModels]=Object(react[\"useState\"])([]);const[selectedModelName,setSelectedModelName]=Object(react[\"useState\"])('');const{categories=null}=useNavigatorContext();const hcDisabled=GetConfiguration('hc.disabled',false);const getRoomModelImage=name=>GetConfiguration('images.url')+`/navigator/models/model_${name}.png`;const selectModel=(model,index)=>{if(!model||model.clubLevel>GetClubMemberLevel())return;setSelectedModelName(roomModels[index].name);};const createRoom=()=>{SendMessageComposer(new nitro_renderer[\"fg\" /* RoomCreateComposer */](name,description,'model_'+selectedModelName,Number(category),Number(visitorsCount),tradesSetting));};Object(react[\"useEffect\"])(()=>{if(!maxVisitorsList){const list=[];for(let i=10;i<=100;i=i+10)list.push(i);setMaxVisitorsList(list);setVisitorsCount(list[0]);}},[maxVisitorsList]);Object(react[\"useEffect\"])(()=>{if(categories&&categories.length)setCategory(categories[0].id);},[categories]);Object(react[\"useEffect\"])(()=>{const models=GetConfiguration('navigator.room.models');if(models&&models.length){setRoomModels(models);setSelectedModelName(models[0].name);}},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-room-creator\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.createroom.title'),onCloseClick:event=>CreateLinkEvent('navigator/close-creator')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:5,gap:1,overflow:\"auto\",className:\"px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('navigator.createroom.roomnameinfo')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"room-creator-form\",maxLength:60,onChange:event=>setName(event.target.value),placeholder:LocalizeText('navigator.createroom.roomnameinfo')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('navigator.createroom.roomdescinfo')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"flex-grow-1 room-creator-form\",maxLength:255,onChange:event=>setDescription(event.target.value),placeholder:LocalizeText('navigator.createroom.roomdescinfo')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('navigator.category')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setCategory(Number(event.target.value)),children:categories&&categories.length>0&&categories.map(category=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:category.id,children:LocalizeText(category.name)},category.id);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('navigator.maxvisitors')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setVisitorsCount(Number(event.target.value)),children:maxVisitorsList&&maxVisitorsList.map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:value,children:value},value);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('navigator.tradesettings')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setTradesSetting(Number(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.trade_not_allowed')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.trade_not_with_Controller')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"2\",children:LocalizeText('navigator.roomsettings.trade_allowed')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,className:\"volter-bold-button\",onClick:createRoom,disabled:!name||name.length<3,children:LocalizeText('navigator.createroom.create')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,className:\"volter-button\",onClick:event=>CreateLinkEvent('navigator/close-creator'),children:LocalizeText('cancel')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:7,gap:1,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{className:\"room-creator-grid\",columnCount:2,columnMinWidth:100,columnMinHeight:50,overflow:\"unset\",children:roomModels.map((model,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(RoomCreatorGridItem,{fullHeight:true,onClick:()=>selectModel(model,index),itemActive:selectedModelName===model.name,overflow:\"unset\",gap:0,className:\"py-3\",disabled:GetClubMemberLevel()<model.clubLevel,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullHeight:true,center:true,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\",src:getRoomModelImage(model.name)})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{position:\"absolute\",className:\"bottom-1 start-1\",children:[model.tileSize,\" \",LocalizeText('navigator.createroom.tilesize')]}),!hcDisabled&&model.clubLevel>nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].NO_CLUB&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{position:\"absolute\",className:\"top-1 end-1\",type:\"hc\"}),selectedModelName&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"active-arrow\"})]},model.name);})})})]})})})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/NavigatorRoomInfoView.tsx\nclass NavigatorRoomInfoViewProps{constructor(){this.onCloseClick=void 0;}}const NavigatorRoomInfoView=props=>{const{onCloseClick=null}=props;const[isRoomPicked,setIsRoomPicked]=Object(react[\"useState\"])(false);const[isRoomMuted,setIsRoomMuted]=Object(react[\"useState\"])(false);const{navigatorData=null}=useNavigatorContext();const hasPermission=permission=>{switch(permission){case'settings':return GetSessionDataManager().userId===navigatorData.enteredGuestRoom.ownerId||GetSessionDataManager().isModerator;case'staff_pick':return GetSessionDataManager().securityLevel>=nitro_renderer[\"Hh\" /* SecurityLevel */].COMMUNITY;default:return false;}};const processAction=(action,value)=>{if(!navigatorData||!navigatorData.enteredGuestRoom)return;switch(action){case'set_home_room':let newRoomId=-1;if(navigatorData.homeRoomId!==navigatorData.enteredGuestRoom.roomId){newRoomId=navigatorData.enteredGuestRoom.roomId;}if(newRoomId>0)SendMessageComposer(new nitro_renderer[\"Ei\" /* UserHomeRoomComposer */](newRoomId));return;case'navigator_search_tag':return;case'open_room_thumbnail_camera':DispatchUiEvent(new RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent(RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.TOGGLE_THUMBNAIL));return;case'open_group_info':GetGroupInformation(navigatorData.enteredGuestRoom.habboGroupId);return;case'toggle_room_link':CreateLinkEvent('navigator/toggle-room-link');return;case'open_room_settings':SendMessageComposer(new nitro_renderer[\"ih\" /* RoomSettingsComposer */](navigatorData.enteredGuestRoom.roomId));return;case'toggle_pick':setIsRoomPicked(value=>!value);SendMessageComposer(new nitro_renderer[\"mh\" /* RoomStaffPickComposer */](navigatorData.enteredGuestRoom.roomId));return;case'toggle_mute':setIsRoomMuted(value=>!value);SendMessageComposer(new nitro_renderer[\"Hg\" /* RoomMuteComposer */]());return;case'open_floorplan_editor':CreateLinkEvent('floor-editor/toggle');return;case'close':onCloseClick();return;}};Object(react[\"useEffect\"])(()=>{if(!navigatorData)return;setIsRoomPicked(navigatorData.currentRoomIsStaffPick);if(navigatorData.enteredGuestRoom)setIsRoomMuted(navigatorData.enteredGuestRoom.allInRoomMuted);},[navigatorData]);if(!navigatorData.enteredGuestRoom)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-room-info\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.roomsettings.roominfo'),onCloseClick:()=>processAction('close')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black\",children:navigatorData.enteredGuestRoom&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,bold:true,children:navigatorData.enteredGuestRoom.roomName})}),navigatorData.enteredGuestRoom.showOwner&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,variant:\"muted\",children:LocalizeText('navigator.roomownercaption')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:navigatorData.enteredGuestRoom.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:navigatorData.enteredGuestRoom.ownerName})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,variant:\"muted\",children:LocalizeText('navigator.roomrating')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:navigatorData.currentRoomRating})]}),navigatorData.enteredGuestRoom.tags.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",gap:1,children:navigatorData.enteredGuestRoom.tags.map(tag=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{pointer:true,className:\"bg-muted rounded p-1\",onClick:event=>processAction('navigator_search_tag',tag),children:[\"#\",tag]},tag);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{alignItems:\"center\",gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{onClick:()=>processAction('set_home_room'),className:'flex-shrink-0 icon icon-house-small cursor-pointer'+classnames_default()({' gray':navigatorData.homeRoomId!==navigatorData.enteredGuestRoom.roomId})})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,overflow:\"auto\",style:{maxHeight:50},children:navigatorData.enteredGuestRoom.description}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomThumbnailView,{roomId:navigatorData.enteredGuestRoom.roomId,customUrl:navigatorData.enteredGuestRoom.officialRoomPicRef,children:hasPermission('settings')&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0\",onClick:()=>processAction('open_room_thumbnail_camera')})})}),navigatorData.enteredGuestRoom.habboGroupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,alignItems:\"center\",gap:2,onClick:()=>processAction('open_group_info'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{className:\"flex-none\",badgeCode:navigatorData.enteredGuestRoom.groupBadgeCode,isGroup:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,children:LocalizeText('navigator.guildbase',['groupName'],[navigatorData.enteredGuestRoom.groupName])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"w-100 room-tool-item\",onClick:()=>processAction('toggle_room_link'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.like.button.text'),className:\"icon-width icon icon-link-room float-start\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,children:LocalizeText('navigator.embed.caption')})]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[hasPermission('staff_pick')&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:()=>processAction('toggle_pick'),children:LocalizeText(isRoomPicked?'navigator.staffpicks.unpick':'navigator.staffpicks.pick')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:true,children:LocalizeText('help.emergency.main.report.room')}),hasPermission('settings')&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:()=>processAction('open_room_settings'),children:LocalizeText('navigator.room.popup.info.room.settings')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:()=>processAction('toggle_mute'),children:LocalizeText(isRoomMuted?'navigator.muteall_on':'navigator.muteall_off')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:()=>processAction('open_floorplan_editor'),children:LocalizeText('open.floor.plan.editor')})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/NavigatorRoomLinkView.tsx\nclass NavigatorRoomLinkViewProps{constructor(){this.onCloseClick=void 0;}}const NavigatorRoomLinkView=props=>{const{onCloseClick=null}=props;const{navigatorData=null}=useNavigatorContext();if(!navigatorData.enteredGuestRoom)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-room-link\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.embed.title'),onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{className:\"text-black d-flex align-items-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRoomThumbnailView,{roomId:navigatorData.enteredGuestRoom.roomId,customUrl:navigatorData.enteredGuestRoom.officialRoomPicRef}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:5,children:LocalizeText('navigator.embed.headline')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.embed.info')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[\" \",LocalizeText('navigator.embed.direct.info')]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",readOnly:true,className:\"form-control form-control-sm\",value:LocalizeText('navigator.embed.src',['roomId'],[navigatorData.enteredGuestRoom.roomId.toString()])})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsAccessTabView.tsx\nconst NavigatorRoomSettingsAccessTabView=props=>{const{roomData=null,handleChange=null}=props;const[password,setPassword]=Object(react[\"useState\"])('');const[confirmPassword,setConfirmPassword]=Object(react[\"useState\"])('');const[isTryingPassword,setIsTryingPassword]=Object(react[\"useState\"])(false);const saveRoomPassword=()=>{if(!isTryingPassword||password.length<=0||confirmPassword.length<=0||password!==confirmPassword)return;handleChange('password',password);};Object(react[\"useEffect\"])(()=>{setPassword('');setConfirmPassword('');setIsTryingPassword(false);},[roomData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.roomaccess.caption')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.roomaccess.info')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.doormode')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:roomData.lockState===nitro_renderer[\"hg\" /* RoomDataParser */].OPEN_STATE&&!isTryingPassword,onChange:event=>handleChange('lock_state',nitro_renderer[\"hg\" /* RoomDataParser */].OPEN_STATE)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.doormode.open')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:roomData.lockState===nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE&&!isTryingPassword,onChange:event=>handleChange('lock_state',nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.doormode.doorbell')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:roomData.lockState===nitro_renderer[\"hg\" /* RoomDataParser */].INVISIBLE_STATE&&!isTryingPassword,onChange:event=>handleChange('lock_state',nitro_renderer[\"hg\" /* RoomDataParser */].INVISIBLE_STATE)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.doormode.invisible')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"lockState\",checked:roomData.lockState===nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE||isTryingPassword,onChange:event=>setIsTryingPassword(event.target.checked)}),!isTryingPassword&&roomData.lockState!==nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.doormode.password')}),(isTryingPassword||roomData.lockState===nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.doormode.password')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",className:\"form-control form-control-sm col-4\",value:password,onChange:event=>setPassword(event.target.value),placeholder:LocalizeText('navigator.roomsettings.password'),onFocus:event=>setIsTryingPassword(true)}),isTryingPassword&&password.length<=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,variant:\"danger\",children:LocalizeText('navigator.roomsettings.passwordismandatory')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",className:\"form-control form-control-sm col-4\",value:confirmPassword,onChange:event=>setConfirmPassword(event.target.value),onBlur:saveRoomPassword,placeholder:LocalizeText('navigator.roomsettings.passwordconfirm')}),isTryingPassword&&password.length>0&&password!==confirmPassword&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,variant:\"danger\",children:LocalizeText('navigator.roomsettings.invalidconfirm')})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.pets')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.allowPets,onChange:event=>handleChange('allow_pets',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.allowpets')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.allowPetsEat,onChange:event=>handleChange('allow_pets_eat',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.allowfoodconsume')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsBasicTabView.tsx\nconst ROOM_NAME_MIN_LENGTH=3;const ROOM_NAME_MAX_LENGTH=60;const DESC_MAX_LENGTH=255;const NavigatorRoomSettingsBasicTabView=props=>{const{roomData=null,handleChange=null,close=null}=props;const[roomName,setRoomName]=Object(react[\"useState\"])('');const[roomDescription,setRoomDescription]=Object(react[\"useState\"])('');const{categories=null}=useNavigatorContext();const deleteRoom=()=>{NotificationUtilities_NotificationUtilities.confirm(LocalizeText('navigator.roomsettings.deleteroom.confirm.message',['room_name'],[roomData.roomName]),()=>{SendMessageComposer(new nitro_renderer[\"ig\" /* RoomDeleteComposer */](roomData.roomId));if(close)close();CreateLinkEvent('navigator/search/myworld_view');},null,null,null,LocalizeText('navigator.roomsettings.deleteroom.confirm.title'));};const saveRoomName=()=>{if(roomName===roomData.roomName||roomName.length<ROOM_NAME_MIN_LENGTH||roomName.length>ROOM_NAME_MAX_LENGTH)return;handleChange('name',roomName);};const saveRoomDescription=()=>{if(roomDescription===roomData.roomDescription||roomDescription.length>DESC_MAX_LENGTH)return;handleChange('description',roomDescription);};Object(react[\"useEffect\"])(()=>{setRoomName(roomData.roomName);setRoomDescription(roomData.roomDescription);},[roomData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('navigator.roomname')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-control form-control-sm\",value:roomName,maxLength:ROOM_NAME_MAX_LENGTH,onChange:event=>setRoomName(event.target.value),onBlur:saveRoomName}),roomName.length<ROOM_NAME_MIN_LENGTH&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,variant:\"danger\",children:LocalizeText('navigator.roomsettings.roomnameismandatory')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('navigator.roomsettings.desc')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control form-control-sm\",value:roomDescription,maxLength:DESC_MAX_LENGTH,onChange:event=>setRoomDescription(event.target.value),onBlur:saveRoomDescription})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('navigator.category')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.categoryId,onChange:event=>handleChange('category',event.target.value),children:categories&&categories.map(category=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:category.id,children:LocalizeText(category.name)},category.id))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('navigator.maxvisitors')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.userCount,onChange:event=>handleChange('max_visitors',event.target.value),children:GetMaxVisitorsList&&GetMaxVisitorsList.map(value=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:value,children:value},value))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"col-3\",children:LocalizeText('navigator.tradesettings')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.tradeState,onChange:event=>handleChange('trade_state',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.trade_not_allowed')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.trade_not_with_Controller')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"2\",children:LocalizeText('navigator.roomsettings.trade_allowed')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"col-3\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.allowWalkthrough,onChange:event=>handleChange('allow_walkthrough',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.allow_walk_through')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{variant:\"danger\",underline:true,bold:true,pointer:true,className:\"d-flex justify-content-center align-items-center gap-1\",onClick:deleteRoom,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\"}),LocalizeText('navigator.roomsettings.delete')]})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsModTabView.tsx\nconst NavigatorRoomSettingsModTabView=props=>{var _bannedUsers$find;const{roomData=null,handleChange=null}=props;const[selectedUserId,setSelectedUserId]=Object(react[\"useState\"])(-1);const[bannedUsers,setBannedUsers]=Object(react[\"useState\"])([]);const onBannedUsersFromRoomEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setBannedUsers(parser.bannedUsers);},[roomData]);UseMessageEventHook(nitro_renderer[\"w\" /* BannedUsersFromRoomEvent */],onBannedUsersFromRoomEvent);const unBanUser=Object(react[\"useCallback\"])(userId=>{setBannedUsers(prevValue=>{const newValue=[...prevValue];const index=newValue.findIndex(value=>value.userId===userId);if(index>=0)newValue.splice(index,1);return newValue;});SendMessageComposer(new nitro_renderer[\"ph\" /* RoomUnbanUserComposer */](userId,roomData.roomId));setSelectedUserId(-1);},[roomData]);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"Yf\" /* RoomBannedUsersComposer */](roomData.roomId));},[roomData.roomId]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{bold:true,children:[LocalizeText('navigator.roomsettings.moderation.banned.users'),\" (\",bannedUsers.length,\")\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,overflow:\"auto\",gap:1,children:bannedUsers&&bannedUsers.length>0&&bannedUsers.map((user,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{shrink:true,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userName:user.userName}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{pointer:true,grow:true,onClick:event=>setSelectedUserId(user.userId),children:[\" \",user.userName]})]},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Button,{disabled:selectedUserId<=0,onClick:event=>unBanUser(selectedUserId),children:[LocalizeText('navigator.roomsettings.moderation.unban'),\" \",selectedUserId>0&&((_bannedUsers$find=bannedUsers.find(user=>user.userId===selectedUserId))===null||_bannedUsers$find===void 0?void 0:_bannedUsers$find.userName)]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.mute.header')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowMute===1,onChange:event=>handleChange('moderation_mute',event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.kick.header')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowKick===0,onChange:event=>handleChange('moderation_kick',event.target.checked?0:2)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.moderation.all')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowKick===1||roomData.moderationSettings.allowKick===0,disabled:roomData.moderationSettings.allowKick===0,onChange:event=>handleChange('moderation_kick',event.target.checked?1:2)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.moderation.ban.header')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.moderationSettings.allowBan===1,onChange:event=>handleChange('moderation_ban',event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.moderation.rights')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsRightsTabView.tsx\nconst NavigatorRoomSettingsRightsTabView=props=>{const{roomData=null}=props;const[usersWithRights,setUsersWithRights]=Object(react[\"useState\"])(new Map());const onFlatControllersEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(parser.users);},[roomData]);UseMessageEventHook(nitro_renderer[\"Db\" /* FlatControllersEvent */],onFlatControllersEvent);const onFlatControllerAddedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(prevValue=>{const newValue=new Map(prevValue);newValue.set(parser.data.userId,parser.data.userName);return newValue;});},[roomData]);UseMessageEventHook(nitro_renderer[\"Bb\" /* FlatControllerAddedEvent */],onFlatControllerAddedEvent);const onFlatControllerRemovedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!roomData||roomData.roomId!==parser.roomId)return;setUsersWithRights(prevValue=>{const newValue=new Map(prevValue);newValue.delete(parser.userId);return newValue;});},[roomData]);UseMessageEventHook(nitro_renderer[\"Cb\" /* FlatControllerRemovedEvent */],onFlatControllerRemovedEvent);Object(react[\"useEffect\"])(()=>{SendMessageComposer(new nitro_renderer[\"uh\" /* RoomUsersWithRightsComposer */](roomData.roomId));},[roomData.roomId]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.flatctrls.userswithrights',['displayed','total'],[usersWithRights.size.toString(),usersWithRights.size.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{overflow:\"hidden\",className:\"bg-white rounded list-container p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,overflow:\"auto\",gap:1,children:Array.from(usersWithRights.entries()).map((_ref,index)=>{let[id,name]=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{shrink:true,alignItems:\"center\",gap:1,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userName:name}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{pointer:true,grow:true,onClick:event=>SendMessageComposer(new nitro_renderer[\"nh\" /* RoomTakeRightsComposer */](id)),children:[\" \",name]})]},index);})})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:6,justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",disabled:!usersWithRights.size,onClick:event=>SendMessageComposer(new nitro_renderer[\"Of\" /* RemoveAllRightsMessageComposer */](roomData.roomId)),children:LocalizeText('navigator.flatctrls.clear')})})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsVipChatTabView.tsx\nconst NavigatorRoomSettingsVipChatTabView=props=>{const{roomData=null,handleChange=null}=props;const[chatDistance,setChatDistance]=Object(react[\"useState\"])(0);Object(react[\"useEffect\"])(()=>{setChatDistance(roomData.chatSettings.distance);},[roomData.chatSettings]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.vip.caption')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.vip.info')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.chat_settings')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.chat_settings.info')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.chatSettings.mode,onChange:event=>handleChange('bubble_mode',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_MODE_FREE_FLOW,children:LocalizeText('navigator.roomsettings.chat.mode.free.flow')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_MODE_LINE_BY_LINE,children:LocalizeText('navigator.roomsettings.chat.mode.line.by.line')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.chatSettings.weight,onChange:event=>handleChange('chat_weight',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_NORMAL,children:LocalizeText('navigator.roomsettings.chat.bubbles.width.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_THIN,children:LocalizeText('navigator.roomsettings.chat.bubbles.width.thin')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_WIDE,children:LocalizeText('navigator.roomsettings.chat.bubbles.width.wide')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.chatSettings.speed,onChange:event=>handleChange('bubble_speed',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_FAST,children:LocalizeText('navigator.roomsettings.chat.speed.fast')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_NORMAL,children:LocalizeText('navigator.roomsettings.chat.speed.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_SLOW,children:LocalizeText('navigator.roomsettings.chat.speed.slow')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.chatSettings.protection,onChange:event=>handleChange('flood_protection',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].FLOOD_FILTER_LOOSE,children:LocalizeText('navigator.roomsettings.chat.flood.loose')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].FLOOD_FILTER_NORMAL,children:LocalizeText('navigator.roomsettings.chat.flood.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:nitro_renderer[\"bg\" /* RoomChatSettings */].FLOOD_FILTER_STRICT,children:LocalizeText('navigator.roomsettings.chat.flood.strict')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.chat_settings.hearing.distance')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",min:\"0\",className:\"form-control form-control-sm\",value:chatDistance,onChange:event=>setChatDistance(event.target.valueAsNumber),onBlur:event=>handleChange('chat_distance',chatDistance)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:6,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roomsettings.vip_settings')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:roomData.hideWalls,onChange:event=>handleChange('hide_walls',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('navigator.roomsettings.hide_walls')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.wallThickness,onChange:event=>handleChange('wall_thickness',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.wall_thickness.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.wall_thickness.thick')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"-1\",children:LocalizeText('navigator.roomsettings.wall_thickness.thin')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"-2\",children:LocalizeText('navigator.roomsettings.wall_thickness.thinnest')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:roomData.floorThickness,onChange:event=>handleChange('floor_thickness',event.target.value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.floor_thickness.normal')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.floor_thickness.thick')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"-1\",children:LocalizeText('navigator.roomsettings.floor_thickness.thin')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"-2\",children:LocalizeText('navigator.roomsettings.floor_thickness.thinnest')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/room-settings/NavigatorRoomSettingsView.tsx\nconst NavigatorRoomSettingsView_TABS=['navigator.roomsettings.tab.1','navigator.roomsettings.tab.2','navigator.roomsettings.tab.3','navigator.roomsettings.tab.4','navigator.roomsettings.tab.5'];const NavigatorRoomSettingsView=props=>{const[roomData,setRoomData]=Object(react[\"useState\"])(null);const[currentTab,setCurrentTab]=Object(react[\"useState\"])(NavigatorRoomSettingsView_TABS[0]);const onRoomSettingsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser)return;setRoomData({roomId:parser.roomId,roomName:parser.name,roomDescription:parser.description,categoryId:parser.categoryId,userCount:parser.userCount,tags:parser.tags,tradeState:parser.tradeMode,allowWalkthrough:parser.allowWalkthrough,lockState:parser.state,password:null,allowPets:parser.allowPets,allowPetsEat:parser.allowPetsEat,hideWalls:parser.hideWalls,wallThickness:parser.thicknessWall,floorThickness:parser.thicknessFloor,chatSettings:{mode:parser.chatSettings.mode,weight:parser.chatSettings.weight,speed:parser.chatSettings.speed,distance:parser.chatSettings.distance,protection:parser.chatSettings.protection},moderationSettings:{allowMute:parser.moderationSettings.allowMute,allowKick:parser.moderationSettings.allowKick,allowBan:parser.moderationSettings.allowBan}});SendMessageComposer(new nitro_renderer[\"Yf\" /* RoomBannedUsersComposer */](parser.roomId));},[]);UseMessageEventHook(nitro_renderer[\"jh\" /* RoomSettingsEvent */],onRoomSettingsEvent);const close=()=>{setRoomData(null);setCurrentTab(NavigatorRoomSettingsView_TABS[0]);};const handleChange=(field,value)=>{setRoomData(prevValue=>{const newValue={...prevValue};switch(field){case'name':newValue.roomName=String(value);break;case'description':newValue.roomDescription=String(value);break;case'category':newValue.categoryId=Number(value);break;case'max_visitors':newValue.userCount=Number(value);break;case'trade_state':newValue.tradeState=Number(value);break;case'allow_walkthrough':newValue.allowWalkthrough=Boolean(value);break;case'allow_pets':newValue.allowPets=Boolean(value);break;case'allow_pets_eat':newValue.allowPetsEat=Boolean(value);break;case'hide_walls':newValue.hideWalls=Boolean(value);break;case'wall_thickness':newValue.wallThickness=Number(value);break;case'floor_thickness':newValue.floorThickness=Number(value);break;case'lock_state':newValue.lockState=Number(value);break;case'password':newValue.lockState=nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE;newValue.password=String(value);break;case'moderation_mute':newValue.moderationSettings.allowMute=Number(value);break;case'moderation_kick':newValue.moderationSettings.allowKick=Number(value);break;case'moderation_ban':newValue.moderationSettings.allowBan=Number(value);break;case'bubble_mode':newValue.chatSettings.mode=Number(value);break;case'chat_weight':newValue.chatSettings.weight=Number(value);break;case'bubble_speed':newValue.chatSettings.speed=Number(value);break;case'flood_protection':newValue.chatSettings.protection=Number(value);break;case'chat_distance':newValue.chatSettings.distance=Number(value);break;}SendMessageComposer(new nitro_renderer[\"Dh\" /* SaveRoomSettingsComposer */](newValue.roomId,newValue.roomName,newValue.roomDescription,newValue.lockState,newValue.password,newValue.userCount,newValue.categoryId,newValue.tags.length,newValue.tags,newValue.tradeState,newValue.allowPets,newValue.allowPetsEat,newValue.allowWalkthrough,newValue.hideWalls,newValue.wallThickness,newValue.floorThickness,newValue.moderationSettings.allowMute,newValue.moderationSettings.allowKick,newValue.moderationSettings.allowBan,newValue.chatSettings.mode,newValue.chatSettings.weight,newValue.chatSettings.speed,newValue.chatSettings.distance,newValue.chatSettings.protection));return newValue;});};if(!roomData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"nitro-room-settings\",className:\"nitro-room-settings\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.roomsettings'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:NavigatorRoomSettingsView_TABS.map(tab=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:currentTab===tab,onClick:event=>setCurrentTab(tab),children:LocalizeText(tab)},tab);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[currentTab===NavigatorRoomSettingsView_TABS[0]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsBasicTabView,{roomData:roomData,handleChange:handleChange,close:close}),currentTab===NavigatorRoomSettingsView_TABS[1]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsAccessTabView,{roomData:roomData,handleChange:handleChange}),currentTab===NavigatorRoomSettingsView_TABS[2]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsRightsTabView,{roomData:roomData,handleChange:handleChange}),currentTab===NavigatorRoomSettingsView_TABS[3]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsVipChatTabView,{roomData:roomData,handleChange:handleChange}),currentTab===NavigatorRoomSettingsView_TABS[4]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsModTabView,{roomData:roomData,handleChange:handleChange})]})]});};\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Overlay.js + 76 modules\nvar Overlay = __webpack_require__(90);\n\n// CONCATENATED MODULE: ./src/components/navigator/views/search/NavigatorSearchResultItemInfoView.tsx\nconst NavigatorSearchResultItemInfoView=props=>{const{roomData=null}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const elementRef=Object(react[\"useRef\"])();const getUserCounterColor=()=>{const num=100*(roomData.userCount/roomData.maxUserCount);let bg='bg-primary';if(num>=92){bg='bg-danger';}else if(num>=50){bg='bg-warning';}else if(num>0){bg='bg-success';}return bg;};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,innerRef:elementRef,className:\"icon icon-navigator-info\",onMouseOver:event=>setIsVisible(true),onMouseLeave:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Overlay[\"a\" /* default */],{show:isVisible,target:elementRef.current,placement:\"right\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Popover[\"a\" /* default */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",className:\"room-info bg-transparent\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,overflow:\"hidden\",className:\"room-info-bg p-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutRoomThumbnailView,{roomId:roomData.roomId,customUrl:roomData.officialRoomPicRef,className:\"d-flex flex-column align-items-center justify-content-end mb-1\",children:[roomData.habboGroupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:roomData.groupBadgeCode,isGroup:true,className:'position-absolute top-0 start-0 m-1 '}),roomData.doorMode!==nitro_renderer[\"hg\" /* RoomDataParser */].OPEN_STATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'position-absolute end-0 mb-1 me-1 icon icon-navigator-room-'+(roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE?'locked':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE?'password':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].INVISIBLE_STATE?'invisible':'')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,truncate:true,className:\"flex-grow-1\",style:{maxHeight:13},children:roomData.roomName}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{italics:true,variant:\"muted\",children:LocalizeText('navigator.roomownercaption')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:roomData.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{italics:true,children:roomData.ownerName})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"flex-grow-1\",children:roomData.description})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"align-items-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:roomData.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,underline:true,children:roomData.ownerName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,className:\"align-items-center\",justifyContent:\"end\",fullWidth:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-navigator-room-group\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,underline:true,children:roomData.groupName})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('navigator.roompopup.property.max_users')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:roomData.maxUserCount})]})]})]})})})]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/search/NavigatorSearchResultItemView.tsx\nconst NavigatorSearchResultItemView=props=>{const{roomData=null,children=null,thumbnail=false,...rest}=props;const{setDoorData=null}=useNavigatorContext();const getUserCounterColor=()=>{const num=100*(roomData.userCount/roomData.maxUserCount);let bg='badge-empty';if(num>=92){bg='badge-danger';}else if(num>=50){bg='badge-warning';}else if(num>0){bg='badge-success';}return bg;};const visitRoom=event=>{if(roomData.ownerId!==GetSessionDataManager().userId){if(roomData.habboGroupId!==0){TryVisitRoom(roomData.roomId);return;}switch(roomData.doorMode){case nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE:setDoorData(prevValue=>{const newValue={...prevValue};newValue.roomInfo=roomData;newValue.state=DoorStateType.START_DOORBELL;return newValue;});return;case nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE:setDoorData(prevValue=>{const newValue={...prevValue};newValue.roomInfo=roomData;newValue.state=DoorStateType.START_PASSWORD;return newValue;});return;}}CreateRoomSession(roomData.roomId);};if(thumbnail)return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{pointer:true,overflow:\"hidden\",alignItems:\"center\",onClick:visitRoom,gap:0,className:\"nav-thumbnail p-1 rounded-3 small mb-1 flex-column\",...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutRoomThumbnailView,{roomId:roomData.roomId,customUrl:roomData.officialRoomPicRef,className:\"d-flex flex-column align-items-center justify-content-end mb-1\",children:[roomData.habboGroupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:roomData.groupBadgeCode,isGroup:true,className:'position-absolute top-0 start-0 m-1'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,className:'badge p-1 position-absolute m-1 '+getUserCounterColor(),gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"user\"}),roomData.userCount]}),roomData.doorMode!==nitro_renderer[\"hg\" /* RoomDataParser */].OPEN_STATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'position-absolute end-0 mb-1 me-1 icon icon-navigator-room-'+(roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE?'locked':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE?'password':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].INVISIBLE_STATE?'invisible':'')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"w-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,className:\"flex-grow-1\",children:roomData.roomName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{reverse:true,alignItems:\"center\",gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchResultItemInfoView,{roomData:roomData})}),children]})]});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,overflow:\"hidden\",alignItems:\"center\",onClick:visitRoom,gap:2,className:\"navigator-item px-2 small\",...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,className:'p-1 fw-bold '+getUserCounterColor(),gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"nav-avatar-icon\"}),roomData.userCount]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{truncate:true,grow:true,children:roomData.roomName}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{reverse:true,alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchResultItemInfoView,{roomData:roomData}),roomData.habboGroupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-navigator-room-group\"}),roomData.doorMode!==nitro_renderer[\"hg\" /* RoomDataParser */].OPEN_STATE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'icon icon-navigator-room-'+(roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].DOORBELL_STATE?'locked':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].PASSWORD_STATE?'password':roomData.doorMode===nitro_renderer[\"hg\" /* RoomDataParser */].INVISIBLE_STATE?'invisible':'')})]}),children]});};\n// CONCATENATED MODULE: ./src/components/navigator/views/search/NavigatorSearchResultView.tsx\nconst NavigatorSearchResultView=props=>{const{searchResult=null,...rest}=props;const[isExtended,setIsExtended]=Object(react[\"useState\"])(true);const[displayMode,setDisplayMode]=Object(react[\"useState\"])(0);const getResultTitle=()=>{let name=searchResult.code;if(!name||!name.length)return searchResult.data;if(name.startsWith('${'))return name.slice(2,name.length-1);return'navigator.searchcode.title.'+name;};const toggleDisplayMode=()=>{setDisplayMode(prevValue=>{if(prevValue===NavigatorSearchResultViewDisplayMode.LIST)return NavigatorSearchResultViewDisplayMode.THUMBNAILS;return NavigatorSearchResultViewDisplayMode.LIST;});};Object(react[\"useEffect\"])(()=>{if(!searchResult)return;//setIsExtended(searchResult.closed);\nsetDisplayMode(searchResult.mode);},[searchResult,props]);const gridHasTwoColumns=displayMode>=NavigatorSearchResultViewDisplayMode.THUMBNAILS;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"bg-white\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,alignItems:\"center\",justifyContent:\"between\",className:\"px-2 py-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{grow:true,pointer:true,alignItems:\"center\",gap:1,onClick:event=>setIsExtended(prevValue=>!prevValue),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:isExtended?'icon icon-nav-minus':'icon icon-nav-plus'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"nav-category\",children:[\" \",LocalizeText(getResultTitle())]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:displayMode===NavigatorSearchResultViewDisplayMode.LIST?'icon icon-nav-thumbnail':displayMode>=NavigatorSearchResultViewDisplayMode.THUMBNAILS?'icon icon-nav-inline':null,onClick:toggleDisplayMode})]}),\" \",isExtended&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:gridHasTwoColumns?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{columnCount:3,...rest,columnMinWidth:110,columnMinHeight:130,className:\"mx-2\",children:searchResult.rooms.length>0&&searchResult.rooms.map((room,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchResultItemView,{roomData:room,thumbnail:true},index))}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:1,className:\"navigator-grid\",gap:0,children:searchResult.rooms.length>0&&searchResult.rooms.map((room,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchResultItemView,{roomData:room},index))})})]})// <div className=\"nitro-navigator-search-result bg-white rounded mb-2 overflow-hidden\">\n//     <div className=\"d-flex flex-column\">\n//         <div className=\"d-flex align-items-center px-2 py-1 text-black\">\n//             <i className={ 'text-secondary fas ' + (isExtended ? 'fa-minus' : 'fa-plus') } onClick={ toggleExtended }></i>\n//             <div className=\"ms-2 flex-grow-1\">{ LocalizeText(getResultTitle()) }</div>\n//             <i className={ 'text-secondary fas ' + classNames({ 'fa-bars': (displayMode === NavigatorSearchResultViewDisplayMode.LIST), 'fa-th': displayMode >= NavigatorSearchResultViewDisplayMode.THUMBNAILS })}></i>\n//         </div>\n//         { isExtended &&\n//             <div className={ 'nitro-navigator-result-list row row-cols-' + classNames({ '1': (displayMode === NavigatorSearchResultViewDisplayMode.LIST), '2': (displayMode >= NavigatorSearchResultViewDisplayMode.THUMBNAILS) }) }>\n//                 { searchResult.rooms.length > 0 && searchResult.rooms.map((room, index) =>\n//                     {\n//                         return <NavigatorSearchResultItemView key={ index } roomData={ room } />\n//                     }) }\n//             </div> }\n//     </div>\n// </div>\n// <div className=\"nitro-navigator-result-list p-2\">\n//     <div className=\"d-flex mb-2 small cursor-pointer\" onClick={ toggleList }>\n//         <i className={ \"fas \" + classNames({ 'fa-plus': !isExtended, 'fa-minus': isExtended })}></i>\n//         <div className=\"align-self-center w-100 ml-2\">{ LocalizeText(getListCode()) }</div>\n//         <i className={ \"fas \" + classNames({ 'fa-bars': displayMode === NavigatorResultListViewDisplayMode.LIST, 'fa-th': displayMode >= NavigatorResultListViewDisplayMode.THUMBNAILS })} onClick={ toggleDisplayMode }></i>\n//     </div>\n//     <div className={ 'row mr-n2 row-cols-' + classNames({ '1': displayMode === NavigatorResultListViewDisplayMode.LIST, '2': displayMode >= NavigatorResultListViewDisplayMode.THUMBNAILS }) }>\n//         { isExtended && resultList && resultList.rooms.map((room, index) =>\n//             {\n//                 return <NavigatorResultView key={ index } result={ room } />\n//             })\n//         }\n//     </div>\n// </div>\n;};\n// CONCATENATED MODULE: ./src/components/navigator/views/search/NavigatorSearchView.tsx\nconst NavigatorSearchView=props=>{const{sendSearch=null}=props;const[searchFilterIndex,setSearchFilterIndex]=Object(react[\"useState\"])(0);const[searchValue,setSearchValue]=Object(react[\"useState\"])('');const{topLevelContext=null,searchResult=null}=useNavigatorContext();const processSearch=()=>{if(!topLevelContext)return;let searchFilter=SearchFilterOptions[searchFilterIndex];if(!searchFilter)searchFilter=SearchFilterOptions[0];const searchQuery=(searchFilter.query?searchFilter.query+':':'')+searchValue;sendSearch(searchQuery||'',topLevelContext.code);};const handleKeyDown=event=>{if(event.key!=='Enter')return;processSearch();};Object(react[\"useEffect\"])(()=>{if(!searchResult)return;const split=searchResult.data.split(':');let filter=null;let value='';if(split.length>=2){const[query,...rest]=split;filter=SearchFilterOptions.find(option=>option.query===query);value=rest.join(':');}else{value=searchResult.data;}if(!filter)filter=SearchFilterOptions[0];setSearchFilterIndex(SearchFilterOptions.findIndex(option=>option===filter));setSearchValue(value);},[searchResult]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{shrink:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:searchFilterIndex,onChange:event=>setSearchFilterIndex(parseInt(event.target.value)),children:SearchFilterOptions.map((filter,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:index,children:LocalizeText('navigator.filter.'+filter.name)},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('navigator.filter.input.placeholder'),value:searchValue,onChange:event=>setSearchValue(event.target.value),onKeyDown:event=>handleKeyDown(event)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-pen navigator-search-button position-absolute\",onClick:processSearch})]})]});};\n// CONCATENATED MODULE: ./src/components/navigator/NavigatorView.tsx\nconst NavigatorView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[isReady,setIsReady]=Object(react[\"useState\"])(false);const[isCreatorOpen,setCreatorOpen]=Object(react[\"useState\"])(false);const[isRoomInfoOpen,setRoomInfoOpen]=Object(react[\"useState\"])(false);const[isRoomLinkOpen,setRoomLinkOpen]=Object(react[\"useState\"])(false);const[isLoading,setIsLoading]=Object(react[\"useState\"])(false);const[needsInit,setNeedsInit]=Object(react[\"useState\"])(true);const[needsSearch,setNeedsSearch]=Object(react[\"useState\"])(false);const[categories,setCategories]=Object(react[\"useState\"])(null);const[topLevelContext,setTopLevelContext]=Object(react[\"useState\"])(null);const[topLevelContexts,setTopLevelContexts]=Object(react[\"useState\"])(null);const[navigatorData,setNavigatorData]=useSharedNavigatorData();const[doorData,setDoorData]=Object(react[\"useState\"])({roomInfo:null,state:DoorStateType.NONE});const[searchResult,setSearchResult]=Object(react[\"useState\"])(null);const pendingSearch=Object(react[\"useRef\"])(null);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED:setIsVisible(false);setCreatorOpen(false);return;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED,onRoomSessionEvent);const sendSearch=Object(react[\"useCallback\"])((searchValue,contextCode)=>{SendMessageComposer(new nitro_renderer[\"Je\" /* NavigatorSearchComposer */](contextCode,searchValue));setIsLoading(true);},[]);const reloadCurrentSearch=Object(react[\"useCallback\"])(()=>{if(!isReady){setNeedsSearch(true);return;}if(pendingSearch.current){sendSearch(pendingSearch.current.value,pendingSearch.current.code);pendingSearch.current=null;return;}if(searchResult){sendSearch(searchResult.data,searchResult.code);return;}if(!topLevelContext)return;sendSearch('',topLevelContext.code);},[isReady,searchResult,topLevelContext,sendSearch]);const linkReceived=Object(react[\"useCallback\"])(url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':{setIsVisible(true);setNeedsSearch(true);return;}case'hide':setIsVisible(false);return;case'toggle':{if(isVisible){setIsVisible(false);return;}setIsVisible(true);setNeedsSearch(true);return;}case'toggle-room-info':setRoomInfoOpen(value=>!value);return;case'toggle-room-link':setRoomLinkOpen(value=>!value);return;case'goto':if(parts.length<=2)return;switch(parts[2]){case'home':if(navigatorData.homeRoomId<=0)return;TryVisitRoom(navigatorData.homeRoomId);break;default:{const roomId=parseInt(parts[2]);TryVisitRoom(roomId);}}return;case'create':setCreatorOpen(value=>!value);return;case'close-creator':setCreatorOpen(false);return;case'search':if(parts.length>2){const topLevelContextCode=parts[2];let searchValue='';if(parts.length>3)searchValue=parts[3];pendingSearch.current={value:searchValue,code:topLevelContextCode};setIsVisible(true);setNeedsSearch(true);}return;}},[isVisible,navigatorData]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived,eventUrlPrefix:'navigator/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[linkReceived]);Object(react[\"useEffect\"])(()=>{if(!searchResult)return;setIsLoading(false);},[searchResult]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!isReady||!needsSearch)return;reloadCurrentSearch();setNeedsSearch(false);},[isVisible,isReady,needsSearch,reloadCurrentSearch]);Object(react[\"useEffect\"])(()=>{if(isReady||!topLevelContext)return;setIsReady(true);},[isReady,topLevelContext]);Object(react[\"useEffect\"])(()=>{if(!isVisible||!needsInit)return;SendMessageComposer(new nitro_renderer[\"Ge\" /* NavigatorInitComposer */]());setNeedsInit(false);},[isVisible,needsInit]);Object(react[\"useEffect\"])(()=>{nitro_renderer[\"Wd\" /* LegacyExternalInterface */].addCallback(nitro_renderer[\"Jd\" /* HabboWebTools */].OPENROOM,function(k){let _arg_2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let _arg_3=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return SendMessageComposer(new nitro_renderer[\"pb\" /* ConvertGlobalRoomIdMessageComposer */](k));});},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NavigatorContextProvider,{value:{categories,setCategories,topLevelContext,setTopLevelContext,topLevelContexts,setTopLevelContexts,navigatorData,setNavigatorData,doorData,setDoorData,searchResult,setSearchResult},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorMessageHandler,{}),isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"navigator\",className:\"nitro-navigator\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.title'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:topLevelContexts&&topLevelContexts.length>0&&topLevelContexts.map((context,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:topLevelContext===context,onClick:event=>sendSearch('',context.code),children:LocalizeText('navigator.toplevelview.'+context.code)},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{position:\"relative\",children:[isLoading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,position:\"absolute\",className:\"top-0 start-0 z-index-1 bg-muted opacity-0-5\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchView,{sendSearch:sendSearch}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",children:searchResult&&searchResult.results.map((result,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorSearchResultView,{searchResult:result},index))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"nav-bottom\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"nav-bottom-buttons position-absolute\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"nav-create-room\",onClick:event=>setCreatorOpen(value=>!value),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",bold:true,className:\"nav-bottom-buttons-text\",children:LocalizeText('navigator.createroom.create')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"nav-random-room\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",bold:true,className:\"nav-bottom-buttons-text\",children:LocalizeText('navigator.random.room')})})]})})]})]}),isCreatorOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomCreatorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorDoorStateView,{}),isRoomInfoOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomInfoView,{onCloseClick:()=>setRoomInfoOpen(false)}),isRoomLinkOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomLinkView,{onCloseClick:()=>setRoomLinkOpen(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorRoomSettingsView,{})]});};\n// CONCATENATED MODULE: ./src/components/nitropedia/NitropediaView.tsx\nconst NEW_LINE_REGEX=/\\n\\r|\\n|\\r/mg;const NitropediaView=props=>{const[content,setContent]=Object(react[\"useState\"])(null);const[header,setHeader]=Object(react[\"useState\"])('');const[dimensions,setDimensions]=Object(react[\"useState\"])(null);const elementRef=Object(react[\"useRef\"])(null);const openPage=Object(react[\"useCallback\"])(async link=>{try{const response=await fetch(link);if(!response)return;const text=await response.text();const splitData=text.split(NEW_LINE_REGEX);const line=splitData.shift().split('|');setHeader(line[0]);setDimensions(prevValue=>{if(line[1]&&line[1].split(';').length===2){return{width:parseInt(line[1].split(';')[0]),height:parseInt(line[1].split(';')[1])};}return null;});setContent(splitData.join(''));}catch(error){nitro_renderer[\"We\" /* NitroLogger */].error(`Failed to fetch ${link}`);}},[]);const onLinkReceived=Object(react[\"useCallback\"])(link=>{const value=link.split('/');if(value.length<2)return;value.shift();openPage(GetConfiguration('habbopages.url')+value.join('/'));},[openPage]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:onLinkReceived,eventUrlPrefix:'habbopages/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[onLinkReceived]);Object(react[\"useEffect\"])(()=>{const handle=event=>{if(!(event.target instanceof HTMLAnchorElement))return;event.preventDefault();const link=event.target.href;if(!link||!link.length)return;NotificationUtilities_NotificationUtilities.openUrl(link);};document.addEventListener('click',handle);return()=>{document.removeEventListener('click',handle);};},[]);if(!content)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitropedia\",theme:\"primary\",style:dimensions?{width:dimensions.width,height:dimensions.height}:{},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:header,onCloseClick:()=>setContent(null)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,innerRef:elementRef,className:\"text-black\",dangerouslySetInnerHTML:{__html:content}})})]});};\n// CONCATENATED MODULE: ./src/components/groups/views/GroupRoomInformationView.tsx\nconst GroupRoomInformationView=props=>{const[expectedGroupId,setExpectedGroupId]=Object(react[\"useState\"])(0);const[groupInformation,setGroupInformation]=Object(react[\"useState\"])(null);const[isOpen,setIsOpen]=Object(react[\"useState\"])(true);const onDesktopViewEvent=Object(react[\"useCallback\"])(event=>{setExpectedGroupId(0);setGroupInformation(null);},[]);UseMessageEventHook(nitro_renderer[\"tb\" /* DesktopViewEvent */],onDesktopViewEvent);const onRoomEntryInfoMessageEvent=Object(react[\"useCallback\"])(event=>{setExpectedGroupId(0);setGroupInformation(null);},[]);UseMessageEventHook(nitro_renderer[\"xg\" /* RoomEntryInfoMessageEvent */],onRoomEntryInfoMessageEvent);const onGetGuestRoomResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.roomEnter)return;if(parser.data.habboGroupId>0){setExpectedGroupId(parser.data.habboGroupId);SendMessageComposer(new nitro_renderer[\"Tc\" /* GroupInformationComposer */](parser.data.habboGroupId,false));}else{setExpectedGroupId(0);setGroupInformation(null);}},[]);UseMessageEventHook(nitro_renderer[\"nc\" /* GetGuestRoomResultEvent */],onGetGuestRoomResultEvent);const onHabboGroupDeactivatedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!groupInformation||parser.groupId!==groupInformation.id&&parser.groupId!==expectedGroupId)return;setExpectedGroupId(0);setGroupInformation(null);},[expectedGroupId,groupInformation]);UseMessageEventHook(nitro_renderer[\"Gd\" /* HabboGroupDeactivatedMessageEvent */],onHabboGroupDeactivatedMessageEvent);const onGroupInformationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.id!==expectedGroupId)return;setGroupInformation(parser);},[expectedGroupId]);UseMessageEventHook(nitro_renderer[\"Uc\" /* GroupInformationEvent */],onGroupInformationEvent);const leaveGroup=()=>{NotificationUtilities_NotificationUtilities.confirm(LocalizeText('group.leaveconfirm.desc'),()=>{SendMessageComposer(new nitro_renderer[\"cd\" /* GroupRemoveMemberComposer */](groupInformation.id,GetSessionDataManager().userId));},null);};const isRealOwner=groupInformation&&groupInformation.ownerName===GetSessionDataManager().userName;const getButtonText=()=>{if(isRealOwner)return'group.manage';if(groupInformation.type===GroupType_GroupType.PRIVATE)return'';if(groupInformation.membershipType===GroupMembershipType.MEMBER)return'group.leave';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType_GroupType.REGULAR)return'group.join';if(groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING)return'group.membershippending';if(groupInformation.membershipType===GroupMembershipType.NOT_MEMBER&&groupInformation.type===GroupType_GroupType.EXCLUSIVE)return'group.requestmembership';};const handleButtonClick=()=>{if(isRealOwner)return GetGroupManager(groupInformation.id);if(groupInformation.type===GroupType_GroupType.PRIVATE&&groupInformation.membershipType===GroupMembershipType.NOT_MEMBER)return;if(groupInformation.membershipType===GroupMembershipType.MEMBER){leaveGroup();return;}TryJoinGroup(groupInformation.id);};if(!groupInformation)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-notification-bubble\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"grouproom-header\",alignItems:\"center\",justifyContent:\"between\",pointer:true,onClick:event=>setIsOpen(value=>!value),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,className:\"header-text p-1\",variant:\"white\",children:LocalizeText('group.homeroominfo.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:isOpen?'arrow-down':'arrow-left'})]}),isOpen&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"px-2 pb-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,alignItems:\"center\",gap:2,onClick:event=>GetGroupInformation(groupInformation.id),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"group-badge\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:groupInformation.badge,isGroup:true})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,variant:\"white\",children:groupInformation.title})]}),(groupInformation.type!==GroupType_GroupType.PRIVATE||isRealOwner)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,className:\"btn-flash fw-bold\",disabled:groupInformation.membershipType===GroupMembershipType.REQUEST_PENDING,onClick:handleButtonClick,children:LocalizeText(getButtonText())})]})})]})});};\n// CONCATENATED MODULE: ./src/components/notification-center/NotificationCenterMessageHandler.tsx\nconst NotificationCenterMessageHandler=props=>{const onRespectReceivedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.userId!==GetSessionDataManager().userId)return;const text1=LocalizeText('notifications.text.respect.1');const text2=LocalizeText('notifications.text.respect.2',['count'],[parser.respectsReceived.toString()]);NotificationUtilities_NotificationUtilities.showSingleBubble(text1,NotificationBubbleType.RESPECT);NotificationUtilities_NotificationUtilities.showSingleBubble(text2,NotificationBubbleType.RESPECT);},[]);UseMessageEventHook(nitro_renderer[\"Wf\" /* RespectReceivedEvent */],onRespectReceivedEvent);const onHabboBroadcastMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.simpleAlert(parser.message.replace(/\\\\r/g,'\\r'),null,null,LocalizeText('notifications.broadcast.title'));},[]);UseMessageEventHook(nitro_renderer[\"Dd\" /* HabboBroadcastMessageEvent */],onHabboBroadcastMessageEvent);const onAchievementNotificationMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const text1=LocalizeText('achievements.levelup.desc');const badgeName=LocalizeBadgeName(parser.data.badgeCode);const badgeImage=GetSessionDataManager().getBadgeUrl(parser.data.badgeCode);const internalLink='questengine/achievements/'+parser.data.category;NotificationUtilities_NotificationUtilities.showSingleBubble(text1+' '+badgeName,NotificationBubbleType.ACHIEVEMENT,badgeImage,internalLink);},[]);UseMessageEventHook(nitro_renderer[\"c\" /* AchievementNotificationMessageEvent */],onAchievementNotificationMessageEvent);const onClubGiftNotificationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.showClubGiftNotification(parser.numGifts);},[]);UseMessageEventHook(nitro_renderer[\"hb\" /* ClubGiftNotificationEvent */],onClubGiftNotificationEvent);const onModeratorMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleModeratorMessage(parser.message,parser.url);},[]);UseMessageEventHook(nitro_renderer[\"xe\" /* ModeratorMessageEvent */],onModeratorMessageEvent);const onActivityPointNotificationMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.amountChanged<=0||parser.type!==5)return;const imageUrl=GetConfiguration('currency.asset.icon.url','').replace('%type%',parser.type.toString());NotificationUtilities_NotificationUtilities.showSingleBubble(LocalizeText('notifications.text.loyalty.received',['AMOUNT'],[parser.amountChanged.toString()]),NotificationBubbleType.INFO,imageUrl);},[]);UseMessageEventHook(nitro_renderer[\"f\" /* ActivityPointNotificationMessageEvent */],onActivityPointNotificationMessageEvent);const onUserBannedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleUserBannedMessage(parser.message);},[]);UseMessageEventHook(nitro_renderer[\"wi\" /* UserBannedMessageEvent */],onUserBannedMessageEvent);const onHotelClosesAndWillOpenAtEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleHotelClosedMessage(parser.openHour,parser.openMinute,parser.userThrowOutAtClose);},[]);UseMessageEventHook(nitro_renderer[\"Ld\" /* HotelClosesAndWillOpenAtEvent */],onHotelClosesAndWillOpenAtEvent);const onPetReceivedMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const text=LocalizeText('notifications.text.'+(parser.boughtAsGift?'petbought':'petreceived'));let imageUrl=null;const imageResult=GetRoomEngine().getRoomObjectPetImage(parser.pet.typeId,parser.pet.paletteId,parseInt(parser.pet.color,16),new nitro_renderer[\"Ui\" /* Vector3d */](45*3),64,null,true);if(imageResult)imageUrl=imageResult.getImage().src;NotificationUtilities_NotificationUtilities.showSingleBubble(text,NotificationBubbleType.PETLEVEL,imageUrl);},[]);UseMessageEventHook(nitro_renderer[\"rf\" /* PetReceivedMessageEvent */],onPetReceivedMessageEvent);const onRoomEnterEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.showModerationDisclaimer();},[]);UseMessageEventHook(nitro_renderer[\"wg\" /* RoomEnterEvent */],onRoomEnterEvent);const onMOTDNotificationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleMOTD(parser.messages);},[]);UseMessageEventHook(nitro_renderer[\"be\" /* MOTDNotificationEvent */],onMOTDNotificationEvent);const onPetLevelNotificationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();let imageUrl=null;const imageResult=GetRoomEngine().getRoomObjectPetImage(parser.figureData.typeId,parser.figureData.paletteId,parseInt(parser.figureData.color,16),new nitro_renderer[\"Ui\" /* Vector3d */](45*3),64,null,true);if(imageResult)imageUrl=imageResult.getImage().src;NotificationUtilities_NotificationUtilities.showSingleBubble(LocalizeText('notifications.text.petlevel',['pet_name','level'],[parser.petName,parser.level.toString()]),NotificationBubbleType.PETLEVEL,imageUrl);},[]);UseMessageEventHook(nitro_renderer[\"qf\" /* PetLevelNotificationEvent */],onPetLevelNotificationEvent);const onInfoFeedEnableMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.BUBBLES_DISABLED=!parser.enabled;},[]);UseMessageEventHook(nitro_renderer[\"Nd\" /* InfoFeedEnableMessageEvent */],onInfoFeedEnableMessageEvent);const onClubGiftSelectedEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.products||!parser.products.length)return;const productData=parser.products[0];if(!productData)return;NotificationUtilities_NotificationUtilities.showSingleBubble(LocalizeText('notifications.text.club_gift.selected'),NotificationBubbleType.INFO,ProductImageUtility_ProductImageUtility.getProductImageUrl(productData.productType,productData.furniClassId,productData.extraParam));},[]);UseMessageEventHook(nitro_renderer[\"ib\" /* ClubGiftSelectedEvent */],onClubGiftSelectedEvent);const onMaintenanceStatusMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleHotelMaintenanceMessage(parser.minutesUntilMaintenance,parser.duration);},[]);UseMessageEventHook(nitro_renderer[\"ce\" /* MaintenanceStatusMessageEvent */],onMaintenanceStatusMessageEvent);const onModeratorCautionEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleModeratorCaution(parser.message,parser.url);},[]);UseMessageEventHook(nitro_renderer[\"ve\" /* ModeratorCautionEvent */],onModeratorCautionEvent);const onNotificationDialogMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.showNotification(parser.type,parser.parameters);},[]);UseMessageEventHook(nitro_renderer[\"ff\" /* NotificationDialogMessageEvent */],onNotificationDialogMessageEvent);const onHotelWillCloseInMinutesEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleHotelClosingMessage(parser.openMinute);},[]);UseMessageEventHook(nitro_renderer[\"Md\" /* HotelWillCloseInMinutesEvent */],onHotelWillCloseInMinutesEvent);const onHotelClosedAndOpensEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.handleLoginFailedHotelClosedMessage(parser.openHour,parser.openMinute);},[]);UseMessageEventHook(nitro_renderer[\"Kd\" /* HotelClosedAndOpensEvent */],onHotelClosedAndOpensEvent);return null;};\n// CONCATENATED MODULE: ./src/components/notification-center/views/alert-layouts/NitroSystemAlertView.tsx\nconst NitroSystemAlertView=props=>{const{title='Nitro',close=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutNotificationAlertView,{title:title,close:close,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:5,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"object\",{data:\"https://assets.nitrodev.co/logos/nitro-n-dark.svg\",width:\"100\",height:\"100\",children:\"\\xA0\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:4,children:\"Nitro React\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[\"v\",GetUIVersion()]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Renderer:\"}),\" v\",GetRendererVersion()]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>window.open('https://discord.nitrodev.co'),children:\"Discord\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>window.open('https://git.krews.org/nitro/nitro-react'),children:\"Git\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>window.open('https://git.krews.org/nitro/nitro-react/-/issues'),children:\"Bug Report\"})]})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,size:5,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"flashui-logo\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,fontSize:4,children:\"Flash UI-edit\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:\"is created by Robbis\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>window.open('https://discord.gg/j3bqtZKAF3'),children:\"Flash-UI Discord\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>window.open('https://git.krews.org/robbis1111/nitro-react-flashUI'),children:\"Git\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>window.open('https://git.krews.org/robbis1111/nitro-react-flashUI/-/issues'),children:\"Bug Report\"})]})]})]})]})});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/alert-layouts/NotificationDefaultAlertView.tsx\nconst NotificationDefaultAlertView=props=>{const{item=null,title=props.item&&props.item.title||'',close=null,...rest}=props;const[imageFailed,setImageFailed]=Object(react[\"useState\"])(false);const visitUrl=Object(react[\"useCallback\"])(()=>{NotificationUtilities_NotificationUtilities.openUrl(item.clickUrl);close();},[item,close]);const hasFrank=item.alertType===NotificationAlertType.DEFAULT;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutNotificationAlertView,{title:title,close:close,...rest,type:hasFrank?NotificationAlertType.DEFAULT:item.alertType,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullHeight:true,overflow:\"auto\",gap:hasFrank||item.imageUrl&&!imageFailed?2:0,children:[item.imageUrl&&!imageFailed&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:item.imageUrl,alt:item.title,onError:()=>{setImageFailed(true);},className:\"align-self-baseline\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{classNames:['notification-text overflow-y-auto d-flex flex-column w-100',item.clickUrl&&!hasFrank?'justify-content-center':''],children:[item.messages.length>0&&item.messages.map((message,index)=>{const htmlText=message.replace(/\\r\\n|\\r|\\n/g,'<br />');return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{dangerouslySetInnerHTML:{__html:htmlText}},index);}),item.clickUrl&&item.clickUrl.length>0&&item.imageUrl&&!imageFailed&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"my-2 w-100\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:visitUrl,className:\"align-self-center px-3\",children:LocalizeText(item.clickUrlText)})]})]})]}),(!item.imageUrl||item.imageUrl&&imageFailed)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",center:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"my-2 w-100\"}),!item.clickUrl&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:close,children:LocalizeText('generic.close')}),item.clickUrl&&item.clickUrl.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:visitUrl,children:LocalizeText(item.clickUrlText)})]})})]});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/alert-layouts/NotificationSearchAlertView.tsx\nconst NotificationSeachAlertView=props=>{const{item=null,title=props.item&&props.item.title||'',close=null,...rest}=props;const[searchValue,setSearchValue]=Object(react[\"useState\"])('');const[results,setResults]=Object(react[\"useState\"])([]);const visitUrl=Object(react[\"useCallback\"])(()=>{NotificationUtilities_NotificationUtilities.openUrl(item.clickUrl);close();},[item,close]);Object(react[\"useEffect\"])(()=>{setResults(JSON.parse(item.messages[0]));},[item]);const updateSearchValue=Object(react[\"useCallback\"])(value=>{let res=JSON.parse(item.messages[0]);setResults(res.filter(val=>val.includes(value)));setSearchValue(value);},[item]);const isAction=item.clickUrl&&item.clickUrl.startsWith('event:');return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutNotificationAlertView,{title:title,close:close,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:true,alignItems:\"center\",position:\"relative\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>updateSearchValue(event.target.value)})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullHeight:true,className:\"py-1\",overflow:\"hidden\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{gap:1,columnCount:1,children:results&&results.map((n,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:n},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"my-2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",center:true,gap:1,children:[!isAction&&!item.clickUrl&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:close,children:LocalizeText('generic.close')}),item.clickUrl&&item.clickUrl.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:visitUrl,children:LocalizeText(item.clickUrlText)})]})]});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/alert-layouts/GetAlertLayout.tsx\nconst GetAlertLayout=(item,close)=>{if(!item)return null;const props={key:item.id,item,close};switch(item.alertType){case NotificationAlertType.NITRO:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroSystemAlertView,{...props});case NotificationAlertType.SEARCH:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationSeachAlertView,{...props});default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationDefaultAlertView,{...props});}};\n// CONCATENATED MODULE: ./src/components/notification-center/views/bubble-layouts/NotificationClubGiftBubbleView.tsx\nconst NotificationClubGiftBubbleView=props=>{const{item=null,close=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutNotificationBubbleView,{fadesOut:false,className:\"flex-column nitro-notification club-gift\",close:close,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex gap-1 mb-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:\"hc\",className:\"flex-shrink-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"ms-1\",children:LocalizeText('notifications.text.club_gift')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex align-items-center justify-content-end gap-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"text-decoration-underline cursor-pointer text-nowrap notification-text-link\",onClick:close,children:LocalizeText('notifications.button.later')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:()=>NotificationUtilities_NotificationUtilities.openUrl(item.linkUrl),children:LocalizeText('notifications.button.show_gift_list')})]})]});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/bubble-layouts/NotificationDefaultBubbleView.tsx\nconst NotificationDefaultBubbleView=props=>{const{item=null,close=null,...rest}=props;const htmlText=item.message.replace(/\\r\\n|\\r|\\n/g,'<br />');return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutNotificationBubbleView,{close:close,gap:2,alignItems:\"center\",onClick:event=>item.linkUrl&&item.linkUrl.length&&NotificationUtilities_NotificationUtilities.openUrl(item.linkUrl),...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"bubble-image-container\",children:item.iconUrl&&item.iconUrl.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"no-select\",src:item.iconUrl,alt:\"\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,className:\"notification-bubble-text\",variant:\"white\",dangerouslySetInnerHTML:{__html:htmlText}})]});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/bubble-layouts/GetBubbleLayout.tsx\nconst GetBubbleLayout=(item,close)=>{if(!item)return null;const props={key:item.id,item,close};switch(item.notificationType){case NotificationBubbleType.CLUBGIFT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationClubGiftBubbleView,{...props});default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationDefaultBubbleView,{...props});}};\n// CONCATENATED MODULE: ./src/components/notification-center/views/confirm-layouts/NotificationDefaultConfirmView.tsx\nconst NotificationDefaultConfirmView=props=>{const{item=null,close=null,...rest}=props;const{message=null,onConfirm=null,onCancel=null,confirmText=null,cancelText=null,title=null}=item;const confirm=()=>{if(onConfirm)onConfirm();close();};const cancel=()=>{if(onCancel)onCancel();close();};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutNotificationAlertView,{title:title,close:close,...rest,type:NotificationAlertType.ALERT,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{grow:true,center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:message})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",onClick:cancel,children:cancelText}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:confirm,children:confirmText})]})]});};\n// CONCATENATED MODULE: ./src/components/notification-center/views/confirm-layouts/GetConfirmLayout.tsx\nconst GetConfirmLayout=(item,close)=>{if(!item)return null;const props={key:item.id,item,close};switch(item.confirmType){default:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationDefaultConfirmView,{...props});}};\n// CONCATENATED MODULE: ./src/components/notification-center/NotificationCenterView.tsx\nconst NotificationCenterView=props=>{const[alerts,setAlerts]=Object(react[\"useState\"])([]);const[bubbleAlerts,setBubbleAlerts]=Object(react[\"useState\"])([]);const[confirms,setConfirms]=Object(react[\"useState\"])([]);const onNotificationAlertEvent=Object(react[\"useCallback\"])(event=>{const alertItem=new NotificationAlertItem_NotificationAlertItem(event.messages,event.alertType,event.clickUrl,event.clickUrlText,event.title,event.imageUrl);setAlerts(prevValue=>[alertItem,...prevValue]);},[]);UseUiEvent(NotificationAlertEvent_NotificationAlertEvent.ALERT,onNotificationAlertEvent);const onNotificationBubbleEvent=Object(react[\"useCallback\"])(event=>{const notificationItem=new NotificationBubbleItem_NotificationBubbleItem(event.message,event.notificationType,event.imageUrl,event.linkUrl);setBubbleAlerts(prevValue=>[notificationItem,...prevValue]);},[]);UseUiEvent(NotificationBubbleEvent_NotificationBubbleEvent.NEW_BUBBLE,onNotificationBubbleEvent);const onNotificationConfirmEvent=Object(react[\"useCallback\"])(event=>{const confirmItem=new NotificationConfirmItem(event.type,event.message,event.onConfirm,event.onCancel,event.confirmText,event.cancelText,event.title);setConfirms(prevValue=>[confirmItem,...prevValue]);},[]);UseUiEvent(NotificationConfirmEvent_NotificationConfirmEvent.CONFIRM,onNotificationConfirmEvent);const closeAlert=Object(react[\"useCallback\"])(alert=>{setAlerts(prevValue=>{const newAlerts=[...prevValue];const index=newAlerts.findIndex(value=>alert===value);if(index>=0)newAlerts.splice(index,1);return newAlerts;});},[]);const closeBubbleAlert=Object(react[\"useCallback\"])(item=>{setBubbleAlerts(prevValue=>{const newAlerts=[...prevValue];const index=newAlerts.findIndex(value=>item===value);if(index>=0)newAlerts.splice(index,1);return newAlerts;});},[]);const closeConfirm=Object(react[\"useCallback\"])(item=>{setConfirms(prevValue=>{const newConfirms=[...prevValue];const index=newConfirms.findIndex(value=>item===value);if(index>=0)newConfirms.splice(index,1);return newConfirms;});},[]);const getAlerts=Object(react[\"useMemo\"])(()=>{if(!alerts||!alerts.length)return null;const elements=[];for(const alert of alerts){const element=GetAlertLayout(alert,()=>closeAlert(alert));elements.push(element);}return elements;},[alerts,closeAlert]);const getBubbleAlerts=Object(react[\"useMemo\"])(()=>{if(!bubbleAlerts||!bubbleAlerts.length)return null;const elements=[];for(const alert of bubbleAlerts){const element=GetBubbleLayout(alert,()=>closeBubbleAlert(alert));if(alert.notificationType===NotificationBubbleType.CLUBGIFT){elements.unshift(element);continue;}elements.push(element);}return elements;},[bubbleAlerts,closeBubbleAlert]);const getConfirms=Object(react[\"useMemo\"])(()=>{if(!confirms||!confirms.length)return null;const elements=[];for(const confirm of confirms){const element=GetConfirmLayout(confirm,()=>closeConfirm(confirm));elements.push(element);}return elements;},[confirms,closeConfirm]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationCenterMessageHandler,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:getBubbleAlerts}),getConfirms,getAlerts]});};\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Tooltip.js\nvar Tooltip = __webpack_require__(143);\n\n// CONCATENATED MODULE: ./src/components/purse/views/CurrencyView.tsx\nconst CurrencyView=props=>{const{type=-1,amount=-1,short=false}=props;const element=Object(react[\"useMemo\"])(()=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"end\",pointer:true,gap:1,className:\"nitro-purse-button rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,truncate:true,textEnd:true,variant:\"white\",grow:true,children:short?LocalizeShortNumber(amount):LocalizeFormattedNumber(amount)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:type})]});},[amount,short,type]);if(!short)return element;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(OverlayTrigger[\"a\" /* default */],{placement:\"left\",overlay:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tooltip[\"a\" /* default */],{id:`tooltip-${type}`,children:LocalizeFormattedNumber(amount)}),children:element});};\n// CONCATENATED MODULE: ./src/components/purse/views/SeasonalView.tsx\nconst SeasonalView=props=>{const{type=-1,amount=-1}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:true,justifyContent:\"between\",className:'nitro-purse-seasonal-currency nitro-notification '+GetConfiguration('currency.seasonal.color'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,truncate:true,fullWidth:true,className:\"seasonal-padding seasonal-bold\",children:LocalizeText(`purse.seasonal.currency.${type}`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,truncate:true,variant:\"white\",className:\"seasonal-amount text-end\",children:LocalizeFormattedNumber(amount)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"nitro-seasonal-box seasonal-padding\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:type})})]})});};\n// CONCATENATED MODULE: ./src/components/purse/PurseView.tsx\nconst PurseView=props=>{const{purse=null,hcDisabled=false}=usePurse();const displayedCurrencies=Object(react[\"useMemo\"])(()=>GetConfiguration('system.currency.types',[]),[]);const currencyDisplayNumberShort=Object(react[\"useMemo\"])(()=>GetConfiguration('currency.display.number.short',false),[]);const getClubText=Object(react[\"useMemo\"])(()=>{if(!purse)return null;const totalDays=purse.clubPeriods*31+purse.clubDays;const minutesUntilExpiration=purse.minutesUntilExpiration;if(purse.clubLevel===nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].NO_CLUB)return LocalizeText('purse.clubdays.zero.amount.text');else if(minutesUntilExpiration>-1&&minutesUntilExpiration<60*24)return nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat(minutesUntilExpiration*60);else return nitro_renderer[\"Kb\" /* FriendlyTime */].shortFormat(totalDays*86400);},[purse]);const getCurrencyElements=Object(react[\"useCallback\"])(function(offset){let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;let seasonal=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!purse||!purse.activityPoints||!purse.activityPoints.size)return null;const types=Array.from(purse.activityPoints.keys()).filter(type=>displayedCurrencies.indexOf(type)>=0);let count=0;while(count<offset){types.shift();count++;}count=0;const elements=[];for(const type of types){if(limit>-1&&count===limit)break;if(seasonal)elements.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SeasonalView,{type:type,amount:purse.activityPoints.get(type)},type));else elements.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CurrencyView,{type:type,amount:purse.activityPoints.get(type),short:currencyDisplayNumberShort},type));count++;}return elements;},[purse,displayedCurrencies,currencyDisplayNumberShort]);if(!purse)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"nitro-purse-container\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"nitro-purse nitro-notification p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullWidth:true,gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"center\",size:hcDisabled?8:4,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CurrencyView,{type:-1,amount:purse.credits,short:currencyDisplayNumberShort}),getCurrencyElements(0,2)]}),!hcDisabled&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,pointer:true,size:4,gap:1,className:\"nitro-purse-subscription\",onClick:event=>CreateLinkEvent('habboUI/open/hccenter'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{className:\"club-text\",type:\"hc\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,className:\"club-text\",children:getClubText})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"center\",size:2,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"nitro-purse-right-button help p-1\",onClick:event=>CreateLinkEvent('help/show'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('help.button.cfh')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"nitro-purse-right-button disconnect p-1\",onClick:event=>CreateLinkEvent('disconnect'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-purse-disconnect\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"nitro-purse-right-button settings p-1\",onClick:event=>CreateLinkEvent('user-settings/toggle'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-purse-settings\"})})]})]})}),getCurrencyElements(2,-1,true)]});};\n// CONCATENATED MODULE: ./src/components/right-side/RightSideView.tsx\nconst RightSideView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"nitro-right-side\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{position:\"relative\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PurseView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupRoomInformationView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NotificationCenterView,{})]})});};\n// CONCATENATED MODULE: ./src/components/room/RoomContext.tsx\nconst RoomContext=/*#__PURE__*/Object(react[\"createContext\"])({roomSession:null,eventDispatcher:null,widgetHandler:null});const RoomContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomContext.Provider,{value:props.value,children:props.children});};const useRoomContext=()=>Object(react[\"useContext\"])(RoomContext);\n// CONCATENATED MODULE: ./src/components/room/RoomColorView.tsx\nconst RoomColorView=props=>{const[roomBackground,setRoomBackground]=Object(react[\"useState\"])(null);const[roomFilter,setRoomFilter]=Object(react[\"useState\"])(null);const[originalRoomBackgroundColor,setOriginalRoomBackgroundColor]=Object(react[\"useState\"])(0);const{roomSession=null,widgetHandler=null,eventDispatcher=null}=useRoomContext();const updateRoomBackgroundColor=Object(react[\"useCallback\"])(function(hue,saturation,lightness){let original=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!roomBackground)return;const newColor=nitro_renderer[\"jb\" /* ColorConverter */].hslToRGB(((hue&0xFF)<<16)+((saturation&0xFF)<<8)+(lightness&0xFF));if(original)setOriginalRoomBackgroundColor(newColor);if(!hue&&!saturation&&!lightness){roomBackground.tint=0;}else{roomBackground.tint=newColor;}},[roomBackground]);const updateRoomFilter=Object(react[\"useCallback\"])(color=>{if(!roomFilter)return;const r=color>>16&0xFF;const g=color>>8&0xFF;const b=color&0xFF;roomFilter.red=r/255;roomFilter.green=g/255;roomFilter.blue=b/255;},[roomFilter]);const onRoomEngineEvent=Object(react[\"useCallback\"])(event=>{if(nitro_renderer[\"Bg\" /* RoomId */].isRoomPreviewerId(event.roomId))return;switch(event.type){case nitro_renderer[\"Jg\" /* RoomObjectHSLColorEnabledEvent */].ROOM_BACKGROUND_COLOR:{const hslColorEvent=event;if(hslColorEvent.enable)updateRoomBackgroundColor(hslColorEvent.hue,hslColorEvent.saturation,hslColorEvent.lightness,true);else updateRoomBackgroundColor(0,0,0,true);return;}case nitro_renderer[\"Xf\" /* RoomBackgroundColorEvent */].ROOM_COLOR:{const colorEvent=event;let color=0x000000;let brightness=0xFF;if(!colorEvent.bgOnly){color=colorEvent.color;brightness=colorEvent.brightness;}updateRoomFilter(nitro_renderer[\"jb\" /* ColorConverter */].hslToRGB((nitro_renderer[\"jb\" /* ColorConverter */].rgbToHSL(color)&0xFFFF00)+brightness));return;}case nitro_renderer[\"ng\" /* RoomEngineDimmerStateEvent */].ROOM_COLOR:{widgetHandler.processEvent(event);}}},[widgetHandler,updateRoomBackgroundColor,updateRoomFilter]);UseRoomEngineEvent(nitro_renderer[\"Jg\" /* RoomObjectHSLColorEnabledEvent */].ROOM_BACKGROUND_COLOR,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"Xf\" /* RoomBackgroundColorEvent */].ROOM_COLOR,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"ng\" /* RoomEngineDimmerStateEvent */].ROOM_COLOR,onRoomEngineEvent);const onRoomWidgetUpdateBackgroundColorPreviewEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.PREVIEW:{updateRoomBackgroundColor(event.hue,event.saturation,event.lightness);return;}case RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.CLEAR_PREVIEW:{if(!roomBackground)return;roomBackground.tint=originalRoomBackgroundColor;return;}}},[roomBackground,originalRoomBackgroundColor,updateRoomBackgroundColor]);UseEventDispatcherHook(RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.PREVIEW,eventDispatcher,onRoomWidgetUpdateBackgroundColorPreviewEvent);UseEventDispatcherHook(RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.CLEAR_PREVIEW,eventDispatcher,onRoomWidgetUpdateBackgroundColorPreviewEvent);Object(react[\"useEffect\"])(()=>{if(!roomSession)return;const canvas=GetRoomEngine().getRoomInstanceRenderingCanvas(roomSession.roomId,1);if(!canvas)return;const background=new nitro_renderer[\"af\" /* NitroSprite */](nitro_renderer[\"bf\" /* NitroTexture */].WHITE);const filter=new nitro_renderer[\"Pe\" /* NitroAdjustmentFilter */]();const master=canvas.master;background.tint=0;background.width=GetNitroInstance().width;background.height=GetNitroInstance().height;master.addChildAt(background,0);master.filters=[filter];setRoomBackground(background);setRoomFilter(filter);const resize=event=>{background.width=GetNitroInstance().width;background.height=GetNitroInstance().height;};window.addEventListener('resize',resize);return()=>{setRoomBackground(prevValue=>{if(prevValue)prevValue.destroy();return null;});setRoomFilter(prevValue=>{if(prevValue)prevValue.destroy();return null;});setOriginalRoomBackgroundColor(0);window.removeEventListener('resize',resize);};},[roomSession]);return null;};\n// CONCATENATED MODULE: ./src/components/room/spectator/RoomSpectatorView.tsx\nconst RoomSpectatorView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"room-spectator\"});};\n// CONCATENATED MODULE: ./src/components/room/widgets/context-menu/ContextMenuHeaderView.tsx\nconst ContextMenuHeaderView=props=>{const{justifyContent='center',alignItems='center',classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['menu-header','pb-1'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:justifyContent,alignItems:alignItems,classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/common/BotSkillsEnum.ts\nclass BotSkillsEnum{}BotSkillsEnum.GENERIC_SKILL=0;BotSkillsEnum.DRESS_UP=1;BotSkillsEnum.SETUP_CHAT=2;BotSkillsEnum.RANDOM_WALK=3;BotSkillsEnum.DANCE=4;BotSkillsEnum.CHANGE_BOT_NAME=5;BotSkillsEnum.SERVE_BEVERAGE=6;BotSkillsEnum.INCLIENT_LINK=7;BotSkillsEnum.NUX_PROCEED=8;BotSkillsEnum.CHANGE_BOT_MOTTO=9;BotSkillsEnum.NUX_TAKE_TOUR=10;BotSkillsEnum.NO_PICK_UP=12;BotSkillsEnum.NAVIGATOR_SEARCH=14;BotSkillsEnum.DONATE_TO_USER=24;BotSkillsEnum.DONATE_TO_ALL=25;\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoRentableBotChatView.tsx\nconst AvatarInfoRentableBotChatView=props=>{const{chatEvent=null,close=null}=props;// eslint-disable-next-line no-template-curly-in-string\nconst[newText,setNewText]=Object(react[\"useState\"])(chatEvent.chat==='${bot.skill.chatter.configuration.text.placeholder}'?'':chatEvent.chat);const[automaticChat,setAutomaticChat]=Object(react[\"useState\"])(chatEvent.automaticChat);const[mixSentences,setMixSentences]=Object(react[\"useState\"])(chatEvent.mixSentences);const[chatDelay,setChatDelay]=Object(react[\"useState\"])(chatEvent.chatDelay);const getObjectLocation=Object(react[\"useMemo\"])(()=>GetRoomObjectBounds(GetRoomSession().roomId,chatEvent.objectId,chatEvent.category,1),[chatEvent]);const formatChatString=value=>value.replace(/;#;/g,' ').replace(/\\r\\n|\\r|\\n/g,'\\r');const save=()=>{const chatConfiguration=formatChatString(newText)+';#;'+automaticChat+';#;'+chatDelay+';#;'+mixSentences;SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](chatEvent.botId,BotSkillsEnum.SETUP_CHAT,chatConfiguration));close();};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{windowPosition:DraggableWindowPosition.NOTHING,handleSelector:\".drag-handler\",dragStyle:{top:getObjectLocation.y,left:getObjectLocation.x},children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{className:\"nitro-context-menu bot-chat\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{className:\"drag-handler\",children:LocalizeText('bot.skill.chatter.configuration.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:LocalizeText('bot.skill.chatter.configuration.chat.text')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"form-control form-control-sm\",placeholder:LocalizeText('bot.skill.chatter.configuration.text.placeholder'),value:newText,rows:7,onChange:e=>setNewText(e.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,variant:\"white\",children:LocalizeText('bot.skill.chatter.configuration.automatic.chat')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:automaticChat,onChange:event=>setAutomaticChat(event.target.checked)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,variant:\"white\",children:LocalizeText('bot.skill.chatter.configuration.markov')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"checkbox\",className:\"form-check-input\",checked:mixSentences,onChange:event=>setMixSentences(event.target.checked)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,variant:\"white\",children:LocalizeText('bot.skill.chatter.configuration.chat.delay')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:chatDelay,onChange:event=>setChatDelay(event.target.valueAsNumber)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"primary\",onClick:close,children:LocalizeText('cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:save,children:LocalizeText('save')})]})]})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoUseProductConfirmView.tsx\nconst _Str_5091=-1;const _Str_11906=0;const _Str_11214=1;const _Str_11733=2;const _Str_11369=3;const _Str_8759=4;const _Str_8432=5;const _Str_9653=6;const AvatarInfoUseProductConfirmView=props=>{const{item=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(_Str_5091);const[petData,setPetData]=Object(react[\"useState\"])(null);const[furniData,setFurniData]=Object(react[\"useState\"])(null);const{roomSession=null,widgetHandler=null}=useRoomContext();const selectRoomObject=Object(react[\"useCallback\"])(()=>{if(!petData)return;GetRoomEngine().selectRoomObject(roomSession.roomId,petData.roomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);},[roomSession,petData]);const useProduct=Object(react[\"useCallback\"])(()=>{widgetHandler.processWidgetMessage(new RoomWidgetUseProductMessage_RoomWidgetUseProductMessage(RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.PET_PRODUCT,item.requestRoomObjectId,petData.webID));close();},[widgetHandler,item,petData,close]);const getPetImage=Object(react[\"useMemo\"])(()=>{if(!petData||!furniData)return null;const petFigureData=new nitro_renderer[\"of\" /* PetFigureData */](petData.figure);const customParts=furniData.customParams.split(' ');const petIndex=parseInt(customParts[0]);switch(furniData.specialType){case FurniCategory.PET_SHAMPOO:{if(customParts.length<2)return null;const currentPalette=GetRoomEngine().getPetColorResult(petIndex,petFigureData.paletteId);const possiblePalettes=GetRoomEngine().getPetColorResultsForTag(petIndex,customParts[1]);let paletteId=-1;for(const result of possiblePalettes){if(result.breed===currentPalette.breed){paletteId=parseInt(result.id);break;}}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petFigureData.typeId,paletteId:paletteId,petColor:petFigureData.color,customParts:petFigureData.customParts,direction:2});}case FurniCategory.PET_CUSTOM_PART:{if(customParts.length<4)return null;const newCustomParts=[];const _local_6=customParts[1].split(',').map(piece=>parseInt(piece));const _local_7=customParts[2].split(',').map(piece=>parseInt(piece));const _local_8=customParts[3].split(',').map(piece=>parseInt(piece));let _local_10=0;while(_local_10<_local_6.length){const _local_13=_local_6[_local_10];const _local_15=petFigureData.getCustomPart(_local_13);let _local_12=_local_8[_local_10];if(_local_15!=null)_local_12=_local_15.paletteId;newCustomParts.push(new nitro_renderer[\"nf\" /* PetCustomPart */](_local_13,_local_7[_local_10],_local_12));_local_10++;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petFigureData.typeId,paletteId:petFigureData.paletteId,petColor:petFigureData.color,customParts:newCustomParts,direction:2});}case FurniCategory.PET_CUSTOM_PART_SHAMPOO:{if(customParts.length<3)return null;const newCustomParts=[];const _local_6=customParts[1].split(',').map(piece=>parseInt(piece));const _local_8=customParts[2].split(',').map(piece=>parseInt(piece));let _local_10=0;while(_local_10<_local_6.length){const _local_13=_local_6[_local_10];const _local_15=petFigureData.getCustomPart(_local_13);let _local_14=-1;if(_local_15!=null)_local_14=_local_15.partId;newCustomParts.push(new nitro_renderer[\"nf\" /* PetCustomPart */](_local_6[_local_10],_local_14,_local_8[_local_10]));_local_10++;}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petFigureData.typeId,paletteId:petFigureData.paletteId,petColor:petFigureData.color,customParts:newCustomParts,direction:2});}case FurniCategory.PET_SADDLE:{if(customParts.length<4)return null;const newCustomParts=[];const _local_6=customParts[1].split(',').map(piece=>parseInt(piece));const _local_7=customParts[2].split(',').map(piece=>parseInt(piece));const _local_8=customParts[3].split(',').map(piece=>parseInt(piece));let _local_10=0;while(_local_10<_local_6.length){newCustomParts.push(new nitro_renderer[\"nf\" /* PetCustomPart */](_local_6[_local_10],_local_7[_local_10],_local_8[_local_10]));_local_10++;}for(const _local_21 of petFigureData.customParts){if(_local_6.indexOf(_local_21.layerId)===-1){newCustomParts.push(_local_21);}}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petFigureData.typeId,paletteId:petFigureData.paletteId,petColor:petFigureData.color,customParts:newCustomParts,direction:2});}case FurniCategory.MONSTERPLANT_REBREED:case FurniCategory.MONSTERPLANT_REVIVAL:case FurniCategory.MONSTERPLANT_FERTILIZE:{let posture='rip';const roomObject=GetRoomEngine().getRoomObject(roomSession.roomId,petData.roomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);if(roomObject){posture=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_POSTURE);if(posture==='rip'){const level=petData.petLevel;if(level<7)posture=`grw${level}`;else posture='std';}}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{typeId:petFigureData.typeId,paletteId:petFigureData.paletteId,petColor:petFigureData.color,customParts:petFigureData.customParts,posture:posture,direction:2});}}},[petData,furniData,roomSession]);Object(react[\"useEffect\"])(()=>{const userData=roomSession.userDataManager.getUserDataByIndex(item.id);setPetData(userData);const furniData=GetFurnitureDataForRoomObject(roomSession.roomId,item.requestRoomObjectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(!furniData)return;setFurniData(furniData);let mode=_Str_5091;switch(furniData.specialType){case FurniCategory.PET_SHAMPOO:mode=_Str_11906;break;case FurniCategory.PET_CUSTOM_PART:mode=_Str_11214;break;case FurniCategory.PET_CUSTOM_PART_SHAMPOO:mode=_Str_11733;break;case FurniCategory.PET_SADDLE:mode=_Str_11369;break;case FurniCategory.MONSTERPLANT_REVIVAL:mode=_Str_8759;break;case FurniCategory.MONSTERPLANT_REBREED:mode=_Str_8432;break;case FurniCategory.MONSTERPLANT_FERTILIZE:mode=_Str_9653;break;}setMode(mode);},[roomSession,item]);if(!petData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-use-product-confirmation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('useproduct.widget.title',['name'],[petData.name]),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"product-preview\",onClick:selectRoomObject,children:getPetImage})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:2,children:[mode===_Str_11906&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.shampoo',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.shampoo')})]}),mode===_Str_11214&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.custompart',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.custompart')})]}),mode===_Str_11733&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.custompartshampoo',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.custompartshampoo')})]}),mode===_Str_11369&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.saddle',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.saddle')})]}),mode===_Str_8759&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.revive_monsterplant',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.revive_monsterplant')})]}),mode===_Str_8432&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.rebreed_monsterplant',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.rebreed_monsterplant')})]}),mode===_Str_9653&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.fertilize_monsterplant',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.fertilize_monsterplant')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:close,children:LocalizeText('useproduct.widget.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:useProduct,children:LocalizeText('useproduct.widget.use')})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/context-menu/ContextMenuListItemView.tsx\nconst ContextMenuListItemView=props=>{const{disabled=false,fullWidth=true,justifyContent='center',alignItems='center',classNames=[],onClick=null,...rest}=props;const handleClick=event=>{if(disabled)return;if(onClick)onClick(event);};const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['menu-item','list-item'];if(disabled)newClassNames.push('disabled');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[disabled,classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fullWidth:fullWidth,justifyContent:justifyContent,alignItems:alignItems,classNames:getClassNames,onClick:handleClick,...rest});};\n// CONCATENATED MODULE: ./src/components/room/widgets/context-menu/ContextMenuCaretView.tsx\nconst ContextMenuCaretView=props=>{const{justifyContent='center',alignItems='center',classNames=[],collapsed=true,...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['menu-bottom'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:justifyContent,alignItems:alignItems,classNames:getClassNames,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:!collapsed?'icon icon-context-menu-arrow-down':'icon icon-context-menu-arrow-up'})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/context-menu/ContextMenuView.tsx\nconst LOCATION_STACK_SIZE=25;const BUBBLE_DROP_SPEED=3;const fadeDelay=3000;const fadeLength=75;const SPACE_AROUND_EDGES=10;let COLLAPSED=false;const ContextMenuView=props=>{const{objectId=-1,category=-1,userType=-1,fades=false,close=null,position='absolute',classNames=[],style={},children=null,collapsable=false,...rest}=props;const[pos,setPos]=Object(react[\"useState\"])({x:null,y:null});const[deltaYStack,setDeltaYStack]=Object(react[\"useState\"])(null);const[currentDeltaY,setCurrentDeltaY]=Object(react[\"useState\"])(-1000000);const[opacity,setOpacity]=Object(react[\"useState\"])(1);const[isFading,setIsFading]=Object(react[\"useState\"])(false);const[fadeTime,setFadeTime]=Object(react[\"useState\"])(0);const[isFrozen,setIsFrozen]=Object(react[\"useState\"])(false);const elementRef=Object(react[\"useRef\"])();const[collapsed,setCollapsed]=Object(react[\"useState\"])(COLLAPSED);const getOffset=Object(react[\"useCallback\"])(bounds=>{let height=-elementRef.current.offsetHeight;if(userType>-1&&(userType===nitro_renderer[\"Mg\" /* RoomObjectType */].USER||userType===nitro_renderer[\"Mg\" /* RoomObjectType */].BOT||userType===nitro_renderer[\"Mg\" /* RoomObjectType */].RENTABLE_BOT)){height=height+(bounds.height>50?15:0);}else{height=height-14;}return height;},[userType]);const updateFade=Object(react[\"useCallback\"])(time=>{let newFadeTime=time;let newOpacity=1;if(isFading){setFadeTime(prevValue=>{newFadeTime+=prevValue;return newFadeTime;});newOpacity=(1-newFadeTime/fadeLength)*1;if(newOpacity<=0){close();return false;}setOpacity(newOpacity);}return true;},[isFading,close]);const updatePosition=Object(react[\"useCallback\"])((bounds,location)=>{if(!bounds||!location||!deltaYStack)return;const offset=getOffset(bounds);deltaYStack.addValue(location.y-bounds.top);let maxStack=deltaYStack.getMax();if(maxStack<currentDeltaY-BUBBLE_DROP_SPEED)maxStack=currentDeltaY-BUBBLE_DROP_SPEED;const deltaY=location.y-maxStack;let x=~~(location.x-elementRef.current.offsetWidth/2);let y=~~(deltaY+offset);const maxLeft=GetNitroInstance().width-elementRef.current.offsetWidth-SPACE_AROUND_EDGES;const maxTop=GetNitroInstance().height-elementRef.current.offsetHeight-SPACE_AROUND_EDGES;if(x<SPACE_AROUND_EDGES)x=SPACE_AROUND_EDGES;else if(x>maxLeft)x=maxLeft;if(y<SPACE_AROUND_EDGES)y=SPACE_AROUND_EDGES;else if(y>maxTop)y=maxTop;setCurrentDeltaY(maxStack);setPos({x,y});},[deltaYStack,currentDeltaY,getOffset]);const update=Object(react[\"useCallback\"])(time=>{if(!elementRef.current||!updateFade(time))return;const bounds=GetRoomObjectBounds(GetRoomSession().roomId,objectId,category);const location=GetRoomObjectScreenLocation(GetRoomSession().roomId,objectId,category);updatePosition(bounds,location);},[objectId,category,updateFade,updatePosition]);const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['nitro-context-menu'];if(collapsed)newClassNames.push('menu-hidden');newClassNames.push(pos.x!==null?'visible':'invisible');if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[pos,classNames,collapsed]);const getStyle=Object(react[\"useMemo\"])(()=>{let newStyle={};newStyle.left=pos.x||0;newStyle.top=pos.y||0;newStyle.opacity=opacity;if(Object.keys(style).length)newStyle={...newStyle,...style};return newStyle;},[pos,opacity,style]);Object(react[\"useEffect\"])(()=>{setDeltaYStack(new nitro_renderer[\"Ab\" /* FixedSizeStack */](LOCATION_STACK_SIZE));setCurrentDeltaY(-1000000);},[]);Object(react[\"useEffect\"])(()=>{let added=false;if(!isFrozen){added=true;GetTicker().add(update);}return()=>{if(added)GetTicker().remove(update);};},[isFrozen,update]);Object(react[\"useEffect\"])(()=>{if(!fades)return;const timeout=setTimeout(()=>setIsFading(true),fadeDelay);return()=>clearTimeout(timeout);},[fades]);const toggleCollapse=()=>{COLLAPSED=!COLLAPSED;setCollapsed(COLLAPSED);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{innerRef:elementRef,position:position,classNames:getClassNames,style:getStyle,...rest,children:[!(collapsable&&COLLAPSED)&&children,collapsable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuCaretView,{onClick:()=>toggleCollapse(),collapsed:collapsed})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoUseProductView.tsx\nconst PRODUCT_PAGE_UKNOWN=0;const PRODUCT_PAGE_SHAMPOO=1;const PRODUCT_PAGE_CUSTOM_PART=2;const PRODUCT_PAGE_CUSTOM_PART_SHAMPOO=3;const PRODUCT_PAGE_SADDLE=4;const PRODUCT_PAGE_REVIVE=5;const PRODUCT_PAGE_REBREED=6;const PRODUCT_PAGE_FERTILIZE=7;const AvatarInfoUseProductView=props=>{const{item=null,updateConfirmingProduct=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(0);const{roomSession=null}=useRoomContext();Object(react[\"useEffect\"])(()=>{if(!item)return;const furniData=GetFurnitureDataForRoomObject(roomSession.roomId,item.requestRoomObjectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(!furniData)return;let mode=PRODUCT_PAGE_UKNOWN;switch(furniData.specialType){case FurniCategory.PET_SHAMPOO:mode=PRODUCT_PAGE_SHAMPOO;break;case FurniCategory.PET_CUSTOM_PART:mode=PRODUCT_PAGE_CUSTOM_PART;break;case FurniCategory.PET_CUSTOM_PART_SHAMPOO:mode=PRODUCT_PAGE_CUSTOM_PART_SHAMPOO;break;case FurniCategory.PET_SADDLE:mode=PRODUCT_PAGE_SADDLE;break;case FurniCategory.MONSTERPLANT_REVIVAL:mode=PRODUCT_PAGE_REVIVE;break;case FurniCategory.MONSTERPLANT_REBREED:mode=PRODUCT_PAGE_REBREED;break;case FurniCategory.MONSTERPLANT_FERTILIZE:mode=PRODUCT_PAGE_FERTILIZE;break;}setMode(mode);},[roomSession,item]);const processAction=Object(react[\"useCallback\"])(name=>{if(!name)return;switch(name){case'use_product':case'use_product_shampoo':case'use_product_custom_part':case'use_product_custom_part_shampoo':case'use_product_saddle':case'replace_product_saddle':case'revive_monsterplant':case'rebreed_monsterplant':case'fertilize_monsterplant':updateConfirmingProduct(item);break;}},[item,updateConfirmingProduct]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:item.id,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:nitro_renderer[\"Mg\" /* RoomObjectType */].PET,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:item.name}),mode===PRODUCT_PAGE_UKNOWN&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_product'),children:LocalizeText('infostand.button.useproduct')}),mode===PRODUCT_PAGE_SHAMPOO&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_product_shampoo'),children:LocalizeText('infostand.button.useproduct_shampoo')}),mode===PRODUCT_PAGE_CUSTOM_PART&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_product_custom_part'),children:LocalizeText('infostand.button.useproduct_custom_part')}),mode===PRODUCT_PAGE_CUSTOM_PART_SHAMPOO&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_product_custom_part_shampoo'),children:LocalizeText('infostand.button.useproduct_custom_part_shampoo')}),mode===PRODUCT_PAGE_SADDLE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[item.replace&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('replace_product_saddle'),children:LocalizeText('infostand.button.replaceproduct_saddle')}),!item.replace&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_product_saddle'),children:LocalizeText('infostand.button.useproduct_saddle')})]}),mode===PRODUCT_PAGE_REVIVE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('revive_monsterplant'),children:LocalizeText('infostand.button.revive_monsterplant')}),mode===PRODUCT_PAGE_REBREED&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('rebreed_monsterplant'),children:LocalizeText('infostand.button.rebreed_monsterplant')}),mode===PRODUCT_PAGE_FERTILIZE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('fertilize_monsterplant'),children:LocalizeText('infostand.button.fertilize_monsterplant')})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetAvatarView.tsx\nconst MODE_NORMAL=0;const MODE_MODERATE=1;const MODE_MODERATE_BAN=2;const MODE_MODERATE_MUTE=3;const MODE_AMBASSADOR=4;const MODE_AMBASSADOR_MUTE=5;const MODE_RELATIONSHIP=6;const AvatarInfoWidgetAvatarView=props=>{const{userData=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(MODE_NORMAL);const[respectsLeft,setRespectsLeft]=Object(react[\"useState\"])(0);const{canRequestFriend=null}=useFriends();const{widgetHandler=null}=useRoomContext();const isShowGiveRights=Object(react[\"useMemo\"])(()=>{return userData.amIOwner&&userData.targetRoomControllerLevel<nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST&&!userData.isGuildRoom;},[userData]);const isShowRemoveRights=Object(react[\"useMemo\"])(()=>{return userData.amIOwner&&userData.targetRoomControllerLevel===nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST&&!userData.isGuildRoom;},[userData]);const moderateMenuHasContent=Object(react[\"useMemo\"])(()=>{return userData.canBeKicked||userData.canBeBanned||userData.canBeMuted||isShowGiveRights||isShowRemoveRights;},[isShowGiveRights,isShowRemoveRights,userData]);const canGiveHandItem=Object(react[\"useMemo\"])(()=>{let flag=false;const roomObject=GetOwnRoomObject();if(roomObject){const carryId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT);if(carryId>0&&carryId<999999)flag=true;}return flag;},[]);const processAction=Object(react[\"useCallback\"])(name=>{let messageType=null;let message=null;let hideMenu=true;if(name){switch(name){case'moderate':hideMenu=false;setMode(MODE_MODERATE);break;case'ban':hideMenu=false;setMode(MODE_MODERATE_BAN);break;case'mute':hideMenu=false;setMode(MODE_MODERATE_MUTE);break;case'ambassador':hideMenu=false;setMode(MODE_AMBASSADOR);break;case'ambassador_mute':hideMenu=false;setMode(MODE_AMBASSADOR_MUTE);break;case'back_moderate':hideMenu=false;setMode(MODE_MODERATE);break;case'back_ambassador':hideMenu=false;setMode(MODE_AMBASSADOR);break;case'back':hideMenu=false;setMode(MODE_NORMAL);break;case'whisper':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.WHISPER_USER;break;case'friend':CreateLinkEvent(`friends/request/${userData.webID}/${userData.name}`);break;case'relationship':hideMenu=false;setMode(MODE_RELATIONSHIP);break;case'respect':{let newRespectsLeft=respectsLeft-1;setRespectsLeft(newRespectsLeft);messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_USER;if(newRespectsLeft>0)hideMenu=false;break;}case'ignore':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.IGNORE_USER;break;case'unignore':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.UNIGNORE_USER;break;case'kick':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.KICK_USER;break;case'ban_hour':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_HOUR;break;case'ban_day':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_DAY;break;case'perm_ban':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.BAN_USER_PERM;break;case'mute_2min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_2MIN;break;case'mute_5min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_5MIN;break;case'mute_10min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_10MIN;break;case'give_rights':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_RIGHTS;break;case'remove_rights':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TAKE_RIGHTS;break;case'trade':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.START_TRADING;break;case'report':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REPORT_CFH_OTHER;break;case'pass_hand_item':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PASS_CARRY_ITEM;break;case'ambassador_alert':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_ALERT_USER;break;case'ambassador_kick':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_KICK_USER;break;case'ambassador_mute_2min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MUTE_USER_2MIN;break;case'ambassador_mute_10min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_10MIN;break;case'ambassador_mute_60min':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_60MIN;break;case'ambassador_mute_18hour':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.AMBASSADOR_MUTE_USER_18HOUR;break;case'rship_heart':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_HEART;break;case'rship_smile':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_SMILE;break;case'rship_bobba':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_BOBBA;break;case'rship_none':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RELATIONSHIP_NONE;break;}if(messageType)message=new RoomWidgetUserActionMessage_RoomWidgetUserActionMessage(messageType,userData.webID);if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();},[userData,respectsLeft,widgetHandler,close]);Object(react[\"useEffect\"])(()=>{setMode(MODE_NORMAL);setRespectsLeft(userData.respectLeft);},[userData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:userData.roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:userData.userType,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{className:\"cursor-pointer\",onClick:event=>GetUserProfile(userData.webID),children:userData.name}),mode===MODE_NORMAL&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[canRequestFriend(userData.webID)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('friend'),children:LocalizeText('infostand.button.friend')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('trade'),children:LocalizeText('infostand.button.trade')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('whisper'),children:LocalizeText('infostand.button.whisper')}),respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.respect',['count'],[respectsLeft.toString()])}),!canRequestFriend(userData.webID)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('relationship'),children:[LocalizeText('infostand.link.relationship'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"})]}),!userData.isIgnored&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ignore'),children:LocalizeText('infostand.button.ignore')}),userData.isIgnored&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('unignore'),children:LocalizeText('infostand.button.unignore')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('report'),children:LocalizeText('infostand.button.report')}),moderateMenuHasContent&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('moderate'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.link.moderate')]}),userData.isAmbassador&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.link.ambassador')]}),canGiveHandItem&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pass_hand_item'),children:LocalizeText('avatar.widget.pass_hand_item')})]}),mode===MODE_MODERATE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('kick'),children:LocalizeText('infostand.button.kick')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('mute'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.button.mute')]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('ban'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.button.ban')]}),isShowGiveRights&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('give_rights'),children:LocalizeText('infostand.button.giverights')}),isShowRemoveRights&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('remove_rights'),children:LocalizeText('infostand.button.removerights')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_MODERATE_BAN&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ban_hour'),children:LocalizeText('infostand.button.ban_hour')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ban_day'),children:LocalizeText('infostand.button.ban_day')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ban_perm'),children:LocalizeText('infostand.button.perm_ban')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back_moderate'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_MODERATE_MUTE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('mute_2min'),children:LocalizeText('infostand.button.mute_2min')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('mute_5min'),children:LocalizeText('infostand.button.mute_5min')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('mute_10min'),children:LocalizeText('infostand.button.mute_10min')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back_moderate'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_AMBASSADOR&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_alert'),children:LocalizeText('infostand.button.alert')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_kick'),children:LocalizeText('infostand.button.kick')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_mute'),children:[LocalizeText('infostand.button.mute'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-right\",className:\"right\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_AMBASSADOR_MUTE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_mute_2min'),children:LocalizeText('infostand.button.mute_2min')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_mute_10min'),children:LocalizeText('infostand.button.mute_10min')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_mute_60min'),children:LocalizeText('infostand.button.mute_60min')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('ambassador_mute_18hr'),children:LocalizeText('infostand.button.mute_18hour')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back_ambassador'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_RELATIONSHIP&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('rship_heart'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-heart\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('rship_smile'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-smile\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('rship_bobba'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"nitro-friends-spritesheet icon-bobba\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('rship_none'),children:LocalizeText('avatar.widget.clear_relationship')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/context-menu/ContextMenuListView.tsx\nconst ContextMenuListView=props=>{const{classNames=[],...rest}=props;const getClassNames=Object(react[\"useMemo\"])(()=>{const newClassNames=['menu-list'];if(classNames.length)newClassNames.push(...classNames);return newClassNames;},[classNames]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{classNames:getClassNames,...rest});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetDecorateView.tsx\nconst AvatarInfoWidgetDecorateView=props=>{const{userId=-1,userName='',roomIndex=-1}=props;const{eventDispatcher=null}=useRoomContext();const stopDecorating=()=>eventDispatcher.dispatchEvent(new RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent(false));return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,close:null,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:stopDecorating,children:LocalizeText('widget.avatar.stop_decorating')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"menu-bottom\"})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetNameView.tsx\nconst AvatarInfoWidgetNameView=props=>{const{nameData=null,close=null}=props;const fades=Object(react[\"useMemo\"])(()=>nameData.id!==GetSessionDataManager().userId,[nameData]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuView,{objectId:nameData.roomIndex,category:nameData.category,userType:nameData.userType,fades:fades,className:\"name-only\",close:close,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-shadow\",children:nameData.name})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetOwnAvatarView.tsx\nconst AvatarInfoWidgetOwnAvatarView_MODE_NORMAL=0;const MODE_CLUB_DANCES=1;const MODE_NAME_CHANGE=2;const MODE_EXPRESSIONS=3;const MODE_SIGNS=4;const AvatarInfoWidgetOwnAvatarView=props=>{const{userData=null,isDancing=false,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(isDancing&&HasHabboClub()?MODE_CLUB_DANCES:AvatarInfoWidgetOwnAvatarView_MODE_NORMAL);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const[hide,setHide]=Object(react[\"useState\"])(false);const processAction=Object(react[\"useCallback\"])(name=>{let message=null;let hideMenu=true;if(name){if(name.startsWith('sign_')){const sign=parseInt(name.split('_')[1]);roomSession.sendSignMessage(sign);}else{switch(name){case'decorate':eventDispatcher.dispatchEvent(new RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent(true));break;case'change_name':DispatchUiEvent(new HelpNameChangeEvent_HelpNameChangeEvent(HelpNameChangeEvent_HelpNameChangeEvent.INIT));break;case'change_looks':CreateLinkEvent('avatar-editor/show');break;case'expressions':hideMenu=false;setMode(MODE_EXPRESSIONS);break;case'sit':message=new RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage(RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.POSTURE_SIT);break;case'stand':message=new RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage(RoomWidgetChangePostureMessage_RoomWidgetChangePostureMessage.POSTURE_STAND);break;case'wave':message=new RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].WAVE);break;case'blow':message=new RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].BLOW);break;case'laugh':message=new RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].LAUGH);break;case'idle':message=new RoomWidgetAvatarExpressionMessage_RoomWidgetAvatarExpressionMessage(nitro_renderer[\"n\" /* AvatarExpressionEnum */].IDLE);break;case'dance_menu':hideMenu=false;setMode(MODE_CLUB_DANCES);break;case'dance':message=new RoomWidgetDanceMessage_RoomWidgetDanceMessage(1);break;case'dance_stop':message=new RoomWidgetDanceMessage_RoomWidgetDanceMessage(0);break;case'dance_1':case'dance_2':case'dance_3':case'dance_4':message=new RoomWidgetDanceMessage_RoomWidgetDanceMessage(parseInt(name.charAt(name.length-1)));break;case'signs':hideMenu=false;setMode(MODE_SIGNS);break;case'back':hideMenu=false;setMode(AvatarInfoWidgetOwnAvatarView_MODE_NORMAL);break;case'drop_carry_item':message=new RoomWidgetUserActionMessage_RoomWidgetUserActionMessage(RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DROP_CARRY_ITEM,userData.webID);break;}}if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();},[roomSession,eventDispatcher,widgetHandler,userData,close]);const isShowDecorate=Object(react[\"useMemo\"])(()=>{return userData.amIOwner||userData.amIAnyRoomController||userData.roomControllerLevel>nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST;},[userData]);const isRidingHorse=IsRidingHorse();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:userData.roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:userData.userType,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{className:\"cursor-pointer\",onClick:event=>GetUserProfile(userData.webID),children:userData.name}),!hide&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[mode===AvatarInfoWidgetOwnAvatarView_MODE_NORMAL&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[userData.allowNameChange&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('change_name'),children:LocalizeText('widget.avatar.change_name')}),isShowDecorate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('decorate'),children:LocalizeText('widget.avatar.decorate')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('change_looks'),children:LocalizeText('widget.memenu.myclothes')}),HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_menu'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[LocalizeText('widget.memenu.dance'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),!isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[LocalizeText('widget.memenu.dance'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('expressions'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[LocalizeText('infostand.link.expressions'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('signs'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[LocalizeText('infostand.show.signs'),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-right mt-auto mb-auto\"})]})}),userData.carryItem>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('drop_carry_item'),children:LocalizeText('avatar.widget.drop_hand_item')})]}),mode===MODE_CLUB_DANCES&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[isDancing&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_1'),children:LocalizeText('widget.memenu.dance1')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_2'),children:LocalizeText('widget.memenu.dance2')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_3'),children:LocalizeText('widget.memenu.dance3')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance_4'),children:LocalizeText('widget.memenu.dance4')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]}),mode===MODE_EXPRESSIONS&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[GetOwnPosture()===nitro_renderer[\"k\" /* AvatarAction */].POSTURE_STAND&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sit'),children:LocalizeText('widget.memenu.sit')}),GetCanStandUp()&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('stand'),children:LocalizeText('widget.memenu.stand')}),GetCanUseExpression()&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('wave'),children:LocalizeText('widget.memenu.wave')}),GetCanUseExpression()&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('laugh'),children:[!HasHabboVip()&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.laugh')]}),GetCanUseExpression()&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('blow'),children:[!HasHabboVip()&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.blow')]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('idle'),children:LocalizeText('widget.memenu.idle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]}),mode===MODE_SIGNS&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_1'),children:\"1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_2'),children:\"2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_3'),children:\"3\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_4'),children:\"4\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_5'),children:\"5\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_6'),children:\"6\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_7'),children:\"7\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_8'),children:\"8\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_9'),children:\"9\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_10'),children:\"10\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_11'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-heart\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_12'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-skull\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_0'),children:\"0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_13'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-exclamation\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_15'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-smile\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_14'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-soccer\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_17'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-yellow\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('sign_16'),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-sign-red\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('back'),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-context-arrow-left mt-auto mb-auto\"}),LocalizeText('generic.back')]})})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetOwnPetView.tsx\nconst _Str_2906=0;const _Str_5818=1;const _Str_5938=2;const _Str_10946=3;const AvatarInfoWidgetOwnPetView=props=>{const{petData=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(_Str_2906);const[respectsLeft,setRespectsLeft]=Object(react[\"useState\"])(0);const{roomSession=null,widgetHandler=null}=useRoomContext();const canGiveHandItem=Object(react[\"useMemo\"])(()=>{let flag=false;const roomObject=GetOwnRoomObject();if(roomObject){const carryId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT);if(carryId>0&&carryId<999999)flag=true;}return flag;},[]);const processAction=name=>{let messageType=null;let message=null;let hideMenu=true;if(name){switch(name){case'respect':let newRespectsLeft=0;setRespectsLeft(prevValue=>{newRespectsLeft=prevValue-1;return newRespectsLeft;});messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET;if(newRespectsLeft>0)hideMenu=false;break;case'treat':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET;break;case'pass_handitem':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET;break;case'train'://this.widget._Str_23877();\nbreak;case'pick_up':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET;break;case'mount':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET;break;case'toggle_riding_permission':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_RIDING_PERMISSION;break;case'toggle_breeding_permission':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TOGGLE_PET_BREEDING_PERMISSION;break;case'dismount':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET;break;case'saddle_off':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.SADDLE_OFF;break;case'breed':if(mode===_Str_2906){// _local_7 = RoomWidgetPetCommandMessage._Str_16282;\n// _local_8 = (\"pet.command.\" + _local_7);\n// _local_9 = _Str_2268.catalog.localization.getLocalization(_local_8);\n// _local_4 = new RoomWidgetPetCommandMessage(RoomWidgetPetCommandMessage.RWPCM_PET_COMMAND, this._Str_594.id, ((this._Str_594.name + \" \") + _local_9));\n}else if(mode===_Str_10946){messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REQUEST_BREED_PET;}break;case'harvest':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.HARVEST_PET;break;case'revive':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.REVIVE_PET;break;case'compost':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.COMPOST_PLANT;break;case'buy_saddle':CreateLinkEvent('catalog/open/'+GetConfiguration('catalog.links')['pets.buy_saddle']);break;}if(messageType)message=new RoomWidgetUserActionMessage_RoomWidgetUserActionMessage(messageType,petData.id);if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();};Object(react[\"useEffect\"])(()=>{setMode(prevValue=>{if(petData.petType===nitro_renderer[\"vf\" /* PetType */].MONSTERPLANT)return _Str_10946;else if(petData.saddle&&!petData.rider)return _Str_5818;else if(petData.rider)return _Str_5938;return _Str_2906;});setRespectsLeft(petData.respectsPetLeft);},[petData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:petData.roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:nitro_renderer[\"Mg\" /* RoomObjectType */].PET,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:petData.name}),mode===_Str_2906&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('train'),children:LocalizeText('infostand.button.train')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pick_up'),children:LocalizeText('infostand.button.pickup')}),petData.petType===nitro_renderer[\"vf\" /* PetType */].HORSE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('buy_saddle'),children:LocalizeText('infostand.button.buy_saddle')}),[nitro_renderer[\"vf\" /* PetType */].BEAR,nitro_renderer[\"vf\" /* PetType */].TERRIER,nitro_renderer[\"vf\" /* PetType */].CAT,nitro_renderer[\"vf\" /* PetType */].DOG,nitro_renderer[\"vf\" /* PetType */].PIG].indexOf(petData.petType)>-1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('breed'),children:LocalizeText('infostand.button.breed')})]}),mode===_Str_5818&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('mount'),children:LocalizeText('infostand.button.mount')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('toggle_riding_permission'),gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"checkbox\",checked:!!petData.publiclyRideable,readOnly:true}),LocalizeText('infostand.button.toggle_riding_permission')]}),respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('train'),children:LocalizeText('infostand.button.train')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pick_up'),children:LocalizeText('infostand.button.pickup')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('saddle_off'),children:LocalizeText('infostand.button.saddleoff')})]}),mode===_Str_5938&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dismount'),children:LocalizeText('infostand.button.dismount')}),respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])})]}),mode===_Str_10946&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pick_up'),children:LocalizeText('infostand.button.pickup')}),petData.dead&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('revive'),children:LocalizeText('infostand.button.revive')}),roomSession.isRoomOwner&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('compost'),children:LocalizeText('infostand.button.compost')}),!petData.dead&&petData.energy/petData.maximumEnergy<0.98&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('treat'),children:LocalizeText('infostand.button.treat')}),!petData.dead&&petData.level===petData.maximumLevel&&petData.breedable&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuListItemView,{onClick:event=>processAction('toggle_breeding_permission'),gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"checkbox\",checked:petData.publiclyBreedable,readOnly:true}),LocalizeText('infostand.button.toggle_breeding_permission')]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('breed'),children:LocalizeText('infostand.button.breed')})]})]}),canGiveHandItem&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pass_hand_item'),children:LocalizeText('infostand.button.pass_hand_item')})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetPetView.tsx\nconst AvatarInfoWidgetPetView_Str_2906=0;const AvatarInfoWidgetPetView_Str_5818=1;const AvatarInfoWidgetPetView_Str_5938=2;const _Str_13388=3;const AvatarInfoWidgetPetView=props=>{const{petData=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(AvatarInfoWidgetPetView_Str_2906);const[respectsLeft,setRespectsLeft]=Object(react[\"useState\"])(0);const{roomSession=null,widgetHandler=null}=useRoomContext();const canPickUp=Object(react[\"useMemo\"])(()=>{return roomSession.isRoomOwner||roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST||GetSessionDataManager().isModerator;},[roomSession]);const canGiveHandItem=Object(react[\"useMemo\"])(()=>{let flag=false;const roomObject=GetOwnRoomObject();if(roomObject){const carryId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FIGURE_CARRY_OBJECT);if(carryId>0&&carryId<999999)flag=true;}return flag;},[]);const processAction=name=>{let messageType=null;let message=null;let hideMenu=true;if(name){switch(name){case'respect':let newRespectsLeft=0;setRespectsLeft(prevValue=>{newRespectsLeft=prevValue-1;return newRespectsLeft;});messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.RESPECT_PET;if(newRespectsLeft>0)hideMenu=false;break;case'treat':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.TREAT_PET;break;case'pass_handitem':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.GIVE_CARRY_ITEM_TO_PET;break;case'pick_up':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.PICKUP_PET;break;case'mount':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.MOUNT_PET;break;case'dismount':messageType=RoomWidgetUserActionMessage_RoomWidgetUserActionMessage.DISMOUNT_PET;break;}if(messageType)message=new RoomWidgetUserActionMessage_RoomWidgetUserActionMessage(messageType,petData.id);if(message)widgetHandler.processWidgetMessage(message);}if(hideMenu)close();};Object(react[\"useEffect\"])(()=>{setMode(prevValue=>{if(petData.petType===nitro_renderer[\"vf\" /* PetType */].MONSTERPLANT)return _Str_13388;else if(petData.saddle&&!petData.rider)return AvatarInfoWidgetPetView_Str_5818;else if(petData.rider)return AvatarInfoWidgetPetView_Str_5938;return AvatarInfoWidgetPetView_Str_2906;});setRespectsLeft(petData.respectsPetLeft);},[petData]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:petData.roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:nitro_renderer[\"Mg\" /* RoomObjectType */].PET,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:petData.name}),mode===AvatarInfoWidgetPetView_Str_2906&&respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])}),mode===AvatarInfoWidgetPetView_Str_5818&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!!petData.publiclyRideable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('mount'),children:LocalizeText('infostand.button.mount')}),respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])})]}),mode===AvatarInfoWidgetPetView_Str_5938&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dismount'),children:LocalizeText('infostand.button.dismount')}),respectsLeft>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('respect'),children:LocalizeText('infostand.button.petrespect',['count'],[respectsLeft.toString()])})]}),mode===_Str_13388&&!petData.dead&&petData.energy/petData.maximumEnergy<0.98&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('treat'),children:LocalizeText('infostand.button.treat')}),canPickUp&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pick_up'),children:LocalizeText('infostand.button.pickup')}),canGiveHandItem&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pass_hand_item'),children:LocalizeText('infostand.button.pass_hand_item')})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetRentableBotView.tsx\nconst AvatarInfoWidgetRentableBotView_MODE_NORMAL=0;const MODE_CHANGE_NAME=1;const MODE_CHANGE_MOTTO=2;const AvatarInfoWidgetRentableBotView=props=>{const{rentableBotData=null,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(AvatarInfoWidgetRentableBotView_MODE_NORMAL);const[newName,setNewName]=Object(react[\"useState\"])('');const[newMotto,setNewMotto]=Object(react[\"useState\"])('');const{eventDispatcher=null}=useRoomContext();const onBotCommandConfigurationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(parser.botId!==rentableBotData.webID)return;switch(parser.commandId){case BotSkillsEnum.CHANGE_BOT_NAME:setNewName(parser.data);setMode(MODE_CHANGE_NAME);return;case BotSkillsEnum.CHANGE_BOT_MOTTO:setNewMotto(parser.data);setMode(MODE_CHANGE_MOTTO);return;case BotSkillsEnum.SETUP_CHAT:{const data=parser.data;const pieces=data.split(data.indexOf(';#;')===-1?';':';#;');if(pieces.length===3||pieces.length===4){eventDispatcher.dispatchEvent(new RoomWidgetUpdateRentableBotChatEvent_RoomWidgetUpdateRentableBotChatEvent(rentableBotData.roomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,rentableBotData.webID,pieces[0],pieces[1].toLowerCase()==='true'||pieces[1]==='1',parseInt(pieces[2]),pieces[3]?pieces[3].toLowerCase()==='true'||pieces[3]==='1':false));close();}return;}}},[rentableBotData,eventDispatcher,close]);UseMessageEventHook(nitro_renderer[\"z\" /* BotCommandConfigurationEvent */],onBotCommandConfigurationEvent);const requestBotCommandConfiguration=skillType=>SendMessageComposer(new nitro_renderer[\"Sf\" /* RequestBotCommandConfigurationComposer */](rentableBotData.webID,skillType));const processAction=name=>{let hideMenu=true;if(name){switch(name){case'donate_to_all':requestBotCommandConfiguration(BotSkillsEnum.DONATE_TO_ALL);SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.DONATE_TO_ALL,''));break;case'donate_to_user':requestBotCommandConfiguration(BotSkillsEnum.DONATE_TO_USER);SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.DONATE_TO_USER,''));break;case'change_bot_name':requestBotCommandConfiguration(BotSkillsEnum.CHANGE_BOT_NAME);hideMenu=false;break;case'save_bot_name':SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.CHANGE_BOT_NAME,newName));break;case'change_bot_motto':requestBotCommandConfiguration(BotSkillsEnum.CHANGE_BOT_MOTTO);hideMenu=false;break;case'save_bot_motto':SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.CHANGE_BOT_MOTTO,newMotto));break;case'dress_up':SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.DRESS_UP,''));break;case'random_walk':SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.RANDOM_WALK,''));break;case'setup_chat':requestBotCommandConfiguration(BotSkillsEnum.SETUP_CHAT);hideMenu=false;break;case'dance':SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.DANCE,''));break;case'nux_take_tour':GetNitroInstance().createLinkEvent('help/tour');SendMessageComposer(new nitro_renderer[\"D\" /* BotSkillSaveComposer */](rentableBotData.webID,BotSkillsEnum.NUX_TAKE_TOUR,''));break;case'pick':SendMessageComposer(new nitro_renderer[\"B\" /* BotRemoveComposer */](rentableBotData.webID));break;default:break;}}if(hideMenu)close();};Object(react[\"useEffect\"])(()=>{setMode(AvatarInfoWidgetRentableBotView_MODE_NORMAL);},[rentableBotData]);const canControl=rentableBotData.amIOwner||rentableBotData.amIAnyRoomController;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:rentableBotData.roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,userType:nitro_renderer[\"Mg\" /* RoomObjectType */].RENTABLE_BOT,close:close,collapsable:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:rentableBotData.name}),mode===AvatarInfoWidgetRentableBotView_MODE_NORMAL&&canControl&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[rentableBotData.botSkills.indexOf(BotSkillsEnum.DONATE_TO_ALL)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('donate_to_all'),children:LocalizeText('avatar.widget.donate_to_all')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.DONATE_TO_USER)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('donate_to_user'),children:LocalizeText('avatar.widget.donate_to_user')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.CHANGE_BOT_NAME)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('change_bot_name'),children:LocalizeText('avatar.widget.change_bot_name')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.CHANGE_BOT_MOTTO)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('change_bot_motto'),children:LocalizeText('avatar.widget.change_bot_motto')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.DRESS_UP)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dress_up'),children:LocalizeText('avatar.widget.dress_up')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.RANDOM_WALK)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('random_walk'),children:LocalizeText('avatar.widget.random_walk')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.SETUP_CHAT)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('setup_chat'),children:LocalizeText('avatar.widget.setup_chat')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.DANCE)>=0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('dance'),children:LocalizeText('avatar.widget.dance')}),rentableBotData.botSkills.indexOf(BotSkillsEnum.NO_PICK_UP)===-1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('pick'),children:LocalizeText('avatar.widget.pick_up')})]}),mode===MODE_CHANGE_NAME&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"menu-item context-input-bg\",onClick:null,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:LocalizeText('bot.skill.name.configuration.new.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:newName,maxLength:GetConfiguration('bot.name.max.length',15),onChange:event=>setNewName(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"secondary\",onClick:event=>processAction(null),children:LocalizeText('cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>processAction('save_bot_name'),children:LocalizeText('save')})]})]}),mode===MODE_CHANGE_MOTTO&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"menu-item context-input-bg\",onClick:null,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:LocalizeText('bot.skill.name.configuration.new.motto')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:newMotto,maxLength:GetConfiguration('motto.max.length',38),onChange:event=>setNewMotto(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"secondary\",onClick:event=>processAction(null),children:LocalizeText('cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>processAction('save_bot_motto'),children:LocalizeText('save')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/avatar-info/AvatarInfoWidgetView.tsx\nconst AvatarInfoWidgetView=props=>{const[name,setName]=Object(react[\"useState\"])(null);const[nameBubbles,setNameBubbles]=Object(react[\"useState\"])([]);const[productBubbles,setProductBubbles]=Object(react[\"useState\"])([]);const[confirmingProduct,setConfirmingProduct]=Object(react[\"useState\"])(null);const[infoStandEvent,setInfoStandEvent]=Object(react[\"useState\"])(null);const[isGameMode,setGameMode]=Object(react[\"useState\"])(false);const[isDancing,setIsDancing]=Object(react[\"useState\"])(false);const[isDecorating,setIsDecorating]=Object(react[\"useState\"])(false);const[rentableBotChatEvent,setRentableBotChatEvent]=Object(react[\"useState\"])(null);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const removeNameBubble=Object(react[\"useCallback\"])(index=>{setNameBubbles(prevValue=>{const newValue=[...prevValue];newValue.splice(index,1);return newValue;});},[]);const removeProductBubble=Object(react[\"useCallback\"])(index=>{setProductBubbles(prevValue=>{const newValue=[...prevValue];const item=newValue.splice(index,1)[0];if(confirmingProduct===item)setConfirmingProduct(null);return newValue;});},[confirmingProduct]);const clearProductBubbles=Object(react[\"useCallback\"])(()=>{setProductBubbles([]);},[]);const clearInfoStandEvent=Object(react[\"useCallback\"])(()=>{setInfoStandEvent(null);},[]);const clearName=Object(react[\"useCallback\"])(()=>{setName(null);},[]);const updateConfirmingProduct=Object(react[\"useCallback\"])(product=>{setConfirmingProduct(product);setProductBubbles([]);},[]);const onRoomWidgetRoomEngineUpdateEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.NORMAL_MODE:{if(isGameMode)setGameMode(false);return;}case RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.GAME_MODE:{if(!isGameMode)setGameMode(true);return;}}},[isGameMode]);UseEventDispatcherHook(RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.NORMAL_MODE,eventDispatcher,onRoomWidgetRoomEngineUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.GAME_MODE,eventDispatcher,onRoomWidgetRoomEngineUpdateEvent);const onRoomObjectRemoved=Object(react[\"useCallback\"])(event=>{if(name){if(event.id===name.id)setName(null);}if(event.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT){const nameBubbleIndex=nameBubbles.findIndex(bubble=>{return bubble.roomIndex===event.id;});if(nameBubbleIndex>-1)removeNameBubble(nameBubbleIndex);if(productBubbles.length){setProductBubbles(prevValue=>{return prevValue.filter(bubble=>{return bubble.id!==event.id;});});}}else if(event.category===nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR){if(productBubbles.length){setProductBubbles(prevValue=>{return prevValue.filter(bubble=>{return bubble.requestRoomObjectId!==event.id;});});}}if(infoStandEvent){if(infoStandEvent instanceof RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent){if(infoStandEvent.id===event.id)clearInfoStandEvent();}else if(infoStandEvent instanceof RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent||infoStandEvent instanceof RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent){if(infoStandEvent.roomIndex===event.id)clearInfoStandEvent();}else if(infoStandEvent instanceof RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent){if(infoStandEvent.roomIndex===event.id)clearInfoStandEvent();}}},[name,infoStandEvent,nameBubbles,productBubbles,removeNameBubble,clearInfoStandEvent]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED,eventDispatcher,onRoomObjectRemoved);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomObjectRemoved);const onObjectRolled=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OVER:{const roomObjectEvent=event;if(infoStandEvent)return;widgetHandler.processWidgetMessage(new RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage(RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_NAME,roomObjectEvent.id,roomObjectEvent.category));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OUT:{const roomObjectEvent=event;if(!name||name.roomIndex!==roomObjectEvent.id)return;setName(null);return;}}},[infoStandEvent,name,widgetHandler]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OVER,eventDispatcher,onObjectRolled);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OUT,eventDispatcher,onObjectRolled);const onObjectDeselected=Object(react[\"useCallback\"])(event=>{if(infoStandEvent)clearInfoStandEvent();if(productBubbles.length)setProductBubbles([]);},[infoStandEvent,productBubbles,clearInfoStandEvent]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED,eventDispatcher,onObjectDeselected);const onRoomWidgetObjectNameEvent=Object(react[\"useCallback\"])(event=>{if(event.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT)return;setName(event);clearProductBubbles();},[clearProductBubbles]);UseEventDispatcherHook(RoomWidgetObjectNameEvent_RoomWidgetObjectNameEvent.TYPE,eventDispatcher,onRoomWidgetObjectNameEvent);const onRoomWidgetUpdateInfostandEvent=Object(react[\"useCallback\"])(event=>{if(name)setName(null);if(event.type===RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI)clearInfoStandEvent();else setInfoStandEvent(event);clearProductBubbles();},[name,clearInfoStandEvent,clearProductBubbles]);UseEventDispatcherHook(RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI,eventDispatcher,onRoomWidgetUpdateInfostandEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER,eventDispatcher,onRoomWidgetUpdateInfostandEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER,eventDispatcher,onRoomWidgetUpdateInfostandEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT,eventDispatcher,onRoomWidgetUpdateInfostandEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT,eventDispatcher,onRoomWidgetUpdateInfostandEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO,eventDispatcher,onRoomWidgetUpdateInfostandEvent);const onRoomWidgetUpdateDanceStatusEvent=Object(react[\"useCallback\"])(event=>{setIsDancing(event.isDancing);},[]);UseEventDispatcherHook(RoomWidgetUpdateDanceStatusEvent_RoomWidgetUpdateDanceStatusEvent.UPDATE_DANCE,eventDispatcher,onRoomWidgetUpdateDanceStatusEvent);const onRoomWidgetUpdateRentableBotChatEvent=Object(react[\"useCallback\"])(event=>{setRentableBotChatEvent(event);},[]);UseEventDispatcherHook(RoomWidgetUpdateRentableBotChatEvent_RoomWidgetUpdateRentableBotChatEvent.UPDATE_CHAT,eventDispatcher,onRoomWidgetUpdateRentableBotChatEvent);const onRoomWidgetUseProductBubbleEvent=Object(react[\"useCallback\"])(event=>{setConfirmingProduct(null);setProductBubbles(prevValue=>{const newBubbles=[...prevValue];for(const item of event.items){const index=newBubbles.findIndex(bubble=>bubble.id===item.id);if(index>-1)newBubbles.splice(index,1);newBubbles.push(item);}return newBubbles;});},[]);UseEventDispatcherHook(RoomWidgetUseProductBubbleEvent_RoomWidgetUseProductBubbleEvent.USE_PRODUCT_BUBBLES,eventDispatcher,onRoomWidgetUseProductBubbleEvent);// const onFriendEnteredRoomEvent = useCallback((event: FriendEnteredRoomEvent) =>\n// {\n//     setNameBubbles(prevValue =>\n//         {\n//             return [ ...prevValue, event  ];\n//         })\n// }, []);\n// useUiEvent(FriendEnteredRoomEvent.ENTERED, onFriendEnteredRoomEvent);\nconst onRoomWidgetUpdateDecorateModeEvent=Object(react[\"useCallback\"])(event=>{setIsDecorating(event.isDecorating);},[]);UseEventDispatcherHook(RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent.UPDATE_DECORATE,eventDispatcher,onRoomWidgetUpdateDecorateModeEvent);const decorateView=Object(react[\"useMemo\"])(()=>{GetRoomSession().isDecorating=isDecorating;if(!isDecorating)return null;const userId=GetSessionDataManager().userId;const userName=GetSessionDataManager().userName;const roomIndex=GetRoomSession().ownRoomIndex;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetDecorateView,{userId:userId,userName:userName,roomIndex:roomIndex});},[isDecorating]);const currentView=Object(react[\"useMemo\"])(()=>{if(isGameMode)return null;if(decorateView)return decorateView;if(name){const nameBubbleIndex=nameBubbles.findIndex(bubble=>{return bubble.roomIndex===name.roomIndex;});if(nameBubbleIndex>-1)removeNameBubble(nameBubbleIndex);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetNameView,{nameData:name,close:clearName});}if(infoStandEvent){switch(infoStandEvent.type){case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER:case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER:{const event=infoStandEvent;if(event.isSpectatorMode)return null;const nameBubbleIndex=nameBubbles.findIndex(bubble=>{return bubble.roomIndex===event.roomIndex;});if(nameBubbleIndex>-1)removeNameBubble(nameBubbleIndex);if(event.isOwnUser){if(nitro_renderer[\"ug\" /* RoomEnterEffect */].isRunning())return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetOwnAvatarView,{userData:event,isDancing:isDancing,close:clearInfoStandEvent});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetAvatarView,{userData:event,close:clearInfoStandEvent});}case RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO:{const event=infoStandEvent;if(event.isOwner){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetOwnPetView,{petData:event,close:clearInfoStandEvent});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetPetView,{petData:event,close:clearInfoStandEvent});}case RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT:{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetRentableBotView,{rentableBotData:infoStandEvent,close:clearInfoStandEvent});}case RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI:{return null;}}}return null;},[isGameMode,decorateView,name,nameBubbles,isDancing,infoStandEvent,clearName,clearInfoStandEvent,removeNameBubble]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[currentView,nameBubbles.length>0&&nameBubbles.map((name,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetNameView,{nameData:name,close:()=>removeNameBubble(index)},index);}),productBubbles.length>0&&productBubbles.map((item,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoUseProductView,{item:item,updateConfirmingProduct:updateConfirmingProduct,close:()=>removeProductBubble(index)},item.id);}),rentableBotChatEvent&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoRentableBotChatView,{chatEvent:rentableBotChatEvent,close:()=>setRentableBotChatEvent(null)}),confirmingProduct&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoUseProductConfirmView,{item:confirmingProduct,close:()=>setConfirmingProduct(null)})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/chat-input/ChatInputStyleSelectorView.tsx\nconst ChatInputStyleSelectorView=props=>{const{chatStyleId=0,chatStyleIds=null,selectChatStyleId=null}=props;const[target,setTarget]=Object(react[\"useState\"])(null);const[selectorVisible,setSelectorVisible]=Object(react[\"useState\"])(false);const selectStyle=styleId=>{selectChatStyleId(styleId);setSelectorVisible(false);};const toggleSelector=event=>{let visible=false;setSelectorVisible(prevValue=>{visible=!prevValue;return visible;});if(visible)setTarget(event.target);};Object(react[\"useEffect\"])(()=>{if(selectorVisible)return;setTarget(null);},[selectorVisible]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"chatstyles-selector cursor-pointer\",onClick:toggleSelector}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Overlay[\"a\" /* default */],{show:selectorVisible,target:target,placement:\"top\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Popover[\"a\" /* default */],{className:\"nitro-chat-style-selector-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{overflow:\"hidden\",className:\"bg-transparent bubble-window image-rendering-pixelated\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{gap:1,columnCount:3,overflow:\"auto\",children:chatStyleIds&&chatStyleIds.length>0&&chatStyleIds.map(styleId=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"bubble-parent-container\",onClick:event=>selectStyle(styleId),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"bubble-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:`chat-bubble bubble-${styleId}`,children:\"\\xA0\"})},styleId)},styleId);})})})})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/chat-input/ChatInputView.tsx\nconst ChatInputView=props=>{const[chatValue,setChatValue]=Object(react[\"useState\"])('');const[selectedUsername,setSelectedUsername]=Object(react[\"useState\"])('');const[isTyping,setIsTyping]=Object(react[\"useState\"])(false);const[typingStartedSent,setTypingStartedSent]=Object(react[\"useState\"])(false);const[isIdle,setIsIdle]=Object(react[\"useState\"])(false);const[chatStyleId,setChatStyleId]=Object(react[\"useState\"])(GetSessionDataManager().chatStyle);const[needsChatStyleUpdate,setNeedsChatStyleUpdate]=Object(react[\"useState\"])(false);const[floodBlocked,setFloodBlocked]=Object(react[\"useState\"])(false);const[floodBlockedSeconds,setFloodBlockedSeconds]=Object(react[\"useState\"])(0);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const inputRef=Object(react[\"useRef\"])();const chatModeIdWhisper=Object(react[\"useMemo\"])(()=>{return LocalizeText('widgets.chatinput.mode.whisper');},[]);const chatModeIdShout=Object(react[\"useMemo\"])(()=>{return LocalizeText('widgets.chatinput.mode.shout');},[]);const chatModeIdSpeak=Object(react[\"useMemo\"])(()=>{return LocalizeText('widgets.chatinput.mode.speak');},[]);const maxChatLength=Object(react[\"useMemo\"])(()=>{return GetConfiguration('chat.input.maxlength',100);},[]);const anotherInputHasFocus=Object(react[\"useCallback\"])(()=>{const activeElement=document.activeElement;if(!activeElement)return false;if(inputRef&&inputRef.current===activeElement)return false;if(!(activeElement instanceof HTMLInputElement)&&!(activeElement instanceof HTMLTextAreaElement))return false;return true;},[inputRef]);const setInputFocus=Object(react[\"useCallback\"])(()=>{inputRef.current.focus();inputRef.current.setSelectionRange(inputRef.current.value.length*2,inputRef.current.value.length*2);},[inputRef]);const checkSpecialKeywordForInput=Object(react[\"useCallback\"])(()=>{setChatValue(prevValue=>{if(prevValue!==chatModeIdWhisper||!selectedUsername.length)return prevValue;return`${prevValue} ${selectedUsername}`;});},[selectedUsername,chatModeIdWhisper]);const sendChat=Object(react[\"useCallback\"])(function(text,chatType){let recipientName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';let styleId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;setChatValue('');widgetHandler.processWidgetMessage(new RoomWidgetChatMessage_RoomWidgetChatMessage(RoomWidgetChatMessage_RoomWidgetChatMessage.MESSAGE_CHAT,text,chatType,recipientName,styleId));},[widgetHandler]);const sendChatValue=Object(react[\"useCallback\"])(function(value){let shiftKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!value||value==='')return;let chatType=shiftKey?RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_SHOUT:RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_DEFAULT;let text=value;const parts=text.split(' ');let recipientName='';let append='';switch(parts[0]){case chatModeIdWhisper:chatType=RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_WHISPER;recipientName=parts[1];append=chatModeIdWhisper+' '+recipientName+' ';parts.shift();parts.shift();break;case chatModeIdShout:chatType=RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_SHOUT;parts.shift();break;case chatModeIdSpeak:chatType=RoomWidgetChatMessage_RoomWidgetChatMessage.CHAT_DEFAULT;parts.shift();break;}text=parts.join(' ');setIsTyping(false);setIsIdle(false);if(text.length<=maxChatLength){if(needsChatStyleUpdate){GetSessionDataManager().sendChatStyleUpdate(chatStyleId);setNeedsChatStyleUpdate(false);}sendChat(text,chatType,recipientName,chatStyleId);}setChatValue(append);},[chatModeIdWhisper,chatModeIdShout,chatModeIdSpeak,maxChatLength,chatStyleId,needsChatStyleUpdate,sendChat]);const updateChatInput=Object(react[\"useCallback\"])(value=>{if(!value||!value.length){setIsTyping(false);}else{setIsTyping(true);setIsIdle(true);}setChatValue(value);},[]);const onKeyDownEvent=Object(react[\"useCallback\"])(event=>{if(floodBlocked||!inputRef.current||anotherInputHasFocus())return;if(document.activeElement!==inputRef.current)setInputFocus();const value=event.target.value;switch(event.key){case' ':case'Space':checkSpecialKeywordForInput();return;case'NumpadEnter':case'Enter':sendChatValue(value,event.shiftKey);return;case'Backspace':if(value){const parts=value.split(' ');if(parts[0]===chatModeIdWhisper&&parts.length===3&&parts[2]===''){setChatValue('');}}return;}},[floodBlocked,inputRef,chatModeIdWhisper,anotherInputHasFocus,setInputFocus,checkSpecialKeywordForInput,sendChatValue]);const onRoomWidgetRoomObjectUpdateEvent=Object(react[\"useCallback\"])(event=>{setSelectedUsername('');},[]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const onRoomWidgetUpdateInfostandUserEvent=Object(react[\"useCallback\"])(event=>{setSelectedUsername(event.name);},[]);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER,eventDispatcher,onRoomWidgetUpdateInfostandUserEvent);const onRoomWidgetChatInputContentUpdateEvent=Object(react[\"useCallback\"])(event=>{switch(event.chatMode){case RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.WHISPER:{setChatValue(`${chatModeIdWhisper} ${event.userName} `);return;}case RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.SHOUT:return;}},[chatModeIdWhisper]);UseEventDispatcherHook(RoomWidgetUpdateChatInputContentEvent_RoomWidgetUpdateChatInputContentEvent.CHAT_INPUT_CONTENT,eventDispatcher,onRoomWidgetChatInputContentUpdateEvent);const onRoomWidgetFloodControlEvent=Object(react[\"useCallback\"])(event=>{setFloodBlocked(true);setFloodBlockedSeconds(event.seconds);},[]);UseEventDispatcherHook(RoomWidgetFloodControlEvent_RoomWidgetFloodControlEvent.FLOOD_CONTROL,eventDispatcher,onRoomWidgetFloodControlEvent);const selectChatStyleId=Object(react[\"useCallback\"])(styleId=>{setChatStyleId(styleId);setNeedsChatStyleUpdate(true);},[]);const chatStyleIds=Object(react[\"useMemo\"])(()=>{let styleIds=[];const styles=GetConfiguration('chat.styles');for(const style of styles){if(!style)continue;if(style.minRank>0){if(GetSessionDataManager().hasSecurity(style.minRank))styleIds.push(style.styleId);continue;}if(style.isSystemStyle){if(GetSessionDataManager().hasSecurity(nitro_renderer[\"eg\" /* RoomControllerLevel */].MODERATOR)){styleIds.push(style.styleId);continue;}}if(GetConfiguration('chat.styles.disabled').indexOf(style.styleId)>=0)continue;if(style.isHcOnly&&GetClubMemberLevel()>=nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].CLUB){styleIds.push(style.styleId);continue;}if(style.isAmbassadorOnly&&GetSessionDataManager().isAmbassador){styleIds.push(style.styleId);continue;}if(!style.isHcOnly&&!style.isAmbassadorOnly)styleIds.push(style.styleId);}return styleIds;},[]);Object(react[\"useEffect\"])(()=>{if(isTyping){if(!typingStartedSent){setTypingStartedSent(true);widgetHandler.processWidgetMessage(new RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage(isTyping));}}else{if(typingStartedSent){setTypingStartedSent(false);widgetHandler.processWidgetMessage(new RoomWidgetChatTypingMessage_RoomWidgetChatTypingMessage(isTyping));}}},[widgetHandler,isTyping,typingStartedSent]);Object(react[\"useEffect\"])(()=>{if(!isIdle)return;let timeout=null;if(isIdle){timeout=setTimeout(()=>{setIsIdle(false);setIsTyping(false);},10000);}return()=>clearTimeout(timeout);},[isIdle]);Object(react[\"useEffect\"])(()=>{if(!floodBlocked)return;let seconds=0;const interval=setInterval(()=>{setFloodBlockedSeconds(prevValue=>{seconds=(prevValue||0)-1;return seconds;});if(seconds<0){clearInterval(interval);setFloodBlocked(false);}},1000);return()=>clearInterval(interval);},[floodBlocked]);Object(react[\"useEffect\"])(()=>{document.body.addEventListener('keydown',onKeyDownEvent);return()=>{document.body.removeEventListener('keydown',onKeyDownEvent);};},[onKeyDownEvent]);Object(react[\"useEffect\"])(()=>{if(!inputRef.current)return;inputRef.current.parentElement.dataset.value=chatValue;},[chatValue]);if(GetRoomSession().isSpectator)return null;return/*#__PURE__*/Object(react_dom[\"createPortal\"])(/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"nitro-chat-input-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatInputStyleSelectorView,{chatStyleId:chatStyleId,chatStyleIds:chatStyleIds,selectChatStyleId:selectChatStyleId}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"input-sizer align-items-center\",children:[!floodBlocked&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{ref:inputRef,type:\"text\",className:\"chat-input\",placeholder:LocalizeText('widgets.chatinput.default'),value:chatValue,maxLength:maxChatLength,onChange:event=>updateChatInput(event.target.value),onMouseDown:event=>setInputFocus()}),floodBlocked&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{variant:\"danger\",children:[LocalizeText('chat.input.alert.flood',['time'],[floodBlockedSeconds.toString()]),\" \"]})]})]}),document.getElementById('toolbar-chat-input-container'));};\n// CONCATENATED MODULE: ./src/components/room/widgets/chat/ChatWidgetMessageView.tsx\nconst ChatWidgetMessageView=props=>{const{chat=null,makeRoom=null,onChatClicked=null,bubbleWidth=nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_NORMAL}=props;const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const elementRef=Object(react[\"useRef\"])();const getBubbleWidth=Object(react[\"useMemo\"])(()=>{switch(bubbleWidth){case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_NORMAL:return 350;case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_THIN:return 240;case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_WIDE:return 2000;}},[bubbleWidth]);Object(react[\"useEffect\"])(()=>{const element=elementRef.current;if(!element)return;const width=element.offsetWidth;const height=element.offsetHeight;chat.width=width;chat.height=height;chat.elementRef=element;let left=chat.left;let top=chat.top;if(!left&&!top){left=chat.location.x-width/2;top=element.parentElement.offsetHeight-height;chat.left=left;chat.top=top;}if(!chat.visible){makeRoom(chat);chat.visible=true;}return()=>{chat.elementRef=null;};},[elementRef,chat,makeRoom]);Object(react[\"useEffect\"])(()=>setIsVisible(chat.visible),[chat.visible]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{ref:elementRef,className:`bubble-container ${isVisible?'visible':'invisible'}`,onClick:event=>onChatClicked(chat),children:[chat.styleId===0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"user-container-bg\",style:{backgroundColor:chat.color}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:`chat-bubble bubble-${chat.styleId} type-${chat.type}`,style:{maxWidth:getBubbleWidth},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"user-container\",children:chat.imageUrl&&chat.imageUrl.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"user-image\",style:{backgroundImage:`url(${chat.imageUrl})`}})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"chat-content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"username mr-1\",dangerouslySetInnerHTML:{__html:`${chat.username}: `}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"message\",dangerouslySetInnerHTML:{__html:`${chat.formattedText}`}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"pointer\"})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/chat/common/ChatBubbleMessage.ts\nclass ChatBubbleMessage{constructor(){let senderId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;let senderCategory=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;let roomId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:-1;let text=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';let formattedText=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';let username=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'';let location=arguments.length>6&&arguments[6]!==undefined?arguments[6]:null;let type=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;let styleId=arguments.length>8&&arguments[8]!==undefined?arguments[8]:0;let imageUrl=arguments.length>9&&arguments[9]!==undefined?arguments[9]:null;let color=arguments.length>10&&arguments[10]!==undefined?arguments[10]:null;this.senderId=senderId;this.senderCategory=senderCategory;this.roomId=roomId;this.text=text;this.formattedText=formattedText;this.username=username;this.location=location;this.type=type;this.styleId=styleId;this.imageUrl=imageUrl;this.color=color;this.id=-1;this.width=0;this.height=0;this.elementRef=null;this.visible=false;this.skipMovement=false;this._top=0;this._left=0;this.id=++ChatBubbleMessage.BUBBLE_COUNTER;}get top(){return this._top;}set top(value){this._top=value;if(this.elementRef)this.elementRef.style.top=this._top+'px';}get left(){return this._left;}set left(value){this._left=value;if(this.elementRef)this.elementRef.style.left=this._left+'px';}}ChatBubbleMessage.BUBBLE_COUNTER=0;\n// CONCATENATED MODULE: ./src/components/room/widgets/chat/common/DoChatsOverlap.ts\nconst DoChatsOverlap=function(a,b,additionalBTop){let padding=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;return!(a.left+padding+a.width<b.left+padding||a.left+padding>b.left+padding+b.width||a.top+a.height<b.top+additionalBTop||a.top>b.top+additionalBTop+b.height);};\n// CONCATENATED MODULE: ./src/components/room/widgets/chat/ChatWidgetView.tsx\nlet TIMER_TRACKER=0;const ChatWidgetView=props=>{const[chatSettings,setChatSettings]=Object(react[\"useState\"])({mode:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_MODE_FREE_FLOW,weight:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_BUBBLE_WIDTH_NORMAL,speed:nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:nitro_renderer[\"bg\" /* RoomChatSettings */].FLOOD_FILTER_NORMAL});const[chatMessages,setChatMessages]=Object(react[\"useState\"])([]);const[timerId,setTimerId]=Object(react[\"useState\"])(TIMER_TRACKER++);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const elementRef=Object(react[\"useRef\"])();const removeHiddenChats=Object(react[\"useCallback\"])(()=>{setChatMessages(prevValue=>{if(prevValue){const newMessages=prevValue.filter(chat=>chat.top>-chat.height*2);if(newMessages.length!==prevValue.length)return newMessages;}return prevValue;});},[]);const moveAllChatsUp=Object(react[\"useCallback\"])(amount=>{setChatMessages(prevValue=>{if(prevValue){prevValue.forEach(chat=>{if(chat.skipMovement){chat.skipMovement=false;return;}chat.top-=amount;});}return prevValue;});removeHiddenChats();},[removeHiddenChats]);const checkOverlappingChats=Object(react[\"useCallback\"])((chat,moved,tempChats)=>{const totalChats=chatMessages.length;if(!totalChats)return;for(let i=totalChats-1;i>=0;i--){const collides=chatMessages[i];if(!collides||chat===collides||tempChats.indexOf(collides)>=0||collides.top-moved>=chat.top+chat.height)continue;if(DoChatsOverlap(chat,collides,-moved,4)){const amount=Math.abs(collides.top+collides.height-chat.top);tempChats.push(collides);collides.top-=amount;collides.skipMovement=true;checkOverlappingChats(collides,amount,tempChats);}}},[chatMessages]);const makeRoom=Object(react[\"useCallback\"])(chat=>{if(chatSettings.mode===nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_MODE_FREE_FLOW){chat.skipMovement=true;checkOverlappingChats(chat,0,[chat]);removeHiddenChats();}else{const lowestPoint=chat.top+chat.height;const requiredSpace=chat.height;const spaceAvailable=elementRef.current.offsetHeight-lowestPoint;const amount=requiredSpace-spaceAvailable;if(spaceAvailable<requiredSpace){chatMessages.forEach(existingChat=>{if(existingChat===chat)return;existingChat.top-=amount;});removeHiddenChats();}}},[chatSettings,chatMessages,removeHiddenChats,checkOverlappingChats]);const onRoomWidgetUpdateChatEvent=Object(react[\"useCallback\"])(event=>{const chatMessage=new ChatBubbleMessage(event.userId,event.userCategory,event.roomId,event.text,RoomChatFormatter(event.text),event.userName,new nitro_renderer[\"Xe\" /* NitroPoint */](event.userX,event.userY),event.chatType,event.styleId,event.userImage,event.userColor&&('#'+event.userColor.toString(16).padStart(6,'0')||false));setChatMessages(prevValue=>[...prevValue,chatMessage]);},[]);UseEventDispatcherHook(RoomWidgetUpdateChatEvent_RoomWidgetUpdateChatEvent.CHAT_EVENT,eventDispatcher,onRoomWidgetUpdateChatEvent);const onRoomDragEvent=Object(react[\"useCallback\"])(event=>{if(!chatMessages.length||event.roomId!==roomSession.roomId)return;const offsetX=event.offsetX;chatMessages.forEach(chat=>chat.elementRef&&(chat.left+=offsetX));},[roomSession,chatMessages]);UseRoomEngineEvent(nitro_renderer[\"mg\" /* RoomDragEvent */].ROOM_DRAG,onRoomDragEvent);const onChatClicked=Object(react[\"useCallback\"])(chat=>{widgetHandler.processWidgetMessage(new RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage(RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_INFO,chat.senderId,chat.senderCategory));widgetHandler.processWidgetMessage(new RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage(RoomWidgetChatSelectAvatarMessage_RoomWidgetChatSelectAvatarMessage.MESSAGE_SELECT_AVATAR,chat.senderId,chat.username,chat.roomId));},[widgetHandler]);const getScrollSpeed=Object(react[\"useCallback\"])(()=>{if(!chatSettings)return 6000;switch(chatSettings.speed){case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_FAST:return 3000;case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_NORMAL:return 6000;case nitro_renderer[\"bg\" /* RoomChatSettings */].CHAT_SCROLL_SPEED_SLOW:return 12000;}},[chatSettings]);const onGetGuestRoomResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.roomEnter)return;setChatSettings(parser.chat);},[]);UseMessageEventHook(nitro_renderer[\"nc\" /* GetGuestRoomResultEvent */],onGetGuestRoomResultEvent);const onRoomChatSettingsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setChatSettings(parser.chat);},[]);UseMessageEventHook(nitro_renderer[\"cg\" /* RoomChatSettingsEvent */],onRoomChatSettingsEvent);Object(react[\"useEffect\"])(()=>{const resize=event=>{if(!elementRef||!elementRef.current)return;const currentHeight=elementRef.current.offsetHeight;const newHeight=Math.round(document.body.offsetHeight*GetConfiguration('chat.viewer.height.percentage'));elementRef.current.style.height=`${newHeight}px`;setChatMessages(prevValue=>{if(prevValue){prevValue.forEach(chat=>chat.top-=currentHeight-newHeight);}return prevValue;});};window.addEventListener('resize',resize);resize(null);return()=>{window.removeEventListener('resize',resize);};},[]);const workerMessageReceived=Object(react[\"useCallback\"])(message=>{switch(message.type){case'MOVE_CHATS':moveAllChatsUp(15);return;}},[moveAllChatsUp]);Object(react[\"useEffect\"])(()=>{const workerTracker={workerMessageReceived};AddWorkerEventTracker(workerTracker);SendWorkerEvent({type:'CREATE_INTERVAL',time:getScrollSpeed(),timerId:timerId,response:{type:'MOVE_CHATS'}});return()=>{SendWorkerEvent({type:'REMOVE_INTERVAL',timerId});RemoveWorkerEventTracker(workerTracker);};},[timerId,workerMessageReceived,getScrollSpeed]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:elementRef,className:\"nitro-chat-widget\",children:chatMessages.map(chat=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatWidgetMessageView,{chat:chat,makeRoom:makeRoom,onChatClicked:onChatClicked,bubbleWidth:chatSettings.weight},chat.id))});};\n// CONCATENATED MODULE: ./src/components/room/widgets/choosers/ChooserWidgetView.tsx\nconst ChooserWidgetView=props=>{const{title=null,items=null,displayItemId=false,onCloseClick=null}=props;const[selectedItem,setSelectedItem]=Object(react[\"useState\"])(null);const[searchValue,setSearchValue]=Object(react[\"useState\"])('');const{widgetHandler=null}=useRoomContext();const filteredItems=Object(react[\"useMemo\"])(()=>{if(!items)return[];if(!searchValue||!searchValue.length)return items;const value=searchValue.toLocaleLowerCase();return items.filter(item=>item.name.toLocaleLowerCase().includes(value));},[items,searchValue]);const onItemClick=Object(react[\"useCallback\"])(item=>{setSelectedItem(item);widgetHandler.processWidgetMessage(new RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage(RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.SELECT_OBJECT,item.id,item.category));},[widgetHandler,setSelectedItem]);const rowRenderer=props=>{const item=filteredItems[props.index];return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",position:\"absolute\",className:'rounded px-1'+(selectedItem===item?' bg-muted':''),pointer:true,style:props.style,onClick:event=>onItemClick(item),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{truncate:true,children:[item.name,\" \",displayItemId&&' - '+item.id]})},props.key);};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-chooser-widget\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:title,onCloseClick:onCloseClick}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>setSearchValue(event.target.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullHeight:true,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"a\" /* AutoSizer */],{defaultWidth:0,defaultHeight:0,children:_ref=>{let{width,height}=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(es[\"d\" /* List */],{width:width,height:height,rowCount:filteredItems.length,rowHeight:20,rowRenderer:rowRenderer});}})})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/choosers/FurniChooserWidgetView.tsx\nconst FurniChooserWidgetView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[items,setItems]=Object(react[\"useState\"])(null);const[refreshTimeout,setRefreshTimeout]=Object(react[\"useState\"])(null);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const refreshChooser=Object(react[\"useCallback\"])(()=>{if(!isVisible)return;setRefreshTimeout(prevValue=>{if(prevValue)clearTimeout(prevValue);return setTimeout(()=>widgetHandler.processWidgetMessage(new RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.FURNI_CHOOSER)),100);});},[isVisible,widgetHandler]);const onRoomWidgetChooserContentEvent=Object(react[\"useCallback\"])(event=>{setItems(event.items);setIsVisible(true);},[]);UseEventDispatcherHook(RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.FURNI_CHOOSER_CONTENT,eventDispatcher,onRoomWidgetChooserContentEvent);const onRoomWidgetRoomObjectUpdateEvent=Object(react[\"useCallback\"])(event=>{if(!isVisible)return;switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED:case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:refreshChooser();return;}},[isVisible,refreshChooser]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const close=Object(react[\"useCallback\"])(()=>{setIsVisible(false);setItems(null);},[]);if(!items)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChooserWidgetView,{title:LocalizeText('widget.chooser.furni.title'),displayItemId:GetSessionDataManager().hasSecurity(nitro_renderer[\"Hh\" /* SecurityLevel */].MODERATOR),items:items,onCloseClick:close});};\n// CONCATENATED MODULE: ./src/components/room/widgets/choosers/UserChooserWidgetView.tsx\nconst UserChooserWidgetView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[items,setItems]=Object(react[\"useState\"])(null);const[refreshTimeout,setRefreshTimeout]=Object(react[\"useState\"])(null);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const refreshChooser=Object(react[\"useCallback\"])(()=>{if(!isVisible)return;setRefreshTimeout(prevValue=>{if(prevValue)clearTimeout(prevValue);return setTimeout(()=>widgetHandler.processWidgetMessage(new RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage(RoomWidgetRequestWidgetMessage_RoomWidgetRequestWidgetMessage.USER_CHOOSER)),100);});},[isVisible,widgetHandler]);const onRoomWidgetChooserContentEvent=Object(react[\"useCallback\"])(event=>{setItems(event.items);setIsVisible(true);},[]);UseEventDispatcherHook(RoomWidgetChooserContentEvent_RoomWidgetChooserContentEvent.USER_CHOOSER_CONTENT,eventDispatcher,onRoomWidgetChooserContentEvent);const onRoomWidgetRoomObjectUpdateEvent=Object(react[\"useCallback\"])(event=>{if(!isVisible)return;switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED:case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED:refreshChooser();return;}},[isVisible,refreshChooser]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const close=Object(react[\"useCallback\"])(()=>{setIsVisible(false);setItems(null);},[]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChooserWidgetView,{title:LocalizeText('widget.chooser.user.title'),displayItemId:false,items:items,onCloseClick:close});};\n// CONCATENATED MODULE: ./src/components/room/widgets/doorbell/DoorbellWidgetView.tsx\nconst DoorbellWidgetView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{users=[],answer=null}=useDoorbellWidget();Object(react[\"useEffect\"])(()=>{setIsVisible(!!users.length);},[users]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-widget-doorbell\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('navigator.doorbell.title'),onCloseClick:event=>setIsVisible(false)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{gap:1,className:\"px-1 pb-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,className:\"g-col-10\",children:LocalizeText('widgets.doorbell.info')})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",className:\"striped-children\",gap:0,children:users&&users.length>0&&users.map(userName=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{gap:1,alignItems:\"center\",className:\"text-black p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,className:\"g-col-6\",children:userName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"g-col-6\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"end\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-accept-check cursor-pointer\",onClick:()=>answer(userName,true)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-decline-x cursor-pointer\",onClick:()=>answer(userName,false)})]})})]},userName);})})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/object-location/ObjectLocationView.tsx\nconst ObjectLocationView=props=>{const{objectId=-1,category=-1,noFollow=false,position='absolute',...rest}=props;const[pos,setPos]=Object(react[\"useState\"])({x:-1,y:-1});const elementRef=Object(react[\"useRef\"])();const getObjectLocation=Object(react[\"useCallback\"])(()=>{const roomSession=GetRoomSession();const objectBounds=GetRoomObjectBounds(roomSession.roomId,objectId,category,1);return objectBounds;},[objectId,category]);const updatePosition=Object(react[\"useCallback\"])(()=>{const bounds=getObjectLocation();if(!bounds||!elementRef.current)return;setPos({x:Math.round(bounds.left+bounds.width/2-elementRef.current.offsetWidth/2),y:Math.round(bounds.top-elementRef.current.offsetHeight+10)});},[getObjectLocation]);Object(react[\"useEffect\"])(()=>{let remove=false;if(noFollow){updatePosition();}else{remove=true;GetNitroInstance().ticker.add(updatePosition);}return()=>{if(remove)GetNitroInstance().ticker.remove(updatePosition);};},[updatePosition,noFollow]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{innerRef:elementRef,position:position,visible:pos.x+(elementRef.current?elementRef.current.offsetWidth:0)>-1,className:\"object-location\",style:{left:pos.x,top:pos.y},...rest});};\n// CONCATENATED MODULE: ./src/components/room/widgets/friend-request/FriendRequestDialogView.tsx\nconst FriendRequestDialogView=props=>{const{roomIndex=-1,request=null,hideFriendRequest=null}=props;const{requestResponse=null}=useFriends();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ObjectLocationView,{objectId:roomIndex,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"nitro-friend-request-dialog p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,bold:true,variant:\"white\",className:\"w-75\",children:LocalizeText('widget.friendrequest.from',['username'],[request.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"friend-req-close\",onClick:event=>hideFriendRequest(request.requesterUserId)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,className:\"mt-2 cursor-pointer\",underline:true,onClick:event=>requestResponse(request.requesterUserId,false),children:LocalizeText('widget.friendrequest.decline')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"accept-friend-btn\",onClick:event=>requestResponse(request.requesterUserId,true),children:LocalizeText('widget.friendrequest.accept')})]})]})})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/friend-request/FriendRequestWidgetView.tsx\nconst FriendRequestWidgetView=props=>{const[displayedRequests,setDisplayedRequests]=Object(react[\"useState\"])([]);const[dismissedRequestIds,setDismissedRequestIds]=Object(react[\"useState\"])([]);const{roomSession=null,eventDispatcher=null}=useRoomContext();const{requests=[]}=useFriends();const hideFriendRequest=userId=>{setDismissedRequestIds(prevValue=>{if(prevValue.indexOf(userId)>=0)return prevValue;const newValue=[...prevValue];newValue.push(userId);return newValue;});};const onRoomWidgetUpdateRoomObjectEvent=Object(react[\"useCallback\"])(event=>{if(event.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT)return;const userData=roomSession.userDataManager.getUserDataByIndex(event.id);if(userData&&userData.type===nitro_renderer[\"Ng\" /* RoomObjectUserType */].getTypeNumber(nitro_renderer[\"Ng\" /* RoomObjectUserType */].USER)){if(event.type===RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED){const request=requests.find(request=>request.requesterUserId===userData.webID);if(!request||displayedRequests.find(request=>request.request.requesterUserId===userData.webID))return;const newValue=[...displayedRequests];newValue.push({roomIndex:userData.roomIndex,request});setDisplayedRequests(newValue);}return;}if(event.type===RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED){const index=displayedRequests.findIndex(request=>request.roomIndex===event.id);if(index===-1)return;const newValue=[...displayedRequests];newValue.splice(index,1);setDisplayedRequests(newValue);}},[roomSession,requests,displayedRequests]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED,eventDispatcher,onRoomWidgetUpdateRoomObjectEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED,eventDispatcher,onRoomWidgetUpdateRoomObjectEvent);Object(react[\"useEffect\"])(()=>{if(!requests||!requests.length)return;const newDisplayedRequests=[];for(const request of requests){const userData=roomSession.userDataManager.getUserData(request.requesterUserId);if(!userData)continue;newDisplayedRequests.push({roomIndex:userData.roomIndex,request});}setDisplayedRequests(newDisplayedRequests);},[roomSession,requests]);if(!requests.length)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:displayedRequests.map((request,index)=>{if(dismissedRequestIds.indexOf(request.request.requesterUserId)>=0)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendRequestDialogView,{roomIndex:request.roomIndex,request:request.request,hideFriendRequest:hideFriendRequest},index);})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/background-color/FurnitureBackgroundColorView.tsx\nconst FurnitureBackgroundColorView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[hue,setHue]=Object(react[\"useState\"])(0);const[saturation,setSaturation]=Object(react[\"useState\"])(0);const[lightness,setLightness]=Object(react[\"useState\"])(0);const{roomSession=null,eventDispatcher=null}=useRoomContext();const close=Object(react[\"useCallback\"])(()=>{eventDispatcher.dispatchEvent(new RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent(RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.CLEAR_PREVIEW));setObjectId(-1);},[eventDispatcher]);const canOpenBackgroundToner=Object(react[\"useCallback\"])(()=>{return roomSession.isRoomOwner||roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST||GetSessionDataManager().isModerator;},[roomSession]);const onRoomEngineObjectEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BACKGROUND_COLOR:{if(!canOpenBackgroundToner())return;const roomObject=GetRoomEngine().getRoomObject(event.roomId,event.objectId,event.category);const model=roomObject.model;setObjectId(roomObject.id);setHue(parseInt(model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_ROOM_BACKGROUND_COLOR_HUE)));setSaturation(parseInt(model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)));setLightness(parseInt(model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{if(objectId!==event.objectId)return;close();return;}}},[objectId,canOpenBackgroundToner,close]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BACKGROUND_COLOR,onRoomEngineObjectEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomEngineObjectEvent);const processAction=Object(react[\"useCallback\"])(name=>{switch(name){case'apply':SendMessageComposer(new nitro_renderer[\"h\" /* ApplyTonerComposer */](objectId,hue,saturation,lightness));break;case'toggle':roomSession.useMultistateItem(objectId);break;}},[roomSession,objectId,hue,saturation,lightness]);Object(react[\"useEffect\"])(()=>{if(objectId===-1)return;eventDispatcher.dispatchEvent(new RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent(RoomWidgetUpdateBackgroundColorPreviewEvent_RoomWidgetUpdateBackgroundColorPreviewEvent.PREVIEW,hue,saturation,lightness));},[eventDispatcher,objectId,hue,saturation,lightness]);if(objectId===-1)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{theme:\"primary\",className:\"nitro-room-widget-toner\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('widget.backgroundcolor.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"auto\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.hue')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'nitro-slider',min:0,max:360,value:hue,onChange:event=>setHue(event),thumbClassName:'thumb degree',renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:state.valueNow})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.saturation')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'nitro-slider',min:0,max:255,value:saturation,onChange:event=>setSaturation(event),thumbClassName:'thumb percent',renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:state.valueNow})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('widget.backgroundcolor.lightness')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'nitro-slider',min:0,max:255,value:lightness,onChange:event=>setLightness(event),thumbClassName:'thumb percent',renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:state.valueNow})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"primary\",onClick:event=>processAction('toggle'),children:LocalizeText('widget.backgroundcolor.button.on')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"primary\",onClick:event=>processAction('apply'),children:LocalizeText('widget.backgroundcolor.button.apply')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/trophy/FurnitureTrophyData.ts\nclass FurnitureTrophyData{constructor(objectId,category,color,ownerName,date,message,customTitle){this.objectId=objectId;this.category=category;this.color=color;this.ownerName=ownerName;this.date=date;this.message=message;this.customTitle=customTitle;}}\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/badge-display/FurnitureBadgeDisplayView.tsx\nconst FurnitureBadgeDisplayView=props=>{const[trophyData,setTrophyData]=Object(react[\"useState\"])(null);const{widgetHandler=null}=useRoomContext();const onNitroEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BADGE_DISPLAY_ENGRAVING:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;const stringStuff=new nitro_renderer[\"Qh\" /* StringDataType */]();stringStuff.initializeFromRoomObjectModel(roomObject.model);const badgeName=LocalizeBadgeName(stringStuff.getValue(1));const badgeDesc=LocalizeBadgeDescription(stringStuff.getValue(1));const date=stringStuff.getValue(2);const senderName=stringStuff.getValue(3);setTrophyData(new FurnitureTrophyData(widgetEvent.objectId,widgetEvent.category,'1',senderName,date,badgeDesc,badgeName));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{const widgetEvent=event;setTrophyData(prevState=>{if(!prevState||widgetEvent.id!==prevState.objectId||widgetEvent.category!==prevState.category)return prevState;return null;});return;}}},[]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BADGE_DISPLAY_ENGRAVING,onNitroEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,widgetHandler.eventDispatcher,onNitroEvent);const processAction=Object(react[\"useCallback\"])(function(type){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':setTrophyData(null);return;}},[]);if(!trophyData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutTrophyView,{color:trophyData.color,message:trophyData.message,date:trophyData.date,senderName:trophyData.ownerName,customTitle:trophyData.customTitle,onCloseClick:()=>processAction('close')});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/context-menu/EffectBoxConfirmView.tsx\nconst EffectBoxConfirmView=props=>{const{objectId=-1,close=null}=props;const{roomSession=null}=useRoomContext();const useProduct=()=>{roomSession.useMultistateItem(objectId);close();};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-use-product-confirmation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('effectbox.header.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('effectbox.header.description')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:close,children:LocalizeText('generic.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:useProduct,children:LocalizeText('generic.ok')})]})]})})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/context-menu/MonsterPlantSeedConfirmView.tsx\nconst MODE_DEFAULT=-1;const MODE_MONSTERPLANT_SEED=0;const MonsterPlantSeedConfirmView=props=>{const{objectId=-1,close=null}=props;const[furniData,setFurniData]=Object(react[\"useState\"])(null);const[mode,setMode]=Object(react[\"useState\"])(MODE_DEFAULT);const{roomSession=null,widgetHandler=null}=useRoomContext();const useProduct=()=>{widgetHandler.processWidgetMessage(new RoomWidgetUseProductMessage_RoomWidgetUseProductMessage(RoomWidgetUseProductMessage_RoomWidgetUseProductMessage.MONSTERPLANT_SEED,objectId));close();};Object(react[\"useEffect\"])(()=>{if(!roomSession||objectId===-1)return;const furniData=GetFurnitureDataForRoomObject(roomSession.roomId,objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(!furniData)return;setFurniData(furniData);let mode=MODE_DEFAULT;switch(furniData.specialType){case FurniCategory.MONSTERPLANT_SEED:mode=MODE_MONSTERPLANT_SEED;break;}if(mode===MODE_DEFAULT){close();return;}setMode(mode);},[roomSession,objectId,close]);if(mode===MODE_DEFAULT)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-use-product-confirmation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('useproduct.widget.title.plant_seed',['name'],[furniData.name]),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"product-preview\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"monsterplant-image\"})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.plant_seed',['productName'],[furniData.name])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.plant_seed')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:close,children:LocalizeText('useproduct.widget.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:useProduct,children:LocalizeText('widget.monsterplant_seed.button.use')})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/context-menu/PurchasableClothingConfirmView.tsx\nconst PurchasableClothingConfirmView_MODE_DEFAULT=-1;const MODE_PURCHASABLE_CLOTHING=0;const PurchasableClothingConfirmView=props=>{const{objectId=-1,close=null}=props;const[mode,setMode]=Object(react[\"useState\"])(PurchasableClothingConfirmView_MODE_DEFAULT);const[gender,setGender]=Object(react[\"useState\"])(FigureData_FigureData.MALE);const[newFigure,setNewFigure]=Object(react[\"useState\"])(null);const{roomSession=null}=useRoomContext();const useProduct=()=>{GetConnection().send(new nitro_renderer[\"If\" /* RedeemItemClothingComposer */](objectId));GetConnection().send(new nitro_renderer[\"Di\" /* UserFigureComposer */](gender,newFigure));close();};Object(react[\"useEffect\"])(()=>{let mode=PurchasableClothingConfirmView_MODE_DEFAULT;const figure=GetSessionDataManager().figure;const gender=GetSessionDataManager().gender;const validSets=[];if(roomSession&&objectId>=0){const furniData=GetFurnitureDataForRoomObject(roomSession.roomId,objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(furniData){switch(furniData.specialType){case FurniCategory.FIGURE_PURCHASABLE_SET:mode=MODE_PURCHASABLE_CLOTHING;const setIds=furniData.customParams.split(',').map(part=>parseInt(part));for(const setId of setIds){if(GetAvatarRenderManager().isValidFigureSetForGender(setId,gender))validSets.push(setId);}break;}}}if(mode===PurchasableClothingConfirmView_MODE_DEFAULT){close();return;}setGender(gender);setNewFigure(GetAvatarRenderManager().getFigureStringWithFigureIds(figure,gender,validSets));// if owns clothing, change to it\nsetMode(mode);},[roomSession,objectId,close]);if(mode===PurchasableClothingConfirmView_MODE_DEFAULT)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-use-product-confirmation\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('useproduct.widget.title.bind_clothing'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"mannequin-preview\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:newFigure,direction:2})})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.text.bind_clothing')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('useproduct.widget.info.bind_clothing')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:close,children:LocalizeText('useproduct.widget.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:useProduct,children:LocalizeText('useproduct.widget.bind_clothing')})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/context-menu/FurnitureContextMenuView.tsx\nconst MONSTERPLANT_SEED_CONFIRMATION='MONSTERPLANT_SEED_CONFIRMATION';const PURCHASABLE_CLOTHING_CONFIRMATION='PURCHASABLE_CLOTHING_CONFIRMATION';const GROUP_FURNITURE='GROUP_FURNITURE';const EFFECTBOX_OPEN='EFFECTBOX_OPEN';const FurnitureContextMenuView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[mode,setMode]=Object(react[\"useState\"])(null);const[confirmMode,setConfirmMode]=Object(react[\"useState\"])(null);const[confirmingObjectId,setConfirmingObjectId]=Object(react[\"useState\"])(-1);const[groupData,setGroupData]=Object(react[\"useState\"])(null);const[isGroupMember,setIsGroupMember]=Object(react[\"useState\"])(false);const{roomSession=null,widgetHandler=null}=useRoomContext();const close=Object(react[\"useCallback\"])(()=>{setObjectId(-1);setGroupData(null);setIsGroupMember(false);setMode(null);},[]);const closeConfirm=()=>{setConfirmMode(null);setConfirmingObjectId(-1);};const onRoomEngineTriggerWidgetEvent=Object(react[\"useCallback\"])(event=>{const object=GetRoomEngine().getRoomObject(roomSession.roomId,event.objectId,event.category);if(!object)return;switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(MONSTERPLANT_SEED_CONFIRMATION);close();return;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_EFFECTBOX_OPEN_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(EFFECTBOX_OPEN);close();return;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!IsOwnerOfFurniture(object))return;setConfirmingObjectId(object.id);setConfirmMode(PURCHASABLE_CLOTHING_CONFIRMATION);close();return;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_FURNI_CONTEXT_MENU:setObjectId(object.id);switch(event.contextMenu){case nitro_renderer[\"nb\" /* ContextMenuEnum */].FRIEND_FURNITURE:setMode(nitro_renderer[\"nb\" /* ContextMenuEnum */].FRIEND_FURNITURE);return;case nitro_renderer[\"nb\" /* ContextMenuEnum */].MONSTERPLANT_SEED:if(IsOwnerOfFurniture(object))setMode(nitro_renderer[\"nb\" /* ContextMenuEnum */].MONSTERPLANT_SEED);return;case nitro_renderer[\"nb\" /* ContextMenuEnum */].MYSTERY_BOX:return;case nitro_renderer[\"nb\" /* ContextMenuEnum */].RANDOM_TELEPORT:setMode(nitro_renderer[\"nb\" /* ContextMenuEnum */].RANDOM_TELEPORT);return;case nitro_renderer[\"nb\" /* ContextMenuEnum */].PURCHASABLE_CLOTHING:if(IsOwnerOfFurniture(object))setMode(nitro_renderer[\"nb\" /* ContextMenuEnum */].PURCHASABLE_CLOTHING);return;}return;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_FURNI_CONTEXT_MENU:if(object.id===objectId)close();return;}},[roomSession,objectId,close]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_FURNI_CONTEXT_MENU,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_FURNI_CONTEXT_MENU,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_EFFECTBOX_OPEN_DIALOG,onRoomEngineTriggerWidgetEvent);const onGroupFurniContextMenuInfoMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setObjectId(parser.objectId);setGroupData(parser);setIsGroupMember(parser.userIsMember);setMode(GROUP_FURNITURE);},[]);UseMessageEventHook(nitro_renderer[\"Sc\" /* GroupFurniContextMenuInfoMessageEvent */],onGroupFurniContextMenuInfoMessageEvent);const processAction=name=>{if(name){switch(name){case'use_friend_furni':roomSession.useMultistateItem(objectId);break;case'use_monsterplant_seed':setConfirmMode(MONSTERPLANT_SEED_CONFIRMATION);setConfirmingObjectId(objectId);break;case'use_random_teleport':widgetHandler.processWidgetMessage(new RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage(RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.USE,objectId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR));break;case'use_purchaseable_clothing':setConfirmMode(PURCHASABLE_CLOTHING_CONFIRMATION);setConfirmingObjectId(objectId);break;case'join_group':TryJoinGroup(groupData.guildId);setIsGroupMember(true);return;case'go_to_group_homeroom':if(groupData)TryVisitRoom(groupData.guildHomeRoomId);break;}}close();};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[confirmMode===MONSTERPLANT_SEED_CONFIRMATION&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MonsterPlantSeedConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),confirmMode===PURCHASABLE_CLOTHING_CONFIRMATION&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PurchasableClothingConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),confirmMode===EFFECTBOX_OPEN&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EffectBoxConfirmView,{objectId:confirmingObjectId,close:closeConfirm}),objectId>=0&&mode&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ContextMenuView,{objectId:objectId,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR,close:close,fades:true,collapsable:true,children:[mode===nitro_renderer[\"nb\" /* ContextMenuEnum */].FRIEND_FURNITURE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:LocalizeText('friendfurni.context.title')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_friend_furni'),children:LocalizeText('friendfurni.context.use')})]}),mode===nitro_renderer[\"nb\" /* ContextMenuEnum */].MONSTERPLANT_SEED&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:LocalizeText('furni.mnstr_seed.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_monsterplant_seed'),children:LocalizeText('widget.monsterplant_seed.button.use')})]}),mode===nitro_renderer[\"nb\" /* ContextMenuEnum */].RANDOM_TELEPORT&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:LocalizeText('furni.random_teleport.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_random_teleport'),children:LocalizeText('widget.random_teleport.button.use')})]}),mode===nitro_renderer[\"nb\" /* ContextMenuEnum */].PURCHASABLE_CLOTHING&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{children:LocalizeText('furni.generic_usable.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('use_purchaseable_clothing'),children:LocalizeText('widget.generic_usable.button.use')})]}),mode===GROUP_FURNITURE&&groupData&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuHeaderView,{className:\"cursor-pointer text-truncate\",onClick:()=>GetGroupInformation(groupData.guildId),children:groupData.guildName}),!isGroupMember&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('join_group'),children:LocalizeText('widget.furniture.button.join.group')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('go_to_group_homeroom'),children:LocalizeText('widget.furniture.button.go.to.group.home.room')}),groupData.guildHasReadableForum&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ContextMenuListItemView,{onClick:event=>processAction('open_forum'),children:LocalizeText('widget.furniture.button.open_group_forum')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/custom-stack-height/FurnitureCustomStackHeightView.tsx\nconst MAX_HEIGHT=40;const FurnitureCustomStackHeightView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[height,setHeight]=Object(react[\"useState\"])(0);const[pendingHeight,setPendingHeight]=Object(react[\"useState\"])(-1);const{eventDispatcher=null}=useRoomContext();const close=()=>{setObjectId(-1);setHeight(0);};const updateHeight=Object(react[\"useCallback\"])(function(height){let fromServer=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!height)height=0;height=Math.abs(height);if(!fromServer)height>MAX_HEIGHT&&(height=MAX_HEIGHT);setHeight(parseFloat(height.toFixed(2)));if(!fromServer)setPendingHeight(height*100);},[]);const onRoomWidgetUpdateCustomStackHeightEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT:{setObjectId(event.objectId);updateHeight(event.height,true);}}},[updateHeight]);UseEventDispatcherHook(RoomWidgetUpdateCustomStackHeightEvent_RoomWidgetUpdateCustomStackHeightEvent.UPDATE_CUSTOM_STACK_HEIGHT,eventDispatcher,onRoomWidgetUpdateCustomStackHeightEvent);const onFurnitureStackHeightEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(objectId!==parser.furniId)return;updateHeight(parser.height,true);},[objectId,updateHeight]);UseMessageEventHook(nitro_renderer[\"Zb\" /* FurnitureStackHeightEvent */],onFurnitureStackHeightEvent);const sendUpdate=Object(react[\"useCallback\"])(height=>{SendMessageComposer(new nitro_renderer[\"Yb\" /* FurnitureStackHeightComposer */](objectId,~~height));},[objectId]);Object(react[\"useEffect\"])(()=>{if(objectId===-1||pendingHeight===-1)return;const timeout=setTimeout(()=>sendUpdate(~~pendingHeight),10);return()=>clearTimeout(timeout);},[objectId,pendingHeight,sendUpdate]);if(objectId===-1)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-widget-custom-stack-height\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('widget.custom.stack.height.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('widget.custom.stack.height.text')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:\"nitro-slider\",min:0,max:MAX_HEIGHT,step:0.01,value:height,onChange:event=>updateHeight(event),renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:state.valueNow})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",min:0,max:MAX_HEIGHT,value:height,onChange:event=>updateHeight(parseFloat(event.target.value))})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>sendUpdate(-100),children:LocalizeText('furniture.above.stack')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>sendUpdate(0),children:LocalizeText('furniture.floor.level')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/dimmer/DimmerFurnitureWidgetPresetItem.ts\nclass DimmerFurnitureWidgetPresetItem{constructor(){let id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let color=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let light=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;this.id=id;this.type=type;this.color=color;this.light=light;}}\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/dimmer/FurnitureDimmerView.tsx\nconst AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0];const HTML_COLORS=['#74F5F5','#0053F7','#E759DE','#EA4532','#F2F851','#82F349','#000000'];const MIN_BRIGHTNESS=76;const MAX_BRIGHTNESS=255;const FurnitureDimmerView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[presets,setPresets]=Object(react[\"useState\"])([]);const[selectedPresetId,setSelectedPresetId]=Object(react[\"useState\"])(0);const[dimmerState,setDimmerState]=Object(react[\"useState\"])(0);const[lastDimmerState,setLastDimmerState]=Object(react[\"useState\"])(0);const[effectId,setEffectId]=Object(react[\"useState\"])(0);const[color,setColor]=Object(react[\"useState\"])(0xFFFFFF);const[brightness,setBrightness]=Object(react[\"useState\"])(0xFF);const[selectedEffectId,setSelectedEffectId]=Object(react[\"useState\"])(0);const[selectedColor,setSelectedColor]=Object(react[\"useState\"])(0);const[selectedBrightness,setSelectedBrightness]=Object(react[\"useState\"])(0);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const onNitroEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.PRESETS:{const widgetEvent=event;const presets=[];for(const preset of widgetEvent.presets)presets.push(new DimmerFurnitureWidgetPresetItem(preset.id,preset.type,preset.color,preset.brightness));setPresets(presets);setSelectedPresetId(widgetEvent.selectedPresetId);setIsVisible(true);return;}case RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.HIDE:{setIsVisible(false);return;}case RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent.DIMMER_STATE:{const widgetEvent=event;setLastDimmerState(dimmerState);setDimmerState(widgetEvent.state);setSelectedPresetId(widgetEvent.presetId);setEffectId(widgetEvent.effectId);setSelectedEffectId(widgetEvent.effectId);setColor(widgetEvent.color);setSelectedColor(widgetEvent.color);setBrightness(widgetEvent.brightness);setSelectedBrightness(widgetEvent.brightness);return;}}},[dimmerState]);UseEventDispatcherHook(RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.PRESETS,eventDispatcher,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateDimmerEvent_RoomWidgetUpdateDimmerEvent.HIDE,eventDispatcher,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateDimmerStateEvent_RoomWidgetUpdateDimmerStateEvent.DIMMER_STATE,eventDispatcher,onNitroEvent);const selectPresetId=Object(react[\"useCallback\"])(id=>{const preset=presets[id-1];if(!preset)return;setSelectedPresetId(preset.id);setSelectedEffectId(preset.type);setSelectedColor(preset.color);setSelectedBrightness(preset.light);},[presets]);const close=Object(react[\"useCallback\"])(()=>{widgetHandler.processWidgetMessage(new RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage(color,brightness,effectId===2));setIsVisible(false);},[widgetHandler,color,brightness,effectId]);const toggleState=Object(react[\"useCallback\"])(()=>{widgetHandler.processWidgetMessage(new RoomWidgetDimmerChangeStateMessage_RoomWidgetDimmerChangeStateMessage());},[widgetHandler]);const applyChanges=Object(react[\"useCallback\"])(()=>{if(dimmerState===0)return;const selectedPresetIndex=selectedPresetId-1;if(selectedPresetId<1||selectedPresetId>presets.length)return;const preset=presets[selectedPresetIndex];if(!preset||selectedEffectId===preset.type&&selectedColor===preset.color&&selectedBrightness===preset.light)return;setPresets(prevValue=>{const newValue=[...prevValue];newValue[selectedPresetIndex]=new DimmerFurnitureWidgetPresetItem(preset.id,selectedEffectId,selectedColor,selectedBrightness);return newValue;});widgetHandler.processWidgetMessage(new RoomWidgetDimmerSavePresetMessage_RoomWidgetDimmerSavePresetMessage(preset.id,selectedEffectId,selectedColor,selectedBrightness,true));},[widgetHandler,dimmerState,selectedPresetId,presets,selectedEffectId,selectedColor,selectedBrightness]);const scaledBrightness=Object(react[\"useCallback\"])(value=>{return~~((value-MIN_BRIGHTNESS)*(100-0)/(MAX_BRIGHTNESS-MIN_BRIGHTNESS)+0);},[]);const isFreeColorMode=Object(react[\"useMemo\"])(()=>GetConfiguration('widget.dimmer.colorwheel',false),[]);Object(react[\"useEffect\"])(()=>{if(dimmerState===0&&lastDimmerState===0)return;widgetHandler.processWidgetMessage(new RoomWidgetDimmerPreviewMessage_RoomWidgetDimmerPreviewMessage(selectedColor,selectedBrightness,selectedEffectId===2));},[widgetHandler,dimmerState,lastDimmerState,selectedColor,selectedBrightness,selectedEffectId]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-room-widget-dimmer\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('widget.dimmer.title'),onCloseClick:close}),dimmerState===1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsView,{children:presets.map(preset=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardTabsItemView,{isActive:selectedPresetId===preset.id,onClick:event=>selectPresetId(preset.id),children:LocalizeText(`widget.dimmer.tab.${preset.id}`)},preset.id))}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[dimmerState===0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"dimmer-banner\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"bg-muted rounded p-1\",children:LocalizeText('widget.dimmer.info.off')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:toggleState,children:LocalizeText('widget.dimmer.button.on')})]}),dimmerState===1&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText('widget.backgroundcolor.hue')}),isFreeColorMode&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"color\",className:\"form-control\",value:ColorUtils.makeColorNumberHex(selectedColor),onChange:event=>setSelectedColor(ColorUtils.convertFromHex(event.target.value))}),!isFreeColorMode&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{gap:1,columnCount:7,children:AVAILABLE_COLORS.map((color,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,pointer:true,className:'color-swatch rounded'+classnames_default()({' active':color===selectedColor}),onClick:()=>setSelectedColor(color),style:{backgroundColor:HTML_COLORS[index]}},index);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText('widget.backgroundcolor.lightness')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:\"nitro-slider\",min:MIN_BRIGHTNESS,max:MAX_BRIGHTNESS,value:selectedBrightness,onChange:value=>setSelectedBrightness(value),thumbClassName:'thumb percent',renderThumb:(props,state)=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{...props,children:scaledBrightness(state.valueNow)})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:selectedEffectId===2,onChange:event=>setSelectedEffectId(event.target.checked?2:1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('widget.dimmer.type.checkbox')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"danger\",onClick:toggleState,children:LocalizeText('widget.dimmer.button.off')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:applyChanges,children:LocalizeText('widget.dimmer.button.apply')})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/exchange-credit/FurnitureExchangeCreditView.tsx\nconst FurnitureExchangeCreditView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[value,setValue]=Object(react[\"useState\"])(0);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const onRoomWidgetUpdateCreditFurniEvent=Object(react[\"useCallback\"])(event=>{setObjectId(event.objectId);setValue(event.value);},[]);UseEventDispatcherHook(RoomWidgetUpdateCreditFurniEvent_RoomWidgetUpdateCreditFurniEvent.CREDIT_FURNI_UPDATE,eventDispatcher,onRoomWidgetUpdateCreditFurniEvent);const close=()=>{setObjectId(-1);setValue(0);};const redeem=()=>{widgetHandler.processWidgetMessage(new RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage(RoomWidgetCreditFurniRedeemMessage_RoomWidgetCreditFurniRedeemMessage.REDEEM,objectId));close();};if(objectId===-1)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-widget-exchange-credit\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('catalog.redeem.dialog.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{overflow:\"hidden\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"exchange-image\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,justifyContent:\"between\",overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,overflow:\"auto\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fontWeight:\"bold\",children:LocalizeText('creditfurni.description',['credits'],[value.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('creditfurni.prompt')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:redeem,children:LocalizeText('catalog.redeem.dialog.button.exchange')})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/external-image/FurnitureExternalImageView.tsx\nconst FurnitureExternalImageView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[photoData,setPhotoData]=Object(react[\"useState\"])(null);const{eventDispatcher=null}=useRoomContext();const close=()=>{setObjectId(-1);setPhotoData(null);};const onRoomWidgetUpdateExternalImageEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent.UPDATE_EXTERNAL_IMAGE:setObjectId(event.objectId);setPhotoData(event.photoData);return;}},[]);UseEventDispatcherHook(RoomWidgetUpdateExternalImageEvent_RoomWidgetUpdateExternalImageEvent.UPDATE_EXTERNAL_IMAGE,eventDispatcher,onRoomWidgetUpdateExternalImageEvent);if(objectId===-1||!photoData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-external-image-widget\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'',onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"picture-preview border border-black\",style:photoData.w?{backgroundImage:'url('+photoData.w+')'}:{},children:!photoData.w&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:LocalizeText('camera.loading')})}),photoData.m&&photoData.m.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,children:photoData.m}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:photoData.n||''}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:new Date(photoData.t*1000).toLocaleDateString()})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/friend-furni/FriendFurniLockData.ts\nclass FurnitureEngravingLockData{constructor(objectId){let category=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;let usernames=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];let figures=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];let date=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;this.objectId=objectId;this.category=category;this.type=type;this.usernames=usernames;this.figures=figures;this.date=date;}}\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/friend-furni/FurnitureFriendFurniView.tsx\nconst FurnitureFriendFurniView=props=>{const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const[engravingLockData,setEngravingLockData]=Object(react[\"useState\"])(null);const[engravingStage,setEngravingStage]=Object(react[\"useState\"])(0);const onNitroEvent=event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_FRIEND_FURNITURE_ENGRAVING:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;const data=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);const type=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_FRIENDFURNI_ENGRAVING);if(data[0]==='1'){if(data.length!==6)return;setEngravingLockData(new FurnitureEngravingLockData(widgetEvent.objectId,widgetEvent.category,type,[data[1],data[2]],[data[3],data[4]],data[5]));setEngravingStage(0);}return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{const widgetEvent=event;setEngravingLockData(prevState=>{if(!prevState||widgetEvent.id!==prevState.objectId||widgetEvent.category!==prevState.category)return prevState;return null;});return;}}};UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_FRIEND_FURNITURE_ENGRAVING,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onNitroEvent);const onLoveLockFurniStartEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setEngravingLockData(new FurnitureEngravingLockData(parser.furniId));setEngravingStage(parser.start?1:2);},[]);UseMessageEventHook(nitro_renderer[\"ae\" /* LoveLockFurniStartEvent */],onLoveLockFurniStartEvent);const processAction=Object(react[\"useCallback\"])(function(type){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close_view':setEngravingLockData(null);return;case'accept_request':GetRoomSession().connection.send(new nitro_renderer[\"Gb\" /* FriendFurniConfirmLockMessageComposer */](engravingLockData.objectId,true));processAction('close_request');return;case'reject_request':GetRoomSession().connection.send(new nitro_renderer[\"Gb\" /* FriendFurniConfirmLockMessageComposer */](engravingLockData.objectId,false));processAction('close_request');return;case'close_request':setEngravingStage(0);setEngravingLockData(null);return;}},[engravingLockData]);const onLoveLockDoneEvent=Object(react[\"useCallback\"])(event=>{processAction('close_request');},[processAction]);UseMessageEventHook(nitro_renderer[\"Yd\" /* LoveLockFurniFinishedEvent */],onLoveLockDoneEvent);UseMessageEventHook(nitro_renderer[\"Zd\" /* LoveLockFurniFriendConfirmedEvent */],onLoveLockDoneEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[engravingStage>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-engraving-lock\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('friend.furniture.confirm.lock.caption'),onCloseClick:event=>processAction('close_request')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h5\",{className:\"text-black text-center fw-bold mt-2 mb-2\",children:LocalizeText('friend.furniture.confirm.lock.subtitle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex justify-content-center mb-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'engraving-lock-stage-'+engravingStage})}),engravingStage===2&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-small text-black text-center mb-2\",children:LocalizeText('friend.furniture.confirm.lock.other.locked')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-primary w-100 me-2\",onClick:event=>processAction('reject_request'),children:LocalizeText('friend.furniture.confirm.lock.button.cancel')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"btn btn-success w-100\",onClick:event=>processAction('accept_request'),children:LocalizeText('friend.furniture.confirm.lock.button.confirm')})]})]})]}),engravingLockData&&engravingLockData.usernames.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{handleSelector:\".nitro-engraving-lock-view\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:'nitro-engraving-lock-view engraving-lock-'+engravingLockData.type,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"engraving-lock-close\",onClick:event=>processAction('close_view')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex justify-content-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"engraving-lock-avatar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:engravingLockData.figures[0],direction:2})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"engraving-lock-avatar\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:engravingLockData.figures[1],direction:4})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"text-center mt-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[engravingLockData.type===0&&LocalizeText('lovelock.engraving.caption'),engravingLockData.type===3&&LocalizeText('wildwest.engraving.caption')]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:engravingLockData.date}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex justify-content-center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"me-4\",children:engravingLockData.usernames[0]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:engravingLockData.usernames[1]})]})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/gift-opening/FurnitureGiftOpeningView.tsx\nconst FLOOR='floor';const WALLPAPER='wallpaper';const LANDSCAPE='landscape';const ACTION_GIVE_GIFT=0;const ACTION_OPEN=1;const ACTION_PLACE=2;const ACTION_INVENTORY=3;const FurnitureGiftOpeningView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[classId,setClassId]=Object(react[\"useState\"])(-1);const[itemType,setItemType]=Object(react[\"useState\"])(null);const[text,setText]=Object(react[\"useState\"])(null);const[isOwnerOfFurniture,setIsOwnerOfFurniture]=Object(react[\"useState\"])(false);const[senderName,setSenderName]=Object(react[\"useState\"])(null);const[senderFigure,setSenderFigure]=Object(react[\"useState\"])(null);const[placedItemId,setPlacedItemId]=Object(react[\"useState\"])(-1);const[placedItemType,setPlacedItemType]=Object(react[\"useState\"])(null);const[placedInRoom,setPlacedInRoom]=Object(react[\"useState\"])(false);const[imageUrl,setImageUrl]=Object(react[\"useState\"])(null);const[openRequested,setOpenRequested]=Object(react[\"useState\"])(false);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const clearGift=Object(react[\"useCallback\"])(()=>{if(!openRequested)setObjectId(-1);setText(null);setIsOwnerOfFurniture(false);},[openRequested]);const getGiftImageUrl=Object(react[\"useCallback\"])(name=>{return'';},[]);const onRoomWidgetUpdatePresentDataEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.PACKAGEINFO:{setOpenRequested(false);setObjectId(event.objectId);setText(event.giftMessage);setIsOwnerOfFurniture(event.isController);setSenderName(event.purchaserName);setSenderFigure(event.purchaserFigure);setImageUrl(event.imageUrl);return;}case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_FLOOR:case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_LANDSCAPE:case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_WALLPAPER:{let imageType=null;if(event.type===RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_FLOOR)imageType='packagecard_icon_floor';else if(event.type===RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_LANDSCAPE)imageType='packagecard_icon_landscape';else if(event.type===RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_WALLPAPER)imageType='packagecard_icon_wallpaper';setObjectId(event.objectId);setClassId(event.classId);setItemType(event.itemType);setText(event.giftMessage);setIsOwnerOfFurniture(event.isController);setPlacedItemId(event.placedItemId);setPlacedItemType(event.placedItemType);setPlacedInRoom(event.placedInRoom);setImageUrl(getGiftImageUrl(imageType));return;}case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_CLUB:{setObjectId(event.objectId);setClassId(event.classId);setItemType(event.itemType);setText(event.giftMessage);setIsOwnerOfFurniture(event.isController);setImageUrl(getGiftImageUrl('packagecard_icon_hc'));return;}case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS:{if(!openRequested)return;setObjectId(event.objectId);setClassId(event.classId);setItemType(event.itemType);setText(event.giftMessage);setIsOwnerOfFurniture(event.isController);setPlacedItemId(event.placedItemId);setPlacedItemType(event.placedItemType);setPlacedInRoom(event.placedInRoom);setImageUrl(event.imageUrl);return;}case RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_IMAGE:{if(!openRequested)return;setImageUrl(event.imageUrl);}}},[openRequested,getGiftImageUrl]);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.PACKAGEINFO,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_FLOOR,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_LANDSCAPE,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_WALLPAPER,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_CLUB,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);UseEventDispatcherHook(RoomWidgetUpdatePresentDataEvent_RoomWidgetUpdatePresentDataEvent.CONTENTS_IMAGE,eventDispatcher,onRoomWidgetUpdatePresentDataEvent);const onRoomWidgetRoomObjectUpdateEvent=Object(react[\"useCallback\"])(event=>{if(event.id===objectId)clearGift();if(event.id===placedItemId){if(placedInRoom)setPlacedInRoom(false);}},[objectId,placedItemId,placedInRoom,clearGift]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const close=Object(react[\"useCallback\"])(()=>{setObjectId(-1);setOpenRequested(false);setPlacedItemId(-1);setPlacedInRoom(false);setText(null);setIsOwnerOfFurniture(false);},[]);const isSpaces=Object(react[\"useMemo\"])(()=>{if(itemType!==ProductTypeEnum.WALL)return false;const furniData=GetSessionDataManager().getWallItemData(classId);if(!furniData)return false;const className=furniData.className;return className===FLOOR||className===LANDSCAPE||className===WALLPAPER;},[classId,itemType]);const productName=Object(react[\"useMemo\"])(()=>{if(objectId===-1)return'';if(isSpaces)return'widget.furni.present.spaces.message_opened';return'widget.furni.present.message_opened';},[objectId,isSpaces]);const handleAction=Object(react[\"useCallback\"])(action=>{switch(action){case ACTION_GIVE_GIFT:CreateLinkEvent('catalog/open');return;case ACTION_OPEN:setOpenRequested(true);widgetHandler.processWidgetMessage(new RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage(RoomWidgetPresentOpenMessage_RoomWidgetPresentOpenMessage.OPEN_PRESENT,objectId));return;case ACTION_PLACE:return;case ACTION_INVENTORY:if(placedItemId>0&&placedInRoom){if(placedItemType===ProductTypeEnum.PET){roomSession.pickupPet(placedItemId);}else{const roomObject=GetRoomEngine().getRoomObject(roomSession.roomId,placedItemId,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(roomObject)GetRoomEngine().processRoomObjectOperation(roomObject.id,nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_PICKUP);}}close();return;}},[roomSession,widgetHandler,objectId,placedInRoom,placedItemId,placedItemType,close]);if(objectId===-1)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-gift-opening\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText(senderName?'widget.furni.present.window.title_from':'widget.furni.present.window.title',['name'],[senderName]),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{center:true,children:[placedItemId===-1&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutGiftTagView,{userName:senderName,figure:senderFigure,message:text})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[senderName&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>handleAction(ACTION_GIVE_GIFT),children:LocalizeText('widget.furni.present.give_gift',['name'],[senderName])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>handleAction(ACTION_OPEN),children:LocalizeText('widget.furni.present.open_gift')})]})]}),placedItemId>-1&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,overflow:\"auto\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:imageUrl,className:\"no-select\",alt:\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,children:LocalizeText(productName,['product'],[text])})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>handleAction(ACTION_INVENTORY),children:LocalizeText('widget.furni.present.put_in_inventory')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,variant:\"success\",onClick:event=>handleAction(ACTION_PLACE),children:LocalizeText(placedInRoom?'widget.furni.present.keep_in_room':'widget.furni.present.place_in_room')})]}),senderName&&senderName.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{fullWidth:true,onClick:event=>handleAction(ACTION_GIVE_GIFT),children:LocalizeText('widget.furni.present.give_gift',['name'],[senderName])})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/high-score/FurnitureHighScoreView.tsx\nconst SCORE_TYPES=['perteam','mostwins','classic'];const CLEAR_TYPES=['alltime','daily','weekly','monthly'];const FurnitureHighScoreView=props=>{const[stuffDatas,setStuffDatas]=Object(react[\"useState\"])(new Map());const{roomSession=null}=useRoomContext();const onRoomEngineTriggerWidgetEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIGH_SCORE_DISPLAY:{const object=GetRoomEngine().getRoomObject(roomSession.roomId,event.objectId,event.category);if(!object)return;const formatKey=object.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA_FORMAT);const stuffData=nitro_renderer[\"gf\" /* ObjectDataFactory */].getData(formatKey);stuffData.initializeFromRoomObjectModel(object.model);setStuffDatas(prevValue=>{const newValue=new Map(prevValue);newValue.set(object.id,stuffData);return newValue;});return;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIDE_HIGH_SCORE_DISPLAY:if(event.roomId!==roomSession.roomId)return;setStuffDatas(prevValue=>{const newValue=new Map(prevValue);newValue.delete(event.objectId);return newValue;});return;}},[roomSession]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIGH_SCORE_DISPLAY,onRoomEngineTriggerWidgetEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIDE_HIGH_SCORE_DISPLAY,onRoomEngineTriggerWidgetEvent);if(!stuffDatas.size)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:Array.from(stuffDatas.entries()).map((_ref,index)=>{let[objectId,stuffData]=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ObjectLocationView,{objectId:objectId,category:nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"nitro-widget-high-score\",gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"nitro-widget-high-score-header\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,bold:true,children:LocalizeText('high.score.display.caption',['scoretype','cleartype'],[LocalizeText(`high.score.display.scoretype.${SCORE_TYPES[stuffData.scoreType]}`),LocalizeText(`high.score.display.cleartype.${CLEAR_TYPES[stuffData.clearType]}`)])})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"hidden\",gap:1,className:\"h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",className:\"score-board-header mt-1 p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,variant:\"black\",className:\"col-8\",children:LocalizeText('high.score.display.users.header')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,variant:\"black\",className:\"col-4\",children:LocalizeText('high.score.display.score.header')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{overflow:\"auto\",gap:1,className:\"overflow-y-auto high-score-results p-2\",children:stuffData.entries.map((entry,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,variant:\"white\",className:\"col-8\",children:entry.users.join(', ')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,center:true,variant:\"white\",className:\"col-4\",children:entry.score})]},index);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"trophy position-absolute\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"bottom-text\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,center:true,children:LocalizeText('high.score.display.congratulations.footer')})})]})]})},index);})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/manipulation-menu/FurnitureManipulationMenuView.tsx\nconst FurnitureManipulationMenuView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[objectType,setObjectType]=Object(react[\"useState\"])(-1);const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const rotateFurniture=Object(react[\"useCallback\"])(()=>{ProcessRoomObjectOperation(objectId,objectType,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_ROTATE_POSITIVE);},[objectId,objectType]);const moveFurniture=Object(react[\"useCallback\"])(()=>{ProcessRoomObjectOperation(objectId,objectType,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_MOVE);},[objectId,objectType]);const pickupFurniture=Object(react[\"useCallback\"])(()=>{ProcessRoomObjectOperation(objectId,objectType,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_PICKUP);},[objectId,objectType]);const onRoomWidgetRoomObjectUpdateEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_REQUEST_MANIPULATION:{setIsVisible(true);setObjectId(event.id);setObjectType(event.category);return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{if(event.id===objectId){setIsVisible(false);setObjectId(-1);setObjectType(-1);}return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED:{setIsVisible(false);setObjectId(-1);setObjectType(-1);return;}}},[objectId]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_REQUEST_MANIPULATION,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED,eventDispatcher,onRoomWidgetRoomObjectUpdateEvent);const onRoomWidgetUpdateDecorateModeEvent=Object(react[\"useCallback\"])(event=>{if(event.isDecorating)return;moveFurniture();setIsVisible(false);setObjectId(-1);setObjectType(-1);},[moveFurniture]);UseEventDispatcherHook(RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent.UPDATE_DECORATE,eventDispatcher,onRoomWidgetUpdateDecorateModeEvent);Object(react[\"useEffect\"])(()=>{if(!isVisible){eventDispatcher.dispatchEvent(new RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent(false));return;}eventDispatcher.dispatchEvent(new RoomWidgetUpdateDecorateModeEvent_RoomWidgetUpdateDecorateModeEvent(true));moveFurniture();},[eventDispatcher,isVisible,moveFurniture]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ObjectLocationView,{objectId:objectId,category:objectType,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"btn-group\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:pickupFurniture,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-primary btn-sm\",onClick:rotateFurniture,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"undo\"})})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/mannequin/FurnitureMannequinView.tsx\nconst FurnitureMannequinView_MODE_NONE=-1;const MODE_CONTROLLER=0;const MODE_UPDATE=1;const MODE_PEER=2;const MODE_NO_CLUB=3;const MODE_WRONG_GENDER=4;const ACTION_SET_NAME=1;const ACTION_WEAR=2;const ACTION_SAVE=3;const MANNEQUIN_FIGURE=['hd',99999,[99998]];const MANNEQUIN_CLOTHING_PART_TYPES=[nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST_ACCESSORY,nitro_renderer[\"p\" /* AvatarFigurePartType */].COAT_CHEST,nitro_renderer[\"p\" /* AvatarFigurePartType */].CHEST,nitro_renderer[\"p\" /* AvatarFigurePartType */].LEGS,nitro_renderer[\"p\" /* AvatarFigurePartType */].SHOES,nitro_renderer[\"p\" /* AvatarFigurePartType */].WAIST_ACCESSORY];const FurnitureMannequinView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[figure,setFigure]=Object(react[\"useState\"])(null);const[gender,setGender]=Object(react[\"useState\"])(null);const[name,setName]=Object(react[\"useState\"])(null);const[clubLevel,setClubLevel]=Object(react[\"useState\"])(nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].NO_CLUB);const[renderedFigure,setRenderedFigure]=Object(react[\"useState\"])(null);const[renderedClubLevel,setRenderedClubLevel]=Object(react[\"useState\"])(nitro_renderer[\"Ed\" /* HabboClubLevelEnum */].NO_CLUB);const[mode,setMode]=Object(react[\"useState\"])(FurnitureMannequinView_MODE_NONE);const{roomSession=null,eventDispatcher=null}=useRoomContext();const onRoomWidgetUpdateMannequinEvent=Object(react[\"useCallback\"])(event=>{const figureContainer=GetAvatarRenderManager().createFigureContainer(event.figure);const figureClubLevel=GetAvatarRenderManager().getFigureClubLevel(figureContainer,event.gender,MANNEQUIN_CLOTHING_PART_TYPES);setObjectId(event.objectId);setFigure(event.figure);setGender(event.gender);setName(event.name);setClubLevel(figureClubLevel);if(roomSession.isRoomOwner||roomSession.controllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST||GetSessionDataManager().isModerator){setMode(MODE_CONTROLLER);}else if(GetSessionDataManager().gender.toLowerCase()!==event.gender.toLowerCase()){setMode(MODE_WRONG_GENDER);}else if(GetClubMemberLevel()<figureClubLevel){setMode(MODE_NO_CLUB);}else{setMode(MODE_PEER);}},[roomSession]);UseEventDispatcherHook(RoomWidgetUpdateMannequinEvent_RoomWidgetUpdateMannequinEvent.MANNEQUIN_UPDATE,eventDispatcher,onRoomWidgetUpdateMannequinEvent);const getMergedFigureContainer=(figure,targetFigure)=>{const figureContainer=GetAvatarRenderManager().createFigureContainer(figure);const targetFigureContainer=GetAvatarRenderManager().createFigureContainer(targetFigure);for(const part of MANNEQUIN_CLOTHING_PART_TYPES)figureContainer.removePart(part);for(const part of targetFigureContainer.getPartTypeIds()){figureContainer.updatePart(part,targetFigureContainer.getPartSetId(part),targetFigureContainer.getPartColorIds(part));}return figureContainer;};const transformAsMannequinFigure=figureContainer=>{for(const part of figureContainer.getPartTypeIds()){if(MANNEQUIN_CLOTHING_PART_TYPES.indexOf(part)>=0)continue;figureContainer.removePart(part);}figureContainer.updatePart(MANNEQUIN_FIGURE[0],MANNEQUIN_FIGURE[1],MANNEQUIN_FIGURE[2]);};const processAction=Object(react[\"useCallback\"])(function(action){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(action){case ACTION_SAVE:SendMessageComposer(new nitro_renderer[\"Sb\" /* FurnitureMannequinSaveLookComposer */](objectId));break;case ACTION_WEAR:SendMessageComposer(new nitro_renderer[\"Ub\" /* FurnitureMultiStateComposer */](objectId));break;case ACTION_SET_NAME:SendMessageComposer(new nitro_renderer[\"Tb\" /* FurnitureMannequinSaveNameComposer */](objectId,name));return;}setMode(FurnitureMannequinView_MODE_NONE);},[objectId,name]);const handleKeyDown=event=>{if(event.key!=='Enter')return;processAction(ACTION_SET_NAME);};Object(react[\"useEffect\"])(()=>{switch(mode){case MODE_CONTROLLER:case MODE_WRONG_GENDER:{const figureContainer=GetAvatarRenderManager().createFigureContainer(figure);transformAsMannequinFigure(figureContainer);setRenderedFigure(figureContainer.getFigureString());setRenderedClubLevel(clubLevel);break;}case MODE_UPDATE:{const figureContainer=GetAvatarRenderManager().createFigureContainer(GetSessionDataManager().figure);transformAsMannequinFigure(figureContainer);setRenderedFigure(figureContainer.getFigureString());setRenderedClubLevel(GetAvatarRenderManager().getFigureClubLevel(figureContainer,GetSessionDataManager().gender,MANNEQUIN_CLOTHING_PART_TYPES));break;}case MODE_PEER:case MODE_NO_CLUB:{const figureContainer=getMergedFigureContainer(GetSessionDataManager().figure,figure);setRenderedFigure(figureContainer.getFigureString());setRenderedClubLevel(clubLevel);break;}}},[mode,figure,clubLevel]);if(mode===FurnitureMannequinView_MODE_NONE)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"nitro-mannequin\",theme:\"primary\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('mannequin.widget.title'),onCloseClick:event=>setMode(FurnitureMannequinView_MODE_NONE)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{position:\"relative\",className:\"mannequin-preview\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:renderedFigure,direction:2}),clubLevel>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutCurrencyIcon,{className:\"position-absolute end-2 bottom-2\",type:\"hc\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{justifyContent:\"between\",overflow:\"auto\",children:[mode===MODE_CONTROLLER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control\",value:name,onChange:event=>setName(event.target.value),onKeyDown:event=>handleKeyDown(event)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>setMode(MODE_UPDATE),children:LocalizeText('mannequin.widget.style')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>processAction(ACTION_WEAR),children:LocalizeText('mannequin.widget.wear')})]})]}),mode===MODE_UPDATE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,children:LocalizeText('mannequin.widget.savetext')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,pointer:true,onClick:event=>setMode(MODE_CONTROLLER),children:LocalizeText('mannequin.widget.back')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>processAction(ACTION_SAVE),children:LocalizeText('mannequin.widget.save')})]})]}),mode===MODE_PEER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,children:name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('mannequin.widget.weartext')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:event=>processAction(ACTION_WEAR),children:LocalizeText('mannequin.widget.wear')})]}),mode===MODE_NO_CLUB&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('mannequin.widget.clubnotification')}),mode===MODE_WRONG_GENDER&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('mannequin.widget.wronggender')})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/stickie/FurnitureStickieData.ts\nclass FurnitureStickieData{constructor(objectId,category,color,text){let canModify=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let isEditing=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;this.objectId=objectId;this.category=category;this.color=color;this.text=text;this.canModify=canModify;this.isEditing=isEditing;}}\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/stickie/FurnitureStickieUtils.ts\nconst STICKIE_COLORS=['9CCEFF','FF9CFF','9CFF9C','FFFF33'];const STICKIE_COLOR_NAMES=['blue','pink','green','yellow'];function getStickieColorName(color){let index=STICKIE_COLORS.indexOf(color);if(index===-1)index=0;return STICKIE_COLOR_NAMES[index];}\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/stickie/FurnitureStickieView.tsx\nconst FurnitureStickieView=props=>{const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const[stickieData,setStickieData]=Object(react[\"useState\"])(null);const onNitroEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_STICKIE:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;const data=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_ITEMDATA);if(data.length<6)return;let color=null;let text=null;if(data.indexOf(' ')>0){color=data.slice(0,data.indexOf(' '));text=data.slice(data.indexOf(' ')+1,data.length);}else{color=data;}setStickieData(new FurnitureStickieData(widgetEvent.objectId,widgetEvent.category,color,text,GetRoomSession().isRoomOwner||GetSessionDataManager().isModerator,false));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{const widgetEvent=event;setStickieData(prevState=>{if(!prevState||widgetEvent.id!==prevState.objectId||widgetEvent.category!==prevState.category)return prevState;return null;});return;}}},[]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_STICKIE,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onNitroEvent);const processAction=Object(react[\"useCallback\"])(function(type){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':setStickieData(null);return;case'trash':setStickieData(prevState=>{if(!prevState)return null;GetRoomEngine().deleteRoomObject(prevState.objectId,prevState.category);return null;});return;case'changeColor':setStickieData(prevState=>{const newStickieData=new FurnitureStickieData(prevState.objectId,prevState.category,value,prevState.text,prevState.canModify);GetRoomEngine().modifyRoomObjectData(newStickieData.objectId,newStickieData.category,newStickieData.color,newStickieData.text);return newStickieData;});return;case'changeText':setStickieData(prevState=>{const newStickieData=new FurnitureStickieData(prevState.objectId,prevState.category,prevState.color,value,prevState.canModify);GetRoomEngine().modifyRoomObjectData(newStickieData.objectId,newStickieData.category,newStickieData.color,newStickieData.text);return newStickieData;});return;case'editMode':setStickieData(prevValue=>{if(!prevValue.canModify)return prevValue;return new FurnitureStickieData(prevValue.objectId,prevValue.category,prevValue.color,prevValue.text,prevValue.canModify,true);});return;}},[]);if(!stickieData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DraggableWindow,{handleSelector:\".drag-handler\",windowPosition:DraggableWindowPosition.NOTHING,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:'nitro-stickie nitro-stickie-image stickie-'+getStickieColorName(stickieData.color),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex align-items-center stickie-header drag-handler\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex align-items-center flex-grow-1 h-100\",children:stickieData.canModify&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"nitro-stickie-image stickie-trash header-trash\",onClick:event=>processAction('trash')}),STICKIE_COLORS.map(color=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"stickie-color ms-1\",onClick:event=>processAction('changeColor',color),style:{backgroundColor:ColorUtils.makeColorHex(color)}},color);})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"d-flex align-items-center nitro-stickie-image stickie-close header-close\",onClick:event=>processAction('close')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"stickie-context\",children:!stickieData.isEditing?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"context-text\",onClick:event=>processAction('editMode'),children:stickieData.text}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{className:\"context-text\",defaultValue:stickieData.text||'',tabIndex:0,onBlur:event=>processAction('changeText',event.target.value),autoFocus:true})})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/trophy/FurnitureTrophyView.tsx\nconst FurnitureTrophyView=props=>{const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const[trophyData,setTrophyData]=Object(react[\"useState\"])(null);const onNitroEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TROPHY:{const widgetEvent=event;const roomObject=GetRoomEngine().getRoomObject(widgetEvent.roomId,widgetEvent.objectId,widgetEvent.category);if(!roomObject)return;let data=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);let extra=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_EXTRAS);if(!extra)extra='0';const color=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_COLOR);const ownerName=data.substring(0,data.indexOf('\\t'));data=data.substring(ownerName.length+1,data.length);const trophyDate=data.substring(0,data.indexOf('\\t'));const trophyText=data.substr(trophyDate.length+1,data.length);setTrophyData(new FurnitureTrophyData(widgetEvent.objectId,widgetEvent.category,color,ownerName,trophyDate,trophyText));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:{const widgetEvent=event;setTrophyData(prevState=>{if(!prevState||widgetEvent.id!==prevState.objectId||widgetEvent.category!==prevState.category)return prevState;return null;});return;}}},[]);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TROPHY,onNitroEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,widgetHandler.eventDispatcher,onNitroEvent);const processAction=Object(react[\"useCallback\"])(function(type){let value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;switch(type){case'close':setTrophyData(null);return;}},[]);if(!trophyData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutTrophyView,{color:trophyData.color,message:trophyData.message,date:trophyData.date,senderName:trophyData.ownerName,onCloseClick:()=>processAction('close')});};\n// EXTERNAL MODULE: ./node_modules/react-youtube/dist/index.esm.js\nvar dist_index_esm = __webpack_require__(86);\n\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/youtube-tv/utils/YoutubeVideoPlaybackStateEnum.ts\nclass YoutubeVideoPlaybackStateEnum{}YoutubeVideoPlaybackStateEnum.UNSTARTED=-1;YoutubeVideoPlaybackStateEnum.ENDED=0;YoutubeVideoPlaybackStateEnum.PLAYING=1;YoutubeVideoPlaybackStateEnum.PAUSED=2;YoutubeVideoPlaybackStateEnum.BUFFERING=3;YoutubeVideoPlaybackStateEnum.CUED=5;\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/youtube-tv/FurnitureYoutubeDisplayView.tsx\nconst FurnitureYoutubeDisplayView=props=>{const[objectId,setObjectId]=Object(react[\"useState\"])(-1);const[videoId,setVideoId]=Object(react[\"useState\"])(null);const[videoStart,setVideoStart]=Object(react[\"useState\"])(null);const[videoEnd,setVideoEnd]=Object(react[\"useState\"])(null);const[currentVideoState,setCurrentVideoState]=Object(react[\"useState\"])(-1);const[selectedItem,setSelectedItem]=Object(react[\"useState\"])(null);const[playlists,setPlaylists]=Object(react[\"useState\"])(null);const[hasControl,setHasControl]=Object(react[\"useState\"])(false);const[player,setPlayer]=Object(react[\"useState\"])(null);const{eventDispatcher=null}=useRoomContext();const onRoomWidgetUpdateYoutubeDisplayEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent.UPDATE_YOUTUBE_DISPLAY:{setObjectId(event.objectId);setHasControl(event.hasControl);}}},[]);const close=Object(react[\"useCallback\"])(()=>{setObjectId(-1);setSelectedItem(null);setPlaylists(null);setHasControl(false);setVideoId(null);setVideoEnd(null);setVideoStart(null);setCurrentVideoState(-1);},[]);UseEventDispatcherHook(RoomWidgetUpdateYoutubeDisplayEvent_RoomWidgetUpdateYoutubeDisplayEvent.UPDATE_YOUTUBE_DISPLAY,eventDispatcher,onRoomWidgetUpdateYoutubeDisplayEvent);const onVideo=Object(react[\"useCallback\"])(event=>{if(objectId===-1)return;const parser=event.getParser();if(objectId!==parser.furniId)return;setVideoId(parser.videoId);setVideoStart(parser.startAtSeconds);setVideoEnd(parser.endAtSeconds);setCurrentVideoState(parser.state);},[objectId]);const onPlaylists=Object(react[\"useCallback\"])(event=>{if(objectId===-1)return;const parser=event.getParser();if(objectId!==parser.furniId)return;setPlaylists(parser.playlists);setSelectedItem(parser.selectedPlaylistId);setVideoId(null);setCurrentVideoState(-1);setVideoEnd(null);setVideoStart(null);},[objectId]);const onControlVideo=Object(react[\"useCallback\"])(event=>{if(objectId===-1)return;const parser=event.getParser();if(objectId!==parser.furniId)return;switch(parser.commandId){case 1:setCurrentVideoState(YoutubeVideoPlaybackStateEnum.PLAYING);if(player.getPlayerState()!==YoutubeVideoPlaybackStateEnum.PLAYING)player.playVideo();break;case 2:setCurrentVideoState(YoutubeVideoPlaybackStateEnum.PAUSED);if(player.getPlayerState()!==YoutubeVideoPlaybackStateEnum.PAUSED)player.pauseVideo();break;}},[objectId,player]);UseMessageEventHook(nitro_renderer[\"jj\" /* YoutubeDisplayVideoMessageEvent */],onVideo);UseMessageEventHook(nitro_renderer[\"ij\" /* YoutubeDisplayPlaylistsEvent */],onPlaylists);UseMessageEventHook(nitro_renderer[\"hj\" /* YoutubeControlVideoMessageEvent */],onControlVideo);const processAction=Object(react[\"useCallback\"])(action=>{switch(action){case'playlist_prev':SendMessageComposer(new nitro_renderer[\"ob\" /* ControlYoutubeDisplayPlaybackMessageComposer */](objectId,FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_PREVIOUS_VIDEO));break;case'playlist_next':SendMessageComposer(new nitro_renderer[\"ob\" /* ControlYoutubeDisplayPlaybackMessageComposer */](objectId,FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_NEXT_VIDEO));break;case'video_pause':if(hasControl&&videoId&&videoId.length){SendMessageComposer(new nitro_renderer[\"ob\" /* ControlYoutubeDisplayPlaybackMessageComposer */](objectId,FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_PAUSE_VIDEO));}break;case'video_play':if(hasControl&&videoId&&videoId.length){SendMessageComposer(new nitro_renderer[\"ob\" /* ControlYoutubeDisplayPlaybackMessageComposer */](objectId,FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler.CONTROL_COMMAND_CONTINUE_VIDEO));}break;default:if(selectedItem===action){setSelectedItem(null);SendMessageComposer(new nitro_renderer[\"Ph\" /* SetYoutubeDisplayPlaylistMessageComposer */](objectId,''));return;}SendMessageComposer(new nitro_renderer[\"Ph\" /* SetYoutubeDisplayPlaylistMessageComposer */](objectId,action));setSelectedItem(action);}},[hasControl,objectId,selectedItem,videoId]);const onReady=Object(react[\"useCallback\"])(event=>{setPlayer(event.target);},[]);const onStateChange=Object(react[\"useCallback\"])(event=>{setPlayer(event.target);if(objectId){switch(event.target.getPlayerState()){case-1:case 1:if(currentVideoState===2){//event.target.pauseVideo();\n}if(currentVideoState!==1){processAction('video_play');}return;case 2:if(currentVideoState!==2){processAction('video_pause');}}}},[currentVideoState,objectId,processAction]);const getYoutubeOpts=Object(react[\"useMemo\"])(()=>{if(!videoStart&&!videoEnd){return{height:'375',width:'500',playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1}};}return{height:'375',width:'500',playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:videoStart,end:videoEnd}};},[videoEnd,videoStart]);if(objectId===-1)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{className:\"youtube-tv-widget\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:'',onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardContentView,{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"row w-100 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"youtube-video-container col-9\",children:[videoId&&videoId.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(dist_index_esm[\"a\" /* default */],{videoId:videoId,opts:getYoutubeOpts,onReady:onReady,onStateChange:onStateChange,containerClassName:'youtubeContainer'}),(!videoId||videoId.length===0)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"empty-video w-100 h-100 justify-content-center align-items-center d-flex\",children:LocalizeText('widget.furni.video_viewer.no_videos')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"playlist-container col-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"playlist-controls justify-content-center d-flex\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-youtube-prev cursor-pointer\",onClick:()=>processAction('playlist_prev')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-youtube-next cursor-pointer\",onClick:()=>processAction('playlist_next')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mb-1\",children:LocalizeText('widget.furni.video_viewer.playlists')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:1,className:\"playlist-grid\",children:playlists&&playlists.map((entry,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{onClick:()=>processAction(entry.video),itemActive:entry.video===selectedItem,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:entry.title}),\" - \",entry.description]},index);})})]})]})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/furniture/FurnitureWidgetsView.tsx\nconst FurnitureWidgetsView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"position-absolute nitro-room-widgets top-0 start-0 w-100 h-100\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureBackgroundColorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureContextMenuView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureCustomStackHeightView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureDimmerView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureFriendFurniView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureGiftOpeningView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureExchangeCreditView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureHighScoreView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureManipulationMenuView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureMannequinView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureStickieView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureTrophyView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureBadgeDisplayView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureExternalImageView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureYoutubeDisplayView,{})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetBotView.tsx\nconst InfoStandWidgetBotView=props=>{const{botData=null,close=null}=props;if(!botData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-infostand rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,variant:\"white\",wrap:true,children:botData.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\",className:\"cursor-pointer\",onClick:close})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,className:\"body-image bot\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:botData.figure,direction:4})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,center:true,gap:0,children:botData.badges.length>0&&botData.badges.map(result=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:result,showInfo:true},result);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",className:\"py-1 px-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,wrap:true,textBreak:true,variant:\"white\",className:\"motto-content\",children:botData.motto})}),botData.carryItem>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.text.handitem',['item'],[LocalizeText('handitem'+botData.carryItem)])})]})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetFurniView.tsx\nconst PICKUP_MODE_NONE=0;const PICKUP_MODE_EJECT=1;const PICKUP_MODE_FULL=2;const InfoStandWidgetFurniView=props=>{const{furniData=null,close=null}=props;const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const[pickupMode,setPickupMode]=Object(react[\"useState\"])(0);const[canMove,setCanMove]=Object(react[\"useState\"])(false);const[canRotate,setCanRotate]=Object(react[\"useState\"])(false);const[canUse,setCanUse]=Object(react[\"useState\"])(false);const[furniKeys,setFurniKeys]=Object(react[\"useState\"])([]);const[furniValues,setFurniValues]=Object(react[\"useState\"])([]);const[customKeys,setCustomKeys]=Object(react[\"useState\"])([]);const[customValues,setCustomValues]=Object(react[\"useState\"])([]);const[isCrackable,setIsCrackable]=Object(react[\"useState\"])(false);const[crackableHits,setCrackableHits]=Object(react[\"useState\"])(0);const[crackableTarget,setCrackableTarget]=Object(react[\"useState\"])(0);const[godMode,setGodMode]=Object(react[\"useState\"])(false);const[canSeeFurniId,setCanSeeFurniId]=Object(react[\"useState\"])(false);const[groupName,setGroupName]=Object(react[\"useState\"])(null);Object(react[\"useEffect\"])(()=>{let pickupMode=PICKUP_MODE_NONE;let canMove=false;let canRotate=false;let canUse=false;let furniKeyss=[];let furniValuess=[];let customKeyss=[];let customValuess=[];let isCrackable=false;let crackableHits=0;let crackableTarget=0;let godMode=false;let canSeeFurniId=false;const isValidController=furniData.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUEST;if(isValidController||furniData.isOwner||furniData.isRoomOwner||furniData.isAnyRoomController){canMove=true;canRotate=!furniData.isWallItem;if(furniData.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].MODERATOR)godMode=true;}if(furniData.isAnyRoomController){canSeeFurniId=true;}if(furniData.usagePolicy===nitro_renderer[\"Ah\" /* RoomWidgetFurniInfoUsagePolicyEnum */].EVERYBODY||furniData.usagePolicy===nitro_renderer[\"Ah\" /* RoomWidgetFurniInfoUsagePolicyEnum */].CONTROLLER&&isValidController||furniData.extraParam===nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].JUKEBOX&&isValidController||furniData.extraParam===nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].USABLE_PRODUCT&&isValidController)canUse=true;if(furniData.extraParam){if(furniData.extraParam===nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].CRACKABLE_FURNI){const stuffData=furniData.stuffData;canUse=true;isCrackable=true;crackableHits=stuffData.hits;crackableTarget=stuffData.target;}if(godMode){const extraParam=furniData.extraParam.substr(nitro_renderer[\"zh\" /* RoomWidgetEnumItemExtradataParameter */].BRANDING_OPTIONS.length);if(extraParam){const parts=extraParam.split('\\t');for(const part of parts){const value=part.split('=');if(value&&value.length===2){furniKeyss.push(value[0]);furniValuess.push(value[1]);}}}}}if(godMode){const roomObject=GetRoomEngine().getRoomObject(roomSession.roomId,furniData.id,furniData.isWallItem?nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR);if(roomObject){const customVariables=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_CUSTOM_VARIABLES);const furnitureData=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_DATA);if(customVariables&&customVariables.length){for(const customVariable of customVariables){customKeyss.push(customVariable);customValuess.push(furnitureData[customVariable]||'');}}}}if(furniData.isOwner||furniData.isAnyRoomController)pickupMode=PICKUP_MODE_FULL;else if(furniData.isRoomOwner||furniData.roomControllerLevel>=nitro_renderer[\"eg\" /* RoomControllerLevel */].GUILD_ADMIN)pickupMode=PICKUP_MODE_EJECT;if(furniData.isStickie)pickupMode=PICKUP_MODE_NONE;setPickupMode(pickupMode);setCanMove(canMove);setCanRotate(canRotate);setCanUse(canUse);setFurniKeys(furniKeyss);setFurniValues(furniValuess);setCustomKeys(customKeyss);setCustomValues(customValuess);setIsCrackable(isCrackable);setCrackableHits(crackableHits);setCrackableTarget(crackableTarget);setGodMode(godMode);setCanSeeFurniId(canSeeFurniId);setGroupName(null);if(furniData.groupId)SendMessageComposer(new nitro_renderer[\"Tc\" /* GroupInformationComposer */](furniData.groupId,false));},[roomSession,furniData]);const onGroupInformationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!furniData||furniData.groupId!==parser.id||parser.flag)return;if(groupName)setGroupName(null);setGroupName(parser.title);},[furniData,groupName]);UseMessageEventHook(nitro_renderer[\"Uc\" /* GroupInformationEvent */],onGroupInformationEvent);const onFurniSettingChange=Object(react[\"useCallback\"])((index,value)=>{const clone=Array.from(furniValues);clone[index]=value;setFurniValues(clone);},[furniValues]);const onCustomVariableChange=Object(react[\"useCallback\"])((index,value)=>{const clone=Array.from(customValues);clone[index]=value;setCustomValues(clone);},[customValues]);const getFurniSettingsAsString=Object(react[\"useCallback\"])(()=>{if(furniKeys.length===0||furniValues.length===0)return'';let data='';let i=0;while(i<furniKeys.length){const key=furniKeys[i];const value=furniValues[i];data=data+(key+'='+value+'\\t');i++;}return data;},[furniKeys,furniValues]);const processButtonAction=Object(react[\"useCallback\"])(action=>{if(!action||action==='')return;let messageType=null;let objectData=null;switch(action){case'buy_one':CreateLinkEvent(`catalog/open/offerId/${furniData.purchaseOfferId}`);return;case'move':messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.MOVE;break;case'rotate':messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.ROTATE;break;case'pickup':if(pickupMode===PICKUP_MODE_FULL)messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.PICKUP;else messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.EJECT;break;case'use':messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.USE;break;case'save_branding_configuration':messageType=RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage.SAVE_STUFF_DATA;objectData=getFurniSettingsAsString();break;case'save_custom_variables':const map=new Map();for(let i=0;i<customKeys.length;i++){const key=customKeys[i];const value=customValues[i];if(key&&key.length&&value&&value.length)map.set(key,value);}SendMessageComposer(new nitro_renderer[\"Nh\" /* SetObjectDataMessageComposer */](furniData.id,map));break;}if(!messageType)return;widgetHandler.processWidgetMessage(new RoomWidgetFurniActionMessage_RoomWidgetFurniActionMessage(messageType,furniData.id,furniData.category,furniData.purchaseOfferId,objectData));},[widgetHandler,furniData,pickupMode,customKeys,customValues,getFurniSettingsAsString]);const getGroupBadgeCode=Object(react[\"useCallback\"])(()=>{const stringDataType=furniData.stuffData;if(!stringDataType||!(stringDataType instanceof nitro_renderer[\"Qh\" /* StringDataType */]))return null;return stringDataType.getValue(2);},[furniData]);if(!furniData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"end\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-infostand\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,variant:\"white\",wrap:true,children:furniData.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"infostand-close\",onClick:close})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{position:\"relative\",gap:1,children:[furniData.stuffData.isUnique&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute end-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutLimitedEditionCompactPlateView,{uniqueNumber:furniData.stuffData.uniqueNumber,uniqueSeries:furniData.stuffData.uniqueSeries})}),furniData.stuffData.rarityLevel>-1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"position-absolute end-0\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutRarityLevelView,{level:furniData.stuffData.rarityLevel})}),furniData.image&&furniData.image.src.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"d-block mx-auto\",src:furniData.image.src,alt:\"\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,wrap:true,textBreak:true,variant:\"white\",children:furniData.description}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:furniData.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:[furniData.ownerName]})]}),furniData.purchaseOfferId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"volter-button\",onClick:event=>processButtonAction('buy_one'),children:LocalizeText('infostand.button.buy')})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[isCrackable&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.crackable_furni.hits_remaining',['hits','target'],[crackableHits.toString(),crackableTarget.toString()])})]}),furniData.groupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{pointer:true,alignItems:\"center\",gap:2,onClick:()=>GetGroupInformation(furniData.groupId),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:getGroupBadgeCode(),isGroup:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",underline:true,children:groupName})]})]}),godMode&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),canSeeFurniId&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{wrap:true,variant:\"white\",children:[\"ID: \",furniData.id]}),furniKeys.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:furniKeys.map((key,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,align:\"end\",variant:\"white\",className:\"col-4\",children:key}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:furniValues[index],onChange:event=>onFurniSettingChange(index,event.target.value)})]},index);})})]})]}),customKeys.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 my-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:customKeys.map((key,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,wrap:true,align:\"end\",variant:\"white\",className:\"col-4\",children:key}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:customValues[index],onChange:event=>onCustomVariableChange(index,event.target.value)})]},index);})})]})]})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,justifyContent:\"end\",children:[canMove&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:event=>processButtonAction('move'),children:LocalizeText('infostand.button.move')}),canRotate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:event=>processButtonAction('rotate'),children:LocalizeText('infostand.button.rotate')}),pickupMode!==PICKUP_MODE_NONE&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:event=>processButtonAction('pickup'),children:LocalizeText(pickupMode===PICKUP_MODE_EJECT?'infostand.button.eject':'infostand.button.pickup')}),canUse&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:event=>processButtonAction('use'),children:LocalizeText('infostand.button.use')}),furniKeys.length>0&&furniValues.length>0&&furniKeys.length===furniValues.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:()=>processButtonAction('save_branding_configuration'),children:LocalizeText('save')}),customKeys.length>0&&customValues.length>0&&customKeys.length===customValues.length&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons px-2\",onClick:()=>processButtonAction('save_custom_variables'),children:LocalizeText('save')})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetPetView.tsx\nconst InfoStandWidgetPetView=props=>{const{petData=null,close=null}=props;if(!petData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-infostand rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",gfbold:true,wrap:true,children:petData.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\",className:\"cursor-pointer\",onClick:close})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText(`pet.breed.${petData.petType}.${petData.petBreed}`)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,overflow:\"hidden\",className:\"body-image pet p-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutPetImageView,{figure:petData.petFigure,posture:petData.posture,direction:4})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",center:true,wrap:true,children:LocalizeText('pet.level',['level','maxlevel'],[petData.level.toString(),petData.maximumLevel.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",truncate:true,children:LocalizeText('infostand.pet.text.happiness')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{fullWidth:true,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fit:true,center:true,position:\"absolute\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:petData.happyness+'/'+petData.maximumHappyness})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"bg-info rounded pet-stats\",style:{width:petData.happyness/petData.maximumHappyness*100+'%'}})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",truncate:true,children:LocalizeText('infostand.pet.text.experience')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{fullWidth:true,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fit:true,center:true,position:\"absolute\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:petData.experience+'/'+petData.levelExperienceGoal})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"bg-purple rounded pet-stats\",style:{width:petData.experience/petData.levelExperienceGoal*100+'%'}})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",truncate:true,children:LocalizeText('infostand.pet.text.energy')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{fullWidth:true,overflow:\"hidden\",position:\"relative\",className:\"bg-light-dark rounded\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{fit:true,center:true,position:\"absolute\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:petData.energy+'/'+petData.maximumEnergy})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"bg-success rounded pet-stats\",style:{width:petData.energy/petData.maximumEnergy*100+'%'}})]})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.text.petrespect',['count'],[petData.respect.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('pet.age',['age'],[petData.age.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:petData.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.text.petowner',['name'],[petData.ownerName])})]})})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetRentableBotView.tsx\nconst InfoStandWidgetRentableBotView=props=>{const{rentableBotData=null,close=null}=props;const canPickup=Object(react[\"useMemo\"])(()=>{if(rentableBotData.botSkills.indexOf(BotSkillsEnum.NO_PICK_UP)>=0)return false;if(!rentableBotData.amIOwner&&!rentableBotData.amIAnyRoomController)return false;return true;},[rentableBotData]);const pickupBot=()=>SendMessageComposer(new nitro_renderer[\"B\" /* BotRemoveComposer */](rentableBotData.webID));if(!rentableBotData)return;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-infostand rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",gfbold:true,wrap:true,children:rentableBotData.name}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"times\",className:\"cursor-pointer\",onClick:close})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,className:\"body-image bot\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:rentableBotData.figure,direction:4})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{grow:true,center:true,gap:0,children:rentableBotData.badges.length>0&&rentableBotData.badges.map(result=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:result,showInfo:true},result);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",className:\"py-1 px-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,wrap:true,textBreak:true,variant:\"white\",className:\"motto-content\",children:rentableBotData.motto})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileIconView,{userId:rentableBotData.ownerId}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.text.botowner',['name'],[rentableBotData.ownerName])})]}),rentableBotData.carryItem>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",wrap:true,children:LocalizeText('infostand.text.handitem',['item'],[LocalizeText('handitem'+rentableBotData.carryItem)])})]})]})]})}),canPickup&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{justifyContent:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{className:\"infostand-buttons\",onClick:pickupBot,children:LocalizeText('infostand.button.pickup')})})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetUserRelationshipsView.tsx\nconst InfoStandWidgetUserRelationshipsView=props=>{const{relationships=null}=props;const RelationshipComponent=_ref=>{let{type}=_ref;const relationshipInfo=relationships&&relationships.relationshipStatusMap.hasKey(type)?relationships.relationshipStatusMap.getValue(type):null;if(!relationshipInfo||!relationshipInfo.friendCount)return null;const relationshipName=nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].RELATIONSHIP_NAMES[type].toLocaleLowerCase();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`nitro-friends-spritesheet icon-${relationshipName}`}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",gap:0,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{gfbold:true,variant:\"white\",onClick:event=>GetUserProfile(relationshipInfo.randomFriendId),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"u\",{children:relationshipInfo.randomFriendName}),relationshipInfo.friendCount>1&&' '+LocalizeText(`extendedprofile.relstatus.others.${relationshipName}`,['count'],[(relationshipInfo.friendCount-1).toString()])]})})]});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].HEART}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].SMILE}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].BOBBA})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetUserView.tsx\nconst InfoStandWidgetUserView=props=>{const{userData=null,setUserData=null,close=null}=props;const[motto,setMotto]=Object(react[\"useState\"])(null);const[isEditingMotto,setIsEditingMotto]=Object(react[\"useState\"])(false);const[relationships,setRelationships]=Object(react[\"useState\"])(null);const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const maxBadgeCount=GetConfiguration('user.badges.max.slots',5);const saveMotto=motto=>{if(!isEditingMotto||motto.length>GetConfiguration('motto.max.length',38))return;widgetHandler.processWidgetMessage(new RoomWidgetChangeMottoMessage_RoomWidgetChangeMottoMessage(motto));setIsEditingMotto(false);};const onMottoBlur=event=>saveMotto(event.target.value);const onMottoKeyDown=event=>{event.stopPropagation();switch(event.key){case'Enter':saveMotto(event.target.value);return;}};const onRoomSessionUserBadgesEvent=Object(react[\"useCallback\"])(event=>{if(!userData||userData.webID!==event.userId)return;setUserData(prevValue=>{const newValue=CloneObject(prevValue);newValue.badges=event.badges;return newValue;});},[userData,setUserData]);UseEventDispatcherHook(nitro_renderer[\"eh\" /* RoomSessionUserBadgesEvent */].RSUBE_BADGES,eventDispatcher,onRoomSessionUserBadgesEvent);const onRoomSessionUserFigureUpdateEvent=Object(react[\"useCallback\"])(event=>{if(!userData||userData.roomIndex!==event.roomIndex)return;setUserData(prevValue=>{const newValue=CloneObject(prevValue);newValue.figure=event.figure;newValue.motto=event.customInfo;newValue.achievementScore=event.activityPoints;return newValue;});},[userData,setUserData]);UseEventDispatcherHook(nitro_renderer[\"gh\" /* RoomSessionUserFigureUpdateEvent */].USER_FIGURE,eventDispatcher,onRoomSessionUserFigureUpdateEvent);const onRoomSessionFavoriteGroupUpdateEvent=Object(react[\"useCallback\"])(event=>{if(!userData||userData.roomIndex!==event.roomIndex)return;setUserData(prevValue=>{const newValue=CloneObject(prevValue);const clearGroup=event.status===-1||event.habboGroupId<=0;newValue.groupId=clearGroup?-1:event.habboGroupId;newValue.groupName=clearGroup?null:event.habboGroupName;newValue.groupBadgeId=clearGroup?null:GetSessionDataManager().getGroupBadge(event.habboGroupId);return newValue;});},[userData,setUserData]);UseEventDispatcherHook(nitro_renderer[\"Zg\" /* RoomSessionFavoriteGroupUpdateEvent */].FAVOURITE_GROUP_UPDATE,eventDispatcher,onRoomSessionFavoriteGroupUpdateEvent);const onUserRelationshipsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!userData||userData.webID!==parser.userId)return;setRelationships(parser);},[userData]);UseMessageEventHook(nitro_renderer[\"Mf\" /* RelationshipStatusInfoEvent */],onUserRelationshipsEvent);Object(react[\"useEffect\"])(()=>{setIsEditingMotto(false);setMotto(userData.motto);SendMessageComposer(new nitro_renderer[\"Ki\" /* UserRelationshipsComposer */](userData.webID));return()=>{setIsEditingMotto(false);setMotto(null);setRelationships(null);};},[userData]);if(!userData)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{className:\"nitro-infostand rounded\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{overflow:\"visible\",className:\"container-fluid content-area\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-profile-house cursor-pointer\",onClick:event=>GetUserProfile(userData.webID)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,variant:\"white\",className:\"infostand-name\",onClick:event=>GetUserProfile(userData.webID),children:userData.name})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"infostand-close\",onClick:close})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{fullWidth:true,className:\"body-image infostand-thumb-bg\",onClick:event=>GetUserProfile(userData.webID),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userData.figure,direction:4})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"badge-image\",children:userData.badges[0]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.badges[0],showInfo:true})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:userData.groupId>0,className:\"badge-image\",onClick:event=>GetGroupInformation(userData.groupId),children:userData.groupId>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.groupBadgeId,isGroup:true,showInfo:true,customTitle:userData.groupName})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"badge-image\",children:userData.badges[1]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.badges[1],showInfo:true})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"badge-image\",children:userData.badges[2]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.badges[2],showInfo:true})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"badge-image\",children:userData.badges[3]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.badges[3],showInfo:true})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"badge-image\",children:userData.badges[4]&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:userData.badges[4],showInfo:true})})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",className:\"infostand-thumb-bg py-1 px-2\",children:[userData.type!==RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{grow:true,alignItems:\"center\",className:\"motto-content\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{fullWidth:true,pointer:true,wrap:true,textBreak:true,variant:\"white\",children:motto})}),userData.type===RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{grow:true,alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon pencil-icon\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{grow:true,alignItems:\"center\",className:\"motto-content\",children:[!isEditingMotto&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{fullWidth:true,pointer:true,wrap:true,textBreak:true,variant:\"white\",onClick:event=>setIsEditingMotto(true),children:[motto,\"\\xA0\"]}),isEditingMotto&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"motto-input\",maxLength:GetConfiguration('motto.max.length',38),value:motto,onChange:event=>setMotto(event.target.value),onBlur:onMottoBlur,onKeyDown:onMottoKeyDown,autoFocus:true})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,variant:\"white\",wrap:true,children:LocalizeText('infostand.text.achievement_score')+' '+userData.achievementScore}),userData.carryItem>0&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,variant:\"white\",wrap:true,children:LocalizeText('infostand.text.handitem',['item'],[LocalizeText('handitem'+userData.carryItem)])})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetUserRelationshipsView,{relationships:relationships})})]})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/infostand/InfoStandWidgetView.tsx\nconst InfoStandWidgetView=props=>{const{eventDispatcher=null,widgetHandler=null}=useRoomContext();const[infoStandEvent,setInfoStandEvent]=Object(react[\"useState\"])(null);const closeInfostand=Object(react[\"useCallback\"])(()=>{setInfoStandEvent(null);},[]);const onRoomWidgetUpdateEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_SELECTED:{const roomObjectEvent=event;widgetHandler.processWidgetMessage(new RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage(RoomWidgetRoomObjectMessage_RoomWidgetRoomObjectMessage.GET_OBJECT_INFO,roomObjectEvent.id,roomObjectEvent.category));return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED:{const roomObjectEvent=event;closeInfostand();return;}case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED:{const roomObjectEvent=event;setInfoStandEvent(prevValue=>{switch(event.type){case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED:if(prevValue instanceof RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent){if(prevValue.id===roomObjectEvent.id)return null;}break;case RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED:if(prevValue instanceof RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent||prevValue instanceof RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent){if(prevValue.roomIndex===roomObjectEvent.id)return null;}else if(prevValue instanceof RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent){if(prevValue.roomIndex===roomObjectEvent.id)return null;}break;}return prevValue;});return;}case RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI:case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER:case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER:case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT:case RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT:case RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO:{setInfoStandEvent(event);return;}default:console.log(event);return;}},[widgetHandler,closeInfostand]);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_SELECTED,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO,eventDispatcher,onRoomWidgetUpdateEvent);UseEventDispatcherHook(RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO,eventDispatcher,onRoomWidgetUpdateEvent);const getInfostandView=Object(react[\"useCallback\"])(()=>{if(!infoStandEvent)return null;switch(infoStandEvent.type){case RoomWidgetUpdateInfostandFurniEvent_RoomWidgetUpdateInfostandFurniEvent.FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetFurniView,{furniData:infoStandEvent,close:closeInfostand});case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.OWN_USER:case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.PEER:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetUserView,{userData:infoStandEvent,setUserData:setInfoStandEvent,close:closeInfostand});case RoomWidgetUpdateInfostandUserEvent_RoomWidgetUpdateInfostandUserEvent.BOT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetBotView,{botData:infoStandEvent,close:closeInfostand});case RoomWidgetUpdateInfostandRentableBotEvent_RoomWidgetUpdateInfostandRentableBotEvent.RENTABLE_BOT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetRentableBotView,{rentableBotData:infoStandEvent,close:closeInfostand});case RoomWidgetUpdateInfostandPetEvent_RoomWidgetUpdateInfostandPetEvent.PET_INFO:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetPetView,{petData:infoStandEvent,close:closeInfostand});}return null;},[infoStandEvent,closeInfostand]);if(!infoStandEvent)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{alignItems:\"end\",className:\"nitro-infostand-container\",children:getInfostandView()});};\n// CONCATENATED MODULE: ./src/components/room/widgets/room-thumbnail/RoomThumbnailWidgetView.tsx\nconst RoomThumbnailWidgetView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const{roomSession=null}=useRoomContext();const onNitroEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.SHOW_THUMBNAIL:setIsVisible(true);return;case RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.HIDE_THUMBNAIL:setIsVisible(false);return;case RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.TOGGLE_THUMBNAIL:setIsVisible(value=>!value);return;}},[]);UseUiEvent(RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.SHOW_THUMBNAIL,onNitroEvent);UseUiEvent(RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.HIDE_THUMBNAIL,onNitroEvent);UseUiEvent(RoomWidgetThumbnailEvent_RoomWidgetThumbnailEvent.TOGGLE_THUMBNAIL,onNitroEvent);const receiveTexture=Object(react[\"useCallback\"])(texture=>{GetRoomEngine().saveTextureAsScreenshot(texture,true);setIsVisible(false);},[]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutMiniCameraView,{roomId:roomSession.roomId,textureReceiver:receiveTexture,onClose:()=>setIsVisible(false)});};\n// CONCATENATED MODULE: ./src/components/room/widgets/room-tools/RoomToolsWidgetView.tsx\nconst RoomToolsWidgetView=props=>{const[isZoomedIn,setIsZoomedIn]=Object(react[\"useState\"])(false);const[roomName,setRoomName]=Object(react[\"useState\"])(null);const[roomOwner,setRoomOwner]=Object(react[\"useState\"])(null);const[roomTags,setRoomTags]=Object(react[\"useState\"])(null);const[roomInfoDisplay,setRoomInfoDisplay]=Object(react[\"useState\"])(false);const[isOpen,setIsOpen]=Object(react[\"useState\"])(false);const[navigatorData,setNavigatorData]=useSharedNavigatorData();const{roomSession=null,widgetHandler=null}=useRoomContext();const[show,setShow]=Object(react[\"useState\"])(true);const handleToolClick=action=>{switch(action){case'settings':CreateLinkEvent('navigator/toggle-room-info');return;case'zoom':setIsZoomedIn(prevValue=>{let scale=GetRoomEngine().getRoomInstanceRenderingCanvasScale(roomSession.roomId,1);if(!prevValue)scale/=2;else scale*=2;GetRoomEngine().setRoomInstanceRenderingCanvasScale(roomSession.roomId,1,scale);return!prevValue;});return;case'chat_history':CreateLinkEvent('chat-history/toggle');return;case'like_room':SendMessageComposer(new nitro_renderer[\"Fg\" /* RoomLikeRoomComposer */](1));return;case'toggle_room_link':CreateLinkEvent('navigator/toggle-room-link');return;}};const onGetGuestRoomResultEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!parser.roomEnter)return;if(roomName!==parser.data.roomName)setRoomName(parser.data.roomName);if(roomOwner!==parser.data.ownerName)setRoomOwner(parser.data.ownerName);if(roomTags!==parser.data.tags)setRoomTags(parser.data.tags);},[roomName,roomOwner,roomTags]);UseMessageEventHook(nitro_renderer[\"nc\" /* GetGuestRoomResultEvent */],onGetGuestRoomResultEvent);Object(react[\"useEffect\"])(()=>{setIsOpen(true);const timeout=setTimeout(()=>setIsOpen(false),5000);return()=>clearTimeout(timeout);},[roomName,roomOwner,roomTags]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,className:\"nitro-room-tools-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"btn-toggle toggle-roomtool d-flex align-items-center\",onClick:()=>setShow(!show),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:'toggle-icon '+classnames_default()({'right':!show,'left':show})})}),show&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:0,center:true,className:\"nitro-room-tools p-3 px-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{center:true,className:\"p-1\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.settings.button.text'),className:\"icon icon-cog\",onClick:()=>handleToolClick('settings')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.zoom.button.text'),onClick:()=>handleToolClick('zoom'),className:'icon '+classnames_default()({'icon-zoom-less':!isZoomedIn,'icon-zoom-more':isZoomedIn})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.chathistory.button.text'),onClick:()=>handleToolClick('chat_history'),className:\"icon icon-chat-history\"}),navigatorData.canRate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.like.button.text'),onClick:()=>handleToolClick('like_room'),className:\"icon icon-like-room\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,title:LocalizeText('room.like.button.text'),onClick:()=>handleToolClick('toggle_room_link'),className:\"icon icon-link-room\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"w-100 room-tool-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,onClick:()=>handleToolClick('settings'),children:LocalizeText('room.settings.button.text')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"w-100 room-tool-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,onClick:()=>handleToolClick('zoom'),children:LocalizeText('room.zoom.button.text')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"w-100 room-tool-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,onClick:()=>handleToolClick('chat_history'),children:LocalizeText('room.chathistory.button.text')})}),navigatorData.canRate&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"w-100 room-tool-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,onClick:()=>handleToolClick('like_room'),children:LocalizeText('room.like.button.text')})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"w-100 room-tool-item\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{underline:true,small:true,onClick:()=>handleToolClick('toggle_room_link'),children:LocalizeText('navigator.embed.caption')})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{justifyContent:\"center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TransitionAnimation,{type:TransitionAnimationTypes.SLIDE_LEFT,inProp:isOpen,timeout:300,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,gap:2,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"nitro-room-tools-info py-2 px-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{wrap:true,variant:\"white\",fontSize:4,children:roomName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"muted\",fontSize:5,children:roomOwner})]}),roomTags&&roomTags.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,children:roomTags.map((tag,index)=>/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,variant:\"white\",className:\"rounded bg-primary p-1\",children:[\"#\",tag]},index))})]})})})})]})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/word-quiz/common/VoteValue.ts\nconst VALUE_KEY_DISLIKE='0';const VALUE_KEY_LIKE='1';\n// CONCATENATED MODULE: ./src/components/room/widgets/word-quiz/WordQuizQuestionView.tsx\nconst WordQuizQuestionView=props=>{const{question=null,canVote=null,vote=null,noVotes=null,yesVotes=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:2,className:\"wordquiz-question p-2\",children:[!canVote&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"bg-danger rounded p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:noVotes})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",center:true,textBreak:true,children:question}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"bg-success rounded p-2\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",children:yesVotes})})]}),canVote&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{variant:\"white\",center:true,textBreak:true,children:question}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,justifyContent:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"bg-danger rounded p-1\",onClick:event=>vote(VALUE_KEY_DISLIKE),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"word-quiz-dislike\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:\"bg-success rounded p-1\",onClick:event=>vote(VALUE_KEY_LIKE),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"word-quiz-like\"})})]})]})]});};\n// EXTERNAL MODULE: ./node_modules/@nitrots/nitro-renderer/src/index.ts + 2202 modules\nvar src = __webpack_require__(50);\n\n// CONCATENATED MODULE: ./src/components/room/widgets/word-quiz/WordQuizVoteView.tsx\nconst WordQuizVoteView=props=>{const{userIndex=null,vote=null,...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ObjectLocationView,{objectId:userIndex,category:src[\"Kg\" /* RoomObjectCategory */].UNIT,...rest,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,pointer:true,className:`bg-${vote===VALUE_KEY_DISLIKE?'danger':'success'} rounded p-1`,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:`word-quiz-${vote===VALUE_KEY_DISLIKE?'dislike':'like'}-sm`})})});};\n// CONCATENATED MODULE: ./src/components/room/widgets/word-quiz/WordQuizWidgetView.tsx\nconst DEFAULT_DISPLAY_DELAY=4000;const SIGN_FADE_DELAY=3;const WordQuizWidgetView=props=>{const[pollId,setPollId]=Object(react[\"useState\"])(-1);const[question,setQuestion]=Object(react[\"useState\"])(null);const[answerSent,setAnswerSent]=Object(react[\"useState\"])(false);const[questionClearTimeout,setQuestionClearTimeout]=Object(react[\"useState\"])(null);const[answerCounts,setAnswerCounts]=Object(react[\"useState\"])(new Map());const[userAnswers,setUserAnswers]=Object(react[\"useState\"])(new Map());const{eventDispatcher=null,widgetHandler=null,roomSession=null}=useRoomContext();const clearQuestion=Object(react[\"useCallback\"])(()=>{setPollId(-1);setQuestion(null);},[]);const onRoomWidgetWordQuizUpdateEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.NEW_QUESTION:setPollId(event.id);setQuestion(event.question);setAnswerSent(false);setAnswerCounts(new Map());setUserAnswers(new Map());setQuestionClearTimeout(prevValue=>{if(prevValue)clearTimeout(prevValue);if(event.duration>0){const delay=event.duration<1000?DEFAULT_DISPLAY_DELAY:event.duration;return setTimeout(()=>clearQuestion(),delay);}return null;});break;case RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_ANSWERED:{const userData=roomSession.userDataManager.getUserData(event.userId);if(!userData)return;setAnswerCounts(event.answerCounts);setUserAnswers(prevValue=>{if(!prevValue.has(userData.roomIndex)){const newValue=new Map(userAnswers);newValue.set(userData.roomIndex,{value:event.value,secondsLeft:SIGN_FADE_DELAY});return newValue;}return prevValue;});break;}case RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_FINISHED:if(question&&question.id===event.questionId){setAnswerCounts(event.answerCounts);setAnswerSent(true);setQuestionClearTimeout(prevValue=>{if(prevValue)clearTimeout(prevValue);return setTimeout(()=>clearQuestion(),DEFAULT_DISPLAY_DELAY);});}setUserAnswers(new Map());break;}},[question,roomSession.userDataManager,userAnswers,clearQuestion]);UseEventDispatcherHook(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.NEW_QUESTION,eventDispatcher,onRoomWidgetWordQuizUpdateEvent);UseEventDispatcherHook(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_ANSWERED,eventDispatcher,onRoomWidgetWordQuizUpdateEvent);UseEventDispatcherHook(RoomWidgetWordQuizUpdateEvent_RoomWidgetWordQuizUpdateEvent.QUESTION_FINISHED,eventDispatcher,onRoomWidgetWordQuizUpdateEvent);const vote=Object(react[\"useCallback\"])(vote=>{if(answerSent||!question)return;const updateMessage=new RoomWidgetPollMessage_RoomWidgetPollMessage(RoomWidgetPollMessage_RoomWidgetPollMessage.ANSWER,pollId);updateMessage.questionId=question.id;updateMessage.answers=[vote];widgetHandler.processWidgetMessage(updateMessage);setAnswerSent(true);},[answerSent,pollId,question,widgetHandler]);const checkSignFade=Object(react[\"useCallback\"])(()=>{setUserAnswers(prevValue=>{const keysToRemove=[];prevValue.forEach((value,key)=>{value.secondsLeft--;if(value.secondsLeft<=0)keysToRemove.push(key);});if(keysToRemove.length===0)return prevValue;const copy=new Map(prevValue);keysToRemove.forEach(key=>copy.delete(key));return copy;});},[]);Object(react[\"useEffect\"])(()=>{const interval=setInterval(()=>checkSignFade(),1000);return()=>clearInterval(interval);},[checkSignFade]);Object(react[\"useEffect\"])(()=>{return()=>{setQuestionClearTimeout(prev=>{if(prev)clearTimeout(prev);return null;});};},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[question&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WordQuizQuestionView,{question:question.content,canVote:!answerSent,vote:vote,noVotes:answerCounts.get(VALUE_KEY_DISLIKE)||0,yesVotes:answerCounts.get(VALUE_KEY_LIKE)||0}),userAnswers&&Array.from(userAnswers.entries()).map((_ref,index)=>{let[key,value]=_ref;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WordQuizVoteView,{userIndex:key,vote:value.value},index);})]});};\n// CONCATENATED MODULE: ./src/components/room/widgets/RoomWidgetsView.tsx\nconst RoomWidgetsView=props=>{const{roomSession=null,eventDispatcher=null,widgetHandler=null}=useRoomContext();const onRoomEngineEvent=Object(react[\"useCallback\"])(event=>{if(!eventDispatcher||nitro_renderer[\"Bg\" /* RoomId */].isRoomPreviewerId(event.roomId))return;switch(event.type){case nitro_renderer[\"og\" /* RoomEngineEvent */].NORMAL_MODE:eventDispatcher.dispatchEvent(new RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent(RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.NORMAL_MODE,event.roomId));return;case nitro_renderer[\"og\" /* RoomEngineEvent */].GAME_MODE:eventDispatcher.dispatchEvent(new RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent(RoomWidgetUpdateRoomEngineEvent_RoomWidgetUpdateRoomEngineEvent.GAME_MODE,event.roomId));return;case nitro_renderer[\"Bh\" /* RoomZoomEvent */].ROOM_ZOOM:{const zoomEvent=event;GetRoomEngine().setRoomInstanceRenderingCanvasScale(event.roomId,1,zoomEvent.level,null,null,false,zoomEvent.asDelta);return;}}},[eventDispatcher]);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].NORMAL_MODE,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].GAME_MODE,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"Bh\" /* RoomZoomEvent */].ROOM_ZOOM,onRoomEngineEvent);const handleRoomAdClick=Object(react[\"useCallback\"])(event=>{},[]);const handleRoomAdTooltip=Object(react[\"useCallback\"])(event=>{},[]);const onRoomEngineObjectEvent=Object(react[\"useCallback\"])(event=>{if(!roomSession||!widgetHandler)return;const objectId=event.objectId;const category=event.category;let updateEvent=null;switch(event.type){case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].SELECTED:if(!IsFurnitureSelectionDisabled(event))updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_SELECTED,objectId,category,event.roomId);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].DESELECTED:updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_DESELECTED,objectId,category,event.roomId);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].ADDED:{let addedEventType=null;switch(category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:addedEventType=RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_ADDED;break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT:addedEventType=RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_ADDED;break;}if(addedEventType)updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(addedEventType,objectId,category,event.roomId);break;}case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REMOVED:{let removedEventType=null;switch(category){case nitro_renderer[\"Ig\" /* RoomObjectCategory */].FLOOR:case nitro_renderer[\"Ig\" /* RoomObjectCategory */].WALL:removedEventType=RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.FURNI_REMOVED;break;case nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT:removedEventType=RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.USER_REMOVED;break;}if(removedEventType)updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(removedEventType,objectId,category,event.roomId);break;}case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_MOVE:if(CanManipulateFurniture(roomSession,objectId,category))ProcessRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_MOVE);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_ROTATE:if(CanManipulateFurniture(roomSession,objectId,category))ProcessRoomObjectOperation(objectId,category,nitro_renderer[\"Kg\" /* RoomObjectOperationType */].OBJECT_ROTATE_POSITIVE);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_MANIPULATION:if(CanManipulateFurniture(roomSession,objectId,category))updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_REQUEST_MANIPULATION,objectId,category,event.roomId);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].MOUSE_ENTER:updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OVER,objectId,category,event.roomId);break;case nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].MOUSE_LEAVE:updateEvent=new RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent(RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent.OBJECT_ROLL_OUT,objectId,category,event.roomId);break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_CREDITFURNI:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CREDITFURNI,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_STICKIE:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_STICKIE,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PRESENT:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PRESENT,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TROPHY:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TROPHY,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TEASER:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_TEASER,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ECOTRONBOX:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ECOTRONBOX,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_DIMMER:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_DIMMER,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PLACEHOLDER:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PLACEHOLDER,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_CLOTHING_CHANGE:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_CLOTHING_CHANGE,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PLAYLIST_EDITOR:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_PLAYLIST_EDITOR,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BADGE_DISPLAY_ENGRAVING:widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_BADGE_DISPLAY_ENGRAVING,objectId,category,event.roomId));break;case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_FAILED:{const roomObject=GetRoomEngine().getRoomObject(event.roomId,objectId,category);const ownerId=roomObject.model.getValue(nitro_renderer[\"Og\" /* RoomObjectVariable */].FURNITURE_OWNER_ID);if(ownerId===GetSessionDataManager().userId){widgetHandler.processWidgetMessage(new RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage(RoomWidgetFurniToWidgetMessage_RoomWidgetFurniToWidgetMessage.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,objectId,category,event.roomId));}break;}case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_FURNI_CONTEXT_MENU:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_FURNI_CONTEXT_MENU:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REMOVE_DIMMER:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MANNEQUIN:case nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_INVENTORY:case nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_ROOM:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BACKGROUND_COLOR:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_FRIEND_FURNITURE_ENGRAVING:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIGH_SCORE_DISPLAY:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIDE_HIGH_SCORE_DISPLAY:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_INTERNAL_LINK:case nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ROOM_LINK:widgetHandler.processEvent(event);break;case nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].FURNI_CLICK:case nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].FURNI_DOUBLE_CLICK:handleRoomAdClick(event);break;case nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].TOOLTIP_SHOW:case nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].TOOLTIP_HIDE:handleRoomAdTooltip(event);break;}if(updateEvent){let dispatchEvent=true;if(updateEvent instanceof RoomWidgetUpdateRoomObjectEvent_RoomWidgetUpdateRoomObjectEvent)dispatchEvent=!nitro_renderer[\"Bg\" /* RoomId */].isRoomPreviewerId(updateEvent.roomId);if(dispatchEvent)widgetHandler.eventDispatcher.dispatchEvent(updateEvent);}},[roomSession,widgetHandler,handleRoomAdClick,handleRoomAdTooltip]);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].SELECTED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].DESELECTED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].ADDED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REMOVED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].PLACED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_MOVE,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_ROTATE,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].REQUEST_MANIPULATION,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].MOUSE_ENTER,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].MOUSE_LEAVE,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_CREDITFURNI,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_STICKIE,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PRESENT,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TROPHY,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_TEASER,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ECOTRONBOX,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_DIMMER,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PLACEHOLDER,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_CLOTHING_CHANGE,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_PLAYLIST_EDITOR,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BADGE_DISPLAY_ENGRAVING,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_WIDGET,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_WIDGET,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].OPEN_FURNI_CONTEXT_MENU,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].CLOSE_FURNI_CONTEXT_MENU,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REMOVE_DIMMER,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_MANNEQUIN,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_INVENTORY,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"tg\" /* RoomEngineUseProductEvent */].USE_PRODUCT_FROM_ROOM,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_BACKGROUND_COLOR,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_FRIEND_FURNITURE_ENGRAVING,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIGH_SCORE_DISPLAY,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_HIDE_HIGH_SCORE_DISPLAY,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_INTERNAL_LINK,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"sg\" /* RoomEngineTriggerWidgetEvent */].REQUEST_ROOM_LINK,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].FURNI_CLICK,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].FURNI_DOUBLE_CLICK,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].TOOLTIP_SHOW,onRoomEngineObjectEvent);UseRoomEngineEvent(nitro_renderer[\"rg\" /* RoomEngineRoomAdEvent */].TOOLTIP_HIDE,onRoomEngineObjectEvent);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{if(!widgetHandler)return;widgetHandler.processEvent(event);},[widgetHandler]);UseRoomSessionManagerEvent(nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].CHAT_EVENT,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Tg\" /* RoomSessionChatEvent */].FLOOD_EVENT,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Ug\" /* RoomSessionDanceEvent */].RSDE_DANCE,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"eh\" /* RoomSessionUserBadgesEvent */].RSUBE_BADGES,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"gh\" /* RoomSessionUserFigureUpdateEvent */].USER_FIGURE,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Zg\" /* RoomSessionFavoriteGroupUpdateEvent */].FAVOURITE_GROUP_UPDATE,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"bh\" /* RoomSessionPetStatusUpdateEvent */].PET_STATUS_UPDATE,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].DOORBELL,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_REJECTED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Wg\" /* RoomSessionDoorbellEvent */].RSDE_ACCEPTED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Vg\" /* RoomSessionDimmerPresetsEvent */].ROOM_DIMMER_PRESETS,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"dh\" /* RoomSessionPresentEvent */].RSPE_PRESENT_OPENED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"ah\" /* RoomSessionPetInfoUpdateEvent */].PET_INFO,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].ANSWERED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].FINISHED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"hh\" /* RoomSessionWordQuizEvent */].QUESTION,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"ch\" /* RoomSessionPollEvent */].OFFER,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"ch\" /* RoomSessionPollEvent */].ERROR,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"ch\" /* RoomSessionPollEvent */].CONTENT,onRoomSessionEvent);const onRoomSessionErrorMessageEvent=Object(react[\"useCallback\"])(event=>{if(!event)return;let errorTitle=LocalizeText('error.title');let errorMessage='';switch(event.type){case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_MAX_PETS:errorMessage=LocalizeText('room.error.max_pets');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_MAX_NUMBER_OF_OWN_PETS:errorMessage=LocalizeText('room.error.max_own_pets');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_KICKED:errorMessage=LocalizeText('room.error.kicked');errorTitle=LocalizeText('generic.alert.title');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_PETS_FORBIDDEN_IN_HOTEL:errorMessage=LocalizeText('room.error.pets.forbidden_in_hotel');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_PETS_FORBIDDEN_IN_FLAT:errorMessage=LocalizeText('room.error.pets.forbidden_in_flat');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_NO_FREE_TILES_FOR_PET:errorMessage=LocalizeText('room.error.pets.no_free_tiles');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:errorMessage=LocalizeText('room.error.pets.selected_tile_not_free');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOTS_FORBIDDEN_IN_HOTEL:errorMessage=LocalizeText('room.error.bots.forbidden_in_hotel');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOTS_FORBIDDEN_IN_FLAT:errorMessage=LocalizeText('room.error.bots.forbidden_in_flat');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOT_LIMIT_REACHED:errorMessage=LocalizeText('room.error.max_bots');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:errorMessage=LocalizeText('room.error.bots.selected_tile_not_free');break;case nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOT_NAME_NOT_ACCEPTED:errorMessage=LocalizeText('room.error.bots.name.not.accepted');break;default:return;}NotificationUtilities_NotificationUtilities.simpleAlert(errorMessage,NotificationAlertType.DEFAULT,null,null,errorTitle);},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_KICKED,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_PETS_FORBIDDEN_IN_HOTEL,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_PETS_FORBIDDEN_IN_FLAT,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_MAX_PETS,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_MAX_NUMBER_OF_OWN_PETS,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_NO_FREE_TILES_FOR_PET,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOTS_FORBIDDEN_IN_HOTEL,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOTS_FORBIDDEN_IN_FLAT,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOT_LIMIT_REACHED,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,onRoomSessionErrorMessageEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Xg\" /* RoomSessionErrorMessageEvent */].RSEME_BOT_NAME_NOT_ACCEPTED,onRoomSessionErrorMessageEvent);if(!widgetHandler)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarInfoWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatInputView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DoorbellWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurnitureWidgetsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InfoStandWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomToolsWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomThumbnailWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FurniChooserWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserChooserWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WordQuizWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendRequestWidgetView,{})]});};\n// CONCATENATED MODULE: ./src/components/room/RoomView.tsx\nconst RoomView=props=>{const[roomSession,setRoomSession]=Object(react[\"useState\"])(null);const[widgetHandler,setWidgetHandler]=Object(react[\"useState\"])(null);const elementRef=Object(react[\"useRef\"])();const onRoomEngineEvent=Object(react[\"useCallback\"])(event=>{if(nitro_renderer[\"Bg\" /* RoomId */].isRoomPreviewerId(event.roomId))return;const session=GetRoomSession();if(!session)return;switch(event.type){case nitro_renderer[\"og\" /* RoomEngineEvent */].INITIALIZED:SetActiveRoomId(event.roomId);setRoomSession(session);return;case nitro_renderer[\"og\" /* RoomEngineEvent */].DISPOSED:setRoomSession(null);return;}},[]);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].INITIALIZED,onRoomEngineEvent);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].DISPOSED,onRoomEngineEvent);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED:StartRoomSession(event.session);return;case nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED:setRoomSession(null);return;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);const resize=Object(react[\"useCallback\"])(function(){let event=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;const canvas=GetNitroInstance().renderer.view;if(!canvas)return;canvas.style.width=`${Math.floor(window.innerWidth)}px`;canvas.style.height=`${Math.floor(window.innerHeight)}px`;const nitroInstance=GetNitroInstance();nitroInstance.renderer.resolution=window.devicePixelRatio;nitroInstance.renderer.resize(window.innerWidth,window.innerHeight);InitializeRoomInstanceRenderingCanvas(window.innerWidth,window.innerHeight,1);nitroInstance.render();},[]);Object(react[\"useEffect\"])(()=>{if(!roomSession){setWidgetHandler(null);return;}const widgetHandlerManager=new RoomWidgetHandlerManager_RoomWidgetHandlerManager(roomSession,new nitro_renderer[\"xb\" /* EventDispatcher */]());widgetHandlerManager.registerHandler(new RoomWidgetAvatarInfoHandler_RoomWidgetAvatarInfoHandler());widgetHandlerManager.registerHandler(new RoomWidgetInfostandHandler_RoomWidgetInfostandHandler());widgetHandlerManager.registerHandler(new RoomWidgetChatInputHandler_RoomWidgetChatInputHandler());widgetHandlerManager.registerHandler(new RoomWidgetChatHandler_RoomWidgetChatHandler());widgetHandlerManager.registerHandler(new UserChooserWidgetHandler_UserChooserWidgetHandler());widgetHandlerManager.registerHandler(new WordQuizWidgetHandler_WordQuizWidgetHandler());widgetHandlerManager.registerHandler(new PollWidgetHandler_PollWidgetHandler());widgetHandlerManager.registerHandler(new FurniChooserWidgetHandler_FurniChooserWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureContextMenuWidgetHandler_FurnitureContextMenuWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureCreditWidgetHandler_FurnitureCreditWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureCustomStackHeightWidgetHandler_FurnitureCustomStackHeightWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureExternalImageWidgetHandler_FurnitureExternalImageWidgetHandler());widgetHandlerManager.registerHandler(new FurniturePresentWidgetHandler_FurniturePresentWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureDimmerWidgetHandler_FurnitureDimmerWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureYoutubeDisplayWidgetHandler_FurnitureYoutubeDisplayWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureMannequinWidgetHandler_FurnitureMannequinWidgetHandler());widgetHandlerManager.registerHandler(new FurnitureInternalLinkHandler_FurnitureInternalLinkHandler());widgetHandlerManager.registerHandler(new FurnitureRoomLinkHandler_FurnitureRoomLinkHandler());setWidgetHandler(widgetHandlerManager);const roomEngine=GetRoomEngine();const roomId=roomSession.roomId;const canvasId=1;resize();const displayObject=roomEngine.getRoomInstanceDisplay(roomId,canvasId,window.innerWidth,window.innerHeight,nitro_renderer[\"Ag\" /* RoomGeometry */].SCALE_ZOOMED_IN);if(!displayObject)return;const geometry=roomEngine.getRoomInstanceGeometry(roomId,canvasId);if(geometry){const minX=roomEngine.getRoomInstanceVariable(roomId,nitro_renderer[\"vh\" /* RoomVariableEnum */].ROOM_MIN_X)||0;const maxX=roomEngine.getRoomInstanceVariable(roomId,nitro_renderer[\"vh\" /* RoomVariableEnum */].ROOM_MAX_X)||0;const minY=roomEngine.getRoomInstanceVariable(roomId,nitro_renderer[\"vh\" /* RoomVariableEnum */].ROOM_MIN_Y)||0;const maxY=roomEngine.getRoomInstanceVariable(roomId,nitro_renderer[\"vh\" /* RoomVariableEnum */].ROOM_MAX_Y)||0;let x=(minX+maxX)/2;let y=(minY+maxY)/2;const offset=20;x=x+(offset-1);y=y+(offset-1);const z=Math.sqrt(offset*offset+offset*offset)*Math.tan(30/180*Math.PI);geometry.location=new nitro_renderer[\"Ui\" /* Vector3d */](x,y,z);}const stage=GetNitroInstance().stage;if(!stage)return;stage.addChild(displayObject);SetActiveRoomId(roomSession.roomId);},[roomSession,resize]);Object(react[\"useEffect\"])(()=>{const canvas=GetNitroInstance().renderer.view;if(!canvas)return;canvas.onclick=event=>DispatchMouseEvent(event);canvas.onmousemove=event=>DispatchMouseEvent(event);canvas.onmousedown=event=>DispatchMouseEvent(event);canvas.onmouseup=event=>DispatchMouseEvent(event);canvas.ontouchstart=event=>DispatchTouchEvent(event);canvas.ontouchmove=event=>DispatchTouchEvent(event);canvas.ontouchend=event=>DispatchTouchEvent(event);canvas.ontouchcancel=event=>DispatchTouchEvent(event);resize();const element=elementRef.current;if(element)element.appendChild(canvas);window.addEventListener('resize',resize);return()=>{if(element)element.removeChild(canvas);window.removeEventListener('resize',resize);};},[resize]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomContextProvider,{value:{roomSession,eventDispatcher:widgetHandler&&widgetHandler.eventDispatcher,widgetHandler},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{fit:true,innerRef:elementRef,className:!roomSession&&'d-none',children:roomSession&&widgetHandler&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomColorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomWidgetsView,{}),roomSession.isSpectator&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomSpectatorView,{})]})})});};\n// CONCATENATED MODULE: ./src/components/toolbar/ToolbarMeView.tsx\nconst ToolbarMeView=props=>{const{useGuideTool=false,unseenAchievementCount=0,setMeExpanded=null,children=null,...rest}=props;const elementRef=Object(react[\"useRef\"])();Object(react[\"useEffect\"])(()=>{const roomSession=GetRoomSession();if(!roomSession)return;GetRoomEngine().selectRoomObject(roomSession.roomId,roomSession.ownRoomIndex,nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT);},[]);Object(react[\"useEffect\"])(()=>{const onClick=event=>setMeExpanded(false);document.addEventListener('click',onClick);return()=>document.removeEventListener(nitro_renderer[\"Ce\" /* MouseEventType */].MOUSE_CLICK,onClick);},[setMeExpanded]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{innerRef:elementRef,alignItems:\"center\",className:\"nitro-toolbar-me p-2\",gap:3,children:[useGuideTool&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"center\",onClick:event=>DispatchUiEvent(new GuideToolEvent_GuideToolEvent(GuideToolEvent_GuideToolEvent.TOGGLE_GUIDE_TOOL)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-me-helper-tool\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"me-text\",children:LocalizeText('widget.memenu.guide')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"center\",onClick:event=>CreateLinkEvent('achievements/toggle'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-me-achievements\",children:unseenAchievementCount>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:unseenAchievementCount})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"me-text\",children:LocalizeText('widget.memenu.achievements')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"center\",onClick:event=>GetUserProfile(GetSessionDataManager().userId),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-me-profile\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"me-text\",children:LocalizeText('widget.memenu.profile')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"center\",onClick:event=>CreateLinkEvent('navigator/search/myworld_view'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-me-rooms\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"me-text\",children:LocalizeText('widget.memenu.myrooms')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,alignItems:\"center\",onClick:event=>CreateLinkEvent('avatar-editor/toggle'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-me-clothing\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"me-text\",children:LocalizeText('widget.memenu.myclothes')})]}),children]});};\n// CONCATENATED MODULE: ./src/components/toolbar/ToolbarView.tsx\nconst ToolbarView=props=>{const{isInRoom}=props;const[isMeExpanded,setMeExpanded]=Object(react[\"useState\"])(false);const[leftSideCollapsed,setLeftSideCollapsed]=Object(react[\"useState\"])(true);const[rightSideCollapsed,setRightSideCollapsed]=Object(react[\"useState\"])(true);const[useGuideTool,setUseGuideTool]=Object(react[\"useState\"])(false);const{userFigure=null}=useSessionInfo();const{getFullCount=0}=useInventoryUnseenTracker();const{getTotalUnseen=0}=useAchievements();const{requests=[]}=useFriends();const{iconState=MessengerIconState.HIDDEN}=useMessenger();const isMod=GetSessionDataManager().isModerator;const onPerkAllowancesMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setUseGuideTool(parser.isAllowed(nitro_renderer[\"lf\" /* PerkEnum */].USE_GUIDE_TOOL));},[setUseGuideTool]);UseMessageEventHook(nitro_renderer[\"kf\" /* PerkAllowancesMessageEvent */],onPerkAllowancesMessageEvent);const animationIconToToolbar=Object(react[\"useCallback\"])((iconName,image,x,y)=>{const target=document.body.getElementsByClassName(iconName)[0];if(!target)return;image.className='toolbar-icon-animation';image.style.visibility='visible';image.style.left=x+'px';image.style.top=y+'px';document.body.append(image);const targetBounds=target.getBoundingClientRect();const imageBounds=image.getBoundingClientRect();const left=imageBounds.x-targetBounds.x;const top=imageBounds.y-targetBounds.y;const squared=Math.sqrt(left*left+top*top);const wait=500-Math.abs(1/squared*100*500*0.5);const height=20;const motionName=`ToolbarBouncing[${iconName}]`;if(!nitro_renderer[\"Be\" /* Motions */].getMotionByTag(motionName)){nitro_renderer[\"Be\" /* Motions */].runMotion(new nitro_renderer[\"Hf\" /* Queue */](new nitro_renderer[\"Xi\" /* Wait */](wait+8),new nitro_renderer[\"vb\" /* DropBounce */](target,400,12))).tag=motionName;}const motion=new nitro_renderer[\"Hf\" /* Queue */](new nitro_renderer[\"wb\" /* EaseOut */](new nitro_renderer[\"Ud\" /* JumpBy */](image,wait,targetBounds.x-imageBounds.x+height,targetBounds.y-imageBounds.y,100,1),1),new nitro_renderer[\"ub\" /* Dispose */](image));nitro_renderer[\"Be\" /* Motions */].runMotion(motion);},[]);const onNitroToolbarAnimateIconEvent=Object(react[\"useCallback\"])(event=>{animationIconToToolbar('icon-inventory',event.image,event.x,event.y);},[animationIconToToolbar]);UseRoomEngineEvent(nitro_renderer[\"df\" /* NitroToolbarAnimateIconEvent */].ANIMATE_ICON,onNitroToolbarAnimateIconEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TransitionAnimation,{type:TransitionAnimationTypes.FADE_IN,inProp:isMeExpanded,timeout:300,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ToolbarMeView,{useGuideTool:useGuideTool,unseenAchievementCount:getTotalUnseen,setMeExpanded:setMeExpanded})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",id:\"toolbar-chat-input-container\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",gap:2,className:\"nitro-toolbar py-1 px-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:leftSideCollapsed?'toolbar-left-collapse':'toolbar-left-collapse-active',onClick:()=>setLeftSideCollapsed(collapsed=>!collapsed)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:2,alignItems:\"center\",className:\"toolbar-left-side\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[leftSideCollapsed&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[isInRoom&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-habbo\",onClick:event=>VisitDesktop()}),!isInRoom&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-house\",onClick:event=>CreateLinkEvent('navigator/goto/home')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-rooms\",onClick:event=>CreateLinkEvent('navigator/toggle')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-catalog\",onClick:event=>CreateLinkEvent('catalog/toggle')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-inventory\",onClick:event=>CreateLinkEvent('inventory/toggle'),children:getFullCount>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:getFullCount})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,pointer:true,className:'navigation-item item-avatar '+(isMeExpanded?'active ':''),onClick:event=>setMeExpanded(!isMeExpanded),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userFigure,direction:2,position:\"absolute\"}),getTotalUnseen>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:getTotalUnseen})]}),isInRoom&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-camera\",onClick:event=>CreateLinkEvent('camera/toggle')}),isMod&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-modtools\",onClick:event=>DispatchUiEvent(new ModToolsEvent_ModToolsEvent(ModToolsEvent_ModToolsEvent.TOGGLE_MOD_TOOLS))})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:\"navigation-item icon icon-friendall\",onClick:event=>CreateLinkEvent('friends/toggle'),children:requests.length>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutItemCountView,{count:requests.length})}),(iconState===MessengerIconState.SHOW||iconState===MessengerIconState.UNREAD)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{pointer:true,className:`navigation-item icon icon-message ${iconState===MessengerIconState.UNREAD&&'is-unseen'}`,onClick:event=>OpenMessengerChat()})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{id:\"toolbar-friend-bar-container\",className:rightSideCollapsed?'d-none d-lg-block':'d-none'})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:rightSideCollapsed?'toolbar-right-collapse':'toolbar-right-collapse-active',onClick:()=>setRightSideCollapsed(collapsed=>!collapsed)})]})]});};\n// CONCATENATED MODULE: ./src/components/user-profile/views/BadgesContainerView.tsx\nconst BadgesContainerView=props=>{const{badges=null,gap=1,justifyContent='between',...rest}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:badges&&badges.length>0&&badges.map((badge,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:badge},badge)},badge);})});};\n// CONCATENATED MODULE: ./src/components/user-profile/views/RelationshipsContainerView.tsx\nconst RelationshipsContainerView=props=>{const{relationships=null}=props;const RelationshipComponent=_ref=>{let{type}=_ref;const relationshipInfo=relationships&&relationships.relationshipStatusMap.hasKey(type)?relationships.relationshipStatusMap.getValue(type):null;const relationshipName=nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].RELATIONSHIP_NAMES[type].toLocaleLowerCase();return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{fullWidth:true,gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,className:\"user-relationship\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`nitro-friends-spritesheet icon-${relationshipName}`})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{grow:true,gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",justifyContent:\"between\",className:\"profile-white-bg px-2 py-1 user-relationship\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,underline:true,pointer:true,onClick:event=>relationshipInfo&&relationshipInfo.randomFriendId>=1&&GetUserProfile(relationshipInfo.randomFriendId),children:[(!relationshipInfo||relationshipInfo.friendCount===0)&&LocalizeText('extendedprofile.add.friends'),relationshipInfo&&relationshipInfo.friendCount>=1&&relationshipInfo.randomFriendName]}),relationshipInfo&&relationshipInfo.friendCount>=1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{center:true,position:\"relative\",className:\"avatar-image-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:relationshipInfo.randomFriendFigure,headOnly:true,direction:4})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,italics:true,className:\"user-relationship-count\",children:[(!relationshipInfo||relationshipInfo.friendCount===0)&&LocalizeText('extendedprofile.no.friends.in.this.category'),relationshipInfo&&relationshipInfo.friendCount>1&&LocalizeText(`extendedprofile.relstatus.others.${relationshipName}`,['count'],[(relationshipInfo.friendCount-1).toString()]),\"\\xA0\"]})]})]});};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].HEART}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].SMILE}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipComponent,{type:nitro_renderer[\"Lf\" /* RelationshipStatusEnum */].BOBBA})]});};\n// CONCATENATED MODULE: ./src/components/user-profile/views/FriendsContainerView.tsx\nconst FriendsContainerView=props=>{const{relationships=null,friendsCount=null}=props;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:LocalizeText('extendedprofile.friends.count')}),\" \",friendsCount]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,children:LocalizeText('extendedprofile.relstatus')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RelationshipsContainerView,{relationships:relationships})})]});};\n// CONCATENATED MODULE: ./src/components/user-profile/views/GroupsContainerView.tsx\nconst GroupsContainerView=props=>{const{itsMe=null,groups=null,onLeaveGroup=null,overflow='hidden',gap=2,...rest}=props;const[selectedGroupId,setSelectedGroupId]=Object(react[\"useState\"])(null);const[groupInformation,setGroupInformation]=Object(react[\"useState\"])(null);const onGroupInformationEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!selectedGroupId||selectedGroupId!==parser.id||parser.flag)return;setGroupInformation(parser);},[selectedGroupId]);UseMessageEventHook(nitro_renderer[\"Uc\" /* GroupInformationEvent */],onGroupInformationEvent);Object(react[\"useEffect\"])(()=>{if(!selectedGroupId)return;SendMessageComposer(new nitro_renderer[\"Tc\" /* GroupInformationComposer */](selectedGroupId,false));},[selectedGroupId]);Object(react[\"useEffect\"])(()=>{setGroupInformation(null);if(groups.length>0){setSelectedGroupId(prevValue=>{if(prevValue===groups[0].groupId){SendMessageComposer(new nitro_renderer[\"Tc\" /* GroupInformationComposer */](groups[0].groupId,false));}return groups[0].groupId;});}},[groups]);if(!groups||!groups.length){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,fullHeight:true,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{className:\"profile-grey-bg py-3 px-4\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,children:[\" \",LocalizeText('extendedprofile.nogroups.user')]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"center\",gap:4,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"no-group-spritesheet image-1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"no-group-spritesheet image-2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{className:\"no-group-spritesheet image-3\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,children:LocalizeText('extendedprofile.nogroups.info')})]})});}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{overflow:overflow,gap:2,...rest,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{alignItems:\"center\",size:2,overflow:\"auto\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AutoGrid,{overflow:null,columnCount:1,columnMinHeight:50,className:\"user-groups-container\",children:groups.map((group,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(LayoutGridItem,{overflow:\"unset\",itemActive:selectedGroupId===group.groupId,onClick:()=>setSelectedGroupId(group.groupId),className:\"p-1\",children:[itsMe&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:'position-absolute end-0 top-0 z-index-1 icon icon-group-'+(group.favourite?'favorite':'not-favorite'),onClick:()=>ToggleFavoriteGroup(group)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutBadgeImageView,{badgeCode:group.badgeCode,isGroup:true})]},index);})})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:10,overflow:\"hidden\",children:groupInformation&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupInformationView,{groupInformation:groupInformation,onClose:onLeaveGroup})})]});};\n// CONCATENATED MODULE: ./src/components/user-profile/views/UserContainerView.tsx\nconst UserContainerView=props=>{const{userProfile=null}=props;const[requestSent,setRequestSent]=Object(react[\"useState\"])(userProfile.requestSent);const isOwnProfile=userProfile.id===GetSessionDataManager().userId;const canSendFriendRequest=!requestSent&&!isOwnProfile&&!userProfile.isMyFriend&&!userProfile.requestSent;const addFriend=()=>{setRequestSent(true);SendMessageComposer(new nitro_renderer[\"Uf\" /* RequestFriendComposer */](userProfile.username));};Object(react[\"useEffect\"])(()=>{setRequestSent(userProfile.requestSent);},[userProfile]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{center:true,className:\"avatar-container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:userProfile.figure,direction:2})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,children:userProfile.username}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{italics:true,textBreak:true,small:true,children:[userProfile.motto,\"\\xA0\"]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:LocalizeText('extendedprofile.created')}),\" \",userProfile.registration]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:LocalizeText('extendedprofile.last.login')}),\" \",nitro_renderer[\"Kb\" /* FriendlyTime */].format(userProfile.secondsSinceLastVisit,'.ago',2)]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{small:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:LocalizeText('extendedprofile.achievementscore')}),\" \",userProfile.achievementPoints]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[userProfile.isOnline&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-pf-online\"}),!userProfile.isOnline&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-pf-offline\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[canSendFriendRequest&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,pointer:true,onClick:addFriend,children:LocalizeText('extendedprofile.addasafriend')}),!canSendFriendRequest&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-pf-tick\"}),isOwnProfile&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,children:LocalizeText('extendedprofile.me')}),userProfile.isMyFriend&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('extendedprofile.friend')}),(requestSent||userProfile.requestSent)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('extendedprofile.friendrequestsent')})]})]})]})]})]});};\n// CONCATENATED MODULE: ./src/components/user-profile/UserProfileView.tsx\nconst UserProfileView=props=>{const[userProfile,setUserProfile]=Object(react[\"useState\"])(null);const[userBadges,setUserBadges]=Object(react[\"useState\"])([]);const[userRelationships,setUserRelationships]=Object(react[\"useState\"])(null);const onClose=()=>{setUserProfile(null);setUserBadges([]);setUserRelationships(null);};const onLeaveGroup=Object(react[\"useCallback\"])(()=>{if(!userProfile||userProfile.id!==GetSessionDataManager().userId)return;GetUserProfile(userProfile.id);},[userProfile]);const onUserCurrentBadgesEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!userProfile||parser.userId!==userProfile.id)return;setUserBadges(parser.badges);},[userProfile]);UseMessageEventHook(nitro_renderer[\"Ci\" /* UserCurrentBadgesEvent */],onUserCurrentBadgesEvent);const onUserRelationshipsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();if(!userProfile||parser.userId!==userProfile.id)return;setUserRelationships(parser);},[userProfile]);UseMessageEventHook(nitro_renderer[\"Mf\" /* RelationshipStatusInfoEvent */],onUserRelationshipsEvent);const onUserProfileEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();let isSameProfile=false;setUserProfile(prevValue=>{if(prevValue&&prevValue.id)isSameProfile=prevValue.id===parser.id;return parser;});if(!isSameProfile){setUserBadges([]);setUserRelationships(null);}SendMessageComposer(new nitro_renderer[\"Bi\" /* UserCurrentBadgesComposer */](parser.id));SendMessageComposer(new nitro_renderer[\"Ki\" /* UserRelationshipsComposer */](parser.id));},[]);UseMessageEventHook(nitro_renderer[\"Ji\" /* UserProfileEvent */],onUserProfileEvent);const onRoomEngineObjectEvent=Object(react[\"useCallback\"])(event=>{if(!userProfile)return;if(event.category!==nitro_renderer[\"Ig\" /* RoomObjectCategory */].UNIT)return;const userData=GetRoomSession().userDataManager.getUserDataByIndex(event.objectId);if(userData.type!==nitro_renderer[\"Mg\" /* RoomObjectType */].USER)return;GetUserProfile(userData.webID);},[userProfile]);UseRoomEngineEvent(nitro_renderer[\"pg\" /* RoomEngineObjectEvent */].SELECTED,onRoomEngineObjectEvent);if(!userProfile)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"nitro-user-profile\",theme:\"primary\",className:\"user-profile\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('extendedprofile.caption'),onCloseClick:onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Grid,{fullHeight:false,gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{size:7,gap:1,className:\"user-container pe-2\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserContainerView,{userProfile:userProfile}),userProfile.id===GetSessionDataManager().userId&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{className:\"p-0\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{small:true,underline:true,className:\"cursor-pointer\",onClick:event=>CreateLinkEvent('avatar-editor/toggle'),children:\"Change Clothes\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"cursor-pointer badge-text\",small:true,underline:true,onClick:event=>CreateLinkEvent('inventory/toggle'),children:\"Change Badges\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Grid,{columnCount:5,fullHeight:true,className:\"profile-grey-bg p-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(BadgesContainerView,{fullWidth:true,center:true,badges:userBadges})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{size:5,children:userRelationships&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsContainerView,{relationships:userRelationships,friendsCount:userProfile.friendsCount})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"center\",className:\"rooms-button-container px-2 py-1\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,onClick:event=>CreateLinkEvent(`navigator/search/hotel_view/owner:${userProfile.username}`),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:\"icon icon-rooms\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{bold:true,small:true,underline:true,pointer:true,children:LocalizeText('extendedprofile.rooms')})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupsContainerView,{fullWidth:true,itsMe:userProfile.id===GetSessionDataManager().userId,groups:userProfile.groups,onLeaveGroup:onLeaveGroup})]})]});};\n// CONCATENATED MODULE: ./src/components/user-settings/UserSettingsView.tsx\nconst UserSettingsView=props=>{const[isVisible,setIsVisible]=Object(react[\"useState\"])(false);const[userSettings,setUserSettings]=Object(react[\"useState\"])(null);const[catalogPlaceMultipleObjects,setCatalogPlaceMultipleObjects]=useCatalogPlaceMultipleItems();const[catalogSkipPurchaseConfirmation,setCatalogSkipPurchaseConfirmation]=useCatalogSkipPurchaseConfirmation();const onUserSettingsEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();const settingsEvent=new nitro_renderer[\"Ze\" /* NitroSettingsEvent */]();settingsEvent.volumeSystem=parser.volumeSystem;settingsEvent.volumeFurni=parser.volumeFurni;settingsEvent.volumeTrax=parser.volumeTrax;settingsEvent.oldChat=parser.oldChat;settingsEvent.roomInvites=parser.roomInvites;settingsEvent.cameraFollow=parser.cameraFollow;settingsEvent.flags=parser.flags;settingsEvent.chatType=parser.chatType;setUserSettings(settingsEvent);DispatchMainEvent(settingsEvent);},[]);UseMessageEventHook(nitro_renderer[\"Mi\" /* UserSettingsEvent */],onUserSettingsEvent);const processAction=Object(react[\"useCallback\"])((type,value)=>{let doUpdate=true;const clone=userSettings.clone();switch(type){case'close_view':setIsVisible(false);doUpdate=false;return;case'oldchat':clone.oldChat=value;SendMessageComposer(new nitro_renderer[\"Ni\" /* UserSettingsOldChatComposer */](clone.oldChat));break;case'room_invites':clone.roomInvites=value;SendMessageComposer(new nitro_renderer[\"Oi\" /* UserSettingsRoomInvitesComposer */](clone.roomInvites));break;case'camera_follow':clone.cameraFollow=value;SendMessageComposer(new nitro_renderer[\"Li\" /* UserSettingsCameraFollowComposer */](clone.cameraFollow));break;case'system_volume':clone.volumeSystem=value;clone.volumeSystem=Math.max(0,clone.volumeSystem);clone.volumeSystem=Math.min(100,clone.volumeSystem);break;case'furni_volume':clone.volumeFurni=value;clone.volumeFurni=Math.max(0,clone.volumeFurni);clone.volumeFurni=Math.min(100,clone.volumeFurni);break;case'trax_volume':clone.volumeTrax=value;clone.volumeTrax=Math.max(0,clone.volumeTrax);clone.volumeTrax=Math.min(100,clone.volumeTrax);break;}if(doUpdate)setUserSettings(clone);DispatchMainEvent(clone);},[userSettings]);const saveRangeSlider=Object(react[\"useCallback\"])(type=>{switch(type){case'volume':SendMessageComposer(new nitro_renderer[\"Pi\" /* UserSettingsSoundComposer */](Math.round(userSettings.volumeSystem),Math.round(userSettings.volumeFurni),Math.round(userSettings.volumeTrax)));break;}},[userSettings]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;}},eventUrlPrefix:'user-settings/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);Object(react[\"useEffect\"])(()=>{if(!userSettings)return;DispatchUiEvent(userSettings);},[userSettings]);if(!isVisible)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"user-settings\",className:\"user-settings-window\",theme:\"settings\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('widget.memenu.settings.title'),onCloseClick:event=>processAction('close_view')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{gap:3,className:\"text-white\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:userSettings.oldChat,onChange:event=>processAction('oldchat',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('memenu.settings.chat.prefer.old.chat')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:userSettings.roomInvites,onChange:event=>processAction('room_invites',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('memenu.settings.other.ignore.room.invites')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:userSettings.cameraFollow,onChange:event=>processAction('camera_follow',event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('memenu.settings.other.disable.room.camera.follow')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:catalogPlaceMultipleObjects,onChange:event=>setCatalogPlaceMultipleObjects(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('memenu.settings.other.place.multiple.objects')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"flash-form-check-input\",type:\"checkbox\",checked:catalogSkipPurchaseConfirmation,onChange:event=>setCatalogSkipPurchaseConfirmation(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('memenu.settings.other.skip.purchase.confirmation')})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,children:LocalizeText('widget.memenu.settings.volume')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"w-25\",children:LocalizeText('widget.memenu.settings.volume.ui')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeSystem>1?'icon icon-sound-off':'icon icon-sound-off-active'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"number-range\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeSystem\",value:userSettings.volumeSystem,onChange:event=>processAction('system_volume',event.target.value),onMouseUp:()=>saveRangeSlider('volume')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeSystem<1?'icon icon-sound-on':'icon icon-sound-on-active'})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"w-25\",children:LocalizeText('widget.memenu.settings.volume.furni')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeFurni>1?'icon icon-sound-off':'icon icon-sound-off-active'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"number-range\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeFurni\",value:userSettings.volumeFurni,onChange:event=>processAction('furni_volume',event.target.value),onMouseUp:()=>saveRangeSlider('volume')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeFurni<1?'icon icon-sound-on':'icon icon-sound-on-active'})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:2,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{className:\"w-25\",children:LocalizeText('widget.memenu.settings.volume.trax')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeTrax>1?'icon icon-sound-off':'icon icon-sound-off-active'}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:0,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{className:\"number-range\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"range\",className:\"custom-range\",min:\"0\",max:\"100\",step:\"1\",id:\"volumeTrax\",value:userSettings.volumeTrax,onChange:event=>processAction('trax_volume',event.target.value),onMouseUp:()=>saveRangeSlider('volume')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:userSettings.volumeTrax<1?'icon icon-sound-on':'icon icon-sound-on-active'})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{alignItems:\"end\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>processAction('close_view'),children:LocalizeText('generic.back')})})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/WiredContext.tsx\nconst WiredContext=/*#__PURE__*/Object(react[\"createContext\"])({trigger:null,setTrigger:null,intParams:null,setIntParams:null,stringParam:null,setStringParam:null,furniIds:null,setFurniIds:null,actionDelay:null,setActionDelay:null,saveWired:null});const WiredContextProvider=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredContext.Provider,{value:props.value,children:props.children});};const useWiredContext=()=>Object(react[\"useContext\"])(WiredContext);\n// CONCATENATED MODULE: ./src/components/wired/views/WiredFurniSelectorView.tsx\nconst WiredFurniSelectorView=props=>{const{trigger=null,furniIds=[],setFurniIds=null}=useWiredContext();const onWiredSelectObjectEvent=Object(react[\"useCallback\"])(event=>{const furniId=event.objectId;if(furniId<=0)return;setFurniIds(prevValue=>{const newFurniIds=[...prevValue];const index=prevValue.indexOf(furniId);if(index>=0){newFurniIds.splice(index,1);WiredSelectionVisualizer_WiredSelectionVisualizer.hide(furniId);}else if(newFurniIds.length<trigger.maximumItemSelectionCount){newFurniIds.push(furniId);WiredSelectionVisualizer_WiredSelectionVisualizer.show(furniId);}return newFurniIds;});},[trigger,setFurniIds]);UseUiEvent(WiredSelectObjectEvent_WiredSelectObjectEvent.SELECT_OBJECT,onWiredSelectObjectEvent);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.pickfurnis.caption',['count','limit'],[furniIds.length.toString(),trigger.maximumItemSelectionCount.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.pickfurnis.desc')})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/WiredBaseView.tsx\nconst WiredBaseView=props=>{const{wiredType='',requiresFurni=WiredFurniType.STUFF_SELECTION_OPTION_NONE,save=null,validate=null,children=null,hasSpecialInput=false}=props;const[wiredName,setWiredName]=Object(react[\"useState\"])(null);const[wiredDescription,setWiredDescription]=Object(react[\"useState\"])(null);const[needsSave,setNeedsSave]=Object(react[\"useState\"])(false);const{trigger=null,setTrigger=null,setIntParams=null,setStringParam=null,setFurniIds=null,saveWired=null}=useWiredContext();const close=()=>setTrigger(null);const onSave=()=>{if(validate&&!validate())return;if(save)save();setNeedsSave(true);};Object(react[\"useEffect\"])(()=>{if(!needsSave)return;saveWired();setNeedsSave(false);},[needsSave,saveWired]);Object(react[\"useEffect\"])(()=>{if(!trigger)return;const spriteId=trigger.spriteId||-1;const furniData=GetSessionDataManager().getFloorItemData(spriteId);if(!furniData){setWiredName('NAME: '+spriteId);setWiredDescription('NAME: '+spriteId);}else{setWiredName(furniData.name);setWiredDescription(furniData.description);}if(hasSpecialInput){setIntParams(trigger.intData);setStringParam(trigger.stringData);}if(requiresFurni>WiredFurniType.STUFF_SELECTION_OPTION_NONE){setFurniIds(prevValue=>{if(prevValue&&prevValue.length)WiredSelectionVisualizer_WiredSelectionVisualizer.clearSelectionShaderFromFurni(prevValue);if(trigger.selectedItems&&trigger.selectedItems.length){WiredSelectionVisualizer_WiredSelectionVisualizer.applySelectionShaderToFurni(trigger.selectedItems);return trigger.selectedItems;}return[];});}return()=>{setNeedsSave(false);setIntParams([]);setStringParam(null);setFurniIds(prevValue=>{if(prevValue&&prevValue.length)WiredSelectionVisualizer_WiredSelectionVisualizer.clearSelectionShaderFromFurni(prevValue);return[];});};},[trigger,hasSpecialInput,requiresFurni,setIntParams,setStringParam,setFurniIds]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardView,{uniqueKey:\"nitro-wired\",className:\"nitro-wired\",theme:\"wired\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitroCardHeaderView,{headerText:LocalizeText('wiredfurni.title'),onCloseClick:close}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(NitroCardContentView,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-wired-${wiredType}`}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:wiredName})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:wiredDescription})]}),!!children&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),children,requiresFurni>WiredFurniType.STUFF_SELECTION_OPTION_NONE&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredFurniSelectorView,{})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:onSave,children:LocalizeText('wiredfurni.ready')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"button\",className:\"btn btn-primary notification-buttons w-100\",onClick:close,children:LocalizeText('cancel')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBaseView.tsx\nconst WiredActionBaseView=props=>{const{requiresFurni=WiredFurniType.STUFF_SELECTION_OPTION_NONE,save=null,hasSpecialInput=false,children=null}=props;const{trigger=null,actionDelay=0,setActionDelay=null}=useWiredContext();Object(react[\"useEffect\"])(()=>{setActionDelay(trigger.delayInPulses);},[trigger,setActionDelay]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredBaseView,{wiredType:\"action\",requiresFurni:requiresFurni,save:save,hasSpecialInput:hasSpecialInput,children:[children,!!children&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.delay',['seconds'],[GetWiredTimeLocale(actionDelay)])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:0,max:20,value:actionDelay,onChange:event=>setActionDelay(event)})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotChangeFigureView.tsx\nconst DEFAULT_FIGURE='hd-180-1.ch-210-66.lg-270-82.sh-290-81';const WiredActionBotChangeFigureView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const[figure,setFigure]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(botName+WIRED_STRING_DELIMETER+figure);Object(react[\"useEffect\"])(()=>{const data=trigger.stringData.split(WIRED_STRING_DELIMETER);if(data.length>0)setBotName(data[0]);if(data.length>1)setFigure(data[1].length>0?data[1]:DEFAULT_FIGURE);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{center:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LayoutAvatarImageView,{figure:figure,direction:4}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:event=>setFigure(GetSessionDataManager().figure),children:LocalizeText('wiredfurni.params.capture.figure')})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotFollowAvatarView.tsx\nconst WiredActionBotFollowAvatarView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const[followMode,setFollowMode]=Object(react[\"useState\"])(-1);const{trigger=null,setStringParam=null,setIntParams=null}=useWiredContext();const save=()=>{setStringParam(botName);setIntParams([followMode]);};Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);setFollowMode(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"followMode\",id:\"followMode1\",checked:followMode===1,onChange:event=>setFollowMode(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.start.following')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"followMode\",id:\"followMode2\",checked:followMode===0,onChange:event=>setFollowMode(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.stop.following')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotGiveHandItemView.tsx\nconst ALLOWED_HAND_ITEM_IDS=[2,5,7,8,9,10,27];const WiredActionBotGiveHandItemView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const[handItemId,setHandItemId]=Object(react[\"useState\"])(-1);const{trigger=null,setStringParam=null,setIntParams=null}=useWiredContext();const save=()=>{setStringParam(botName);setIntParams([handItemId]);};Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);setHandItemId(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.handitem')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm\",value:handItemId,onChange:event=>setHandItemId(parseInt(event.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:\"------\"}),ALLOWED_HAND_ITEM_IDS.map(value=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:value,children:LocalizeText(`handitem${value}`)},value))]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotMoveView.tsx\nconst WiredActionBotMoveView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(botName);Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotTalkToAvatarView.tsx\nconst WiredActionBotTalkToAvatarView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const[message,setMessage]=Object(react[\"useState\"])('');const[talkMode,setTalkMode]=Object(react[\"useState\"])(-1);const{trigger=null,setStringParam=null,setIntParams=null}=useWiredContext();const save=()=>{setStringParam(botName+WIRED_STRING_DELIMETER+message);setIntParams([talkMode]);};Object(react[\"useEffect\"])(()=>{const data=trigger.stringData.split(WIRED_STRING_DELIMETER);if(data.length>0)setBotName(data[0]);if(data.length>1)setMessage(data[1].length>0?data[1]:'');setTalkMode(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:64,value:message,onChange:event=>setMessage(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode1\",checked:talkMode===0,onChange:event=>setTalkMode(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.talk')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode2\",checked:talkMode===1,onChange:event=>setTalkMode(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.whisper')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotTalkView.tsx\nconst WiredActionBotTalkView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const[message,setMessage]=Object(react[\"useState\"])('');const[talkMode,setTalkMode]=Object(react[\"useState\"])(-1);const{trigger=null,setStringParam=null,setIntParams=null}=useWiredContext();const save=()=>{setStringParam(botName+WIRED_STRING_DELIMETER+message);setIntParams([talkMode]);};Object(react[\"useEffect\"])(()=>{const data=trigger.stringData.split(WIRED_STRING_DELIMETER);if(data.length>0)setBotName(data[0]);if(data.length>1)setMessage(data[1].length>0?data[1]:'');setTalkMode(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:64,value:message,onChange:event=>setMessage(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode1\",checked:talkMode===0,onChange:event=>setTalkMode(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.talk')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"talkMode\",id:\"talkMode2\",checked:talkMode===1,onChange:event=>setTalkMode(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.shout')})]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionBotTeleportView.tsx\nconst WiredActionBotTeleportView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(botName);Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionCallAnotherStackView.tsx\nconst WiredActionCallAnotherStackView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionChaseView.tsx\nconst WiredActionChaseView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionChatView.tsx\nconst WiredActionChatView=props=>{const[message,setMessage]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(message);Object(react[\"useEffect\"])(()=>{setMessage(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:message,onChange:event=>setMessage(event.target.value),maxLength:100})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionFleeView.tsx\nconst WiredActionFleeView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionGiveRewardView.tsx\nconst WiredActionGiveRewardView=props=>{const[limitEnabled,setLimitEnabled]=Object(react[\"useState\"])(false);const[rewardTime,setRewardTime]=Object(react[\"useState\"])(1);const[uniqueRewards,setUniqueRewards]=Object(react[\"useState\"])(false);const[rewardsLimit,setRewardsLimit]=Object(react[\"useState\"])(1);const[limitationInterval,setLimitationInterval]=Object(react[\"useState\"])(1);const[rewards,setRewards]=Object(react[\"useState\"])([]);const{trigger=null,setIntParams=null,setStringParam=null}=useWiredContext();const addReward=Object(react[\"useCallback\"])(()=>{setRewards(rewards=>[...rewards,{isBadge:false,itemCode:'',probability:null}]);},[setRewards]);const removeReward=Object(react[\"useCallback\"])(index=>{setRewards(prevValue=>{const newValues=Array.from(prevValue);newValues.splice(index,1);return newValues;});},[setRewards]);const updateReward=Object(react[\"useCallback\"])((index,isBadge,itemCode,probability)=>{const rewardsClone=Array.from(rewards);const reward=rewardsClone[index];if(!reward)return;reward.isBadge=isBadge;reward.itemCode=itemCode;reward.probability=probability;setRewards(rewardsClone);},[rewards,setRewards]);const save=Object(react[\"useCallback\"])(()=>{let stringRewards=[];for(const reward of rewards){if(!reward.itemCode)continue;const rewardsString=[reward.isBadge?'0':'1',reward.itemCode,reward.probability.toString()];stringRewards.push(rewardsString.join(','));}if(stringRewards.length>0){setStringParam(stringRewards.join(';'));setIntParams([rewardTime,uniqueRewards?1:0,rewardsLimit,limitationInterval]);}},[rewardTime,uniqueRewards,rewardsLimit,limitationInterval,rewards,setIntParams,setStringParam]);Object(react[\"useEffect\"])(()=>{const readRewards=[];if(trigger.stringData.length>0&&trigger.stringData.includes(';')){const splittedRewards=trigger.stringData.split(';');for(const rawReward of splittedRewards){const reward=rawReward.split(',');if(reward.length!==3)continue;readRewards.push({isBadge:reward[0]==='0',itemCode:reward[1],probability:Number(reward[2])});}}if(readRewards.length===0)readRewards.push({isBadge:false,itemCode:'',probability:null});setRewardTime(trigger.intData.length>0?trigger.intData[0]:0);setUniqueRewards(trigger.intData.length>1?trigger.intData[1]===1:false);setRewardsLimit(trigger.intData.length>2?trigger.intData[2]:0);setLimitationInterval(trigger.intData.length>3?trigger.intData[3]:0);setLimitEnabled(trigger.intData.length>3?trigger.intData[3]>0:false);setRewards(readRewards);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"limitEnabled\",onChange:event=>setLimitEnabled(event.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.prizelimit',['amount'],[limitEnabled?rewardsLimit.toString():''])})]}),!limitEnabled&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"bg-muted rounded p-1\",children:\"Reward limit not set. Make sure rewards are badges or non-tradeable items.\"}),limitEnabled&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:1000,value:rewardsLimit,onChange:event=>setRewardsLimit(event)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:\"How often can a user be rewarded?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"form-select form-select-sm w-100\",value:rewardTime,onChange:e=>setRewardTime(Number(e.target.value)),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"0\",children:\"Once\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"option\",{value:\"3\",children:[\"Once every \",limitationInterval,\" minutes\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"option\",{value:\"2\",children:[\"Once every \",limitationInterval,\" hours\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"option\",{value:\"1\",children:[\"Once every \",limitationInterval,\" days\"]})]}),rewardTime>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:limitationInterval,onChange:event=>setLimitationInterval(Number(event.target.value))})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"uniqueRewards\",checked:uniqueRewards,onChange:e=>setUniqueRewards(e.target.checked)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:\"Unique rewards\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{center:true,className:\"bg-muted rounded p-1\",children:\"If checked each reward will be given once to each user. This will disable the probabilities option.\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{className:\"m-0 bg-dark\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{justifyContent:\"between\",alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:\"Rewards\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"success\",onClick:addReward,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"plus\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Column,{gap:1,children:rewards&&rewards.map((reward,index)=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:reward.isBadge,onChange:e=>updateReward(index,e.target.checked,reward.itemCode,reward.probability)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:\"Badge?\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:reward.itemCode,onChange:e=>updateReward(index,reward.isBadge,e.target.value,reward.probability),placeholder:\"Item Code\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:reward.probability,onChange:e=>updateReward(index,reward.isBadge,reward.itemCode,Number(e.target.value)),placeholder:\"Probability\"}),index>0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{variant:\"danger\",onClick:event=>removeReward(index),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_fontawesome_index_es[\"a\" /* FontAwesomeIcon */],{icon:\"trash\"})})]},index);})})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionGiveScoreToPredefinedTeamView.tsx\nconst WiredActionGiveScoreToPredefinedTeamView=props=>{const[points,setPoints]=Object(react[\"useState\"])(1);const[time,setTime]=Object(react[\"useState\"])(1);const[selectedTeam,setSelectedTeam]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([points,time,selectedTeam]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setPoints(trigger.intData[0]);setTime(trigger.intData[1]);setSelectedTeam(trigger.intData[2]);}else{setPoints(1);setTime(1);setSelectedTeam(1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.setpoints',['points'],[points.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:100,value:points,onChange:event=>setPoints(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.settimesingame',['times'],[time.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:10,value:time,onChange:event=>setTime(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.team')}),[1,2,3,4].map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${value}`,checked:selectedTeam===value,onChange:event=>setSelectedTeam(value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.team.'+value)})]},value);})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionGiveScoreView.tsx\nconst WiredActionGiveScoreView=props=>{const[points,setPoints]=Object(react[\"useState\"])(1);const[time,setTime]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([points,time]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setPoints(trigger.intData[0]);setTime(trigger.intData[1]);}else{setPoints(1);setTime(1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.setpoints',['points'],[points.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:100,value:points,onChange:event=>setPoints(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.settimesingame',['times'],[time.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:10,value:time,onChange:event=>setTime(event)})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionJoinTeamView.tsx\nconst WiredActionJoinTeamView=props=>{const[selectedTeam,setSelectedTeam]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([selectedTeam]);Object(react[\"useEffect\"])(()=>{setSelectedTeam(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.team')}),[1,2,3,4].map(team=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${team}`,checked:selectedTeam===team,onChange:event=>setSelectedTeam(team)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`wiredfurni.params.team.${team}`)})]},team);})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionKickFromRoomView.tsx\nconst WiredActionKickFromRoomView=props=>{const[message,setMessage]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(message);Object(react[\"useEffect\"])(()=>{setMessage(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:message,onChange:event=>setMessage(event.target.value),maxLength:100})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionLeaveTeamView.tsx\nconst WiredActionLeaveTeamView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionMoveAndRotateFurniView.tsx\nconst directionOptions=[{value:0,icon:'ne'},{value:2,icon:'se'},{value:4,icon:'sw'},{value:6,icon:'nw'}];const rotationOptions=[0,1,2,3,4,5,6];const WiredActionMoveAndRotateFurniView=props=>{const[movement,setMovement]=Object(react[\"useState\"])(-1);const[rotation,setRotation]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([movement,rotation]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setMovement(trigger.intData[0]);setRotation(trigger.intData[1]);}else{setMovement(-1);setRotation(-1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.startdir')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:1,children:directionOptions.map(option=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${option.value}`,checked:movement===option.value,onChange:event=>setMovement(option.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-${option.icon}`})})]},option.value);})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.turn')}),rotationOptions.map(option=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"rotation\",id:`rotation${option}`,checked:rotation===option,onChange:event=>setRotation(option)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`wiredfurni.params.turn.${option}`)})]},option);})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionMoveFurniToView.tsx\nconst WiredActionMoveFurniToView_directionOptions=[{value:0,icon:'ne'},{value:2,icon:'se'},{value:4,icon:'sw'},{value:6,icon:'nw'}];const WiredActionMoveFurniToView=props=>{const[spacing,setSpacing]=Object(react[\"useState\"])(-1);const[movement,setMovement]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([movement,spacing]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setSpacing(trigger.intData[1]);setMovement(trigger.intData[0]);}else{setSpacing(-1);setMovement(-1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.emptytiles',['tiles'],[spacing.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:5,value:spacing,onChange:event=>setSpacing(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.startdir')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Flex,{gap:1,children:WiredActionMoveFurniToView_directionOptions.map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${value.value}`,checked:movement===value.value,onChange:event=>setMovement(value.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-${value.icon}`})})]},value.value);})})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionMoveFurniView.tsx\nconst WiredActionMoveFurniView_directionOptions=[{value:4,icon:'ne'},{value:5,icon:'se'},{value:6,icon:'sw'},{value:7,icon:'nw'},{value:2,icon:'mv-2'},{value:3,icon:'mv-3'},{value:1,icon:'mv-1'}];const WiredActionMoveFurniView_rotationOptions=[0,1,2,3];const WiredActionMoveFurniView=props=>{const[movement,setMovement]=Object(react[\"useState\"])(-1);const[rotation,setRotation]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([movement,rotation]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setMovement(trigger.intData[0]);setRotation(trigger.intData[1]);}else{setMovement(-1);setRotation(-1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.movefurni')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:\"movement0\",checked:movement===0,onChange:event=>setMovement(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.movefurni.0')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,children:[WiredActionMoveFurniView_directionOptions.map(option=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"movement\",id:`movement${option.value}`,checked:movement===option.value,onChange:event=>setMovement(option.value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-${option.icon}`})]},option.value);}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"col\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.rotatefurni')}),WiredActionMoveFurniView_rotationOptions.map(option=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"rotation\",id:`rotation${option}`,checked:rotation===option,onChange:event=>setRotation(option)}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Text,{children:[[1,2].includes(option)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{className:`icon icon-rot-${option}`}),LocalizeText(`wiredfurni.params.rotatefurni.${option}`)]})]},option);})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionMuteUserView.tsx\nconst WiredActionMuteUserView=props=>{const[time,setTime]=Object(react[\"useState\"])(-1);const[message,setMessage]=Object(react[\"useState\"])('');const{trigger=null,setIntParams=null,setStringParam=null}=useWiredContext();const save=()=>{setIntParams([time]);setStringParam(message);};Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);setMessage(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.length.minutes',['minutes'],[time.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:10,value:time,onChange:event=>setTime(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.message')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:message,onChange:event=>setMessage(event.target.value),maxLength:100})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionResetView.tsx\nconst WiredActionResetView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionSetFurniStateToView.tsx\nconst WiredActionSetFurniStateToView=props=>{const[stateFlag,setStateFlag]=Object(react[\"useState\"])(0);const[directionFlag,setDirectionFlag]=Object(react[\"useState\"])(0);const[positionFlag,setPositionFlag]=Object(react[\"useState\"])(0);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([stateFlag,directionFlag,positionFlag]);Object(react[\"useEffect\"])(()=>{setStateFlag(trigger.getBoolean(0)?1:0);setDirectionFlag(trigger.getBoolean(1)?1:0);setPositionFlag(trigger.getBoolean(2)?1:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.conditions')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"stateFlag\",checked:!!stateFlag,onChange:event=>setStateFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.state')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"directionFlag\",checked:!!directionFlag,onChange:event=>setDirectionFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.direction')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"positionFlag\",checked:!!positionFlag,onChange:event=>setPositionFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.position')})]})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionTeleportView.tsx\nconst WiredActionTeleportView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/actions/WiredActionToggleFurniStateView.tsx\nconst WiredActionToggleFurniStateView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/common/GetWiredActionLayout.tsx\nconst GetWiredActionLayout=code=>{switch(code){case WiredActionLayout.BOT_CHANGE_FIGURE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotChangeFigureView,{});case WiredActionLayout.BOT_FOLLOW_AVATAR:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotFollowAvatarView,{});case WiredActionLayout.BOT_GIVE_HAND_ITEM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotGiveHandItemView,{});case WiredActionLayout.BOT_MOVE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotMoveView,{});case WiredActionLayout.BOT_TALK:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotTalkView,{});case WiredActionLayout.BOT_TALK_DIRECT_TO_AVTR:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotTalkToAvatarView,{});case WiredActionLayout.BOT_TELEPORT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionBotTeleportView,{});case WiredActionLayout.CALL_ANOTHER_STACK:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionCallAnotherStackView,{});case WiredActionLayout.CHASE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionChaseView,{});case WiredActionLayout.CHAT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionChatView,{});case WiredActionLayout.FLEE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionFleeView,{});case WiredActionLayout.GIVE_REWARD:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionGiveRewardView,{});case WiredActionLayout.GIVE_SCORE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionGiveScoreView,{});case WiredActionLayout.GIVE_SCORE_TO_PREDEFINED_TEAM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionGiveScoreToPredefinedTeamView,{});case WiredActionLayout.JOIN_TEAM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionJoinTeamView,{});case WiredActionLayout.KICK_FROM_ROOM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionKickFromRoomView,{});case WiredActionLayout.LEAVE_TEAM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionLeaveTeamView,{});case WiredActionLayout.MOVE_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionMoveFurniView,{});case WiredActionLayout.MOVE_AND_ROTATE_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionMoveAndRotateFurniView,{});case WiredActionLayout.MOVE_FURNI_TO:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionMoveFurniToView,{});case WiredActionLayout.MUTE_USER:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionMuteUserView,{});case WiredActionLayout.RESET:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionResetView,{});case WiredActionLayout.SET_FURNI_STATE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionSetFurniStateToView,{});case WiredActionLayout.TELEPORT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionTeleportView,{});case WiredActionLayout.TOGGLE_FURNI_STATE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredActionToggleFurniStateView,{});}return null;};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionBaseView.tsx\nconst WiredConditionBaseView=props=>{const{requiresFurni=WiredFurniType.STUFF_SELECTION_OPTION_NONE,save=null,hasSpecialInput=false,children=null}=props;const onSave=()=>save&&save();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredBaseView,{wiredType:\"condition\",requiresFurni:requiresFurni,hasSpecialInput:hasSpecialInput,save:onSave,children:children});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorHasHandItem.tsx\nconst WiredConditionActorHasHandItem_ALLOWED_HAND_ITEM_IDS=[2,5,7,8,9,10,27];const WiredConditionActorHasHandItemView=props=>{const[handItemId,setHandItemId]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([handItemId]);Object(react[\"useEffect\"])(()=>{setHandItemId(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.handitem')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"select\",{className:\"form-select form-select-sm\",value:handItemId,onChange:event=>setHandItemId(parseInt(event.target.value)),children:WiredConditionActorHasHandItem_ALLOWED_HAND_ITEM_IDS.map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:value,children:LocalizeText(`handitem${value}`)},value);})})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorIsGroupMemberView.tsx\nconst WiredConditionActorIsGroupMemberView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorIsOnFurniView.tsx\nconst WiredConditionActorIsOnFurniView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorIsTeamMemberView.tsx\nconst teamIds=[1,2,3,4];const WiredConditionActorIsTeamMemberView=props=>{const[selectedTeam,setSelectedTeam]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([selectedTeam]);Object(react[\"useEffect\"])(()=>{setSelectedTeam(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.team')}),teamIds.map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{gap:1,alignItems:\"center\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"selectedTeam\",id:`selectedTeam${value}`,checked:selectedTeam===value,onChange:event=>setSelectedTeam(value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`wiredfurni.params.team.${value}`)})]},value);})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorIsWearingBadgeView.tsx\nconst WiredConditionActorIsWearingBadgeView=props=>{const[badge,setBadge]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(badge);Object(react[\"useEffect\"])(()=>{setBadge(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.badgecode')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:badge,onChange:event=>setBadge(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionActorIsWearingEffectView.tsx\nconst WiredConditionActorIsWearingEffectView=props=>{const[effect,setEffect]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([effect]);Object(react[\"useEffect\"])(()=>{setEffect(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.effectid')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:effect,onChange:event=>setEffect(parseInt(event.target.value))})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionDateRangeView.tsx\nconst WiredConditionDateRangeView=props=>{const[startDate,setStartDate]=Object(react[\"useState\"])('');const[endDate,setEndDate]=Object(react[\"useState\"])('');const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>{let startDateMili=0;let endDateMili=0;const startDateInstance=new Date(startDate);const endDateInstance=new Date(endDate);if(startDateInstance&&endDateInstance){startDateMili=startDateInstance.getTime()/1000;endDateMili=endDateInstance.getTime()/1000;}setIntParams([startDateMili,endDateMili]);};Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){let startDate=new Date();let endDate=new Date();if(trigger.intData[0]>0)startDate=new Date(trigger.intData[0]*1000);if(trigger.intData[1]>0)endDate=new Date(trigger.intData[1]*1000);setStartDate(WiredDateToString(startDate));setEndDate(WiredDateToString(endDate));}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.startdate')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:startDate,onChange:e=>setStartDate(e.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.enddate')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:endDate,onChange:e=>setEndDate(e.target.value)})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionFurniHasAvatarOnView.tsx\nconst WiredConditionFurniHasAvatarOnView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionFurniHasFurniOnView.tsx\nconst WiredConditionFurniHasFurniOnView=props=>{const[requireAll,setRequireAll]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([requireAll]);Object(react[\"useEffect\"])(()=>{setRequireAll(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.requireall')}),[0,1].map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"requireAll\",id:`requireAll${value}`,checked:requireAll===value,onChange:event=>setRequireAll(value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.requireall.'+value)})]},value);})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionFurniHasNotFurniOnView.tsx\nconst WiredConditionFurniHasNotFurniOnView=props=>{const[requireAll,setRequireAll]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([requireAll]);Object(react[\"useEffect\"])(()=>{setRequireAll(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.not_requireall')}),[0,1].map(value=>{return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"requireAll\",id:`requireAll${value}`,checked:requireAll===value,onChange:event=>setRequireAll(value)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText(`wiredfurni.params.not_requireall.${value}`)})]},value);})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionFurniIsOfTypeView.tsx\nconst WiredConditionFurniIsOfTypeView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionFurniMatchesSnapshotView.tsx\nconst WiredConditionFurniMatchesSnapshotView=props=>{const[stateFlag,setStateFlag]=Object(react[\"useState\"])(0);const[directionFlag,setDirectionFlag]=Object(react[\"useState\"])(0);const[positionFlag,setPositionFlag]=Object(react[\"useState\"])(0);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([stateFlag,directionFlag,positionFlag]);Object(react[\"useEffect\"])(()=>{setStateFlag(trigger.getBoolean(0)?1:0);setDirectionFlag(trigger.getBoolean(1)?1:0);setPositionFlag(trigger.getBoolean(2)?1:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.conditions')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"stateFlag\",checked:!!stateFlag,onChange:event=>setStateFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.state')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"directionFlag\",checked:!!directionFlag,onChange:event=>setDirectionFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.direction')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"positionFlag\",checked:!!positionFlag,onChange:event=>setPositionFlag(event.target.checked?1:0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.condition.position')})]})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionTimeElapsedLessView.tsx\nconst WiredConditionTimeElapsedLessView=props=>{const[time,setTime]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([time]);Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.allowbefore',['seconds'],[GetWiredTimeLocale(time)])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:1200,value:time,onChange:event=>setTime(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionTimeElapsedMoreView.tsx\nconst WiredConditionTimeElapsedMoreView=props=>{const[time,setTime]=Object(react[\"useState\"])(-1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([time]);Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.allowafter',['seconds'],[GetWiredTimeLocale(time)])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:1200,value:time,onChange:event=>setTime(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/conditions/WiredConditionUserCountInRoomView.tsx\nconst WiredConditionUserCountInRoomView=props=>{const[min,setMin]=Object(react[\"useState\"])(1);const[max,setMax]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([min,max]);Object(react[\"useEffect\"])(()=>{if(trigger.intData.length>=2){setMin(trigger.intData[0]);setMax(trigger.intData[1]);}else{setMin(1);setMax(1);}},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredConditionBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.usercountmin',['value'],[min.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:50,value:min,onChange:event=>setMin(event)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.usercountmax',['value'],[max.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:50,value:max,onChange:event=>setMax(event)})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/common/GetWiredConditionLayout.tsx\nconst GetWiredConditionLayout=code=>{switch(code){case WiredConditionlayout.ACTOR_HAS_HANDITEM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorHasHandItemView,{});case WiredConditionlayout.ACTOR_IS_GROUP_MEMBER:case WiredConditionlayout.NOT_ACTOR_IN_GROUP:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorIsGroupMemberView,{});case WiredConditionlayout.ACTOR_IS_ON_FURNI:case WiredConditionlayout.NOT_ACTOR_ON_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorIsOnFurniView,{});case WiredConditionlayout.ACTOR_IS_IN_TEAM:case WiredConditionlayout.NOT_ACTOR_IN_TEAM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorIsTeamMemberView,{});case WiredConditionlayout.ACTOR_IS_WEARING_BADGE:case WiredConditionlayout.NOT_ACTOR_WEARS_BADGE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorIsWearingBadgeView,{});case WiredConditionlayout.ACTOR_IS_WEARING_EFFECT:case WiredConditionlayout.NOT_ACTOR_WEARING_EFFECT:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionActorIsWearingEffectView,{});case WiredConditionlayout.DATE_RANGE_ACTIVE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionDateRangeView,{});case WiredConditionlayout.FURNIS_HAVE_AVATARS:case WiredConditionlayout.FURNI_NOT_HAVE_HABBO:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionFurniHasAvatarOnView,{});case WiredConditionlayout.HAS_STACKED_FURNIS:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionFurniHasFurniOnView,{});case WiredConditionlayout.NOT_HAS_STACKED_FURNIS:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionFurniHasNotFurniOnView,{});case WiredConditionlayout.STUFF_TYPE_MATCHES:case WiredConditionlayout.NOT_FURNI_IS_OF_TYPE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionFurniIsOfTypeView,{});case WiredConditionlayout.STATES_MATCH:case WiredConditionlayout.NOT_STATES_MATCH:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionFurniMatchesSnapshotView,{});case WiredConditionlayout.TIME_ELAPSED_LESS:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionTimeElapsedLessView,{});case WiredConditionlayout.TIME_ELAPSED_MORE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionTimeElapsedMoreView,{});case WiredConditionlayout.USER_COUNT_IN:case WiredConditionlayout.NOT_USER_COUNT_IN:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredConditionUserCountInRoomView,{});}return null;};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerBaseView.tsx\nconst WiredTriggerBaseView=props=>{const{requiresFurni=WiredFurniType.STUFF_SELECTION_OPTION_NONE,save=null,hasSpecialInput=false,children=null}=props;const onSave=()=>save&&save();return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredBaseView,{wiredType:\"trigger\",requiresFurni:requiresFurni,hasSpecialInput:hasSpecialInput,save:onSave,children:children});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerAvatarEnterRoomView.tsx\nconst WiredTriggerAvatarEnterRoomView=props=>{const[username,setUsername]=Object(react[\"useState\"])('');const[avatarMode,setAvatarMode]=Object(react[\"useState\"])(0);const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(avatarMode===1?username:'');Object(react[\"useEffect\"])(()=>{setUsername(trigger.stringData);setAvatarMode(trigger.stringData?1:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.picktriggerer')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"avatarMode\",id:\"avatarMode0\",checked:avatarMode===0,onChange:event=>setAvatarMode(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.anyavatar')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"avatarMode\",id:\"avatarMode1\",checked:avatarMode===1,onChange:event=>setAvatarMode(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.certainavatar')})]}),avatarMode===1&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:username,onChange:event=>setUsername(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerAvatarSaysSomethingView.tsx\nconst WiredTriggerAvatarSaysSomethingView=props=>{const[message,setMessage]=Object(react[\"useState\"])('');const[triggererAvatar,setTriggererAvatar]=Object(react[\"useState\"])(-1);const{trigger=null,setStringParam=null,setIntParams=null}=useWiredContext();const save=()=>{setStringParam(message);setIntParams([triggererAvatar]);};Object(react[\"useEffect\"])(()=>{setMessage(trigger.stringData);setTriggererAvatar(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.whatissaid')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:message,onChange:event=>setMessage(event.target.value)})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.picktriggerer')}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"triggererAvatar\",id:\"triggererAvatar0\",checked:triggererAvatar===0,onChange:event=>setTriggererAvatar(0)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:LocalizeText('wiredfurni.params.anyavatar')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"triggererAvatar\",id:\"triggererAvatar1\",checked:triggererAvatar===1,onChange:event=>setTriggererAvatar(1)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{children:GetSessionDataManager().userName})]})]})]});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerAvatarWalksOffFurniView.tsx\nconst WiredTriggerAvatarWalksOffFurniView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerAvatarWalksOnFurni.tsx\nconst WiredTriggerAvatarWalksOnFurniView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerBotReachedAvatarView.tsx\nconst WiredTriggerBotReachedAvatarView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(botName);Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerBotReachedStuffView.tsx\nconst WiredTriggerBotReachedStuffView=props=>{const[botName,setBotName]=Object(react[\"useState\"])('');const{trigger=null,setStringParam=null}=useWiredContext();const save=()=>setStringParam(botName);Object(react[\"useEffect\"])(()=>{setBotName(trigger.stringData);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.bot.name')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:32,value:botName,onChange:event=>setBotName(event.target.value)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerCollisionView.tsx\nconst WiredTriggerCollisionView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerExecuteOnceView.tsx\nconst WiredTriggeExecuteOnceView=props=>{const[time,setTime]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([time]);Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.settime',['seconds'],[GetWiredTimeLocale(time)])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:1200,value:time,onChange:event=>setTime(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerExecutePeriodicallyLongView.tsx\nconst WiredTriggeExecutePeriodicallyLongView=props=>{const[time,setTime]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([time]);Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.setlongtime',['time'],[nitro_renderer[\"Kb\" /* FriendlyTime */].format(time*5).toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:120,value:time,onChange:event=>setTime(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerExecutePeriodicallyView.tsx\nconst WiredTriggeExecutePeriodicallyView=props=>{const[time,setTime]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([time]);Object(react[\"useEffect\"])(()=>{setTime(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.settime',['seconds'],[GetWiredTimeLocale(time)])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:60,value:time,onChange:event=>setTime(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerGameEndsView.tsx\nconst WiredTriggerGameEndsView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerGameStartsView.tsx\nconst WiredTriggerGameStartsView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerScoreAchievedView.tsx\nconst WiredTriggeScoreAchievedView=props=>{const[points,setPoints]=Object(react[\"useState\"])(1);const{trigger=null,setIntParams=null}=useWiredContext();const save=()=>setIntParams([points]);Object(react[\"useEffect\"])(()=>{setPoints(trigger.intData.length>0?trigger.intData[0]:0);},[trigger]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:true,save:save,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Column,{gap:1,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Text,{gfbold:true,children:LocalizeText('wiredfurni.params.setscore',['points'],[points.toString()])}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(prod[\"a\" /* default */],{className:'wired-slider',min:1,max:1000,value:points,onChange:event=>setPoints(event)})]})});};\n// CONCATENATED MODULE: ./src/components/wired/views/triggers/WiredTriggerToggleFurniView.tsx\nconst WiredTriggerToggleFurniView=props=>{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBaseView,{requiresFurni:WiredFurniType.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:false,save:null});};\n// CONCATENATED MODULE: ./src/components/wired/common/GetWiredTriggerLayout.tsx\nconst GetWiredTriggerLayout=code=>{switch(code){case WiredTriggerLayout.AVATAR_ENTERS_ROOM:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerAvatarEnterRoomView,{});case WiredTriggerLayout.AVATAR_SAYS_SOMETHING:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerAvatarSaysSomethingView,{});case WiredTriggerLayout.AVATAR_WALKS_OFF_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerAvatarWalksOffFurniView,{});case WiredTriggerLayout.AVATAR_WALKS_ON_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerAvatarWalksOnFurniView,{});case WiredTriggerLayout.BOT_REACHED_AVATAR:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBotReachedAvatarView,{});case WiredTriggerLayout.BOT_REACHED_STUFF:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerBotReachedStuffView,{});case WiredTriggerLayout.COLLISION:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerCollisionView,{});case WiredTriggerLayout.EXECUTE_ONCE:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggeExecuteOnceView,{});case WiredTriggerLayout.EXECUTE_PERIODICALLY:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggeExecutePeriodicallyView,{});case WiredTriggerLayout.EXECUTE_PERIODICALLY_LONG:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggeExecutePeriodicallyLongView,{});case WiredTriggerLayout.GAME_ENDS:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerGameEndsView,{});case WiredTriggerLayout.GAME_STARTS:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerGameStartsView,{});case WiredTriggerLayout.SCORE_ACHIEVED:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggeScoreAchievedView,{});case WiredTriggerLayout.TOGGLE_FURNI:return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredTriggerToggleFurniView,{});}return null;};\n// CONCATENATED MODULE: ./src/components/wired/common/GetWiredLayout.tsx\nconst GetWiredLayout=trigger=>{if(trigger instanceof nitro_renderer[\"Zi\" /* WiredActionDefinition */])return GetWiredActionLayout(trigger.code);if(trigger instanceof nitro_renderer[\"oi\" /* TriggerDefinition */])return GetWiredTriggerLayout(trigger.code);if(trigger instanceof nitro_renderer[\"lb\" /* ConditionDefinition */])return GetWiredConditionLayout(trigger.code);return null;};\n// CONCATENATED MODULE: ./src/components/wired/WiredMessageHandler.tsx\nconst WiredMessageHandler=props=>{const{setTrigger=null}=useWiredContext();const onWiredFurniActionEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTrigger(parser.definition);},[setTrigger]);const onWiredFurniConditionEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTrigger(parser.definition);},[setTrigger]);const onWiredFurniTriggerEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();setTrigger(parser.definition);},[setTrigger]);const onWiredOpenEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();console.log(parser);},[]);const onWiredRewardResultMessageEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();console.log(parser);},[]);const onWiredSaveSuccessEvent=Object(react[\"useCallback\"])(event=>{setTrigger(null);},[setTrigger]);const onWiredValidationErrorEvent=Object(react[\"useCallback\"])(event=>{const parser=event.getParser();NotificationUtilities_NotificationUtilities.simpleAlert(parser.info,NotificationAlertType.DEFAULT,null,null,LocalizeText('error.title'));console.log(parser);},[]);UseMessageEventHook(nitro_renderer[\"aj\" /* WiredFurniActionEvent */],onWiredFurniActionEvent);UseMessageEventHook(nitro_renderer[\"bj\" /* WiredFurniConditionEvent */],onWiredFurniConditionEvent);UseMessageEventHook(nitro_renderer[\"cj\" /* WiredFurniTriggerEvent */],onWiredFurniTriggerEvent);UseMessageEventHook(nitro_renderer[\"dj\" /* WiredOpenEvent */],onWiredOpenEvent);UseMessageEventHook(nitro_renderer[\"ej\" /* WiredRewardResultMessageEvent */],onWiredRewardResultMessageEvent);UseMessageEventHook(nitro_renderer[\"fj\" /* WiredSaveSuccessEvent */],onWiredSaveSuccessEvent);UseMessageEventHook(nitro_renderer[\"gj\" /* WiredValidationErrorEvent */],onWiredValidationErrorEvent);return null;};\n// CONCATENATED MODULE: ./src/components/wired/WiredView.tsx\nconst WiredView=props=>{const[trigger,setTrigger]=Object(react[\"useState\"])(null);const[intParams,setIntParams]=Object(react[\"useState\"])([]);const[stringParam,setStringParam]=Object(react[\"useState\"])('');const[furniIds,setFurniIds]=Object(react[\"useState\"])([]);const[actionDelay,setActionDelay]=Object(react[\"useState\"])(0);const saveWired=()=>{const save=trigger=>{if(!trigger)return;if(trigger instanceof nitro_renderer[\"Zi\" /* WiredActionDefinition */]){SendMessageComposer(new nitro_renderer[\"si\" /* UpdateActionMessageComposer */](trigger.id,intParams,stringParam,furniIds,actionDelay,trigger.stuffTypeSelectionCode));}else if(trigger instanceof nitro_renderer[\"oi\" /* TriggerDefinition */]){SendMessageComposer(new nitro_renderer[\"vi\" /* UpdateTriggerMessageComposer */](trigger.id,intParams,stringParam,furniIds,trigger.stuffTypeSelectionCode));}else if(trigger instanceof nitro_renderer[\"lb\" /* ConditionDefinition */]){SendMessageComposer(new nitro_renderer[\"ti\" /* UpdateConditionMessageComposer */](trigger.id,intParams,stringParam,furniIds,trigger.stuffTypeSelectionCode));}};if(!IsOwnerOfFloorFurniture(trigger.id)){NotificationUtilities_NotificationUtilities.confirm(LocalizeText('wiredfurni.nonowner.change.confirm.body'),()=>{save(trigger);},null,null,null,LocalizeText('wiredfurni.nonowner.change.confirm.title'));}else{save(trigger);}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(WiredContextProvider,{value:{trigger,setTrigger,intParams,setIntParams,stringParam,setStringParam,furniIds,setFurniIds,actionDelay,setActionDelay,saveWired},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredMessageHandler,{}),trigger!==null&&GetWiredLayout(trigger)]});};\n// CONCATENATED MODULE: ./src/components/main/MainView.tsx\nconst MainView=props=>{const[isReady,setIsReady]=Object(react[\"useState\"])(false);const[landingViewVisible,setLandingViewVisible]=Object(react[\"useState\"])(true);const onRoomSessionEvent=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED:setLandingViewVisible(false);return;case nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED:setLandingViewVisible(event.openLandingView);return;}},[]);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].CREATED,onRoomSessionEvent);UseRoomSessionManagerEvent(nitro_renderer[\"Yg\" /* RoomSessionEvent */].ENDED,onRoomSessionEvent);const onLinkReceived=Object(react[\"useCallback\"])(link=>{const parts=link.split('/');if(parts.length<2)return;switch(parts[1]){case'open':if(parts.length>2){switch(parts[2]){case'credits'://HabboWebTools.openWebPageAndMinimizeClient(this._windowManager.getProperty(ExternalVariables.WEB_SHOP_RELATIVE_URL));\nbreak;default:{const name=parts[2];nitro_renderer[\"Jd\" /* HabboWebTools */].openHabblet(name);}}}return;}},[]);Object(react[\"useEffect\"])(()=>{setIsReady(true);GetCommunication().connection.onReady();},[]);Object(react[\"useEffect\"])(()=>{const linkTracker={linkReceived:onLinkReceived,eventUrlPrefix:'habblet/'};AddEventLinkTracker(linkTracker);return()=>{RemoveLinkEventTracker(linkTracker);};},[onLinkReceived]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{fit:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TransitionAnimation,{type:TransitionAnimationTypes.FADE_IN,inProp:landingViewVisible,timeout:300,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HotelView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ToolbarView,{isInRoom:!landingViewVisible}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModToolsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RoomView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ChatHistoryView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WiredView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AvatarEditorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(AchievementsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NavigatorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(InventoryView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CatalogView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FriendsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RightSideView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserSettingsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(UserProfileView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GroupsView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CameraWidgetView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HelpView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FloorplanEditorView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NitropediaView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GuideToolView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(HcCenterView,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CampaignView,{})]});};\n// CONCATENATED MODULE: ./src/workers/IntervalWebWorker.ts\n/* harmony default export */ var IntervalWebWorker = (()=>{const intervals=[];// eslint-disable-next-line no-restricted-globals\nself.onmessage=message=>{if(!message)return;const data=message.data;switch(data.type){case'CREATE_INTERVAL':{const id=data.timerId;const time=data.time;const response=data.response;const interval=setInterval(()=>postMessage(response),time);intervals.push({id,interval});return;}case'REMOVE_INTERVAL':{const id=data.timerId;const i=0;while(i<intervals.length){const interval=intervals[i];if(interval.id===id){clearInterval(interval.interval);intervals.splice(i,1);return;}}}}};});\n// CONCATENATED MODULE: ./src/workers/WorkerBuilder.ts\nclass WorkerBuilder extends Worker{constructor(worker){const code=worker.toString();const blob=new Blob([`(${code})()`]);super(URL.createObjectURL(blob));}}\n// CONCATENATED MODULE: ./src/App.tsx\nnitro_renderer[\"ef\" /* NitroVersion */].UI_VERSION=GetUIVersion();const App=props=>{const[isReady,setIsReady]=Object(react[\"useState\"])(false);const[isError,setIsError]=Object(react[\"useState\"])(false);const[message,setMessage]=Object(react[\"useState\"])('Getting Ready');const[percent,setPercent]=Object(react[\"useState\"])(0);const[imageRendering,setImageRendering]=Object(react[\"useState\"])(true);if(!GetNitroInstance()){//@ts-ignore\nif(!NitroConfig)throw new Error('NitroConfig is not defined!');nitro_renderer[\"Oe\" /* Nitro */].bootstrap();const worker=new WorkerBuilder(IntervalWebWorker);nitro_renderer[\"Oe\" /* Nitro */].instance.setWorker(worker);}const handler=Object(react[\"useCallback\"])(event=>{switch(event.type){case nitro_renderer[\"mb\" /* ConfigurationEvent */].LOADED:GetNitroInstance().localization.init();setPercent(prevValue=>prevValue+20);console.log(\"\\n%c                                                          \\n  Nitro V2 - FLASH UI EDIT!                               \\n  This UI-edit is created by robbis                       \\n  Do you want this UI for your hotel?                     \\n  Join our Discord                                        \\n  https://discord.gg/j3bqtZKAF3                           \\n                                                          \\n\",\"color: #FFFFFF; background: #eab9d0; padding:0px 0\");return;case nitro_renderer[\"mb\" /* ConfigurationEvent */].FAILED:setIsError(true);setMessage('Configuration Failed');return;case nitro_renderer[\"Oe\" /* Nitro */].WEBGL_UNAVAILABLE:setIsError(true);setMessage('WebGL Required');return;case nitro_renderer[\"Oe\" /* Nitro */].WEBGL_CONTEXT_LOST:setIsError(true);setMessage('WebGL Context Lost - Reloading');setTimeout(()=>window.location.reload(),1500);return;case nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_HANDSHAKING:setPercent(prevValue=>prevValue+20);return;case nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_HANDSHAKE_FAILED:setIsError(true);setMessage('Handshake Failed');return;case nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_AUTHENTICATED:setPercent(prevValue=>prevValue+20);GetNitroInstance().init();if(nitro_renderer[\"Wd\" /* LegacyExternalInterface */].available)nitro_renderer[\"Wd\" /* LegacyExternalInterface */].call('legacyTrack','authentication','authok',[]);return;case nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_ERROR:setIsError(true);setMessage('Connection Error');return;case nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_CLOSED://if(GetNitroInstance().roomEngine) GetNitroInstance().roomEngine.dispose();\n//setIsError(true);\nsetMessage('Connection Error');nitro_renderer[\"Jd\" /* HabboWebTools */].send(-1,'client.init.handshake.fail');return;case nitro_renderer[\"og\" /* RoomEngineEvent */].ENGINE_INITIALIZED:setPercent(prevValue=>prevValue+20);setTimeout(()=>setIsReady(true),300);return;case nitro_renderer[\"Ve\" /* NitroLocalizationEvent */].LOADED:{const assetUrls=GetConfiguration('preload.assets.urls');const urls=[];if(assetUrls&&assetUrls.length)for(const url of assetUrls)urls.push(GetNitroInstance().core.configuration.interpolate(url));GetNitroInstance().core.asset.downloadAssets(urls,status=>{if(status){GetCommunication().init();setPercent(prevValue=>prevValue+20);}else{setIsError(true);setMessage('Assets Failed');}});return;}}},[]);UseMainEvent(nitro_renderer[\"Oe\" /* Nitro */].WEBGL_UNAVAILABLE,handler);UseMainEvent(nitro_renderer[\"Oe\" /* Nitro */].WEBGL_CONTEXT_LOST,handler);UseMainEvent(nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_HANDSHAKING,handler);UseMainEvent(nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_HANDSHAKE_FAILED,handler);UseMainEvent(nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_AUTHENTICATED,handler);UseMainEvent(nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_ERROR,handler);UseMainEvent(nitro_renderer[\"Re\" /* NitroCommunicationDemoEvent */].CONNECTION_CLOSED,handler);UseRoomEngineEvent(nitro_renderer[\"og\" /* RoomEngineEvent */].ENGINE_INITIALIZED,handler);UseLocalizationEvent(nitro_renderer[\"Ve\" /* NitroLocalizationEvent */].LOADED,handler);UseConfigurationEvent(nitro_renderer[\"mb\" /* ConfigurationEvent */].LOADED,handler);UseConfigurationEvent(nitro_renderer[\"mb\" /* ConfigurationEvent */].FAILED,handler);Object(react[\"useEffect\"])(()=>{if(!nitro_renderer[\"Yi\" /* WebGL */].isWebGLAvailable()){DispatchUiEvent(new nitro_renderer[\"Te\" /* NitroEvent */](nitro_renderer[\"Oe\" /* Nitro */].WEBGL_UNAVAILABLE));}else{GetNitroInstance().core.configuration.init();}const resize=event=>setImageRendering(!(window.devicePixelRatio%1));window.addEventListener('resize',resize);resize(null);return()=>{window.removeEventListener('resize',resize);};},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Base,{fit:true,overflow:\"hidden\",className:imageRendering&&'image-rendering-pixelated',children:[(!isReady||isError)&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LoadingView,{isError:isError,message:message,percent:percent}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TransitionAnimation,{type:TransitionAnimationTypes.FADE_IN,inProp:isReady,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MainView,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Base,{id:\"draggable-windows-container\"})]});};\n// EXTERNAL MODULE: ./src/index.scss\nvar src_0 = __webpack_require__(136);\n\n// CONCATENATED MODULE: ./src/index.tsx\n//@ts-ignore\nindex_es[\"b\" /* library */].add(free_solid_svg_icons_index_es[\"a\" /* fas */]);Object(client[\"createRoot\"])(document.getElementById('root')).render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(App,{}));\n\n/***/ })\n\n},[[137,2,1,3]]]);","inputSourceMap":null}